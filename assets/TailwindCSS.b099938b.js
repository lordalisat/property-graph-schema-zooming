var pA=Object.defineProperty;var mA=(n,e,t)=>e in n?pA(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Vt=(n,e,t)=>(mA(n,typeof e!="symbol"?e+"":e,t),t);const gA=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}};gA();function Ne(){}const ak=n=>n;function is(n,e){for(const t in e)n[t]=e[t];return n}function lk(n){return n()}function Dy(){return Object.create(null)}function rn(n){n.forEach(lk)}function si(n){return typeof n=="function"}function on(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function Nt(n,e){return n!=n?e==e:n!==e}function vA(n){return Object.keys(n).length===0}function E0(n,...e){if(n==null)return Ne;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function na(n,e,t){n.$$.on_destroy.push(E0(e,t))}function Yr(n,e,t,r){if(n){const i=uk(n,e,t,r);return n[0](i)}}function uk(n,e,t,r){return n[1]&&r?is(t.ctx.slice(),n[1](r(e))):t.ctx}function Qr(n,e,t,r){if(n[2]&&r){const i=n[2](r(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],s=Math.max(e.dirty.length,i.length);for(let a=0;a<s;a+=1)o[a]=e.dirty[a]|i[a];return o}return e.dirty|i}return e.dirty}function Zr(n,e,t,r,i,o){if(i){const s=uk(e,t,r,o);n.p(s,i)}}function Xr(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let r=0;r<t;r++)e[r]=-1;return e}return-1}function Yn(n){return n==null?"":n}function xu(n){return n&&si(n.destroy)?n.destroy:Ne}const ck=typeof window<"u";let yA=ck?()=>window.performance.now():()=>Date.now(),C0=ck?n=>requestAnimationFrame(n):Ne;const va=new Set;function fk(n){va.forEach(e=>{e.c(n)||(va.delete(e),e.f())}),va.size!==0&&C0(fk)}function _A(n){let e;return va.size===0&&C0(fk),{promise:new Promise(t=>{va.add(e={c:n,f:t})}),abort(){va.delete(e)}}}function j(n,e){n.appendChild(e)}function hk(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function bA(n){const e=ee("style");return wA(hk(n),e),e.sheet}function wA(n,e){j(n.head||n,e)}function ue(n,e,t){n.insertBefore(e,t||null)}function le(n){n.parentNode.removeChild(n)}function xn(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function ee(n){return document.createElement(n)}function Ft(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function Ue(n){return document.createTextNode(n)}function me(){return Ue(" ")}function xt(){return Ue("")}function Ce(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function dk(n){return function(e){return e.preventDefault(),n.call(this,e)}}function pk(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function T(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Ly(n,e){const t=Object.getOwnPropertyDescriptors(n.__proto__);for(const r in e)e[r]==null?n.removeAttribute(r):r==="style"?n.style.cssText=e[r]:r==="__value"?n.value=n[r]=e[r]:t[r]&&t[r].set?n[r]=e[r]:T(n,r,e[r])}function ih(n,e){for(const t in e)T(n,t,e[t])}function Lm(n,e,t){e in n?n[e]=typeof n[e]=="boolean"&&t===""?!0:t:T(n,e,t)}function jy(n){return n===""?null:+n}function SA(n){return Array.from(n.childNodes)}function _t(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function Nn(n,e){n.value=e==null?"":e}function ri(n,e,t,r){t===null?n.style.removeProperty(e):n.style.setProperty(e,t,r?"important":"")}function By(n,e){for(let t=0;t<n.options.length;t+=1){const r=n.options[t];if(r.__value===e){r.selected=!0;return}}n.selectedIndex=-1}function EA(n){const e=n.querySelector(":checked")||n.options[0];return e&&e.__value}let fc;function CA(){if(fc===void 0){fc=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{fc=!0}}return fc}function k0(n,e){getComputedStyle(n).position==="static"&&(n.style.position="relative");const r=ee("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=CA();let o;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=Ce(window,"message",s=>{s.source===r.contentWindow&&e()})):(r.src="about:blank",r.onload=()=>{o=Ce(r.contentWindow,"resize",e)}),j(n,r),()=>{(i||o&&r.contentWindow)&&o(),le(r)}}function ze(n,e,t){n.classList[t?"add":"remove"](e)}function mk(n,e,{bubbles:t=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t,r,e),i}class kA{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,r=null){this.e||(this.is_svg?this.e=Ft(t.nodeName):this.e=ee(t.nodeName),this.t=t,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)ue(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(le)}}const oh=new Map;let sh=0;function OA(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function TA(n,e){const t={stylesheet:bA(e),rules:{}};return oh.set(n,t),t}function Fy(n,e,t,r,i,o,s,a=0){const l=16.666/r;let u=`{
`;for(let m=0;m<=1;m+=l){const p=e+(t-e)*o(m);u+=m*100+`%{${s(p,1-p)}}
`}const c=u+`100% {${s(t,1-t)}}
}`,f=`__svelte_${OA(c)}_${a}`,d=hk(n),{stylesheet:g,rules:h}=oh.get(d)||TA(d,n);h[f]||(h[f]=!0,g.insertRule(`@keyframes ${f} ${c}`,g.cssRules.length));const v=n.style.animation||"";return n.style.animation=`${v?`${v}, `:""}${f} ${r}ms linear ${i}ms 1 both`,sh+=1,f}function PA(n,e){const t=(n.style.animation||"").split(", "),r=t.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=t.length-r.length;i&&(n.style.animation=r.join(", "),sh-=i,sh||IA())}function IA(){C0(()=>{sh||(oh.forEach(n=>{const{stylesheet:e}=n;let t=e.cssRules.length;for(;t--;)e.deleteRule(t);n.rules={}}),oh.clear())})}let nu;function zl(n){nu=n}function Qa(){if(!nu)throw new Error("Function called outside component initialization");return nu}function gk(n){Qa().$$.before_update.push(n)}function Nr(n){Qa().$$.on_mount.push(n)}function fo(n){Qa().$$.on_destroy.push(n)}function hd(){const n=Qa();return(e,t,{cancelable:r=!1}={})=>{const i=n.$$.callbacks[e];if(i){const o=mk(e,t,{cancelable:r});return i.slice().forEach(s=>{s.call(n,o)}),!o.defaultPrevented}return!0}}function vk(n,e){return Qa().$$.context.set(n,e),e}function ur(n){return Qa().$$.context.get(n)}const Al=[],wt=[],jf=[],jm=[],yk=Promise.resolve();let Bm=!1;function _k(){Bm||(Bm=!0,yk.then(bk))}function Pn(){return _k(),yk}function Ki(n){jf.push(n)}function qr(n){jm.push(n)}const hp=new Set;let hc=0;function bk(){const n=nu;do{for(;hc<Al.length;){const e=Al[hc];hc++,zl(e),AA(e.$$)}for(zl(null),Al.length=0,hc=0;wt.length;)wt.pop()();for(let e=0;e<jf.length;e+=1){const t=jf[e];hp.has(t)||(hp.add(t),t())}jf.length=0}while(Al.length);for(;jm.length;)jm.pop()();Bm=!1,hp.clear(),zl(n)}function AA(n){if(n.fragment!==null){n.update(),rn(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Ki)}}let hl;function RA(){return hl||(hl=Promise.resolve(),hl.then(()=>{hl=null})),hl}function dp(n,e,t){n.dispatchEvent(mk(`${e?"intro":"outro"}${t}`))}const Bf=new Set;let so;function Ve(){so={r:0,c:[],p:so}}function qe(){so.r||rn(so.c),so=so.p}function X(n,e){n&&n.i&&(Bf.delete(n),n.i(e))}function te(n,e,t,r){if(n&&n.o){if(Bf.has(n))return;Bf.add(n),so.c.push(()=>{Bf.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}const xA={duration:0};function dc(n,e,t,r){let i=e(n,t),o=r?0:1,s=null,a=null,l=null;function u(){l&&PA(n,l)}function c(d,g){const h=d.b-o;return g*=Math.abs(h),{a:o,b:d.b,d:h,duration:g,start:d.start,end:d.start+g,group:d.group}}function f(d){const{delay:g=0,duration:h=300,easing:v=ak,tick:m=Ne,css:p}=i||xA,y={start:yA()+g,b:d};d||(y.group=so,so.r+=1),s||a?a=y:(p&&(u(),l=Fy(n,o,d,h,g,v,p)),d&&m(0,1),s=c(y,h),Ki(()=>dp(n,d,"start")),_A(b=>{if(a&&b>a.start&&(s=c(a,h),a=null,dp(n,s.b,"start"),p&&(u(),l=Fy(n,o,s.b,s.duration,0,v,i.css))),s){if(b>=s.end)m(o=s.b,1-o),dp(n,s.b,"end"),a||(s.b?u():--s.group.r||rn(s.group.c)),s=null;else if(b>=s.start){const _=b-s.start;o=s.a+s.d*v(_/s.duration),m(o,1-o)}}return!!(s||a)}))}return{run(d){si(i)?RA().then(()=>{i=i(),f(d)}):f(d)},end(){u(),s=a=null}}}const O0=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function NA(n,e){n.d(1),e.delete(n.key)}function dd(n,e){te(n,1,1,()=>{e.delete(n.key)})}function Nu(n,e,t,r,i,o,s,a,l,u,c,f){let d=n.length,g=o.length,h=d;const v={};for(;h--;)v[n[h].key]=h;const m=[],p=new Map,y=new Map;for(h=g;h--;){const S=f(i,o,h),E=t(S);let O=s.get(E);O?r&&O.p(S,e):(O=u(E,S),O.c()),p.set(E,m[h]=O),E in v&&y.set(E,Math.abs(h-v[E]))}const b=new Set,_=new Set;function w(S){X(S,1),S.m(a,c),s.set(S.key,S),c=S.first,g--}for(;d&&g;){const S=m[g-1],E=n[d-1],O=S.key,R=E.key;S===E?(c=S.first,d--,g--):p.has(R)?!s.has(O)||b.has(O)?w(S):_.has(R)?d--:y.get(O)>y.get(R)?(_.add(O),w(S)):(b.add(R),d--):(l(E,s),d--)}for(;d--;){const S=n[d];p.has(S.key)||l(S,s)}for(;g;)w(m[g-1]);return m}function zs(n,e){const t={},r={},i={$$scope:1};let o=n.length;for(;o--;){const s=n[o],a=e[o];if(a){for(const l in s)l in a||(r[l]=1);for(const l in a)i[l]||(t[l]=a[l],i[l]=1);n[o]=a}else for(const l in s)i[l]=1}for(const s in r)s in t||(t[s]=void 0);return t}function pd(n){return typeof n=="object"&&n!==null?n:{}}function Ir(n,e,t){const r=n.$$.props[e];r!==void 0&&(n.$$.bound[r]=t,t(n.$$.ctx[r]))}function Te(n){n&&n.c()}function ke(n,e,t,r){const{fragment:i,on_mount:o,on_destroy:s,after_update:a}=n.$$;i&&i.m(e,t),r||Ki(()=>{const l=o.map(lk).filter(si);s?s.push(...l):rn(l),n.$$.on_mount=[]}),a.forEach(Ki)}function Oe(n,e){const t=n.$$;t.fragment!==null&&(rn(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function MA(n,e){n.$$.dirty[0]===-1&&(Al.push(n),_k(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function nt(n,e,t,r,i,o,s,a=[-1]){const l=nu;zl(n);const u=n.$$={fragment:null,ctx:null,props:o,update:Ne,not_equal:i,bound:Dy(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Dy(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};s&&s(u.root);let c=!1;if(u.ctx=t?t(n,e.props||{},(f,d,...g)=>{const h=g.length?g[0]:d;return u.ctx&&i(u.ctx[f],u.ctx[f]=h)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](h),c&&MA(n,f)),d}):[],u.update(),c=!0,rn(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const f=SA(e.target);u.fragment&&u.fragment.l(f),f.forEach(le)}else u.fragment&&u.fragment.c();e.intro&&X(n.$$.fragment),ke(n,e.target,e.anchor,e.customElement),bk()}zl(l)}class rt{$destroy(){Oe(this,1),this.$destroy=Ne}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!vA(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function DA(n,{delay:e=0,duration:t=400,easing:r=ak}={}){const i=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:r,css:o=>`opacity: ${o*i}`}}const{window:LA}=O0;function Uy(n){let e,t,r,i,o,s,a,l,u,c,f,d,g,h,v,m,p,y=n[1].closeButton&&Vy(n);var b=n[2];function _(w){return{}}return b&&(s=new b(_())),{c(){e=ee("div"),t=ee("div"),r=ee("div"),y&&y.c(),i=me(),o=ee("div"),s&&Te(s.$$.fragment),T(o,"class",a=Yn(n[1].classContent)+" svelte-g4wg3a"),T(o,"style",n[9]),ze(o,"content",!n[0]),T(r,"class",l=Yn(n[1].classWindow)+" svelte-g4wg3a"),T(r,"role","dialog"),T(r,"aria-modal","true"),T(r,"aria-label",u=n[1].ariaLabelledBy?null:n[1].ariaLabel||null),T(r,"aria-labelledby",c=n[1].ariaLabelledBy||null),T(r,"style",n[8]),ze(r,"window",!n[0]),T(t,"class",d=Yn(n[1].classWindowWrap)+" svelte-g4wg3a"),T(t,"style",n[7]),ze(t,"wrap",!n[0]),T(e,"class",g=Yn(n[1].classBg)+" svelte-g4wg3a"),T(e,"style",n[6]),ze(e,"bg",!n[0])},m(w,S){ue(w,e,S),j(e,t),j(t,r),y&&y.m(r,null),j(r,i),j(r,o),s&&ke(s,o,null),n[49](r),n[50](t),n[51](e),v=!0,m||(p=[Ce(r,"introstart",function(){si(n[13])&&n[13].apply(this,arguments)}),Ce(r,"outrostart",function(){si(n[14])&&n[14].apply(this,arguments)}),Ce(r,"introend",function(){si(n[15])&&n[15].apply(this,arguments)}),Ce(r,"outroend",function(){si(n[16])&&n[16].apply(this,arguments)}),Ce(e,"mousedown",n[20]),Ce(e,"mouseup",n[21])],m=!0)},p(w,S){if(n=w,n[1].closeButton?y?(y.p(n,S),S[0]&2&&X(y,1)):(y=Vy(n),y.c(),X(y,1),y.m(r,i)):y&&(Ve(),te(y,1,1,()=>{y=null}),qe()),b!==(b=n[2])){if(s){Ve();const E=s;te(E.$$.fragment,1,0,()=>{Oe(E,1)}),qe()}b?(s=new b(_()),Te(s.$$.fragment),X(s.$$.fragment,1),ke(s,o,null)):s=null}(!v||S[0]&2&&a!==(a=Yn(n[1].classContent)+" svelte-g4wg3a"))&&T(o,"class",a),(!v||S[0]&512)&&T(o,"style",n[9]),S[0]&3&&ze(o,"content",!n[0]),(!v||S[0]&2&&l!==(l=Yn(n[1].classWindow)+" svelte-g4wg3a"))&&T(r,"class",l),(!v||S[0]&2&&u!==(u=n[1].ariaLabelledBy?null:n[1].ariaLabel||null))&&T(r,"aria-label",u),(!v||S[0]&2&&c!==(c=n[1].ariaLabelledBy||null))&&T(r,"aria-labelledby",c),(!v||S[0]&256)&&T(r,"style",n[8]),S[0]&3&&ze(r,"window",!n[0]),(!v||S[0]&2&&d!==(d=Yn(n[1].classWindowWrap)+" svelte-g4wg3a"))&&T(t,"class",d),(!v||S[0]&128)&&T(t,"style",n[7]),S[0]&3&&ze(t,"wrap",!n[0]),(!v||S[0]&2&&g!==(g=Yn(n[1].classBg)+" svelte-g4wg3a"))&&T(e,"class",g),(!v||S[0]&64)&&T(e,"style",n[6]),S[0]&3&&ze(e,"bg",!n[0])},i(w){v||(X(y),s&&X(s.$$.fragment,w),Ki(()=>{f||(f=dc(r,n[12],n[1].transitionWindowProps,!0)),f.run(1)}),Ki(()=>{h||(h=dc(e,n[11],n[1].transitionBgProps,!0)),h.run(1)}),v=!0)},o(w){te(y),s&&te(s.$$.fragment,w),f||(f=dc(r,n[12],n[1].transitionWindowProps,!1)),f.run(0),h||(h=dc(e,n[11],n[1].transitionBgProps,!1)),h.run(0),v=!1},d(w){w&&le(e),y&&y.d(),s&&Oe(s),n[49](null),w&&f&&f.end(),n[50](null),n[51](null),w&&h&&h.end(),m=!1,rn(p)}}}function Vy(n){let e,t,r,i,o;const s=[BA,jA],a=[];function l(u,c){return c[0]&2&&(e=null),e==null&&(e=!!u[17](u[1].closeButton)),e?0:1}return t=l(n,[-1,-1,-1]),r=a[t]=s[t](n),{c(){r.c(),i=xt()},m(u,c){a[t].m(u,c),ue(u,i,c),o=!0},p(u,c){let f=t;t=l(u,c),t===f?a[t].p(u,c):(Ve(),te(a[f],1,1,()=>{a[f]=null}),qe(),r=a[t],r?r.p(u,c):(r=a[t]=s[t](u),r.c()),X(r,1),r.m(i.parentNode,i))},i(u){o||(X(r),o=!0)},o(u){te(r),o=!1},d(u){a[t].d(u),u&&le(i)}}}function jA(n){let e,t,r,i;return{c(){e=ee("button"),T(e,"class",t=Yn(n[1].classCloseButton)+" svelte-g4wg3a"),T(e,"aria-label","Close modal"),T(e,"style",n[10]),T(e,"type","button"),ze(e,"close",!n[0])},m(o,s){ue(o,e,s),r||(i=Ce(e,"click",n[18]),r=!0)},p(o,s){s[0]&2&&t!==(t=Yn(o[1].classCloseButton)+" svelte-g4wg3a")&&T(e,"class",t),s[0]&1024&&T(e,"style",o[10]),s[0]&3&&ze(e,"close",!o[0])},i:Ne,o:Ne,d(o){o&&le(e),r=!1,i()}}}function BA(n){let e,t,r;var i=n[1].closeButton;function o(s){return{props:{onClose:s[18]}}}return i&&(e=new i(o(n))),{c(){e&&Te(e.$$.fragment),t=xt()},m(s,a){e&&ke(e,s,a),ue(s,t,a),r=!0},p(s,a){if(i!==(i=s[1].closeButton)){if(e){Ve();const l=e;te(l.$$.fragment,1,0,()=>{Oe(l,1)}),qe()}i?(e=new i(o(s)),Te(e.$$.fragment),X(e.$$.fragment,1),ke(e,t.parentNode,t)):e=null}},i(s){r||(e&&X(e.$$.fragment,s),r=!0)},o(s){e&&te(e.$$.fragment,s),r=!1},d(s){s&&le(t),e&&Oe(e,s)}}}function FA(n){let e,t,r,i,o=n[2]&&Uy(n);const s=n[48].default,a=Yr(s,n,n[47],null);return{c(){o&&o.c(),e=me(),a&&a.c()},m(l,u){o&&o.m(l,u),ue(l,e,u),a&&a.m(l,u),t=!0,r||(i=Ce(LA,"keydown",n[19]),r=!0)},p(l,u){l[2]?o?(o.p(l,u),u[0]&4&&X(o,1)):(o=Uy(l),o.c(),X(o,1),o.m(e.parentNode,e)):o&&(Ve(),te(o,1,1,()=>{o=null}),qe()),a&&a.p&&(!t||u[1]&65536)&&Zr(a,s,l,l[47],t?Qr(s,l[47],u,null):Xr(l[47]),null)},i(l){t||(X(o),X(a,l),t=!0)},o(l){te(o),te(a,l),t=!1},d(l){o&&o.d(l),l&&le(e),a&&a.d(l),r=!1,i()}}}function UA(n,e={}){return function(r){return new n({...r,props:{...e,...r.props}})}}function VA(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=hd(),s=vk,a=G=>G.tabIndex>=0&&!G.hidden&&!G.disabled&&G.style.display!=="none"&&G.type!=="hidden"&&Boolean(G.offsetWidth||G.offsetHeight||G.getClientRects().length);let{isTabbable:l=a}=e,{show:u=null}=e,{key:c="simple-modal"}=e,{ariaLabel:f=null}=e,{ariaLabelledBy:d=null}=e,{closeButton:g=!0}=e,{closeOnEsc:h=!0}=e,{closeOnOuterClick:v=!0}=e,{styleBg:m={}}=e,{styleWindowWrap:p={}}=e,{styleWindow:y={}}=e,{styleContent:b={}}=e,{styleCloseButton:_={}}=e,{classBg:w=null}=e,{classWindowWrap:S=null}=e,{classWindow:E=null}=e,{classContent:O=null}=e,{classCloseButton:R=null}=e,{unstyled:D=!1}=e,{setContext:F=s}=e,{transitionBg:B=DA}=e,{transitionBgProps:H={duration:250}}=e,{transitionWindow:L=B}=e,{transitionWindowProps:N=H}=e,{disableFocusTrap:U=!1}=e;const $={ariaLabel:f,ariaLabelledBy:d,closeButton:g,closeOnEsc:h,closeOnOuterClick:v,styleBg:m,styleWindowWrap:p,styleWindow:y,styleContent:b,styleCloseButton:_,classBg:w,classWindowWrap:S,classWindow:E,classContent:O,classCloseButton:R,transitionBg:B,transitionBgProps:H,transitionWindow:L,transitionWindowProps:N,disableFocusTrap:U,isTabbable:l,unstyled:D};let Z={...$},A=null,P,V,W,z,I,M,J,q,Q,ae,he,Pe,Fe,Ae,ye;const Me=G=>G.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase(),xe=G=>G?Object.keys(G).reduce((se,re)=>`${se}; ${Me(re)}: ${G[re]}`,""):"",fe=G=>!!(G&&G.constructor&&G.call&&G.apply),ve=()=>{t(6,I=xe(Object.assign({},{width:window.innerWidth,height:window.innerHeight},Z.styleBg))),t(7,M=xe(Z.styleWindowWrap)),t(8,J=xe(Z.styleWindow)),t(9,q=xe(Z.styleContent)),t(10,Q=xe(Z.styleCloseButton)),t(11,ae=Z.transitionBg),t(12,he=Z.transitionWindow)},de=()=>{};let Ie=de,De=de,He=de,Xe=de;const mt=(G,se={},re={},_e={})=>{t(2,A=UA(G,se)),t(1,Z={...$,...re}),ve(),k(),t(13,Ie=Ee=>{_e.onOpen&&_e.onOpen(Ee),o("open"),o("opening")}),t(14,De=Ee=>{_e.onClose&&_e.onClose(Ee),o("close"),o("closing")}),t(15,He=Ee=>{_e.onOpened&&_e.onOpened(Ee),o("opened")}),t(16,Xe=Ee=>{_e.onClosed&&_e.onClosed(Ee),o("closed")})},be=(G={})=>{!A||(t(14,De=G.onClose||De),t(16,Xe=G.onClosed||Xe),t(2,A=null),K())},Y=G=>{if(Z.closeOnEsc&&A&&G.key==="Escape"&&(G.preventDefault(),be()),A&&G.key==="Tab"&&!Z.disableFocusTrap){const se=W.querySelectorAll("*"),re=Array.from(se).filter(Z.isTabbable).sort((Ee,We)=>Ee.tabIndex-We.tabIndex);let _e=re.indexOf(document.activeElement);_e===-1&&G.shiftKey&&(_e=0),_e+=re.length+(G.shiftKey?-1:1),_e%=re.length,re[_e].focus(),G.preventDefault()}},x=G=>{Z.closeOnOuterClick&&(G.target===P||G.target===V)&&(ye=G.target)},C=G=>{Z.closeOnOuterClick&&G.target===ye&&(G.preventDefault(),be())},k=()=>{z=window.scrollY,Pe=document.body.style.position,Fe=document.body.style.overflow,Ae=document.body.style.width,document.body.style.position="fixed",document.body.style.top=`-${z}px`,document.body.style.overflow="hidden",document.body.style.width="100%"},K=()=>{document.body.style.position=Pe||"",document.body.style.top="",document.body.style.overflow=Fe||"",document.body.style.width=Ae||"",window.scrollTo(0,z)};F(c,{open:mt,close:be});let ie=!1;fo(()=>{ie&&be()}),Nr(()=>{t(46,ie=!0)});function pe(G){wt[G?"unshift":"push"](()=>{W=G,t(5,W)})}function ge(G){wt[G?"unshift":"push"](()=>{V=G,t(4,V)})}function Qe(G){wt[G?"unshift":"push"](()=>{P=G,t(3,P)})}return n.$$set=G=>{"isTabbable"in G&&t(22,l=G.isTabbable),"show"in G&&t(23,u=G.show),"key"in G&&t(24,c=G.key),"ariaLabel"in G&&t(25,f=G.ariaLabel),"ariaLabelledBy"in G&&t(26,d=G.ariaLabelledBy),"closeButton"in G&&t(27,g=G.closeButton),"closeOnEsc"in G&&t(28,h=G.closeOnEsc),"closeOnOuterClick"in G&&t(29,v=G.closeOnOuterClick),"styleBg"in G&&t(30,m=G.styleBg),"styleWindowWrap"in G&&t(31,p=G.styleWindowWrap),"styleWindow"in G&&t(32,y=G.styleWindow),"styleContent"in G&&t(33,b=G.styleContent),"styleCloseButton"in G&&t(34,_=G.styleCloseButton),"classBg"in G&&t(35,w=G.classBg),"classWindowWrap"in G&&t(36,S=G.classWindowWrap),"classWindow"in G&&t(37,E=G.classWindow),"classContent"in G&&t(38,O=G.classContent),"classCloseButton"in G&&t(39,R=G.classCloseButton),"unstyled"in G&&t(0,D=G.unstyled),"setContext"in G&&t(40,F=G.setContext),"transitionBg"in G&&t(41,B=G.transitionBg),"transitionBgProps"in G&&t(42,H=G.transitionBgProps),"transitionWindow"in G&&t(43,L=G.transitionWindow),"transitionWindowProps"in G&&t(44,N=G.transitionWindowProps),"disableFocusTrap"in G&&t(45,U=G.disableFocusTrap),"$$scope"in G&&t(47,i=G.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&8388608|n.$$.dirty[1]&32768&&ie&&(fe(u)?mt(u):be())},[D,Z,A,P,V,W,I,M,J,q,Q,ae,he,Ie,De,He,Xe,fe,be,Y,x,C,l,u,c,f,d,g,h,v,m,p,y,b,_,w,S,E,O,R,F,B,H,L,N,U,ie,i,r,pe,ge,Qe]}class qA extends rt{constructor(e){super(),nt(this,e,VA,FA,on,{isTabbable:22,show:23,key:24,ariaLabel:25,ariaLabelledBy:26,closeButton:27,closeOnEsc:28,closeOnOuterClick:29,styleBg:30,styleWindowWrap:31,styleWindow:32,styleContent:33,styleCloseButton:34,classBg:35,classWindowWrap:36,classWindow:37,classContent:38,classCloseButton:39,unstyled:0,setContext:40,transitionBg:41,transitionBgProps:42,transitionWindow:43,transitionWindowProps:44,disableFocusTrap:45},null,[-1,-1,-1])}}var ru=(n=>(n.node="Node",n.edge="Edge",n))(ru||{});class wk{constructor(){Vt(this,"x");Vt(this,"y");Vt(this,"fx");Vt(this,"fy");Vt(this,"width");Vt(this,"height");Vt(this,"stringRepres");Vt(this,"id");Vt(this,"labels");Vt(this,"properties");Vt(this,"type")}setPrintOptions(e=9,t=24){const r=this.labels.map(a=>`<b>${a}</b>`),i=this.mapToStrings(this.properties),o=[...r,...i];o.length===0&&o.push("\xA0*\xA0");const s=o.reduce((a,l)=>a>l.length?a:l.length,0);this.width=s*e,this.height=o.length*t,this.stringRepres=o.join(`
`)}mapToStrings(e){return Array.from(e).map(([t,r])=>`<i>${t}</i>: ${r}`)}}class md extends wk{constructor(t){super();Vt(this,"sourceNode");Vt(this,"targetNode");Vt(this,"origSourceNode");Vt(this,"origTargetNode");Vt(this,"isDirected",!0);Vt(this,"type",ru.edge);Object.assign(this,t),this.origSourceNode=this.sourceNode,this.origTargetNode=this.targetNode}static fromJSON(t){var r;if(!t.id)throw new Error("Edge is missing id");if(!t.source)throw new Error("Edge is missing source");if(!t.target)throw new Error("Edge is missing target");return new md({id:t.id,sourceNode:t.source,targetNode:t.target,isDirected:(r=t.isDirected)!=null?r:!0,labels:t.labels,properties:new Map(Object.entries(t.properties))})}toJSON(){return{id:this.id,source:this.sourceNode,target:this.targetNode,isDirected:this.isDirected,labels:this.labels,properties:Object.fromEntries(this.properties)}}}class gd extends wk{constructor(t){super();Vt(this,"type",ru.node);Object.assign(this,t)}static fromJSON(t){if(!t.id)throw new Error("Node is missing id");return new gd({id:t.id,labels:t.labels,properties:new Map(Object.entries(t.properties))})}toJSON(){return{id:this.id,labels:this.labels,properties:Object.fromEntries(this.properties)}}}class Za{constructor(){Vt(this,"nodes");Vt(this,"edges");this.emptyGraph()}emptyGraph(){this.nodes=new Map,this.edges=new Map}addNode(e){this.nodes.set(e.id,e)}addEdge(e){this.edges.set(e.id,e)}static fromJSON(e){const t=[],r=new Za,i=JSON.parse(e);if(r.nodes=new Map(i.nodes.map(o=>{try{const s=gd.fromJSON(o);return[s.id,s]}catch(s){return t.push(s.message),[]}})),r.edges=new Map(i.edges.map(o=>{try{const s=md.fromJSON(o);return r.nodes.has(s.sourceNode)||t.push(`Edge ${s.id} has invalid source ${s.sourceNode}`),r.nodes.has(s.targetNode)||t.push(`Edge ${s.id} has invalid source ${s.targetNode}`),[s.id,s]}catch(s){return t.push(s.message),[]}})),t.length>0)throw new Error(t.join("; "));return r}toJSON(){return JSON.stringify({nodes:[...this.nodes.values()].map(e=>e.toJSON()),edges:[...this.edges.values()].map(e=>e.toJSON())},null,2)}}function Sr(n,e=!!zA("debug")){if(e){const t=WA(n);return function(...i){console.log(`%c${n}`,`color:${t}`,...i)}}else return HA}function HA(){}function zA(n){try{if(typeof window<"u"&&typeof window.localStorage<"u")return window.localStorage[n]}catch{}}function WA(n){let e=0;for(let t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t),e|=0;return qy[Math.abs(e)%qy.length]}const qy=["#0000CC","#0099FF","#009400","#8dd200","#CCCC00","#CC9933","#ae04e7","#ff35d7","#FF3333","#FF6600","#FF9933","#FFCC33"],KA=300,Sk=300,Hy=300,GA=300,zy=50,JA=200,YA=400,QA=1200,Fm=1e3,iu=100,Wy=2e4,As=[{start:0,end:iu}],ZA=100*1024*1024,XA=1024*1024,Um=10*1024*1024,Ky=10*1024,ah={closeButton:!1,classBg:"jse-modal-bg",classWindow:"jse-modal-window",classWindowWrap:"jse-modal-window-wrap",classContent:"jse-modal-content"},$A={...ah,classWindow:"jse-modal-window jse-modal-window-sort"},eR={...ah,classWindow:"jse-modal-window jse-modal-window-transform"},T0="Insert or paste contents, enter [ insert a new array, enter { to insert a new object, or start typing to insert a new value",Ek="Open context menu (Click here, right click on the selection, or use the context menu button or Ctrl+Q)",ho="hover-insert-inside",ou="hover-insert-after",Vm="hover-collection",pp="valid",Gy="repairable",tR="invalid",Rl=(40+2)*8,xl=260,Cs={NO:"NO",SELF:"SELF",NEXT_INSIDE:"NEXT_INSIDE"};let Jy=0;function lh(){return Jy++,Jy}function qm(n){return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qm(n)}function nR(n,e){return JSON.stringify(n)===JSON.stringify(e)}function rR(n,e){return n===e}function Ck(n){return n.slice(0,n.length-1)}function iR(n){return n[n.length-1]}function oR(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rR;if(n.length<e.length)return!1;for(var r=0;r<e.length;r++)if(!t(n[r],e[r]))return!1;return!0}function vd(n){return qm(n)==="object"&&n!==null}function Yy(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function sR(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Yy(Object(t),!0).forEach(function(r){aR(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Yy(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function aR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Hm(n){return Hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hm(n)}function P0(n){if(Array.isArray(n)){var e=n.slice();return Object.getOwnPropertySymbols(n).forEach(function(r){e[r]=n[r]}),e}else if(Hm(n)==="object"){var t=sR({},n);return Object.getOwnPropertySymbols(n).forEach(function(r){t[r]=n[r]}),t}else return n}function I0(n,e,t){if(n[e]===t)return n;var r=P0(n);return r[e]=t,r}function tt(n,e){for(var t=n,r=0;r<e.length;)vd(t)?t=t[e[r]]:t=void 0,r++;return t}function gi(n,e,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.length===0)return t;var i=e[0],o=gi(n?n[i]:void 0,e.slice(1),t,r);if(!vd(n))if(r){var s=typeof i=="number"?[]:{};return s[i]=o,s}else throw new Error("Path does not exist");return I0(n,i,o)}function kk(n,e,t){if(e.length===0)return t(n);if(!vd(n))throw new Error("Path doesn't exist");var r=e[0],i=kk(n[r],e.slice(1),t);return I0(n,r,i)}function A0(n,e){if(e.length===0)return n;if(!vd(n))throw new Error("Path does not exist");if(e.length===1){var t=e[0];if(t in n){var r=P0(n);return Array.isArray(r)?r.splice(t,1):delete r[t],r}else return n}var i=e[0],o=A0(n[i],e.slice(1));return I0(n,i,o)}function R0(n,e,t){var r=e.slice(0,e.length-1),i=e[e.length-1];return kk(n,r,function(o){if(!Array.isArray(o))throw new TypeError("Array expected at path "+JSON.stringify(r));var s=P0(o);return s.splice(i,0,t),s})}function Rs(n,e){return n===void 0?!1:e.length===0?!0:Rs(n[e[0]],e.slice(1))}function Ko(n){var e=n.split("/");return e.shift(),e.map(function(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")})}function Ge(n){return n.map(Ok).join("")}function Ok(n){return"/"+String(n).replace(/~/g,"~0").replace(/\//g,"~1")}function zm(n,e){return n+Ok(e)}function Ta(n,e){return n.startsWith(e)&&(n.length===e.length||n[e.length]==="/")}function ks(n,e,t){for(var r=n,i=0;i<e.length;i++){mR(e[i]);var o=e[i];if(t&&t.before){var s=t.before(r,o);s!==void 0&&(s.json!==void 0&&(r=s.json),s.operation!==void 0&&(o=s.operation))}var a=r,l=Si(r,o.path);if(o.op==="add")r=cR(r,l,o.value);else if(o.op==="remove")r=uR(r,l);else if(o.op==="replace")r=lR(r,l,o.value);else if(o.op==="copy")r=fR(r,l,Wm(o.from));else if(o.op==="move")r=hR(r,l,Wm(o.from));else if(o.op==="test")dR(r,l,o.value);else throw new Error("Unknown JSONPatch operation "+JSON.stringify(o.op));if(t&&t.after){var u=t.after(r,o,a);u!==void 0&&(r=u)}}return r}function lR(n,e,t){return gi(n,e,t)}function uR(n,e){return A0(n,e)}function cR(n,e,t){return Mu(n,e)?R0(n,e,t):gi(n,e,t)}function fR(n,e,t){var r=tt(n,t);if(Mu(n,e))return R0(n,e,r);var i=tt(n,t);return gi(n,e,i)}function hR(n,e,t){var r=tt(n,t),i=A0(n,t);return Mu(i,e)?R0(i,e,r):gi(i,e,r)}function dR(n,e,t){if(t===void 0)throw new Error('Test failed: no value provided (path: "'.concat(Ge(e),'")'));if(!Rs(n,e))throw new Error('Test failed: path not found (path: "'.concat(Ge(e),'")'));var r=tt(n,e);if(!nR(r,t))throw new Error('Test failed, value differs (path: "'.concat(Ge(e),'")'))}function Mu(n,e){if(e.length===0)return!1;var t=tt(n,Ck(e));return Array.isArray(t)}function pR(n,e){if(iR(e)!=="-")return e;var t=Ck(e),r=tt(n,t);return t.concat(r.length)}function mR(n){var e=["add","remove","replace","copy","move","test"];if(!e.includes(n.op))throw new Error("Unknown JSONPatch op "+JSON.stringify(n.op));if(typeof n.path!="string")throw new Error('Required property "path" missing or not a string in operation '+JSON.stringify(n));if((n.op==="copy"||n.op==="move")&&typeof n.from!="string")throw new Error('Required property "from" missing or not a string in operation '+JSON.stringify(n))}function Si(n,e){return pR(n,Ko(e))}function Wm(n){return Ko(n)}function Tk(n,e,t){var r=[];return ks(n,e,{before:function(o,s){var a,l=Si(o,s.path);if(s.op==="add")a=Ak(o,l,s.value);else if(s.op==="remove")a=Ik(o,l);else if(s.op==="replace")a=Pk(o,l);else if(s.op==="copy")a=gR(o,l,s.value);else if(s.op==="move")a=vR(o,l,Wm(s.from));else if(s.op==="test")a=[];else throw new Error("Unknown JSONPatch operation "+JSON.stringify(s.op));var u;if(t&&t.before){var c=t.before(o,s,a);c&&c.revertOperations&&(a=c.revertOperations),c&&c.json&&(u=c.json)}if(r=a.concat(r),u!==void 0)return{json:u}}}),r}function Pk(n,e){return[{op:"replace",path:Ge(e),value:tt(n,e)}]}function Ik(n,e){return[{op:"add",path:Ge(e),value:tt(n,e)}]}function Ak(n,e,t){return Mu(n,e)||!Rs(n,e)?[{op:"remove",path:Ge(e)}]:Pk(n,e)}function gR(n,e,t){return Ak(n,e)}function vR(n,e,t){if(e.length<t.length&&oR(t,e))return[{op:"replace",path:Ge(e),value:n}];var r=[{op:"move",from:Ge(e),path:Ge(t)}];return!Mu(n,e)&&Rs(n,e)&&(r=r.concat(Ik(n,e))),r}function Rk(n){return n?n.op==="add":!1}function xk(n){return n?n.op==="remove":!1}function Nk(n){return n?n.op==="replace":!1}function Km(n){return n?n.op==="copy":!1}function Pa(n){return n?n.op==="move":!1}var oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yR(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Mk(n){var e=n.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var yd={},Qy={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},_R="a".charCodeAt();yd.parse=function(n,e,t){var r={},i=0,o=0,s=0,a=t&&t.bigint&&typeof BigInt<"u";return{data:l("",!0),pointers:r};function l(R,D){u();var F;b(R,"value");var B=v();switch(B){case"t":h("rue"),F=!0;break;case"f":h("alse"),F=!1;break;case"n":h("ull"),F=null;break;case'"':F=c();break;case"[":F=d(R);break;case"{":F=g(R);break;default:m(),"-0123456789".indexOf(B)>=0?F=f():S()}return b(R,"valueEnd"),u(),D&&s<n.length&&S(),F}function u(){e:for(;s<n.length;){switch(n[s]){case" ":o++;break;case"	":o+=4;break;case"\r":o=0;break;case`
`:o=0,i++;break;default:break e}s++}}function c(){for(var R="",D;D=v(),D!='"';)D=="\\"?(D=v(),D in Qy?R+=Qy[D]:D=="u"?R+=p():E()):R+=D;return R}function f(){var R="",D=!0;n[s]=="-"&&(R+=v()),R+=n[s]=="0"?v():y(),n[s]=="."&&(R+=v()+y(),D=!1),(n[s]=="e"||n[s]=="E")&&(R+=v(),(n[s]=="+"||n[s]=="-")&&(R+=v()),R+=y(),D=!1);var F=+R;return a&&D&&(F>Number.MAX_SAFE_INTEGER||F<Number.MIN_SAFE_INTEGER)?BigInt(R):F}function d(R){u();var D=[],F=0;if(v()=="]")return D;for(m();;){var B=R+"/"+F;D.push(l(B)),u();var H=v();if(H=="]")break;H!=","&&E(),u(),F++}return D}function g(R){u();var D={};if(v()=="}")return D;for(m();;){var F=w();v()!='"'&&E();var B=c(),H=R+"/"+Gm(B);_(H,"key",F),b(H,"keyEnd"),u(),v()!=":"&&E(),u(),D[B]=l(H),u();var L=v();if(L=="}")break;L!=","&&E(),u()}return D}function h(R){for(var D=0;D<R.length;D++)v()!==R[D]&&E()}function v(){O();var R=n[s];return s++,o++,R}function m(){s--,o--}function p(){for(var R=4,D=0;R--;){D<<=4;var F=v().toLowerCase();F>="a"&&F<="f"?D+=F.charCodeAt()-_R+10:F>="0"&&F<="9"?D+=+F:E()}return String.fromCharCode(D)}function y(){for(var R="";n[s]>="0"&&n[s]<="9";)R+=v();if(R.length)return R;O(),S()}function b(R,D){_(R,D,w())}function _(R,D,F){r[R]=r[R]||{},r[R][D]=F}function w(){return{line:i,column:o,pos:s}}function S(){throw new SyntaxError("Unexpected token "+n[s]+" in JSON at position "+s)}function E(){m(),S()}function O(){if(s>=n.length)throw new SyntaxError("Unexpected end of JSON input")}};yd.stringify=function(n,e,t){if(!pc(n))return;var r=0,i,o,s=typeof t=="object"?t.space:t;switch(typeof s){case"number":var a=s>10?10:s<0?0:Math.floor(s);s=a&&_(a," "),i=a,o=a;break;case"string":s=s.slice(0,10),i=0,o=0;for(var l=0;l<s.length;l++){var u=s[l];switch(u){case" ":o++;break;case"	":o+=4;break;case"\r":o=0;break;case`
`:o=0,r++;break;default:throw new Error("whitespace characters not allowed in JSON")}i++}break;default:s=void 0}var c="",f={},d=0,g=0,h=0,v=t&&t.es6&&typeof Map=="function";return m(n,0,""),{json:c,pointers:f};function m(w,S,E){switch(b(E,"value"),typeof w){case"number":case"bigint":case"boolean":p(""+w);break;case"string":p(mc(w));break;case"object":w===null?p("null"):typeof w.toJSON=="function"?p(mc(w.toJSON())):Array.isArray(w)?O():v?w.constructor.BYTES_PER_ELEMENT?O():w instanceof Map?D():w instanceof Set?D(!0):R():R()}b(E,"valueEnd");function O(){if(w.length){p("[");for(var F=S+1,B=0;B<w.length;B++){B&&p(","),y(F);var H=pc(w[B])?w[B]:null,L=E+"/"+B;m(H,F,L)}y(S),p("]")}else p("[]")}function R(){var F=Object.keys(w);if(F.length){p("{");for(var B=S+1,H=0;H<F.length;H++){var L=F[H],N=w[L];if(pc(N)){H&&p(",");var U=E+"/"+Gm(L);y(B),b(U,"key"),p(mc(L)),b(U,"keyEnd"),p(":"),s&&p(" "),m(N,B,U)}}y(S),p("}")}else p("{}")}function D(F){if(w.size){p("{");for(var B=S+1,H=!0,L=w.entries(),N=L.next();!N.done;){var U=N.value,$=U[0],Z=F?!0:U[1];if(pc(Z)){H||p(","),H=!1;var A=E+"/"+Gm($);y(B),b(A,"key"),p(mc($)),b(A,"keyEnd"),p(":"),s&&p(" "),m(Z,B,A)}N=L.next()}y(S),p("}")}else p("{}")}}function p(w){g+=w.length,h+=w.length,c+=w}function y(w){if(s){for(c+=`
`+_(w,s),d++,g=0;w--;)r?(d+=r,g=o):g+=o,h+=i;h+=1}}function b(w,S){f[w]=f[w]||{},f[w][S]={line:d,column:g,pos:h}}function _(w,S){return Array(w+1).join(S)}};var bR=["number","bigint","boolean","string","object"];function pc(n){return bR.indexOf(typeof n)>=0}var wR=/"|\\/g,SR=/[\b]/g,ER=/\f/g,CR=/\n/g,kR=/\r/g,OR=/\t/g;function mc(n){return n=n.replace(wR,"\\$&").replace(ER,"\\f").replace(SR,"\\b").replace(CR,"\\n").replace(kR,"\\r").replace(OR,"\\t"),'"'+n+'"'}var TR=/~/g,PR=/\//g;function Gm(n){return n.replace(TR,"~0").replace(PR,"~1")}function vr(n,e){if(!(this instanceof vr))throw new SyntaxError("Constructor must be called with the new operator");this.message=n+" (char "+e+")",this.char=e,this.stack=new Error().stack}vr.prototype=new Error;vr.prototype.constructor=Error;var x0={"'":!0,"\u2018":!0,"\u2019":!0,"`":!0,"\xB4":!0},N0={'"':!0,"\u201C":!0,"\u201D":!0};function Zy(n){return IR.test(n)}var IR=/^[a-zA-Z_]$/;function AR(n){return RR.test(n)}var RR=/^[0-9a-fA-F]$/;function Po(n){return xR.test(n)}var xR=/^[0-9]$/;function uh(n){return n===" "||n==="	"||n===`
`||n==="\r"}function Jm(n){return n==="\xA0"||n>="\u2000"&&n<="\u200A"||n==="\u202F"||n==="\u205F"||n==="\u3000"}function NR(n){for(var e="",t=0;t<n.length;t++){var r=n[t];e+=Jm(r)?" ":r}return e}function MR(n){return x0[n]===!0||N0[n]===!0}function Xy(n){return x0[n]===!0}function DR(n){return N0[n]===!0}function $y(n){return x0[n]===!0?"'":N0[n]===!0?'"':n}function ch(n,e){var t=n.lastIndexOf(e);return t!==-1?n.substring(0,t)+n.substring(t+1):n}function ya(n,e){var t=n.length;if(!uh(n[t-1]))return n+e;for(;uh(n[t-1]);)t--;return n.substring(0,t)+e+n.substring(t)}function LR(n,e,t){return n.substring(0,t)+e+n.substring(t)}var er=0,Xa=1,xs=2,Ia=3,Dk=4,Ym=5,Aa=6,jR={"":!0,"{":!0,"}":!0,"[":!0,"]":!0,":":!0,",":!0,"(":!0,")":!0,";":!0,"+":!0},BR={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},e_={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},FR={null:"null",true:"true",false:"false"},t_={None:"null",True:"true",False:"false"},Mo="",zt="",Dn=0,Ze="",Ye="",gt=Aa;function qo(n){Mo=n,zt="",Dn=0,Ze=Mo.charAt(0),Ye="",gt=Aa,dn();var e=gt;if(su(),n_(),Ye==="")return zt;if(e===gt&&fh()){for(var t="";e===gt&&fh();)zt=ya(zt,","),t+=zt,zt="",su(),n_();return`[
`.concat(t).concat(zt,`
]`)}throw new vr("Unexpected characters",Dn-Ye.length)}function Mn(){Dn++,Ze=Mo.charAt(Dn)}function UR(){Mn(),Ze==="\\"&&Mn()}function fh(){return gt===er&&(Ye==="["||Ye==="{")||gt===xs||gt===Xa||gt===Ia}function VR(){return gt===xs||gt===Xa||gt===Ia}function dn(){zt+=Ye,gt=Aa,Ye="",qR(),gt===Dk&&(Ye=NR(Ye),dn()),gt===Ym&&(gt=Aa,Ye="",dn())}function n_(){Ye===","&&(Ye="",gt=Aa,dn())}function qR(){if(jR[Ze]){gt=er,Ye=Ze,Mn();return}HR()}function HR(){if(Po(Ze)||Ze==="-"){if(gt=Xa,Ze==="-"){if(Ye+=Ze,Mn(),!Po(Ze))throw new vr("Invalid number, digit expected",Dn)}else Ze==="0"&&(Ye+=Ze,Mn());for(;Po(Ze);)Ye+=Ze,Mn();if(Ze==="."){if(Ye+=Ze,Mn(),!Po(Ze))throw new vr("Invalid number, digit expected",Dn);for(;Po(Ze);)Ye+=Ze,Mn()}if(Ze==="e"||Ze==="E"){if(Ye+=Ze,Mn(),(Ze==="+"||Ze==="-")&&(Ye+=Ze,Mn()),!Po(Ze))throw new vr("Invalid number, digit expected",Dn);for(;Po(Ze);)Ye+=Ze,Mn()}return}zR()}function zR(){Ze==="\\"&&Mo.charAt(Dn+1)==='"'?(Mn(),r_(UR)):r_(Mn)}function r_(n){if(MR(Ze)){var e=$y(Ze),t=Xy(Ze)?Xy:DR;for(Ye+='"',gt=xs,n();Ze!==""&&!t(Ze);)if(Ze==="\\"){n();var r=BR[Ze];if(r!==void 0)Ye+="\\"+Ze,n();else if(Ze==="u"){Ye+="\\u",n();for(var i=0;i<4;i++){if(!AR(Ze))throw new vr("Invalid unicode character",Dn-Ye.length);Ye+=Ze,n()}}else if(Ze==="'")Ye+="'",n();else throw new vr('Invalid escape character "\\'+Ze+'"',Dn)}else e_[Ze]?(Ye+=e_[Ze],n()):Ze==='"'?(Ye+='\\"',n()):(Ye+=Ze,n());if($y(Ze)!==e)throw new vr("End of string expected",Dn-Ye.length);Ye+='"',n();return}WR()}function WR(){if(Zy(Ze)){for(gt=Ia;Zy(Ze)||Po(Ze)||Ze==="$";)Ye+=Ze,Mn();return}KR()}function KR(){if(uh(Ze)||Jm(Ze)){for(gt=Dk;uh(Ze)||Jm(Ze);)Ye+=Ze,Mn();return}GR()}function GR(){if(Ze==="/"&&Mo[Dn+1]==="*"){for(gt=Ym;Ze!==""&&(Ze!=="*"||Ze==="*"&&Mo[Dn+1]!=="/");)Ye+=Ze,Mn();Ze==="*"&&Mo[Dn+1]==="/"&&(Ye+=Ze,Mn(),Ye+=Ze,Mn());return}if(Ze==="/"&&Mo[Dn+1]==="/"){for(gt=Ym;Ze!==""&&Ze!==`
`;)Ye+=Ze,Mn();return}JR()}function JR(){for(gt=Aa;Ze!=="";)Ye+=Ze,Mn();throw new vr('Syntax error in part "'+Ye+'"',Dn-Ye.length)}function su(){if(gt===er&&Ye==="{"){if(dn(),gt===er&&Ye==="}"){dn();return}for(;;){if((gt===Ia||gt===Xa)&&(gt=xs,Ye='"'.concat(Ye,'"')),gt!==xs)throw new vr("Object key expected",Dn-Ye.length);if(dn(),gt===er&&Ye===":")dn();else if(fh())zt=ya(zt,":");else throw new vr("Colon expected",Dn-Ye.length);if(su(),gt===er&&Ye===","){if(dn(),gt===er&&Ye==="}"){zt=ch(zt,",");break}if(Ye===""){zt=ch(zt,",");break}}else if(VR())zt=ya(zt,",");else break}gt===er&&Ye==="}"?dn():zt=ya(zt,"}");return}YR()}function YR(){if(gt===er&&Ye==="["){if(dn(),gt===er&&Ye==="]"){dn();return}for(;;)if(su(),gt===er&&Ye===","){if(dn(),gt===er&&Ye==="]"){zt=ch(zt,",");break}if(Ye===""){zt=ch(zt,",");break}}else if(fh())zt=ya(zt,",");else break;gt===er&&Ye==="]"?dn():zt=ya(zt,"]");return}QR()}function QR(){if(gt===xs){for(dn();gt===er&&Ye==="+";)if(Ye="",dn(),gt===xs){var n=zt.lastIndexOf('"');zt=zt.substring(0,n)+Ye.substring(1),Ye="",dn()}return}ZR()}function ZR(){if(gt===Xa){dn();return}XR()}function XR(){if(gt===Ia){if(FR[Ye]){dn();return}if(t_[Ye]){Ye=t_[Ye],dn();return}var n=Ye,e=zt.length;if(Ye="",dn(),gt===er&&Ye==="("){Ye="",dn(),su(),gt===er&&Ye===")"&&(Ye="",dn(),gt===er&&Ye===";"&&(Ye="",dn()));return}for(zt=LR(zt,'"'.concat(n),e);gt===Ia||gt===Xa;)dn();zt+='"';return}$R()}function $R(){throw Ye===""?new vr("Unexpected end of json string",Dn-Ye.length):new vr("Value expected",Dn-Ye.length)}function ir(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function Hn(n){return typeof n=="object"&&n!==null}function ex(n){return n===!0||n===!1}function tx(n){return typeof n=="number"&&n>9466848e5&&isFinite(n)&&Math.floor(n)===n&&!isNaN(new Date(n).valueOf())}function Lk(n){const e=window.document.createElement("div");return e.style.color=n,e.style.color.split(/\s+/).join("").toLowerCase()||null}function nx(n){return typeof n=="string"&&!!Lk(n)}function M0(n){return n===null?"null":n===void 0?"undefined":typeof n=="number"?"number":typeof n=="string"?"string":typeof n=="boolean"?"boolean":n instanceof RegExp?"regexp":Array.isArray(n)?"array":"object"}const rx=/^https?:\/\/\S+$/;function D0(n){return typeof n=="string"&&rx.test(n)}function Du(n){if(n==="")return"";if(n==="null")return null;if(n==="true")return!0;if(n==="false")return!1;const e=Number(n);return!isNaN(e)&&!isNaN(parseFloat(n))?e:n}function ix(n){return typeof n=="string"&&typeof Du(n)!="string"}var ox=typeof global=="object"&&global&&global.Object===Object&&global;const jk=ox;var sx=typeof self=="object"&&self&&self.Object===Object&&self,ax=jk||sx||Function("return this")();const ki=ax;var lx=ki.Symbol;const li=lx;var Bk=Object.prototype,ux=Bk.hasOwnProperty,cx=Bk.toString,dl=li?li.toStringTag:void 0;function fx(n){var e=ux.call(n,dl),t=n[dl];try{n[dl]=void 0;var r=!0}catch{}var i=cx.call(n);return r&&(e?n[dl]=t:delete n[dl]),i}var hx=Object.prototype,dx=hx.toString;function px(n){return dx.call(n)}var mx="[object Null]",gx="[object Undefined]",i_=li?li.toStringTag:void 0;function $a(n){return n==null?n===void 0?gx:mx:i_&&i_ in Object(n)?fx(n):px(n)}function Go(n){return n!=null&&typeof n=="object"}var vx="[object Symbol]";function Ns(n){return typeof n=="symbol"||Go(n)&&$a(n)==vx}function Wl(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var yx=Array.isArray;const cr=yx;var _x=1/0,o_=li?li.prototype:void 0,s_=o_?o_.toString:void 0;function Fk(n){if(typeof n=="string")return n;if(cr(n))return Wl(n,Fk)+"";if(Ns(n))return s_?s_.call(n):"";var e=n+"";return e=="0"&&1/n==-_x?"-0":e}var bx=/\s/;function wx(n){for(var e=n.length;e--&&bx.test(n.charAt(e)););return e}var Sx=/^\s+/;function Ex(n){return n&&n.slice(0,wx(n)+1).replace(Sx,"")}function Ci(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var a_=0/0,Cx=/^[-+]0x[0-9a-f]+$/i,kx=/^0b[01]+$/i,Ox=/^0o[0-7]+$/i,Tx=parseInt;function Qm(n){if(typeof n=="number")return n;if(Ns(n))return a_;if(Ci(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Ci(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=Ex(n);var t=kx.test(n);return t||Ox.test(n)?Tx(n.slice(2),t?2:8):Cx.test(n)?a_:+n}var l_=1/0,Px=17976931348623157e292;function Ff(n){if(!n)return n===0?n:0;if(n=Qm(n),n===l_||n===-l_){var e=n<0?-1:1;return e*Px}return n===n?n:0}function Ix(n){var e=Ff(n),t=e%1;return e===e?t?e-t:e:0}function Lu(n){return n}var Ax="[object AsyncFunction]",Rx="[object Function]",xx="[object GeneratorFunction]",Nx="[object Proxy]";function Uk(n){if(!Ci(n))return!1;var e=$a(n);return e==Rx||e==xx||e==Ax||e==Nx}var Mx=ki["__core-js_shared__"];const mp=Mx;var u_=function(){var n=/[^.]+$/.exec(mp&&mp.keys&&mp.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function Dx(n){return!!u_&&u_ in n}var Lx=Function.prototype,jx=Lx.toString;function Ws(n){if(n!=null){try{return jx.call(n)}catch{}try{return n+""}catch{}}return""}var Bx=/[\\^$.*+?()[\]{}|]/g,Fx=/^\[object .+?Constructor\]$/,Ux=Function.prototype,Vx=Object.prototype,qx=Ux.toString,Hx=Vx.hasOwnProperty,zx=RegExp("^"+qx.call(Hx).replace(Bx,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Wx(n){if(!Ci(n)||Dx(n))return!1;var e=Uk(n)?zx:Fx;return e.test(Ws(n))}function Kx(n,e){return n==null?void 0:n[e]}function Ks(n,e){var t=Kx(n,e);return Wx(t)?t:void 0}var Gx=Ks(ki,"WeakMap");const Zm=Gx;var c_=Object.create,Jx=function(){function n(){}return function(e){if(!Ci(e))return{};if(c_)return c_(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const Yx=Jx;function Qx(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function Gt(){}function Zx(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var Xx=800,$x=16,eN=Date.now;function tN(n){var e=0,t=0;return function(){var r=eN(),i=$x-(r-t);if(t=r,i>0){if(++e>=Xx)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function nN(n){return function(){return n}}var rN=function(){try{var n=Ks(Object,"defineProperty");return n({},"",{}),n}catch{}}();const hh=rN;var iN=hh?function(n,e){return hh(n,"toString",{configurable:!0,enumerable:!1,value:nN(e),writable:!0})}:Lu;const oN=iN;var sN=tN(oN);const aN=sN;function lN(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var uN=9007199254740991,cN=/^(?:0|[1-9]\d*)$/;function L0(n,e){var t=typeof n;return e=e==null?uN:e,!!e&&(t=="number"||t!="symbol"&&cN.test(n))&&n>-1&&n%1==0&&n<e}function j0(n,e,t){e=="__proto__"&&hh?hh(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function _d(n,e){return n===e||n!==n&&e!==e}var fN=Object.prototype,hN=fN.hasOwnProperty;function Vk(n,e,t){var r=n[e];(!(hN.call(n,e)&&_d(r,t))||t===void 0&&!(e in n))&&j0(n,e,t)}function bd(n,e,t,r){var i=!t;t||(t={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=r?r(t[a],n[a],a,t,n):void 0;l===void 0&&(l=n[a]),i?j0(t,a,l):Vk(t,a,l)}return t}var f_=Math.max;function dN(n,e,t){return e=f_(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,o=f_(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(s),Qx(n,this,a)}}function pN(n,e){return aN(dN(n,e,Lu),n+"")}var mN=9007199254740991;function B0(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=mN}function el(n){return n!=null&&B0(n.length)&&!Uk(n)}function Xm(n,e,t){if(!Ci(t))return!1;var r=typeof e;return(r=="number"?el(t)&&L0(e,t.length):r=="string"&&e in t)?_d(t[e],n):!1}var gN=Object.prototype;function wd(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||gN;return n===t}function qk(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var vN="[object Arguments]";function h_(n){return Go(n)&&$a(n)==vN}var Hk=Object.prototype,yN=Hk.hasOwnProperty,_N=Hk.propertyIsEnumerable,bN=h_(function(){return arguments}())?h_:function(n){return Go(n)&&yN.call(n,"callee")&&!_N.call(n,"callee")};const Sd=bN;function wN(){return!1}var zk=typeof exports=="object"&&exports&&!exports.nodeType&&exports,d_=zk&&typeof module=="object"&&module&&!module.nodeType&&module,SN=d_&&d_.exports===zk,p_=SN?ki.Buffer:void 0,EN=p_?p_.isBuffer:void 0,CN=EN||wN;const au=CN;var kN="[object Arguments]",ON="[object Array]",TN="[object Boolean]",PN="[object Date]",IN="[object Error]",AN="[object Function]",RN="[object Map]",xN="[object Number]",NN="[object Object]",MN="[object RegExp]",DN="[object Set]",LN="[object String]",jN="[object WeakMap]",BN="[object ArrayBuffer]",FN="[object DataView]",UN="[object Float32Array]",VN="[object Float64Array]",qN="[object Int8Array]",HN="[object Int16Array]",zN="[object Int32Array]",WN="[object Uint8Array]",KN="[object Uint8ClampedArray]",GN="[object Uint16Array]",JN="[object Uint32Array]",cn={};cn[UN]=cn[VN]=cn[qN]=cn[HN]=cn[zN]=cn[WN]=cn[KN]=cn[GN]=cn[JN]=!0;cn[kN]=cn[ON]=cn[BN]=cn[TN]=cn[FN]=cn[PN]=cn[IN]=cn[AN]=cn[RN]=cn[xN]=cn[NN]=cn[MN]=cn[DN]=cn[LN]=cn[jN]=!1;function YN(n){return Go(n)&&B0(n.length)&&!!cn[$a(n)]}function Ed(n){return function(e){return n(e)}}var Wk=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Kl=Wk&&typeof module=="object"&&module&&!module.nodeType&&module,QN=Kl&&Kl.exports===Wk,gp=QN&&jk.process,ZN=function(){try{var n=Kl&&Kl.require&&Kl.require("util").types;return n||gp&&gp.binding&&gp.binding("util")}catch{}}();const Ra=ZN;var m_=Ra&&Ra.isTypedArray,XN=m_?Ed(m_):YN;const F0=XN;var $N=Object.prototype,eM=$N.hasOwnProperty;function Kk(n,e){var t=cr(n),r=!t&&Sd(n),i=!t&&!r&&au(n),o=!t&&!r&&!i&&F0(n),s=t||r||i||o,a=s?qk(n.length,String):[],l=a.length;for(var u in n)(e||eM.call(n,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||L0(u,l)))&&a.push(u);return a}function Gk(n,e){return function(t){return n(e(t))}}var tM=Gk(Object.keys,Object);const nM=tM;var rM=Object.prototype,iM=rM.hasOwnProperty;function Jk(n){if(!wd(n))return nM(n);var e=[];for(var t in Object(n))iM.call(n,t)&&t!="constructor"&&e.push(t);return e}function tl(n){return el(n)?Kk(n):Jk(n)}function oM(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var sM=Object.prototype,aM=sM.hasOwnProperty;function lM(n){if(!Ci(n))return oM(n);var e=wd(n),t=[];for(var r in n)r=="constructor"&&(e||!aM.call(n,r))||t.push(r);return t}function U0(n){return el(n)?Kk(n,!0):lM(n)}var uM=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cM=/^\w*$/;function V0(n,e){if(cr(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||Ns(n)?!0:cM.test(n)||!uM.test(n)||e!=null&&n in Object(e)}var fM=Ks(Object,"create");const lu=fM;function hM(){this.__data__=lu?lu(null):{},this.size=0}function dM(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var pM="__lodash_hash_undefined__",mM=Object.prototype,gM=mM.hasOwnProperty;function vM(n){var e=this.__data__;if(lu){var t=e[n];return t===pM?void 0:t}return gM.call(e,n)?e[n]:void 0}var yM=Object.prototype,_M=yM.hasOwnProperty;function bM(n){var e=this.__data__;return lu?e[n]!==void 0:_M.call(e,n)}var wM="__lodash_hash_undefined__";function SM(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=lu&&e===void 0?wM:e,this}function Ms(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ms.prototype.clear=hM;Ms.prototype.delete=dM;Ms.prototype.get=vM;Ms.prototype.has=bM;Ms.prototype.set=SM;function EM(){this.__data__=[],this.size=0}function Cd(n,e){for(var t=n.length;t--;)if(_d(n[t][0],e))return t;return-1}var CM=Array.prototype,kM=CM.splice;function OM(n){var e=this.__data__,t=Cd(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():kM.call(e,t,1),--this.size,!0}function TM(n){var e=this.__data__,t=Cd(e,n);return t<0?void 0:e[t][1]}function PM(n){return Cd(this.__data__,n)>-1}function IM(n,e){var t=this.__data__,r=Cd(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function vo(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}vo.prototype.clear=EM;vo.prototype.delete=OM;vo.prototype.get=TM;vo.prototype.has=PM;vo.prototype.set=IM;var AM=Ks(ki,"Map");const uu=AM;function RM(){this.size=0,this.__data__={hash:new Ms,map:new(uu||vo),string:new Ms}}function xM(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function kd(n,e){var t=n.__data__;return xM(e)?t[typeof e=="string"?"string":"hash"]:t.map}function NM(n){var e=kd(this,n).delete(n);return this.size-=e?1:0,e}function MM(n){return kd(this,n).get(n)}function DM(n){return kd(this,n).has(n)}function LM(n,e){var t=kd(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function yo(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}yo.prototype.clear=RM;yo.prototype.delete=NM;yo.prototype.get=MM;yo.prototype.has=DM;yo.prototype.set=LM;var jM="Expected a function";function Od(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(jM);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=t.cache;if(o.has(i))return o.get(i);var s=n.apply(this,r);return t.cache=o.set(i,s)||o,s};return t.cache=new(Od.Cache||yo),t}Od.Cache=yo;var BM=500;function FM(n){var e=Od(n,function(r){return t.size===BM&&t.clear(),r}),t=e.cache;return e}var UM=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,VM=/\\(\\)?/g,qM=FM(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(UM,function(t,r,i,o){e.push(i?o.replace(VM,"$1"):r||t)}),e});const HM=qM;function Yk(n){return n==null?"":Fk(n)}function Qk(n,e){return cr(n)?n:V0(n,e)?[n]:HM(Yk(n))}var zM=1/0;function Td(n){if(typeof n=="string"||Ns(n))return n;var e=n+"";return e=="0"&&1/n==-zM?"-0":e}function q0(n,e){e=Qk(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[Td(e[t++])];return t&&t==r?n:void 0}function WM(n,e,t){var r=n==null?void 0:q0(n,e);return r===void 0?t:r}function H0(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var g_=li?li.isConcatSpreadable:void 0;function KM(n){return cr(n)||Sd(n)||!!(g_&&n&&n[g_])}function Zk(n,e,t,r,i){var o=-1,s=n.length;for(t||(t=KM),i||(i=[]);++o<s;){var a=n[o];e>0&&t(a)?e>1?Zk(a,e-1,t,r,i):H0(i,a):r||(i[i.length]=a)}return i}var GM=Gk(Object.getPrototypeOf,Object);const Xk=GM;function JM(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=n[r+e];return o}function YM(){this.__data__=new vo,this.size=0}function QM(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function ZM(n){return this.__data__.get(n)}function XM(n){return this.__data__.has(n)}var $M=200;function e6(n,e){var t=this.__data__;if(t instanceof vo){var r=t.__data__;if(!uu||r.length<$M-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new yo(r)}return t.set(n,e),this.size=t.size,this}function Hi(n){var e=this.__data__=new vo(n);this.size=e.size}Hi.prototype.clear=YM;Hi.prototype.delete=QM;Hi.prototype.get=ZM;Hi.prototype.has=XM;Hi.prototype.set=e6;function t6(n,e){return n&&bd(e,tl(e),n)}function n6(n,e){return n&&bd(e,U0(e),n)}var $k=typeof exports=="object"&&exports&&!exports.nodeType&&exports,v_=$k&&typeof module=="object"&&module&&!module.nodeType&&module,r6=v_&&v_.exports===$k,y_=r6?ki.Buffer:void 0,__=y_?y_.allocUnsafe:void 0;function i6(n,e){if(e)return n.slice();var t=n.length,r=__?__(t):new n.constructor(t);return n.copy(r),r}function o6(n,e){for(var t=-1,r=n==null?0:n.length,i=0,o=[];++t<r;){var s=n[t];e(s,t,n)&&(o[i++]=s)}return o}function eO(){return[]}var s6=Object.prototype,a6=s6.propertyIsEnumerable,b_=Object.getOwnPropertySymbols,l6=b_?function(n){return n==null?[]:(n=Object(n),o6(b_(n),function(e){return a6.call(n,e)}))}:eO;const z0=l6;function u6(n,e){return bd(n,z0(n),e)}var c6=Object.getOwnPropertySymbols,f6=c6?function(n){for(var e=[];n;)H0(e,z0(n)),n=Xk(n);return e}:eO;const tO=f6;function h6(n,e){return bd(n,tO(n),e)}function nO(n,e,t){var r=e(n);return cr(n)?r:H0(r,t(n))}function $m(n){return nO(n,tl,z0)}function d6(n){return nO(n,U0,tO)}var p6=Ks(ki,"DataView");const eg=p6;var m6=Ks(ki,"Promise");const tg=m6;var g6=Ks(ki,"Set");const ng=g6;var w_="[object Map]",v6="[object Object]",S_="[object Promise]",E_="[object Set]",C_="[object WeakMap]",k_="[object DataView]",y6=Ws(eg),_6=Ws(uu),b6=Ws(tg),w6=Ws(ng),S6=Ws(Zm),ms=$a;(eg&&ms(new eg(new ArrayBuffer(1)))!=k_||uu&&ms(new uu)!=w_||tg&&ms(tg.resolve())!=S_||ng&&ms(new ng)!=E_||Zm&&ms(new Zm)!=C_)&&(ms=function(n){var e=$a(n),t=e==v6?n.constructor:void 0,r=t?Ws(t):"";if(r)switch(r){case y6:return k_;case _6:return w_;case b6:return S_;case w6:return E_;case S6:return C_}return e});const xa=ms;var E6=Object.prototype,C6=E6.hasOwnProperty;function k6(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&C6.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var O6=ki.Uint8Array;const dh=O6;function W0(n){var e=new n.constructor(n.byteLength);return new dh(e).set(new dh(n)),e}function T6(n,e){var t=e?W0(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var P6=/\w*$/;function I6(n){var e=new n.constructor(n.source,P6.exec(n));return e.lastIndex=n.lastIndex,e}var O_=li?li.prototype:void 0,T_=O_?O_.valueOf:void 0;function A6(n){return T_?Object(T_.call(n)):{}}function R6(n,e){var t=e?W0(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var x6="[object Boolean]",N6="[object Date]",M6="[object Map]",D6="[object Number]",L6="[object RegExp]",j6="[object Set]",B6="[object String]",F6="[object Symbol]",U6="[object ArrayBuffer]",V6="[object DataView]",q6="[object Float32Array]",H6="[object Float64Array]",z6="[object Int8Array]",W6="[object Int16Array]",K6="[object Int32Array]",G6="[object Uint8Array]",J6="[object Uint8ClampedArray]",Y6="[object Uint16Array]",Q6="[object Uint32Array]";function Z6(n,e,t){var r=n.constructor;switch(e){case U6:return W0(n);case x6:case N6:return new r(+n);case V6:return T6(n,t);case q6:case H6:case z6:case W6:case K6:case G6:case J6:case Y6:case Q6:return R6(n,t);case M6:return new r;case D6:case B6:return new r(n);case L6:return I6(n);case j6:return new r;case F6:return A6(n)}}function X6(n){return typeof n.constructor=="function"&&!wd(n)?Yx(Xk(n)):{}}var $6="[object Map]";function eD(n){return Go(n)&&xa(n)==$6}var P_=Ra&&Ra.isMap,tD=P_?Ed(P_):eD;const nD=tD;var rD="[object Set]";function iD(n){return Go(n)&&xa(n)==rD}var I_=Ra&&Ra.isSet,oD=I_?Ed(I_):iD;const sD=oD;var aD=1,lD=2,uD=4,rO="[object Arguments]",cD="[object Array]",fD="[object Boolean]",hD="[object Date]",dD="[object Error]",iO="[object Function]",pD="[object GeneratorFunction]",mD="[object Map]",gD="[object Number]",oO="[object Object]",vD="[object RegExp]",yD="[object Set]",_D="[object String]",bD="[object Symbol]",wD="[object WeakMap]",SD="[object ArrayBuffer]",ED="[object DataView]",CD="[object Float32Array]",kD="[object Float64Array]",OD="[object Int8Array]",TD="[object Int16Array]",PD="[object Int32Array]",ID="[object Uint8Array]",AD="[object Uint8ClampedArray]",RD="[object Uint16Array]",xD="[object Uint32Array]",ln={};ln[rO]=ln[cD]=ln[SD]=ln[ED]=ln[fD]=ln[hD]=ln[CD]=ln[kD]=ln[OD]=ln[TD]=ln[PD]=ln[mD]=ln[gD]=ln[oO]=ln[vD]=ln[yD]=ln[_D]=ln[bD]=ln[ID]=ln[AD]=ln[RD]=ln[xD]=!0;ln[dD]=ln[iO]=ln[wD]=!1;function Uf(n,e,t,r,i,o){var s,a=e&aD,l=e&lD,u=e&uD;if(t&&(s=i?t(n,r,i,o):t(n)),s!==void 0)return s;if(!Ci(n))return n;var c=cr(n);if(c){if(s=k6(n),!a)return Zx(n,s)}else{var f=xa(n),d=f==iO||f==pD;if(au(n))return i6(n,a);if(f==oO||f==rO||d&&!i){if(s=l||d?{}:X6(n),!a)return l?h6(n,n6(s,n)):u6(n,t6(s,n))}else{if(!ln[f])return i?n:{};s=Z6(n,f,a)}}o||(o=new Hi);var g=o.get(n);if(g)return g;o.set(n,s),sD(n)?n.forEach(function(m){s.add(Uf(m,e,t,m,n,o))}):nD(n)&&n.forEach(function(m,p){s.set(p,Uf(m,e,t,p,n,o))});var h=u?l?d6:$m:l?U0:tl,v=c?void 0:h(n);return lN(v||n,function(m,p){v&&(p=m,m=n[p]),Vk(s,p,Uf(m,e,t,p,n,o))}),s}var ND=1,MD=4;function DD(n,e){return e=typeof e=="function"?e:void 0,Uf(n,ND|MD,e)}var LD="__lodash_hash_undefined__";function jD(n){return this.__data__.set(n,LD),this}function BD(n){return this.__data__.has(n)}function ph(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new yo;++e<t;)this.add(n[e])}ph.prototype.add=ph.prototype.push=jD;ph.prototype.has=BD;function FD(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function UD(n,e){return n.has(e)}var VD=1,qD=2;function sO(n,e,t,r,i,o){var s=t&VD,a=n.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(n),c=o.get(e);if(u&&c)return u==e&&c==n;var f=-1,d=!0,g=t&qD?new ph:void 0;for(o.set(n,e),o.set(e,n);++f<a;){var h=n[f],v=e[f];if(r)var m=s?r(v,h,f,e,n,o):r(h,v,f,n,e,o);if(m!==void 0){if(m)continue;d=!1;break}if(g){if(!FD(e,function(p,y){if(!UD(g,y)&&(h===p||i(h,p,t,r,o)))return g.push(y)})){d=!1;break}}else if(!(h===v||i(h,v,t,r,o))){d=!1;break}}return o.delete(n),o.delete(e),d}function HD(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}function zD(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var WD=1,KD=2,GD="[object Boolean]",JD="[object Date]",YD="[object Error]",QD="[object Map]",ZD="[object Number]",XD="[object RegExp]",$D="[object Set]",e5="[object String]",t5="[object Symbol]",n5="[object ArrayBuffer]",r5="[object DataView]",A_=li?li.prototype:void 0,vp=A_?A_.valueOf:void 0;function i5(n,e,t,r,i,o,s){switch(t){case r5:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case n5:return!(n.byteLength!=e.byteLength||!o(new dh(n),new dh(e)));case GD:case JD:case ZD:return _d(+n,+e);case YD:return n.name==e.name&&n.message==e.message;case XD:case e5:return n==e+"";case QD:var a=HD;case $D:var l=r&WD;if(a||(a=zD),n.size!=e.size&&!l)return!1;var u=s.get(n);if(u)return u==e;r|=KD,s.set(n,e);var c=sO(a(n),a(e),r,i,o,s);return s.delete(n),c;case t5:if(vp)return vp.call(n)==vp.call(e)}return!1}var o5=1,s5=Object.prototype,a5=s5.hasOwnProperty;function l5(n,e,t,r,i,o){var s=t&o5,a=$m(n),l=a.length,u=$m(e),c=u.length;if(l!=c&&!s)return!1;for(var f=l;f--;){var d=a[f];if(!(s?d in e:a5.call(e,d)))return!1}var g=o.get(n),h=o.get(e);if(g&&h)return g==e&&h==n;var v=!0;o.set(n,e),o.set(e,n);for(var m=s;++f<l;){d=a[f];var p=n[d],y=e[d];if(r)var b=s?r(y,p,d,e,n,o):r(p,y,d,n,e,o);if(!(b===void 0?p===y||i(p,y,t,r,o):b)){v=!1;break}m||(m=d=="constructor")}if(v&&!m){var _=n.constructor,w=e.constructor;_!=w&&"constructor"in n&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof w=="function"&&w instanceof w)&&(v=!1)}return o.delete(n),o.delete(e),v}var u5=1,R_="[object Arguments]",x_="[object Array]",gc="[object Object]",c5=Object.prototype,N_=c5.hasOwnProperty;function f5(n,e,t,r,i,o){var s=cr(n),a=cr(e),l=s?x_:xa(n),u=a?x_:xa(e);l=l==R_?gc:l,u=u==R_?gc:u;var c=l==gc,f=u==gc,d=l==u;if(d&&au(n)){if(!au(e))return!1;s=!0,c=!1}if(d&&!c)return o||(o=new Hi),s||F0(n)?sO(n,e,t,r,i,o):i5(n,e,l,t,r,i,o);if(!(t&u5)){var g=c&&N_.call(n,"__wrapped__"),h=f&&N_.call(e,"__wrapped__");if(g||h){var v=g?n.value():n,m=h?e.value():e;return o||(o=new Hi),i(v,m,t,r,o)}}return d?(o||(o=new Hi),l5(n,e,t,r,i,o)):!1}function Pd(n,e,t,r,i){return n===e?!0:n==null||e==null||!Go(n)&&!Go(e)?n!==n&&e!==e:f5(n,e,t,r,Pd,i)}var h5=1,d5=2;function p5(n,e,t,r){var i=t.length,o=i,s=!r;if(n==null)return!o;for(n=Object(n);i--;){var a=t[i];if(s&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<o;){a=t[i];var l=a[0],u=n[l],c=a[1];if(s&&a[2]){if(u===void 0&&!(l in n))return!1}else{var f=new Hi;if(r)var d=r(u,c,l,n,e,f);if(!(d===void 0?Pd(c,u,h5|d5,r,f):d))return!1}}return!0}function aO(n){return n===n&&!Ci(n)}function m5(n){for(var e=tl(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,aO(i)]}return e}function lO(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function g5(n){var e=m5(n);return e.length==1&&e[0][2]?lO(e[0][0],e[0][1]):function(t){return t===n||p5(t,n,e)}}function v5(n,e){return n!=null&&e in Object(n)}function y5(n,e,t){e=Qk(e,n);for(var r=-1,i=e.length,o=!1;++r<i;){var s=Td(e[r]);if(!(o=n!=null&&t(n,s)))break;n=n[s]}return o||++r!=i?o:(i=n==null?0:n.length,!!i&&B0(i)&&L0(s,i)&&(cr(n)||Sd(n)))}function _5(n,e){return n!=null&&y5(n,e,v5)}var b5=1,w5=2;function S5(n,e){return V0(n)&&aO(e)?lO(Td(n),e):function(t){var r=WM(t,n);return r===void 0&&r===e?_5(t,n):Pd(e,r,b5|w5)}}function E5(n){return function(e){return e==null?void 0:e[n]}}function C5(n){return function(e){return q0(e,n)}}function k5(n){return V0(n)?E5(Td(n)):C5(n)}function Id(n){return typeof n=="function"?n:n==null?Lu:typeof n=="object"?cr(n)?S5(n[0],n[1]):g5(n):k5(n)}function O5(n,e,t,r){for(var i=-1,o=n==null?0:n.length;++i<o;){var s=n[i];e(r,s,t(s),n)}return r}function uO(n){return function(e,t,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var l=s[n?a:++i];if(t(o[l],l,o)===!1)break}return e}}var T5=uO();const P5=T5;function I5(n,e){return n&&P5(n,e,tl)}function cO(n,e){return function(t,r){if(t==null)return t;if(!el(t))return n(t,r);for(var i=t.length,o=e?i:-1,s=Object(t);(e?o--:++o<i)&&r(s[o],o,s)!==!1;);return t}}var A5=cO(I5);const fO=A5;function R5(n,e,t,r){return fO(n,function(i,o,s){e(r,i,t(i),s)}),r}function x5(n,e){return function(t,r){var i=cr(t)?O5:R5,o=e?e():{};return i(t,n,Id(r),o)}}var N5=function(){return ki.Date.now()};const yp=N5;var M5="Expected a function",D5=Math.max,L5=Math.min;function Ad(n,e,t){var r,i,o,s,a,l,u=0,c=!1,f=!1,d=!0;if(typeof n!="function")throw new TypeError(M5);e=Qm(e)||0,Ci(t)&&(c=!!t.leading,f="maxWait"in t,o=f?D5(Qm(t.maxWait)||0,e):o,d="trailing"in t?!!t.trailing:d);function g(S){var E=r,O=i;return r=i=void 0,u=S,s=n.apply(O,E),s}function h(S){return u=S,a=setTimeout(p,e),c?g(S):s}function v(S){var E=S-l,O=S-u,R=e-E;return f?L5(R,o-O):R}function m(S){var E=S-l,O=S-u;return l===void 0||E>=e||E<0||f&&O>=o}function p(){var S=yp();if(m(S))return y(S);a=setTimeout(p,v(S))}function y(S){return a=void 0,d&&r?g(S):(r=i=void 0,s)}function b(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function _(){return a===void 0?s:y(yp())}function w(){var S=yp(),E=m(S);if(r=arguments,i=this,l=S,E){if(a===void 0)return h(l);if(f)return clearTimeout(a),a=setTimeout(p,e),g(l)}return a===void 0&&(a=setTimeout(p,e)),s}return w.cancel=b,w.flush=_,w}function St(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}function hO(n){return typeof n=="function"?n:Lu}function j5(n,e){for(var t=n==null?0:n.length;t--&&e(n[t],t,n)!==!1;);return n}var B5=uO(!0);const F5=B5;function U5(n,e){return n&&F5(n,e,tl)}var V5=cO(U5,!0);const q5=V5;function H5(n,e){var t=cr(n)?j5:q5;return t(n,hO(e))}function yr(n){return n&&n.length?n[0]:void 0}function dO(n,e){var t=-1,r=el(n)?Array(n.length):[];return fO(n,function(i,o,s){r[++t]=e(i,o,s)}),r}function z5(n,e){var t=cr(n)?Wl:dO;return t(n,Id(e))}var W5=Object.prototype,K5=W5.hasOwnProperty,G5=x5(function(n,e,t){K5.call(n,t)?n[t].push(e):j0(n,t,[e])});const K0=G5;function qt(n){var e=n==null?0:n.length;return e?JM(n,0,-1):[]}var J5="[object Map]",Y5="[object Set]",Q5=Object.prototype,Z5=Q5.hasOwnProperty;function gn(n){if(n==null)return!0;if(el(n)&&(cr(n)||typeof n=="string"||typeof n.splice=="function"||au(n)||F0(n)||Sd(n)))return!n.length;var e=xa(n);if(e==J5||e==Y5)return!n.size;if(wd(n))return!Jk(n).length;for(var t in n)if(Z5.call(n,t))return!1;return!0}function Yt(n,e){return Pd(n,e)}function X5(n,e){return n<e}function $5(n,e,t){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=e(o);if(s!=null&&(a===void 0?s===s&&!Ns(s):t(s,a)))var a=s,l=o}return l}function vc(n,e){return n&&n.length?$5(n,Id(e),X5):void 0}function e8(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}function t8(n,e){if(n!==e){var t=n!==void 0,r=n===null,i=n===n,o=Ns(n),s=e!==void 0,a=e===null,l=e===e,u=Ns(e);if(!a&&!u&&!o&&n>e||o&&s&&l&&!a&&!u||r&&s&&l||!t&&l||!i)return 1;if(!r&&!o&&!u&&n<e||u&&t&&i&&!r&&!o||a&&t&&i||!s&&i||!l)return-1}return 0}function n8(n,e,t){for(var r=-1,i=n.criteria,o=e.criteria,s=i.length,a=t.length;++r<s;){var l=t8(i[r],o[r]);if(l){if(r>=a)return l;var u=t[r];return l*(u=="desc"?-1:1)}}return n.index-e.index}function r8(n,e,t){e.length?e=Wl(e,function(o){return cr(o)?function(s){return q0(s,o.length===1?o[0]:o)}:o}):e=[Lu];var r=-1;e=Wl(e,Ed(Id));var i=dO(n,function(o,s,a){var l=Wl(e,function(u){return u(o)});return{criteria:l,index:++r,value:o}});return e8(i,function(o,s){return n8(o,s,t)})}var i8=Math.ceil,o8=Math.max;function s8(n,e,t,r){for(var i=-1,o=o8(i8((e-n)/(t||1)),0),s=Array(o);o--;)s[r?o:++i]=n,n+=t;return s}function a8(n){return function(e,t,r){return r&&typeof r!="number"&&Xm(e,t,r)&&(t=r=void 0),e=Ff(e),t===void 0?(t=e,e=0):t=Ff(t),r=r===void 0?e<t?1:-1:Ff(r),s8(e,t,r,n)}}var l8=a8();const u8=l8;var c8=pN(function(n,e){if(n==null)return[];var t=e.length;return t>1&&Xm(n,e[0],e[1])?e=[]:t>2&&Xm(e[0],e[1],e[2])&&(e=[e[0]]),r8(n,Zk(e,1),[])});const f8=c8;var h8="Expected a function";function d8(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(h8);return Ci(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),Ad(n,e,{leading:r,maxWait:e,trailing:i})}var p8=9007199254740991,_p=4294967295,m8=Math.min;function M_(n,e){if(n=Ix(n),n<1||n>p8)return[];var t=_p,r=m8(n,_p);e=hO(e),n-=_p;for(var i=qk(r,e);++t<n;)e(t);return i}var g8=0;function mh(n){var e=++g8;return Yk(n)+e}const v8=1e4,y8=[];function rg(n,e=!1){const t={};if(!Array.isArray(n))throw new TypeError("Array expected");function r(s,a){(!Array.isArray(s)&&!ir(s)||e&&a.length>0)&&(t[Ge(a)]=!0),ir(s)&&Object.keys(s).forEach(u=>{r(s[u],a.concat(u))})}const i=Math.min(n.length,v8);for(let s=0;s<i;s++){const a=n[s];r(a,y8)}return Object.keys(t).sort().map(Ko)}function pO(n,e,t){if(!(e<=n))for(let r=n;r<e;r++)t(r)}function D_(n,e){return n.length>e?n.slice(0,e):n}function L_(n){return{...n}}function j_(n){return Object.values(n)}function B_(n,e,t,r){const i=n.slice(0),o=i.splice(e,t);return i.splice.apply(i,[e+r,0,...o]),i}function Ln(n){return parseInt(n,10)}function _r(n){return ir(n)}function sr(n){return Array.isArray(n)}function G0(n){try{return JSON.parse(n)}catch{return JSON.parse(qo(n))}}function mO(n){try{return G0(n)}catch{return}}function J0(n,e=JSON.parse){n=n.replace(gO,"");try{return e(n)}catch{}try{return e("["+n+"]")}catch{}try{return e("{"+n+"}")}catch{}throw new Error("Failed to parse partial JSON")}function _8(n){n=n.replace(gO,"");try{return qo(n)}catch{}try{const e=qo("["+n+"]");return e.substring(1,e.length-1)}catch{}try{const e=qo("{"+n+"}");return e.substring(1,e.length-1)}catch{}throw new Error("Failed to repair partial JSON")}const gO=/,\s*$/;function Y0(n,e){const t=U_.exec(e);if(t){const r=Ln(t[2]),i=w8(n,`
`,0,r),o=n.lastIndexOf(`
`,r),s=r-o-1;return{position:r,line:i,column:s,message:e.replace(U_,()=>`line ${i+1} column ${s+1}`)}}else{const r=k8.exec(e),i=r?Ln(r[1]):null,o=i!==null?i-1:null,s=O8.exec(e),a=s?Ln(s[1]):null,l=a!==null?a-1:null;return{position:o!==null&&l!==null?b8(n,o,l):null,line:o,column:l,message:e.replace(/^JSON.parse: /,"").replace(/ of the JSON data$/,"")}}}function b8(n,e,t){let r=n.indexOf(`
`),i=1;for(;i<e&&r!==-1;)r=n.indexOf(`
`,r+1),i++;return r!==-1?r+t+1:null}function w8(n,e,t=0,r=n.length){let i=0;for(let o=t;o<r;o++)n.charAt(o)===e&&i++;return i}function S8(n,e){try{const t=yd.parse(n),r=Ge(e),i=t.pointers[r];if(i)return{path:e,line:i.key?i.key.line:i.value?i.value.line:0,column:i.key?i.key.column:i.value?i.value.column:0,from:i.key?i.key.pos:i.value?i.value.pos:0,to:i.keyEnd?i.keyEnd.pos:i.valueEnd?i.valueEnd.pos:0}}catch(t){console.error(t)}return null}function E8(n,e){if(e==="array"){if(Array.isArray(n))return n;if(ir(n))return j_(n);if(typeof n=="string"){const t=JSON.parse(n);if(Array.isArray(t))return t;if(ir(t))return j_(t)}}if(e==="object"){if(Array.isArray(n))return L_(n);if(ir(n))return n;if(typeof n=="string"){const t=JSON.parse(n);if(ir(t))return t;if(Array.isArray(t))return L_(t)}}if(e==="value")return Hn(n)?JSON.stringify(n):n;throw new Error(`Cannot convert ${M0(n)} to ${e}`)}function bp(n){return ir(n)?n.json!==void 0?n.text!==void 0?'Content must contain either a property "json" or a property "text" but not both':null:n.text===void 0?'Content must contain either a property "json" or a property "text"':typeof n.text!="string"?'Content "text" property must be string':null:"Content must be an object"}function ig(n){return typeof n.text=="string"}function F_(n,e){return C8(n,e)>e}function C8(n,e=1/0){if(ig(n))return n.text.length;const t=n.json;let r=0;function i(o){if(Array.isArray(o)){if(r+=2+(o.length-1),r>e)return r;for(let s=0;s<o.length;s++){const a=o[s];if(i(a),r>e)return r}}else if(ir(o)){const s=Object.keys(o);r+=2+s.length+(s.length-1);for(let a=0;a<s.length;a++){const l=s[a],u=o[l];r+=l.length+2,i(u)}}else typeof o=="string"?r+=o.length+2:r+=String(o).length}return i(t),r}const U_=/(position|char) (\d+)/,k8=/line (\d+)/,O8=/column (\d+)/;var Fr;(function(n){n.text="text",n.tree="tree"})(Fr||(Fr={}));var nn;(function(n){n.after="after",n.inside="inside",n.key="key",n.value="value",n.multi="multi"})(nn||(nn={}));var vi;(function(n){n.after="after",n.key="key",n.value="value",n.inside="inside"})(vi||(vi={}));var en;(function(n){n.info="info",n.warning="warning",n.error="error"})(en||(en={}));var Ei;(function(n){n.key="key",n.value="value"})(Ei||(Ei={}));function vO({escapeControlCharacters:n,escapeUnicodeCharacters:e}){return n?e?T8:P8:e?I8:A8}const T8={escapeValue:n=>yO(bO(String(n))),unescapeValue:n=>wO(_O(n))},P8={escapeValue:n=>bO(String(n)),unescapeValue:n=>wO(n)},I8={escapeValue:n=>yO(String(n)),unescapeValue:n=>_O(n)},A8={escapeValue:n=>String(n),unescapeValue:n=>n};function yO(n){return n.replace(/[^\x20-\x7F]/g,e=>e==="\b"||e==="\f"||e===`
`||e==="\r"||e==="	"?e:"\\u"+("000"+e.codePointAt(0).toString(16)).slice(-4))}function _O(n){return n.replace(/\\u[a-fA-F0-9]{4}/g,e=>{try{return JSON.parse('"'+e+'"')}catch{return e}})}const R8={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},x8={"\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"};function bO(n){return n.replace(/[\b\f\n\r\t]/g,e=>R8[e]||e)}function wO(n){return n.replace(/\\[bfnrt]/g,e=>x8[e]||e)}function Ds(n){return typeof n!="string"?String(n):n.endsWith(`
`)?n+`
`:n}function N8(n){return n.replace(/\n$/,"")}function SO(n,e){return ju(n,t=>t.nodeName.toUpperCase()===e.toUpperCase())}function _s(n,e,t){return ju(n,r=>D8(r,e,t))}function M8(n){return n.nodeName==="DIV"&&n.contentEditable==="true"}function D8(n,e,t){return typeof n.getAttribute=="function"&&n.getAttribute(e)===t}function ju(n,e){return!!Q0(n,e)}function Q0(n,e){let t=n;for(;t&&!e(t);)t=t.parentNode;return t||void 0}function EO(n){if(n.firstChild==null){n.focus();return}const e=document.createRange(),t=window.getSelection();e.setStart(n,1),e.collapse(!0),t.removeAllRanges(),t.addRange(e)}function cu(n){return n&&n.ownerDocument&&n.ownerDocument.defaultView}function og(n){const e=cu(n);return ju(e.document.activeElement,t=>t===n)}function L8(n,e){return Q0(n,t=>t.nodeName===e)}function wp(n){return _s(n,"data-type","selectable-key")?nn.key:_s(n,"data-type","selectable-value")?nn.value:_s(n,"data-type","insert-selection-area-inside")?nn.inside:_s(n,"data-type","insert-selection-area-after")?nn.after:nn.multi}function sg(n){return encodeURIComponent(Ge(n))}function j8(n){return Ko(decodeURIComponent(n))}function B8(n){const e=Q0(n,t=>t.hasAttribute("data-path"));return e?j8(e.getAttribute("data-path")):null}function F8({allElements:n,currentElement:e,direction:t,hasPrio:r=()=>!0,margin:i=10}){const o=z5(n.filter(a),l),s=l(e);function a(p){const y=p.getBoundingClientRect();return y.width>0&&y.height>0}function l(p){const y=p.getBoundingClientRect();return{x:y.left+y.width/2,y:y.top+y.height/2,rect:y,element:p}}const u=(p,y)=>Math.abs(p.y-y.y)<i,c=(p,y)=>p.rect.left+i<y.rect.left,f=(p,y)=>p.rect.right>y.rect.right+i,d=(p,y)=>p.y+i<y.y,g=(p,y)=>p.y>y.y+i;function h(p,y,b=1){const _=p.x-y.x,w=(p.y-y.y)*b;return Math.sqrt(_*_+w*w)}const v=p=>h(p,s),m=p=>h(p,s,10);if(t==="Left"||t==="Right"){const p=t==="Left"?o.filter(_=>c(_,s)):o.filter(_=>f(_,s)),y=p.filter(_=>u(_,s)),b=vc(y,v)||vc(p,m);return b==null?void 0:b.element}if(t==="Up"||t==="Down"){const p=t==="Up"?o.filter(_=>d(_,s)):o.filter(_=>g(_,s)),y=p.filter(_=>r(_.element)),b=vc(y,v)||vc(p,v);return b==null?void 0:b.element}}const CO=typeof navigator<"u"?navigator.platform.toUpperCase().indexOf("MAC")>=0:!1;function U8(n){return q8[n]||""}function nl(n){const e=[];n.ctrlKey&&e.push("Ctrl"),n.metaKey&&e.push("Command"),n.altKey&&e.push(CO?"Option":"Alt"),n.shiftKey&&e.push("Shift");const t=U8(n.which);return V8[t]||e.push(t),e.join("+")}const V8={Ctrl:!0,Command:!0,Alt:!0,Option:!0,Shift:!0},q8={8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause_Break",20:"Caps_Lock",27:"Escape",33:"Page_Up",34:"Page_Down",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Left_Window_Key",92:"Right_Window_Key",93:"Select_Key",96:"Numpad_0",97:"Numpad_1",98:"Numpad_2",99:"Numpad_3",100:"Numpad_4",101:"Numpad_5",102:"Numpad_6",103:"Numpad_7",104:"Numpad_8",105:"Numpad_9",106:"Numpad_*",107:"Numpad_+",109:"Numpad_-",110:"Numpad_.",111:"Numpad_/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Num_Lock",145:"Scroll_Lock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"};const{window:Sp}=O0;function V_(n){let e,t,r,i,o,s;const a=[n[0].props];var l=n[0].component;function u(c){let f={};for(let d=0;d<a.length;d+=1)f=is(f,a[d]);return{props:f}}return l&&(i=new l(u())),{c(){e=ee("div"),t=ee("input"),r=me(),i&&Te(i.$$.fragment),T(t,"class","jse-hidden-input svelte-15awhio"),T(e,"class","jse-absolute-popup-content svelte-15awhio"),T(e,"style",o=q_(n[1],n[0].options))},m(c,f){ue(c,e,f),j(e,t),n[7](t),j(e,r),i&&ke(i,e,null),s=!0},p(c,f){const d=f&1?zs(a,[pd(c[0].props)]):{};if(l!==(l=c[0].component)){if(i){Ve();const g=i;te(g.$$.fragment,1,0,()=>{Oe(g,1)}),qe()}l?(i=new l(u()),Te(i.$$.fragment),X(i.$$.fragment,1),ke(i,e,null)):i=null}else l&&i.$set(d);(!s||f&3&&o!==(o=q_(c[1],c[0].options)))&&T(e,"style",o)},i(c){s||(i&&X(i.$$.fragment,c),s=!0)},o(c){i&&te(i.$$.fragment,c),s=!1},d(c){c&&le(e),n[7](null),i&&Oe(i)}}}function H8(n){let e,t,r,i,o=n[1]&&V_(n);return{c(){e=ee("div"),o&&o.c(),T(e,"class","jse-absolute-popup svelte-15awhio")},m(s,a){ue(s,e,a),o&&o.m(e,null),n[8](e),t=!0,r||(i=[Ce(Sp,"mousedown",n[3],!0),Ce(Sp,"keydown",n[4],!0),Ce(Sp,"wheel",n[5],!0),Ce(e,"mousedown",z8),Ce(e,"keydown",n[4])],r=!0)},p(s,[a]){s[1]?o?(o.p(s,a),a&2&&X(o,1)):(o=V_(s),o.c(),X(o,1),o.m(e,null)):o&&(Ve(),te(o,1,1,()=>{o=null}),qe())},i(s){t||(X(o),t=!0)},o(s){te(o),t=!1},d(s){s&&le(e),o&&o.d(),n[8](null),r=!1,rn(i)}}}function z8(n){n.stopPropagation()}function q_(n,e){function t(){if(e.anchor){const{anchor:c,width:f=0,height:d=0,offsetTop:g=0,offsetLeft:h=0,position:v}=e,{left:m,top:p,bottom:y,right:b}=c.getBoundingClientRect(),_=v==="top"||p+d>window.innerHeight&&p>d,w=v==="left"||m+f>window.innerWidth&&m>f;return{left:w?b-h:m+h,top:_?p-g:y+g,positionAbove:_,positionLeft:w}}else if(typeof e.left=="number"&&typeof e.top=="number"){const{left:c,top:f,width:d=0,height:g=0}=e,h=f+g>window.innerHeight&&f>g,v=c+d>window.innerWidth&&c>d;return{left:c,top:f,positionAbove:h,positionLeft:v}}else throw new Error('Invalid config: pass either "left" and "top", or pass "anchor"')}const r=n.getBoundingClientRect(),{left:i,top:o,positionAbove:s,positionLeft:a}=t(),l=s?`bottom: ${r.top-o}px;`:`top: ${o-r.top}px;`,u=a?`right: ${r.left-i}px;`:`left: ${i-r.left}px;`;return l+u}function W8(n,e,t){let{popup:r}=e,{closeAbsolutePopup:i}=e,o,s;Nr(f);function a(h){r.options&&r.options.closeOnOuterClick&&!ju(h.target,v=>v===o)&&i(r.id)}function l(h){a(h)}function u(h){nl(h)==="Escape"&&i(r.id)}function c(h){a(h)}function f(){s&&s.focus()}function d(h){wt[h?"unshift":"push"](()=>{s=h,t(2,s)})}function g(h){wt[h?"unshift":"push"](()=>{o=h,t(1,o)})}return n.$$set=h=>{"popup"in h&&t(0,r=h.popup),"closeAbsolutePopup"in h&&t(6,i=h.closeAbsolutePopup)},[r,o,s,l,u,c,i,d,g]}class K8 extends rt{constructor(e){super(),nt(this,e,W8,H8,on,{popup:0,closeAbsolutePopup:6})}}function H_(n,e,t){const r=n.slice();return r[6]=e[t],r}function z_(n){let e,t;return e=new K8({props:{popup:n[6],closeAbsolutePopup:n[1]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.popup=r[6]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function G8(n){let e,t,r=n[0],i=[];for(let l=0;l<r.length;l+=1)i[l]=z_(H_(n,r,l));const o=l=>te(i[l],1,1,()=>{i[l]=null}),s=n[3].default,a=Yr(s,n,n[2],null);return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=me(),a&&a.c()},m(l,u){for(let c=0;c<i.length;c+=1)i[c].m(l,u);ue(l,e,u),a&&a.m(l,u),t=!0},p(l,[u]){if(u&3){r=l[0];let c;for(c=0;c<r.length;c+=1){const f=H_(l,r,c);i[c]?(i[c].p(f,u),X(i[c],1)):(i[c]=z_(f),i[c].c(),X(i[c],1),i[c].m(e.parentNode,e))}for(Ve(),c=r.length;c<i.length;c+=1)o(c);qe()}a&&a.p&&(!t||u&4)&&Zr(a,s,l,l[2],t?Qr(s,l[2],u,null):Xr(l[2]),null)},i(l){if(!t){for(let u=0;u<r.length;u+=1)X(i[u]);X(a,l),t=!0}},o(l){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)te(i[u]);te(a,l),t=!1},d(l){xn(i,l),l&&le(e),a&&a.d(l)}}}function J8(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=Sr("jsoneditor:AbsolutePopup");let s=[];function a(u,c,f){o("open...",c,f);const d={id:lh(),component:u,props:c||{},options:f||{}};return t(0,s=[...s,d]),d.id}function l(u){const c=s.findIndex(f=>f.id===u);if(c!==-1){const f=s[c];f.options.onClose&&f.options.onClose(),t(0,s=s.filter(d=>d.id!==u))}}return vk("absolute-popup",{openAbsolutePopup:a,closeAbsolutePopup:l}),n.$$set=u=>{"$$scope"in u&&t(2,i=u.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&o("popups",s)},[s,l,i,r]}class kO extends rt{constructor(e){super(),nt(this,e,J8,G8,Nt,{})}}/*!
 * Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var Y8={prefix:"fas",iconName:"angle-down",icon:[384,512,[8964],"f107","M192 384c-8.188 0-16.38-3.125-22.62-9.375l-160-160c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L192 306.8l137.4-137.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-160 160C208.4 380.9 200.2 384 192 384z"]},OO={prefix:"fas",iconName:"angle-right",icon:[256,512,[8250],"f105","M64 448c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L178.8 256L41.38 118.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l160 160c12.5 12.5 12.5 32.75 0 45.25l-160 160C80.38 444.9 72.19 448 64 448z"]},Q8={prefix:"fas",iconName:"arrow-down",icon:[384,512,[8595],"f063","M374.6 310.6l-160 160C208.4 476.9 200.2 480 192 480s-16.38-3.125-22.62-9.375l-160-160c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 370.8V64c0-17.69 14.33-31.1 31.1-31.1S224 46.31 224 64v306.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0S387.1 298.1 374.6 310.6z"]},Z8={prefix:"fas",iconName:"arrow-down-short-wide",icon:[576,512,["sort-amount-desc","sort-amount-down-alt"],"f884","M320 224H416c17.67 0 32-14.33 32-32s-14.33-32-32-32h-95.1c-17.67 0-32 14.33-32 32S302.3 224 320 224zM320 352H480c17.67 0 32-14.33 32-32s-14.33-32-32-32h-159.1c-17.67 0-32 14.33-32 32S302.3 352 320 352zM320 96h32c17.67 0 31.1-14.33 31.1-32s-14.33-32-31.1-32h-32c-17.67 0-32 14.33-32 32S302.3 96 320 96zM544 416h-223.1c-17.67 0-32 14.33-32 32s14.33 32 32 32H544c17.67 0 32-14.33 32-32S561.7 416 544 416zM192.4 330.7L160 366.1V64.03C160 46.33 145.7 32 128 32S96 46.33 96 64.03v302L63.6 330.7c-6.312-6.883-14.94-10.38-23.61-10.38c-7.719 0-15.47 2.781-21.61 8.414c-13.03 11.95-13.9 32.22-1.969 45.27l87.1 96.09c12.12 13.26 35.06 13.26 47.19 0l87.1-96.09c11.94-13.05 11.06-33.31-1.969-45.27C224.6 316.8 204.4 317.7 192.4 330.7z"]},Z0=Z8,X8={prefix:"fas",iconName:"arrow-rotate-left",icon:[512,512,[8634,"arrow-left-rotate","arrow-rotate-back","arrow-rotate-backward","undo"],"f0e2","M480 256c0 123.4-100.5 223.9-223.9 223.9c-48.86 0-95.19-15.58-134.2-44.86c-14.14-10.59-17-30.66-6.391-44.81c10.61-14.09 30.69-16.97 44.8-6.375c27.84 20.91 61 31.94 95.89 31.94C344.3 415.8 416 344.1 416 256s-71.67-159.8-159.8-159.8C205.9 96.22 158.6 120.3 128.6 160H192c17.67 0 32 14.31 32 32S209.7 224 192 224H48c-17.67 0-32-14.31-32-32V48c0-17.69 14.33-32 32-32s32 14.31 32 32v70.23C122.1 64.58 186.1 32.11 256.1 32.11C379.5 32.11 480 132.6 480 256z"]},TO=X8,$8={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M496 48V192c0 17.69-14.31 32-32 32H320c-17.69 0-32-14.31-32-32s14.31-32 32-32h63.39c-29.97-39.7-77.25-63.78-127.6-63.78C167.7 96.22 96 167.9 96 256s71.69 159.8 159.8 159.8c34.88 0 68.03-11.03 95.88-31.94c14.22-10.53 34.22-7.75 44.81 6.375c10.59 14.16 7.75 34.22-6.375 44.81c-39.03 29.28-85.36 44.86-134.2 44.86C132.5 479.9 32 379.4 32 256s100.5-223.9 223.9-223.9c69.15 0 134 32.47 176.1 86.12V48c0-17.69 14.31-32 32-32S496 30.31 496 48z"]},PO=$8,Fi={prefix:"fas",iconName:"caret-down",icon:[320,512,[],"f0d7","M310.6 246.6l-127.1 128C176.4 380.9 168.2 384 160 384s-16.38-3.125-22.63-9.375l-127.1-128C.2244 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75S319.8 237.5 310.6 246.6z"]},Do={prefix:"fas",iconName:"caret-right",icon:[256,512,[],"f0da","M118.6 105.4l128 127.1C252.9 239.6 256 247.8 256 255.1s-3.125 16.38-9.375 22.63l-128 127.1c-9.156 9.156-22.91 11.9-34.88 6.943S64 396.9 64 383.1V128c0-12.94 7.781-24.62 19.75-29.58S109.5 96.23 118.6 105.4z"]},ag={prefix:"fas",iconName:"check",icon:[448,512,[10004,10003],"f00c","M438.6 105.4C451.1 117.9 451.1 138.1 438.6 150.6L182.6 406.6C170.1 419.1 149.9 419.1 137.4 406.6L9.372 278.6C-3.124 266.1-3.124 245.9 9.372 233.4C21.87 220.9 42.13 220.9 54.63 233.4L159.1 338.7L393.4 105.4C405.9 92.88 426.1 92.88 438.6 105.4H438.6z"]},eL={prefix:"fas",iconName:"chevron-down",icon:[448,512,[],"f078","M224 416c-8.188 0-16.38-3.125-22.62-9.375l-192-192c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L224 338.8l169.4-169.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-192 192C240.4 412.9 232.2 416 224 416z"]},tL={prefix:"fas",iconName:"chevron-up",icon:[448,512,[],"f077","M416 352c-8.188 0-16.38-3.125-22.62-9.375L224 173.3l-169.4 169.4c-12.5 12.5-32.75 12.5-45.25 0s-12.5-32.75 0-45.25l192-192c12.5-12.5 32.75-12.5 45.25 0l192 192c12.5 12.5 12.5 32.75 0 45.25C432.4 348.9 424.2 352 416 352z"]},nL={prefix:"fas",iconName:"circle-notch",icon:[512,512,[],"f1ce","M222.7 32.15C227.7 49.08 218.1 66.9 201.1 71.94C121.8 95.55 64 169.1 64 255.1C64 362 149.1 447.1 256 447.1C362 447.1 448 362 448 255.1C448 169.1 390.2 95.55 310.9 71.94C293.9 66.9 284.3 49.08 289.3 32.15C294.4 15.21 312.2 5.562 329.1 10.6C434.9 42.07 512 139.1 512 255.1C512 397.4 397.4 511.1 256 511.1C114.6 511.1 0 397.4 0 255.1C0 139.1 77.15 42.07 182.9 10.6C199.8 5.562 217.6 15.21 222.7 32.15V32.15z"]},rL={prefix:"fas",iconName:"clone",icon:[512,512,[],"f24d","M0 224C0 188.7 28.65 160 64 160H128V288C128 341 170.1 384 224 384H352V448C352 483.3 323.3 512 288 512H64C28.65 512 0 483.3 0 448V224zM224 352C188.7 352 160 323.3 160 288V64C160 28.65 188.7 0 224 0H448C483.3 0 512 28.65 512 64V288C512 323.3 483.3 352 448 352H224z"]},gh={prefix:"fas",iconName:"code",icon:[640,512,[],"f121","M414.8 40.79L286.8 488.8C281.9 505.8 264.2 515.6 247.2 510.8C230.2 505.9 220.4 488.2 225.2 471.2L353.2 23.21C358.1 6.216 375.8-3.624 392.8 1.232C409.8 6.087 419.6 23.8 414.8 40.79H414.8zM518.6 121.4L630.6 233.4C643.1 245.9 643.1 266.1 630.6 278.6L518.6 390.6C506.1 403.1 485.9 403.1 473.4 390.6C460.9 378.1 460.9 357.9 473.4 345.4L562.7 256L473.4 166.6C460.9 154.1 460.9 133.9 473.4 121.4C485.9 108.9 506.1 108.9 518.6 121.4V121.4zM166.6 166.6L77.25 256L166.6 345.4C179.1 357.9 179.1 378.1 166.6 390.6C154.1 403.1 133.9 403.1 121.4 390.6L9.372 278.6C-3.124 266.1-3.124 245.9 9.372 233.4L121.4 121.4C133.9 108.9 154.1 108.9 166.6 121.4C179.1 133.9 179.1 154.1 166.6 166.6V166.6z"]},vh={prefix:"fas",iconName:"copy",icon:[512,512,[],"f0c5","M384 96L384 0h-112c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48H464c26.51 0 48-21.49 48-48V128h-95.1C398.4 128 384 113.6 384 96zM416 0v96h96L416 0zM192 352V128h-144c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h192c26.51 0 48-21.49 48-48L288 416h-32C220.7 416 192 387.3 192 352z"]},iL={prefix:"fas",iconName:"crop-simple",icon:[512,512,["crop-alt"],"f565","M128 384H352V448H128C92.65 448 64 419.3 64 384V128H32C14.33 128 0 113.7 0 96C0 78.33 14.33 64 32 64H64V32C64 14.33 78.33 0 96 0C113.7 0 128 14.33 128 32V384zM384 128H160V64H384C419.3 64 448 92.65 448 128V384H480C497.7 384 512 398.3 512 416C512 433.7 497.7 448 480 448H448V480C448 497.7 433.7 512 416 512C398.3 512 384 497.7 384 480V128z"]},oL=iL,sL={prefix:"fas",iconName:"ellipsis-vertical",icon:[128,512,["ellipsis-v"],"f142","M64 360C94.93 360 120 385.1 120 416C120 446.9 94.93 472 64 472C33.07 472 8 446.9 8 416C8 385.1 33.07 360 64 360zM64 200C94.93 200 120 225.1 120 256C120 286.9 94.93 312 64 312C33.07 312 8 286.9 8 256C8 225.1 33.07 200 64 200zM64 152C33.07 152 8 126.9 8 96C8 65.07 33.07 40 64 40C94.93 40 120 65.07 120 96C120 126.9 94.93 152 64 152z"]},aL=sL,X0={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M3.853 54.87C10.47 40.9 24.54 32 40 32H472C487.5 32 501.5 40.9 508.1 54.87C514.8 68.84 512.7 85.37 502.1 97.33L320 320.9V448C320 460.1 313.2 471.2 302.3 476.6C291.5 482 278.5 480.9 268.8 473.6L204.8 425.6C196.7 419.6 192 410.1 192 400V320.9L9.042 97.33C-.745 85.37-2.765 68.84 3.854 54.87L3.853 54.87z"]},lL={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6C499.2 175.2 496.4 184.9 489.6 191.2L446.3 230.6C447.4 238.9 448 247.4 448 256C448 264.6 447.4 273.1 446.3 281.4L489.6 320.8C496.4 327.1 499.2 336.8 495.9 345.4C491.5 357.3 486.2 368.8 480.2 379.7L475.5 387.8C468.9 398.8 461.5 409.2 453.4 419.1C447.4 426.2 437.7 428.7 428.9 425.9L373.2 408.1C359.8 418.4 344.1 427 329.2 433.6L316.7 490.7C314.7 499.7 307.7 506.1 298.5 508.5C284.7 510.8 270.5 512 255.1 512C241.5 512 227.3 510.8 213.5 508.5C204.3 506.1 197.3 499.7 195.3 490.7L182.8 433.6C167 427 152.2 418.4 138.8 408.1L83.14 425.9C74.3 428.7 64.55 426.2 58.63 419.1C50.52 409.2 43.12 398.8 36.52 387.8L31.84 379.7C25.77 368.8 20.49 357.3 16.06 345.4C12.82 336.8 15.55 327.1 22.41 320.8L65.67 281.4C64.57 273.1 64 264.6 64 256C64 247.4 64.57 238.9 65.67 230.6L22.41 191.2C15.55 184.9 12.82 175.3 16.06 166.6C20.49 154.7 25.78 143.2 31.84 132.3L36.51 124.2C43.12 113.2 50.52 102.8 58.63 92.95C64.55 85.8 74.3 83.32 83.14 86.14L138.8 103.9C152.2 93.56 167 84.96 182.8 78.43L195.3 21.33C197.3 12.25 204.3 5.04 213.5 3.51C227.3 1.201 241.5 0 256 0C270.5 0 284.7 1.201 298.5 3.51C307.7 5.04 314.7 12.25 316.7 21.33L329.2 78.43C344.1 84.96 359.8 93.56 373.2 103.9L428.9 86.14C437.7 83.32 447.4 85.8 453.4 92.95C461.5 102.8 468.9 113.2 475.5 124.2L480.2 132.3C486.2 143.2 491.5 154.7 495.9 166.6V166.6zM256 336C300.2 336 336 300.2 336 255.1C336 211.8 300.2 175.1 256 175.1C211.8 175.1 176 211.8 176 255.1C176 300.2 211.8 336 256 336z"]},uL=lL,cL={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"]},$0=cL,fL={prefix:"fas",iconName:"paste",icon:[512,512,["file-clipboard"],"f0ea","M320 96V80C320 53.49 298.5 32 272 32H215.4C204.3 12.89 183.6 0 160 0S115.7 12.89 104.6 32H48C21.49 32 0 53.49 0 80v320C0 426.5 21.49 448 48 448l144 .0013L192 176C192 131.8 227.8 96 272 96H320zM160 88C146.8 88 136 77.25 136 64S146.8 40 160 40S184 50.75 184 64S173.3 88 160 88zM416 128v96h96L416 128zM384 224L384 128h-112C245.5 128 224 149.5 224 176v288c0 26.51 21.49 48 48 48h192c26.51 0 48-21.49 48-48V256h-95.99C398.4 256 384 241.6 384 224z"]},ev={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.32C387.7-5.678 428.3-5.678 453.3 19.32L492.7 58.75C517.7 83.74 517.7 124.3 492.7 149.3L444.3 197.7L314.3 67.72L362.7 19.32zM421.7 220.3L188.5 453.4C178.1 463.8 165.2 471.5 151.1 475.6L30.77 511C22.35 513.5 13.24 511.2 7.03 504.1C.8198 498.8-1.502 489.7 .976 481.2L36.37 360.9C40.53 346.8 48.16 333.9 58.57 323.5L291.7 90.34L421.7 220.3z"]},hL={prefix:"fas",iconName:"scissors",icon:[512,512,[9986,9988,9984,"cut"],"f0c4","M396.8 51.2C425.1 22.92 470.9 22.92 499.2 51.2C506.3 58.27 506.3 69.73 499.2 76.8L216.5 359.5C221.3 372.1 224 385.7 224 400C224 461.9 173.9 512 112 512C50.14 512 0 461.9 0 400C0 338.1 50.14 287.1 112 287.1C126.3 287.1 139.9 290.7 152.5 295.5L191.1 255.1L152.5 216.5C139.9 221.3 126.3 224 112 224C50.14 224 0 173.9 0 112C0 50.14 50.14 0 112 0C173.9 0 224 50.14 224 112C224 126.3 221.3 139.9 216.5 152.5L255.1 191.1L396.8 51.2zM160 111.1C160 85.49 138.5 63.1 112 63.1C85.49 63.1 64 85.49 64 111.1C64 138.5 85.49 159.1 112 159.1C138.5 159.1 160 138.5 160 111.1zM112 448C138.5 448 160 426.5 160 400C160 373.5 138.5 352 112 352C85.49 352 64 373.5 64 400C64 426.5 85.49 448 112 448zM278.6 342.6L342.6 278.6L499.2 435.2C506.3 442.3 506.3 453.7 499.2 460.8C470.9 489.1 425.1 489.1 396.8 460.8L278.6 342.6z"]},lg=hL,dL={prefix:"fas",iconName:"square-caret-down",icon:[448,512,["caret-square-down"],"f150","M384 32H64C28.65 32 0 60.65 0 96v320c0 35.34 28.65 64 64 64h320c35.35 0 64-28.66 64-64V96C448 60.65 419.3 32 384 32zM345.6 232.3l-104 112C237 349.2 230.7 352 224 352s-13.03-2.781-17.59-7.656l-104-112c-6.5-7-8.219-17.19-4.407-25.94C101.8 197.7 110.5 192 120 192h208c9.531 0 18.19 5.656 21.1 14.41C353.8 215.2 352.1 225.3 345.6 232.3z"]},pL=dL,mL={prefix:"fas",iconName:"square-caret-up",icon:[448,512,["caret-square-up"],"f151","M384 32H64C28.65 32 0 60.65 0 96v320c0 35.34 28.65 64 64 64h320c35.35 0 64-28.66 64-64V96C448 60.65 419.3 32 384 32zM349.1 305.6C346.2 314.3 337.5 320 328 320h-208c-9.531 0-18.19-5.656-22-14.41C94.19 296.8 95.91 286.7 102.4 279.7l104-112c9.125-9.75 26.06-9.75 35.19 0l104 112C352.1 286.7 353.8 296.8 349.1 305.6z"]},gL=mL,vL={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"]},rl=vL,tv={prefix:"fas",iconName:"wrench",icon:[512,512,[128295],"f0ad","M507.6 122.8c-2.904-12.09-18.25-16.13-27.04-7.338l-76.55 76.56l-83.1-.0002l0-83.1l76.55-76.56c8.791-8.789 4.75-24.14-7.336-27.04c-23.69-5.693-49.34-6.111-75.92 .2484c-61.45 14.7-109.4 66.9-119.2 129.3C189.8 160.8 192.3 186.7 200.1 210.1l-178.1 178.1c-28.12 28.12-28.12 73.69 0 101.8C35.16 504.1 53.56 512 71.1 512s36.84-7.031 50.91-21.09l178.1-178.1c23.46 7.736 49.31 10.24 76.17 6.004c62.41-9.84 114.6-57.8 129.3-119.2C513.7 172.1 513.3 146.5 507.6 122.8zM80 456c-13.25 0-24-10.75-24-24c0-13.26 10.75-24 24-24s24 10.74 24 24C104 445.3 93.25 456 80 456z"]},yL={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"]},Bu=yL;function yc(n,e=1e3){if(n<.9*e)return n.toFixed()+" B";const t=n/e;if(t<.9*e)return t.toFixed(1)+" KB";const r=t/e;if(r<.9*e)return r.toFixed(1)+" MB";const i=r/e;return i<.9*e?i.toFixed(1)+" GB":(i/e).toFixed(1)+" TB"}const _c=Sr("jsoneditor:FocusTracker");function IO({onMount:n,onDestroy:e,getWindow:t,hasFocus:r,onFocus:i,onBlur:o}){let s,a=!1;function l(){const c=r();c&&(clearTimeout(s),a||(_c("focus"),i(),a=c))}function u(){a&&(clearTimeout(s),s=setTimeout(()=>{_c("blur"),a=!1,o()}))}n(()=>{_c("mount FocusTracker");const c=t();c&&(c.addEventListener("focusin",l,!0),c.addEventListener("focusout",u,!0))}),e(()=>{_c("destroy FocusTracker");const c=t();c&&(c.removeEventListener("focusin",l,!0),c.removeEventListener("focusout",u,!0))})}function _L(n){let e,t,r=[{id:t="path-"+n[0]},n[1]],i={};for(let o=0;o<r.length;o+=1)i=is(i,r[o]);return{c(){e=Ft("path"),ih(e,i)},m(o,s){ue(o,e,s)},p(o,[s]){ih(e,i=zs(r,[s&1&&t!==(t="path-"+o[0])&&{id:t},s&2&&o[1]]))},i:Ne,o:Ne,d(o){o&&le(e)}}}function bL(n,e,t){let{id:r}=e,{data:i={}}=e;return n.$$set=o=>{"id"in o&&t(0,r=o.id),"data"in o&&t(1,i=o.data)},[r,i]}class wL extends rt{constructor(e){super(),nt(this,e,bL,_L,on,{id:0,data:1})}}function SL(n){let e,t,r=[{id:t="polygon-"+n[0]},n[1]],i={};for(let o=0;o<r.length;o+=1)i=is(i,r[o]);return{c(){e=Ft("polygon"),ih(e,i)},m(o,s){ue(o,e,s)},p(o,[s]){ih(e,i=zs(r,[s&1&&t!==(t="polygon-"+o[0])&&{id:t},s&2&&o[1]]))},i:Ne,o:Ne,d(o){o&&le(e)}}}function EL(n,e,t){let{id:r}=e,{data:i={}}=e;return n.$$set=o=>{"id"in o&&t(0,r=o.id),"data"in o&&t(1,i=o.data)},[r,i]}class CL extends rt{constructor(e){super(),nt(this,e,EL,SL,on,{id:0,data:1})}}function kL(n){let e;return{c(){e=Ft("g")},m(t,r){ue(t,e,r),e.innerHTML=n[0]},p(t,[r]){r&1&&(e.innerHTML=t[0])},i:Ne,o:Ne,d(t){t&&le(e)}}}function OL(n,e,t){let r=870711;function i(){return r+=1,`fa-${r.toString(16)}`}let o,{data:s}=e;function a(l){if(!l||!l.raw)return null;let u=l.raw;const c={};return u=u.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,(f,d)=>{const g=i();return c[d]=g,` id="${g}"`}),u=u.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(f,d,g,h)=>{const v=d||h;return!v||!c[v]?f:`#${c[v]}`}),u}return n.$$set=l=>{"data"in l&&t(1,s=l.data)},n.$$.update=()=>{n.$$.dirty&2&&t(0,o=a(s))},[o,s]}class TL extends rt{constructor(e){super(),nt(this,e,OL,kL,on,{data:1})}}function PL(n){let e,t,r,i;const o=n[13].default,s=Yr(o,n,n[12],null);return{c(){e=Ft("svg"),s&&s.c(),T(e,"version","1.1"),T(e,"class",t="fa-icon "+n[0]+" svelte-1dof0an"),T(e,"x",n[8]),T(e,"y",n[9]),T(e,"width",n[1]),T(e,"height",n[2]),T(e,"aria-label",n[11]),T(e,"role",r=n[11]?"img":"presentation"),T(e,"viewBox",n[3]),T(e,"style",n[10]),ze(e,"fa-spin",n[4]),ze(e,"fa-pulse",n[6]),ze(e,"fa-inverse",n[5]),ze(e,"fa-flip-horizontal",n[7]==="horizontal"),ze(e,"fa-flip-vertical",n[7]==="vertical")},m(a,l){ue(a,e,l),s&&s.m(e,null),i=!0},p(a,[l]){s&&s.p&&(!i||l&4096)&&Zr(s,o,a,a[12],i?Qr(o,a[12],l,null):Xr(a[12]),null),(!i||l&1&&t!==(t="fa-icon "+a[0]+" svelte-1dof0an"))&&T(e,"class",t),(!i||l&256)&&T(e,"x",a[8]),(!i||l&512)&&T(e,"y",a[9]),(!i||l&2)&&T(e,"width",a[1]),(!i||l&4)&&T(e,"height",a[2]),(!i||l&2048)&&T(e,"aria-label",a[11]),(!i||l&2048&&r!==(r=a[11]?"img":"presentation"))&&T(e,"role",r),(!i||l&8)&&T(e,"viewBox",a[3]),(!i||l&1024)&&T(e,"style",a[10]),l&17&&ze(e,"fa-spin",a[4]),l&65&&ze(e,"fa-pulse",a[6]),l&33&&ze(e,"fa-inverse",a[5]),l&129&&ze(e,"fa-flip-horizontal",a[7]==="horizontal"),l&129&&ze(e,"fa-flip-vertical",a[7]==="vertical")},i(a){i||(X(s,a),i=!0)},o(a){te(s,a),i=!1},d(a){a&&le(e),s&&s.d(a)}}}function IL(n,e,t){let{$$slots:r={},$$scope:i}=e,{class:o}=e,{width:s}=e,{height:a}=e,{box:l}=e,{spin:u=!1}=e,{inverse:c=!1}=e,{pulse:f=!1}=e,{flip:d=null}=e,{x:g=void 0}=e,{y:h=void 0}=e,{style:v=void 0}=e,{label:m=void 0}=e;return n.$$set=p=>{"class"in p&&t(0,o=p.class),"width"in p&&t(1,s=p.width),"height"in p&&t(2,a=p.height),"box"in p&&t(3,l=p.box),"spin"in p&&t(4,u=p.spin),"inverse"in p&&t(5,c=p.inverse),"pulse"in p&&t(6,f=p.pulse),"flip"in p&&t(7,d=p.flip),"x"in p&&t(8,g=p.x),"y"in p&&t(9,h=p.y),"style"in p&&t(10,v=p.style),"label"in p&&t(11,m=p.label),"$$scope"in p&&t(12,i=p.$$scope)},[o,s,a,l,u,c,f,d,g,h,v,m,i,r]}class AL extends rt{constructor(e){super(),nt(this,e,IL,PL,on,{class:0,width:1,height:2,box:3,spin:4,inverse:5,pulse:6,flip:7,x:8,y:9,style:10,label:11})}}function W_(n,e,t){const r=n.slice();return r[24]=e[t],r[26]=t,r}function K_(n,e,t){const r=n.slice();return r[27]=e[t],r[26]=t,r}function G_(n){let e,t,r,i,o=n[6].paths&&J_(n),s=n[6].polygons&&Q_(n),a=n[6].raw&&X_(n);return{c(){o&&o.c(),e=me(),s&&s.c(),t=me(),a&&a.c(),r=xt()},m(l,u){o&&o.m(l,u),ue(l,e,u),s&&s.m(l,u),ue(l,t,u),a&&a.m(l,u),ue(l,r,u),i=!0},p(l,u){l[6].paths?o?(o.p(l,u),u&64&&X(o,1)):(o=J_(l),o.c(),X(o,1),o.m(e.parentNode,e)):o&&(Ve(),te(o,1,1,()=>{o=null}),qe()),l[6].polygons?s?(s.p(l,u),u&64&&X(s,1)):(s=Q_(l),s.c(),X(s,1),s.m(t.parentNode,t)):s&&(Ve(),te(s,1,1,()=>{s=null}),qe()),l[6].raw?a?(a.p(l,u),u&64&&X(a,1)):(a=X_(l),a.c(),X(a,1),a.m(r.parentNode,r)):a&&(Ve(),te(a,1,1,()=>{a=null}),qe())},i(l){i||(X(o),X(s),X(a),i=!0)},o(l){te(o),te(s),te(a),i=!1},d(l){o&&o.d(l),l&&le(e),s&&s.d(l),l&&le(t),a&&a.d(l),l&&le(r)}}}function J_(n){let e,t,r=n[6].paths,i=[];for(let s=0;s<r.length;s+=1)i[s]=Y_(K_(n,r,s));const o=s=>te(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=xt()},m(s,a){for(let l=0;l<i.length;l+=1)i[l].m(s,a);ue(s,e,a),t=!0},p(s,a){if(a&64){r=s[6].paths;let l;for(l=0;l<r.length;l+=1){const u=K_(s,r,l);i[l]?(i[l].p(u,a),X(i[l],1)):(i[l]=Y_(u),i[l].c(),X(i[l],1),i[l].m(e.parentNode,e))}for(Ve(),l=r.length;l<i.length;l+=1)o(l);qe()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)X(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)te(i[a]);t=!1},d(s){xn(i,s),s&&le(e)}}}function Y_(n){let e,t;return e=new wL({props:{id:n[26],data:n[27]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i&64&&(o.data=r[27]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Q_(n){let e,t,r=n[6].polygons,i=[];for(let s=0;s<r.length;s+=1)i[s]=Z_(W_(n,r,s));const o=s=>te(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=xt()},m(s,a){for(let l=0;l<i.length;l+=1)i[l].m(s,a);ue(s,e,a),t=!0},p(s,a){if(a&64){r=s[6].polygons;let l;for(l=0;l<r.length;l+=1){const u=W_(s,r,l);i[l]?(i[l].p(u,a),X(i[l],1)):(i[l]=Z_(u),i[l].c(),X(i[l],1),i[l].m(e.parentNode,e))}for(Ve(),l=r.length;l<i.length;l+=1)o(l);qe()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)X(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)te(i[a]);t=!1},d(s){xn(i,s),s&&le(e)}}}function Z_(n){let e,t;return e=new CL({props:{id:n[26],data:n[24]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i&64&&(o.data=r[24]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function X_(n){let e,t,r;function i(s){n[15](s)}let o={};return n[6]!==void 0&&(o.data=n[6]),e=new TL({props:o}),wt.push(()=>Ir(e,"data",i)),{c(){Te(e.$$.fragment)},m(s,a){ke(e,s,a),r=!0},p(s,a){const l={};!t&&a&64&&(t=!0,l.data=s[6],qr(()=>t=!1)),e.$set(l)},i(s){r||(X(e.$$.fragment,s),r=!0)},o(s){te(e.$$.fragment,s),r=!1},d(s){Oe(e,s)}}}function RL(n){let e,t,r=n[6]&&G_(n);return{c(){r&&r.c(),e=xt()},m(i,o){r&&r.m(i,o),ue(i,e,o),t=!0},p(i,o){i[6]?r?(r.p(i,o),o&64&&X(r,1)):(r=G_(i),r.c(),X(r,1),r.m(e.parentNode,e)):r&&(Ve(),te(r,1,1,()=>{r=null}),qe())},i(i){t||(X(r),t=!0)},o(i){te(r),t=!1},d(i){r&&r.d(i),i&&le(e)}}}function xL(n){let e;const t=n[14].default,r=Yr(t,n,n[16],null),i=r||RL(n);return{c(){i&&i.c()},m(o,s){i&&i.m(o,s),e=!0},p(o,s){r?r.p&&(!e||s&65536)&&Zr(r,t,o,o[16],e?Qr(t,o[16],s,null):Xr(o[16]),null):i&&i.p&&(!e||s&64)&&i.p(o,e?s:-1)},i(o){e||(X(i,o),e=!0)},o(o){te(i,o),e=!1},d(o){i&&i.d(o)}}}function NL(n){let e,t;return e=new AL({props:{label:n[5],width:n[7],height:n[8],box:n[10],style:n[9],spin:n[1],flip:n[4],inverse:n[2],pulse:n[3],class:n[0],$$slots:{default:[xL]},$$scope:{ctx:n}}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,[i]){const o={};i&32&&(o.label=r[5]),i&128&&(o.width=r[7]),i&256&&(o.height=r[8]),i&1024&&(o.box=r[10]),i&512&&(o.style=r[9]),i&2&&(o.spin=r[1]),i&16&&(o.flip=r[4]),i&4&&(o.inverse=r[2]),i&8&&(o.pulse=r[3]),i&1&&(o.class=r[0]),i&65600&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}let $_=1;function ML(n){if("iconName"in n&&"icon"in n){let e={},t=n.icon,r=n.iconName,i=t[0],o=t[1],s=t[4],a={width:i,height:o,paths:[{d:s}]};return e[r]=a,e}return n}function DL(n,e,t){let{$$slots:r={},$$scope:i}=e,{class:o=""}=e,{data:s}=e,{scale:a=1}=e,{spin:l=!1}=e,{inverse:u=!1}=e,{pulse:c=!1}=e,{flip:f=null}=e,{label:d=null}=e,g=null,{style:h=null}=e,v,m,p,y;function b(){if(typeof s>"u")return;const F=ML(s),[B]=Object.keys(F),H=F[B];H.paths||(H.paths=[]),H.d&&H.paths.push({d:H.d}),H.polygons||(H.polygons=[]),H.points&&H.polygons.push({points:H.points}),t(6,g=H)}function _(){let F=1;return typeof a<"u"&&(F=Number(a)),isNaN(F)||F<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),$_):F*$_}function w(){return g?`0 0 ${g.width} ${g.height}`:`0 0 ${v} ${m}`}function S(){return g?Math.max(g.width,g.height)/16:1}function E(){return g?g.width/S()*_():0}function O(){return g?g.height/S()*_():0}function R(){let F="";h!==null&&(F+=h);let B=_();return B===1?F.length===0?void 0:F:(F!==""&&!F.endsWith(";")&&(F+="; "),`${F}font-size: ${B}em`)}function D(F){g=F,t(6,g)}return n.$$set=F=>{"class"in F&&t(0,o=F.class),"data"in F&&t(11,s=F.data),"scale"in F&&t(12,a=F.scale),"spin"in F&&t(1,l=F.spin),"inverse"in F&&t(2,u=F.inverse),"pulse"in F&&t(3,c=F.pulse),"flip"in F&&t(4,f=F.flip),"label"in F&&t(5,d=F.label),"style"in F&&t(13,h=F.style),"$$scope"in F&&t(16,i=F.$$scope)},n.$$.update=()=>{n.$$.dirty&14336&&(b(),t(7,v=E()),t(8,m=O()),t(9,p=R()),t(10,y=w()))},[o,l,u,c,f,d,g,v,m,p,y,s,a,h,r,D,i]}class Ot extends rt{constructor(e){super(),nt(this,e,DL,NL,on,{class:0,data:11,scale:12,spin:1,inverse:2,pulse:3,flip:4,label:5,style:13})}}function e1(n,e,t){const r=n.slice();return r[8]=e[t],r}function t1(n){let e,t;return e=new Ot({props:{data:n[1]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i&2&&(o.data=r[1]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function n1(n){let e,t;return e=new Ot({props:{data:n[8].icon}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i&8&&(o.data=r[8].icon),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function r1(n){let e,t,r=n[8].text+"",i,o,s,a,l,u,c,f=n[8].icon&&n1(n);function d(){return n[6](n[8])}function g(){return n[7](n[8])}return{c(){e=ee("button"),f&&f.c(),t=me(),i=Ue(r),o=me(),T(e,"type","button"),T(e,"class","jse-button jse-action jse-primary svelte-c24vac"),T(e,"title",s=n[8].title),e.disabled=a=n[8].disabled},m(h,v){ue(h,e,v),f&&f.m(e,null),j(e,t),j(e,i),j(e,o),l=!0,u||(c=[Ce(e,"click",d),Ce(e,"mousedown",g)],u=!0)},p(h,v){n=h,n[8].icon?f?(f.p(n,v),v&8&&X(f,1)):(f=n1(n),f.c(),X(f,1),f.m(e,t)):f&&(Ve(),te(f,1,1,()=>{f=null}),qe()),(!l||v&8)&&r!==(r=n[8].text+"")&&_t(i,r),(!l||v&8&&s!==(s=n[8].title))&&T(e,"title",s),(!l||v&8&&a!==(a=n[8].disabled))&&(e.disabled=a)},i(h){l||(X(f),l=!0)},o(h){te(f),l=!1},d(h){h&&le(e),f&&f.d(),u=!1,rn(c)}}}function LL(n){let e,t,r,i,o,s,a,l,u,c,f=n[1]&&t1(n),d=n[3],g=[];for(let v=0;v<d.length;v+=1)g[v]=r1(e1(n,d,v));const h=v=>te(g[v],1,1,()=>{g[v]=null});return{c(){e=ee("div"),t=ee("div"),f&&f.c(),r=me(),i=Ue(n[2]),o=me(),s=ee("div");for(let v=0;v<g.length;v+=1)g[v].c();T(t,"class","jse-text svelte-c24vac"),ze(t,"jse-clickable",n[4]!==null),T(s,"class","jse-actions svelte-c24vac"),T(e,"class",a="jse-message jse-"+n[0]+" svelte-c24vac")},m(v,m){ue(v,e,m),j(e,t),f&&f.m(t,null),j(t,r),j(t,i),j(e,o),j(e,s);for(let p=0;p<g.length;p+=1)g[p].m(s,null);l=!0,u||(c=Ce(t,"click",n[5]),u=!0)},p(v,[m]){if(v[1]?f?(f.p(v,m),m&2&&X(f,1)):(f=t1(v),f.c(),X(f,1),f.m(t,r)):f&&(Ve(),te(f,1,1,()=>{f=null}),qe()),(!l||m&4)&&_t(i,v[2]),m&16&&ze(t,"jse-clickable",v[4]!==null),m&8){d=v[3];let p;for(p=0;p<d.length;p+=1){const y=e1(v,d,p);g[p]?(g[p].p(y,m),X(g[p],1)):(g[p]=r1(y),g[p].c(),X(g[p],1),g[p].m(s,null))}for(Ve(),p=d.length;p<g.length;p+=1)h(p);qe()}(!l||m&1&&a!==(a="jse-message jse-"+v[0]+" svelte-c24vac"))&&T(e,"class",a)},i(v){if(!l){X(f);for(let m=0;m<d.length;m+=1)X(g[m]);l=!0}},o(v){te(f),g=g.filter(Boolean);for(let m=0;m<g.length;m+=1)te(g[m]);l=!1},d(v){v&&le(e),f&&f.d(),xn(g,v),u=!1,c()}}}function jL(n,e,t){let{type:r="success"}=e,{icon:i=void 0}=e,{message:o=void 0}=e,{actions:s=[]}=e,{onClick:a=void 0}=e;function l(){a&&a()}const u=f=>{f.onClick&&f.onClick()},c=f=>{f.onMouseDown&&f.onMouseDown()};return n.$$set=f=>{"type"in f&&t(0,r=f.type),"icon"in f&&t(1,i=f.icon),"message"in f&&t(2,o=f.message),"actions"in f&&t(3,s=f.actions),"onClick"in f&&t(4,a=f.onClick)},[r,i,o,s,a,l,u,c]}class Gs extends rt{constructor(e){super(),nt(this,e,jL,LL,Nt,{type:0,icon:1,message:2,actions:3,onClick:4})}}function Jo(n){return n.map(BL).join("")}function BL(n){return RO.test(n)?"["+n+"]":AO.test(n)?"."+n:"["+JSON.stringify(n)+"]"}function as(n){return n.map(e=>RO.test(e)?`?.[${e}]`:AO.test(e)?`?.${e}`:`?.[${JSON.stringify(e)}]`).join("")}const AO=/^[A-z$_][A-z$_\d]*$/i,RO=/^\d+$/;function FL(){return Od(n=>n,Jo)}function i1(n,e,t){const r=n.slice();return r[6]=e[t],r[8]=t,r}function o1(n){let e,t,r,i;const o=[VL,UL],s=[];function a(l,u){return l[2]||l[0].length===1?0:1}return t=a(n),r=s[t]=o[t](n),{c(){e=ee("div"),r.c(),T(e,"class","jse-validation-errors-overview svelte-1hu2cx3")},m(l,u){ue(l,e,u),s[t].m(e,null),i=!0},p(l,u){let c=t;t=a(l),t===c?s[t].p(l,u):(Ve(),te(s[c],1,1,()=>{s[c]=null}),qe(),r=s[t],r?r.p(l,u):(r=s[t]=o[t](l),r.c()),X(r,1),r.m(e,null))},i(l){i||(X(r),i=!0)},o(l){te(r),i=!1},d(l){l&&le(e),s[t].d()}}}function UL(n){let e,t,r,i,o,s,a,l=n[0].length+"",u,c,f,d,g,h,v;return o=new Ot({props:{data:rl}}),d=new Ot({props:{data:OO}}),{c(){e=ee("table"),t=ee("tbody"),r=ee("tr"),i=ee("td"),Te(o.$$.fragment),s=me(),a=ee("td"),u=Ue(l),c=Ue(` validation errors
              `),f=ee("div"),Te(d.$$.fragment),T(i,"class","jse-validation-error-icon svelte-1hu2cx3"),T(f,"class","jse-validation-errors-expand svelte-1hu2cx3"),T(a,"class","svelte-1hu2cx3"),T(r,"class","jse-validation-error svelte-1hu2cx3"),T(e,"class","svelte-1hu2cx3")},m(m,p){ue(m,e,p),j(e,t),j(t,r),j(r,i),ke(o,i,null),j(r,s),j(r,a),j(a,u),j(a,c),j(a,f),ke(d,f,null),g=!0,h||(v=Ce(r,"click",n[4]),h=!0)},p(m,p){(!g||p&1)&&l!==(l=m[0].length+"")&&_t(u,l)},i(m){g||(X(o.$$.fragment,m),X(d.$$.fragment,m),g=!0)},o(m){te(o.$$.fragment,m),te(d.$$.fragment,m),g=!1},d(m){m&&le(e),Oe(o),Oe(d),h=!1,v()}}}function VL(n){let e,t,r,i=n[0],o=[];for(let a=0;a<i.length;a+=1)o[a]=a1(i1(n,i,a));const s=a=>te(o[a],1,1,()=>{o[a]=null});return{c(){e=ee("table"),t=ee("tbody");for(let a=0;a<o.length;a+=1)o[a].c();T(e,"class","svelte-1hu2cx3")},m(a,l){ue(a,e,l),j(e,t);for(let u=0;u<o.length;u+=1)o[u].m(t,null);r=!0},p(a,l){if(l&11){i=a[0];let u;for(u=0;u<i.length;u+=1){const c=i1(a,i,u);o[u]?(o[u].p(c,l),X(o[u],1)):(o[u]=a1(c),o[u].c(),X(o[u],1),o[u].m(t,null))}for(Ve(),u=i.length;u<o.length;u+=1)s(u);qe()}},i(a){if(!r){for(let l=0;l<i.length;l+=1)X(o[l]);r=!0}},o(a){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)te(o[l]);r=!1},d(a){a&&le(e),xn(o,a)}}}function s1(n){let e,t,r,i,o;return t=new Ot({props:{data:Y8}}),{c(){e=ee("button"),Te(t.$$.fragment),T(e,"type","button"),T(e,"class","jse-validation-errors-collapse svelte-1hu2cx3"),T(e,"title","Collapse validation errors")},m(s,a){ue(s,e,a),ke(t,e,null),r=!0,i||(o=Ce(e,"click",pk(n[3])),i=!0)},p:Ne,i(s){r||(X(t.$$.fragment,s),r=!0)},o(s){te(t.$$.fragment,s),r=!1},d(s){s&&le(e),Oe(t),i=!1,o()}}}function a1(n){let e,t,r,i,o,s=Jo(n[6].path)+"",a,l,u,c=n[6].message+"",f,d,g,h,v,m,p;r=new Ot({props:{data:rl}});let y=n[8]===0&&n[0].length>1&&s1(n);function b(){return n[5](n[6])}return{c(){e=ee("tr"),t=ee("td"),Te(r.$$.fragment),i=me(),o=ee("td"),a=Ue(s),l=me(),u=ee("td"),f=Ue(c),d=me(),g=ee("td"),y&&y.c(),h=me(),T(t,"class","jse-validation-error-icon svelte-1hu2cx3"),T(o,"class","svelte-1hu2cx3"),T(u,"class","svelte-1hu2cx3"),T(g,"class","jse-validation-error-action svelte-1hu2cx3"),T(e,"class","jse-validation-error svelte-1hu2cx3")},m(_,w){ue(_,e,w),j(e,t),ke(r,t,null),j(e,i),j(e,o),j(o,a),j(e,l),j(e,u),j(u,f),j(e,d),j(e,g),y&&y.m(g,null),j(e,h),v=!0,m||(p=Ce(e,"click",b),m=!0)},p(_,w){n=_,(!v||w&1)&&s!==(s=Jo(n[6].path)+"")&&_t(a,s),(!v||w&1)&&c!==(c=n[6].message+"")&&_t(f,c),n[8]===0&&n[0].length>1?y?(y.p(n,w),w&1&&X(y,1)):(y=s1(n),y.c(),X(y,1),y.m(g,null)):y&&(Ve(),te(y,1,1,()=>{y=null}),qe())},i(_){v||(X(r.$$.fragment,_),X(y),v=!0)},o(_){te(r.$$.fragment,_),te(y),v=!1},d(_){_&&le(e),Oe(r),y&&y.d(),m=!1,p()}}}function qL(n){let e=!gn(n[0]),t,r,i=e&&o1(n);return{c(){i&&i.c(),t=xt()},m(o,s){i&&i.m(o,s),ue(o,t,s),r=!0},p(o,[s]){s&1&&(e=!gn(o[0])),e?i?(i.p(o,s),s&1&&X(i,1)):(i=o1(o),i.c(),X(i,1),i.m(t.parentNode,t)):i&&(Ve(),te(i,1,1,()=>{i=null}),qe())},i(o){r||(X(i),r=!0)},o(o){te(i),r=!1},d(o){i&&i.d(o),o&&le(t)}}}function HL(n,e,t){let{validationErrors:r}=e,{selectError:i}=e,o=!0;function s(){t(2,o=!1)}function a(){t(2,o=!0)}const l=u=>{setTimeout(()=>i(u))};return n.$$set=u=>{"validationErrors"in u&&t(0,r=u.validationErrors),"selectError"in u&&t(1,i=u.selectError)},[r,i,o,s,a,l]}class xO extends rt{constructor(e){super(),nt(this,e,HL,qL,Nt,{validationErrors:0,selectError:1})}}const zL={prefix:"fas",iconName:"jsoneditor-expand",icon:[512,512,[],null,"M 0,448 V 512 h 512 v -64 z M 0,0 V 64 H 512 V 0 Z M 256,96 128,224 h 256 z M 256,416 384,288 H 128 Z"]},WL={prefix:"fas",iconName:"jsoneditor-collapse",icon:[512,512,[],null,"m 0,224 v 64 h 512 v -64 z M 256,192 384,64 H 128 Z M 256,320 128,448 h 256 z"]},KL={prefix:"fas",iconName:"jsoneditor-format",icon:[512,512,[],null,"M 0,32 v 64 h 416 v -64 z M 160,160 v 64 h 352 v -64 z M 160,288 v 64 h 288 v -64 z M 0,416 v 64 h 320 v -64 z"]},GL={prefix:"fas",iconName:"jsoneditor-compact",icon:[512,512,[],null,"M 0,32 v 64 h 512 v -64 z M 0,160 v 64 h 512 v -64 z M 0,288 v 64 h 352 v -64 z"]};const JL=n=>({}),l1=n=>({});function u1(n,e,t){const r=n.slice();return r[3]=e[t],r}const YL=n=>({}),c1=n=>({});function QL(n){let e,t,r,i,o,s,a,l,u=n[3].icon&&f1(n),c=n[3].text&&h1(n);return{c(){e=ee("button"),u&&u.c(),t=me(),c&&c.c(),T(e,"type","button"),T(e,"class",r="jse-button "+n[3].className+" svelte-31blda"),T(e,"title",i=n[3].title),e.disabled=o=n[3].disabled||!1},m(f,d){ue(f,e,d),u&&u.m(e,null),j(e,t),c&&c.m(e,null),s=!0,a||(l=Ce(e,"click",function(){si(n[3].onClick)&&n[3].onClick.apply(this,arguments)}),a=!0)},p(f,d){n=f,n[3].icon?u?(u.p(n,d),d&1&&X(u,1)):(u=f1(n),u.c(),X(u,1),u.m(e,t)):u&&(Ve(),te(u,1,1,()=>{u=null}),qe()),n[3].text?c?c.p(n,d):(c=h1(n),c.c(),c.m(e,null)):c&&(c.d(1),c=null),(!s||d&1&&r!==(r="jse-button "+n[3].className+" svelte-31blda"))&&T(e,"class",r),(!s||d&1&&i!==(i=n[3].title))&&T(e,"title",i),(!s||d&1&&o!==(o=n[3].disabled||!1))&&(e.disabled=o)},i(f){s||(X(u),s=!0)},o(f){te(u),s=!1},d(f){f&&le(e),u&&u.d(),c&&c.d(),a=!1,l()}}}function ZL(n){let e;return{c(){e=ee("div"),T(e,"class","jse-space svelte-31blda")},m(t,r){ue(t,e,r)},p:Ne,i:Ne,o:Ne,d(t){t&&le(e)}}}function XL(n){let e;return{c(){e=ee("div"),T(e,"class","jse-separator svelte-31blda")},m(t,r){ue(t,e,r)},p:Ne,i:Ne,o:Ne,d(t){t&&le(e)}}}function f1(n){let e,t;return e=new Ot({props:{data:n[3].icon}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.data=r[3].icon),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function h1(n){let e=n[3].text+"",t;return{c(){t=Ue(e)},m(r,i){ue(r,t,i)},p(r,i){i&1&&e!==(e=r[3].text+"")&&_t(t,e)},d(r){r&&le(t)}}}function d1(n){let e,t,r,i;const o=[XL,ZL,QL],s=[];function a(l,u){return l[3].separator===!0?0:l[3].space===!0?1:2}return e=a(n),t=s[e]=o[e](n),{c(){t.c(),r=xt()},m(l,u){s[e].m(l,u),ue(l,r,u),i=!0},p(l,u){let c=e;e=a(l),e===c?s[e].p(l,u):(Ve(),te(s[c],1,1,()=>{s[c]=null}),qe(),t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),X(t,1),t.m(r.parentNode,r))},i(l){i||(X(t),i=!0)},o(l){te(t),i=!1},d(l){s[e].d(l),l&&le(r)}}}function $L(n){let e,t,r,i;const o=n[2].left,s=Yr(o,n,n[1],c1);let a=n[0],l=[];for(let d=0;d<a.length;d+=1)l[d]=d1(u1(n,a,d));const u=d=>te(l[d],1,1,()=>{l[d]=null}),c=n[2].right,f=Yr(c,n,n[1],l1);return{c(){e=ee("div"),s&&s.c(),t=me();for(let d=0;d<l.length;d+=1)l[d].c();r=me(),f&&f.c(),T(e,"class","jse-menu svelte-31blda")},m(d,g){ue(d,e,g),s&&s.m(e,null),j(e,t);for(let h=0;h<l.length;h+=1)l[h].m(e,null);j(e,r),f&&f.m(e,null),i=!0},p(d,[g]){if(s&&s.p&&(!i||g&2)&&Zr(s,o,d,d[1],i?Qr(o,d[1],g,YL):Xr(d[1]),c1),g&1){a=d[0];let h;for(h=0;h<a.length;h+=1){const v=u1(d,a,h);l[h]?(l[h].p(v,g),X(l[h],1)):(l[h]=d1(v),l[h].c(),X(l[h],1),l[h].m(e,r))}for(Ve(),h=a.length;h<l.length;h+=1)u(h);qe()}f&&f.p&&(!i||g&2)&&Zr(f,c,d,d[1],i?Qr(c,d[1],g,JL):Xr(d[1]),l1)},i(d){if(!i){X(s,d);for(let g=0;g<a.length;g+=1)X(l[g]);X(f,d),i=!0}},o(d){te(s,d),l=l.filter(Boolean);for(let g=0;g<l.length;g+=1)te(l[g]);te(f,d),i=!1},d(d){d&&le(e),s&&s.d(d),xn(l,d),f&&f.d(d)}}}function ej(n,e,t){let{$$slots:r={},$$scope:i}=e,{items:o=[]}=e;return n.$$set=s=>{"items"in s&&t(0,o=s.items),"$$scope"in s&&t(1,i=s.$$scope)},[o,i,r]}class nv extends rt{constructor(e){super(),nt(this,e,ej,$L,Nt,{items:0})}}function tj(n){let e,t;return e=new nv({props:{items:n[0]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,[i]){const o={};i&1&&(o.items=r[0]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function nj(n,e,t){let r,i,{readOnly:o=!1}=e,{onFormat:s}=e,{onCompact:a}=e,{onSort:l}=e,{onTransform:u}=e,{onToggleSearch:c}=e,{onUndo:f}=e,{onRedo:d}=e,{canUndo:g}=e,{canRedo:h}=e,{canFormat:v}=e,{canCompact:m}=e,{canSort:p}=e,{canTransform:y}=e,{onRenderMenu:b=Gt}=e;return n.$$set=_=>{"readOnly"in _&&t(1,o=_.readOnly),"onFormat"in _&&t(2,s=_.onFormat),"onCompact"in _&&t(3,a=_.onCompact),"onSort"in _&&t(4,l=_.onSort),"onTransform"in _&&t(5,u=_.onTransform),"onToggleSearch"in _&&t(6,c=_.onToggleSearch),"onUndo"in _&&t(7,f=_.onUndo),"onRedo"in _&&t(8,d=_.onRedo),"canUndo"in _&&t(9,g=_.canUndo),"canRedo"in _&&t(10,h=_.canRedo),"canFormat"in _&&t(11,v=_.canFormat),"canCompact"in _&&t(12,m=_.canCompact),"canSort"in _&&t(13,p=_.canSort),"canTransform"in _&&t(14,y=_.canTransform),"onRenderMenu"in _&&t(15,b=_.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&32766&&t(16,r=o?[{space:!0}]:[{icon:KL,title:"Format JSON: add proper indentation and new lines (Ctrl+I)",className:"jse-format",onClick:s,disabled:o||!v},{icon:GL,title:"Compact JSON: remove all white spacing and new lines (Ctrl+Shift+I)",className:"jse-compact",onClick:a,disabled:o||!m},{separator:!0},{icon:Z0,title:"Sort",className:"jse-sort",onClick:l,disabled:o||!p},{icon:X0,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:u,disabled:o||!y},{icon:$0,title:"Search (Ctrl+F)",className:"jse-search",onClick:c},{separator:!0},{icon:TO,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:f,disabled:!g},{icon:PO,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:d,disabled:!h},{space:!0}]),n.$$.dirty&98304&&t(0,i=b("text",r)||r)},[i,o,s,a,l,u,c,f,d,g,h,v,m,p,y,b,r]}class rj extends rt{constructor(e){super(),nt(this,e,nj,tj,Nt,{readOnly:1,onFormat:2,onCompact:3,onSort:4,onTransform:5,onToggleSearch:6,onUndo:7,onRedo:8,canUndo:9,canRedo:10,canFormat:11,canCompact:12,canSort:13,canTransform:14,onRenderMenu:15})}}class tn{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),Bi.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let r=[];return this.decompose(e,t,r,0),Bi.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Gl(this),o=new Gl(e);for(let s=t,a=t;;){if(i.next(s),o.next(s),s=0,i.lineBreak!=o.lineBreak||i.done!=o.done||i.value!=o.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new Gl(this,e)}iterRange(e,t=this.length){return new NO(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new MO(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?tn.empty:e.length<=32?new In(e):Bi.from(In.split(e,[]))}}class In extends tn{constructor(e,t=ij(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let o=0;;o++){let s=this.text[o],a=i+s.length;if((t?r:a)>=e)return new oj(i,a,r,s);i=a+1,r++}}decompose(e,t,r,i){let o=e<=0&&t>=this.length?this:new In(p1(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let s=r.pop(),a=Vf(o.text,s.text.slice(),0,o.length);if(a.length<=32)r.push(new In(a,s.length+o.length));else{let l=a.length>>1;r.push(new In(a.slice(0,l)),new In(a.slice(l)))}}else r.push(o)}replace(e,t,r){if(!(r instanceof In))return super.replace(e,t,r);let i=Vf(this.text,Vf(r.text,p1(this.text,0,e)),t),o=this.length+r.length-(t-e);return i.length<=32?new In(i,o):Bi.from(In.split(i,[]),o)}sliceString(e,t=this.length,r=`
`){let i="";for(let o=0,s=0;o<=t&&s<this.text.length;s++){let a=this.text[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&t>o&&(i+=a.slice(Math.max(0,e-o),t-o)),o=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let o of e)r.push(o),i+=o.length+1,r.length==32&&(t.push(new In(r,i)),r=[],i=-1);return i>-1&&t.push(new In(r,i)),t}}class Bi extends tn{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let o=0;;o++){let s=this.children[o],a=i+s.length,l=r+s.lines-1;if((t?l:a)>=e)return s.lineInner(e,t,r,i);i=a+1,r=l+1}}decompose(e,t,r,i){for(let o=0,s=0;s<=t&&o<this.children.length;o++){let a=this.children[o],l=s+a.length;if(e<=l&&t>=s){let u=i&((s<=e?1:0)|(l>=t?2:0));s>=e&&l<=t&&!u?r.push(a):a.decompose(e-s,t-s,r,u)}s=l+1}}replace(e,t,r){if(r.lines<this.lines)for(let i=0,o=0;i<this.children.length;i++){let s=this.children[i],a=o+s.length;if(e>=o&&t<=a){let l=s.replace(e-o,t-o,r),u=this.lines-s.lines+l.lines;if(l.lines<u>>5-1&&l.lines>u>>5+1){let c=this.children.slice();return c[i]=l,new Bi(c,this.length-(t-e)+r.length)}return super.replace(o,a,l)}o=a+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){let i="";for(let o=0,s=0;o<this.children.length&&s<=t;o++){let a=this.children[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&t>s&&(i+=a.sliceString(e-s,t-s,r)),s=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Bi))return 0;let r=0,[i,o,s,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,o+=t){if(i==s||o==a)return r;let l=this.children[i],u=e.children[o];if(l!=u)return r+l.scanIdentical(u,t);r+=l.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let g of e)r+=g.lines;if(r<32){let g=[];for(let h of e)h.flatten(g);return new In(g,t)}let i=Math.max(32,r>>5),o=i<<1,s=i>>1,a=[],l=0,u=-1,c=[];function f(g){let h;if(g.lines>o&&g instanceof Bi)for(let v of g.children)f(v);else g.lines>s&&(l>s||!l)?(d(),a.push(g)):g instanceof In&&l&&(h=c[c.length-1])instanceof In&&g.lines+h.lines<=32?(l+=g.lines,u+=g.length+1,c[c.length-1]=new In(h.text.concat(g.text),h.length+1+g.length)):(l+g.lines>i&&d(),l+=g.lines,u+=g.length+1,c.push(g))}function d(){l!=0&&(a.push(c.length==1?c[0]:Bi.from(c,u)),u=-1,l=c.length=0)}for(let g of e)f(g);return d(),a.length==1?a[0]:new Bi(a,t)}}tn.empty=new In([""],0);function ij(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Vf(n,e,t=0,r=1e9){for(let i=0,o=0,s=!0;o<n.length&&i<=r;o++){let a=n[o],l=i+a.length;l>=t&&(l>r&&(a=a.slice(0,r-i)),i<t&&(a=a.slice(t-i)),s?(e[e.length-1]+=a,s=!1):e.push(a)),i=l+1}return e}function p1(n,e,t){return Vf(n,[""],e,t)}class Gl{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof In?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],o=this.offsets[r],s=o>>1,a=i instanceof In?i.text.length:i.children.length;if(s==(t>0?a:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof In){let l=i.text[s+(t<0?-1:0)];if(this.offsets[r]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[s+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof In?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class NO{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new Gl(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class MO{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(tn.prototype[Symbol.iterator]=function(){return this.iter()},Gl.prototype[Symbol.iterator]=NO.prototype[Symbol.iterator]=MO.prototype[Symbol.iterator]=function(){return this});class oj{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}let _a="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<_a.length;n++)_a[n]+=_a[n-1];function sj(n){for(let e=1;e<_a.length;e+=2)if(_a[e]>n)return _a[e-1]<=n;return!1}function m1(n){return n>=127462&&n<=127487}const g1=8205;function zr(n,e,t=!0,r=!0){return(t?DO:aj)(n,e,r)}function DO(n,e,t){if(e==n.length)return e;e&&LO(n.charCodeAt(e))&&jO(n.charCodeAt(e-1))&&e--;let r=tr(n,e);for(e+=Vr(r);e<n.length;){let i=tr(n,e);if(r==g1||i==g1||t&&sj(i))e+=Vr(i),r=i;else if(m1(i)){let o=0,s=e-2;for(;s>=0&&m1(tr(n,s));)o++,s-=2;if(o%2==0)break;e+=2}else break}return e}function aj(n,e,t){for(;e>0;){let r=DO(n,e-2,t);if(r<e)return r;e--}return 0}function LO(n){return n>=56320&&n<57344}function jO(n){return n>=55296&&n<56320}function tr(n,e){let t=n.charCodeAt(e);if(!jO(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return LO(r)?(t-55296<<10)+(r-56320)+65536:t}function rv(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Vr(n){return n<65536?1:2}const ug=/\r\n?|\n/;var dr=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(dr||(dr={}));class zi{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let o=this.sections[t++],s=this.sections[t++];s<0?(e(r,i,o),i+=o):i+=s,r+=o}}iterChangedRanges(e,t=!1){cg(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new zi(e)}composeDesc(e){return this.empty?e:e.empty?this:BO(this,e)}mapDesc(e,t=!1){return e.empty?this:fg(this,e,t)}mapPos(e,t=-1,r=dr.Simple){let i=0,o=0;for(let s=0;s<this.sections.length;){let a=this.sections[s++],l=this.sections[s++],u=i+a;if(l<0){if(u>e)return o+(e-i);o+=a}else{if(r!=dr.Simple&&u>=e&&(r==dr.TrackDel&&i<e&&u>e||r==dr.TrackBefore&&i<e||r==dr.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!a)return e==i||t<0?o:o+l;o+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return o}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let o=this.sections[r++],s=this.sections[r++],a=i+o;if(s>=0&&i<=t&&a>=e)return i<e&&a>t?"cover":!0;i=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new zi(e)}static create(e){return new zi(e)}}class qn extends zi{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return cg(this,(t,r,i,o,s)=>e=e.replace(i,i+(r-t),s),!1),e}mapDesc(e,t=!1){return fg(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,o=0;i<t.length;i+=2){let s=t[i],a=t[i+1];if(a>=0){t[i]=a,t[i+1]=s;let l=i>>1;for(;r.length<l;)r.push(tn.empty);r.push(s?e.slice(o,o+s):tn.empty)}o+=s}return new qn(t,r)}compose(e){return this.empty?e:e.empty?this:BO(this,e,!0)}map(e,t=!1){return e.empty?this:fg(this,e,t,!0)}iterChanges(e,t=!1){cg(this,e,t)}get desc(){return zi.create(this.sections)}filter(e){let t=[],r=[],i=[],o=new fu(this);e:for(let s=0,a=0;;){let l=s==e.length?1e9:e[s++];for(;a<l||a==l&&o.len==0;){if(o.done)break e;let c=Math.min(o.len,l-a);lr(i,c,-1);let f=o.ins==-1?-1:o.off==0?o.ins:0;lr(t,c,f),f>0&&Lo(r,t,o.text),o.forward(c),a+=c}let u=e[s++];for(;a<u;){if(o.done)break e;let c=Math.min(o.len,u-a);lr(t,c,-1),lr(i,c,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(c),a+=c}}return{changes:new qn(t,r),filtered:zi.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],o=[],s=0,a=null;function l(c=!1){if(!c&&!i.length)return;s<t&&lr(i,t-s,-1);let f=new qn(i,o);a=a?a.compose(f.map(a)):f,i=[],o=[],s=0}function u(c){if(Array.isArray(c))for(let f of c)u(f);else if(c instanceof qn){if(c.length!=t)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${t})`);l(),a=a?a.compose(c.map(a)):c}else{let{from:f,to:d=f,insert:g}=c;if(f>d||f<0||d>t)throw new RangeError(`Invalid change range ${f} to ${d} (in doc of length ${t})`);let h=g?typeof g=="string"?tn.of(g.split(r||ug)):g:tn.empty,v=h.length;if(f==d&&v==0)return;f<s&&l(),f>s&&lr(i,f-s,-1),lr(i,d-f,v),Lo(o,i,h),s=d}}return u(e),l(!a),a}static empty(e){return new qn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let o=e[i];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,a)=>a&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;r.length<i;)r.push(tn.empty);r[i]=tn.of(o.slice(1)),t.push(o[0],r[i].length)}}}return new qn(t,r)}static createSet(e,t){return new qn(e,t)}}function lr(n,e,t,r=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:e==0&&n[i]==0?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function Lo(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(tn.empty);n.push(t)}}function cg(n,e,t){let r=n.inserted;for(let i=0,o=0,s=0;s<n.sections.length;){let a=n.sections[s++],l=n.sections[s++];if(l<0)i+=a,o+=a;else{let u=i,c=o,f=tn.empty;for(;u+=a,c+=l,l&&r&&(f=f.append(r[s-2>>1])),!(t||s==n.sections.length||n.sections[s+1]<0);)a=n.sections[s++],l=n.sections[s++];e(i,u,o,c,f),i=u,o=c}}}function fg(n,e,t,r=!1){let i=[],o=r?[]:null,s=new fu(n),a=new fu(e);for(let l=-1;;)if(s.ins==-1&&a.ins==-1){let u=Math.min(s.len,a.len);lr(i,u,-1),s.forward(u),a.forward(u)}else if(a.ins>=0&&(s.ins<0||l==s.i||s.off==0&&(a.len<s.len||a.len==s.len&&!t))){let u=a.len;for(lr(i,a.ins,-1);u;){let c=Math.min(s.len,u);s.ins>=0&&l<s.i&&s.len<=c&&(lr(i,0,s.ins),o&&Lo(o,i,s.text),l=s.i),s.forward(c),u-=c}a.next()}else if(s.ins>=0){let u=0,c=s.len;for(;c;)if(a.ins==-1){let f=Math.min(c,a.len);u+=f,c-=f,a.forward(f)}else if(a.ins==0&&a.len<c)c-=a.len,a.next();else break;lr(i,u,l<s.i?s.ins:0),o&&l<s.i&&Lo(o,i,s.text),l=s.i,s.forward(s.len-c)}else{if(s.done&&a.done)return o?qn.createSet(i,o):zi.create(i);throw new Error("Mismatched change set lengths")}}function BO(n,e,t=!1){let r=[],i=t?[]:null,o=new fu(n),s=new fu(e);for(let a=!1;;){if(o.done&&s.done)return i?qn.createSet(r,i):zi.create(r);if(o.ins==0)lr(r,o.len,0,a),o.next();else if(s.len==0&&!s.done)lr(r,0,s.ins,a),i&&Lo(i,r,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let l=Math.min(o.len2,s.len),u=r.length;if(o.ins==-1){let c=s.ins==-1?-1:s.off?0:s.ins;lr(r,l,c,a),i&&c&&Lo(i,r,s.text)}else s.ins==-1?(lr(r,o.off?0:o.len,l,a),i&&Lo(i,r,o.textBit(l))):(lr(r,o.off?0:o.len,s.off?0:s.ins,a),i&&!s.off&&Lo(i,r,s.text));a=(o.ins>l||s.ins>=0&&s.len>l)&&(a||r.length>u),o.forward2(l),s.forward(l)}}}}class fu{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?tn.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?tn.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class bs{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new bs(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Le.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Le.range(this.anchor,r)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Le.range(e.anchor,e.head)}static create(e,t,r){return new bs(e,t,r)}}class Le{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Le.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Le([this.main],0)}addRange(e,t=!0){return Le.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,Le.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Le(e.ranges.map(t=>bs.fromJSON(t)),e.main)}static single(e,t=e){return new Le([Le.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let o=e[i];if(o.empty?o.from<=r:o.from<r)return Le.normalized(e.slice(),t);r=o.to}return new Le(e,t)}static cursor(e,t=0,r,i){return bs.create(e,e,(t==0?0:t<0?4:8)|(r==null?3:Math.min(2,r))|(i!=null?i:33554431)<<5)}static range(e,t,r){let i=(r!=null?r:33554431)<<5;return t<e?bs.create(t,e,16|i|8):bs.create(e,t,i|(t>e?4:0))}static normalized(e,t=0){let r=e[t];e.sort((i,o)=>i.from-o.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let o=e[i],s=e[i-1];if(o.empty?o.from<=s.to:o.from<s.to){let a=s.from,l=Math.max(o.to,s.to);i<=t&&t--,e.splice(--i,2,o.anchor>o.head?Le.range(l,a):Le.range(a,l))}}return new Le(e,t)}}function FO(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let iv=0;class at{constructor(e,t,r,i,o){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=iv++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}static define(e={}){return new at(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:ov),!!e.static,e.enables)}of(e){return new qf([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new qf(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new qf(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function ov(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class qf{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=iv++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,o=this.id,s=e[o]>>1,a=this.type==2,l=!1,u=!1,c=[];for(let f of this.dependencies)f=="doc"?l=!0:f=="selection"?u=!0:(((t=e[f.id])!==null&&t!==void 0?t:1)&1)==0&&c.push(e[f.id]);return{create(f){return f.values[s]=r(f),1},update(f,d){if(l&&d.docChanged||u&&(d.docChanged||d.selection)||hg(f,c)){let g=r(f);if(a?!v1(g,f.values[s],i):!i(g,f.values[s]))return f.values[s]=g,1}return 0},reconfigure:(f,d)=>{let g=r(f),h=d.config.address[o];if(h!=null){let v=_h(d,h);if(this.dependencies.every(m=>m instanceof at?d.facet(m)===f.facet(m):m instanceof Wn?d.field(m,!1)==f.field(m,!1):!0)||(a?v1(g,v,i):i(g,v)))return f.values[s]=v,0}return f.values[s]=g,1}}}}function v1(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function hg(n,e){let t=!1;for(let r of e)Jl(n,r)&1&&(t=!0);return t}function lj(n,e,t){let r=t.map(l=>n[l.id]),i=t.map(l=>l.type),o=r.filter(l=>!(l&1)),s=n[e.id]>>1;function a(l){let u=[];for(let c=0;c<r.length;c++){let f=_h(l,r[c]);if(i[c]==2)for(let d of f)u.push(d);else u.push(f)}return e.combine(u)}return{create(l){for(let u of r)Jl(l,u);return l.values[s]=a(l),1},update(l,u){if(!hg(l,o))return 0;let c=a(l);return e.compare(c,l.values[s])?0:(l.values[s]=c,1)},reconfigure(l,u){let c=hg(l,r),f=u.config.facets[e.id],d=u.facet(e);if(f&&!c&&ov(t,f))return l.values[s]=d,0;let g=a(l);return e.compare(g,d)?(l.values[s]=d,0):(l.values[s]=g,1)}}}const y1=at.define({static:!0});class Wn{constructor(e,t,r,i,o){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=o,this.provides=void 0}static define(e){let t=new Wn(iv++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(y1).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let o=r.values[t],s=this.updateF(o,i);return this.compareF(o,s)?0:(r.values[t]=s,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}init(e){return[this,y1.of({field:this,create:e})]}get extension(){return this}}const gs={lowest:4,low:3,default:2,high:1,highest:0};function pl(n){return e=>new UO(e,n)}const il={highest:pl(gs.highest),high:pl(gs.high),default:pl(gs.default),low:pl(gs.low),lowest:pl(gs.lowest)};class UO{constructor(e,t){this.inner=e,this.prec=t}}class jo{of(e){return new dg(this,e)}reconfigure(e){return jo.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class dg{constructor(e,t){this.compartment=e,this.inner=t}}class yh{constructor(e,t,r,i,o,s){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],o=Object.create(null),s=new Map;for(let d of uj(e,t,s))d instanceof Wn?i.push(d):(o[d.facet.id]||(o[d.facet.id]=[])).push(d);let a=Object.create(null),l=[],u=[];for(let d of i)a[d.id]=u.length<<1,u.push(g=>d.slot(g));let c=r==null?void 0:r.config.facets;for(let d in o){let g=o[d],h=g[0].facet,v=c&&c[d]||[];if(g.every(m=>m.type==0))if(a[h.id]=l.length<<1|1,ov(v,g))l.push(r.facet(h));else{let m=h.combine(g.map(p=>p.value));l.push(r&&h.compare(m,r.facet(h))?r.facet(h):m)}else{for(let m of g)m.type==0?(a[m.id]=l.length<<1|1,l.push(m.value)):(a[m.id]=u.length<<1,u.push(p=>m.dynamicSlot(p)));a[h.id]=u.length<<1,u.push(m=>lj(m,h,g))}}let f=u.map(d=>d(a));return new yh(e,s,f,a,l,o)}}function uj(n,e,t){let r=[[],[],[],[],[]],i=new Map;function o(s,a){let l=i.get(s);if(l!=null){if(l<=a)return;let u=r[l].indexOf(s);u>-1&&r[l].splice(u,1),s instanceof dg&&t.delete(s.compartment)}if(i.set(s,a),Array.isArray(s))for(let u of s)o(u,a);else if(s instanceof dg){if(t.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(s.compartment)||s.inner;t.set(s.compartment,u),o(u,a)}else if(s instanceof UO)o(s.inner,s.prec);else if(s instanceof Wn)r[a].push(s),s.provides&&o(s.provides,a);else if(s instanceof qf)r[a].push(s),s.facet.extensions&&o(s.facet.extensions,gs.default);else{let u=s.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(u,a)}}return o(n,gs.default),r.reduce((s,a)=>s.concat(a))}function Jl(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function _h(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const VO=at.define(),qO=at.define({combine:n=>n.some(e=>e),static:!0}),HO=at.define({combine:n=>n.length?n[0]:void 0,static:!0}),zO=at.define(),WO=at.define(),KO=at.define(),GO=at.define({combine:n=>n.length?n[0]:!1});class Js{constructor(e,t){this.type=e,this.value=t}static define(){return new cj}}class cj{of(e){return new Js(this,e)}}class fj{constructor(e){this.map=e}of(e){return new Pt(this,e)}}class Pt{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Pt(this.type,t)}is(e){return this.type==e}static define(e={}){return new fj(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let o=i.map(t);o&&r.push(o)}return r}}Pt.reconfigure=Pt.define();Pt.appendConfig=Pt.define();class zn{constructor(e,t,r,i,o,s){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,r&&FO(r,t.newLength),o.some(a=>a.type==zn.time)||(this.annotations=o.concat(zn.time.of(Date.now())))}static create(e,t,r,i,o,s){return new zn(e,t,r,i,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(zn.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}zn.time=Js.define();zn.userEvent=Js.define();zn.addToHistory=Js.define();zn.remote=Js.define();function hj(n,e){let t=[];for(let r=0,i=0;;){let o,s;if(r<n.length&&(i==e.length||e[i]>=n[r]))o=n[r++],s=n[r++];else if(i<e.length)o=e[i++],s=e[i++];else return t;!t.length||t[t.length-1]<o?t.push(o,s):t[t.length-1]<s&&(t[t.length-1]=s)}}function JO(n,e,t){var r;let i,o,s;return t?(i=e.changes,o=qn.empty(e.changes.length),s=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),s=n.changes.compose(i)),{changes:s,selection:e.selection?e.selection.map(o):(r=n.selection)===null||r===void 0?void 0:r.map(i),effects:Pt.mapEffects(n.effects,i).concat(Pt.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function pg(n,e,t){let r=e.selection,i=ba(e.annotations);return e.userEvent&&(i=i.concat(zn.userEvent.of(e.userEvent))),{changes:e.changes instanceof qn?e.changes:qn.of(e.changes||[],t,n.facet(HO)),selection:r&&(r instanceof Le?r:Le.single(r.anchor,r.head)),effects:ba(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function YO(n,e,t){let r=pg(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let s=!!e[o].sequential;r=JO(r,pg(n,e[o],s?r.changes.newLength:n.doc.length),s)}let i=zn.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return pj(t?dj(i):i)}function dj(n){let e=n.startState,t=!0;for(let i of e.facet(zO)){let o=i(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:hj(t,o))}if(t!==!0){let i,o;if(t===!1)o=n.changes.invertedDesc,i=qn.empty(e.doc.length);else{let s=n.changes.filter(t);i=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}n=zn.create(e,i,n.selection&&n.selection.map(o),Pt.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let r=e.facet(WO);for(let i=r.length-1;i>=0;i--){let o=r[i](n);o instanceof zn?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof zn?n=o[0]:n=YO(e,ba(o),!1)}return n}function pj(n){let e=n.startState,t=e.facet(KO),r=n;for(let i=t.length-1;i>=0;i--){let o=t[i](n);o&&Object.keys(o).length&&(r=JO(n,pg(e,o,n.changes.newLength),!0))}return r==n?n:zn.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const mj=[];function ba(n){return n==null?mj:Array.isArray(n)?n:[n]}var mr=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(mr||(mr={}));const gj=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let mg;try{mg=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function vj(n){if(mg)return mg.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||gj.test(t)))return!0}return!1}function yj(n){return e=>{if(!/\S/.test(e))return mr.Space;if(vj(e))return mr.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return mr.Word;return mr.Other}}class jt{constructor(e,t,r,i,o,s){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Jl(this,a<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return Jl(this,r),_h(this,r)}update(...e){return YO(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:i}=t;for(let s of e.effects)s.is(jo.reconfigure)?(t&&(i=new Map,t.compartments.forEach((a,l)=>i.set(l,a)),t=null),i.set(s.value.compartment,s.value.extension)):s.is(Pt.reconfigure)?(t=null,r=s.value):s.is(Pt.appendConfig)&&(t=null,r=ba(r).concat(s.value));let o;t?o=e.startState.values.slice():(t=yh.resolve(r,i,this),o=new jt(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new jt(t,e.newDoc,e.newSelection,o,(s,a)=>a.update(s,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Le.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),o=[r.range],s=ba(r.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),u=this.changes(l.changes),c=u.map(i);for(let d=0;d<a;d++)o[d]=o[d].map(c);let f=i.mapDesc(u,!0);o.push(l.range.map(f)),i=i.compose(c),s=Pt.mapEffects(s,c).concat(Pt.mapEffects(ba(l.effects),f))}return{changes:i,selection:Le.create(o,t.mainIndex),effects:s}}changes(e=[]){return e instanceof qn?e:qn.of(e,this.doc.length,this.facet(jt.lineSeparator))}toText(e){return tn.of(e.split(this.facet(jt.lineSeparator)||ug))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Jl(this,t),_h(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Wn&&this.config.address[i.id]!=null&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let o in r)if(Object.prototype.hasOwnProperty.call(e,o)){let s=r[o],a=e[o];i.push(s.init(l=>s.spec.fromJSON(a,l)))}}return jt.create({doc:e.doc,selection:Le.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=yh.resolve(e.extensions||[],new Map),r=e.doc instanceof tn?e.doc:tn.of((e.doc||"").split(t.staticFacet(jt.lineSeparator)||ug)),i=e.selection?e.selection instanceof Le?e.selection:Le.single(e.selection.anchor,e.selection.head):Le.single(0);return FO(i,r.length),t.staticFacet(qO)||(i=i.asSingle()),new jt(t,r,i,t.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(jt.tabSize)}get lineBreak(){return this.facet(jt.lineSeparator)||`
`}get readOnly(){return this.facet(GO)}phrase(e,...t){for(let r of this.facet(jt.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let o=+(i||1);return!o||o>t.length?r:t[o-1]})),e}languageDataAt(e,t,r=-1){let i=[];for(let o of this.facet(VO))for(let s of o(this,t,r))Object.prototype.hasOwnProperty.call(s,e)&&i.push(s[e]);return i}charCategorizer(e){return yj(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),o=this.charCategorizer(e),s=e-r,a=e-r;for(;s>0;){let l=zr(t,s,!1);if(o(t.slice(l,s))!=mr.Word)break;s=l}for(;a<i;){let l=zr(t,a);if(o(t.slice(a,l))!=mr.Word)break;a=l}return s==a?null:Le.range(s+r,a+r)}}jt.allowMultipleSelections=qO;jt.tabSize=at.define({combine:n=>n.length?n[0]:4});jt.lineSeparator=HO;jt.readOnly=GO;jt.phrases=at.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(i=>n[i]==e[i])}});jt.languageData=VO;jt.changeFilter=zO;jt.transactionFilter=WO;jt.transactionExtender=KO;jo.reconfigure=Pt.define();function Qi(n,e,t={}){let r={};for(let i of n)for(let o of Object.keys(i)){let s=i[o],a=r[o];if(a===void 0)r[o]=s;else if(!(a===s||s===void 0))if(Object.hasOwnProperty.call(t,o))r[o]=t[o](a,s);else throw new Error("Config merge conflict for field "+o)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Ls{eq(e){return this==e}range(e,t=e){return hu.create(e,t,this)}}Ls.prototype.startSide=Ls.prototype.endSide=0;Ls.prototype.point=!1;Ls.prototype.mapMode=dr.TrackDel;class hu{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new hu(e,t,r)}}function gg(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class sv{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let o=r?this.to:this.from;for(let s=i,a=o.length;;){if(s==a)return s;let l=s+a>>1,u=o[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-t;if(l==s)return u>=0?s:a;u>=0?a=l:s=l+1}}between(e,t,r,i){for(let o=this.findIndex(t,-1e9,!0),s=this.findIndex(r,1e9,!1,o);o<s;o++)if(i(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let r=[],i=[],o=[],s=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],c=this.from[l]+e,f=this.to[l]+e,d,g;if(c==f){let h=t.mapPos(c,u.startSide,u.mapMode);if(h==null||(d=g=h,u.startSide!=u.endSide&&(g=t.mapPos(c,u.endSide),g<d)))continue}else if(d=t.mapPos(c,u.startSide),g=t.mapPos(f,u.endSide),d>g||d==g&&u.startSide>0&&u.endSide<=0)continue;(g-d||u.endSide-u.startSide)<0||(s<0&&(s=d),u.point&&(a=Math.max(a,g-d)),r.push(u),i.push(d-s),o.push(g-s))}return{mapped:r.length?new sv(i,o,r,a):null,pos:s}}}class Qt{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new Qt(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:o=this.length}=e,s=e.filter;if(t.length==0&&!s)return this;if(r&&(t=t.slice().sort(gg)),this.isEmpty)return t.length?Qt.of(t):this;let a=new QO(this,null,-1).goto(0),l=0,u=[],c=new Yo;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let f=t[l++];c.addInner(f.from,f.to,f.value)||u.push(f)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!s||i>this.chunkEnd(a.chunkIndex)||o<this.chunkPos[a.chunkIndex])&&c.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!s||i>a.to||o<a.from||s(a.from,a.to,a.value))&&(c.addInner(a.from,a.to,a.value)||u.push(hu.create(a.from,a.to,a.value))),a.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?Qt.empty:this.nextLayer.update({add:u,filter:s,filterFrom:i,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],l=this.chunk[s],u=e.touchesRange(a,a+l.length);if(u===!1)i=Math.max(i,l.maxPoint),t.push(l),r.push(e.mapPos(a));else if(u===!0){let{mapped:c,pos:f}=l.map(a,e);c&&(i=Math.max(i,c.maxPoint),t.push(c),r.push(f))}}let o=this.nextLayer.map(e);return t.length==0?o:new Qt(r,t,o||Qt.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],s=this.chunk[i];if(t>=o&&e<=o+s.length&&s.between(o,e-o,t-o,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return du.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return du.from(e).goto(t)}static compare(e,t,r,i,o=-1){let s=e.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),a=t.filter(f=>f.maxPoint>0||!f.isEmpty&&f.maxPoint>=o),l=_1(s,a,r),u=new ml(s,l,o),c=new ml(a,l,o);r.iterGaps((f,d,g)=>b1(u,f,c,d,g,i)),r.empty&&r.length==0&&b1(u,0,c,0,0,i)}static eq(e,t,r=0,i){i==null&&(i=1e9);let o=e.filter(c=>!c.isEmpty&&t.indexOf(c)<0),s=t.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let a=_1(o,s),l=new ml(o,a,0).goto(r),u=new ml(s,a,0).goto(r);for(;;){if(l.to!=u.to||!vg(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,t,r,i,o=-1){let s=new ml(e,null,o).goto(t),a=t,l=s.openStart;for(;;){let u=Math.min(s.to,r);if(s.point?(i.point(a,u,s.point,s.activeForPoint(s.to),l,s.pointRank),l=s.openEnd(u)+(s.to>u?1:0)):u>a&&(i.span(a,u,s.active,l),l=s.openEnd(u)),s.to>r)break;a=s.to,s.next()}return l}static of(e,t=!1){let r=new Yo;for(let i of e instanceof hu?[e]:t?_j(e):e)r.add(i.from,i.to,i.value);return r.finish()}}Qt.empty=new Qt([],[],null,-1);function _j(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(gg(e,r)>0)return n.slice().sort(gg);e=r}return n}Qt.empty.nextLayer=Qt.empty;class Yo{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new sv(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new Yo)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Qt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Qt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function _1(n,e,t){let r=new Map;for(let o of n)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&r.set(o.chunk[s],o.chunkPos[s]);let i=new Set;for(let o of e)for(let s=0;s<o.chunk.length;s++){let a=r.get(o.chunk[s]);a!=null&&(t?t.mapPos(a):a)==o.chunkPos[s]&&!(t!=null&&t.touchesRange(a,a+o.chunk[s].length))&&i.add(o.chunk[s])}return i}class QO{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class du{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let o=0;o<e.length;o++)for(let s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=r&&i.push(new QO(s,t,r,o));return i.length==1?i[0]:new du(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)Ep(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)Ep(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Ep(this.heap,0)}}}function Ep(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class ml{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=du.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){bc(this.active,e),bc(this.activeTo,e),bc(this.activeRank,e),this.minActive=w1(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:o}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=o;)t++;wc(this.active,t,r),wc(this.activeTo,t,i),wc(this.activeRank,t,o),e&&wc(e,t,this.cursor.from),this.minActive=w1(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null,i=0;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>e){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),r&&bc(r,o)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.from<e&&this.cursor.to>e&&i++,this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.from<e&&(i=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){let o=0;for(;o<r.length&&r[o]<e;)o++;this.openStart=o+i}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function b1(n,e,t,r,i,o){n.goto(e),t.goto(r);let s=r+i,a=r,l=r-e;for(;;){let u=n.to+l-t.to||n.endSide-t.endSide,c=u<0?n.to+l:t.to,f=Math.min(c,s);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&vg(n.activeForPoint(n.to+l),t.activeForPoint(t.to))||o.comparePoint(a,f,n.point,t.point):f>a&&!vg(n.active,t.active)&&o.compareRange(a,f,n.active,t.active),c>s)break;a=c,u<=0&&n.next(),u>=0&&t.next()}}function vg(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function bc(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function wc(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function w1(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function Fu(n,e,t=n.length){let r=0;for(let i=0;i<t;)n.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=zr(n,i));return r}function yg(n,e,t,r){for(let i=0,o=0;;){if(o>=e)return i;if(i==n.length)break;o+=n.charCodeAt(i)==9?t-o%t:1,i=zr(n,i)}return r===!0?-1:n.length}const _g="\u037C",S1=typeof Symbol>"u"?"__"+_g:Symbol.for(_g),bg=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),E1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Qo{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,a,l,u){let c=[],f=/^@(\w+)\b/.exec(s[0]),d=f&&f[1]=="keyframes";if(f&&a==null)return l.push(s[0]+";");for(let g in a){let h=a[g];if(/&/.test(g))o(g.split(/,\s*/).map(v=>s.map(m=>v.replace(/&/,m))).reduce((v,m)=>v.concat(m)),h,l);else if(h&&typeof h=="object"){if(!f)throw new RangeError("The value of a property ("+g+") should be a primitive value.");o(i(g),h,c,d)}else h!=null&&c.push(g.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+h+";")}(c.length||d)&&l.push((r&&!f&&!u?s.map(r):s).join(", ")+" {"+c.join(" ")+"}")}for(let s in e)o(i(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=E1[S1]||1;return E1[S1]=e+1,_g+e.toString(36)}static mount(e,t){(e[bg]||new bj(e)).mount(Array.isArray(t)?t:[t])}}let Sc=null;class bj{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(Sc)return e.adoptedStyleSheets=[Sc.sheet].concat(e.adoptedStyleSheets),e[bg]=Sc;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),Sc=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[bg]=this}mount(e){let t=this.sheet,r=0,i=0;for(let o=0;o<e.length;o++){let s=e[o],a=this.modules.indexOf(s);if(a<i&&a>-1&&(this.modules.splice(a,1),i--,a=-1),a==-1){if(this.modules.splice(i++,0,s),t)for(let l=0;l<s.rules.length;l++)t.insertRule(s.rules[l],r++)}else{for(;i<a;)r+=this.modules[i++].rules.length;r+=s.rules.length,i++}}if(!t){let o="";for(let s=0;s<this.modules.length;s++)o+=this.modules[s].getRules()+`
`;this.styleTag.textContent=o}}}var Zo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Na={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},C1=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent);typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent);var wj=typeof navigator<"u"&&/Mac/.test(navigator.platform),Sj=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Ej=wj||C1&&+C1[1]<57;for(var nr=0;nr<10;nr++)Zo[48+nr]=Zo[96+nr]=String(nr);for(var nr=1;nr<=24;nr++)Zo[nr+111]="F"+nr;for(var nr=65;nr<=90;nr++)Zo[nr]=String.fromCharCode(nr+32),Na[nr]=String.fromCharCode(nr);for(var Cp in Zo)Na.hasOwnProperty(Cp)||(Na[Cp]=Zo[Cp]);function Cj(n){var e=Ej&&(n.ctrlKey||n.altKey||n.metaKey)||Sj&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Na:Zo)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function bh(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Ma(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function kj(){let n=document.activeElement;for(;n&&n.shadowRoot;)n=n.shadowRoot.activeElement;return n}function Hf(n,e){if(!e.anchorNode)return!1;try{return Ma(n,e.anchorNode)}catch{return!1}}function pu(n){return n.nodeType==3?Da(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function wh(n,e,t,r){return t?k1(n,e,t,r,-1)||k1(n,e,t,r,1):!1}function Sh(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function k1(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:mu(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=Sh(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?mu(n):0}else return!1}}function mu(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}const ZO={left:0,right:0,top:0,bottom:0};function Rd(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function Oj(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function Tj(n,e,t,r,i,o,s,a){let l=n.ownerDocument,u=l.defaultView;for(let c=n;c;)if(c.nodeType==1){let f,d=c==l.body;if(d)f=Oj(u);else{if(c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.parentNode;continue}let v=c.getBoundingClientRect();f={left:v.left,right:v.left+c.clientWidth,top:v.top,bottom:v.top+c.clientHeight}}let g=0,h=0;if(i=="nearest")e.top<f.top?(h=-(f.top-e.top+s),t>0&&e.bottom>f.bottom+h&&(h=e.bottom-f.bottom+h+s)):e.bottom>f.bottom&&(h=e.bottom-f.bottom+s,t<0&&e.top-h<f.top&&(h=-(f.top+h-e.top+s)));else{let v=e.bottom-e.top,m=f.bottom-f.top;h=(i=="center"&&v<=m?e.top+v/2-m/2:i=="start"||i=="center"&&t<0?e.top-s:e.bottom-m+s)-f.top}if(r=="nearest"?e.left<f.left?(g=-(f.left-e.left+o),t>0&&e.right>f.right+g&&(g=e.right-f.right+g+o)):e.right>f.right&&(g=e.right-f.right+o,t<0&&e.left<f.left+g&&(g=-(f.left+g-e.left+o))):g=(r=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:r=="start"==a?e.left-o:e.right-(f.right-f.left)+o)-f.left,g||h)if(d)u.scrollBy(g,h);else{if(h){let v=c.scrollTop;c.scrollTop+=h,h=c.scrollTop-v}if(g){let v=c.scrollLeft;c.scrollLeft+=g,g=c.scrollLeft-v}e={left:e.left-g,top:e.top-h,right:e.right-g,bottom:e.bottom-h}}if(d)break;c=c.assignedSlot||c.parentNode,r=i="nearest"}else if(c.nodeType==11)c=c.host;else break}class Pj{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let ra=null;function XO(n){if(n.setActive)return n.setActive();if(ra)return n.focus(ra);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(ra==null?{get preventScroll(){return ra={preventScroll:!0},!0}}:void 0),!ra){ra=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],o=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=o&&(r.scrollLeft=o)}}}let O1;function Da(n,e,t=e){let r=O1||(O1=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function Yl(n,e,t){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,n.dispatchEvent(i);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,n.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function Ij(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function $O(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function Aj(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(;;)if(r){if(t.nodeType!=1)return!1;let i=t.childNodes[r-1];i.contentEditable=="false"?r--:(t=i,r=mu(t))}else{if(t==n)return!0;r=Sh(t),t=t.parentNode}}class or{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new or(e.parentNode,Sh(e),t)}static after(e,t){return new or(e.parentNode,Sh(e)+1,t)}}const av=[];class vn{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,r=null,i;for(let o of this.children){if(o.dirty){if(!o.dom&&(i=r?r.nextSibling:t.firstChild)){let s=vn.get(i);(!s||!s.parent&&s.constructor==o.constructor)&&o.reuseDOM(i)}o.sync(e),o.dirty=0}if(i=r?r.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&i!=o.dom&&(e.written=!0),o.dom.parentNode==t)for(;i&&i!=o.dom;)i=T1(i);else t.insertBefore(o.dom,i);r=o.dom}for(i=r?r.nextSibling:t.firstChild,i&&e&&e.node==t&&(e.written=!0);i;)i=T1(i)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=mu(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;i==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?i=-1:i=1),e=o}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!vn.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,o=0;;i++){let s=this.children[i];if(s.dom==r)return o;o+=s.length+s.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,o=-1,s=-1,a=-1;for(let l=0,u=r,c=r;l<this.children.length;l++){let f=this.children[l],d=u+f.length;if(u<e&&d>t)return f.domBoundsAround(e,t,u);if(d>=e&&i==-1&&(i=l,o=u),u>t&&f.dom.parentNode==this.dom){s=l,a=c;break}c=d,u=d+f.breakAfter}return{from:o,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=av){this.markDirty();for(let i=e;i<t;i++){let o=this.children[i];o.parent==this&&o.destroy()}this.children.splice(e,t-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new eT(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,r,i,o,s){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}vn.prototype.breakAfter=0;function T1(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class eT{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function tT(n,e,t,r,i,o,s,a,l){let{children:u}=n,c=u.length?u[e]:null,f=o.length?o[o.length-1]:null,d=f?f.breakAfter:s;if(!(e==r&&c&&!s&&!d&&o.length<2&&c.merge(t,i,o.length?f:null,t==0,a,l))){if(r<u.length){let g=u[r];g&&i<g.length?(e==r&&(g=g.split(i),i=0),!d&&f&&g.merge(0,i,f,!0,0,l)?o[o.length-1]=g:(i&&g.merge(0,i,null,!1,0,l),o.push(g))):g!=null&&g.breakAfter&&(f?f.breakAfter=1:s=1),r++}for(c&&(c.breakAfter=s,t>0&&(!s&&o.length&&c.merge(t,c.length,o[0],!1,a,0)?c.breakAfter=o.shift().breakAfter:(t<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(t,c.length,null,!1,a,0),e++));e<r&&o.length;)if(u[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:a;else if(u[e].become(o[0]))e++,o.shift(),a=o.length?0:l;else break;!o.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,a,l)&&e--,(e<r||o.length)&&n.replaceChildren(e,r,o)}}function nT(n,e,t,r,i,o){let s=n.childCursor(),{i:a,off:l}=s.findPos(t,1),{i:u,off:c}=s.findPos(e,-1),f=e-t;for(let d of r)f+=d.length;n.length+=f,tT(n,u,c,a,l,r,0,i,o)}let Hr=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},wg=typeof document<"u"?document:{documentElement:{style:{}}};const Sg=/Edge\/(\d+)/.exec(Hr.userAgent),rT=/MSIE \d/.test(Hr.userAgent),Eg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Hr.userAgent),xd=!!(rT||Eg||Sg),P1=!xd&&/gecko\/(\d+)/i.test(Hr.userAgent),kp=!xd&&/Chrome\/(\d+)/.exec(Hr.userAgent),I1="webkitFontSmoothing"in wg.documentElement.style,iT=!xd&&/Apple Computer/.test(Hr.vendor),A1=iT&&(/Mobile\/\w+/.test(Hr.userAgent)||Hr.maxTouchPoints>2);var st={mac:A1||/Mac/.test(Hr.platform),windows:/Win/.test(Hr.platform),linux:/Linux|X11/.test(Hr.platform),ie:xd,ie_version:rT?wg.documentMode||6:Eg?+Eg[1]:Sg?+Sg[1]:0,gecko:P1,gecko_version:P1?+(/Firefox\/(\d+)/.exec(Hr.userAgent)||[0,0])[1]:0,chrome:!!kp,chrome_version:kp?+kp[1]:0,ios:A1,android:/Android\b/.test(Hr.userAgent),webkit:I1,safari:iT,webkit_version:I1?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:wg.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const Rj=256;class Xo extends vn{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return r&&(!(r instanceof Xo)||this.length-(t-e)+r.length>Rj)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Xo(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new or(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Cg(this.dom,e,t)}}class Gi extends vn{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if($O(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,r,i,o,s){return r&&(!(r instanceof Gi&&r.mark.eq(this.mark))||e&&o<=0||t<this.length&&s<=0)?!1:(nT(this,e,t,r?r.children:[],o-1,s-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,o=0;for(let a of this.children){let l=r+a.length;l>e&&t.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=o),r=l,o++}let s=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Gi(this.mark,t,s)}domAtPos(e){return aT(this.dom,this.children,e)}coordsAt(e,t){return uT(this,e,t)}}function Cg(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,o=e,s=0;e==0&&t<0||e==r&&t>=0?st.chrome||st.gecko||(e?(i--,s=1):o<r&&(o++,s=-1)):t<0?i--:o<r&&o++;let a=Da(n,i,o).getClientRects();if(!a.length)return ZO;let l=a[(s?s<0:t>=0)?0:a.length-1];return st.safari&&!s&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),s?Rd(l,s<0):l||null}class Bo extends vn{constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}static create(e,t,r){return new(e.customView||Bo)(e,t,r)}split(e){let t=Bo.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,r,i,o,s){return r&&(!(r instanceof Bo)||!this.widget.compare(r.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof Bo&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return tn.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):tn.empty}domAtPos(e){return e==0?or.before(this.dom):or.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.dom.getClientRects(),i=null;if(!r.length)return ZO;for(let o=e>0?r.length-1:0;i=r[o],!(e>0?o==0:o==r.length-1||i.top<i.bottom);o+=e>0?-1:1);return e==0&&t>0||e==this.length&&t<=0?i:Rd(i,e==0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class oT extends Bo{domAtPos(e){let{topView:t,text:r}=this.widget;return t?kg(e,0,t,r,(i,o)=>i.domAtPos(o),i=>new or(r,Math.min(i,r.nodeValue.length))):new or(r,Math.min(e,r.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:r,text:i}=this.widget;return r?sT(e,t,r,i):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:r,text:i}=this.widget;return r?kg(e,t,r,i,(o,s,a)=>o.coordsAt(s,a),(o,s)=>Cg(i,o,s)):Cg(i,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}}function kg(n,e,t,r,i,o){if(t instanceof Gi){for(let s of t.children){let a=Ma(s.dom,r),l=a?r.nodeValue.length:s.length;if(n<l||n==l&&s.getSide()<=0)return a?kg(n,e,s,r,i,o):i(s,n,e);n-=l}return i(t,t.length,-1)}else return t.dom==r?o(n,e):i(t,n,e)}function sT(n,e,t,r){if(t instanceof Gi)for(let i of t.children){let o=0,s=Ma(i.dom,r);if(Ma(i.dom,n))return o+(s?sT(n,e,i,r):i.localPosFromDOM(n,e));o+=s?r.nodeValue.length:i.length}else if(t.dom==r)return Math.min(e,r.nodeValue.length);return t.localPosFromDOM(n,e)}class La extends vn{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof La&&e.side==this.side}split(){return new La(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return or.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),r=xj(this,this.side>0?-1:1);return r&&r.top<t.bottom&&r.bottom>t.top?{left:t.left,right:t.right,top:r.top,bottom:r.bottom}:t}get overrideDOMText(){return tn.empty}}Xo.prototype.children=Bo.prototype.children=La.prototype.children=av;function xj(n,e){let t=n.parent,r=t?t.children.indexOf(n):-1;for(;t&&r>=0;)if(e<0?r>0:r<t.children.length){let i=t.children[r+e];if(i instanceof Xo){let o=i.coordsAt(e<0?i.length:0,e);if(o)return o}r+=e}else if(t instanceof Gi&&t.parent)r=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let i=t.dom.lastChild;if(i&&i.nodeName=="BR")return i.getClientRects()[0];break}}function aT(n,e,t){let r=0;for(let i=0;r<e.length;r++){let o=e[r],s=i+o.length;if(!(s==i&&o.getSide()<=0)){if(t>i&&t<s&&o.dom.parentNode==n)return o.domAtPos(t-i);if(t<=i)break;i=s}}for(;r>0;r--){let i=e[r-1].dom;if(i.parentNode==n)return or.after(i)}return new or(n,0)}function lT(n,e,t){let r,{children:i}=n;t>0&&e instanceof Gi&&i.length&&(r=i[i.length-1])instanceof Gi&&r.mark.eq(e.mark)?lT(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function uT(n,e,t){for(let o=0,s=0;s<n.children.length;s++){let a=n.children[s],l=o+a.length,u;if((t<=0||l==n.length||a.getSide()>0?l>=e:l>e)&&(e<l||s+1==n.children.length||(u=n.children[s+1]).length||u.getSide()>0)){let c=0;if(l==o){if(a.getSide()<=0)continue;c=t=-a.getSide()}let f=a.coordsAt(Math.max(0,e-o),t);return c&&f?Rd(f,t<0):f}o=l}let r=n.dom.lastChild;if(!r)return n.dom.getBoundingClientRect();let i=pu(r);return i[i.length-1]||null}function Og(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}function lv(n,e){if(n==e)return!0;if(!n||!e)return!1;let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i of t)if(r.indexOf(i)==-1||n[i]!==e[i])return!1;return!0}function Tg(n,e,t){let r=null;if(e)for(let i in e)t&&i in t||n.removeAttribute(r=i);if(t)for(let i in t)e&&e[i]==t[i]||n.setAttribute(r=i,t[i]);return!!r}class os{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var un=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(un||(un={}));class pt extends Ls{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Nd(e)}static widget(e){let t=e.side||0,r=!!e.block;return t+=r?t>0?3e8:-4e8:t>0?1e8:-1e8,new js(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:o,end:s}=cT(e,t);r=(o?t?-3e8:-1:5e8)-1,i=(s?t?2e8:1:-6e8)+1}return new js(e,r,i,t,e.widget||null,!0)}static line(e){return new Uu(e)}static set(e,t=!1){return Qt.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}pt.none=Qt.empty;class Nd extends pt{constructor(e){let{start:t,end:r}=cT(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof Nd&&this.tagName==e.tagName&&this.class==e.class&&lv(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Nd.prototype.point=!1;class Uu extends pt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Uu&&lv(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Uu.prototype.mapMode=dr.TrackBefore;Uu.prototype.point=!0;class js extends pt{constructor(e,t,r,i,o,s){super(t,r,o,e),this.block=i,this.isReplace=s,this.mapMode=i?t<=0?dr.TrackBefore:dr.TrackAfter:dr.TrackDel}get type(){return this.startSide<this.endSide?un.WidgetRange:this.startSide<=0?un.WidgetBefore:un.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof js&&Nj(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}js.prototype.point=!0;function cT(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t!=null?t:e,end:r!=null?r:e}}function Nj(n,e){return n==e||!!(n&&e&&n.compare(e))}function Pg(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class gr extends vn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,o,s){if(r){if(!(r instanceof gr))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),nT(this,e,t,r?r.children:[],o,s),!0}split(e){let t=new gr;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let o=r;o<this.children.length;o++)t.append(this.children[o],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){!this.dom||(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){lv(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){lT(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=Og(t,this.attrs||{})),r&&(this.attrs=Og({class:r},this.attrs||{}))}domAtPos(e){return aT(this.dom,this.children,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?this.dirty&4&&($O(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Tg(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let r=this.dom.lastChild;for(;r&&vn.get(r)instanceof Gi;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((t=vn.get(r))===null||t===void 0?void 0:t.isEditable)==!1&&(!st.ios||!this.children.some(i=>i instanceof Xo))){let i=document.createElement("BR");i.cmIgnore=!0,this.dom.appendChild(i)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof Xo)||/[^ -~]/.test(t.text))return null;let r=pu(t.dom);if(r.length!=1)return null;e+=r[0].width}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}:null}coordsAt(e,t){return uT(this,e,t)}become(e){return!1}get type(){return un.Text}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let o=e.children[r],s=i+o.length;if(s>=t){if(o instanceof gr)return o;if(s>t)break}i=s+o.breakAfter}return null}}class Os extends vn{constructor(e,t,r){super(),this.widget=e,this.length=t,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,o,s){return r&&(!(r instanceof Os)||!this.widget.compare(r.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?or.before(this.dom):or.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new Os(this.widget,t,this.type);return r.breakAfter=this.breakAfter,r}get children(){return av}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):tn.empty}domBoundsAround(){return null}become(e){return e instanceof Os&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class uv{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Os&&e.type==un.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new gr),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(Ec(new La(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:s,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(s){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=o,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,r)),this.getLine().append(Ec(new Xo(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,o,s){if(this.disallowBlockEffectsFor[s]&&r instanceof js){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(r instanceof js)if(r.block){let{type:l}=r;l==un.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Os(r.widget||new R1("div"),a,l))}else{let l=Bo.create(r.widget||new R1("span"),a,r.startSide),u=this.atCursorPos&&!l.isEditable&&o<=i.length&&(e<t||r.startSide>0),c=!l.isEditable&&(e<t||r.startSide<=0),f=this.getLine();this.pendingBuffer==2&&!u&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(f.append(Ec(new La(1),i),o),o=i.length+Math.max(0,o-i.length)),f.append(Ec(l,i),o),this.atCursorPos=c,this.pendingBuffer=c?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,r,i,o){let s=new uv(e,t,r,o);return s.openEnd=Qt.spans(i,t,r,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function Ec(n,e){for(let t of e)n=new Gi(t,[n],n.length);return n}class R1 extends os{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const fT=at.define(),hT=at.define(),dT=at.define(),pT=at.define(),Ig=at.define(),mT=at.define(),gT=at.define({combine:n=>n.some(e=>e)});class Eh{constructor(e,t="nearest",r="nearest",i=5,o=5){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=o}map(e){return e.empty?this:new Eh(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const x1=Pt.define({map:(n,e)=>n.map(e)});function Kr(n,e,t){let r=n.facet(pT);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Md=at.define({combine:n=>n.length?n[0]:!0});let Mj=0;const Nl=at.define();class Fn{constructor(e,t,r,i){this.id=e,this.create=t,this.domEventHandlers=r,this.extension=i(this)}static define(e,t){const{eventHandlers:r,provide:i,decorations:o}=t||{};return new Fn(Mj++,e,r,s=>{let a=[Nl.of(s)];return o&&a.push(gu.of(l=>{let u=l.plugin(s);return u?o(u):pt.none})),i&&a.push(i(s)),a})}static fromClass(e,t){return Fn.define(r=>new e(r),t)}}class Op{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(Kr(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Kr(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){Kr(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const vT=at.define(),yT=at.define(),gu=at.define(),_T=at.define(),bT=at.define(),Ml=at.define();class lo{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new lo(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let i=0,o=0,s=0,a=0;;i++){let l=i==e.length?null:e[i],u=s-a,c=l?l.fromB:1e9;for(;o<t.length&&t[o]<c;){let f=t[o],d=t[o+1],g=Math.max(a,f),h=Math.min(c,d);if(g<=h&&new lo(g+u,h+u,g,h).addToSet(r),d>c)break;o+=2}if(!l)return r;new lo(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),s=l.toA,a=l.toB}}}class Ch{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=qn.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,a,l,u)=>i.push(new lo(s,a,l,u))),this.changedRanges=i;let o=e.hasFocus;o!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=o,this.flags|=1)}static create(e,t,r){return new Ch(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var wn=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(wn||(wn={}));const Ag=wn.LTR,Dj=wn.RTL;function wT(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const Lj=wT("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),jj=wT("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Rg=Object.create(null),Ii=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Rg[e]=t,Rg[t]=-e}function Bj(n){return n<=247?Lj[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?jj[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203||n==8204?256:1}const Fj=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class wa{constructor(e,t,r){this.from=e,this.to=t,this.level=r}get dir(){return this.level%2?Dj:Ag}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,r,i){let o=-1;for(let s=0;s<e.length;s++){let a=e[s];if(a.from<=t&&a.to>=t){if(a.level==r)return s;(o<0||(i!=0?i<0?a.from<t:a.to>t:e[o].level>a.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}}const _n=[];function Uj(n,e){let t=n.length,r=e==Ag?1:2,i=e==Ag?2:1;if(!n||r==1&&!Fj.test(n))return ST(t);for(let s=0,a=r,l=r;s<t;s++){let u=Bj(n.charCodeAt(s));u==512?u=a:u==8&&l==4&&(u=16),_n[s]=u==4?2:u,u&7&&(l=u),a=u}for(let s=0,a=r,l=r;s<t;s++){let u=_n[s];if(u==128)s<t-1&&a==_n[s+1]&&a&24?u=_n[s]=a:_n[s]=256;else if(u==64){let c=s+1;for(;c<t&&_n[c]==64;)c++;let f=s&&a==8||c<t&&_n[c]==8?l==1?1:8:256;for(let d=s;d<c;d++)_n[d]=f;s=c-1}else u==8&&l==1&&(_n[s]=1);a=u,u&7&&(l=u)}for(let s=0,a=0,l=0,u,c,f;s<t;s++)if(c=Rg[u=n.charCodeAt(s)])if(c<0){for(let d=a-3;d>=0;d-=3)if(Ii[d+1]==-c){let g=Ii[d+2],h=g&2?r:g&4?g&1?i:r:0;h&&(_n[s]=_n[Ii[d]]=h),a=d;break}}else{if(Ii.length==189)break;Ii[a++]=s,Ii[a++]=u,Ii[a++]=l}else if((f=_n[s])==2||f==1){let d=f==r;l=d?0:1;for(let g=a-3;g>=0;g-=3){let h=Ii[g+2];if(h&2)break;if(d)Ii[g+2]|=2;else{if(h&4)break;Ii[g+2]|=4}}}for(let s=0;s<t;s++)if(_n[s]==256){let a=s+1;for(;a<t&&_n[a]==256;)a++;let l=(s?_n[s-1]:r)==1,u=(a<t?_n[a]:r)==1,c=l==u?l?1:2:r;for(let f=s;f<a;f++)_n[f]=c;s=a-1}let o=[];if(r==1)for(let s=0;s<t;){let a=s,l=_n[s++]!=1;for(;s<t&&l==(_n[s]!=1);)s++;if(l)for(let u=s;u>a;){let c=u,f=_n[--u]!=2;for(;u>a&&f==(_n[u-1]!=2);)u--;o.push(new wa(u,c,f?2:1))}else o.push(new wa(a,s,0))}else for(let s=0;s<t;){let a=s,l=_n[s++]==2;for(;s<t&&l==(_n[s]==2);)s++;o.push(new wa(a,s,l?1:2))}return o}function ST(n){return[new wa(0,n,0)]}let ET="";function Vj(n,e,t,r,i){var o;let s=r.head-n.from,a=-1;if(s==0){if(!i||!n.length)return null;e[0].level!=t&&(s=e[0].side(!1,t),a=0)}else if(s==n.length){if(i)return null;let d=e[e.length-1];d.level!=t&&(s=d.side(!0,t),a=e.length-1)}a<0&&(a=wa.find(e,s,(o=r.bidiLevel)!==null&&o!==void 0?o:-1,r.assoc));let l=e[a];s==l.side(i,t)&&(l=e[a+=i?1:-1],s=l.side(!i,t));let u=i==(l.dir==t),c=zr(n.text,s,u);if(ET=n.text.slice(Math.min(s,c),Math.max(s,c)),c!=l.side(i,t))return Le.cursor(c+n.from,u?-1:1,l.level);let f=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return!f&&l.level!=t?Le.cursor(i?n.to:n.from,i?-1:1,t):f&&f.level<l.level?Le.cursor(f.side(!i,t)+n.from,i?1:-1,f.level):Le.cursor(c+n.from,i?-1:1,l.level)}const Fo="\uFFFF";class CT{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(jt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Fo}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i),this.readNode(i);let o=i.nextSibling;if(o==t)break;let s=vn.get(i),a=vn.get(o);(s&&a?s.breakAfter:(s?s.breakAfter:N1(i))||N1(o)&&(i.nodeName!="BR"||i.cmIgnore))&&this.lineBreak(),i=o}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,a;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,r),s=this.lineSeparator.length):(a=i.exec(t))&&(o=a.index,s=a[0].length),this.append(t.slice(r,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=s-1);r=o+s}}readNode(e){if(e.cmIgnore)return;let t=vn.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(t,r.offset))}}function N1(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}class M1{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class D1 extends vn{constructor(e){super(),this.view=e,this.compositionDeco=pt.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new gr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new lo(0,0,0,e.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:s,toA:a})=>a<this.minWidthFrom||s>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=pt.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=Hj(this.view,e.changes)),(st.ie||st.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,i=this.updateDeco(),o=Gj(r,i,e.changes);return t=lo.extendWithRanges(t,o),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=st.chrome||st.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(o),this.dirty=0,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""});let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Os&&o.widget instanceof L1&&i.push(o.dom);r.updateGaps(i)}updateChildren(e,t){let r=this.childCursor(t);for(let i=e.length-1;;i--){let o=i>=0?e[i]:null;if(!o)break;let{fromA:s,toA:a,fromB:l,toB:u}=o,{content:c,breakAtStart:f,openStart:d,openEnd:g}=uv.build(this.view.state.doc,l,u,this.decorations,this.dynamicDecorationMap),{i:h,off:v}=r.findPos(a,1),{i:m,off:p}=r.findPos(s,-1);tT(this,m,p,h,v,c,f,d,g)}}updateSelection(e=!1,t=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection())||st.ios&&this.view.inputState.rapidCompositionStart)return;let r=this.forceSelection;this.forceSelection=!1;let i=this.view.state.selection.main,o=this.domAtPos(i.anchor),s=i.empty?o:this.domAtPos(i.head);if(st.gecko&&i.empty&&qj(o)){let l=document.createTextNode("");this.view.observer.ignore(()=>o.node.insertBefore(l,o.node.childNodes[o.offset]||null)),o=s=new or(l,0),r=!0}let a=this.view.observer.selectionRange;(r||!a.focusNode||!wh(o.node,o.offset,a.anchorNode,a.anchorOffset)||!wh(s.node,s.offset,a.focusNode,a.focusOffset))&&(this.view.observer.ignore(()=>{st.android&&st.chrome&&this.dom.contains(a.focusNode)&&Jj(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let l=bh(this.view.root);if(l)if(i.empty){if(st.gecko){let u=Wj(o.node,o.offset);if(u&&u!=3){let c=OT(o.node,o.offset,u==1?1:-1);c&&(o=new or(c,u==1?0:c.nodeValue.length))}}l.collapse(o.node,o.offset),i.bidiLevel!=null&&a.cursorBidiLevel!=null&&(a.cursorBidiLevel=i.bidiLevel)}else if(l.extend)l.collapse(o.node,o.offset),l.extend(s.node,s.offset);else{let u=document.createRange();i.anchor>i.head&&([o,s]=[s,o]),u.setEnd(s.node,s.offset),u.setStart(o.node,o.offset),l.removeAllRanges(),l.addRange(u)}}),this.view.observer.setSelectionRange(o,s)),this.impreciseAnchor=o.precise?null:new or(a.anchorNode,a.anchorOffset),this.impreciseHead=s.precise?null:new or(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=bh(this.view.root);if(!t||!e.empty||!e.assoc||!t.modify)return;let r=gr.find(this,e.head);if(!r)return;let i=r.posAtStart;if(e.head==i||e.head==i+r.length)return;let o=this.coordsAt(e.head,-1),s=this.coordsAt(e.head,1);if(!o||!s||o.bottom>s.top)return;let a=this.domAtPos(e.head+e.assoc);t.collapse(a.node,a.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||Hf(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let r=vn.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof gr)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){for(let r=this.length,i=this.children.length-1;;i--){let o=this.children[i],s=r-o.breakAfter-o.length;if(e>s||e==s&&o.type!=un.WidgetBefore&&o.type!=un.WidgetAfter&&(!i||t==2||this.children[i-1].breakAfter||this.children[i-1].type==un.WidgetBefore&&t>-2))return o.coordsAt(e-s,t);r=s}}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==wn.LTR;for(let u=0,c=0;c<this.children.length;c++){let f=this.children[c],d=u+f.length;if(d>i)break;if(u>=r){let g=f.dom.getBoundingClientRect();if(t.push(g.height),s){let h=f.dom.lastChild,v=h?pu(h):[];if(v.length){let m=v[v.length-1],p=l?m.right-g.left:g.right-m.left;p>a&&(a=p,this.minWidth=o,this.minWidthFrom=u,this.minWidthTo=d)}}}u=d+f.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?wn.RTL:wn.LTR}measureTextSize(){for(let i of this.children)if(i instanceof gr){let o=i.measureTextSize();if(o)return o}let e=document.createElement("div"),t,r;return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let i=pu(e.firstChild)[0];t=e.getBoundingClientRect().height,r=i?i.width/27:7,e.remove()}),{lineHeight:t,charWidth:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new eT(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let o=i==t.viewports.length?null:t.viewports[i],s=o?o.from-1:this.length;if(s>r){let a=t.lineBlockAt(s).bottom-t.lineBlockAt(r).top;e.push(pt.replace({widget:new L1(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,s))}if(!o)break;r=o.to+1}return pt.set(e)}updateDeco(){let e=this.view.state.facet(gu).map((t,r)=>(this.dynamicDecorationMap[r]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let o=0,s=0,a=0,l=0;for(let c of this.view.state.facet(bT).map(f=>f(this.view)))if(c){let{left:f,right:d,top:g,bottom:h}=c;f!=null&&(o=Math.max(o,f)),d!=null&&(s=Math.max(s,d)),g!=null&&(a=Math.max(a,g)),h!=null&&(l=Math.max(l,h))}let u={left:r.left-o,top:r.top-a,right:r.right+s,bottom:r.bottom+l};Tj(this.view.scrollDOM,u,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==wn.LTR)}}function qj(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class L1 extends os{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function kT(n){let e=n.observer.selectionRange,t=e.focusNode&&OT(e.focusNode,e.focusOffset,0);if(!t)return null;let r=n.docView.nearest(t);if(!r)return null;if(r instanceof gr){let i=t;for(;i.parentNode!=r.dom;)i=i.parentNode;let o=i.previousSibling;for(;o&&!vn.get(o);)o=o.previousSibling;let s=o?vn.get(o).posAtEnd:r.posAtStart;return{from:s,to:s,node:i,text:t}}else{for(;;){let{parent:o}=r;if(!o)return null;if(o instanceof gr)break;r=o}let i=r.posAtStart;return{from:i,to:i+r.length,node:r.dom,text:t}}}function Hj(n,e){let t=kT(n);if(!t)return pt.none;let{from:r,to:i,node:o,text:s}=t,a=e.mapPos(r,1),l=Math.max(a,e.mapPos(i,-1)),{state:u}=n,c=o.nodeType==3?o.nodeValue:new CT([],u).readRange(o.firstChild,null).text;if(l-a<c.length)if(u.doc.sliceString(a,Math.min(u.doc.length,a+c.length),Fo)==c)l=a+c.length;else if(u.doc.sliceString(Math.max(0,l-c.length),l,Fo)==c)a=l-c.length;else return pt.none;else if(u.doc.sliceString(a,l,Fo)!=c)return pt.none;let f=vn.get(o);return f instanceof oT?f=f.widget.topView:f&&(f.parent=null),pt.set(pt.replace({widget:new zj(o,s,f),inclusive:!0}).range(a,l))}class zj extends os{constructor(e,t,r){super(),this.top=e,this.text=t,this.topView=r}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return oT}}function OT(n,e,t){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0&&t<=0)n=n.childNodes[e-1],e=mu(n);else if(n.nodeType==1&&e<n.childNodes.length&&t>=0)n=n.childNodes[e],e=0;else return null}}function Wj(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}class Kj{constructor(){this.changes=[]}compareRange(e,t){Pg(e,t,this.changes)}comparePoint(e,t){Pg(e,t,this.changes)}}function Gj(n,e,t){let r=new Kj;return Qt.compare(n,e,t,r),r.changes}function Jj(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function Yj(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),o=e-i.from;if(i.length==0)return Le.cursor(e);o==0?t=1:o==i.length&&(t=-1);let s=o,a=o;t<0?s=zr(i.text,o,!1):a=zr(i.text,o);let l=r(i.text.slice(s,a));for(;s>0;){let u=zr(i.text,s,!1);if(r(i.text.slice(u,s))!=l)break;s=u}for(;a<i.length;){let u=zr(i.text,a);if(r(i.text.slice(a,u))!=l)break;a=u}return Le.range(s+i.from,a+i.from)}function Qj(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function Zj(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function Tp(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function j1(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function B1(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function xg(n,e,t){let r,i,o,s,a=!1,l,u,c,f;for(let h=n.firstChild;h;h=h.nextSibling){let v=pu(h);for(let m=0;m<v.length;m++){let p=v[m];i&&Tp(i,p)&&(p=j1(B1(p,i.bottom),i.top));let y=Qj(e,p),b=Zj(t,p);if(y==0&&b==0)return h.nodeType==3?F1(h,e,t):xg(h,e,t);(!r||s>b||s==b&&o>y)&&(r=h,i=p,o=y,s=b,a=!y||(y>0?m<v.length-1:m>0)),y==0?t>p.bottom&&(!c||c.bottom<p.bottom)?(l=h,c=p):t<p.top&&(!f||f.top>p.top)&&(u=h,f=p):c&&Tp(c,p)?c=B1(c,p.bottom):f&&Tp(f,p)&&(f=j1(f,p.top))}}if(c&&c.bottom>=t?(r=l,i=c):f&&f.top<=t&&(r=u,i=f),!r)return{node:n,offset:0};let d=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return F1(r,d,t);if(a&&r.contentEditable!="false")return xg(r,d,t);let g=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:g}}function F1(n,e,t){let r=n.nodeValue.length,i=-1,o=1e9,s=0;for(let a=0;a<r;a++){let l=Da(n,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let c=l[u];if(c.top==c.bottom)continue;s||(s=e-c.left);let f=(c.top>t?c.top-t:t-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&f<o){let d=e>=(c.left+c.right)/2,g=d;if((st.chrome||st.gecko)&&Da(n,a).getBoundingClientRect().left==c.right&&(g=!d),f<=0)return{node:n,offset:a+(g?1:0)};i=a+(g?1:0),o=f}}}return{node:n,offset:i>-1?i:s>0?n.nodeValue.length:0}}function TT(n,{x:e,y:t},r,i=-1){var o;let s=n.contentDOM.getBoundingClientRect(),a=s.top+n.viewState.paddingTop,l,{docHeight:u}=n.viewState,c=t-a;if(c<0)return 0;if(c>u)return n.state.doc.length;for(let p=n.defaultLineHeight/2,y=!1;l=n.elementAtHeight(c),l.type!=un.Text;)for(;c=i>0?l.bottom+p:l.top-p,!(c>=0&&c<=u);){if(y)return r?null:0;y=!0,i=-i}t=a+c;let f=l.from;if(f<n.viewport.from)return n.viewport.from==0?0:r?null:U1(n,s,l,e,t);if(f>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:r?null:U1(n,s,l,e,t);let d=n.dom.ownerDocument,g=n.root.elementFromPoint?n.root:d,h=g.elementFromPoint(e,t);h&&!n.contentDOM.contains(h)&&(h=null),h||(e=Math.max(s.left+1,Math.min(s.right-1,e)),h=g.elementFromPoint(e,t),h&&!n.contentDOM.contains(h)&&(h=null));let v,m=-1;if(h&&((o=n.docView.nearest(h))===null||o===void 0?void 0:o.isEditable)!=!1){if(d.caretPositionFromPoint){let p=d.caretPositionFromPoint(e,t);p&&({offsetNode:v,offset:m}=p)}else if(d.caretRangeFromPoint){let p=d.caretRangeFromPoint(e,t);p&&({startContainer:v,startOffset:m}=p,(!n.contentDOM.contains(v)||st.safari&&Xj(v,m,e)||st.chrome&&$j(v,m,e))&&(v=void 0))}}if(!v||!n.docView.dom.contains(v)){let p=gr.find(n.docView,f);if(!p)return c>l.top+l.height/2?l.to:l.from;({node:v,offset:m}=xg(p.dom,e,t))}return n.docView.posFromDOM(v,m)}function U1(n,e,t,r,i){let o=Math.round((r-e.left)*n.defaultCharacterWidth);n.lineWrapping&&t.height>n.defaultLineHeight*1.5&&(o+=Math.floor((i-t.top)/n.defaultLineHeight)*n.viewState.heightOracle.lineLength);let s=n.state.sliceDoc(t.from,t.to);return t.from+yg(s,o,n.state.tabSize)}function Xj(n,e,t){let r;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(let i=n.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return Da(n,r-1,r).getBoundingClientRect().left>t}function $j(n,e,t){if(e!=0)return!1;for(let i=n;;){let o=i.parentNode;if(!o||o.nodeType!=1||o.firstChild!=i)return!1;if(o.classList.contains("cm-line"))break;i=o}let r=n.nodeType==1?n.getBoundingClientRect():Da(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function eB(n,e,t,r){let i=n.state.doc.lineAt(e.head),o=!r||!n.lineWrapping?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(o){let l=n.dom.getBoundingClientRect(),u=n.textDirectionAt(i.from),c=n.posAtCoords({x:t==(u==wn.LTR)?l.right-1:l.left+1,y:(o.top+o.bottom)/2});if(c!=null)return Le.cursor(c,t?-1:1)}let s=gr.find(n.docView,e.head),a=s?t?s.posAtEnd:s.posAtStart:t?i.to:i.from;return Le.cursor(a,t?-1:1)}function V1(n,e,t,r){let i=n.state.doc.lineAt(e.head),o=n.bidiSpans(i),s=n.textDirectionAt(i.from);for(let a=e,l=null;;){let u=Vj(i,o,s,a,t),c=ET;if(!u){if(i.number==(t?n.state.doc.lines:1))return a;c=`
`,i=n.state.doc.line(i.number+(t?1:-1)),o=n.bidiSpans(i),u=Le.cursor(t?i.from:i.to)}if(l){if(!l(c))return a}else{if(!r)return u;l=r(c)}a=u}}function tB(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return o=>{let s=r(o);return i==mr.Space&&(i=s),i==s}}function nB(n,e,t,r){let i=e.head,o=t?1:-1;if(i==(t?n.state.doc.length:0))return Le.cursor(i,e.assoc);let s=e.goalColumn,a,l=n.contentDOM.getBoundingClientRect(),u=n.coordsAtPos(i),c=n.documentTop;if(u)s==null&&(s=u.left-l.left),a=o<0?u.top:u.bottom;else{let g=n.viewState.lineBlockAt(i);s==null&&(s=Math.min(l.right-l.left,n.defaultCharacterWidth*(i-g.from))),a=(o<0?g.top:g.bottom)+c}let f=l.left+s,d=r!=null?r:n.defaultLineHeight>>1;for(let g=0;;g+=10){let h=a+(d+g)*o,v=TT(n,{x:f,y:h},!1,o);if(h<l.top||h>l.bottom||(o<0?v<i:v>i))return Le.cursor(v,e.assoc,void 0,s)}}function Pp(n,e,t){let r=n.state.facet(_T).map(i=>i(n));for(;;){let i=!1;for(let o of r)o.between(t.from-1,t.from+1,(s,a,l)=>{t.from>s&&t.from<a&&(t=e.from>t.from?Le.cursor(s,1):Le.cursor(a,-1),i=!0)});if(!i)return t}}class rB{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in Qn){let r=Qn[t];e.contentDOM.addEventListener(t,i=>{!q1(e,i)||this.ignoreDuringComposition(i)||t=="keydown"&&this.keydown(e,i)||(this.mustFlushObserver(i)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,i)?i.preventDefault():r(e,i))},Ng[t]),this.registeredEvents.push(t)}st.chrome&&st.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,st.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var r;let i;this.customHandlers=[];for(let o of t)if(i=(r=o.update(e).spec)===null||r===void 0?void 0:r.domEventHandlers){this.customHandlers.push({plugin:o.value,handlers:i});for(let s in i)this.registeredEvents.indexOf(s)<0&&s!="scroll"&&(this.registeredEvents.push(s),e.contentDOM.addEventListener(s,a=>{!q1(e,a)||this.runCustomHandlers(s,e,a)&&a.preventDefault()}))}}runCustomHandlers(e,t,r){for(let i of this.customHandlers){let o=i.handlers[e];if(o)try{if(o.call(i.plugin,r,t)||r.defaultPrevented)return!0}catch(s){Kr(t.state,s)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let r of this.customHandlers){let i=r.handlers.scroll;if(i)try{i.call(r.plugin,t,e)}catch(o){Kr(e.state,o)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(st.android&&st.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let r;return st.ios&&(r=PT.find(i=>i.keyCode==t.keyCode))&&!(t.ctrlKey||t.altKey||t.metaKey)&&!t.synthetic?(this.pendingIOSKey=r,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,Yl(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:st.safari&&!st.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229||e.type=="compositionend"&&!st.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const PT=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],IT=[16,17,18,20,91,92,224,225];class iB{constructor(e,t,r,i){this.view=e,this.style=r,this.mustSelect=i,this.lastEvent=t;let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(jt.allowMultipleSelections)&&oB(e,t),this.dragMove=sB(e,t),this.dragging=aB(e,t)&&cv(t)==1?null:!1,this.dragging===!1&&(t.preventDefault(),this.select(t))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function oB(n,e){let t=n.state.facet(fT);return t.length?t[0](e):st.mac?e.metaKey:e.ctrlKey}function sB(n,e){let t=n.state.facet(hT);return t.length?t[0](e):st.mac?!e.altKey:!e.ctrlKey}function aB(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=bh(n.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let s=i[o];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function q1(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=vn.get(t))&&r.ignoreEvent(e))return!1;return!0}const Qn=Object.create(null),Ng=Object.create(null),AT=st.ie&&st.ie_version<15||st.ios&&st.webkit_version<604;function lB(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),RT(n,t.value)},50)}function RT(n,e){let{state:t}=n,r,i=1,o=t.toText(e),s=o.lines==t.selection.ranges.length;if(Mg!=null&&t.selection.ranges.every(l=>l.empty)&&Mg==o.toString()){let l=-1;r=t.changeByRange(u=>{let c=t.doc.lineAt(u.from);if(c.from==l)return{range:u};l=c.from;let f=t.toText((s?o.line(i++).text:e)+t.lineBreak);return{changes:{from:c.from,insert:f},range:Le.cursor(u.from+f.length)}})}else s?r=t.changeByRange(l=>{let u=o.line(i++);return{changes:{from:l.from,to:l.to,insert:u.text},range:Le.cursor(l.from+u.length)}}):r=t.replaceSelection(o);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Qn.keydown=(n,e)=>{n.inputState.setSelectionOrigin("select"),e.keyCode==27?n.inputState.lastEscPress=Date.now():IT.indexOf(e.keyCode)<0&&(n.inputState.lastEscPress=0)};Qn.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Qn.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Ng.touchstart=Ng.touchmove={passive:!0};Qn.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3&&cv(e)==1)return;let t=null;for(let r of n.state.facet(dT))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=fB(n,e)),t){let r=n.root.activeElement!=n.contentDOM;r&&n.observer.ignore(()=>XO(n.contentDOM)),n.inputState.startMouseSelection(new iB(n,e,t,r))}};function H1(n,e,t,r){if(r==1)return Le.cursor(e,t);if(r==2)return Yj(n.state,e,t);{let i=gr.find(n.docView,e),o=n.state.doc.lineAt(i?i.posAtEnd:e),s=i?i.posAtStart:o.from,a=i?i.posAtEnd:o.to;return a<n.state.doc.length&&a==o.to&&a++,Le.range(s,a)}}let xT=(n,e)=>n>=e.top&&n<=e.bottom,z1=(n,e,t)=>xT(e,t)&&n>=t.left&&n<=t.right;function uB(n,e,t,r){let i=gr.find(n.docView,e);if(!i)return 1;let o=e-i.posAtStart;if(o==0)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&z1(t,r,s))return-1;let a=i.coordsAt(o,1);return a&&z1(t,r,a)?1:s&&xT(r,s)?-1:1}function W1(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:uB(n,t,e.clientX,e.clientY)}}const cB=st.ie&&st.ie_version<=11;let K1=null,G1=0,J1=0;function cv(n){if(!cB)return n.detail;let e=K1,t=J1;return K1=n,J1=Date.now(),G1=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(G1+1)%3:1}function fB(n,e){let t=W1(n,e),r=cv(e),i=n.state.selection,o=t,s=e;return{update(a){a.docChanged&&(t&&(t.pos=a.changes.mapPos(t.pos)),i=i.map(a.changes),s=null)},get(a,l,u){let c;if(s&&a.clientX==s.clientX&&a.clientY==s.clientY?c=o:(c=o=W1(n,a),s=a),!c||!t)return i;let f=H1(n,c.pos,c.bias,r);if(t.pos!=c.pos&&!l){let d=H1(n,t.pos,t.bias,r),g=Math.min(d.from,f.from),h=Math.max(d.to,f.to);f=g<f.from?Le.range(g,h):Le.range(h,g)}return l?i.replaceRange(i.main.extend(f.from,f.to)):u&&i.ranges.length>1&&i.ranges.some(d=>d.eq(f))?hB(i,f):u?i.addRange(f):Le.create([f])}}}function hB(n,e){for(let t=0;;t++)if(n.ranges[t].eq(e))return Le.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}Qn.dragstart=(n,e)=>{let{selection:{main:t}}=n.state,{mouseSelection:r}=n.inputState;r&&(r.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function Y1(n,e,t,r){if(!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:o}=n.inputState,s=r&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,a={from:i,insert:t},l=n.state.changes(s?[s,a]:a);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"})}Qn.drop=(n,e)=>{if(!e.dataTransfer)return;if(n.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let r=Array(t.length),i=0,o=()=>{++i==t.length&&Y1(n,e,r.filter(s=>s!=null).join(n.state.lineBreak),!1)};for(let s=0;s<t.length;s++){let a=new FileReader;a.onerror=o,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[s]=a.result),o()},a.readAsText(t[s])}}else Y1(n,e,e.dataTransfer.getData("Text"),!0)};Qn.paste=(n,e)=>{if(n.state.readOnly)return e.preventDefault();n.observer.flush();let t=AT?null:e.clipboardData;t?(RT(n,t.getData("text/plain")),e.preventDefault()):lB(n)};function dB(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function pB(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:o}of n.selection.ranges){let s=n.doc.lineAt(o);s.number>i&&(e.push(s.text),t.push({from:s.from,to:Math.min(n.doc.length,s.to+1)})),i=s.number}r=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:r}}let Mg=null;Qn.copy=Qn.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=pB(n.state);if(!t&&!i)return;Mg=i?t:null;let o=AT?null:e.clipboardData;o?(e.preventDefault(),o.clearData(),o.setData("text/plain",t)):dB(n,t),e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};function NT(n){setTimeout(()=>{n.hasFocus!=n.inputState.notifiedFocused&&n.update([])},10)}Qn.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),NT(n)};Qn.blur=n=>{n.observer.clearSelectionRange(),NT(n)};function MT(n,e){if(n.docView.compositionDeco.size){n.inputState.rapidCompositionStart=e;try{n.update([])}finally{n.inputState.rapidCompositionStart=!1}}}Qn.compositionstart=Qn.compositionupdate=n=>{n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0,n.docView.compositionDeco.size&&(n.observer.flush(),MT(n,!0)))};Qn.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionFirstChange=null,setTimeout(()=>{n.inputState.composing<0&&MT(n,!1)},50)};Qn.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Qn.beforeinput=(n,e)=>{var t;let r;if(st.chrome&&st.android&&(r=PT.find(i=>i.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>i+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}};const Q1=["pre-wrap","normal","pre-line","break-spaces"];class mB{constructor(){this.doc=tn.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength)),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Q1.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,r,i,o){let s=Q1.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=t,this.charWidth=r,this.lineLength=i,a){this.heightSamples={};for(let l=0;l<o.length;l++){let u=o[l];u<0?l++:this.heightSamples[Math.floor(u*10)]=!0}}return a}}class gB{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Uo{constructor(e,t,r,i,o){this.from=e,this.length=t,this.top=r,this.height=i,this.type=o}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new Uo(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var fn=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(fn||(fn={}));const zf=.001;class xr{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>zf&&(e.heightChanged=!0),this.height=t)}replace(e,t,r){return xr.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let o=this;for(let s=i.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:u,toB:c}=i[s],f=o.lineAt(a,fn.ByPosNoHeight,t,0,0),d=f.to>=l?f:o.lineAt(l,fn.ByPosNoHeight,t,0,0);for(c+=d.to-l,l=d.to;s>0&&f.from<=i[s-1].toA;)a=i[s-1].fromA,u=i[s-1].fromB,s--,a<f.from&&(f=o.lineAt(a,fn.ByPosNoHeight,t,0,0));u+=f.from-a,a=f.from;let g=fv.build(r,e,u,c);o=o.replace(a,l,g)}return o.updateHeight(r,0)}static empty(){return new Ur(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,i=0,o=0;for(;;)if(t==r)if(i>o*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(o>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,o-=a.size}else break;else if(i<o){let a=e[t++];a&&(i+=a.size)}else{let a=e[--r];a&&(o+=a.size)}let s=0;return e[t-1]==null?(s=1,t--):e[t]==null&&(s=1,r++),new vB(xr.of(e.slice(0,t)),s,xr.of(e.slice(r)))}}xr.prototype.size=1;class DT extends xr{constructor(e,t,r){super(e,t),this.type=r}blockAt(e,t,r,i){return new Uo(i,this.length,r,this.height,this.type)}lineAt(e,t,r,i,o){return this.blockAt(0,r,i,o)}forEachLine(e,t,r,i,o,s){e<=o+this.length&&t>=o&&s(this.blockAt(0,r,i,o))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ur extends DT{constructor(e,t){super(e,t,un.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,r){let i=r[0];return r.length==1&&(i instanceof Ur||i instanceof $n&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof $n?i=new Ur(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):xr.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class $n extends xr{constructor(e){super(e,0)}lines(e,t){let r=e.lineAt(t).number,i=e.lineAt(t+this.length).number;return{firstLine:r,lastLine:i,lineHeight:this.height/(i-r+1)}}blockAt(e,t,r,i){let{firstLine:o,lastLine:s,lineHeight:a}=this.lines(t,i),l=Math.max(0,Math.min(s-o,Math.floor((e-r)/a))),{from:u,length:c}=t.line(o+l);return new Uo(u,c,r+a*l,a,un.Text)}lineAt(e,t,r,i,o){if(t==fn.ByHeight)return this.blockAt(e,r,i,o);if(t==fn.ByPosNoHeight){let{from:f,to:d}=r.lineAt(e);return new Uo(f,d-f,0,0,un.Text)}let{firstLine:s,lineHeight:a}=this.lines(r,o),{from:l,length:u,number:c}=r.lineAt(e);return new Uo(l,u,i+a*(c-s),a,un.Text)}forEachLine(e,t,r,i,o,s){let{firstLine:a,lineHeight:l}=this.lines(r,o);for(let u=Math.max(e,o),c=Math.min(o+this.length,t);u<=c;){let f=r.lineAt(u);u==e&&(i+=l*(f.number-a)),s(new Uo(f.from,f.length,i,l,un.Text)),i+=l,u=f.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let o=r[r.length-1];o instanceof $n?r[r.length-1]=new $n(o.length+i):r.push(null,new $n(i-1))}if(e>0){let o=r[0];o instanceof $n?r[0]=new $n(e+o.length):r.unshift(new $n(e-1),null)}return xr.of(r)}decomposeLeft(e,t){t.push(new $n(e-1),null)}decomposeRight(e,t){t.push(null,new $n(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let o=t+this.length;if(i&&i.from<=t+this.length&&i.more){let s=[],a=Math.max(t,i.from),l=-1,u=e.heightChanged;for(i.from>t&&s.push(new $n(i.from-t-1).updateHeight(e,t));a<=o&&i.more;){let f=e.doc.lineAt(a).length;s.length&&s.push(null);let d=i.heights[i.index++];l==-1?l=d:Math.abs(d-l)>=zf&&(l=-2);let g=new Ur(f,d);g.outdated=!1,s.push(g),a+=f+1}a<=o&&s.push(null,new $n(o-a).updateHeight(e,a));let c=xr.of(s);return e.heightChanged=u||l<0||Math.abs(c.height-this.height)>=zf||Math.abs(l-this.lines(e.doc,t).lineHeight)>=zf,c}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class vB extends xr{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,i){let o=r+this.left.height;return e<o?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,o,i+this.left.length+this.break)}lineAt(e,t,r,i,o){let s=i+this.left.height,a=o+this.left.length+this.break,l=t==fn.ByHeight?e<s:e<a,u=l?this.left.lineAt(e,t,r,i,o):this.right.lineAt(e,t,r,s,a);if(this.break||(l?u.to<a:u.from>a))return u;let c=t==fn.ByPosNoHeight?fn.ByPosNoHeight:fn.ByPos;return l?u.join(this.right.lineAt(a,c,r,s,a)):this.left.lineAt(a,c,r,i,o).join(u)}forEachLine(e,t,r,i,o,s){let a=i+this.left.height,l=o+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,r,i,o,s),t>=l&&this.right.forEachLine(e,t,r,a,l,s);else{let u=this.lineAt(l,fn.ByPos,r,i,o);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,o,s),u.to>=e&&u.from<=t&&s(u),t>u.to&&this.right.forEachLine(u.to+1,t,r,a,l,s)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let o=[];e>0&&this.decomposeLeft(e,o);let s=o.length;for(let a of r)o.push(a);if(e>0&&Z1(o,s-1),t<this.length){let a=o.length;this.decomposeRight(t,o),Z1(o,a)}return xr.of(o)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?xr.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:o,right:s}=this,a=t+o.length+this.break,l=null;return i&&i.from<=t+o.length&&i.more?l=o=o.updateHeight(e,t,r,i):o.updateHeight(e,t,r),i&&i.from<=a+s.length&&i.more?l=s=s.updateHeight(e,a,r,i):s.updateHeight(e,a,r),l?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Z1(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof $n&&(r=n[e+1])instanceof $n&&n.splice(e-1,3,new $n(t.length+1+r.length))}const yB=5;class fv{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Ur?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Ur(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;r.block?this.addBlock(new DT(o,i,r.type)):(o||i>=yB)&&this.addLineDeco(i,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ur(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new $n(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ur)return e;let t=new Ur(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==un.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=un.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let r=this.ensureLine();r.length+=t,r.collapsed+=t,r.widgetHeight=Math.max(r.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Ur)&&!this.isCovered?this.nodes.push(new Ur(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Ur&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let o=new fv(r,e);return Qt.spans(t,r,i,o,0),o.finish(r)}}function _B(n,e,t){let r=new bB;return Qt.compare(n,e,t,r,0),r.changes}class bB{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&Pg(e,t,this.changes,5)}}function wB(n,e){let t=n.getBoundingClientRect(),r=Math.max(0,t.left),i=Math.min(innerWidth,t.right),o=Math.max(0,t.top),s=Math.min(innerHeight,t.bottom),a=n.ownerDocument.body;for(let l=n.parentNode;l&&l!=a;)if(l.nodeType==1){let u=l,c=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&c.overflow!="visible"){let f=u.getBoundingClientRect();r=Math.max(r,f.left),i=Math.min(i,f.right),o=Math.max(o,f.top),s=l==n.parentNode?f.bottom:Math.min(s,f.bottom)}l=c.position=="absolute"||c.position=="fixed"?u.offsetParent:u.parentNode}else if(l.nodeType==11)l=l.host;else break;return{left:r-t.left,right:Math.max(r,i)-t.left,top:o-(t.top+e),bottom:Math.max(o,s)-(t.top+e)}}function SB(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Ip{constructor(e,t,r){this.from=e,this.to=t,this.size=r}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(i.from!=o.from||i.to!=o.to||i.size!=o.size)return!1}return!0}draw(e){return pt.replace({widget:new EB(this.size,e)}).range(this.from,this.to)}}class EB extends os{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class X1{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new mB,this.scaler=tb,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=wn.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(gu).filter(t=>typeof t!="function"),this.heightMap=xr.empty().applyChanges(this.stateDeco,tn.empty,this.heightOracle.setDoc(e.doc),[new lo(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=pt.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:o,to:s})=>i>=o&&i<=s)){let{from:o,to:s}=this.lineBlockAt(i);e.push(new Cc(o,s))}}this.viewports=e.sort((r,i)=>r.from-i.from),this.scaler=this.heightMap.height<=7e6?tb:new OB(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Dl(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(gu).filter(u=>typeof u!="function");let i=e.changedRanges,o=lo.extendWithRanges(i,_B(r,this.stateDeco,e?e.changes:qn.empty(this.state.doc.length))),s=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),this.heightMap.height!=s&&(e.flags|=2);let a=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let l=!e.changes.empty||e.flags&2||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,o=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?wn.RTL:wn.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),a=s||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let l=0,u=0,c=parseInt(r.paddingTop)||0,f=parseInt(r.paddingBottom)||0;(this.paddingTop!=c||this.paddingBottom!=f)&&(this.paddingTop=c,this.paddingBottom=f,l|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=8);let d=(this.printing?SB:wB)(t,this.paddingTop),g=d.top-this.pixelViewport.top,h=d.bottom-this.pixelViewport.bottom;this.pixelViewport=d;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(a=!0)),!this.inView)return 0;let m=t.clientWidth;if((this.contentDOMWidth!=m||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=m,this.editorHeight=e.scrollDOM.clientHeight,l|=8),a){let y=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(y)&&(s=!0),s||i.lineWrapping&&Math.abs(m-this.contentDOMWidth)>i.charWidth){let{lineHeight:b,charWidth:_}=e.docView.measureTextSize();s=i.refresh(o,b,_,m/_,y),s&&(e.docView.minWidth=0,l|=8)}g>0&&h>0?u=Math.max(g,h):g<0&&h<0&&(u=Math.min(g,h)),i.heightChanged=!1;for(let b of this.viewports){let _=b.from==this.viewport.from?y:e.docView.measureVisibleLineHeights(b);this.heightMap=this.heightMap.updateHeight(i,0,s,new gB(b.from,_))}i.heightChanged&&(l|=2)}let p=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return p&&(this.viewport=this.getViewport(u,this.scrollTarget)),this.updateForViewport(),(l&2||p)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,o=this.state.doc,{visibleTop:s,visibleBottom:a}=this,l=new Cc(i.lineAt(s-r*1e3,fn.ByHeight,o,0,0).from,i.lineAt(a+(1-r)*1e3,fn.ByHeight,o,0,0).to);if(t){let{head:u}=t.range;if(u<l.from||u>l.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),f=i.lineAt(u,fn.ByPos,o,0,0),d;t.y=="center"?d=(f.top+f.bottom)/2-c/2:t.y=="start"||t.y=="nearest"&&u<l.from?d=f.top:d=f.bottom-c,l=new Cc(i.lineAt(d-1e3/2,fn.ByHeight,o,0,0).from,i.lineAt(d+c+1e3/2,fn.ByHeight,o,0,0).to)}}return l}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new Cc(this.heightMap.lineAt(r,fn.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(i,fn.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,fn.ByPos,this.state.doc,0,0),{bottom:o}=this.heightMap.lineAt(t,fn.ByPos,this.state.doc,0,0),{visibleTop:s,visibleBottom:a}=this;return(e==0||i<=s-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||o>=a+Math.max(10,Math.min(r,250)))&&i>s-2*1e3&&o<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new Ip(t.mapPos(i.from),t.mapPos(i.to),i.size));return r}ensureLineGaps(e){let t=[];if(this.defaultTextDirection!=wn.LTR)return t;for(let r of this.viewportLines){if(r.length<4e3)continue;let i=CB(r.from,r.to,this.stateDeco);if(i.total<4e3)continue;let o,s;if(this.heightOracle.lineWrapping){let u=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;o=kc(i,(this.visibleTop-r.top-u)/r.height),s=kc(i,(this.visibleBottom-r.top+u)/r.height)}else{let u=i.total*this.heightOracle.charWidth,c=2e3*this.heightOracle.charWidth;o=kc(i,(this.pixelViewport.left-c)/u),s=kc(i,(this.pixelViewport.right+c)/u)}let a=[];o>r.from&&a.push({from:r.from,to:o}),s<r.to&&a.push({from:s,to:r.to});let l=this.state.selection.main;l.from>=r.from&&l.from<=r.to&&eb(a,l.from-10,l.from+10),!l.empty&&l.to>=r.from&&l.to<=r.to&&eb(a,l.to-10,l.to+10);for(let{from:u,to:c}of a)c-u>1e3&&t.push(kB(e,f=>f.from>=r.from&&f.to<=r.to&&Math.abs(f.from-u)<1e3&&Math.abs(f.to-c)<1e3)||new Ip(u,c,this.gapSize(r,u,c,i)))}return t}gapSize(e,t,r,i){let o=$1(i,r)-$1(i,t);return this.heightOracle.lineWrapping?e.height*o:i.total*this.heightOracle.charWidth*o}updateLineGaps(e){Ip.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=pt.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Qt.spans(e,this.viewport.from,this.viewport.to,{span(i,o){t.push({from:i,to:o})},point(){}},20);let r=t.length!=this.visibleRanges.length||this.visibleRanges.some((i,o)=>i.from!=t[o].from||i.to!=t[o].to);return this.visibleRanges=t,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Dl(this.heightMap.lineAt(e,fn.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return Dl(this.heightMap.lineAt(this.scaler.fromDOM(e),fn.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return Dl(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Cc{constructor(e,t){this.from=e,this.to=t}}function CB(n,e,t){let r=[],i=n,o=0;return Qt.spans(t,n,e,{span(){},point(s,a){s>i&&(r.push({from:i,to:s}),o+=s-i),i=a}},20),i<e&&(r.push({from:i,to:e}),o+=e-i),{total:o,ranges:r}}function kc({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:o,to:s}=e[i],a=s-o;if(r<=a)return o+r;r-=a}}function $1(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}function eb(n,e,t){for(let r=0;r<n.length;r++){let i=n[r];if(i.from<t&&i.to>e){let o=[];i.from<e&&o.push({from:i.from,to:e}),i.to>t&&o.push({from:t,to:i.to}),n.splice(r,1,...o),r+=o.length-1}}}function kB(n,e){for(let t of n)if(e(t))return t}const tb={toDOM(n){return n},fromDOM(n){return n},scale:1};class OB{constructor(e,t,r){let i=0,o=0,s=0;this.viewports=r.map(({from:a,to:l})=>{let u=t.lineAt(a,fn.ByPos,e,0,0).top,c=t.lineAt(l,fn.ByPos,e,0,0).bottom;return i+=c-u,{from:a,to:l,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let a of this.viewports)a.domTop=s+(a.top-o)*this.scale,s=a.domBottom=a.domTop+(a.bottom-a.top),o=a.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return i+(e-r)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);r=o.bottom,i=o.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return r+(e-i)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);r=o.bottom,i=o.domBottom}}}function Dl(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new Uo(n.from,n.length,t,r-t,Array.isArray(n.type)?n.type.map(i=>Dl(i,e)):n.type)}const Oc=at.define({combine:n=>n.join(" ")}),Dg=at.define({combine:n=>n.indexOf(!0)>-1}),Lg=Qo.newName(),LT=Qo.newName(),jT=Qo.newName(),BT={"&light":"."+LT,"&dark":"."+jT};function jg(n,e,t){return new Qo(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r}})}const TB=jg("."+Lg,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},BT),PB={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Ap=st.ie&&st.ie_version<=11;class IB{constructor(e,t,r){this.view=e,this.onChange=t,this.onScrollChanged=r,this.active=!1,this.selectionRange=new Pj,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(i=>{for(let o of i)this.queue.push(o);(st.ie&&st.ie_version<=11||st.ios&&e.composing)&&i.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),Ap&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),this.win=e.dom.ownerDocument.defaultView,this.addWindowListeners(this.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(i=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),i.length>0&&i[i.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(i=>{i.length>0&&i[i.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,r=this.selectionRange;if(t.state.facet(Md)?t.root.activeElement!=this.dom:!Hf(t.dom,r))return;let i=r.anchorNode&&t.docView.nearest(r.anchorNode);i&&i.ignoreEvent(e)||((st.ie&&st.ie_version<=11||st.android&&st.chrome)&&!t.state.selection.main.empty&&r.focusNode&&wh(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{view:e}=this,t=st.safari&&e.root.nodeType==11&&kj()==this.dom&&AB(this.view)||bh(e.root);if(!t||this.selectionRange.eq(t))return!1;let r=Hf(this.dom,t);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Aj(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,PB),Ap&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),Ap&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame(()=>{let r=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,this.flush()||Yl(this.dom,r.key,r.keyCode)}),(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout(()=>{this.delayedFlush=-1,this.flush()},20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let e=this.queue;for(let o of this.observer.takeRecords())e.push(o);e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let o of e){let s=this.readMutation(o);!s||(s.typeOver&&(i=!0),t==-1?{from:t,to:r}=s:(t=Math.min(s.from,t),r=Math.max(s.to,r)))}return{from:t,to:r,typeOver:i}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:r,typeOver:i}=this.processRecords(),o=this.selectionChanged&&Hf(this.dom,this.selectionRange);if(t<0&&!o)return;this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=this.view.state,a=this.onChange(t,r,i);return this.view.state==s&&this.view.update([]),a}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let r=nb(t,e.previousSibling||e.target.previousSibling,-1),i=nb(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resize)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function nb(n,e,t){for(;e;){let r=vn.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function AB(n){let e=null;function t(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(n.contentDOM.addEventListener("beforeinput",t,!0),document.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let r=e.startContainer,i=e.startOffset,o=e.endContainer,s=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor);return wh(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}function RB(n,e,t,r){let i,o,s=n.state.selection.main;if(e>-1){let a=n.docView.domBoundsAround(e,t,0);if(!a||n.state.readOnly)return!1;let{from:l,to:u}=a,c=n.docView.impreciseHead||n.docView.impreciseAnchor?[]:NB(n),f=new CT(c,n.state);f.readRange(a.startDOM,a.endDOM);let d=s.from,g=null;(n.inputState.lastKeyCode===8&&n.inputState.lastKeyTime>Date.now()-100||st.android&&f.text.length<u-l)&&(d=s.to,g="end");let h=xB(n.state.doc.sliceString(l,u,Fo),f.text,d-l,g);h&&(st.chrome&&n.inputState.lastKeyCode==13&&h.toB==h.from+2&&f.text.slice(h.from,h.toB)==Fo+Fo&&h.toB--,i={from:l+h.from,to:l+h.toA,insert:tn.of(f.text.slice(h.from,h.toB).split(Fo))}),o=MB(c,l)}else if(n.hasFocus||!n.state.facet(Md)){let a=n.observer.selectionRange,{impreciseHead:l,impreciseAnchor:u}=n.docView,c=l&&l.node==a.focusNode&&l.offset==a.focusOffset||!Ma(n.contentDOM,a.focusNode)?n.state.selection.main.head:n.docView.posFromDOM(a.focusNode,a.focusOffset),f=u&&u.node==a.anchorNode&&u.offset==a.anchorOffset||!Ma(n.contentDOM,a.anchorNode)?n.state.selection.main.anchor:n.docView.posFromDOM(a.anchorNode,a.anchorOffset);(c!=s.head||f!=s.anchor)&&(o=Le.single(f,c))}if(!i&&!o)return!1;if(!i&&r&&!s.empty&&o&&o.main.empty?i={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:i&&i.from>=s.from&&i.to<=s.to&&(i.from!=s.from||i.to!=s.to)&&s.to-s.from-(i.to-i.from)<=4?i={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,i.from).append(i.insert).append(n.state.doc.slice(i.to,s.to))}:(st.mac||st.android)&&i&&i.from==i.to&&i.from==s.head-1&&i.insert.toString()=="."&&(i={from:s.from,to:s.to,insert:tn.of([" "])}),i){let a=n.state;if(st.ios&&n.inputState.flushIOSKey(n)||st.android&&(i.from==s.from&&i.to==s.to&&i.insert.length==1&&i.insert.lines==2&&Yl(n.contentDOM,"Enter",13)||i.from==s.from-1&&i.to==s.to&&i.insert.length==0&&Yl(n.contentDOM,"Backspace",8)||i.from==s.from&&i.to==s.to+1&&i.insert.length==0&&Yl(n.contentDOM,"Delete",46)))return!0;let l=i.insert.toString();if(n.state.facet(mT).some(f=>f(n,i.from,i.to,l)))return!0;n.inputState.composing>=0&&n.inputState.composing++;let u;if(i.from>=s.from&&i.to<=s.to&&i.to-i.from>=(s.to-s.from)/3&&(!o||o.main.empty&&o.main.from==i.from+i.insert.length)&&n.inputState.composing<0){let f=s.from<i.from?a.sliceDoc(s.from,i.from):"",d=s.to>i.to?a.sliceDoc(i.to,s.to):"";u=a.replaceSelection(n.state.toText(f+i.insert.sliceString(0,void 0,n.state.lineBreak)+d))}else{let f=a.changes(i),d=o&&!a.selection.main.eq(o.main)&&o.main.to<=f.newLength?o.main:void 0;if(a.selection.ranges.length>1&&n.inputState.composing>=0&&i.to<=s.to&&i.to>=s.to-10){let g=n.state.sliceDoc(i.from,i.to),h=kT(n)||n.state.doc.lineAt(s.head),v=s.to-i.to,m=s.to-s.from;u=a.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:f,range:d||p.map(f)};let y=p.to-v,b=y-g.length;if(p.to-p.from!=m||n.state.sliceDoc(b,y)!=g||h&&p.to>=h.from&&p.from<=h.to)return{range:p};let _=a.changes({from:b,to:y,insert:i.insert}),w=p.to-s.to;return{changes:_,range:d?Le.range(Math.max(0,d.anchor+w),Math.max(0,d.head+w)):p.map(_)}})}else u={changes:f,selection:d&&a.selection.replaceRange(d)}}let c="input.type";return n.composing&&(c+=".compose",n.inputState.compositionFirstChange&&(c+=".start",n.inputState.compositionFirstChange=!1)),n.dispatch(u,{scrollIntoView:!0,userEvent:c}),!0}else if(o&&!o.main.eq(s)){let a=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),l=n.inputState.lastSelectionOrigin),n.dispatch({selection:o,scrollIntoView:a,userEvent:l}),!0}else return!1}function xB(n,e,t,r){let i=Math.min(n.length,e.length),o=0;for(;o<i&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==i&&n.length==e.length)return null;let s=n.length,a=e.length;for(;s>0&&a>0&&n.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;if(r=="end"){let l=Math.max(0,o-Math.min(s,a));t-=s+l-o}return s<o&&n.length<e.length?(o-=t<=o&&t>=s?o-t:0,a=o+(a-s),s=o):a<o&&(o-=t<=o&&t>=a?o-t:0,s=o+(s-a),a=o),{from:o,toA:s,toB:a}}function NB(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new M1(t,r)),(i!=t||o!=r)&&e.push(new M1(i,o))),e}function MB(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?Le.single(t+e,r+e):null}class ut{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=e.root||Ij(e.parent)||document,this.viewState=new X1(e.state||jt.create(e)),this.plugins=this.state.facet(Nl).map(t=>new Op(t));for(let t of this.plugins)t.update(this);this.observer=new IB(this,(t,r,i)=>RB(this,t,r,i),t=>{this.inputState.runScrollHandlers(this,t),this.observer.intersecting&&this.measure()}),this.inputState=new rB(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new D1(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof zn?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,i,o=this.state;for(let a of e){if(a.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=a.state}if(this.destroyed){this.viewState.state=o;return}if(this.observer.clear(),o.facet(jt.phrases)!=this.state.facet(jt.phrases))return this.setState(o);i=Ch.create(this,o,e);let s=this.viewState.scrollTarget;try{this.updateState=2;for(let a of e){if(s&&(s=s.map(a.changes)),a.scrollIntoView){let{main:l}=a.state.selection;s=new Eh(l.empty?l:Le.cursor(l.head,l.head>l.anchor?-1:1))}for(let l of a.effects)l.is(x1)&&(s=l.value)}this.viewState.update(i,s),this.bidiCache=kh.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(Ml)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(a=>a.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Oc)!=i.state.facet(Oc)&&(this.viewState.mustMeasureContent=!0),(t||r||s||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let a of this.state.facet(Ig))a(i)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new X1(e),this.plugins=e.facet(Nl).map(r=>new Op(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView=new D1(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Nl),r=e.state.facet(Nl);if(t!=r){let i=[];for(let o of r){let s=t.indexOf(o);if(s<0)i.push(new Op(o));else{let a=this.plugins[s];a.mustUpdate=e,i.push(a)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,{scrollHeight:r,scrollTop:i,clientHeight:o}=this.scrollDOM,s=i>r-o-4?r:i;try{for(let a=0;;a++){this.updateState=1;let l=this.viewport,u=this.viewState.lineBlockAtHeight(s),c=this.viewState.measure(this);if(!c&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let f=[];c&4||([this.measureRequests,f]=[f,this.measureRequests]);let d=f.map(m=>{try{return m.read(this)}catch(p){return Kr(this.state,p),rb}}),g=Ch.create(this,this.state,[]),h=!1,v=!1;g.flags|=c,t?t.flags|=c:t=g,this.updateState=2,g.empty||(this.updatePlugins(g),this.inputState.update(g),this.updateAttrs(),h=this.docView.update(g));for(let m=0;m<f.length;m++)if(d[m]!=rb)try{let p=f[m];p.write&&p.write(d[m],this)}catch(p){Kr(this.state,p)}if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,v=!0;else{let m=this.viewState.lineBlockAt(u.from).top-u.top;(m>1||m<-1)&&(this.scrollDOM.scrollTop+=m,v=!0)}if(h&&this.docView.updateSelection(!0),this.viewport.from==l.from&&this.viewport.to==l.to&&!v&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(Ig))a(t)}get themeClasses(){return Lg+" "+(this.state.facet(Dg)?jT:LT)+" "+this.state.facet(Oc)}updateAttrs(){let e=ib(this,vT,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Md)?"true":"false",class:"cm-content",style:`${st.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),ib(this,yT,t);let r=this.observer.ignore(()=>{let i=Tg(this.contentDOM,this.contentAttrs,t),o=Tg(this.dom,this.editorAttrs,e);return i||o});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let i of r.effects)if(i.is(ut.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Ml),Qo.mount(this.root,this.styleModules.concat(TB).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return Pp(this,e,V1(this,e,t,r))}moveByGroup(e,t){return Pp(this,e,V1(this,e,t,r=>tB(this,e.head,r)))}moveToLineBoundary(e,t,r=!0){return eB(this,e,t,r)}moveVertically(e,t,r){return Pp(this,e,nB(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),TT(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),o=this.bidiSpans(i),s=o[wa.find(o,e-i.from,-1,t)];return Rd(r,s.dir==wn.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(gT)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>DB)return ST(e.length);let t=this.textDirectionAt(e.from);for(let i of this.bidiCache)if(i.from==e.from&&i.dir==t)return i.order;let r=Uj(e.text,t);return this.bidiCache.push(new kh(e.from,e.to,t,r)),r}get hasFocus(){var e;return(document.hasFocus()||st.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{XO(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return x1.of(new Eh(typeof e=="number"?Le.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Fn.define(()=>({}),{eventHandlers:e})}static theme(e,t){let r=Qo.newName(),i=[Oc.of(r),Ml.of(jg(`.${r}`,e))];return t&&t.dark&&i.push(Dg.of(!0)),i}static baseTheme(e){return il.lowest(Ml.of(jg("."+Lg,e,BT)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&vn.get(r)||vn.get(e);return((t=i==null?void 0:i.rootView)===null||t===void 0?void 0:t.view)||null}}ut.styleModule=Ml;ut.inputHandler=mT;ut.perLineTextDirection=gT;ut.exceptionSink=pT;ut.updateListener=Ig;ut.editable=Md;ut.mouseSelectionStyle=dT;ut.dragMovesSelection=hT;ut.clickAddsSelectionRange=fT;ut.decorations=gu;ut.atomicRanges=_T;ut.scrollMargins=bT;ut.darkTheme=Dg;ut.contentAttributes=yT;ut.editorAttributes=vT;ut.lineWrapping=ut.contentAttributes.of({class:"cm-lineWrapping"});ut.announce=Pt.define();const DB=4096,rb={};class kh{constructor(e,t,r,i){this.from=e,this.to=t,this.dir=r,this.order=i}static update(e,t){if(t.empty)return e;let r=[],i=e.length?e[e.length-1].dir:wn.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let s=e[o];s.dir==i&&!t.touchesRange(s.from,s.to)&&r.push(new kh(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.order))}return r}}function ib(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let o=r[i],s=typeof o=="function"?o(n):o;s&&Og(s,t)}return t}const LB=st.mac?"mac":st.windows?"win":st.linux?"linux":"key";function jB(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let i,o,s,a;for(let l=0;l<t.length-1;++l){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))o=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),o&&(r="Ctrl-"+r),a&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function Tc(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const BB=il.default(ut.domEventHandlers({keydown(n,e){return UT(FT(e.state),n,e,"editor")}})),Dd=at.define({enables:BB}),ob=new WeakMap;function FT(n){let e=n.facet(Dd),t=ob.get(e);return t||ob.set(e,t=VB(e.reduce((r,i)=>r.concat(i),[]))),t}function FB(n,e,t){return UT(FT(n.state),e,n,t)}let xo=null;const UB=4e3;function VB(n,e=LB){let t=Object.create(null),r=Object.create(null),i=(s,a)=>{let l=r[s];if(l==null)r[s]=a;else if(l!=a)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,a,l,u)=>{let c=t[s]||(t[s]=Object.create(null)),f=a.split(/ (?!$)/).map(h=>jB(h,e));for(let h=1;h<f.length;h++){let v=f.slice(0,h).join(" ");i(v,!0),c[v]||(c[v]={preventDefault:!0,commands:[m=>{let p=xo={view:m,prefix:v,scope:s};return setTimeout(()=>{xo==p&&(xo=null)},UB),!0}]})}let d=f.join(" ");i(d,!1);let g=c[d]||(c[d]={preventDefault:!1,commands:[]});g.commands.push(l),u&&(g.preventDefault=!0)};for(let s of n){let a=s[e]||s.key;if(!!a)for(let l of s.scope?s.scope.split(" "):["editor"])o(l,a,s.run,s.preventDefault),s.shift&&o(l,"Shift-"+a,s.shift,s.preventDefault)}return t}function UT(n,e,t,r){let i=Cj(e),o=tr(i,0),s=Vr(o)==i.length&&i!=" ",a="",l=!1;xo&&xo.view==t&&xo.scope==r&&(a=xo.prefix+" ",(l=IT.indexOf(e.keyCode)<0)&&(xo=null));let u=d=>{if(d){for(let g of d.commands)if(g(t))return!0;d.preventDefault&&(l=!0)}return!1},c=n[r],f;if(c){if(u(c[a+Tc(i,e,!s)]))return!0;if(s&&(e.shiftKey||e.altKey||e.metaKey||o>127)&&(f=Zo[e.keyCode])&&f!=i){if(u(c[a+Tc(f,e,!0)]))return!0;if(e.shiftKey&&Na[e.keyCode]!=f&&u(c[a+Tc(Na[e.keyCode],e,!1)]))return!0}else if(s&&e.shiftKey&&u(c[a+Tc(i,e,!0)]))return!0}return l}const VT=!st.ios,Ll=at.define({combine(n){return Qi(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function qB(n={}){return[Ll.of(n),HB,zB]}class qT{constructor(e,t,r,i,o){this.left=e,this.top=t,this.width=r,this.height=i,this.className=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const HB=Fn.fromClass(class{constructor(n){this.view=n,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=n.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=n.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),n.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(Ll).cursorBlinkRate+"ms"}update(n){let e=n.startState.facet(Ll)!=n.state.facet(Ll);(e||n.selectionSet||n.geometryChanged||n.viewportChanged)&&this.view.requestMeasure(this.measureReq),n.transactions.some(t=>t.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),e&&this.setBlinkRate()}readPos(){let{state:n}=this.view,e=n.facet(Ll),t=n.selection.ranges.map(i=>i.empty?[]:WB(this.view,i)).reduce((i,o)=>i.concat(o)),r=[];for(let i of n.selection.ranges){let o=i==n.selection.main;if(i.empty?!o||VT:e.drawRangeCursor){let s=KB(this.view,i,o);s&&r.push(s)}}return{rangePieces:t,cursors:r}}drawSel({rangePieces:n,cursors:e}){if(n.length!=this.rangePieces.length||n.some((t,r)=>!t.eq(this.rangePieces[r]))){this.selectionLayer.textContent="";for(let t of n)this.selectionLayer.appendChild(t.draw());this.rangePieces=n}if(e.length!=this.cursors.length||e.some((t,r)=>!t.eq(this.cursors[r]))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(const r of e)this.cursorLayer.appendChild(r.draw())}else e.forEach((r,i)=>r.adjust(t[i]));this.cursors=e}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),HT={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};VT&&(HT[".cm-line"].caretColor="transparent !important");const zB=il.highest(ut.theme(HT));function zT(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==wn.LTR?e.left:e.right-n.scrollDOM.clientWidth)-n.scrollDOM.scrollLeft,top:e.top-n.scrollDOM.scrollTop}}function sb(n,e,t){let r=Le.cursor(e);return{from:Math.max(t.from,n.moveToLineBoundary(r,!1,!0).from),to:Math.min(t.to,n.moveToLineBoundary(r,!0,!0).from),type:un.Text}}function ab(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let r of t.type)if(r.to>e||r.to==e&&(r.to==t.to||r.type==un.Text))return r}return t}function WB(n,e){if(e.to<=n.viewport.from||e.from>=n.viewport.to)return[];let t=Math.max(e.from,n.viewport.from),r=Math.min(e.to,n.viewport.to),i=n.textDirection==wn.LTR,o=n.contentDOM,s=o.getBoundingClientRect(),a=zT(n),l=window.getComputedStyle(o.firstChild),u=s.left+parseInt(l.paddingLeft)+Math.min(0,parseInt(l.textIndent)),c=s.right-parseInt(l.paddingRight),f=ab(n,t),d=ab(n,r),g=f.type==un.Text?f:null,h=d.type==un.Text?d:null;if(n.lineWrapping&&(g&&(g=sb(n,t,g)),h&&(h=sb(n,r,h))),g&&h&&g.from==h.from)return m(p(e.from,e.to,g));{let b=g?p(e.from,null,g):y(f,!1),_=h?p(null,e.to,h):y(d,!0),w=[];return(g||f).to<(h||d).from-1?w.push(v(u,b.bottom,c,_.top)):b.bottom<_.top&&n.elementAtHeight((b.bottom+_.top)/2).type==un.Text&&(b.bottom=_.top=(b.bottom+_.top)/2),m(b).concat(w).concat(m(_))}function v(b,_,w,S){return new qT(b-a.left,_-a.top-.01,w-b,S-_+.01,"cm-selectionBackground")}function m({top:b,bottom:_,horizontal:w}){let S=[];for(let E=0;E<w.length;E+=2)S.push(v(w[E],b,w[E+1],_));return S}function p(b,_,w){let S=1e9,E=-1e9,O=[];function R(B,H,L,N,U){let $=n.coordsAtPos(B,B==w.to?-2:2),Z=n.coordsAtPos(L,L==w.from?2:-2);S=Math.min($.top,Z.top,S),E=Math.max($.bottom,Z.bottom,E),U==wn.LTR?O.push(i&&H?u:$.left,i&&N?c:Z.right):O.push(!i&&N?u:Z.left,!i&&H?c:$.right)}let D=b!=null?b:w.from,F=_!=null?_:w.to;for(let B of n.visibleRanges)if(B.to>D&&B.from<F)for(let H=Math.max(B.from,D),L=Math.min(B.to,F);;){let N=n.state.doc.lineAt(H);for(let U of n.bidiSpans(N)){let $=U.from+N.from,Z=U.to+N.from;if($>=L)break;Z>H&&R(Math.max($,H),b==null&&$<=D,Math.min(Z,L),_==null&&Z>=F,U.dir)}if(H=N.to+1,H>=L)break}return O.length==0&&R(D,b==null,F,_==null,n.textDirection),{top:S,bottom:E,horizontal:O}}function y(b,_){let w=s.top+(_?b.top:b.bottom);return{top:w,bottom:w,horizontal:[]}}}function KB(n,e,t){let r=n.coordsAtPos(e.head,e.assoc||1);if(!r)return null;let i=zT(n);return new qT(r.left-i.left,r.top-i.top,-1,r.bottom-r.top,t?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const WT=Pt.define({map(n,e){return n==null?null:e.mapPos(n)}}),jl=Wn.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,r)=>r.is(WT)?r.value:t,n)}}),GB=Fn.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(jl);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(jl)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let n=this.view.state.field(jl),e=n!=null&&this.view.coordsAtPos(n);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(n){this.cursor&&(n?(this.cursor.style.left=n.left+"px",this.cursor.style.top=n.top+"px",this.cursor.style.height=n.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(jl)!=n&&this.view.dispatch({effects:WT.of(n)})}},{eventHandlers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function JB(){return[jl,GB]}function lb(n,e,t,r,i){e.lastIndex=0;for(let o=n.iterRange(t,r),s=t,a;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=e.exec(o.value);)i(s+a.index,a)}function YB(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let r=[];for(let{from:i,to:o}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}class QB{constructor(e){const{regexp:t,decoration:r,decorate:i,boundary:o,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(a,l,u,c)=>i(c,u,u+a[0].length,a,l);else if(r){let a=typeof r=="function"?r:()=>r;this.addMatch=(l,u,c,f)=>f(c,c+l[0].length,a(l,u,c))}else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(e){let t=new Yo,r=t.add.bind(t);for(let{from:i,to:o}of YB(e,this.maxLength))lb(e.state.doc,this.regexp,i,o,(s,a)=>this.addMatch(a,e,s,r));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((o,s,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let o of e.visibleRanges){let s=Math.max(o.from,r),a=Math.min(o.to,i);if(a>s){let l=e.state.doc.lineAt(s),u=l.to<a?e.state.doc.lineAt(a):l,c=Math.max(o.from,l.from),f=Math.min(o.to,u.to);if(this.boundary){for(;s>l.from;s--)if(this.boundary.test(l.text[s-1-l.from])){c=s;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){f=a;break}}let d=[],g,h=(v,m,p)=>d.push(p.range(v,m));if(l==u)for(this.regexp.lastIndex=c-l.from;(g=this.regexp.exec(l.text))&&g.index<f-l.from;)this.addMatch(g,e,g.index+l.from,h);else lb(e.state.doc,this.regexp,c,f,(v,m)=>this.addMatch(m,e,v,h));t=t.update({filterFrom:c,filterTo:f,filter:(v,m)=>v<c||m>f,add:d})}}return t}}const Bg=/x/.unicode!=null?"gu":"g",ZB=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,Bg),XB={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Rp=null;function $B(){var n;if(Rp==null&&typeof document<"u"&&document.body){let e=document.body.style;Rp=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return Rp||!1}const Wf=at.define({combine(n){let e=Qi(n,{render:null,specialChars:ZB,addSpecialChars:null});return(e.replaceTabs=!$B())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Bg)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Bg)),e}});function e7(n={}){return[Wf.of(n),t7()]}let ub=null;function t7(){return ub||(ub=Fn.fromClass(class{constructor(n){this.view=n,this.decorations=pt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(Wf)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new QB({regexp:n.specialChars,decoration:(e,t,r)=>{let{doc:i}=t.state,o=tr(e[0],0);if(o==9){let s=i.lineAt(r),a=t.state.tabSize,l=Fu(s.text,a,r-s.from);return pt.replace({widget:new o7((a-l%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=pt.replace({widget:new i7(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(Wf);n.startState.facet(Wf)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const n7="\u2022";function r7(n){return n>=32?n7:n==10?"\u2424":String.fromCharCode(9216+n)}class i7 extends os{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=r7(this.code),r=e.state.phrase("Control character")+" "+(XB[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let o=document.createElement("span");return o.textContent=t,o.title=r,o.setAttribute("aria-label",r),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class o7 extends os{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function s7(){return l7}const a7=pt.line({class:"cm-activeLine"}),l7=Fn.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){if(!r.empty)return pt.none;let i=n.lineBlockAt(r.head);i.from>e&&(t.push(a7.range(i.from)),e=i.from)}return pt.set(t)}},{decorations:n=>n.decorations}),Fg=2e3;function u7(n,e,t){let r=Math.min(e.line,t.line),i=Math.max(e.line,t.line),o=[];if(e.off>Fg||t.off>Fg||e.col<0||t.col<0){let s=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let l=r;l<=i;l++){let u=n.doc.line(l);u.length<=a&&o.push(Le.range(u.from+s,u.to+a))}}else{let s=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let l=r;l<=i;l++){let u=n.doc.line(l),c=yg(u.text,s,n.tabSize,!0);if(c>-1){let f=yg(u.text,a,n.tabSize);o.push(Le.range(u.from+c,u.from+f))}}}return o}function c7(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function cb(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),r=n.state.doc.lineAt(t),i=t-r.from,o=i>Fg?-1:i==r.length?c7(n,e.clientX):Fu(r.text,n.state.tabSize,t-r.from);return{line:r.number,col:o,off:i}}function f7(n,e){let t=cb(n,e),r=n.state.selection;return t?{update(i){if(i.docChanged){let o=i.changes.mapPos(i.startState.doc.line(t.line).from),s=i.state.doc.lineAt(o);t={line:s.number,col:t.col,off:Math.min(t.off,s.length)},r=r.map(i.changes)}},get(i,o,s){let a=cb(n,i);if(!a)return r;let l=u7(n.state,t,a);return l.length?s?Le.create(l.concat(r.ranges)):Le.create(l):r}}:null}function h7(n){let e=(n==null?void 0:n.eventFilter)||(t=>t.altKey&&t.button==0);return ut.mouseSelectionStyle.of((t,r)=>e(r)?f7(t,r):null)}const d7={Alt:[18,n=>n.altKey],Control:[17,n=>n.ctrlKey],Shift:[16,n=>n.shiftKey],Meta:[91,n=>n.metaKey]},p7={style:"cursor: crosshair"};function m7(n={}){let[e,t]=d7[n.key||"Alt"],r=Fn.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventHandlers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)}}});return[r,ut.contentAttributes.of(i=>{var o;return!((o=i.plugin(r))===null||o===void 0)&&o.isDown?p7:null})]}const xp="-10000px";class KT{constructor(e,t,r){this.facet=t,this.createTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(i=>i),this.tooltipViews=this.tooltips.map(r)}update(e){let t=e.state.facet(this.facet),r=t.filter(o=>o);if(t===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let i=[];for(let o=0;o<r.length;o++){let s=r[o],a=-1;if(!!s){for(let l=0;l<this.tooltips.length;l++){let u=this.tooltips[l];u&&u.create==s.create&&(a=l)}if(a<0)i[o]=this.createTooltipView(s);else{let l=i[o]=this.tooltipViews[a];l.update&&l.update(e)}}}for(let o of this.tooltipViews)i.indexOf(o)<0&&o.dom.remove();return this.input=t,this.tooltips=r,this.tooltipViews=i,!0}}function g7(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}const Np=at.define({combine:n=>{var e,t,r;return{position:st.ios?"absolute":((e=n.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((r=n.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||g7}}}),GT=Fn.fromClass(class{constructor(n){var e;this.view=n,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=n.state.facet(Np);this.position=t.position,this.parent=t.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new KT(n,Ld,r=>this.createTooltip(r)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(r=>{Date.now()>this.lastTransaction-50&&r.length>0&&r[r.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),(e=n.dom.ownerDocument.defaultView)===null||e===void 0||e.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(Np);if(r.position!=this.position){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n){let e=n.create(this.view);if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=xp,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var n,e;(n=this.view.dom.ownerDocument.defaultView)===null||n===void 0||n.removeEventListener("resize",this.measureSoon);for(let{dom:t}of this.manager.tooltipViews)t.remove();(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect();return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((e,t)=>{let r=this.manager.tooltipViews[t];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(Np).tooltipSpace(this.view)}}writeMeasure(n){let{editor:e,space:t}=n,r=[];for(let i=0;i<this.manager.tooltips.length;i++){let o=this.manager.tooltips[i],s=this.manager.tooltipViews[i],{dom:a}=s,l=n.pos[i],u=n.size[i];if(!l||l.bottom<=Math.max(e.top,t.top)||l.top>=Math.min(e.bottom,t.bottom)||l.right<Math.max(e.left,t.left)-.1||l.left>Math.min(e.right,t.right)+.1){a.style.top=xp;continue}let c=o.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,f=c?7:0,d=u.right-u.left,g=u.bottom-u.top,h=s.offset||y7,v=this.view.textDirection==wn.LTR,m=u.width>t.right-t.left?v?t.left:t.right-u.width:v?Math.min(l.left-(c?14:0)+h.x,t.right-d):Math.max(t.left,l.left-d+(c?14:0)-h.x),p=!!o.above;!o.strictSide&&(p?l.top-(u.bottom-u.top)-h.y<t.top:l.bottom+(u.bottom-u.top)+h.y>t.bottom)&&p==t.bottom-l.bottom>l.top-t.top&&(p=!p);let y=p?l.top-g-f-h.y:l.bottom+f+h.y,b=m+d;if(s.overlap!==!0)for(let _ of r)_.left<b&&_.right>m&&_.top<y+g&&_.bottom>y&&(y=p?_.top-g-2-f:_.bottom+f+2);this.position=="absolute"?(a.style.top=y-n.parent.top+"px",a.style.left=m-n.parent.left+"px"):(a.style.top=y+"px",a.style.left=m+"px"),c&&(c.style.left=`${l.left+(v?h.x:-h.x)-(m+14-7)}px`),s.overlap!==!0&&r.push({left:m,top:y,right:b,bottom:y+g}),a.classList.toggle("cm-tooltip-above",p),a.classList.toggle("cm-tooltip-below",!p),s.positioned&&s.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=xp}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),v7=ut.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),y7={x:0,y:0},Ld=at.define({enables:[GT,v7]}),Oh=at.define();class hv{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new KT(e,Oh,t=>this.createHostedView(t))}static create(e){return new hv(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}}const _7=Ld.compute([Oh],n=>{let e=n.facet(Oh).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:hv.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class b7{constructor(e,t,r,i,o){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(t==null)return;let r=this.view.coordsAtPos(t);if(r==null||e.y<r.top||e.y>r.bottom||e.x<r.left-this.view.defaultCharacterWidth||e.x>r.right+this.view.defaultCharacterWidth)return;let i=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(a=>a.from<=t&&a.to>=t),o=i&&i.dir==wn.RTL?-1:1,s=this.source(this.view,t,e.x<r.left?-o:o);if(s!=null&&s.then){let a=this.pending={pos:t};s.then(l=>{this.pending==a&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>Kr(this.view.state,l,"hover tooltip"))}else s&&this.view.dispatch({effects:this.setHover.of(s)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let r=this.active;if(r&&!w7(this.lastMove.target)||this.pending){let{pos:i}=r||this.pending,o=(t=r==null?void 0:r.end)!==null&&t!==void 0?t:i;(i==o?this.view.posAtCoords(this.lastMove)!=i:!S7(this.view,i,o,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function w7(n){for(let e=n;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function S7(n,e,t,r,i,o){let s=document.createRange(),a=n.domAtPos(e),l=n.domAtPos(t);s.setEnd(l.node,l.offset),s.setStart(a.node,a.offset);let u=s.getClientRects();s.detach();for(let c=0;c<u.length;c++){let f=u[c];if(Math.max(f.top-i,i-f.bottom,f.left-r,r-f.right)<=o)return!0}return!1}function E7(n,e={}){let t=Pt.define(),r=Wn.define({create(){return null},update(i,o){if(i&&(e.hideOnChange&&(o.docChanged||o.selection)||e.hideOn&&e.hideOn(o,i)))return null;if(i&&o.docChanged){let s=o.changes.mapPos(i.pos,-1,dr.TrackDel);if(s==null)return null;let a=Object.assign(Object.create(null),i);a.pos=s,i.end!=null&&(a.end=o.changes.mapPos(i.end)),i=a}for(let s of o.effects)s.is(t)&&(i=s.value),s.is(k7)&&(i=null);return i},provide:i=>Oh.from(i)});return[r,Fn.define(i=>new b7(i,n,r,t,e.hoverTime||300)),_7]}function C7(n,e){let t=n.plugin(GT);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}const k7=Pt.define(),fb=at.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function vu(n,e){let t=n.plugin(JT),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}const JT=Fn.fromClass(class{constructor(n){this.input=n.state.facet(yu),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(fb);this.top=new Pc(n,!0,e.topContainer),this.bottom=new Pc(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(fb);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Pc(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Pc(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(yu);if(t!=this.input){let r=t.filter(l=>l),i=[],o=[],s=[],a=[];for(let l of r){let u=this.specs.indexOf(l),c;u<0?(c=l(n.view),a.push(c)):(c=this.panels[u],c.update&&c.update(n)),i.push(c),(c.top?o:s).push(c)}this.specs=r,this.panels=i,this.top.sync(o),this.bottom.sync(s);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>ut.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Pc{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=hb(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=hb(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function hb(n){let e=n.nextSibling;return n.remove(),e}const yu=at.define({enables:JT});class Ji extends Ls{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Ji.prototype.elementClass="";Ji.prototype.toDOM=void 0;Ji.prototype.mapMode=dr.TrackBefore;Ji.prototype.startSide=Ji.prototype.endSide=-1;Ji.prototype.point=!0;const Kf=at.define(),O7={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Qt.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Ql=at.define();function YT(n){return[QT(),Ql.of(Object.assign(Object.assign({},O7),n))]}const Ug=at.define({combine:n=>n.some(e=>e)});function QT(n){let e=[T7];return n&&n.fixed===!1&&e.push(Ug.of(!0)),e}const T7=Fn.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(Ql).map(e=>new pb(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(Ug),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Ug)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=Qt.iter(this.view.state.facet(Kf),this.view.viewport.from),r=[],i=this.gutters.map(o=>new P7(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks){let s;if(Array.isArray(o.type)){for(let a of o.type)if(a.type==un.Text){s=a;break}}else s=o.type==un.Text?o:void 0;if(!!s){r.length&&(r=[]),ZT(t,r,o.from);for(let a of i)a.line(this.view,s,r)}}for(let o of i)o.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(Ql),t=n.state.facet(Ql),r=n.docChanged||n.heightChanged||n.viewportChanged||!Qt.eq(n.startState.facet(Kf),n.state.facet(Kf),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let o of t){let s=e.indexOf(o);s<0?i.push(new pb(this.view,o)):(this.gutters[s].update(n),i.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),i.indexOf(o)<0&&o.destroy();for(let o of i)this.dom.appendChild(o.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>ut.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==wn.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}})});function db(n){return Array.isArray(n)?n:[n]}function ZT(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class P7{constructor(e,t,r){this.gutter=e,this.height=r,this.localMarkers=[],this.i=0,this.cursor=Qt.iter(e.markers,t.from)}line(e,t,r){this.localMarkers.length&&(this.localMarkers=[]),ZT(this.cursor,this.localMarkers,t.from);let i=r.length?this.localMarkers.concat(r):this.localMarkers,o=this.gutter.config.lineMarker(e,t,i);o&&i.unshift(o);let s=this.gutter;if(i.length==0&&!s.config.renderEmptyElements)return;let a=t.top-this.height;if(this.i==s.elements.length){let l=new XT(e,t.height,a,i);s.elements.push(l),s.dom.appendChild(l.dom)}else s.elements[this.i].update(e,t.height,a,i);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class pb{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let o=e.lineBlockAtHeight(i.clientY-e.documentTop);t.domEventHandlers[r](e,o,i)&&i.preventDefault()});this.markers=db(t.markers(e)),t.initialSpacer&&(this.spacer=new XT(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=db(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!Qt.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class XT{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),I7(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let o=0,s=0;;){let a=s,l=o<t.length?t[o++]:null,u=!1;if(l){let c=l.elementClass;c&&(r+=" "+c);for(let f=s;f<this.markers.length;f++)if(this.markers[f].compare(l)){a=f,u=!0;break}}else a=this.markers.length;for(;s<a;){let c=this.markers[s++];if(c.toDOM){c.destroy(i);let f=i.nextSibling;i.remove(),i=f}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&s++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function I7(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const A7=at.define(),pa=at.define({combine(n){return Qi(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let o=r[i],s=t[i];r[i]=o?(a,l,u)=>o(a,l,u)||s(a,l,u):s}return r}})}});class Mp extends Ji{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Dp(n,e){return n.state.facet(pa).formatNumber(e,n.state)}const R7=Ql.compute([pa],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(A7)},lineMarker(e,t,r){return r.some(i=>i.toDOM)?null:new Mp(Dp(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:e=>e.startState.facet(pa)!=e.state.facet(pa),initialSpacer(e){return new Mp(Dp(e,mb(e.state.doc.lines)))},updateSpacer(e,t){let r=Dp(t.view,mb(t.view.state.doc.lines));return r==e.number?e:new Mp(r)},domEventHandlers:n.facet(pa).domEventHandlers}));function x7(n={}){return[pa.of(n),QT(),R7]}function mb(n){let e=9;for(;e<n;)e=e*10+9;return e}const N7=new class extends Ji{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},M7=Kf.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges)if(r.empty){let i=n.doc.lineAt(r.head).from;i>t&&(t=i,e.push(N7.range(i)))}return Qt.of(e)});function D7(){return M7}const $T=1024;let L7=0;class Lp{constructor(e,t){this.from=e,this.to=t}}class Bt{constructor(e={}){this.id=L7++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Mr.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}Bt.closedBy=new Bt({deserialize:n=>n.split(" ")});Bt.openedBy=new Bt({deserialize:n=>n.split(" ")});Bt.group=new Bt({deserialize:n=>n.split(" ")});Bt.contextHash=new Bt({perNode:!0});Bt.lookAhead=new Bt({perNode:!0});Bt.mounted=new Bt({perNode:!0});const j7=Object.create(null);class Mr{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):j7,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Mr(e.name||"",t,e.id,r);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(i)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Bt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(Bt.group),o=-1;o<(i?i.length:0);o++){let s=t[o<0?r.name:i[o]];if(s)return s}}}}Mr.none=new Mr("",Object.create(null),0,8);class dv{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let o of e){let s=o(r);s&&(i||(i=Object.assign({},r.props)),i[s[0].id]=s[1])}t.push(i?new Mr(r.name,i,r.id,r.flags):r)}return new dv(t)}}const Ic=new WeakMap,gb=new WeakMap;var rr;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(rr||(rr={}));class jn{constructor(e,t,r,i,o){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,a]of o)this.props[typeof s=="number"?s:s.id]=a}}toString(){let e=this.prop(Bt.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Ih(this.topNode,e)}cursorAt(e,t=0,r=0){let i=Ic.get(this)||this.topNode,o=new Ih(i);return o.moveTo(e,t),Ic.set(this,o._tree),o}get topNode(){return new uo(this,0,0,null)}resolve(e,t=0){let r=ja(Ic.get(this)||this.topNode,e,t,!1);return Ic.set(this,r),r}resolveInner(e,t=0){let r=ja(gb.get(this)||this.topNode,e,t,!0);return gb.set(this,r),r}iterate(e){let{enter:t,leave:r,from:i=0,to:o=this.length}=e;for(let s=this.cursor((e.mode||0)|rr.IncludeAnonymous);;){let a=!1;if(s.from<=o&&s.to>=i&&(s.type.isAnonymous||t(s)!==!1)){if(s.firstChild())continue;a=!0}for(;a&&r&&!s.type.isAnonymous&&r(s),!s.nextSibling();){if(!s.parent())return;a=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:gv(Mr.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new jn(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new jn(Mr.none,t,r,i)))}static build(e){return F7(e)}}jn.empty=new jn(Mr.none,[],[],0);class pv{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new pv(this.buffer,this.index)}}class Ys{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return Mr.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],o=i.name;if(/\W/.test(o)&&!i.isError&&(o=JSON.stringify(o)),e+=4,r==e)return o;let s=[];for(;e<r;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,t,r,i,o){let{buffer:s}=this,a=-1;for(let l=e;l!=t&&!(e4(o,i,s[l+1],s[l+2])&&(a=l,r>0));l=s[l+3]);return a}slice(e,t,r,i){let o=this.buffer,s=new Uint16Array(t-e);for(let a=e,l=0;a<t;)s[l++]=o[a++],s[l++]=o[a++]-r,s[l++]=o[a++]-r,s[l++]=o[a++]-e;return new Ys(s,i-r,this.set)}}function e4(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function t4(n,e){let t=n.childBefore(e);for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(n=t,t=r.prevSibling):t=r}return n}function ja(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let s=!r&&n instanceof uo&&n.index<0?null:n.parent;if(!s)return n;n=s}let o=r?0:rr.IgnoreOverlays;if(r)for(let s=n,a=s.parent;a;s=a,a=s.parent)s instanceof uo&&s.index<0&&((i=a.enter(e,t,o))===null||i===void 0?void 0:i.from)!=s.from&&(n=a);for(;;){let s=n.enter(e,t,o);if(!s)return n;n=s}}class uo{constructor(e,t,r,i){this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,o=0){for(let s=this;;){for(let{children:a,positions:l}=s._tree,u=t>0?a.length:-1;e!=u;e+=t){let c=a[e],f=l[e]+s.from;if(!!e4(i,r,f,f+c.length)){if(c instanceof Ys){if(o&rr.ExcludeBuffers)continue;let d=c.findChild(0,c.buffer.length,t,r-f,i);if(d>-1)return new Vo(new B7(s,c,e,f),null,d)}else if(o&rr.IncludeAnonymous||!c.type.isAnonymous||mv(c)){let d;if(!(o&rr.IgnoreMounts)&&c.props&&(d=c.prop(Bt.mounted))&&!d.overlay)return new uo(d.tree,f,e,s);let g=new uo(c,f,e,s);return o&rr.IncludeAnonymous||!g.type.isAnonymous?g:g.nextChild(t<0?c.children.length-1:0,t,r,i)}}}if(o&rr.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&rr.IgnoreOverlays)&&(i=this._tree.prop(Bt.mounted))&&i.overlay){let o=e-this.from;for(let{from:s,to:a}of i.overlay)if((t>0?s<=o:s<o)&&(t<0?a>=o:a>o))return new uo(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Ih(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return ja(this,e,t,!1)}resolveInner(e,t=0){return ja(this,e,t,!0)}enterUnfinishedNodesBefore(e){return t4(this,e)}getChild(e,t=null,r=null){let i=Th(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return Th(this,e,t,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Ph(this,e)}}function Th(n,e,t,r){let i=n.cursor(),o=[];if(!i.firstChild())return o;if(t!=null){for(;!i.type.is(t);)if(!i.nextSibling())return o}for(;;){if(r!=null&&i.type.is(r))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return r==null?o:[]}}function Ph(n,e,t=e.length-1){for(let r=n.parent;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class B7{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class Vo{constructor(e,t,r){this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,r){let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return o<0?null:new Vo(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&rr.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new Vo(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Vo(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Vo(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Ih(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,o=r.buffer[this.index+3];if(o>i){let s=r.buffer[this.index+1],a=r.buffer[this.index+2];e.push(r.slice(i,o,s,a)),t.push(0)}return new jn(this.type,e,t,this.to-this.from)}resolve(e,t=0){return ja(this,e,t,!1)}resolveInner(e,t=0){return ja(this,e,t,!0)}enterUnfinishedNodesBefore(e){return t4(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,r=null){let i=Th(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return Th(this,e,t,r)}get node(){return this}matchContext(e){return Ph(this,e)}}class Ih{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof uo)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof uo?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,o=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&rr.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&rr.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&rr.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(i.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let o=t+e,s=e<0?-1:r._tree.children.length;o!=s;o+=e){let a=r._tree.children[o];if(this.mode&rr.IncludeAnonymous||a instanceof Ys||!a.type.isAnonymous||mv(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer){e:for(let i=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,r=o+1;break e}i=this.stack[--o]}}for(let i=r;i<this.stack.length;i++)t=new Vo(this.buffer,t,this.stack[i]);return this.bufferNode=new Vo(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Ph(this.node,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,o=this.stack.length-1;i>=0;o--){if(o<0)return Ph(this.node,e,i);let s=r[t.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function mv(n){return n.children.some(e=>e instanceof Ys||!e.type.isAnonymous||mv(e))}function F7(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=$T,reused:o=[],minRepeatType:s=r.types.length}=n,a=Array.isArray(t)?new pv(t,t.length):t,l=r.types,u=0,c=0;function f(_,w,S,E,O){let{id:R,start:D,end:F,size:B}=a,H=c;for(;B<0;)if(a.next(),B==-1){let Z=o[R];S.push(Z),E.push(D-_);return}else if(B==-3){u=R;return}else if(B==-4){c=R;return}else throw new RangeError(`Unrecognized record size: ${B}`);let L=l[R],N,U,$=D-_;if(F-D<=i&&(U=v(a.pos-w,O))){let Z=new Uint16Array(U.size-U.skip),A=a.pos-U.size,P=Z.length;for(;a.pos>A;)P=m(U.start,Z,P);N=new Ys(Z,F-U.start,r),$=U.start-_}else{let Z=a.pos-B;a.next();let A=[],P=[],V=R>=s?R:-1,W=0,z=F;for(;a.pos>Z;)V>=0&&a.id==V&&a.size>=0?(a.end<=z-i&&(g(A,P,D,W,a.end,z,V,H),W=A.length,z=a.end),a.next()):f(D,Z,A,P,V);if(V>=0&&W>0&&W<A.length&&g(A,P,D,W,D,z,V,H),A.reverse(),P.reverse(),V>-1&&W>0){let I=d(L);N=gv(L,A,P,0,A.length,0,F-D,I,I)}else N=h(L,A,P,F-D,H-F)}S.push(N),E.push($)}function d(_){return(w,S,E)=>{let O=0,R=w.length-1,D,F;if(R>=0&&(D=w[R])instanceof jn){if(!R&&D.type==_&&D.length==E)return D;(F=D.prop(Bt.lookAhead))&&(O=S[R]+D.length+F)}return h(_,w,S,E,O)}}function g(_,w,S,E,O,R,D,F){let B=[],H=[];for(;_.length>E;)B.push(_.pop()),H.push(w.pop()+S-O);_.push(h(r.types[D],B,H,R-O,F-R)),w.push(O-S)}function h(_,w,S,E,O=0,R){if(u){let D=[Bt.contextHash,u];R=R?[D].concat(R):[D]}if(O>25){let D=[Bt.lookAhead,O];R=R?[D].concat(R):[D]}return new jn(_,w,S,E,R)}function v(_,w){let S=a.fork(),E=0,O=0,R=0,D=S.end-i,F={size:0,start:0,skip:0};e:for(let B=S.pos-_;S.pos>B;){let H=S.size;if(S.id==w&&H>=0){F.size=E,F.start=O,F.skip=R,R+=4,E+=4,S.next();continue}let L=S.pos-H;if(H<0||L<B||S.start<D)break;let N=S.id>=s?4:0,U=S.start;for(S.next();S.pos>L;){if(S.size<0)if(S.size==-3)N+=4;else break e;else S.id>=s&&(N+=4);S.next()}O=U,E+=H,R+=N}return(w<0||E==_)&&(F.size=E,F.start=O,F.skip=R),F.size>4?F:void 0}function m(_,w,S){let{id:E,start:O,end:R,size:D}=a;if(a.next(),D>=0&&E<s){let F=S;if(D>4){let B=a.pos-(D-4);for(;a.pos>B;)S=m(_,w,S)}w[--S]=F,w[--S]=R-_,w[--S]=O-_,w[--S]=E}else D==-3?u=E:D==-4&&(c=E);return S}let p=[],y=[];for(;a.pos>0;)f(n.start||0,n.bufferStart||0,p,y,-1);let b=(e=n.length)!==null&&e!==void 0?e:p.length?y[0]+p[0].length:0;return new jn(l[n.topID],p.reverse(),y.reverse(),b)}const vb=new WeakMap;function Gf(n,e){if(!n.isAnonymous||e instanceof Ys||e.type!=n)return 1;let t=vb.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof jn)){t=1;break}t+=Gf(n,r)}vb.set(e,t)}return t}function gv(n,e,t,r,i,o,s,a,l){let u=0;for(let h=r;h<i;h++)u+=Gf(n,e[h]);let c=Math.ceil(u*1.5/8),f=[],d=[];function g(h,v,m,p,y){for(let b=m;b<p;){let _=b,w=v[b],S=Gf(n,h[b]);for(b++;b<p;b++){let E=Gf(n,h[b]);if(S+E>=c)break;S+=E}if(b==_+1){if(S>c){let E=h[_];g(E.children,E.positions,0,E.children.length,v[_]+y);continue}f.push(h[_])}else{let E=v[b-1]+h[b-1].length-w;f.push(gv(n,h,v,_,b,w,E,null,l))}d.push(w+y-o)}}return g(e,t,r,i,0),(a||l)(f,d,s)}class Ts{constructor(e,t,r,i,o=!1,s=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new Ts(0,e.length,e,0,!1,r)];for(let o of t)o.to>e.length&&i.push(o);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],o=1,s=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let c=a<t.length?t[a]:null,f=c?c.fromA:1e9;if(f-l>=r)for(;s&&s.from<f;){let d=s;if(l>=d.from||f<=d.to||u){let g=Math.max(d.from,l)-u,h=Math.min(d.to,f)-u;d=g>=h?null:new Ts(g,h,d.tree,d.offset+u,a>0,!!c)}if(d&&i.push(d),s.to>f)break;s=o<e.length?e[o++]:null}if(!c)break;l=c.toA,u=c.toA-c.toB}return i}}class n4{startParse(e,t,r){return typeof e=="string"&&(e=new U7(e)),r=r?r.length?r.map(i=>new Lp(i.from,i.to)):[new Lp(0,0)]:[new Lp(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let o=i.advance();if(o)return o}}}class U7{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Bt({perNode:!0});let V7=0;class ji{constructor(e,t,r){this.set=e,this.base=t,this.modified=r,this.id=V7++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new ji([],null,[]);if(t.set.push(t),e)for(let r of e.set)t.set.push(r);return t}static defineModifier(){let e=new Ah;return t=>t.modified.indexOf(e)>-1?t:Ah.get(t.base||t,t.modified.concat(e).sort((r,i)=>r.id-i.id))}}let q7=0;class Ah{constructor(){this.instances=[],this.id=q7++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(a=>a.base==e&&H7(t,a.modified));if(r)return r;let i=[],o=new ji(i,e,t);for(let a of t)a.instances.push(o);let s=r4(t);for(let a of e.set)for(let l of s)i.push(Ah.get(a,l));return o}}function H7(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function r4(n){let e=[n];for(let t=0;t<n.length;t++)for(let r of r4(n.slice(0,t).concat(n.slice(t+1))))e.push(r);return e}function i4(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let o=[],s=2,a=i;for(let f=0;;){if(a=="..."&&f>0&&f+3==i.length){s=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!d)throw new RangeError("Invalid path: "+i);if(o.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),f+=d[0].length,f==i.length)break;let g=i[f++];if(f==i.length&&g=="!"){s=0;break}if(g!="/")throw new RangeError("Invalid path: "+i);a=i.slice(f)}let l=o.length-1,u=o[l];if(!u)throw new RangeError("Invalid path: "+i);let c=new z7(r,s,l>0?o.slice(0,l):null);e[u]=c.sort(e[u])}}return o4.add(e)}const o4=new Bt;class z7{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function s4(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let s of o.tag)t[s.id]=o.class;let{scope:r,all:i=null}=e||{};return{style:o=>{let s=i;for(let a of o)for(let l of a.set){let u=t[l.id];if(u){s=s?s+" "+u:u;break}}return s},scope:r}}function W7(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function K7(n,e,t,r=0,i=n.length){let o=new G7(r,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),r,i,"",o.highlighters),o.flush(i)}class G7{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,o){let{type:s,from:a,to:l}=e;if(a>=r||l<=t)return;s.isTop&&(o=this.highlighters.filter(g=>!g.scope||g.scope(s)));let u=i,c=s.prop(o4),f=!1;for(;c;){if(!c.context||e.matchContext(c.context)){let g=W7(o,c.tags);g&&(u&&(u+=" "),u+=g,c.mode==1?i+=(i?" ":"")+g:c.mode==0&&(f=!0));break}c=c.next}if(this.startSpan(e.from,u),f)return;let d=e.tree&&e.tree.prop(Bt.mounted);if(d&&d.overlay){let g=e.node.enter(d.overlay[0].from+a,1),h=this.highlighters.filter(m=>!m.scope||m.scope(d.tree.type)),v=e.firstChild();for(let m=0,p=a;;m++){let y=m<d.overlay.length?d.overlay[m]:null,b=y?y.from+a:l,_=Math.max(t,p),w=Math.min(r,b);if(_<w&&v)for(;e.from<w&&(this.highlightRange(e,_,w,i,o),this.startSpan(Math.min(r,e.to),u),!(e.to>=b||!e.nextSibling())););if(!y||b>r)break;p=y.to+a,p>t&&(this.highlightRange(g.cursor(),Math.max(t,y.from+a),Math.min(r,p),i,h),this.startSpan(p,u))}v&&e.parent()}else if(e.firstChild()){do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,o),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}const Je=ji.define,Ac=Je(),Io=Je(),yb=Je(Io),_b=Je(Io),Ao=Je(),Rc=Je(Ao),jp=Je(Ao),Di=Je(),ls=Je(Di),Ai=Je(),Ri=Je(),Vg=Je(),gl=Je(Vg),xc=Je(),Ke={comment:Ac,lineComment:Je(Ac),blockComment:Je(Ac),docComment:Je(Ac),name:Io,variableName:Je(Io),typeName:yb,tagName:Je(yb),propertyName:_b,attributeName:Je(_b),className:Je(Io),labelName:Je(Io),namespace:Je(Io),macroName:Je(Io),literal:Ao,string:Rc,docString:Je(Rc),character:Je(Rc),attributeValue:Je(Rc),number:jp,integer:Je(jp),float:Je(jp),bool:Je(Ao),regexp:Je(Ao),escape:Je(Ao),color:Je(Ao),url:Je(Ao),keyword:Ai,self:Je(Ai),null:Je(Ai),atom:Je(Ai),unit:Je(Ai),modifier:Je(Ai),operatorKeyword:Je(Ai),controlKeyword:Je(Ai),definitionKeyword:Je(Ai),moduleKeyword:Je(Ai),operator:Ri,derefOperator:Je(Ri),arithmeticOperator:Je(Ri),logicOperator:Je(Ri),bitwiseOperator:Je(Ri),compareOperator:Je(Ri),updateOperator:Je(Ri),definitionOperator:Je(Ri),typeOperator:Je(Ri),controlOperator:Je(Ri),punctuation:Vg,separator:Je(Vg),bracket:gl,angleBracket:Je(gl),squareBracket:Je(gl),paren:Je(gl),brace:Je(gl),content:Di,heading:ls,heading1:Je(ls),heading2:Je(ls),heading3:Je(ls),heading4:Je(ls),heading5:Je(ls),heading6:Je(ls),contentSeparator:Je(Di),list:Je(Di),quote:Je(Di),emphasis:Je(Di),strong:Je(Di),link:Je(Di),monospace:Je(Di),strikethrough:Je(Di),inserted:Je(),deleted:Je(),changed:Je(),invalid:Je(),meta:xc,documentMeta:Je(xc),annotation:Je(xc),processingInstruction:Je(xc),definition:ji.defineModifier(),constant:ji.defineModifier(),function:ji.defineModifier(),standard:ji.defineModifier(),local:ji.defineModifier(),special:ji.defineModifier()};s4([{tag:Ke.link,class:"tok-link"},{tag:Ke.heading,class:"tok-heading"},{tag:Ke.emphasis,class:"tok-emphasis"},{tag:Ke.strong,class:"tok-strong"},{tag:Ke.keyword,class:"tok-keyword"},{tag:Ke.atom,class:"tok-atom"},{tag:Ke.bool,class:"tok-bool"},{tag:Ke.url,class:"tok-url"},{tag:Ke.labelName,class:"tok-labelName"},{tag:Ke.inserted,class:"tok-inserted"},{tag:Ke.deleted,class:"tok-deleted"},{tag:Ke.literal,class:"tok-literal"},{tag:Ke.string,class:"tok-string"},{tag:Ke.number,class:"tok-number"},{tag:[Ke.regexp,Ke.escape,Ke.special(Ke.string)],class:"tok-string2"},{tag:Ke.variableName,class:"tok-variableName"},{tag:Ke.local(Ke.variableName),class:"tok-variableName tok-local"},{tag:Ke.definition(Ke.variableName),class:"tok-variableName tok-definition"},{tag:Ke.special(Ke.variableName),class:"tok-variableName2"},{tag:Ke.definition(Ke.propertyName),class:"tok-propertyName tok-definition"},{tag:Ke.typeName,class:"tok-typeName"},{tag:Ke.namespace,class:"tok-namespace"},{tag:Ke.className,class:"tok-className"},{tag:Ke.macroName,class:"tok-macroName"},{tag:Ke.propertyName,class:"tok-propertyName"},{tag:Ke.operator,class:"tok-operator"},{tag:Ke.comment,class:"tok-comment"},{tag:Ke.meta,class:"tok-meta"},{tag:Ke.invalid,class:"tok-invalid"},{tag:Ke.punctuation,class:"tok-punctuation"}]);var Bp;const _u=new Bt;function J7(n){return at.define({combine:n?e=>e.concat(n):void 0})}class bi{constructor(e,t,r=[]){this.data=e,jt.prototype.hasOwnProperty("tree")||Object.defineProperty(jt.prototype,"tree",{get(){return fr(this)}}),this.parser=t,this.extension=[$o.of(this),jt.languageData.of((i,o,s)=>i.facet(bb(i,o,s)))].concat(r)}isActiveAt(e,t,r=-1){return bb(e,t,r)==this.data}findRegions(e){let t=e.facet($o);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(o,s)=>{if(o.prop(_u)==this.data){r.push({from:s,to:s+o.length});return}let a=o.prop(Bt.mounted);if(a){if(a.tree.prop(_u)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+s,to:l.to+s});else r.push({from:s,to:s+o.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+s),r.length>l)return}}for(let l=0;l<o.children.length;l++){let u=o.children[l];u instanceof jn&&i(u,o.positions[l]+s)}};return i(fr(e),0),r}get allowsNesting(){return!0}}bi.setState=Pt.define();function bb(n,e,t){let r=n.facet($o);if(!r)return null;let i=r.data;if(r.allowsNesting)for(let o=fr(n).topNode;o;o=o.enter(e,t,rr.ExcludeBuffers))i=o.type.prop(_u)||i;return i}class Rh extends bi{constructor(e,t){super(e,t),this.parser=t}static define(e){let t=J7(e.languageData);return new Rh(t,e.parser.configure({props:[_u.add(r=>r.isTop?t:void 0)]}))}configure(e){return new Rh(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasWrappers()}}function fr(n){let e=n.field(bi.state,!1);return e?e.tree:jn.empty}class Y7{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let vl=null;class xh{constructor(e,t,r=[],i,o,s,a,l){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=o,this.viewport=s,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new xh(e,t,[],jn.empty,0,r,[],null)}startParse(){return this.parser.startParse(new Y7(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=jn.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Ts.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Ts.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=vl;vl=this;try{return e()}finally{vl=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=wb(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:o,viewport:s,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,c,f,d)=>l.push({fromA:u,toA:c,fromB:f,toB:d})),r=Ts.applyChanges(r,l),i=jn.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),f=e.mapPos(u.to,-1);c<f&&a.push({from:c,to:f})}}}return new xh(this.parser,t,r,i,o,s,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:o}=this.skipped[r];i<e.to&&o>e.from&&(this.fragments=wb(this.fragments,i,o),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends n4{createParse(t,r,i){let o=i[0].from,s=i[i.length-1].to;return{parsedPos:o,advance(){let l=vl;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=s,new jn(Mr.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return vl}}function wb(n,e,t){return Ts.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Ba{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new Ba(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=xh.create(e.facet($o).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new Ba(r)}}bi.state=Wn.define({create:Ba.init,update(n,e){for(let t of e.effects)if(t.is(bi.setState))return t.value;return e.startState.facet($o)!=e.state.facet($o)?Ba.init(e.state):n.apply(e)}});let a4=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(a4=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Fp=typeof navigator<"u"&&((Bp=navigator.scheduling)===null||Bp===void 0?void 0:Bp.isInputPending)?()=>navigator.scheduling.isInputPending():null,Q7=Fn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(bi.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(bi.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=a4(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,o=r.field(bi.state);if(o.tree==o.context.tree&&o.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!Fp?Math.max(25,e.timeRemaining()-5):1e9),a=o.context.treeLen<i&&r.doc.length>i+1e3,l=o.context.work(()=>Fp&&Fp()||Date.now()>s,i+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:bi.setState.of(new Ba(o.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Kr(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),$o=at.define({combine(n){return n.length?n[0]:null},enables:[bi.state,Q7]});class Z7{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const X7=at.define(),jd=at.define({combine:n=>{if(!n.length)return"  ";if(!/^(?: +|\t+)$/.test(n[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return n[0]}});function Nh(n){let e=n.facet(jd);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function bu(n,e){let t="",r=n.tabSize;if(n.facet(jd).charCodeAt(0)==9)for(;e>=r;)t+="	",e-=r;for(let i=0;i<e;i++)t+=" ";return t}function vv(n,e){n instanceof jt&&(n=new Bd(n));for(let r of n.state.facet(X7)){let i=r(n,e);if(i!=null)return i}let t=fr(n.state);return t?$7(n,t,e):null}class Bd{constructor(e,t={}){this.state=e,this.options=t,this.unit=Nh(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:o}=this.options;return i!=null&&i>=r.from&&i<=r.to?o&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),o=this.countColumn(r,e-i),s=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return s>-1&&(o+=s-this.countColumn(r,r.search(/\S|$/))),o}countColumn(e,t=e.length){return Fu(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let s=o(i);if(s>-1)return s}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const l4=new Bt;function $7(n,e,t){return u4(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,n)}function e9(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function t9(n){let e=n.type.prop(l4);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(Bt.closedBy))){let i=n.lastChild,o=i&&r.indexOf(i.name)>-1;return s=>o9(s,!0,1,void 0,o&&!e9(s)?i.from:void 0)}return n.parent==null?n9:null}function u4(n,e,t){for(;n;n=n.parent){let r=t9(n);if(r)return r(yv.create(t,e,n))}return null}function n9(){return 0}class yv extends Bd{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.node=r}static create(e,t,r){return new yv(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(r9(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?u4(e,this.pos,this.base):0}}function r9(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function i9(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),s=i==null||i<=o.from?o.to:Math.min(o.to,i);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<s?t:null;a=l.to}}function o9(n,e,t,r,i){let o=n.textAfter,s=o.match(/^\s*/)[0].length,a=r&&o.slice(s,s+r.length)==r||i==n.pos+s,l=e?i9(n):null;return l?a?n.column(l.from):n.column(l.to):n.baseIndent+(a?0:n.unit*t)}function Sb({except:n,units:e=1}={}){return t=>{let r=n&&n.test(t.textAfter);return t.baseIndent+(r?0:e*t.unit)}}const s9=200;function a9(){return jt.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+s9)return n;let o=t.sliceString(i.from,r);if(!e.some(u=>u.test(o)))return n;let{state:s}=n,a=-1,l=[];for(let{head:u}of s.selection.ranges){let c=s.doc.lineAt(u);if(c.from==a)continue;a=c.from;let f=vv(s,c.from);if(f==null)continue;let d=/^\s*/.exec(c.text)[0],g=bu(s,f);d!=g&&l.push({from:c.from,to:c.from+d.length,insert:g})}return l.length?[n,{changes:l,sequential:!0}]:n})}const l9=at.define(),c4=new Bt;function u9(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function c9(n,e,t){let r=fr(n);if(r.length<t)return null;let i=r.resolveInner(t),o=null;for(let s=i;s;s=s.parent){if(s.to<=t||s.from>t)continue;if(o&&s.from<e)break;let a=s.type.prop(c4);if(a&&(s.to<r.length-50||r.length==n.doc.length||!f9(s))){let l=a(s,n);l&&l.from<=t&&l.from>=e&&l.to>t&&(o=l)}}return o}function f9(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Mh(n,e,t){for(let r of n.facet(l9)){let i=r(n,e,t);if(i)return i}return c9(n,e,t)}function f4(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const Fd=Pt.define({map:f4}),Vu=Pt.define({map:f4});function h4(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const Bs=Wn.define({create(){return pt.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)t.is(Fd)&&!h9(n,t.value.from,t.value.to)?n=n.update({add:[Eb.range(t.value.from,t.value.to)]}):t.is(Vu)&&(n=n.update({filter:(r,i)=>t.value.from!=r||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:r}=e.selection.main;n.between(r,r,(i,o)=>{i<r&&o>r&&(t=!0)}),t&&(n=n.update({filterFrom:r,filterTo:r,filter:(i,o)=>o<=r||i>=r}))}return n},provide:n=>ut.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(r,i)=>{t.push(r,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let r=n[t++],i=n[t++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(Eb.range(r,i))}return pt.set(e,!0)}});function Dh(n,e,t){var r;let i=null;return(r=n.field(Bs,!1))===null||r===void 0||r.between(e,t,(o,s)=>{(!i||i.from>o)&&(i={from:o,to:s})}),i}function h9(n,e,t){let r=!1;return n.between(e,e,(i,o)=>{i==e&&o==t&&(r=!0)}),r}function d4(n,e){return n.field(Bs,!1)?e:e.concat(Pt.appendConfig.of(g4()))}const d9=n=>{for(let e of h4(n)){let t=Mh(n.state,e.from,e.to);if(t)return n.dispatch({effects:d4(n.state,[Fd.of(t),p4(n,t)])}),!0}return!1},p9=n=>{if(!n.state.field(Bs,!1))return!1;let e=[];for(let t of h4(n)){let r=Dh(n.state,t.from,t.to);r&&e.push(Vu.of(r),p4(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function p4(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return ut.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${i}.`)}const m9=n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let i=n.lineBlockAt(r),o=Mh(e,i.from,i.to);o&&t.push(Fd.of(o)),r=(o?n.lineBlockAt(o.to):i).to+1}return t.length&&n.dispatch({effects:d4(n.state,t)}),!!t.length},g9=n=>{let e=n.state.field(Bs,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,i)=>{t.push(Vu.of({from:r,to:i}))}),n.dispatch({effects:t}),!0},v9=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:d9},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:p9},{key:"Ctrl-Alt-[",run:m9},{key:"Ctrl-Alt-]",run:g9}],y9={placeholderDOM:null,placeholderText:"\u2026"},m4=at.define({combine(n){return Qi(n,y9)}});function g4(n){let e=[Bs,w9];return n&&e.push(m4.of(n)),e}const Eb=pt.replace({widget:new class extends os{toDOM(n){let{state:e}=n,t=e.facet(m4),r=o=>{let s=n.lineBlockAt(n.posAtDOM(o.target)),a=Dh(n.state,s.from,s.to);a&&n.dispatch({effects:Vu.of(a)}),o.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(n,r);let i=document.createElement("span");return i.textContent=t.placeholderText,i.setAttribute("aria-label",e.phrase("folded code")),i.title=e.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),_9={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Up extends Ji{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function b9(n={}){let e=Object.assign(Object.assign({},_9),n),t=new Up(e,!0),r=new Up(e,!1),i=Fn.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet($o)!=s.state.facet($o)||s.startState.field(Bs,!1)!=s.state.field(Bs,!1)||fr(s.startState)!=fr(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let a=new Yo;for(let l of s.viewportLineBlocks){let u=Dh(s.state,l.from,l.to)?r:Mh(s.state,l.from,l.to)?t:null;u&&a.add(l.from,l.from,u)}return a.finish()}}),{domEventHandlers:o}=e;return[i,YT({class:"cm-foldGutter",markers(s){var a;return((a=s.plugin(i))===null||a===void 0?void 0:a.markers)||Qt.empty},initialSpacer(){return new Up(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(s,a,l)=>{if(o.click&&o.click(s,a,l))return!0;let u=Dh(s.state,a.from,a.to);if(u)return s.dispatch({effects:Vu.of(u)}),!0;let c=Mh(s.state,a.from,a.to);return c?(s.dispatch({effects:Fd.of(c)}),!0):!1}})}),g4()]}const w9=ut.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class qu{constructor(e,t){let r;function i(a){let l=Qo.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const o=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,s=t.scope;this.scope=s instanceof bi?a=>a.prop(_u)==s.data:s?a=>a==s:void 0,this.style=s4(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:o}).style,this.module=r?new Qo(r):null,this.themeType=t.themeType}static define(e,t){return new qu(e,t||{})}}const qg=at.define(),v4=at.define({combine(n){return n.length?[n[0]]:null}});function Vp(n){let e=n.facet(qg);return e.length?e:n.facet(v4)}function y4(n,e){let t=[E9],r;return n instanceof qu&&(n.module&&t.push(ut.styleModule.of(n.module)),r=n.themeType),e!=null&&e.fallback?t.push(v4.of(n)):r?t.push(qg.computeN([ut.darkTheme],i=>i.facet(ut.darkTheme)==(r=="dark")?[n]:[])):t.push(qg.of(n)),t}class S9{constructor(e){this.markCache=Object.create(null),this.tree=fr(e.state),this.decorations=this.buildDeco(e,Vp(e.state))}update(e){let t=fr(e.state),r=Vp(e.state),i=r!=Vp(e.startState);t.length<e.view.viewport.to&&!i&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,t){if(!t||!this.tree.length)return pt.none;let r=new Yo;for(let{from:i,to:o}of e.visibleRanges)K7(this.tree,t,(s,a,l)=>{r.add(s,a,this.markCache[l]||(this.markCache[l]=pt.mark({class:l})))},i,o);return r.finish()}}const E9=il.high(Fn.fromClass(S9,{decorations:n=>n.decorations})),C9=qu.define([{tag:Ke.meta,color:"#7a757a"},{tag:Ke.link,textDecoration:"underline"},{tag:Ke.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Ke.emphasis,fontStyle:"italic"},{tag:Ke.strong,fontWeight:"bold"},{tag:Ke.strikethrough,textDecoration:"line-through"},{tag:Ke.keyword,color:"#708"},{tag:[Ke.atom,Ke.bool,Ke.url,Ke.contentSeparator,Ke.labelName],color:"#219"},{tag:[Ke.literal,Ke.inserted],color:"#164"},{tag:[Ke.string,Ke.deleted],color:"#a11"},{tag:[Ke.regexp,Ke.escape,Ke.special(Ke.string)],color:"#e40"},{tag:Ke.definition(Ke.variableName),color:"#00f"},{tag:Ke.local(Ke.variableName),color:"#30a"},{tag:[Ke.typeName,Ke.namespace],color:"#085"},{tag:Ke.className,color:"#167"},{tag:[Ke.special(Ke.variableName),Ke.macroName],color:"#256"},{tag:Ke.definition(Ke.propertyName),color:"#00c"},{tag:Ke.comment,color:"#940"},{tag:Ke.invalid,color:"#f00"}]),k9=ut.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),_4=1e4,b4="()[]{}",w4=at.define({combine(n){return Qi(n,{afterCursor:!0,brackets:b4,maxScanDistance:_4,renderMatch:P9})}}),O9=pt.mark({class:"cm-matchingBracket"}),T9=pt.mark({class:"cm-nonmatchingBracket"});function P9(n){let e=[],t=n.matched?O9:T9;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const I9=Wn.define({create(){return pt.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(w4);for(let i of e.state.selection.ranges){if(!i.empty)continue;let o=Ui(e.state,i.head,-1,r)||i.head>0&&Ui(e.state,i.head-1,1,r)||r.afterCursor&&(Ui(e.state,i.head,1,r)||i.head<e.state.doc.length&&Ui(e.state,i.head+1,-1,r));o&&(t=t.concat(r.renderMatch(o,e.state)))}return pt.set(t,!0)},provide:n=>ut.decorations.from(n)}),A9=[I9,k9];function R9(n={}){return[w4.of(n),A9]}function Hg(n,e,t){let r=n.prop(e<0?Bt.openedBy:Bt.closedBy);if(r)return r;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function Ui(n,e,t,r={}){let i=r.maxScanDistance||_4,o=r.brackets||b4,s=fr(n),a=s.resolveInner(e,t);for(let l=a;l;l=l.parent){let u=Hg(l.type,t,o);if(u&&l.from<l.to)return x9(n,e,t,l,u,o)}return N9(n,e,t,s,a.type,i,o)}function x9(n,e,t,r,i,o){let s=r.parent,a={from:r.from,to:r.to},l=0,u=s==null?void 0:s.cursor();if(u&&(t<0?u.childBefore(r.from):u.childAfter(r.to)))do if(t<0?u.to<=r.from:u.from>=r.to){if(l==0&&i.indexOf(u.type.name)>-1&&u.from<u.to)return{start:a,end:{from:u.from,to:u.to},matched:!0};if(Hg(u.type,t,o))l++;else if(Hg(u.type,-t,o)){if(l==0)return{start:a,end:u.from==u.to?void 0:{from:u.from,to:u.to},matched:!1};l--}}while(t<0?u.prevSibling():u.nextSibling());return{start:a,matched:!1}}function N9(n,e,t,r,i,o,s){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),l=s.indexOf(a);if(l<0||l%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},c=n.doc.iterRange(e,t>0?n.doc.length:0),f=0;for(let d=0;!c.next().done&&d<=o;){let g=c.value;t<0&&(d+=g.length);let h=e+d*t;for(let v=t>0?0:g.length-1,m=t>0?g.length:-1;v!=m;v+=t){let p=s.indexOf(g[v]);if(!(p<0||r.resolveInner(h+v,1).type!=i))if(p%2==0==t>0)f++;else{if(f==1)return{start:u,end:{from:h+v,to:h+v+1},matched:p>>1==l>>1};f--}}t>0&&(d+=g.length)}return c.done?{start:u,matched:!1}:null}const M9=Object.create(null),Cb=[Mr.none],kb=[],D9=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])D9[n]=L9(M9,e);function qp(n,e){kb.indexOf(n)>-1||(kb.push(n),console.warn(e))}function L9(n,e){let t=null;for(let o of e.split(".")){let s=n[o]||Ke[o];s?typeof s=="function"?t?t=s(t):qp(o,`Modifier ${o} used at start of tag`):t?qp(o,`Tag ${o} used as modifier`):t=s:qp(o,`Unknown highlighting tag ${o}`)}if(!t)return 0;let r=e.replace(/ /g,"_"),i=Mr.define({id:Cb.length,name:r,props:[i4({[r]:t})]});return Cb.push(i),i.id}const j9=n=>{let e=bv(n.state);return e.line?B9(n):e.block?U9(n):!1};function _v(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(r(t.update(i)),!0):!1}}const B9=_v(H9,0),F9=_v(S4,0),U9=_v((n,e)=>S4(n,e,q9(e)),0);function bv(n,e=n.selection.main.head){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const yl=50;function V9(n,{open:e,close:t},r,i){let o=n.sliceDoc(r-yl,r),s=n.sliceDoc(i,i+yl),a=/\s*$/.exec(o)[0].length,l=/^\s*/.exec(s)[0].length,u=o.length-a;if(o.slice(u-e.length,u)==e&&s.slice(l,l+t.length)==t)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let c,f;i-r<=2*yl?c=f=n.sliceDoc(r,i):(c=n.sliceDoc(r,r+yl),f=n.sliceDoc(i-yl,i));let d=/^\s*/.exec(c)[0].length,g=/\s*$/.exec(f)[0].length,h=f.length-g-t.length;return c.slice(d,d+e.length)==e&&f.slice(h,h+t.length)==t?{open:{pos:r+d+e.length,margin:/\s/.test(c.charAt(d+e.length))?1:0},close:{pos:i-g-t.length,margin:/\s/.test(f.charAt(h-1))?1:0}}:null}function q9(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to),o=e.length-1;o>=0&&e[o].to>r.from?e[o].to=i.to:e.push({from:r.from,to:i.to})}return e}function S4(n,e,t=e.selection.ranges){let r=t.map(o=>bv(e,o.from).block);if(!r.every(o=>o))return null;let i=t.map((o,s)=>V9(e,r[s],o.from,o.to));if(n!=2&&!i.every(o=>o))return{changes:e.changes(t.map((o,s)=>i[s]?[]:[{from:o.from,insert:r[s].open+" "},{from:o.to,insert:" "+r[s].close}]))};if(n!=1&&i.some(o=>o)){let o=[];for(let s=0,a;s<i.length;s++)if(a=i[s]){let l=r[s],{open:u,close:c}=a;o.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+l.close.length})}return{changes:o}}return null}function H9(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:o,to:s}of t){let a=r.length,l=1e9;for(let u=o;u<=s;){let c=e.doc.lineAt(u);if(c.from>i&&(o==s||s>c.from)){i=c.from;let f=bv(e,u).line;if(!f)continue;let d=/^\s*/.exec(c.text)[0].length,g=d==c.length,h=c.text.slice(d,d+f.length)==f?d:-1;d<c.text.length&&d<l&&(l=d),r.push({line:c,comment:h,token:f,indent:d,empty:g,single:!1})}u=c.to+1}if(l<1e9)for(let u=a;u<r.length;u++)r[u].indent<r[u].line.text.length&&(r[u].indent=l);r.length==a+1&&(r[a].single=!0)}if(n!=2&&r.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:a,token:l,indent:u,empty:c,single:f}of r)(f||!c)&&o.push({from:a.from+u,insert:l+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(n!=1&&r.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:a,token:l}of r)if(a>=0){let u=s.from+a,c=u+l.length;s.text[c-s.from]==" "&&c++,o.push({from:u,to:c})}return{changes:o}}return null}const zg=Js.define(),z9=Js.define(),W9=at.define(),E4=at.define({combine(n){return Qi(n,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function K9(n){let e=0;return n.iterChangedRanges((t,r)=>e=r),e}const wv=Wn.define({create(){return Vi.empty},update(n,e){let t=e.state.facet(E4),r=e.annotation(zg);if(r){let l=e.docChanged?Le.single(K9(e.changes)):void 0,u=Ar.fromTransaction(e,l),c=r.side,f=c==0?n.undone:n.done;return u?f=jh(f,f.length,t.minDepth,u):f=O4(f,e.startState.selection),new Vi(c==0?r.rest:f,c==0?f:r.rest)}let i=e.annotation(z9);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(zn.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=Ar.fromTransaction(e),s=e.annotation(zn.time),a=e.annotation(zn.userEvent);return o?n=n.addChanges(o,s,a,t.newGroupDelay,t.minDepth):e.selection&&(n=n.addSelection(e.startState.selection,s,a,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Vi(n.done.map(Ar.fromJSON),n.undone.map(Ar.fromJSON))}});function G9(n={}){return[wv,E4.of(n),ut.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?Sv:e.inputType=="historyRedo"?Lh:null;return r?(e.preventDefault(),r(t)):!1}})]}function Ud(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(wv,!1);if(!i)return!1;let o=i.pop(n,t,e);return o?(r(o),!0):!1}}const Sv=Ud(0,!1),Lh=Ud(1,!1),J9=Ud(0,!0),Y9=Ud(1,!0);function C4(n){return function(e){let t=e.field(wv,!1);if(!t)return 0;let r=n==0?t.done:t.undone;return r.length-(r.length&&!r[0].changes?1:0)}}const Q9=C4(0),Z9=C4(1);class Ar{constructor(e,t,r,i,o){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=o}setSelAfter(e){return new Ar(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Ar(e.changes&&qn.fromJSON(e.changes),[],e.mapped&&zi.fromJSON(e.mapped),e.startSelection&&Le.fromJSON(e.startSelection),e.selectionsAfter.map(Le.fromJSON))}static fromTransaction(e,t){let r=ai;for(let i of e.startState.facet(W9)){let o=i(e);o.length&&(r=r.concat(o))}return!r.length&&e.changes.empty?null:new Ar(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,ai)}static selection(e){return new Ar(void 0,ai,void 0,void 0,e)}}function jh(n,e,t,r){let i=e+1>t+20?e-t-1:0,o=n.slice(i,e);return o.push(r),o}function X9(n,e){let t=[],r=!1;return n.iterChangedRanges((i,o)=>t.push(i,o)),e.iterChangedRanges((i,o,s,a)=>{for(let l=0;l<t.length;){let u=t[l++],c=t[l++];a>=u&&s<=c&&(r=!0)}}),r}function $9(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function k4(n,e){return n.length?e.length?n.concat(e):n:e}const ai=[],eF=200;function O4(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-eF));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),jh(n,n.length-1,1e9,t.setSelAfter(r)))}else return[Ar.selection([e])]}function tF(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Hp(n,e){if(!n.length)return n;let t=n.length,r=ai;for(;t;){let i=nF(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let o=n.slice(0,t);return o[t-1]=i,o}else e=i.mapped,t--,r=i.selectionsAfter}return r.length?[Ar.selection(r)]:ai}function nF(n,e,t){let r=k4(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):ai,t);if(!n.changes)return Ar.selection(r);let i=n.changes.map(e),o=e.mapDesc(n.changes,!0),s=n.mapped?n.mapped.composeDesc(o):o;return new Ar(i,Pt.mapEffects(n.effects,e),s,n.startSelection.map(o),r)}const rF=/^(input\.type|delete)($|\.)/;class Vi{constructor(e,t,r=0,i=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Vi(this.done,this.undone):this}addChanges(e,t,r,i,o){let s=this.done,a=s[s.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||rF.test(r))&&(!a.selectionsAfter.length&&t-this.prevTime<i&&X9(a.changes,e.changes)||r=="input.type.compose")?s=jh(s,s.length-1,o,new Ar(e.changes.compose(a.changes),k4(e.effects,a.effects),a.mapped,a.startSelection,ai)):s=jh(s,s.length,o,e),new Vi(s,ai,t,r)}addSelection(e,t,r,i){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:ai;return o.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&$9(o[o.length-1],e)?this:new Vi(O4(this.done,e),this.undone,t,r)}addMapping(e){return new Vi(Hp(this.done,e),Hp(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let o=i[i.length-1];if(r&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:zg.of({side:e,rest:tF(i)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let s=i.length==1?ai:i.slice(0,i.length-1);return o.mapped&&(s=Hp(s,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:zg.of({side:e,rest:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Vi.empty=new Vi(ai,ai);const iF=[{key:"Mod-z",run:Sv,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Lh,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Lh,preventDefault:!0},{key:"Mod-u",run:J9,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Y9,preventDefault:!0}];function ol(n,e){return Le.create(n.ranges.map(e),n.mainIndex)}function Zi(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Oi({state:n,dispatch:e},t){let r=ol(n.selection,t);return r.eq(n.selection)?!1:(e(Zi(n,r)),!0)}function Vd(n,e){return Le.cursor(e?n.to:n.from)}function T4(n,e){return Oi(n,t=>t.empty?n.moveByChar(t,e):Vd(t,e))}function hr(n){return n.textDirectionAt(n.state.selection.main.head)==wn.LTR}const P4=n=>T4(n,!hr(n)),I4=n=>T4(n,hr(n));function A4(n,e){return Oi(n,t=>t.empty?n.moveByGroup(t,e):Vd(t,e))}const oF=n=>A4(n,!hr(n)),sF=n=>A4(n,hr(n));function aF(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function qd(n,e,t){let r=fr(n).resolveInner(e.head),i=t?Bt.closedBy:Bt.openedBy;for(let l=e.head;;){let u=t?r.childAfter(l):r.childBefore(l);if(!u)break;aF(n,u,i)?r=u:l=t?u.to:u.from}let o=r.type.prop(i),s,a;return o&&(s=t?Ui(n,r.from,1):Ui(n,r.to,-1))&&s.matched?a=t?s.end.to:s.end.from:a=t?r.to:r.from,Le.cursor(a,t?-1:1)}const lF=n=>Oi(n,e=>qd(n.state,e,!hr(n))),uF=n=>Oi(n,e=>qd(n.state,e,hr(n)));function R4(n,e){return Oi(n,t=>{if(!t.empty)return Vd(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const x4=n=>R4(n,!1),N4=n=>R4(n,!0);function M4(n){return Math.max(n.defaultLineHeight,Math.min(n.dom.clientHeight,innerHeight)-5)}function D4(n,e){let{state:t}=n,r=ol(t.selection,a=>a.empty?n.moveVertically(a,e,M4(n)):Vd(a,e));if(r.eq(t.selection))return!1;let i=n.coordsAtPos(t.selection.main.head),o=n.scrollDOM.getBoundingClientRect(),s;return i&&i.top>o.top&&i.bottom<o.bottom&&i.top-o.top<=n.scrollDOM.scrollHeight-n.scrollDOM.scrollTop-n.scrollDOM.clientHeight&&(s=ut.scrollIntoView(r.main.head,{y:"start",yMargin:i.top-o.top})),n.dispatch(Zi(t,r),{effects:s}),!0}const Ob=n=>D4(n,!1),Wg=n=>D4(n,!0);function ss(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let o=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;o&&e.head!=r.from+o&&(i=Le.cursor(r.from+o))}return i}const cF=n=>Oi(n,e=>ss(n,e,!0)),fF=n=>Oi(n,e=>ss(n,e,!1)),hF=n=>Oi(n,e=>ss(n,e,!hr(n))),dF=n=>Oi(n,e=>ss(n,e,hr(n))),pF=n=>Oi(n,e=>Le.cursor(n.lineBlockAt(e.head).from,1)),mF=n=>Oi(n,e=>Le.cursor(n.lineBlockAt(e.head).to,-1));function gF(n,e,t){let r=!1,i=ol(n.selection,o=>{let s=Ui(n,o.head,-1)||Ui(n,o.head,1)||o.head>0&&Ui(n,o.head-1,1)||o.head<n.doc.length&&Ui(n,o.head+1,-1);if(!s||!s.end)return o;r=!0;let a=s.start.from==o.head?s.end.to:s.end.from;return t?Le.range(o.anchor,a):Le.cursor(a)});return r?(e(Zi(n,i)),!0):!1}const vF=({state:n,dispatch:e})=>gF(n,e,!1);function ui(n,e){let t=ol(n.state.selection,r=>{let i=e(r);return Le.range(r.anchor,i.head,i.goalColumn)});return t.eq(n.state.selection)?!1:(n.dispatch(Zi(n.state,t)),!0)}function L4(n,e){return ui(n,t=>n.moveByChar(t,e))}const j4=n=>L4(n,!hr(n)),B4=n=>L4(n,hr(n));function F4(n,e){return ui(n,t=>n.moveByGroup(t,e))}const yF=n=>F4(n,!hr(n)),_F=n=>F4(n,hr(n)),bF=n=>ui(n,e=>qd(n.state,e,!hr(n))),wF=n=>ui(n,e=>qd(n.state,e,hr(n)));function U4(n,e){return ui(n,t=>n.moveVertically(t,e))}const V4=n=>U4(n,!1),q4=n=>U4(n,!0);function H4(n,e){return ui(n,t=>n.moveVertically(t,e,M4(n)))}const Tb=n=>H4(n,!1),Pb=n=>H4(n,!0),SF=n=>ui(n,e=>ss(n,e,!0)),EF=n=>ui(n,e=>ss(n,e,!1)),CF=n=>ui(n,e=>ss(n,e,!hr(n))),kF=n=>ui(n,e=>ss(n,e,hr(n))),OF=n=>ui(n,e=>Le.cursor(n.lineBlockAt(e.head).from)),TF=n=>ui(n,e=>Le.cursor(n.lineBlockAt(e.head).to)),Ib=({state:n,dispatch:e})=>(e(Zi(n,{anchor:0})),!0),Ab=({state:n,dispatch:e})=>(e(Zi(n,{anchor:n.doc.length})),!0),Rb=({state:n,dispatch:e})=>(e(Zi(n,{anchor:n.selection.main.anchor,head:0})),!0),xb=({state:n,dispatch:e})=>(e(Zi(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),PF=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),IF=({state:n,dispatch:e})=>{let t=Wd(n).map(({from:r,to:i})=>Le.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:Le.create(t),userEvent:"select"})),!0},AF=({state:n,dispatch:e})=>{let t=ol(n.selection,r=>{var i;let o=fr(n).resolveInner(r.head,1);for(;!(o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from||!(!((i=o.parent)===null||i===void 0)&&i.parent));)o=o.parent;return Le.range(o.to,o.from)});return e(Zi(n,t)),!0},RF=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=Le.create([t.main]):t.main.empty||(r=Le.create([Le.cursor(t.main.head)])),r?(e(Zi(n,r)),!0):!1};function Hd({state:n,dispatch:e},t){if(n.readOnly)return!1;let r="delete.selection",i=n.changeByRange(o=>{let{from:s,to:a}=o;if(s==a){let l=t(s);l<s?r="delete.backward":l>s&&(r="delete.forward"),s=Math.min(s,l),a=Math.max(a,l)}return s==a?{range:o}:{changes:{from:s,to:a},range:Le.cursor(s)}});return i.changes.empty?!1:(e(n.update(i,{scrollIntoView:!0,userEvent:r,effects:r=="delete.selection"?ut.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function zd(n,e,t){if(n instanceof ut)for(let r of n.state.facet(ut.atomicRanges).map(i=>i(n)))r.between(e,e,(i,o)=>{i<e&&o>e&&(e=t?o:i)});return e}const z4=(n,e)=>Hd(n,t=>{let{state:r}=n,i=r.doc.lineAt(t),o,s;if(!e&&t>i.from&&t<i.from+200&&!/[^ \t]/.test(o=i.text.slice(0,t-i.from))){if(o[o.length-1]=="	")return t-1;let a=Fu(o,r.tabSize),l=a%Nh(r)||Nh(r);for(let u=0;u<l&&o[o.length-1-u]==" ";u++)t--;s=t}else s=zr(i.text,t-i.from,e,e)+i.from,s==t&&i.number!=(e?r.doc.lines:1)&&(s+=e?1:-1);return zd(n,s,e)}),Kg=n=>z4(n,!1),W4=n=>z4(n,!0),K4=(n,e)=>Hd(n,t=>{let r=t,{state:i}=n,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let a=null;;){if(r==(e?o.to:o.from)){r==t&&o.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=zr(o.text,r-o.from,e)+o.from,u=o.text.slice(Math.min(r,l)-o.from,Math.max(r,l)-o.from),c=s(u);if(a!=null&&c!=a)break;(u!=" "||r!=t)&&(a=c),r=l}return zd(n,r,e)}),G4=n=>K4(n,!1),xF=n=>K4(n,!0),J4=n=>Hd(n,e=>{let t=n.lineBlockAt(e).to;return zd(n,e<t?t:Math.min(n.state.doc.length,e+1),!0)}),NF=n=>Hd(n,e=>{let t=n.lineBlockAt(e).from;return zd(n,e>t?t:Math.max(0,e-1),!1)}),MF=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:tn.of(["",""])},range:Le.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},DF=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let i=r.from,o=n.doc.lineAt(i),s=i==o.from?i-1:zr(o.text,i-o.from,!1)+o.from,a=i==o.to?i+1:zr(o.text,i-o.from,!0)+o.from;return{changes:{from:s,to:a,insert:n.doc.slice(i,a).append(n.doc.slice(s,i))},range:Le.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Wd(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),o=n.doc.lineAt(r.to);if(!r.empty&&r.to==o.from&&(o=n.doc.lineAt(r.to-1)),t>=i.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(r)}else e.push({from:i.from,to:o.to,ranges:[r]});t=o.number+1}return e}function Y4(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let o of Wd(n)){if(t?o.to==n.doc.length:o.from==0)continue;let s=n.doc.lineAt(t?o.to+1:o.from-1),a=s.length+1;if(t){r.push({from:o.to,to:s.to},{from:o.from,insert:s.text+n.lineBreak});for(let l of o.ranges)i.push(Le.range(Math.min(n.doc.length,l.anchor+a),Math.min(n.doc.length,l.head+a)))}else{r.push({from:s.from,to:o.from},{from:o.to,insert:n.lineBreak+s.text});for(let l of o.ranges)i.push(Le.range(l.anchor-a,l.head-a))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:Le.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const LF=({state:n,dispatch:e})=>Y4(n,e,!1),jF=({state:n,dispatch:e})=>Y4(n,e,!0);function Q4(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of Wd(n))t?r.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):r.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const BF=({state:n,dispatch:e})=>Q4(n,e,!1),FF=({state:n,dispatch:e})=>Q4(n,e,!0),UF=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Wd(e).map(({from:i,to:o})=>(i>0?i--:o<e.doc.length&&o++,{from:i,to:o}))),r=ol(e.selection,i=>n.moveVertically(i,!0)).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function VF(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=fr(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e),o;return r&&i&&r.to<=e&&i.from>=e&&(o=r.type.prop(Bt.closedBy))&&o.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from?{from:r.to,to:i.from}:null}const qF=Z4(!1),HF=Z4(!0);function Z4(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:o,to:s}=i,a=e.doc.lineAt(o),l=!n&&o==s&&VF(e,o);n&&(o=s=(s<=a.to?a:e.doc.lineAt(s)).to);let u=new Bd(e,{simulateBreak:o,simulateDoubleBreak:!!l}),c=vv(u,o);for(c==null&&(c=/^\s*/.exec(e.doc.lineAt(o).text)[0].length);s<a.to&&/\s/.test(a.text[s-a.from]);)s++;l?{from:o,to:s}=l:o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let f=["",bu(e,c)];return l&&f.push(bu(e,u.lineIndent(a.from,-1))),{changes:{from:o,to:s,insert:tn.of(f)},range:Le.cursor(o+1+f[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Ev(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let s=r.from;s<=r.to;){let a=n.doc.lineAt(s);a.number>t&&(r.empty||r.to>a.from)&&(e(a,i,r),t=a.number),s=a.to+1}let o=n.changes(i);return{changes:i,range:Le.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}const zF=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new Bd(n,{overrideIndentation:o=>{let s=t[o];return s==null?-1:s}}),i=Ev(n,(o,s,a)=>{let l=vv(r,o.from);if(l==null)return;/\S/.test(o.text)||(l=0);let u=/^\s*/.exec(o.text)[0],c=bu(n,l);(u!=c||a.from<o.from+u.length)&&(t[o.from]=l,s.push({from:o.from,to:o.from+u.length,insert:c}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},X4=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Ev(n,(t,r)=>{r.push({from:t.from,insert:n.facet(jd)})}),{userEvent:"input.indent"})),!0),$4=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Ev(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let o=Fu(i,n.tabSize),s=0,a=bu(n,Math.max(0,o-Nh(n)));for(;s<i.length&&s<a.length&&i.charCodeAt(s)==a.charCodeAt(s);)s++;r.push({from:t.from+s,to:t.from+i.length,insert:a.slice(s)})}),{userEvent:"delete.dedent"})),!0),WF=[{key:"Ctrl-b",run:P4,shift:j4,preventDefault:!0},{key:"Ctrl-f",run:I4,shift:B4},{key:"Ctrl-p",run:x4,shift:V4},{key:"Ctrl-n",run:N4,shift:q4},{key:"Ctrl-a",run:pF,shift:OF},{key:"Ctrl-e",run:mF,shift:TF},{key:"Ctrl-d",run:W4},{key:"Ctrl-h",run:Kg},{key:"Ctrl-k",run:J4},{key:"Ctrl-Alt-h",run:G4},{key:"Ctrl-o",run:MF},{key:"Ctrl-t",run:DF},{key:"Ctrl-v",run:Wg}],KF=[{key:"ArrowLeft",run:P4,shift:j4,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:oF,shift:yF,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:hF,shift:CF,preventDefault:!0},{key:"ArrowRight",run:I4,shift:B4,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:sF,shift:_F,preventDefault:!0},{mac:"Cmd-ArrowRight",run:dF,shift:kF,preventDefault:!0},{key:"ArrowUp",run:x4,shift:V4,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Ib,shift:Rb},{mac:"Ctrl-ArrowUp",run:Ob,shift:Tb},{key:"ArrowDown",run:N4,shift:q4,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Ab,shift:xb},{mac:"Ctrl-ArrowDown",run:Wg,shift:Pb},{key:"PageUp",run:Ob,shift:Tb},{key:"PageDown",run:Wg,shift:Pb},{key:"Home",run:fF,shift:EF,preventDefault:!0},{key:"Mod-Home",run:Ib,shift:Rb},{key:"End",run:cF,shift:SF,preventDefault:!0},{key:"Mod-End",run:Ab,shift:xb},{key:"Enter",run:qF},{key:"Mod-a",run:PF},{key:"Backspace",run:Kg,shift:Kg},{key:"Delete",run:W4},{key:"Mod-Backspace",mac:"Alt-Backspace",run:G4},{key:"Mod-Delete",mac:"Alt-Delete",run:xF},{mac:"Mod-Backspace",run:NF},{mac:"Mod-Delete",run:J4}].concat(WF.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),GF=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:lF,shift:bF},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:uF,shift:wF},{key:"Alt-ArrowUp",run:LF},{key:"Shift-Alt-ArrowUp",run:BF},{key:"Alt-ArrowDown",run:jF},{key:"Shift-Alt-ArrowDown",run:FF},{key:"Escape",run:RF},{key:"Mod-Enter",run:HF},{key:"Alt-l",mac:"Ctrl-l",run:IF},{key:"Mod-i",run:AF,preventDefault:!0},{key:"Mod-[",run:$4},{key:"Mod-]",run:X4},{key:"Mod-Alt-\\",run:zF},{key:"Shift-Mod-k",run:UF},{key:"Shift-Mod-\\",run:vF},{key:"Mod-/",run:j9},{key:"Alt-A",run:F9}].concat(KF),JF={key:"Tab",run:X4,shift:$4};function mn(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];typeof i=="string"?n.setAttribute(r,i):i!=null&&(n[r]=i)}e++}for(;e<arguments.length;e++)eP(n,arguments[e]);return n}function eP(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)eP(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const Nb=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Fa{constructor(e,t,r=0,i=e.length,o){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=o?s=>o(Nb(s)):Nb,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return tr(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=rv(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Vr(e);let i=this.normalize(t);for(let o=0,s=r;;o++){let a=i.charCodeAt(o),l=this.match(a,s);if(l)return this.value=l,this;if(o==i.length-1)break;s==r&&o<t.length&&t.charCodeAt(o)==a&&s++}}}match(e,t){let r=null;for(let i=0;i<this.matches.length;i+=2){let o=this.matches[i],s=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[i+1],to:t+1}:(this.matches[i]++,s=!0)),s||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:t+1}:this.matches.push(1,t)),r}}typeof Symbol<"u"&&(Fa.prototype[Symbol.iterator]=function(){return this});const tP={from:-1,to:-1,match:/.*/.exec("")},Cv="gm"+(/x/.unicode==null?"":"u");class nP{constructor(e,t,r,i=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=tP,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new rP(e,t,r,i,o);this.re=new RegExp(t,Cv+(r!=null&&r.ignoreCase?"i":"")),this.iter=e.iter();let s=e.lineAt(i);this.curLineStart=s.from,this.matchPos=Bh(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=Bh(this.text,i+(r==i?1:0)),r==this.curLine.length&&this.nextLine(),r<i||r>this.value.to)return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const zp=new WeakMap;class Sa{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let i=zp.get(e);if(!i||i.from>=r||i.to<=t){let a=new Sa(t,e.sliceString(t,r));return zp.set(e,a),a}if(i.from==t&&i.to==r)return i;let{text:o,from:s}=i;return s>t&&(o=e.sliceString(t,s)+o,s=t),i.to<r&&(o+=e.sliceString(i.to,r)),zp.set(e,new Sa(s,o)),new Sa(t,o.slice(t-s,r-s))}}class rP{constructor(e,t,r,i,o){this.text=e,this.to=o,this.done=!1,this.value=tP,this.matchPos=Bh(e,i),this.re=new RegExp(t,Cv+(r!=null&&r.ignoreCase?"i":"")),this.flat=Sa.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t&&this.flat.to<this.to&&t.index+t[0].length>this.flat.text.length-10&&(t=null),t){let r=this.flat.from+t.index,i=r+t[0].length;return this.value={from:r,to:i,match:t},this.matchPos=Bh(this.text,i+(r==i?1:0)),this}else{if(this.flat.to==this.to)return this.done=!0,this;this.flat=Sa.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}}typeof Symbol<"u"&&(nP.prototype[Symbol.iterator]=rP.prototype[Symbol.iterator]=function(){return this});function YF(n){try{return new RegExp(n,Cv),!0}catch{return!1}}function Bh(n,e){if(e>=n.length)return e;let t=n.lineAt(e),r;for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}function Gg(n){let e=mn("input",{class:"cm-textfield",name:"line"}),t=mn("form",{class:"cm-gotoLine",onkeydown:i=>{i.keyCode==27?(i.preventDefault(),n.dispatch({effects:Fh.of(!1)}),n.focus()):i.keyCode==13&&(i.preventDefault(),r())},onsubmit:i=>{i.preventDefault(),r()}},mn("label",n.state.phrase("Go to line"),": ",e)," ",mn("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function r(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!i)return;let{state:o}=n,s=o.doc.lineAt(o.selection.main.head),[,a,l,u,c]=i,f=u?+u.slice(1):0,d=l?+l:s.number;if(l&&c){let h=d/100;a&&(h=h*(a=="-"?-1:1)+s.number/o.doc.lines),d=Math.round(o.doc.lines*h)}else l&&a&&(d=d*(a=="-"?-1:1)+s.number);let g=o.doc.line(Math.max(1,Math.min(o.doc.lines,d)));n.dispatch({effects:Fh.of(!1),selection:Le.cursor(g.from+Math.max(0,Math.min(f,g.length))),scrollIntoView:!0}),n.focus()}return{dom:t}}const Fh=Pt.define(),Mb=Wn.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(Fh)&&(n=t.value);return n},provide:n=>yu.from(n,e=>e?Gg:null)}),QF=n=>{let e=vu(n,Gg);if(!e){let t=[Fh.of(!0)];n.state.field(Mb,!1)==null&&t.push(Pt.appendConfig.of([Mb,ZF])),n.dispatch({effects:t}),e=vu(n,Gg)}return e&&e.dom.querySelector("input").focus(),!0},ZF=ut.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),XF={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},iP=at.define({combine(n){return Qi(n,XF,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function $F(n){let e=[iU,rU];return n&&e.push(iP.of(n)),e}const eU=pt.mark({class:"cm-selectionMatch"}),tU=pt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Db(n,e,t,r){return(t==0||n(e.sliceDoc(t-1,t))!=mr.Word)&&(r==e.doc.length||n(e.sliceDoc(r,r+1))!=mr.Word)}function nU(n,e,t,r){return n(e.sliceDoc(t,t+1))==mr.Word&&n(e.sliceDoc(r-1,r))==mr.Word}const rU=Fn.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(iP),{state:t}=n,r=t.selection;if(r.ranges.length>1)return pt.none;let i=r.main,o,s=null;if(i.empty){if(!e.highlightWordAroundCursor)return pt.none;let l=t.wordAt(i.head);if(!l)return pt.none;s=t.charCategorizer(i.head),o=t.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return pt.none;if(e.wholeWords){if(o=t.sliceDoc(i.from,i.to),s=t.charCategorizer(i.head),!(Db(s,t,i.from,i.to)&&nU(s,t,i.from,i.to)))return pt.none}else if(o=t.sliceDoc(i.from,i.to).trim(),!o)return pt.none}let a=[];for(let l of n.visibleRanges){let u=new Fa(t.doc,o,l.from,l.to);for(;!u.next().done;){let{from:c,to:f}=u.value;if((!s||Db(s,t,c,f))&&(i.empty&&c<=i.from&&f>=i.to?a.push(tU.range(c,f)):(c>=i.to||f<=i.from)&&a.push(eU.range(c,f)),a.length>e.maxMatches))return pt.none}}return pt.set(a)}},{decorations:n=>n.decorations}),iU=ut.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),oU=({state:n,dispatch:e})=>{let{selection:t}=n,r=Le.create(t.ranges.map(i=>n.wordAt(i.head)||Le.cursor(i.head)),t.mainIndex);return r.eq(t)?!1:(e(n.update({selection:r})),!0)};function sU(n,e){let{main:t,ranges:r}=n.selection,i=n.wordAt(t.head),o=i&&i.from==t.from&&i.to==t.to;for(let s=!1,a=new Fa(n.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(s)return null;a=new Fa(n.doc,e,0,Math.max(0,r[r.length-1].from-1)),s=!0}else{if(s&&r.some(l=>l.from==a.value.from))continue;if(o){let l=n.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const aU=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return oU({state:n,dispatch:e});let r=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=r))return!1;let i=sU(n,r);return i?(e(n.update({selection:n.selection.addRange(Le.range(i.from,i.to),!1),effects:ut.scrollIntoView(i.to)})),!0):!1},Kd=at.define({combine(n){var e;return{top:n.reduce((t,r)=>t!=null?t:r.top,void 0)||!1,caseSensitive:n.reduce((t,r)=>t!=null?t:r.caseSensitive,void 0)||!1,literal:n.reduce((t,r)=>t!=null?t:r.literal,void 0)||!1,createPanel:((e=n.find(t=>t.createPanel))===null||e===void 0?void 0:e.createPanel)||(t=>new yU(t))}}});function lU(n){return n?[Kd.of(n),Yg]:Yg}class oP{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||YF(this.search)),this.unquoted=this.literal?this.search:this.search.replace(/\\([nrt\\])/g,(t,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp}create(){return this.regexp?new cU(this):new uU(this)}getCursor(e,t=0,r=e.length){return this.regexp?ha(this,e,t,r):fa(this,e,t,r)}}class sP{constructor(e){this.spec=e}}function fa(n,e,t,r){return new Fa(e,n.unquoted,t,r,n.caseSensitive?void 0:i=>i.toLowerCase())}class uU extends sP{constructor(e){super(e)}nextMatch(e,t,r){let i=fa(this.spec,e,r,e.length).nextOverlapping();return i.done&&(i=fa(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let o=Math.max(t,i-1e4-this.spec.unquoted.length),s=fa(this.spec,e,o,i),a=null;for(;!s.nextOverlapping().done;)a=s.value;if(a)return a;if(o==t)return null;i-=1e4}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.length)}getReplacement(e){return this.spec.replace}matchAll(e,t){let r=fa(this.spec,e,0,e.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let o=fa(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}function ha(n,e,t,r){return new nP(e,n.search,n.caseSensitive?void 0:{ignoreCase:!0},t,r)}class cU extends sP{nextMatch(e,t,r){let i=ha(this.spec,e,r,e.length).next();return i.done&&(i=ha(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let o=Math.max(t,r-i*1e4),s=ha(this.spec,e,o,r),a=null;for(;!s.next().done;)a=s.value;if(a&&(o==t||a.from>o+10))return a;if(o==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.length)}getReplacement(e){return this.spec.replace.replace(/\$([$&\d+])/g,(t,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:t)}matchAll(e,t){let r=ha(this.spec,e,0,e.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let o=ha(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}const wu=Pt.define(),kv=Pt.define(),Ho=Wn.define({create(n){return new Wp(Jg(n).create(),null)},update(n,e){for(let t of e.effects)t.is(wu)?n=new Wp(t.value.create(),n.panel):t.is(kv)&&(n=new Wp(n.query,t.value?Ov:null));return n},provide:n=>yu.from(n,e=>e.panel)});class Wp{constructor(e,t){this.query=e,this.panel=t}}const fU=pt.mark({class:"cm-searchMatch"}),hU=pt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),dU=Fn.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(Ho))}update(n){let e=n.state.field(Ho);(e!=n.startState.field(Ho)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return pt.none;let{view:t}=this,r=new Yo;for(let i=0,o=t.visibleRanges,s=o.length;i<s;i++){let{from:a,to:l}=o[i];for(;i<s-1&&l>o[i+1].from-2*250;)l=o[++i].to;n.highlight(t.state.doc,a,l,(u,c)=>{let f=t.state.selection.ranges.some(d=>d.from==u&&d.to==c);r.add(u,c,f?hU:fU)})}return r.finish()}},{decorations:n=>n.decorations});function Hu(n){return e=>{let t=e.state.field(Ho,!1);return t&&t.query.spec.valid?n(e,t):Tv(e)}}const Uh=Hu((n,{query:e})=>{let{to:t}=n.state.selection.main,r=e.nextMatch(n.state.doc,t,t);return r?(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Iv(n,r),userEvent:"select.search"}),!0):!1}),Vh=Hu((n,{query:e})=>{let{state:t}=n,{from:r}=t.selection.main,i=e.prevMatch(t.doc,r,r);return i?(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Iv(n,i),userEvent:"select.search"}),!0):!1}),pU=Hu((n,{query:e})=>{let t=e.matchAll(n.state.doc,1e3);return!t||!t.length?!1:(n.dispatch({selection:Le.create(t.map(r=>Le.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),mU=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:r,to:i}=t.main,o=[],s=0;for(let a=new Fa(n.doc,n.sliceDoc(r,i));!a.next().done;){if(o.length>1e3)return!1;a.value.from==r&&(s=o.length),o.push(Le.range(a.value.from,a.value.to))}return e(n.update({selection:Le.create(o,s),userEvent:"select.search.matches"})),!0},Lb=Hu((n,{query:e})=>{let{state:t}=n,{from:r,to:i}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t.doc,r,r);if(!o)return!1;let s=[],a,l,u=[];if(o.from==r&&o.to==i&&(l=t.toText(e.getReplacement(o)),s.push({from:o.from,to:o.to,insert:l}),o=e.nextMatch(t.doc,o.from,o.to),u.push(ut.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+"."))),o){let c=s.length==0||s[0].from>=o.to?0:o.to-o.from-l.length;a={anchor:o.from-c,head:o.to-c},u.push(Iv(n,o))}return n.dispatch({changes:s,selection:a,scrollIntoView:!!a,effects:u,userEvent:"input.replace"}),!0}),gU=Hu((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state.doc,1e9).map(i=>{let{from:o,to:s}=i;return{from:o,to:s,insert:e.getReplacement(i)}});if(!t.length)return!1;let r=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:ut.announce.of(r),userEvent:"input.replace.all"}),!0});function Ov(n){return n.state.facet(Kd).createPanel(n)}function Jg(n,e){var t,r,i;let o=n.selection.main,s=o.empty||o.to>o.from+100?"":n.sliceDoc(o.from,o.to);if(e&&!s)return e;let a=n.facet(Kd);return new oP({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:a.literal)?s:s.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:a.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:a.literal})}const Tv=n=>{let e=n.state.field(Ho,!1);if(e&&e.panel){let t=vu(n,Ov);if(!t)return!1;let r=t.dom.querySelector("[main-field]");if(r&&r!=n.root.activeElement){let i=Jg(n.state,e.query.spec);i.valid&&n.dispatch({effects:wu.of(i)}),r.focus(),r.select()}}else n.dispatch({effects:[kv.of(!0),e?wu.of(Jg(n.state,e.query.spec)):Pt.appendConfig.of(Yg)]});return!0},Pv=n=>{let e=n.state.field(Ho,!1);if(!e||!e.panel)return!1;let t=vu(n,Ov);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:kv.of(!1)}),!0},vU=[{key:"Mod-f",run:Tv,scope:"editor search-panel"},{key:"F3",run:Uh,shift:Vh,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Uh,shift:Vh,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Pv,scope:"editor search-panel"},{key:"Mod-Shift-l",run:mU},{key:"Alt-g",run:QF},{key:"Mod-d",run:aU,preventDefault:!0}];class yU{constructor(e){this.view=e;let t=this.query=e.state.field(Ho).query.spec;this.commit=this.commit.bind(this),this.searchField=mn("input",{value:t.search,placeholder:ni(e,"Find"),"aria-label":ni(e,"Find"),class:"cm-textfield",name:"search","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=mn("input",{value:t.replace,placeholder:ni(e,"Replace"),"aria-label":ni(e,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=mn("input",{type:"checkbox",name:"case",checked:t.caseSensitive,onchange:this.commit}),this.reField=mn("input",{type:"checkbox",name:"re",checked:t.regexp,onchange:this.commit});function r(i,o,s){return mn("button",{class:"cm-button",name:i,onclick:o,type:"button"},s)}this.dom=mn("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Uh(e),[ni(e,"next")]),r("prev",()=>Vh(e),[ni(e,"previous")]),r("select",()=>pU(e),[ni(e,"all")]),mn("label",null,[this.caseField,ni(e,"match case")]),mn("label",null,[this.reField,ni(e,"regexp")]),...e.state.readOnly?[]:[mn("br"),this.replaceField,r("replace",()=>Lb(e),[ni(e,"replace")]),r("replaceAll",()=>gU(e),[ni(e,"replace all")]),mn("button",{name:"close",onclick:()=>Pv(e),"aria-label":ni(e,"close"),type:"button"},["\xD7"])]])}commit(){let e=new oP({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:wu.of(e)}))}keydown(e){FB(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Vh:Uh)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Lb(this.view))}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(wu)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Kd).top}}function ni(n,e){return n.state.phrase(e)}const Nc=30,Mc=/[\s\.,:;?!]/;function Iv(n,{from:e,to:t}){let r=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,o=Math.max(r.from,e-Nc),s=Math.min(i,t+Nc),a=n.state.sliceDoc(o,s);if(o!=r.from){for(let l=0;l<Nc;l++)if(!Mc.test(a[l+1])&&Mc.test(a[l])){a=a.slice(l);break}}if(s!=i){for(let l=a.length-1;l>a.length-Nc;l--)if(!Mc.test(a[l-1])&&Mc.test(a[l])){a=a.slice(0,l);break}}return ut.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${r.number}.`)}const _U=ut.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Yg=[Ho,il.lowest(dU),_U];class aP{constructor(e,t,r){this.state=e,this.pos=t,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let t=fr(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),o=i.search(lP(e,!1));return o<0?null:{from:r+o,to:this.pos,text:i.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function jb(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function bU(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let o=1;o<i.length;o++)t[i[o]]=!0}let r=jb(e)+jb(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function wU(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:bU(e);return i=>{let o=i.matchBefore(r);return o||i.explicit?{from:o?o.from:i.pos,options:e,validFor:t}:null}}class Bb{constructor(e,t,r){this.completion=e,this.source=t,this.match=r}}function zo(n){return n.selection.main.head}function lP(n,e){var t;let{source:r}=n,i=e&&r[0]!="^",o=r[r.length-1]!="$";return!i&&!o?n:new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}function SU(n,e,t,r){return Object.assign(Object.assign({},n.changeByRange(i=>{if(i==n.selection.main)return{changes:{from:t,to:r,insert:e},range:Le.cursor(t+e.length)};let o=r-t;return!i.empty||o&&n.sliceDoc(i.from-o,i.from)!=n.sliceDoc(t,r)?{range:i}:{changes:{from:i.from-o,to:i.from,insert:e},range:Le.cursor(i.from-o+e.length)}})),{userEvent:"input.complete"})}function uP(n,e){const t=e.completion.apply||e.completion.label;let r=e.source;typeof t=="string"?n.dispatch(SU(n.state,t,r.from,r.to)):t(n,e.completion,r.from,r.to)}const Fb=new WeakMap;function EU(n){if(!Array.isArray(n))return n;let e=Fb.get(n);return e||Fb.set(n,e=wU(n)),e}class CU{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let r=tr(e,t),i=Vr(r);this.chars.push(r);let o=e.slice(t,t+i),s=o.toUpperCase();this.folded.push(tr(s==o?o.toLowerCase():s,0)),t+=i}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:o,byWord:s}=this;if(t.length==1){let y=tr(e,0);return y==t[0]?[0,0,Vr(y)]:y==r[0]?[-200,0,Vr(y)]:null}let a=e.indexOf(this.pattern);if(a==0)return[0,0,this.pattern.length];let l=t.length,u=0;if(a<0){for(let y=0,b=Math.min(e.length,200);y<b&&u<l;){let _=tr(e,y);(_==t[u]||_==r[u])&&(i[u++]=y),y+=Vr(_)}if(u<l)return null}let c=0,f=0,d=!1,g=0,h=-1,v=-1,m=/[a-z]/.test(e),p=!0;for(let y=0,b=Math.min(e.length,200),_=0;y<b&&f<l;){let w=tr(e,y);a<0&&(c<l&&w==t[c]&&(o[c++]=y),g<l&&(w==t[g]||w==r[g]?(g==0&&(h=y),v=y+1,g++):g=0));let S,E=w<255?w>=48&&w<=57||w>=97&&w<=122?2:w>=65&&w<=90?1:0:(S=rv(w))!=S.toLowerCase()?1:S!=S.toUpperCase()?2:0;(!y||E==1&&m||_==0&&E!=0)&&(t[f]==w||r[f]==w&&(d=!0)?s[f++]=y:s.length&&(p=!1)),_=E,y+=Vr(w)}return f==l&&s[0]==0&&p?this.result(-100+(d?-200:0),s,e):g==l&&h==0?[-200-e.length,0,v]:a>-1?[-700-e.length,a,a+this.pattern.length]:g==l?[-200+-700-e.length,h,v]:f==l?this.result(-100+(d?-200:0)+-700+(p?0:-1100),s,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,r){let i=[e-r.length],o=1;for(let s of t){let a=s+(this.astral?Vr(tr(r,s)):1);o>1&&i[o-1]==s?i[o-1]=a:(i[o++]=s,i[o++]=a)}return i}}const Yi=at.define({combine(n){return Qi(n,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,t)=>e.label.localeCompare(t.label)},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>r=>kU(e(r),t(r)),addToOptions:(e,t)=>e.concat(t)})}});function kU(n,e){return n?e?n+" "+e:n:e}function OU(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i){let o=document.createElement("span");o.className="cm-completionLabel";let{label:s}=t,a=0;for(let l=1;l<i.length;){let u=i[l++],c=i[l++];u>a&&o.appendChild(document.createTextNode(s.slice(a,u)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(s.slice(u,c))),f.className="cm-completionMatchedText",a=c}return a<s.length&&o.appendChild(document.createTextNode(s.slice(a))),o},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function Ub(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class TU{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:a=>this.positionInfo(a),key:this};let r=e.state.field(t),{options:i,selected:o}=r.open,s=e.state.facet(Yi);this.optionContent=OU(s),this.optionClass=s.optionClass,this.range=Ub(i.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",a=>{for(let l=a.target,u;l&&l!=this.dom;l=l.parentNode)if(l.nodeName=="LI"&&(u=/-(\d+)$/.exec(l.id))&&+u[1]<i.length){uP(e,i[+u[1]]),a.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(i,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Ub(t.options.length,t.selected,this.view.state.facet(Yi).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let o=typeof i=="string"?document.createTextNode(i):i(r);if(!o)return;"then"in o?o.then(s=>{s&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(s)}).catch(s=>Kr(this.view.state,s,"completion info")):this.addInfoPane(o)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&IU(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect();if(i.top>Math.min(innerHeight,t.bottom)-10||i.bottom<Math.max(0,t.top)+10)return null;let o=Math.max(0,Math.min(i.top,innerHeight-r.height))-t.top,s=this.view.textDirection==wn.RTL,a=t.left,l=innerWidth-t.right;return s&&a<Math.min(r.width,l)?s=!1:!s&&l<Math.min(r.width,a)&&(s=!0),{top:o,left:s}}positionInfo(e){this.info&&(this.info.style.top=(e?e.top:-1e6)+"px",e&&(this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left)))}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let o=r.from;o<r.to;o++){let{completion:s,match:a}=e[o];const l=i.appendChild(document.createElement("li"));l.id=t+"-"+o,l.setAttribute("role","option");let u=this.optionClass(s);u&&(l.className=u);for(let c of this.optionContent){let f=c(s,this.view.state,a);f&&l.appendChild(f)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}}function PU(n){return e=>new TU(e,n)}function IU(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<t.top?n.scrollTop-=t.top-r.top:r.bottom>t.bottom&&(n.scrollTop+=r.bottom-t.bottom)}function Vb(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function AU(n,e){let t=[],r=0;for(let a of n)if(a.hasResult())if(a.result.filter===!1){let l=a.result.getMatch;for(let u of a.result.options){let c=[1e9-r++];if(l)for(let f of l(u))c.push(f);t.push(new Bb(u,a,c))}}else{let l=new CU(e.sliceDoc(a.from,a.to)),u;for(let c of a.result.options)(u=l.match(c.label))&&(c.boost!=null&&(u[0]+=c.boost),t.push(new Bb(c,a,u)))}let i=[],o=null,s=e.facet(Yi).compareCompletions;for(let a of t.sort((l,u)=>u.match[0]-l.match[0]||s(l.completion,u.completion)))!o||o.label!=a.completion.label||o.detail!=a.completion.detail||o.type!=null&&a.completion.type!=null&&o.type!=a.completion.type||o.apply!=a.completion.apply?i.push(a):Vb(a.completion)>Vb(o)&&(i[i.length-1]=a),o=a.completion;return i}class Zl{constructor(e,t,r,i,o){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Zl(this.options,qb(t,e),this.tooltip,this.timestamp,e)}static build(e,t,r,i,o){let s=AU(e,t);if(!s.length)return null;let a=t.facet(Yi).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let l=i.options[i.selected].completion;for(let u=0;u<s.length;u++)if(s[u].completion==l){a=u;break}}return new Zl(s,qb(r,a),{pos:e.reduce((l,u)=>u.hasResult()?Math.min(l,u.from):l,1e8),create:PU(ii),above:o.aboveCursor},i?i.timestamp:Date.now(),a)}map(e){return new Zl(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class qh{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new qh(NU,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(Yi),o=(r.override||t.languageDataAt("autocomplete",zo(t)).map(EU)).map(a=>(this.active.find(u=>u.source==a)||new Pr(a,this.active.some(u=>u.state!=0)?1:0)).update(e,r));o.length==this.active.length&&o.every((a,l)=>a==this.active[l])&&(o=this.active);let s=e.selection||o.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!RU(o,this.active)?Zl.build(o,t,this.id,this.open,r):this.open&&e.docChanged?this.open.map(e.changes):this.open;!s&&o.every(a=>a.state!=1)&&o.some(a=>a.hasResult())&&(o=o.map(a=>a.hasResult()?new Pr(a.source,0):a));for(let a of e.effects)a.is(fP)&&(s=s&&s.setSelected(a.value,this.id));return o==this.active&&s==this.open?this:new qh(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:xU}}function RU(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;r<e.length&&!e[r].hasResult;)r++;let i=t==n.length,o=r==e.length;if(i||o)return i==o;if(n[t++].result!=e[r++].result)return!1}}const xU={"aria-autocomplete":"list"};function qb(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const NU=[];function Qg(n){return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class Pr{constructor(e,t,r=-1){this.source=e,this.state=t,this.explicitPos=r}hasResult(){return!1}update(e,t){let r=Qg(e),i=this;r?i=i.handleUserEvent(e,r,t):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new Pr(i.source,0));for(let o of e.effects)if(o.is(Av))i=new Pr(i.source,1,o.value?zo(e.state):-1);else if(o.is(Hh))i=new Pr(i.source,0);else if(o.is(cP))for(let s of o.value)s.source==i.source&&(i=s);return i}handleUserEvent(e,t,r){return t=="delete"||!r.activateOnTyping?this.map(e.changes):new Pr(this.source,1)}handleChange(e){return e.changes.touchesRange(zo(e.startState))?new Pr(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Pr(this.source,this.state,e.mapPos(this.explicitPos))}}class Xl extends Pr{constructor(e,t,r,i,o){super(e,2,t),this.result=r,this.from=i,this.to=o}hasResult(){return!0}handleUserEvent(e,t,r){var i;let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),a=zo(e.state);if((this.explicitPos<0?a<=o:a<this.from)||a>s||t=="delete"&&zo(e.startState)==this.from)return new Pr(this.source,t=="input"&&r.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),u;return MU(this.result.validFor,e.state,o,s)?new Xl(this.source,l,this.result,o,s):this.result.update&&(u=this.result.update(this.result,o,s,new aP(e.state,a,l>=0)))?new Xl(this.source,l,u,u.from,(i=u.to)!==null&&i!==void 0?i:zo(e.state)):new Pr(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Pr(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Xl(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function MU(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return typeof n=="function"?n(i,t,r,e):lP(n,!0).test(i)}const Av=Pt.define(),Hh=Pt.define(),cP=Pt.define({map(n,e){return n.map(t=>t.map(e))}}),fP=Pt.define(),ii=Wn.define({create(){return qh.start()},update(n,e){return n.update(e)},provide:n=>[Ld.from(n,e=>e.tooltip),ut.contentAttributes.from(n,e=>e.attrs)]}),hP=75;function Dc(n,e="option"){return t=>{let r=t.state.field(ii,!1);if(!r||!r.open||Date.now()-r.open.timestamp<hP)return!1;let i=1,o;e=="page"&&(o=C7(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:s-1;return a<0?a=e=="page"?0:s-1:a>=s&&(a=e=="page"?s-1:0),t.dispatch({effects:fP.of(a)}),!0}}const DU=n=>{let e=n.state.field(ii,!1);return n.state.readOnly||!e||!e.open||Date.now()-e.open.timestamp<hP||e.open.selected<0?!1:(uP(n,e.open.options[e.open.selected]),!0)},LU=n=>n.state.field(ii,!1)?(n.dispatch({effects:Av.of(!0)}),!0):!1,jU=n=>{let e=n.state.field(ii,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Hh.of(null)}),!0)};class BU{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const Hb=50,FU=50,UU=1e3,VU=Fn.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of n.state.field(ii).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(ii);if(!n.selectionSet&&!n.docChanged&&n.startState.field(ii)==e)return;let t=n.transactions.some(r=>(r.selection||r.docChanged)&&!Qg(r));for(let r=0;r<this.running.length;r++){let i=this.running[r];if(t||i.updates.length+n.transactions.length>FU&&Date.now()-i.time>UU){for(let o of i.context.abortListeners)try{o()}catch(s){Kr(this.view.state,s)}i.context.abortListeners=null,this.running.splice(r--,1)}else i.updates.push(...n.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(r=>r.state==1&&!this.running.some(i=>i.active.source==r.source))?setTimeout(()=>this.startUpdate(),Hb):-1,this.composing!=0)for(let r of n.transactions)Qg(r)=="input"?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:n}=this.view,e=n.field(ii);for(let t of e.active)t.state==1&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=zo(e),r=new aP(e,t,n.explicitPos==t),i=new BU(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(o=>{i.context.aborted||(i.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:Hh.of(null)}),Kr(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),Hb))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Yi);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(i.done===void 0)continue;if(this.running.splice(r--,1),i.done){let s=new Xl(i.active.source,i.active.explicitPos,i.done,i.done.from,(n=i.done.to)!==null&&n!==void 0?n:zo(i.updates.length?i.updates[0].startState:this.view.state));for(let a of i.updates)s=s.update(a,t);if(s.hasResult()){e.push(s);continue}}let o=this.view.state.field(ii).active.find(s=>s.source==i.active.source);if(o&&o.state==1)if(i.done==null){let s=new Pr(i.active.source,0);for(let a of i.updates)s=s.update(a,t);s.state!=1&&e.push(s)}else this.startQuery(o)}e.length&&this.view.dispatch({effects:cP.of(e)})}},{eventHandlers:{blur(){let n=this.view.state.field(ii,!1);n&&n.tooltip&&this.view.state.facet(Yi).closeOnBlur&&this.view.dispatch({effects:Hh.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Av.of(!1)}),20),this.composing=0}}}),qU=ut.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),zh={brackets:["(","[","{","'",'"'],before:")]}:;>"},ws=Pt.define({map(n,e){let t=e.mapPos(n,-1,dr.TrackAfter);return t==null?void 0:t}}),Rv=Pt.define({map(n,e){return e.mapPos(n)}}),xv=new class extends Ls{};xv.startSide=1;xv.endSide=-1;const dP=Wn.define({create(){return Qt.empty},update(n,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,r=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(r,-1)&&(n=Qt.empty)}n=n.map(e.changes);for(let t of e.effects)t.is(ws)?n=n.update({add:[xv.range(t.value,t.value+1)]}):t.is(Rv)&&(n=n.update({filter:r=>r!=t.value}));return n}});function HU(){return[WU,dP]}const Kp="()[]{}<>";function pP(n){for(let e=0;e<Kp.length;e+=2)if(Kp.charCodeAt(e)==n)return Kp.charAt(e+1);return rv(n<128?n:n+1)}function mP(n,e){return n.languageDataAt("closeBrackets",e)[0]||zh}const zU=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),WU=ut.inputHandler.of((n,e,t,r)=>{if((zU?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||r.length==2&&Vr(tr(r,0))==1||e!=i.from||t!=i.to)return!1;let o=JU(n.state,r);return o?(n.dispatch(o),!0):!1}),KU=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=mP(n,n.selection.main.head).brackets||zh.brackets,i=null,o=n.changeByRange(s=>{if(s.empty){let a=YU(n.doc,s.head);for(let l of r)if(l==a&&Gd(n.doc,s.head)==pP(tr(l,0)))return{changes:{from:s.head-l.length,to:s.head+l.length},range:Le.cursor(s.head-l.length),userEvent:"delete.backward"}}return{range:i=s}});return i||e(n.update(o,{scrollIntoView:!0})),!i},GU=[{key:"Backspace",run:KU}];function JU(n,e){let t=mP(n,n.selection.main.head),r=t.brackets||zh.brackets;for(let i of r){let o=pP(tr(i,0));if(e==i)return o==i?XU(n,i,r.indexOf(i+i+i)>-1):QU(n,i,o,t.before||zh.before);if(e==o&&gP(n,n.selection.main.from))return ZU(n,i,o)}return null}function gP(n,e){let t=!1;return n.field(dP).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function Gd(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Vr(tr(t,0)))}function YU(n,e){let t=n.sliceString(e-2,e);return Vr(tr(t,0))==t.length?t:t.slice(1)}function QU(n,e,t,r){let i=null,o=n.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:t,from:s.to}],effects:ws.of(s.to+e.length),range:Le.range(s.anchor+e.length,s.head+e.length)};let a=Gd(n.doc,s.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+t,from:s.head},effects:ws.of(s.head+e.length),range:Le.cursor(s.head+e.length)}:{range:i=s}});return i?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function ZU(n,e,t){let r=null,i=n.selection.ranges.map(o=>o.empty&&Gd(n.doc,o.head)==t?Le.cursor(o.head+t.length):r=o);return r?null:n.update({selection:Le.create(i,n.selection.mainIndex),scrollIntoView:!0,effects:n.selection.ranges.map(({from:o})=>Rv.of(o))})}function XU(n,e,t){let r=null,i=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:e,from:o.to}],effects:ws.of(o.to+e.length),range:Le.range(o.anchor+e.length,o.head+e.length)};let s=o.head,a=Gd(n.doc,s);if(a==e){if(zb(n,s))return{changes:{insert:e+e,from:s},effects:ws.of(s+e.length),range:Le.cursor(s+e.length)};if(gP(n,s)){let l=t&&n.sliceDoc(s,s+e.length*3)==e+e+e;return{range:Le.cursor(s+e.length*(l?3:1)),effects:Rv.of(s)}}}else{if(t&&n.sliceDoc(s-2*e.length,s)==e+e&&zb(n,s-2*e.length))return{changes:{insert:e+e+e+e,from:s},effects:ws.of(s+e.length),range:Le.cursor(s+e.length)};if(n.charCategorizer(s)(a)!=mr.Word){let l=n.sliceDoc(s-1,s);if(l!=e&&n.charCategorizer(s)(l)!=mr.Word&&!$U(n,s,e))return{changes:{insert:e+e,from:s},effects:ws.of(s+e.length),range:Le.cursor(s+e.length)}}}return{range:r=o}});return r?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function zb(n,e){let t=fr(n).resolveInner(e+1);return t.parent&&t.from==e}function $U(n,e,t){let r=fr(n).resolveInner(e,-1);for(let i=0;i<5;i++){if(n.sliceDoc(r.from,r.from+t.length)==t){let s=r.firstChild;for(;s&&s.from==r.from&&s.to-s.from>t.length;){if(n.sliceDoc(s.to-t.length,s.to)==t)return!1;s=s.firstChild}return!0}let o=r.to==e&&r.parent;if(!o)break;r=o}return!1}function eV(n={}){return[ii,Yi.of(n),VU,tV,qU]}const vP=[{key:"Ctrl-Space",run:LU},{key:"Escape",run:jU},{key:"ArrowDown",run:Dc(!0)},{key:"ArrowUp",run:Dc(!1)},{key:"PageDown",run:Dc(!0,"page")},{key:"PageUp",run:Dc(!1,"page")},{key:"Enter",run:DU}],tV=il.highest(Dd.computeN([Yi],n=>n.facet(Yi).defaultKeymap?[vP]:[]));class nV{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class vs{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=e,o=r.facet(Ss).markerFilter;o&&(i=o(i));let s=pt.set(i.map(a=>a.from==a.to||a.from==a.to-1&&r.doc.lineAt(a.from).to==a.from?pt.widget({widget:new fV(a),diagnostic:a}).range(a.from):pt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity},diagnostic:a}).range(a.from,a.to)),!0);return new vs(s,t,Ua(s))}}function Ua(n,e=null,t=0){let r=null;return n.between(t,1e9,(i,o,{spec:s})=>{if(!(e&&s.diagnostic!=e))return r=new nV(i,o,s.diagnostic),!1}),r}function yP(n,e){return!!(n.effects.some(t=>t.is(Jd))||n.changes.touchesRange(e.pos))}function _P(n,e){return n.field(Wr,!1)?e:e.concat(Pt.appendConfig.of([Wr,ut.decorations.compute([Wr],t=>{let{selected:r,panel:i}=t.field(Wr);return!r||!i||r.from==r.to?pt.none:pt.set([iV.range(r.from,r.to)])}),E7(oV,{hideOn:yP}),hV]))}function rV(n,e){return{effects:_P(n,[Jd.of(e)])}}const Jd=Pt.define(),Nv=Pt.define(),bP=Pt.define(),Wr=Wn.define({create(){return new vs(pt.none,null,null)},update(n,e){if(e.docChanged){let t=n.diagnostics.map(e.changes),r=null;if(n.selected){let i=e.changes.mapPos(n.selected.from,1);r=Ua(t,n.selected.diagnostic,i)||Ua(t,null,i)}n=new vs(t,n.panel,r)}for(let t of e.effects)t.is(Jd)?n=vs.init(t.value,n.panel,e.state):t.is(Nv)?n=new vs(n.diagnostics,t.value?Yd.open:null,n.selected):t.is(bP)&&(n=new vs(n.diagnostics,n.panel,t.value));return n},provide:n=>[yu.from(n,e=>e.panel),ut.decorations.from(n,e=>e.diagnostics)]}),iV=pt.mark({class:"cm-lintRange cm-lintRange-active"});function oV(n,e,t){let{diagnostics:r}=n.state.field(Wr),i=[],o=2e8,s=0;r.between(e-(t<0?1:0),e+(t>0?1:0),(l,u,{spec:c})=>{e>=l&&e<=u&&(l==u||(e>l||t>0)&&(e<u||t<0))&&(i.push(c.diagnostic),o=Math.min(l,o),s=Math.max(u,s))});let a=n.state.facet(Ss).tooltipFilter;return a&&(i=a(i)),i.length?{pos:o,end:s,above:n.state.doc.lineAt(o).to<s,create(){return{dom:wP(n,i)}}}:null}function wP(n,e){return mn("ul",{class:"cm-tooltip-lint"},e.map(t=>EP(n,t,!1)))}const sV=n=>{let e=n.state.field(Wr,!1);(!e||!e.panel)&&n.dispatch({effects:_P(n.state,[Nv.of(!0)])});let t=vu(n,Yd.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Wb=n=>{let e=n.state.field(Wr,!1);return!e||!e.panel?!1:(n.dispatch({effects:Nv.of(!1)}),!0)},aV=n=>{let e=n.state.field(Wr,!1);if(!e)return!1;let t=n.state.selection.main,r=e.diagnostics.iter(t.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==t.from&&r.to==t.to)?!1:(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},lV=[{key:"Mod-Shift-m",run:sV},{key:"F8",run:aV}],uV=Fn.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(Ss);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let n=Date.now();if(n<this.lintTime-10)setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Ss);Promise.all(t.map(r=>Promise.resolve(r(this.view)))).then(r=>{let i=r.reduce((o,s)=>o.concat(s));this.view.state.doc==e.doc&&this.view.dispatch(rV(this.view.state,i))},r=>{Kr(this.view.state,r)})}}update(n){let e=n.state.facet(Ss);(n.docChanged||e!=n.startState.facet(Ss))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Ss=at.define({combine(n){return Object.assign({sources:n.map(e=>e.source)},Qi(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:uV});function cV(n,e={}){return Ss.of({source:n,config:e})}function SP(n){let e=[];if(n)e:for(let{name:t}of n){for(let r=0;r<t.length;r++){let i=t[r];if(/[a-zA-Z]/.test(i)&&!e.some(o=>o.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function EP(n,e,t){var r;let i=t?SP(e.actions):[];return mn("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},mn("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(r=e.actions)===null||r===void 0?void 0:r.map((o,s)=>{let a=f=>{f.preventDefault();let d=Ua(n.state.field(Wr).diagnostics,e);d&&o.apply(n,d.from,d.to)},{name:l}=o,u=i[s]?l.indexOf(i[s]):-1,c=u<0?l:[l.slice(0,u),mn("u",l.slice(u,u+1)),l.slice(u+1)];return mn("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${l}${u<0?"":` (access key "${i[s]})"`}.`},c)}),e.source&&mn("div",{class:"cm-diagnosticSource"},e.source))}class fV extends os{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return mn("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class Kb{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=EP(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Yd{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)Wb(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=SP(o.actions);for(let a=0;a<s.length;a++)if(s[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=Ua(this.view.state.field(Wr).diagnostics,o);l&&o.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(i.target)&&this.moveSelection(o)};this.list=mn("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:r}),this.dom=mn("div",{class:"cm-panel-lint"},this.list,mn("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Wb(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(Wr).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Wr),r=0,i=!1,o=null;for(e.between(0,this.view.state.doc.length,(s,a,{spec:l})=>{let u=-1,c;for(let f=r;f<this.items.length;f++)if(this.items[f].diagnostic==l.diagnostic){u=f;break}u<0?(c=new Kb(this.view,l.diagnostic),this.items.splice(r,0,c),i=!0):(c=this.items[u],u>r&&(this.items.splice(r,u-r),i=!0)),t&&c.diagnostic==t.diagnostic?c.dom.hasAttribute("aria-selected")||(c.dom.setAttribute("aria-selected","true"),o=c):c.dom.hasAttribute("aria-selected")&&c.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new Kb(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:a})=>{s.top<a.top?this.list.scrollTop-=a.top-s.top:s.bottom>a.bottom&&(this.list.scrollTop+=s.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Wr),r=Ua(t.diagnostics,this.items[e].diagnostic);!r||this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:bP.of(r)})}static open(e){return new Yd(e)}}function Jf(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Gp(n){return Jf(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const hV=ut.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Gp("#d11")},".cm-lintRange-warning":{backgroundImage:Gp("orange")},".cm-lintRange-info":{backgroundImage:Gp("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});class dV extends Ji{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((t,r)=>{let i=r.severity;return i=="error"||i=="warning"&&t=="info"?i:t},"info")}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let r=this.diagnostics,i=e.state.facet(Qd).tooltipFilter;return i&&(r=i(r)),r.length&&(t.onmouseover=()=>mV(e,t,r)),t}}function pV(n,e){let t=r=>{let i=e.getBoundingClientRect();if(!(r.clientX>i.left-10&&r.clientX<i.right+10&&r.clientY>i.top-10&&r.clientY<i.bottom+10)){for(let o=r.target;o;o=o.parentNode)if(o.nodeType==1&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),n.state.field(kP)&&n.dispatch({effects:Mv.of(null)})}};window.addEventListener("mousemove",t)}function mV(n,e,t){function r(){let s=n.elementAtHeight(e.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(s.from)&&n.dispatch({effects:Mv.of({pos:s.from,above:!1,create(){return{dom:wP(n,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,pV(n,e)}let{hoverTime:i}=n.state.facet(Qd),o=setTimeout(r,i);e.onmouseout=()=>{clearTimeout(o),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(o),o=setTimeout(r,i)}}function gV(n,e){let t=Object.create(null);for(let i of e){let o=n.lineAt(i.from);(t[o.from]||(t[o.from]=[])).push(i)}let r=[];for(let i in t)r.push(new dV(t[i]).range(+i));return Qt.of(r,!0)}const vV=YT({class:"cm-gutter-lint",markers:n=>n.state.field(CP)}),CP=Wn.define({create(){return Qt.empty},update(n,e){n=n.map(e.changes);let t=e.state.facet(Qd).markerFilter;for(let r of e.effects)if(r.is(Jd)){let i=r.value;t&&(i=t(i||[])),n=gV(e.state.doc,i.slice(0))}return n}}),Mv=Pt.define(),kP=Wn.define({create(){return null},update(n,e){return n&&e.docChanged&&(n=yP(e,n)?null:Object.assign(Object.assign({},n),{pos:e.changes.mapPos(n.pos)})),e.effects.reduce((t,r)=>r.is(Mv)?r.value:t,n)},provide:n=>Ld.from(n)}),yV=ut.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:Jf('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:Jf('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error:before":{content:Jf('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),Qd=at.define({combine(n){return Qi(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function _V(n={}){return[Qd.of(n),CP,vV,yV,kP]}const bV=(()=>[x7(),D7(),e7(),G9(),b9(),qB(),JB(),jt.allowMultipleSelections.of(!0),a9(),y4(C9,{fallback:!0}),R9(),HU(),eV(),h7(),m7(),s7(),$F(),Dd.of([...GU,...GF,...vU,...iF,...v9,...vP,...lV])])();class Wh{constructor(e,t,r,i,o,s,a,l,u,c=0,f){this.p=e,this.stack=t,this.state=r,this.reducePos=i,this.pos=o,this.score=s,this.buffer=a,this.bufferBase=l,this.curContext=u,this.lookAhead=c,this.parent=f}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let i=e.parser.context;return new Wh(e,[],t,r,r,0,[],0,i?new Gb(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,r=e&65535,{parser:i}=this.p,o=i.dynamicPrecedence(r);if(o&&(this.score+=o),t==0){this.pushState(i.getGoto(this.state,r,!0),this.reducePos),r<i.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,4,!0),this.reduceContext(r,this.reducePos);return}let s=this.stack.length-(t-1)*3-(e&262144?6:0),a=this.stack[s-2],l=this.stack[s-1],u=this.bufferBase+this.buffer.length-l;if(r<i.minRepeatTerm||e&131072){let c=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,a,c,u+4,!0)}if(e&262144)this.state=this.stack[s];else{let c=this.stack[s-3];this.state=i.getGoto(c,r,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(r,a)}storeNode(e,t,r,i=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,a=this.buffer.length;if(a==0&&s.parent&&(a=s.bufferBase-s.parent.bufferBase,s=s.parent),a>0&&s.buffer[a-4]==0&&s.buffer[a-1]>-1){if(t==r)return;if(s.buffer[a-2]>=t){s.buffer[a-2]=r;return}}}if(!o||this.pos==r)this.buffer.push(e,t,r,i);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0)for(;s>0&&this.buffer[s-2]>r;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,i>4&&(i-=4);this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=r,this.buffer[s+3]=i}}shift(e,t,r){let i=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let o=e,{parser:s}=this.p;(r>this.pos||t<=s.maxNode)&&(this.pos=r,s.stateFlag(o,1)||(this.reducePos=r)),this.pushState(o,i),this.shiftContext(t,i),t<=s.maxNode&&this.buffer.push(t,i,r,4)}else this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4)}apply(e,t,r){e&65536?this.reduce(e):this.shift(e,t,r)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new Wh(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new wV(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if((r&65536)==0)return!0;if(r==0)return!1;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let i=[];for(let o=0,s;o<t.length;o+=2)(s=t[o+1])!=this.state&&this.p.parser.hasAction(s,e)&&i.push(t[o],s);if(this.stack.length<120)for(let o=0;i.length<4<<1&&o<t.length;o+=2){let s=t[o+1];i.some((a,l)=>l&1&&a==s)||i.push(t[o],s)}t=i}let r=[];for(let i=0;i<t.length&&r.length<4;i+=2){let o=t[i+1];if(o==this.state)continue;let s=this.split();s.pushState(o,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[i],this.pos),s.score-=200,r.push(s)}return r}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if((e&65536)==0)return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let r=e>>19,i=e&65535,o=this.stack.length-r*3;if(o<0||t.getGoto(this.stack[o],i,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Gb(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Gb{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var Jb;(function(n){n[n.Insert=200]="Insert",n[n.Delete=190]="Delete",n[n.Reduce=100]="Reduce",n[n.MaxNext=4]="MaxNext",n[n.MaxInsertStackDepth=300]="MaxInsertStackDepth",n[n.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(Jb||(Jb={}));class wV{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class Kh{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Kh(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Kh(this.stack,this.pos,this.index)}}class Yf{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Yb=new Yf;class SV{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Yb,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,i=this.rangeIndex,o=this.pos+e;for(;o<r.from;){if(!i)return null;let s=this.ranges[--i];o-=r.from-s.to,r=s}for(;t<0?o>r.to:o>=r.to;){if(i==this.ranges.length-1)return null;let s=this.ranges[++i];o+=s.from-r.to,r=s}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,r,i;if(t>=0&&t<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(r=o,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let s=this.rangeIndex,a=this.range;for(;a.to<=r;)a=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Yb,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return r}}class Qf{constructor(e,t){this.data=e,this.id=t}token(e,t){EV(this.data,e,t,this.id)}}Qf.prototype.contextual=Qf.prototype.fallback=Qf.prototype.extend=!1;function EV(n,e,t,r){let i=0,o=1<<r,{parser:s}=t.p,{dialect:a}=s;e:for(;(o&n[i])!=0;){let l=n[i+1];for(let d=i+3;d<l;d+=2)if((n[d+1]&o)>0){let g=n[d];if(a.allows(g)&&(e.token.value==-1||e.token.value==g||s.overrides(g,e.token.value))){e.acceptToken(g);break}}let u=e.next,c=0,f=n[i+2];if(e.next<0&&f>c&&n[l+f*3-3]==65535){i=n[l+f*3-1];continue e}for(;c<f;){let d=c+f>>1,g=l+d+(d<<1),h=n[g],v=n[g+1];if(u<h)f=d;else if(u>=v)c=d+1;else{i=n[g+2],e.advance();continue e}}break}}function Lc(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let r=0,i=0;r<n.length;){let o=0;for(;;){let s=n.charCodeAt(r++),a=!1;if(s==126){o=65535;break}s>=92&&s--,s>=34&&s--;let l=s-32;if(l>=46&&(l-=46,a=!0),o+=l,a)break;o*=46}t?t[i++]=o:t=new e(o)}return t}const di=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let Jp=null;var Qb;(function(n){n[n.Margin=25]="Margin"})(Qb||(Qb={}));function Zb(n,e,t){let r=n.cursor(rr.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}class CV{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Zb(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Zb(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],i=this.index[t];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=r.children[i],s=this.start[t]+r.positions[i];if(s>e)return this.nextStart=s,null;if(o instanceof jn){if(s==e){if(s<this.safeFrom)return null;let a=s+o.length;if(a<=this.safeTo){let l=o.prop(Bt.lookAhead);if(!l||a+l<this.fragment.to)return o}}this.index[t]++,s+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+o.length}}}class kV{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new Yf)}getActions(e){let t=0,r=null,{parser:i}=e.p,{tokenizers:o}=i,s=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let u=0;u<o.length;u++){if((1<<u&s)==0)continue;let c=o[u],f=this.tokens[u];if(!(r&&!c.fallback)&&((c.contextual||f.start!=e.pos||f.mask!=s||f.context!=a)&&(this.updateCachedToken(f,c,e),f.mask=s,f.context=a),f.lookAhead>f.end+25&&(l=Math.max(f.lookAhead,l)),f.value!=0)){let d=t;if(f.extended>-1&&(t=this.addActions(e,f.extended,f.end,t)),t=this.addActions(e,f.value,f.end,t),!c.extend&&(r=f,t>d))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!r&&e.pos==this.stream.end&&(r=new Yf,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Yf,{pos:r,p:i}=e;return t.start=r,t.end=Math.min(r+1,i.stream.end),t.value=r==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,r){let i=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(i,e),r),e.value>-1){let{parser:o}=r.p;for(let s=0;s<o.specialized.length;s++)if(o.specialized[s]==e.value){let a=o.specializers[s](this.stream.read(e.start,e.end),r);if(a>=0&&r.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,r,i){for(let o=0;o<i;o+=3)if(this.actions[o]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=r,i}addActions(e,t,r,i){let{state:o}=e,{parser:s}=e.p,{data:a}=s;for(let l=0;l<2;l++)for(let u=s.stateSlot(o,l?2:1);;u+=3){if(a[u]==65535)if(a[u+1]==1)u=oo(a,u+2);else{i==0&&a[u+1]==2&&(i=this.putAction(oo(a,u+2),t,r,i));break}a[u]==t&&(i=this.putAction(oo(a,u+1),t,r,i))}return i}}var Xb;(function(n){n[n.Distance=5]="Distance",n[n.MaxRemainingPerStep=3]="MaxRemainingPerStep",n[n.MinBufferLengthPrune=500]="MinBufferLengthPrune",n[n.ForceReduceLimit=10]="ForceReduceLimit",n[n.CutDepth=15e3]="CutDepth",n[n.CutTo=9e3]="CutTo"})(Xb||(Xb={}));class OV{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new SV(t,i),this.tokens=new kV(e,this.stream),this.topTerm=e.top[1];let{from:o}=i[0];this.stacks=[Wh.start(this,e.top[0],o)],this.fragments=r.length&&this.stream.end-o>e.bufferLength*4?new CV(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],i,o;for(let s=0;s<e.length;s++){let a=e[s];for(;;){if(this.tokens.mainToken=null,a.pos>t)r.push(a);else{if(this.advanceStack(a,r,e))continue;{i||(i=[],o=[]),i.push(a);let l=this.tokens.getMainToken(a);o.push(l.value,l.end)}}break}}if(!r.length){let s=i&&PV(i);if(s)return this.stackToTree(s);if(this.parser.strict)throw di&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let s=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,o,r);if(s)return this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(r.length>s)for(r.sort((a,l)=>l.score-a.score);r.length>s;)r.pop();r.some(a=>a.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let s=0;s<r.length-1;s++){let a=r[s];for(let l=s+1;l<r.length;l++){let u=r[l];if(a.sameState(u)||a.buffer.length>500&&u.buffer.length>500)if((a.score-u.score||a.buffer.length-u.buffer.length)>0)r.splice(l--,1);else{r.splice(s--,1);continue e}}}}this.minStackPos=r[0].pos;for(let s=1;s<r.length;s++)r[s].pos<this.minStackPos&&(this.minStackPos=r[s].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let i=e.pos,{parser:o}=this,s=di?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,c=u?e.curContext.hash:0;for(let f=this.fragments.nodeAt(i);f;){let d=this.parser.nodeSet.types[f.type.id]==f.type?o.getGoto(e.state,f.type.id):-1;if(d>-1&&f.length&&(!u||(f.prop(Bt.contextHash)||0)==c))return e.useNode(f,d),di&&console.log(s+this.stackID(e)+` (via reuse of ${o.getName(f.type.id)})`),!0;if(!(f instanceof jn)||f.children.length==0||f.positions[0]>0)break;let g=f.children[0];if(g instanceof jn&&f.positions[0]==0)f=g;else break}}let a=o.stateSlot(e.state,4);if(a>0)return e.reduce(a),di&&console.log(s+this.stackID(e)+` (via always-reduce ${o.getName(a&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let u=0;u<l.length;){let c=l[u++],f=l[u++],d=l[u++],g=u==l.length||!r,h=g?e:e.split();if(h.apply(c,f,d),di&&console.log(s+this.stackID(h)+` (via ${(c&65536)==0?"shift":`reduce of ${o.getName(c&65535)}`} for ${o.getName(f)} @ ${i}${h==e?"":", split"})`),g)return!0;h.pos>i?t.push(h):r.push(h)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return $b(e,t),!0}}runRecovery(e,t,r){let i=null,o=!1;for(let s=0;s<e.length;s++){let a=e[s],l=t[s<<1],u=t[(s<<1)+1],c=di?this.stackID(a)+" -> ":"";if(a.deadEnd&&(o||(o=!0,a.restart(),di&&console.log(c+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))))continue;let f=a.split(),d=c;for(let g=0;f.forceReduce()&&g<10&&(di&&console.log(d+this.stackID(f)+" (via force-reduce)"),!this.advanceFully(f,r));g++)di&&(d=this.stackID(f)+" -> ");for(let g of a.recoverByInsert(l))di&&console.log(c+this.stackID(g)+" (via recover-insert)"),this.advanceFully(g,r);this.stream.end>a.pos?(u==a.pos&&(u++,l=0),a.recoverByDelete(l,u),di&&console.log(c+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),$b(a,r)):(!i||i.score<a.score)&&(i=a)}return i}stackToTree(e){return e.close(),jn.build({buffer:Kh.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Jp||(Jp=new WeakMap)).get(e);return t||Jp.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function $b(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class TV{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}class Gh extends n4{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let r=Object.keys(e.topRules).map(a=>e.topRules[a][1]),i=[];for(let a=0;a<t.length;a++)i.push([]);function o(a,l,u){i[a].push([l,l.deserialize(String(u))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=Bt[l]);for(let u=1;u<a.length;){let c=a[u++];if(c>=0)o(c,l,a[u++]);else{let f=a[u+-c];for(let d=-c;d>0;d--)o(a[u++],l,f);u++}}}this.nodeSet=new dv(t.map((a,l)=>Mr.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:i[l],top:r.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=$T;let s=Lc(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(tw),this.states=Lc(e.states,Uint32Array),this.data=Lc(e.stateData),this.goto=Lc(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new Qf(s,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let i=new OV(this,e,t,r);for(let o of this.wrappers)i=o(i,e,t,r);return i}getGoto(e,t,r=!1){let i=this.goto;if(t>=i[0])return-1;for(let o=i[t+1];;){let s=i[o++],a=s&1,l=i[o++];if(a&&r)return l;for(let u=o+(s>>1);o<u;o++)if(i[o]==e)return l;if(a)return-1}}hasAction(e,t){let r=this.data;for(let i=0;i<2;i++)for(let o=this.stateSlot(e,i?2:1),s;;o+=3){if((s=r[o])==65535)if(r[o+1]==1)s=r[o=oo(r,o+2)];else{if(r[o+1]==2)return oo(r,o+2);break}if(s==t||s==0)return oo(r,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=oo(this.data,r+2);else return!1;if(t==oo(this.data,r+1))return!0}}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=oo(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];t.some((o,s)=>s&1&&o==i)||t.push(this.data[r],i)}}return t}overrides(e,t){let r=ew(this.data,this.tokenPrecTable,t);return r<0||ew(this.data,this.tokenPrecTable,e)<r}configure(e){let t=Object.assign(Object.create(Gh.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(o=>o.from==r);return i?i.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,i)=>{let o=e.specializers.find(a=>a.from==r.external);if(!o)return r;let s=Object.assign(Object.assign({},r),{external:o.to});return t.specializers[i]=tw(s),s})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let o of e.split(" ")){let s=t.indexOf(o);s>=0&&(r[s]=!0)}let i=null;for(let o=0;o<t.length;o++)if(!r[o])for(let s=this.dialects[t[o]],a;(a=this.data[s++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[a]=1;return new TV(e,r,i)}static deserialize(e){return new Gh(e)}}function oo(n,e){return n[e]|n[e+1]<<16}function ew(n,e,t){for(let r=e,i;(i=n[r])!=65535;r++)if(i==t)return r-e;return-1}function PV(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function tw(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}const IV=i4({String:Ke.string,Number:Ke.number,"True False":Ke.bool,PropertyName:Ke.propertyName,Null:Ke.null,",":Ke.separator,"[ ]":Ke.squareBracket,"{ }":Ke.brace}),AV=Gh.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"\u26A0 JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[IV],skippedNodes:[0],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),RV=Rh.define({parser:AV.configure({props:[l4.add({Object:Sb({except:/^\s*\}/}),Array:Sb({except:/^\s*\]/})}),c4.add({"Object Array":u9})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function xV(){return new Z7(RV)}function nw(n){let e,t,r;return{c(){e=ee("div"),t=Ue("Line: "),r=Ue(n[0]),T(e,"class","jse-status-bar-info svelte-outk3w")},m(i,o){ue(i,e,o),j(e,t),j(e,r)},p(i,o){o&1&&_t(r,i[0])},d(i){i&&le(e)}}}function rw(n){let e,t,r;return{c(){e=ee("div"),t=Ue("Column: "),r=Ue(n[1]),T(e,"class","jse-status-bar-info svelte-outk3w")},m(i,o){ue(i,e,o),j(e,t),j(e,r)},p(i,o){o&2&&_t(r,i[1])},d(i){i&&le(e)}}}function iw(n){let e,t,r,i;return{c(){e=ee("div"),t=Ue("Selection: "),r=Ue(n[2]),i=Ue(" characters"),T(e,"class","jse-status-bar-info svelte-outk3w")},m(o,s){ue(o,e,s),j(e,t),j(e,r),j(e,i)},p(o,s){s&4&&_t(r,o[2])},d(o){o&&le(e)}}}function NV(n){let e,t,r,i=n[0]!==void 0&&nw(n),o=n[1]!==void 0&&rw(n),s=n[2]!==void 0&&n[2]>0&&iw(n);return{c(){e=ee("div"),i&&i.c(),t=me(),o&&o.c(),r=me(),s&&s.c(),T(e,"class","jse-status-bar svelte-outk3w")},m(a,l){ue(a,e,l),i&&i.m(e,null),j(e,t),o&&o.m(e,null),j(e,r),s&&s.m(e,null)},p(a,[l]){a[0]!==void 0?i?i.p(a,l):(i=nw(a),i.c(),i.m(e,t)):i&&(i.d(1),i=null),a[1]!==void 0?o?o.p(a,l):(o=rw(a),o.c(),o.m(e,r)):o&&(o.d(1),o=null),a[2]!==void 0&&a[2]>0?s?s.p(a,l):(s=iw(a),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:Ne,o:Ne,d(a){a&&le(e),i&&i.d(),o&&o.d(),s&&s.d()}}}function MV(n,e,t){var r,i,o,s,a;let{editorState:l}=e,u,c,f,d,g;return n.$$set=h=>{"editorState"in h&&t(3,l=h.editorState)},n.$$.update=()=>{n.$$.dirty&56&&t(9,u=t(5,i=t(4,r=l==null?void 0:l.selection)===null||r===void 0?void 0:r.main)===null||i===void 0?void 0:i.head),n.$$.dirty&584&&t(10,c=t(6,o=l==null?void 0:l.doc)===null||o===void 0?void 0:o.lineAt(u)),n.$$.dirty&1024&&t(0,f=c?c.number:void 0),n.$$.dirty&1536&&t(1,d=c?u-c.from+1:void 0),n.$$.dirty&392&&t(2,g=t(8,a=t(7,s=l==null?void 0:l.selection)===null||s===void 0?void 0:s.ranges)===null||a===void 0?void 0:a.reduce((h,v)=>h+v.to-v.from,0))},[f,d,g,l,r,i,o,s,a,u,c]}class DV extends rt{constructor(e){super(),nt(this,e,MV,NV,on,{editorState:3})}}const Dv=qu.define([{tag:Ke.propertyName,color:"var(--jse-key-color)"},{tag:Ke.number,color:"var(--jse-value-color-number)"},{tag:Ke.bool,color:"var(--jse-value-color-boolean)"},{tag:Ke.string,color:"var(--jse-value-color-string)"},{tag:Ke.keyword,color:"var(--jse-value-color-null)"}]),LV=y4(Dv),jV=Dv.style;Dv.style=n=>jV(n||[]);function BV(n){return n&&n.space===!0&&Object.keys(n).length===1}function ow(n){return typeof n.parseError=="object"&&n.parseError!==null}function FV(n){return Array.isArray(n.validationErrors)}var sw=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function UV(n,e){return!!(n===e||sw(n)&&sw(e))}function VV(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!UV(n[t],e[t]))return!1;return!0}function OP(n,e){e===void 0&&(e=VV);var t=null;function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(t&&t.lastThis===this&&e(i,t.lastArgs))return t.lastResult;var s=n.apply(this,i);return t={lastResult:s,lastArgs:i,lastThis:this},s}return r.clear=function(){t=null},r}function Yp(n,e){const t=Date.now(),r=n(),i=Date.now();return e(i-t),r}const Bl=Sr("validation");function qV(n){const e={};return n.forEach(t=>{e[Ge(t.path)]=t}),n.forEach(t=>{let r=t.path;for(;r.length>0;){r=qt(r);const i=Ge(r);i in e||(e[i]={isChildError:!0,path:r,message:"Contains invalid data"})}}),e}function HV(n,e){return Bl("validateJSON"),e(n)}function zV(n,e){if(Bl("validateText"),n.length>ZA)return{validationErrors:[{path:[],message:"Validation turned off: the document is too large",severity:en.info}]};if(n.length===0)return{validationErrors:[]};try{const t=Yp(()=>JSON.parse(n),i=>Bl(`validate: parsed json in ${i} ms`));return e?{validationErrors:Yp(()=>e(t),i=>Bl(`validate: validated json in ${i} ms`))}:{validationErrors:[]}}catch(t){const r=Yp(()=>WV(n),o=>Bl(`validate: checked whether repairable in ${o} ms`));return{parseError:Y0(n,t.message||t.toString()),isRepairable:r}}}function WV(n){if(n.length>XA)return!1;try{return JSON.parse(qo(n)),!0}catch{return!1}}function aw(n){let e,t;return e=new rj({props:{readOnly:n[1],onFormat:n[17],onCompact:n[18],onSort:n[19],onTransform:n[20],onToggleSearch:n[21],onUndo:n[22],onRedo:n[23],canFormat:!n[15],canCompact:!n[15],canSort:!n[15],canTransform:!n[15],canUndo:n[10],canRedo:n[11],onRenderMenu:n[5]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i[0]&2&&(o.readOnly=r[1]),i[0]&32768&&(o.canFormat=!r[15]),i[0]&32768&&(o.canCompact=!r[15]),i[0]&32768&&(o.canSort=!r[15]),i[0]&32768&&(o.canTransform=!r[15]),i[0]&1024&&(o.canUndo=r[10]),i[0]&2048&&(o.canRedo=r[11]),i[0]&32&&(o.onRenderMenu=r[5]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function KV(n){let e;return{c(){e=ee("div"),e.innerHTML=`<div class="jse-loading-space svelte-7prtn5"></div> 
      <div class="jse-loading svelte-7prtn5">loading...</div>`,T(e,"class","jse-contents svelte-7prtn5")},m(t,r){ue(t,e,r)},p:Ne,i:Ne,o:Ne,d(t){t&&le(e)}}}function GV(n){let e,t,r,i,o,s,a,l=n[14]&&lw(n),u=n[3]&&uw(n),c=n[12]&&cw(n);return s=new xO({props:{validationErrors:n[9],selectError:n[26]}}),{c(){l&&l.c(),e=me(),t=ee("div"),r=me(),u&&u.c(),i=me(),c&&c.c(),o=me(),Te(s.$$.fragment),T(t,"class","jse-contents svelte-7prtn5"),ze(t,"jse-hidden",n[14])},m(f,d){l&&l.m(f,d),ue(f,e,d),ue(f,t,d),n[47](t),ue(f,r,d),u&&u.m(f,d),ue(f,i,d),c&&c.m(f,d),ue(f,o,d),ke(s,f,d),a=!0},p(f,d){f[14]?l?(l.p(f,d),d[0]&16384&&X(l,1)):(l=lw(f),l.c(),X(l,1),l.m(e.parentNode,e)):l&&(Ve(),te(l,1,1,()=>{l=null}),qe()),d[0]&16384&&ze(t,"jse-hidden",f[14]),f[3]?u?(u.p(f,d),d[0]&8&&X(u,1)):(u=uw(f),u.c(),X(u,1),u.m(i.parentNode,i)):u&&(Ve(),te(u,1,1,()=>{u=null}),qe()),f[12]?c?(c.p(f,d),d[0]&4096&&X(c,1)):(c=cw(f),c.c(),X(c,1),c.m(o.parentNode,o)):c&&(Ve(),te(c,1,1,()=>{c=null}),qe());const g={};d[0]&512&&(g.validationErrors=f[9]),s.$set(g)},i(f){a||(X(l),X(u),X(c),X(s.$$.fragment,f),a=!0)},o(f){te(l),te(u),te(c),te(s.$$.fragment,f),a=!1},d(f){l&&l.d(f),f&&le(e),f&&le(t),n[47](null),f&&le(r),u&&u.d(f),f&&le(i),c&&c.d(f),f&&le(o),Oe(s,f)}}}function lw(n){let e,t;return e=new Gs({props:{icon:rl,type:"error",message:`The JSON document is larger than ${yc(Um,1024)}, and may crash your browser when loading it in text mode. Actual size: ${yc(n[0].length,1024)}.`,actions:[{text:"Open anyway",title:"Open the document in text mode. This may freeze or crash your browser.",onClick:n[24]},{text:"Open in tree mode",title:"Open the document in tree mode. Tree mode can handle large documents.",onClick:n[4]},{text:"Cancel",title:"Cancel opening this large document.",onClick:n[25]}]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i[0]&1&&(o.message=`The JSON document is larger than ${yc(Um,1024)}, and may crash your browser when loading it in text mode. Actual size: ${yc(r[0].length,1024)}.`),i[0]&16&&(o.actions=[{text:"Open anyway",title:"Open the document in text mode. This may freeze or crash your browser.",onClick:r[24]},{text:"Open in tree mode",title:"Open the document in tree mode. Tree mode can handle large documents.",onClick:r[4]},{text:"Cancel",title:"Cancel opening this large document.",onClick:r[25]}]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function uw(n){let e,t;return e=new DV({props:{editorState:n[8]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i[0]&256&&(o.editorState=r[8]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function cw(n){let e,t;return e=new Gs({props:{type:"error",icon:rl,message:n[12].message,actions:n[13],onClick:n[48]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i[0]&4096&&(o.message=r[12].message),i[0]&8192&&(o.actions=r[13]),i[0]&4096&&(o.onClick=r[48]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function JV(n){let e,t,r,i,o,s=n[2]&&aw(n);const a=[GV,KV],l=[];function u(c,f){return c[16]?1:0}return r=u(n),i=l[r]=a[r](n),{c(){e=ee("div"),s&&s.c(),t=me(),i.c(),T(e,"class","jse-text-mode svelte-7prtn5"),ze(e,"no-main-menu",!n[2])},m(c,f){ue(c,e,f),s&&s.m(e,null),j(e,t),l[r].m(e,null),n[49](e),o=!0},p(c,f){c[2]?s?(s.p(c,f),f[0]&4&&X(s,1)):(s=aw(c),s.c(),X(s,1),s.m(e,t)):s&&(Ve(),te(s,1,1,()=>{s=null}),qe()),i.p(c,f),f[0]&4&&ze(e,"no-main-menu",!c[2])},i(c){o||(X(s),X(i),o=!0)},o(c){te(s),te(i),o=!1},d(c){c&&le(e),s&&s.d(),l[r].d(),n[49](null)}}}function fw(n){return{from:n.from,to:n.to,message:n.message,actions:n.actions,severity:n.severity,source:void 0}}function YV(n,e,t){let r,i,o,s,a,{readOnly:l=!1}=e,{mainMenuBar:u=!0}=e,{statusBar:c=!0}=e,{text:f=""}=e,{indentation:d=2}=e,{tabSize:g=4}=e,{escapeUnicodeCharacters:h=!1}=e,{validator:v=null}=e,{onChange:m=null}=e,{onSwitchToTreeMode:p=Gt}=e,{onError:y}=e,{onFocus:b=Gt}=e,{onBlur:_=Gt}=e,{onRenderMenu:w=Gt}=e,{onSortModal:S}=e,{onTransformModal:E}=e;const O=Sr("jsoneditor:TextMode"),R={key:"Mod-i",run:he,shift:Pe,preventDefault:!0},D=typeof window>"u";O("isSSR:",D);let F,B,H,L,N,U=!1,$=[];const Z=new jo,A=new jo,P=new jo,V=new jo;let W=h;Nr(async()=>{if(!D)try{B=Y({target:F,initialText:o?"":f,readOnly:l,indentation:d}),q()}catch(we){console.error(we)}}),fo(()=>{B&&(O("Destroy CodeMirror editor"),B.destroy())});let z=!1,I=!1;const M=mh(),J=mh();function q(){B&&(O("focus"),B.focus())}let Q=!1;IO({onMount:Nr,onDestroy:fo,getWindow:()=>cu(L),hasFocus:()=>Q&&document.hasFocus()||og(L),onFocus:b,onBlur:_});function ae(we){O("patch",we);const $e=f,Tt=JSON.parse(f),Ct=ks(Tt,we),At=Tk(Tt,we);return t(0,f=JSON.stringify(Ct,null,d)),f!==$e&&it(f,$e),{json:Ct,previousJson:Tt,undo:At,redo:we}}function he(){if(O("format"),!l)try{const we=f,$e=JSON.parse(f);t(0,f=JSON.stringify($e,null,d)),f!==we&&it(f,we)}catch(we){y(we)}}function Pe(){if(O("compact"),!l)try{const we=f,$e=JSON.parse(f);t(0,f=JSON.stringify($e)),f!==we&&it(f,we)}catch(we){y(we)}}function Fe(){if(O("repair"),!l)try{const we=f;t(0,f=qo(f)),t(45,ct=pp),t(12,ft=void 0),f!==we&&it(f,we)}catch(we){y(we)}}function Ae(){if(!l)try{const we=JSON.parse(f);Q=!0,S({id:M,json:we,selectedPath:[],onSort:async $e=>{O("onSort",$e),ae($e)},onClose:()=>{Q=!1,q()}})}catch(we){y(we)}}function ye({id:we,selectedPath:$e,onTransform:Tt,onClose:Ct}){try{const At=JSON.parse(f);Q=!0,E({id:we||J,json:At,selectedPath:$e,onTransform:Tt?Lt=>{Tt({operations:Lt,json:At,transformedJson:ks(At,Lt)})}:Lt=>{O("onTransform",Lt),ae(Lt)},onClose:()=>{Q=!1,q(),Ct&&Ct()}})}catch(At){y(At)}}function Me(){l||ye({selectedPath:[]})}function xe(){B&&(F&&F.querySelector(".cm-search")?Pv(B):Tv(B))}function fe(){l||B&&(Sv(B),q())}function ve(){l||B&&(Lh(B),q())}function de(){t(43,U=!0),K(f,!0)}function Ie(){ge()}function De(we){O("select validation error",we);const $e=C(we);Xe($e.from,$e.to),q()}function He(we){O("select parse error",we);const $e=k(we,!1);Xe($e.from,$e.to),q()}function Xe(we,$e){O("setSelection",{anchor:we,head:$e}),B&&B.dispatch(B.state.update({selection:{anchor:we,head:$e},scrollIntoView:!0}))}function mt(we,$e){if($e.state.selection.ranges.length===1){const Tt=$e.state.selection.ranges[0],Ct=f.slice(Tt.from,Tt.to);if(Ct==="{"||Ct==="["){const At=yd.parse(f),Lt=Object.keys(At.pointers).find(On=>{var It;return((It=At.pointers[On].value)===null||It===void 0?void 0:It.pos)===Tt.from}),Zt=At.pointers[Lt];if(Lt&&Zt&&Zt.value&&Zt.valueEnd){O("pointer found, selecting inner contents of path:",Lt,Zt);const On=Zt.value.pos+1,It=Zt.valueEnd.pos-1;Xe(On,It)}}}}function be(){return cV(vt,{delay:Hy})}function Y({target:we,initialText:$e,readOnly:Tt,indentation:Ct}){O("Create CodeMirror editor",{readOnly:Tt,indentation:Ct});const At=jt.create({doc:$e,extensions:[Dd.of([JF,R]),Z.of(be()),_V(),bV,LV,ut.domEventHandlers({dblclick:mt}),ut.updateListener.of(Lt=>{t(8,N=Lt.state),Lt.docChanged&&We()}),xV(),lU({top:!0}),A.of(jt.readOnly.of(Tt)),V.of(jt.tabSize.of(g)),P.of(_e(Ct)),ut.lineWrapping]});return B=new ut({state:At,parent:we}),B}function x(){return B?s.unescapeValue(B.state.doc.toString()):""}function C(we){const{path:$e,message:Tt}=we,{line:Ct,column:At,from:Lt,to:Zt}=S8(f,$e);return{path:$e,line:Ct,column:At,from:Lt,to:Zt,message:Tt,severity:en.warning,actions:[]}}function k(we,$e){const{line:Tt,column:Ct,position:At,message:Lt}=we;return{path:null,line:Tt,column:Ct,from:At||0,to:At||0,severity:en.error,message:Lt,actions:$e&&!l?[{name:"Auto repair",apply:()=>Fe()}]:null}}function K(we,$e=!1){if(o&&!$e){O("not applying text: editor is disabled");return}B&&we!==H&&(O("setCodeMirrorValue length=",we.length),H=we,B.dispatch({changes:{from:0,to:B.state.doc.length,insert:s.escapeValue(we)}}),Ee())}function ie(){O("refresh");const we=B.state.doc.length;B.dispatch({changes:{from:we,to:we,insert:" "}}),B.dispatch({changes:{from:we,to:we+1,insert:""}})}function pe(){O("forceUpdateText",{escapeUnicodeCharacters:h}),B&&B.dispatch({changes:{from:0,to:B.state.doc.length,insert:s.escapeValue(f)}})}function ge(){if(!!B&&(H=x(),H!==f)){const we=H;O("text changed"),t(0,f=H),Ee(),it(f,we)}}function Qe(we){O("updateLinter",we),B&&B.dispatch({effects:Z.reconfigure(be())})}function G(we){B&&(O("updateIndentation",we),B.dispatch({effects:P.reconfigure(_e(we))}))}function se(we){B&&(O("updateTabSize",we),B.dispatch({effects:V.reconfigure(jt.tabSize.of(we))}))}function re(we){B&&(O("updateReadOnly",we),B.dispatch({effects:A.reconfigure(jt.readOnly.of(we))}))}function _e(we){return jd.of(typeof we=="number"?" ".repeat(we):we)}function Ee(){t(10,z=Q9(B.state)>0),t(11,I=Z9(B.state)>0),O({canUndo:z,canRedo:I})}const We=Ad(ge,Hy);function it(we,$e){m&&m({text:we},{text:$e},{contentErrors:Dt(),patchResult:null})}let ct=pp,ft=null;function vt(){const we=Dt();if(ow(we)){const{parseError:$e,isRepairable:Tt}=we;return[fw(k($e,Tt))]}return FV(we)?we.validationErrors.map(C).map(fw):[]}function Dt(){O("validate"),We.flush();const we=ot(f,v);return ow(we)?(t(45,ct=we.isRepairable?Gy:tR),t(12,ft=we.parseError),t(9,$=[])):(t(45,ct=pp),t(12,ft=null),t(9,$=we.validationErrors)),we}const ot=OP(zV);function Et(we){wt[we?"unshift":"push"](()=>{F=we,t(6,F)})}const yt=()=>He(ft);function Ut(we){wt[we?"unshift":"push"](()=>{L=we,t(7,L)})}return n.$$set=we=>{"readOnly"in we&&t(1,l=we.readOnly),"mainMenuBar"in we&&t(2,u=we.mainMenuBar),"statusBar"in we&&t(3,c=we.statusBar),"text"in we&&t(0,f=we.text),"indentation"in we&&t(28,d=we.indentation),"tabSize"in we&&t(29,g=we.tabSize),"escapeUnicodeCharacters"in we&&t(30,h=we.escapeUnicodeCharacters),"validator"in we&&t(31,v=we.validator),"onChange"in we&&t(32,m=we.onChange),"onSwitchToTreeMode"in we&&t(4,p=we.onSwitchToTreeMode),"onError"in we&&t(33,y=we.onError),"onFocus"in we&&t(34,b=we.onFocus),"onBlur"in we&&t(35,_=we.onBlur),"onRenderMenu"in we&&t(5,w=we.onRenderMenu),"onSortModal"in we&&t(36,S=we.onSortModal),"onTransformModal"in we&&t(37,E=we.onTransformModal)},n.$$.update=()=>{n.$$.dirty[0]&1&&t(15,r=f.length===0),n.$$.dirty[0]&1&&t(46,i=f&&f.length>Um),n.$$.dirty[1]&36864&&t(14,o=i&&!U),n.$$.dirty[0]&1073741824&&(s=vO({escapeControlCharacters:!1,escapeUnicodeCharacters:h})),n.$$.dirty[0]&1&&K(f),n.$$.dirty[1]&1&&Qe(v),n.$$.dirty[0]&268435456&&G(d),n.$$.dirty[0]&536870912&&se(g),n.$$.dirty[0]&2&&re(l),n.$$.dirty[0]&1073741824|n.$$.dirty[1]&8192&&W!==h&&(t(44,W=h),pe()),n.$$.dirty[0]&2|n.$$.dirty[1]&16384&&t(13,a=ct===Gy&&!l?[{icon:tv,text:"Auto repair",title:"Automatically repair JSON",onClick:Fe}]:[])},[f,l,u,c,p,w,F,L,N,$,z,I,ft,a,o,r,D,he,Pe,Ae,Me,xe,fe,ve,de,Ie,De,He,d,g,h,v,m,y,b,_,S,E,q,ae,ye,ie,Dt,U,W,ct,i,Et,yt,Ut]}class QV extends rt{constructor(e){super(),nt(this,e,YV,JV,Nt,{readOnly:1,mainMenuBar:2,statusBar:3,text:0,indentation:28,tabSize:29,escapeUnicodeCharacters:30,validator:31,onChange:32,onSwitchToTreeMode:4,onError:33,onFocus:34,onBlur:35,onRenderMenu:5,onSortModal:36,onTransformModal:37,focus:38,patch:39,openTransformModal:40,refresh:41,validate:42},null,[-1,-1,-1])}get focus(){return this.$$.ctx[38]}get patch(){return this.$$.ctx[39]}get openTransformModal(){return this.$$.ctx[40]}get refresh(){return this.$$.ctx[41]}get validate(){return this.$$.ctx[42]}}const Qp=Sr("jsoneditor:AutoScrollHandler");function ZV(n){Qp("createAutoScrollHandler",n);let e,t;function r(u){return u<20?JA:u<50?YA:QA}function i(){if(n){const u=e*(zy/1e3);n.scrollTop+=u}}function o(u){(!t||u!==e)&&(s(),Qp("startAutoScroll",u),e=u,t=setInterval(i,zy))}function s(){t&&(Qp("stopAutoScroll"),clearInterval(t),t=void 0,e=void 0)}function a(u){if(n){const c=u.clientY,{top:f,bottom:d}=n.getBoundingClientRect();if(c<f){const g=r(f-c);o(-g)}else if(c>d){const g=r(c-d);o(g)}else s()}}function l(){s()}return{onDrag:a,onDragEnd:l}}const XV=(n,e,t,r)=>(n/=r/2,n<1?t/2*n*n+e:(n--,-t/2*(n*(n-2)-1)+e)),$V=()=>{let n,e,t,r,i,o,s,a,l,u,c,f,d,g;function h(){return n.scrollY||n.pageYOffset||n.scrollTop}function v(_){const w=_.getBoundingClientRect().top,S=n.getBoundingClientRect?n.getBoundingClientRect().top:0;return w-S+t}function m(_){n.scrollTo?n.scrollTo(0,_):n.scrollTop=_}function p(_){u||(u=_),c=_-u,f=o(c,t,a,l),m(f),g=!0,c<l?requestAnimationFrame(p):y()}function y(){m(t+a),e&&s&&(e.setAttribute("tabindex","-1"),e.focus()),typeof d=="function"&&d(),u=!1,g=!1}function b(_,w={}){switch(l=w.duration||1e3,i=w.offset||0,d=w.callback,o=w.easing||XV,s=w.a11y||!1,typeof w.container){case"object":n=w.container;break;case"string":n=document.querySelector(w.container);break;default:n=window}switch(t=h(),typeof _){case"number":e=void 0,s=!1,r=t+_;break;case"object":e=_,r=v(e);break;case"string":e=document.querySelector(_),r=v(e);break}switch(a=r-t+i,typeof w.duration){case"number":l=w.duration;break;case"function":l=w.duration(a);break}g?u=!1:requestAnimationFrame(p)}return b};function eq(n,e){const t={start:n,end:Math.min(Zg(n),e)},r=Math.max(Jh((n+e)/2),n),i={start:r,end:Math.min(Zg(r),e)},o=Jh(e),s=o===e?o-iu:o,a={start:Math.max(s,n),end:e},l=[t],u=i.start>=t.end&&i.end<=a.start;return u&&l.push(i),a.start>=(u?i.end:t.end)&&l.push(a),l}function TP(n){const e=f8(n,r=>r.start),t=[e[0]];for(let r=0;r<e.length;r++){const i=t.length-1,o=t[i],s=e[r];s.start<=o.end?t[i]={start:Math.min(o.start,s.start),end:Math.max(o.end,s.end)}:t.push(s)}return t}function tq(n,e){return n.some(t=>e>=t.start&&e<t.end)}function Zg(n){return Jh(n)+iu}function Jh(n){return Math.floor(n/iu)*iu}function hw(n){let e={expandedMap:{},enforceStringMap:{},visibleSectionsMap:{},selection:void 0};return n!=null&&n.select&&(e={...e,selection:n.select(n.json,e)}),n!=null&&n.expand&&(e=mi(n.json,e,[],n.expand)),e}function Zd(n,e){return n.visibleSectionsMap[e]||As}function Lv(n,e,t){e.forEach(({start:r,end:i})=>{pO(r,Math.min(n.length,i),t)})}function Zp(n,e,t){const r={...e.expandedMap},i={...e.visibleSectionsMap};for(let o=0;o<=t.length;o++){const s=t.slice(0,o),a=Ge(s),l=tt(n,s);if(Hn(l)&&(r[a]=!0),Array.isArray(l)&&o<t.length){const u=i[a]||As,c=Ln(t[o]);if(!tq(u,c)){const f=Jh(c),d=Zg(f),g={start:f,end:d};i[a]=TP(u.concat(g))}}}return{...e,expandedMap:r,visibleSectionsMap:i}}function mi(n,e,t,r){const i={...e.expandedMap};function o(a){const l=s.length;if(Array.isArray(a)){if(r(s)){const u=Ge(s);if(i[u]=!0,a.length>0){const c=Zd(e,u);Lv(a,c,f=>{s[l]=String(f),o(a[f])}),s.pop()}}}else if(ir(a)&&r(s)){i[Ge(s)]=!0;const u=Object.keys(a);if(u.length>0){for(const c of u)s[l]=c,o(a[c]);s.pop()}}}const s=t.slice();return o(tt(n,t)),{...e,expandedMap:i}}function nq(n,e){return{...n,expandedMap:{...n.expandedMap,[Ge(e)]:!0}}}function PP(n,e){const t=Ea(n.expandedMap,e),r=Ea(n.enforceStringMap,e),i=Ea(n.visibleSectionsMap,e);return{...n,expandedMap:t,enforceStringMap:r,visibleSectionsMap:i}}function rq(n,e,t){if(t){const r={...n.enforceStringMap};return r[e]=t,{...n,enforceStringMap:r}}else if(typeof n.enforceStringMap[e]=="boolean"){const r={...n.enforceStringMap};return delete r[e],{...n,enforceStringMap:r}}else return n}function iq(n,e,t,r){return{...e,visibleSectionsMap:{...e.visibleSectionsMap,[t]:TP(Zd(e,t).concat(r))}}}function oq(n,e,t){const r=ks(n,t),i=t.reduce((o,s)=>Rk(s)?IP(r,o,s):xk(s)?AP(r,o,s):Nk(s)?sq(r,o,s):Km(s)||Pa(s)?aq(r,o,s):o,e);return{json:r,documentState:i}}function IP(n,e,t){const r=Si(n,t.path),i=qt(r),o=Ge(i),s=tt(n,i);if(sr(s)){const a=Ln(St(r)),l=Ca(e.expandedMap,i,a,1),u=Ca(e.enforceStringMap,i,a,1);let c=Ca(e.visibleSectionsMap,i,a,1);return c=RP(c,o,f=>xP(f,a,1)),{...e,expandedMap:l,enforceStringMap:u,visibleSectionsMap:c}}return e}function AP(n,e,t){const r=Si(n,t.path),i=qt(r),o=Ge(i),s=tt(n,i);let{expandedMap:a,enforceStringMap:l,visibleSectionsMap:u}=e;if(a=Ea(a,r),l=Ea(l,r),u=Ea(u,r),sr(s)){const c=Ln(St(r));a=Ca(a,i,c,-1),l=Ca(l,i,c,-1),u=Ca(u,i,c,-1),u=RP(u,o,f=>xP(f,c,-1))}return{...e,expandedMap:a,enforceStringMap:l,visibleSectionsMap:u}}function sq(n,e,t){const r=t.path,i=tm(n,e.expandedMap),o=tm(n,e.enforceStringMap),s=tm(n,e.visibleSectionsMap);return!_r(t.value)&&!sr(t.value)&&delete i[r],sr(t.value)||delete s[r],(_r(t.value)||sr(t.value))&&delete o[r],{...e,expandedMap:i,enforceStringMap:o,visibleSectionsMap:s}}function aq(n,e,t){if(Pa(t)&&t.from===t.path)return e;const r=f=>t.path+f.substring(t.from.length),i=em(Xp(e.expandedMap,t.from),r),o=em(Xp(e.enforceStringMap,t.from),r),s=em(Xp(e.visibleSectionsMap,t.from),r);let a=e;Pa(t)&&(a=AP(n,a,{op:"remove",path:t.from})),a=IP(n,a,{op:"add",path:t.path,value:null});const l=$p(a.expandedMap,i),u=$p(a.enforceStringMap,o),c=$p(a.visibleSectionsMap,s);return{...e,expandedMap:l,enforceStringMap:u,visibleSectionsMap:c}}function Ea(n,e){const t={},r=Ge(e);return Object.keys(n).forEach(i=>{Ta(i,r)||(t[i]=n[i])}),t}function Xp(n,e){const t={};return Object.keys(n).forEach(r=>{Ta(r,e)&&(t[r]=n[r])}),t}function $p(n,e){return{...n,...e}}function em(n,e){const t={};return Object.keys(n).forEach(r=>{const i=e(r);t[i]=n[r]}),t}function Ca(n,e,t,r){const i=e.length,o=Ge(e),s=[];for(const l of Object.keys(n))if(Ta(l,o)){const u=Ko(l),c=Ln(u[i]);c>=t&&(u[i]=String(c+r),s.push({oldPointer:l,newPointer:Ge(u),value:n[l]}))}if(s.length===0)return n;const a={...n};return s.forEach(l=>{delete a[l.oldPointer]}),s.forEach(l=>{a[l.newPointer]=l.value}),a}function tm(n,e){const t={};return Object.keys(e).filter(r=>Rs(n,Si(n,r))).forEach(r=>{t[r]=e[r]}),t}function RP(n,e,t){const r=n[e];if(e in n){const i=t(r);if(!Yt(r,i)){const o={...n};return i===void 0?delete o[e]:o[e]=i,o}}return n}function xP(n,e,t){return n.map(r=>({start:r.start>e?r.start+t:r.start,end:r.end>=e?r.end+t:r.end}))}function zu(n,e,t){const r=e?e[t]:void 0;return typeof r=="boolean"?r:ix(n)}function Wu(n,e,t=!1){const r=n.indexOf(e);return r!==-1?t?n.slice(r):n.slice(r+1):[]}function jv(n,e){const t=[];function r(i,o){t.push(o);const s=Ge(o);if(i&&e.expandedMap[s]===!0){if(sr(i)){const a=Zd(e,s);Lv(i,a,l=>{r(i[l],o.concat(String(l)))})}_r(i)&&Object.keys(i).forEach(a=>{r(i[a],o.concat(a))})}}return r(n,[]),t}function NP(n,e,t=!0){const r=[];function i(o,s){r.push({path:s,type:vi.value});const a=Ge(s);if(o&&e.expandedMap[a]===!0){if(t&&r.push({path:s,type:vi.inside}),sr(o)){const l=Zd(e,a);Lv(o,l,u=>{const c=s.concat(String(u));i(o[u],c),t&&r.push({path:c,type:vi.after})})}_r(o)&&Object.keys(o).forEach(u=>{const c=s.concat(u);r.push({path:c,type:vi.key}),i(o[u],c),t&&r.push({path:c,type:vi.after})})}}return i(n,[]),r}function lq(n,e,t){const r=jv(n,e),i=r.map(Ge),o=Ge(t),s=i.indexOf(o);return s!==-1&&s>0?r[s-1]:null}function Xg(n,e,t){const r=jv(n,e),o=r.map(Ge).indexOf(Ge(t));return o!==-1&&o<r.length-1?r[o+1]:null}const uq=1e3,jc=Sr("jsoneditor:History");function cq(n={}){const e=n.maxItems||uq;let t=[],r=0;function i(){return r<t.length}function o(){return r>0}function s(){return{canUndo:i(),canRedo:o(),length:t.length}}function a(){n.onChange&&n.onChange(s())}function l(d){jc("add",d),t=[d].concat(t.slice(r)).slice(0,e),r=0,a()}function u(){jc("clear"),t=[],r=0,a()}function c(){if(i()){const d=t[r];return r+=1,jc("undo",d),a(),d}}function f(){if(o())return r-=1,jc("redo",t[r]),a(),t[r]}return{add:l,clear:u,getState:s,undo:c,redo:f}}function Ku(n,e){const t=new Set(e),r=n.replace(/ \(copy( \d+)?\)$/,"");let i=n,o=1;for(;t.has(i);){const s="copy"+(o>1?" "+o:"");i=`${r} (${s})`,o++}return i}function Yh(n,e){const t="...",r=e-t.length;return n.length>e?n.substring(0,r)+t:n}function fq(n){if(n==="")return"";const e=n.toLowerCase();if(e==="null")return null;if(e==="true")return!0;if(e==="false")return!1;if(e==="undefined")return;const t=Number(n),r=parseFloat(n);return!isNaN(t)&&!isNaN(r)?t:n}function wi(n){return n&&n.type===nn.after}function Bn(n){return n&&n.type===nn.inside}function An(n){return n&&n.type===nn.key}function Wt(n){return n&&n.type===nn.value}function Kt(n){return n&&n.type===nn.multi}function hq(n,e,t){if(Yt(e,t))return[e];{const r=_q(e,t);if(e.length===r.length||t.length===r.length)return[r];const i=e[r.length],o=t[r.length],s=tt(n,r);if(_r(s)){const a=Object.keys(s),l=a.indexOf(i),u=a.indexOf(o);if(l!==-1&&u!==-1){const c=Math.min(l,u),f=Math.max(l,u),d=[];for(let g=c;g<=f;g++)d.push(r.concat(a[g]));return d}}if(sr(s)){const a=Math.min(Ln(i),Ln(o)),l=Math.max(Ln(i),Ln(o)),u=[];for(let c=a;c<=l;c++)u.push(r.concat(String(c)));return u}}throw new Error("Failed to create selection")}function MP(n){return Bn(n)?n.focusPath:qt(n.focusPath)}function Va(n){return Kt(n)?yr(n.paths):n.focusPath}function Xd(n){return Kt(n)?St(n.paths):n.focusPath}function dq(n,e){return Su(n.focusPath,e)&&(n.focusPath.length>e.length||Bn(n))}function pq(n,e,t){if(!n)return!1;const r=e.slice(0);if(Kt(n))for(;r.length>0;){if(n.pointersMap[Ge(r)]===!0)return!0;r.pop()}return An(n)?t===nn.key&&Yt(n.focusPath,e):!!(Wt(n)&&(t===nn.value&&Yt(n.focusPath,e)||Su(e,n.focusPath)&&e.length>n.focusPath.length&&(t===nn.key||t===nn.value||t===nn.multi)))}function dw(n,e,t=!1,r=!1){const i=e.selection,o=!r&&Kt(i)?yr(i.paths):i.focusPath,s=lq(n,e,o);if(s===null)return null;const a=s,l=s;if(t)return wi(i)||Bn(i)?Rn(n,i.anchorPath,i.anchorPath):Rn(n,i.anchorPath,l);if(An(i)){const u=qt(s),c=tt(n,u);return Array.isArray(c)||gn(s)?hn(s,!1):Gr(s,!1)}return Wt(i)?hn(s,!1):wi(i)||Bn(i)?Rn(n,o,o):Rn(n,a,l)}function mq(n,e,t=!1,r=!1){const i=e.selection,o=!r&&Kt(i)?St(i.paths):i.focusPath,s=Xg(n,e,o),a=s,l=s;if(s===null)return null;if(t){const u=Hn(tt(n,o))?PP(e,o):e,c=Xg(n,u,o);return c===null?null:wi(i)?Rn(n,c,c):Bn(i)?Rn(n,a,l):Rn(n,i.anchorPath,c)}if(An(i)){const u=qt(s),c=tt(n,u);return Array.isArray(c)?hn(l,!1):Gr(l,!1)}return Wt(i)?hn(l,!1):Bn(i)?Rn(n,a,l):Rn(n,s,s)}function gq(n,e,t){const r=qt(t),i=[St(t)],o=Xg(tt(n,r),e,i);return o?hn(r.concat(o),!1):po(t)}function DP(n,e,t){const r=e.selection,i=NP(n,e,t),o=i.findIndex(s=>Yt(s.path,r.focusPath)&&String(s.type)===String(r.type));return{caret:o!==-1?i[o]:null,previous:o!==-1&&o>0?i[o-1]:null,next:o!==-1&&o<i.length-1?i[o+1]:null}}function vq(n,e,t=!1,r=!0){const i=e.selection,{caret:o,previous:s}=DP(n,e,r);if(t)return Kt(i)?null:Rn(n,i.anchorPath,i.focusPath);if(o&&s)return Bv(s);const a=qt(i.focusPath),l=tt(n,a);return Wt(i)&&Array.isArray(l)?Rn(n,i.focusPath,i.focusPath):Kt(i)&&!Array.isArray(l)?Gr(i.focusPath,!1):null}function yq(n,e,t=!1,r=!0){const i=e.selection,{caret:o,next:s}=DP(n,e,r);return t?Kt(i)?null:Rn(n,i.anchorPath,i.focusPath):o&&s?Bv(s):Kt(i)?hn(i.focusPath,!1):null}function Bc(n,e){const t=jv(n,e);let r=0;for(;r<t.length-1&&t[r+1].length>t[r].length;)r++;const i=t[r];return i.length===0||Array.isArray(tt(n,qt(i)))?hn(i,!1):Gr(i,!1)}function qa(n,e){if(e.length===1){const r=yr(e);if(r.op==="replace"||r.op==="move"){const i=Si(n,r.path);return hn(i,!1)}}if(!gn(e)&&e.every(r=>r.op==="move")){const r=yr(e),i=e.slice(1);if((Km(r)||Pa(r))&&r.from!==r.path&&i.every(o=>(Km(o)||Pa(o))&&o.from===o.path)){const o=Si(n,r.path);return Gr(o,!1)}}const t=e.filter(r=>r.op!=="test"&&r.op!=="remove"&&(r.op!=="move"||r.from!==r.path)&&typeof r.path=="string").map(r=>Si(n,r.path));return gn(t)?null:{type:nn.multi,paths:t,anchorPath:yr(t),focusPath:St(t),pointersMap:LP(t)}}function LP(n){const e={};return n.forEach(t=>{e[Ge(t)]=!0}),e}function $d(n){return{[Ge(n)]:!0}}function _q(n,e){let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];)t++;return n.slice(0,t)}function $g(n){return n&&(An(n)||Wt(n)||Kt(n)&&n.paths.length===1)}function pw(n,e){return $g(e)&&Hn(tt(n,e.focusPath))?e.focusPath:qt(e.focusPath)}function Su(n,e){if(n.length<e.length)return!1;for(let t=0;t<e.length;t++)if(n[t]!==e[t])return!1;return!0}function wo(n){const e=n.selection;return(An(e)||Wt(e))&&e.edit?{...n,selection:{...e,edit:!1}}:n}function Gr(n,e){return{type:nn.key,anchorPath:n,focusPath:n,pointersMap:$d(n),edit:e}}function hn(n,e){return{type:nn.value,anchorPath:n,focusPath:n,pointersMap:$d(n),edit:e}}function qi(n){return{type:nn.inside,anchorPath:n,focusPath:n,pointersMap:$d(n)}}function po(n){return{type:nn.after,anchorPath:n,focusPath:n,pointersMap:$d(n)}}function Rn(n,e,t){const r=hq(n,e,t),i=Su(t,St(r))||Su(e,yr(r));return{type:nn.multi,anchorPath:i?yr(r):St(r),focusPath:i?St(r):yr(r),paths:r,pointersMap:LP(r)}}function mw(n,e,t=2){if(An(e))return String(St(e.focusPath));if(Wt(e)){const r=tt(n,e.focusPath);return typeof r=="string"?r:JSON.stringify(r,null,t)}if(Kt(e)){if(gn(e.focusPath))return JSON.stringify(n,null,t);const r=MP(e),i=tt(n,r);if(Array.isArray(i))if(e.paths.length===1){const o=tt(n,yr(e.paths));return JSON.stringify(o,null,t)}else return e.paths.map(o=>{const s=tt(n,o);return`${JSON.stringify(s,null,t)},`}).join(`
`);else return e.paths.map(o=>{const s=St(o),a=tt(n,o);return`${JSON.stringify(s)}: ${JSON.stringify(a,null,t)},`}).join(`
`)}return null}function jP(n){return Kt(n)?n.paths:[n.focusPath]}function $l(n){return(An(n)||Wt(n))&&n.edit}function bq(n,e,t=!0){return e===void 0&&!t?n:{...n,selection:e}}function wq(){return hn([],!1)}function Zf(n){if(!n)return!1;if(An(n)||Wt(n)||Kt(n)&&n.paths.length===1)return!0}function Bv(n){switch(n.type){case vi.key:return Gr(n.path,!1);case vi.value:return hn(n.path,!1);case vi.after:return po(n.path);case vi.inside:return qi(n.path)}}function gw(n,e,t){switch(e){case nn.key:return Gr(t,!1);case nn.value:return hn(t,!1);case nn.after:return po(t);case nn.inside:return qi(t);case nn.multi:return Rn(n,t,t)}}function vw(n,e){if(!!n)return Object.keys(n.pointersMap).some(t=>Ta(t,e)||Ta(e,t))?n:void 0}function Fc(n,e,t){const r=qt(e),i=tt(n,r);if(sr(i)){const o=Ln(St(e));return t.map((s,a)=>({op:"add",path:Ge(r.concat(String(o+a))),value:s.value}))}else if(_r(i)){const o=St(e),s=Object.keys(i),a=Wu(s,o,!0);return[...t.map(l=>{const u=Ku(l.key,s);return{op:"add",path:Ge(r.concat(u)),value:l.value}}),...a.map(l=>Fs(r,l))]}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}function yw(n,e,t){const r=tt(n,e);if(Array.isArray(r)){const i=r.length;return t.map((o,s)=>({op:"add",path:Ge(e.concat(String(i+s))),value:o.value}))}else return t.map(i=>{const o=Ku(i.key,Object.keys(r));return{op:"add",path:Ge(e.concat(o)),value:i.value}})}function Gu(n,e,t,r){const i=e.filter(a=>a!==t),o=Ku(r,i),s=Wu(e,t,!1);return[{op:"move",from:Ge(n.concat(t)),path:Ge(n.concat(o))},...s.map(a=>Fs(n,a))]}function Sq(n,e,t){const r=yr(e),i=qt(r),o=tt(n,i);if(sr(o)){const s=yr(e),a=s?Ln(St(s)):0;return[...e0(e),...t.map((l,u)=>({op:"add",path:Ge(i.concat(String(u+a))),value:l.value}))]}else if(_r(o)){const s=St(e),a=qt(s),l=St(s),u=Object.keys(o),c=Wu(u,l,!1),f=new Set(e.map(g=>St(g))),d=u.filter(g=>!f.has(g));return[...e0(e),...t.map(g=>{const h=Ku(g.key,d);return{op:"add",path:Ge(a.concat(h)),value:g.value}}),...c.map(g=>Fs(a,g))]}else throw new Error("Cannot create replace operations: parent must be an Object or Array")}function Eq(n,e){const t=St(e);if(gn(t))throw new Error("Cannot duplicate root object");const r=qt(t),i=St(t),o=tt(n,r);if(sr(o)){const s=St(e),a=s?Ln(St(s))+1:0;return[...e.map((l,u)=>({op:"copy",from:Ge(l),path:Ge(r.concat(String(u+a)))}))]}else if(_r(o)){const s=Object.keys(o),a=Wu(s,i,!1);return[...e.map(l=>{const u=St(l),c=Ku(u,s);return{op:"copy",from:Ge(l),path:Ge(r.concat(c))}}),...a.map(l=>Fs(r,l))]}else throw new Error("Cannot create duplicate operations: parent must be an Object or Array")}function Cq(n,e){if(Wt(e))return[{op:"move",from:Ge(e.focusPath),path:""}];if(Kt(e)){const t=qt(e.focusPath),r=tt(n,t);if(sr(r)){const i=e.paths.map(o=>{const s=Ln(St(o));return r[s]});return[{op:"replace",path:"",value:i}]}else if(_r(r)){const i={};return e.paths.forEach(o=>{const s=String(St(o));i[s]=r[s]}),[{op:"replace",path:"",value:i}]}}else throw new Error("Cannot create extract operations: parent must be an Object or Array");throw new Error("Cannot extract: unsupported type of selection "+JSON.stringify(e))}function _w(n,e,t){if(An(e)){const r=mO(t),i=qt(e.focusPath),o=tt(n,i),s=Object.keys(o),a=St(e.focusPath);return Gu(i,s,a,typeof r=="string"?r:t)}if(Wt(e)||Kt(e)&&gn(e.focusPath))try{return[{op:"replace",path:Ge(e.focusPath),value:J0(t,G0)}]}catch{return[{op:"replace",path:Ge(e.focusPath),value:t}]}if(Kt(e)){const r=nm(t);return Sq(n,e.paths,r)}if(wi(e)){const r=nm(t),i=e.focusPath,o=qt(i),s=tt(n,o);if(sr(s)){const a=Ln(St(i)),l=o.concat(String(a+1));return Fc(n,l,r)}else if(_r(s)){const a=String(St(i)),l=Object.keys(s);if(gn(l)||St(l)===a)return yw(n,o,r);{const u=l.indexOf(a),c=l[u+1],f=o.concat(c);return Fc(n,f,r)}}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}if(Bn(e)){const r=nm(t),i=e.focusPath,o=tt(n,i);if(sr(o)){const s=i.concat("0");return Fc(n,s,r)}else if(_r(o)){const s=Object.keys(o);if(gn(s))return yw(n,i,r);{const a=yr(s),l=i.concat(a);return Fc(n,l,r)}}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}throw new Error("Cannot insert: unsupported type of selection "+JSON.stringify(e))}function kq(n,e,t){const r=t.beforePath,i=t.append,o=qt(e.focusPath),s=tt(n,o);if(!i&&!(r&&Su(r,o)&&r.length>o.length))return[];const a=Va(e),l=Xd(e),u=St(a),c=St(l),f=r?r[o.length]:void 0;if(_r(s)){const d=Object.keys(s),g=d.indexOf(u),h=d.indexOf(c),v=i?d.length:d.indexOf(f);if(g!==-1&&h!==-1&&v!==-1)return v>g?[...d.slice(g,h+1),...d.slice(v,d.length)].map(m=>Fs(o,m)):[...d.slice(v,g),...d.slice(h+1,d.length)].map(m=>Fs(o,m))}else if(sr(s)){const d=Ln(u),g=Ln(c),h=f!==void 0?Ln(f):s.length,v=g-d+1;return h<d?M_(v,m=>({op:"move",from:Ge(o.concat(String(d+m))),path:Ge(o.concat(String(h+m)))})):M_(v,()=>({op:"move",from:Ge(o.concat(String(d))),path:Ge(o.concat(String(h)))}))}else throw new Error("Cannot create move operations: parent must be an Object or Array")}function Oq(n,e,t){if(t==="object")return{};if(t==="array")return[];if(t==="structure"){const r=MP(e),i=tt(n,r);if(Array.isArray(i)&&!gn(i)){const o=yr(i);return Hn(o)?DD(o,s=>Array.isArray(s)?[]:ir(s)?void 0:""):""}}return""}function e0(n){return n.map(e=>({op:"remove",path:Ge(e)})).reverse()}function Fs(n,e){return{op:"move",from:Ge(n.concat(e)),path:Ge(n.concat(e))}}function nm(n){const e=/^\s*{/.test(n),t=/^\s*\[/.test(n),r=mO(n),i=r!==void 0?r:J0(n,G0);return e&&ir(i)||t&&Array.isArray(i)?[{key:"New item",value:i}]:Array.isArray(i)?i.map((o,s)=>({key:"New item "+s,value:o})):ir(i)?Object.keys(i).map(o=>({key:o,value:i[o]})):[{key:"New item",value:i}]}function bw(n,e){if(An(e)){const t=qt(e.focusPath),r=tt(n,t),i=Object.keys(r),o=St(e.focusPath),a=Gu(t,i,o,""),l=qa(n,a);return{operations:a,newSelection:l}}if(Wt(e))return{operations:[{op:"replace",path:Ge(e.focusPath),value:""}],newSelection:e};if(Kt(e)){const t=e0(e.paths),r=St(e.paths);if(gn(r)){const s=[{op:"replace",path:"",value:""}],a=hn([],!1);return{operations:s,newSelection:a}}const i=qt(r),o=tt(n,i);if(sr(o)){const s=yr(e.paths),a=Ln(St(s)),l=a===0?qi(i):po(i.concat(String(a-1)));return{operations:t,newSelection:l}}else if(_r(o)){const s=Object.keys(o),a=yr(e.paths),l=St(a),u=s.indexOf(l),c=s[u-1],f=u===0?qi(i):po(i.concat(c));return{operations:t,newSelection:f}}else throw new Error("Cannot create remove operations: parent must be an Object or Array")}throw new Error("Cannot remove: unsupported type of selection "+JSON.stringify(e))}function Tq(n,e){return Tk(n,e,{before:(t,r,i)=>{if(xk(r)){const o=Ko(r.path);return{revertOperations:[...i,...ww(t,o)]}}if(Pa(r)){const o=Ko(r.from);return{revertOperations:[...i,...ww(t,o)]}}return{revertOperations:i}}})}function ww(n,e){const t=qt(e),r=St(e),i=tt(n,t);if(_r(i)){const o=Object.keys(i);return Wu(o,r,!1).map(a=>Fs(t,a))}return[]}function Pq(n,e,t){const r=t!=null&&t.activeItem?Cw(t.activeItem):void 0,i=e.findIndex(l=>Yt(r,Cw(l))),o=i!==-1?i:(t==null?void 0:t.activeIndex)<e.length?t==null?void 0:t.activeIndex:e.length>0?0:-1,s=e.map((l,u)=>({...l,active:u===o})),a=s[o];return{items:s,itemsMap:K0(s,l=>Ge(l.path)),activeItem:a,activeIndex:o}}function Iq(n){const e=n.activeIndex<n.items.length-1?n.activeIndex+1:n.items.length>0?0:-1,t=n.items[e],r=n.items.map((i,o)=>({...i,active:o===e}));return{...n,items:r,itemsMap:K0(r,i=>Ge(i.path)),activeItem:t,activeIndex:e}}function Aq(n){const e=n.activeIndex>0?n.activeIndex-1:n.items.length-1,t=n.items[e],r=n.items.map((i,o)=>({...i,active:o===e}));return{...n,items:r,itemsMap:K0(r,i=>Ge(i.path)),activeItem:t,activeIndex:e}}function BP(n,e,t,r=1/0){const i=[],o=[];function s(l){i.length<r&&i.push(l)}function a(l,u){if(sr(u)){const c=o.length;o.push("0");for(let f=0;f<u.length;f++)if(o[c]=String(f),a(l,u[f]),i.length>=r)return;o.pop()}else if(_r(u)){const c=Object.keys(u),f=o.length;o.push("");for(const d of c)if(o[f]=d,Sw(d,l,o,Ei.key,s),a(l,u[d]),i.length>=r)return;o.pop()}else Sw(String(u),l,o,Ei.value,s)}if(typeof n=="string"&&n!==""){const l=n.toLowerCase();a(l,e)}return i}function Sw(n,e,t,r,i){const o=n.toLowerCase();let s=0,a=-1,l=-1;do l=o.indexOf(e,a),l!==-1&&(a=l+e.length,i({path:t.slice(0),field:r,fieldIndex:s,start:l,end:a}),s++);while(l!==-1)}function t0(n,e,t,r){return n.substring(0,t)+e+n.substring(r)}function Ew(n,e,t){let r=n;return H5(t,i=>{r=t0(r,e,i.start,i.end)}),r}function Rq(n,e,t,r){const{field:i,path:o,start:s,end:a}=r;if(i===Ei.key){const l=qt(o),u=tt(n,l),c=St(o),f=Object.keys(u),d=t0(c,t,s,a),g=Gu(l,f,c,d);return{newSelection:qa(n,g),operations:g}}else if(i===Ei.value){const l=tt(n,o);if(l===void 0)throw new Error(`Cannot replace: path not found ${Ge(o)}`);const u=typeof l=="string"?l:String(l),c=Ge(o),f=zu(l,e.enforceStringMap,c),d=t0(u,t,s,a),g=[{op:"replace",path:Ge(o),value:f?d:Du(d)}];return{newSelection:qa(n,g),operations:g}}else throw new Error(`Cannot replace: unknown type of search result field ${i}`)}function xq(n,e,t,r){const i=BP(t,n,e,1/0),o=[];for(let l=0;l<i.length;l++){const u=i[l-1],c=i[l];l===0||c.field!==u.field||!Yt(c.path,u.path)?o.push({path:c.path,field:c.field,items:[c]}):St(o).items.push(c)}o.sort((l,u)=>l.field!==u.field?l.field===Ei.key?1:-1:u.path.length-l.path.length);let s=[],a;return o.forEach(l=>{const{field:u,path:c,items:f}=l;if(u===Ei.key){const d=qt(c),g=tt(n,d),h=St(c),v=Object.keys(g),m=Ew(h,r,f),p=Gu(d,v,h,m);s=s.concat(p),a=qa(n,p)}else if(u===Ei.value){const d=tt(n,c);if(d===void 0)throw new Error(`Cannot replace: path not found ${Ge(c)}`);const g=typeof d=="string"?d:String(d),h=Ge(c),v=zu(d,e.enforceStringMap,h),m=Ew(g,r,f),p=[{op:"replace",path:Ge(c),value:v?m:Du(m)}];s=s.concat(p),a=qa(n,p)}else throw new Error(`Cannot replace: unknown type of search result field ${u}`)}),{operations:s,newSelection:a}}function Nq(n,e){const t=[];let r=0;for(const o of e){const s=n.slice(r,o.start);s!==""&&t.push({type:"normal",text:s,active:!1});const a=n.slice(o.start,o.end);t.push({type:"highlight",text:a,active:o.active}),r=o.end}const i=St(e);return i.end<n.length&&t.push({type:"normal",text:n.slice(i.end),active:!1}),t}function Cw(n){return n.path.concat(n.field,String(n.fieldIndex))}function Mq(n,e){var t;const r=(t=n==null?void 0:n[e])===null||t===void 0?void 0:t.filter(i=>i.field===Ei.key);if(!(!r||r.length===0))return r}function kw(n,e){var t;const r=(t=n==null?void 0:n[e])===null||t===void 0?void 0:t.filter(i=>i.field===Ei.value);if(!(!r||r.length===0))return r}function Dq(n){let e,t,r,i,o,s,a,l,u;return s=new Ot({props:{data:Bu}}),{c(){e=ee("div"),t=ee("div"),r=Ue(n[0]),i=me(),o=ee("button"),Te(s.$$.fragment),T(t,"class","jse-title svelte-1djqugc"),T(o,"type","button"),T(o,"class","jse-close svelte-1djqugc"),T(e,"class","jse-header svelte-1djqugc")},m(c,f){ue(c,e,f),j(e,t),j(t,r),j(e,i),j(e,o),ke(s,o,null),a=!0,l||(u=Ce(o,"click",n[1]),l=!0)},p(c,[f]){(!a||f&1)&&_t(r,c[0])},i(c){a||(X(s.$$.fragment,c),a=!0)},o(c){te(s.$$.fragment,c),a=!1},d(c){c&&le(e),Oe(s),l=!1,u()}}}function Lq(n,e,t){let{title:r="Modal"}=e;const{close:i}=ur("simple-modal");return n.$$set=o=>{"title"in o&&t(0,r=o.title)},[r,i]}class FP extends rt{constructor(e){super(),nt(this,e,Lq,Dq,Nt,{title:0})}}function jq(n){let e,t,r,i,o,s,a,l,u,c,f,d,g,h,v,m,p,y,b,_,w,S,E,O;return t=new FP({props:{title:"Copying and pasting"}}),{c(){e=ee("div"),Te(t.$$.fragment),r=me(),i=ee("div"),o=ee("div"),o.textContent="These actions are unavailable via the menu. Please use:",s=me(),a=ee("div"),l=ee("div"),u=ee("div"),u.textContent=`${n[1]}+C`,c=Ue(`
        for copy`),f=me(),d=ee("div"),g=ee("div"),g.textContent=`${n[1]}+X`,h=Ue(`
        for cut`),v=me(),m=ee("div"),p=ee("div"),p.textContent=`${n[1]}+V`,y=Ue(`
        for paste`),b=me(),_=ee("div"),w=ee("button"),w.textContent="Close",T(u,"class","jse-key svelte-wp98us"),T(l,"class","jse-shortcut"),T(g,"class","jse-key svelte-wp98us"),T(d,"class","jse-shortcut"),T(p,"class","jse-key svelte-wp98us"),T(m,"class","jse-shortcut"),T(a,"class","jse-shortcuts svelte-wp98us"),T(w,"type","button"),T(w,"class","jse-primary svelte-wp98us"),T(_,"class","jse-actions svelte-wp98us"),T(i,"class","jse-contents svelte-wp98us"),T(e,"class","jse-modal jse-copy-paste svelte-wp98us")},m(R,D){ue(R,e,D),ke(t,e,null),j(e,r),j(e,i),j(i,o),j(i,s),j(i,a),j(a,l),j(l,u),j(l,c),j(a,f),j(a,d),j(d,g),j(d,h),j(a,v),j(a,m),j(m,p),j(m,y),j(i,b),j(i,_),j(_,w),S=!0,E||(O=Ce(w,"click",n[0]),E=!0)},p:Ne,i(R){S||(X(t.$$.fragment,R),S=!0)},o(R){te(t.$$.fragment,R),S=!1},d(R){R&&le(e),Oe(t),E=!1,O()}}}function Bq(n){const{close:e}=ur("simple-modal");return[e,CO?"\u2318":"Ctrl"]}class Fq extends rt{constructor(e){super(),nt(this,e,Bq,jq,Nt,{})}}function Uq(n){let e;return{c(){e=ee("div"),e.textContent="Repair invalid JSON, then click apply",T(e,"slot","left"),T(e,"class","jse-info svelte-1puchbn")},m(t,r){ue(t,e,r)},p:Ne,d(t){t&&le(e)}}}function Vq(n){let e,t;return e=new Gs({props:{type:"success",message:"JSON is valid now and can be parsed.",actions:n[5]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i&32&&(o.actions=r[5]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function qq(n){let e,t;return e=new Gs({props:{type:"error",icon:rl,message:`Cannot parse JSON: ${n[2].message}`,actions:n[6]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i&4&&(o.message=`Cannot parse JSON: ${r[2].message}`),i&64&&(o.actions=r[6]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Hq(n){let e,t,r,i,o,s,a,l,u,c;t=new nv({props:{items:n[7],$$slots:{left:[Uq]},$$scope:{ctx:n}}});const f=[qq,Vq],d=[];function g(h,v){return h[2]?0:1}return i=g(n),o=d[i]=f[i](n),{c(){e=ee("div"),Te(t.$$.fragment),r=me(),o.c(),s=me(),a=ee("textarea"),a.value=n[0],a.readOnly=n[1],T(a,"class","jse-json-text svelte-1puchbn"),T(a,"autocomplete","off"),T(a,"autocapitalize","off"),T(a,"spellcheck","false"),T(e,"class","jse-json-repair-component svelte-1puchbn")},m(h,v){ue(h,e,v),ke(t,e,null),j(e,r),d[i].m(e,null),j(e,s),j(e,a),n[19](a),n[20](e),l=!0,u||(c=Ce(a,"input",n[8]),u=!0)},p(h,[v]){const m={};v&128&&(m.items=h[7]),v&134217728&&(m.$$scope={dirty:v,ctx:h}),t.$set(m);let p=i;i=g(h),i===p?d[i].p(h,v):(Ve(),te(d[p],1,1,()=>{d[p]=null}),qe(),o=d[i],o?o.p(h,v):(o=d[i]=f[i](h),o.c()),X(o,1),o.m(e,s)),(!l||v&1)&&(a.value=h[0]),(!l||v&2)&&(a.readOnly=h[1])},i(h){l||(X(t.$$.fragment,h),X(o),l=!0)},o(h){te(t.$$.fragment,h),te(o),l=!1},d(h){h&&le(e),Oe(t),d[i].d(),n[19](null),n[20](null),u=!1,c()}}}function zq(n,e,t){let r,i,o,s,a,l,u,c,{text:f=""}=e,{readOnly:d=!1}=e,{onParse:g}=e,{onRepair:h}=e,{onChange:v=null}=e,{onApply:m}=e,{onCancel:p}=e,{onRenderMenu:y=Gt}=e;const b=Sr("jsoneditor:JSONRepair");let _,w;function S(L){try{return g(L),null}catch(N){return Y0(L,N.message)}}function E(L){try{return h(L),!0}catch{return!1}}function O(){w&&r&&r.position!=null&&(w.setSelectionRange(r.position,r.position),setTimeout(()=>{w.focus()}))}function R(L){b("handleChange");const N=L.target.value;f!==N&&(t(0,f=N),v&&v(f))}function D(){m(f)}function F(){try{t(0,f=h(f)),v&&v(f)}catch{}}function B(L){wt[L?"unshift":"push"](()=>{w=L,t(4,w)})}function H(L){wt[L?"unshift":"push"](()=>{_=L,t(3,_)})}return n.$$set=L=>{"text"in L&&t(0,f=L.text),"readOnly"in L&&t(1,d=L.readOnly),"onParse"in L&&t(9,g=L.onParse),"onRepair"in L&&t(10,h=L.onRepair),"onChange"in L&&t(11,v=L.onChange),"onApply"in L&&t(12,m=L.onApply),"onCancel"in L&&t(13,p=L.onCancel),"onRenderMenu"in L&&t(14,y=L.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&1&&t(2,r=S(f)),n.$$.dirty&1&&t(17,i=E(f)),n.$$.dirty&4&&b("error",r),n.$$.dirty&8192&&t(18,o=[{space:!0},{icon:Bu,title:"Cancel repair",className:"jse-cancel",onClick:p}]),n.$$.dirty&278528&&t(7,s=y("repair",o)||o),n.$$.dirty&229376&&t(6,u=i?[a,l]:[a]),n.$$.dirty&2&&t(5,c=[{icon:ag,text:"Apply",title:"Apply fixed JSON",disabled:d,onClick:D}])},t(15,a={icon:Q8,text:"Show me",title:"Scroll to the error location",onClick:O}),t(16,l={icon:tv,text:"Auto repair",title:"Automatically repair JSON",onClick:F}),[f,d,r,_,w,c,u,s,R,g,h,v,m,p,y,a,l,i,o,B,H]}class Wq extends rt{constructor(e){super(),nt(this,e,zq,Hq,Nt,{text:0,readOnly:1,onParse:9,onRepair:10,onChange:11,onApply:12,onCancel:13,onRenderMenu:14})}}function Kq(n){let e,t,r,i;function o(a){n[7](a)}let s={onParse:n[1],onRepair:n[2],onApply:n[4],onCancel:n[5],onRenderMenu:n[3]};return n[0]!==void 0&&(s.text=n[0]),t=new Wq({props:s}),wt.push(()=>Ir(t,"text",o)),{c(){e=ee("div"),Te(t.$$.fragment),T(e,"class","jse-modal jse-repair svelte-1ffm3pm")},m(a,l){ue(a,e,l),ke(t,e,null),i=!0},p(a,[l]){const u={};l&2&&(u.onParse=a[1]),l&4&&(u.onRepair=a[2]),l&8&&(u.onRenderMenu=a[3]),!r&&l&1&&(r=!0,u.text=a[0],qr(()=>r=!1)),t.$set(u)},i(a){i||(X(t.$$.fragment,a),i=!0)},o(a){te(t.$$.fragment,a),i=!1},d(a){a&&le(e),Oe(t)}}}function Gq(n,e,t){let{text:r}=e,{onParse:i}=e,{onRepair:o}=e,{onApply:s}=e,{onRenderMenu:a}=e;const{close:l}=ur("simple-modal");function u(d){l(),s(d)}function c(){l()}function f(d){r=d,t(0,r)}return n.$$set=d=>{"text"in d&&t(0,r=d.text),"onParse"in d&&t(1,i=d.onParse),"onRepair"in d&&t(2,o=d.onRepair),"onApply"in d&&t(6,s=d.onApply),"onRenderMenu"in d&&t(3,a=d.onRenderMenu)},[r,i,o,a,u,c,s,f]}class Jq extends rt{constructor(e){super(),nt(this,e,Gq,Kq,Nt,{text:0,onParse:1,onRepair:2,onApply:6,onRenderMenu:3})}}function Ow(n,e,t){const r=n.slice();return r[11]=e[t],r}const Yq=n=>({}),Tw=n=>({});function Pw(n){let e,t;return e=new Ot({props:{data:n[11].icon}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.data=r[11].icon),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Iw(n){let e,t,r,i=n[11].text+"",o,s,a,l,u,c,f,d=n[11].icon&&Pw(n);function g(){return n[9](n[11])}return{c(){e=ee("li"),t=ee("button"),d&&d.c(),r=me(),o=Ue(i),l=me(),T(t,"type","button"),T(t,"title",s=n[11].title),t.disabled=a=n[11].disabled,T(t,"class","svelte-kae4bx"),T(e,"class","svelte-kae4bx")},m(h,v){ue(h,e,v),j(e,t),d&&d.m(t,null),j(t,r),j(t,o),j(e,l),u=!0,c||(f=Ce(t,"click",g),c=!0)},p(h,v){n=h,n[11].icon?d?(d.p(n,v),v&1&&X(d,1)):(d=Pw(n),d.c(),X(d,1),d.m(t,r)):d&&(Ve(),te(d,1,1,()=>{d=null}),qe()),(!u||v&1)&&i!==(i=n[11].text+"")&&_t(o,i),(!u||v&1&&s!==(s=n[11].title))&&T(t,"title",s),(!u||v&1&&a!==(a=n[11].disabled))&&(t.disabled=a)},i(h){u||(X(d),u=!0)},o(h){te(d),u=!1},d(h){h&&le(e),d&&d.d(),c=!1,f()}}}function Qq(n){let e,t,r,i,o,s,a,l,u,c;const f=n[8].defaultItem,d=Yr(f,n,n[7],Tw);i=new Ot({props:{data:Fi}});let g=n[0],h=[];for(let m=0;m<g.length;m+=1)h[m]=Iw(Ow(n,g,m));const v=m=>te(h[m],1,1,()=>{h[m]=null});return{c(){e=ee("div"),d&&d.c(),t=me(),r=ee("button"),Te(i.$$.fragment),o=me(),s=ee("div"),a=ee("ul");for(let m=0;m<h.length;m+=1)h[m].c();T(r,"type","button"),T(r,"class","jse-open-dropdown svelte-kae4bx"),T(r,"data-type","jse-open-dropdown"),r.disabled=n[4],ze(r,"jse-visible",n[3]),T(a,"class","svelte-kae4bx"),T(s,"class","jse-dropdown-items svelte-kae4bx"),ri(s,"width",n[2]),ze(s,"jse-visible",n[3]),T(e,"class","jse-dropdown-button svelte-kae4bx"),T(e,"title",n[1])},m(m,p){ue(m,e,p),d&&d.m(e,null),j(e,t),j(e,r),ke(i,r,null),j(e,o),j(e,s),j(s,a);for(let y=0;y<h.length;y+=1)h[y].m(a,null);l=!0,u||(c=[Ce(r,"click",n[5]),Ce(e,"click",n[6])],u=!0)},p(m,[p]){if(d&&d.p&&(!l||p&128)&&Zr(d,f,m,m[7],l?Qr(f,m[7],p,Yq):Xr(m[7]),Tw),(!l||p&16)&&(r.disabled=m[4]),p&8&&ze(r,"jse-visible",m[3]),p&1){g=m[0];let y;for(y=0;y<g.length;y+=1){const b=Ow(m,g,y);h[y]?(h[y].p(b,p),X(h[y],1)):(h[y]=Iw(b),h[y].c(),X(h[y],1),h[y].m(a,null))}for(Ve(),y=g.length;y<h.length;y+=1)v(y);qe()}(!l||p&4)&&ri(s,"width",m[2]),p&8&&ze(s,"jse-visible",m[3]),(!l||p&2)&&T(e,"title",m[1])},i(m){if(!l){X(d,m),X(i.$$.fragment,m);for(let p=0;p<g.length;p+=1)X(h[p]);l=!0}},o(m){te(d,m),te(i.$$.fragment,m),h=h.filter(Boolean);for(let p=0;p<h.length;p+=1)te(h[p]);l=!1},d(m){m&&le(e),d&&d.d(m),Oe(i),xn(h,m),u=!1,rn(c)}}}function Zq(n,e,t){let r,{$$slots:i={},$$scope:o}=e,{items:s=[]}=e,{title:a=void 0}=e,{width:l="120px"}=e,u=!1;function c(){const h=u;setTimeout(()=>t(3,u=!h))}function f(){t(3,u=!1)}function d(h){nl(h)==="Escape"&&(h.preventDefault(),t(3,u=!1))}Nr(()=>{document.addEventListener("click",f),document.addEventListener("keydown",d)}),fo(()=>{document.removeEventListener("click",f),document.removeEventListener("keydown",d)});const g=h=>h.onClick();return n.$$set=h=>{"items"in h&&t(0,s=h.items),"title"in h&&t(1,a=h.title),"width"in h&&t(2,l=h.width),"$$scope"in h&&t(7,o=h.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&t(4,r=s.every(h=>h.disabled===!0))},[s,a,l,u,r,c,f,o,i,g]}class rm extends rt{constructor(e){super(),nt(this,e,Zq,Qq,Nt,{items:0,title:1,width:2})}}/*!
 * Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var Xq={prefix:"far",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M232 120C232 106.7 242.7 96 256 96C269.3 96 280 106.7 280 120V243.2L365.3 300C376.3 307.4 379.3 322.3 371.1 333.3C364.6 344.3 349.7 347.3 338.7 339.1L242.7 275.1C236 271.5 232 264 232 255.1L232 120zM256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48C141.1 48 48 141.1 48 256z"]},$q={prefix:"far",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM192 0C90.02 .3203 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.8 289.2 .0039 192 0zM288.4 260.1c-15.66 17.85-35.04 46.3-49.05 75.89h-94.61c-14.01-29.59-33.39-58.04-49.04-75.88C75.24 236.8 64 206.1 64 175.1C64 113.3 112.1 48.25 191.1 48C262.6 48 320 105.4 320 175.1C320 206.1 308.8 236.8 288.4 260.1zM176 80C131.9 80 96 115.9 96 160c0 8.844 7.156 16 16 16S128 168.8 128 160c0-26.47 21.53-48 48-48c8.844 0 16-7.148 16-15.99S184.8 80 176 80z"]},Qh={prefix:"far",iconName:"square",icon:[448,512,[9723,9724,61590,9632],"f0c8","M384 32C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96C0 60.65 28.65 32 64 32H384zM384 80H64C55.16 80 48 87.16 48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80z"]},eH={prefix:"far",iconName:"square-check",icon:[448,512,[9989,61510,9745,"check-square"],"f14a","M211.8 339.8C200.9 350.7 183.1 350.7 172.2 339.8L108.2 275.8C97.27 264.9 97.27 247.1 108.2 236.2C119.1 225.3 136.9 225.3 147.8 236.2L192 280.4L300.2 172.2C311.1 161.3 328.9 161.3 339.8 172.2C350.7 183.1 350.7 200.9 339.8 211.8L211.8 339.8zM0 96C0 60.65 28.65 32 64 32H384C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96zM48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80H64C55.16 80 48 87.16 48 96z"]},Zh=eH;function tH(n){let e,t,r,i,o,s,a;return t=new Ot({props:{data:ev}}),{c(){e=ee("button"),Te(t.$$.fragment),r=Ue(" Edit value"),T(e,"type","button"),T(e,"slot","defaultItem"),T(e,"title","Edit the value (Double-click on the value)"),e.disabled=i=!n[2],T(e,"class","svelte-1jwirqu")},m(l,u){ue(l,e,u),ke(t,e,null),j(e,r),o=!0,s||(a=Ce(e,"click",n[18]),s=!0)},p(l,u){(!o||u[0]&4&&i!==(i=!l[2]))&&(e.disabled=i)},i(l){o||(X(t.$$.fragment,l),o=!0)},o(l){te(t.$$.fragment,l),o=!1},d(l){l&&le(e),Oe(t),s=!1,a()}}}function nH(n){let e,t,r,i,o,s,a;return t=new Ot({props:{data:lg}}),{c(){e=ee("button"),Te(t.$$.fragment),r=Ue(" Cut"),T(e,"type","button"),T(e,"slot","defaultItem"),T(e,"title","Cut selected contents, formatted with indentation (Ctrl+X)"),e.disabled=i=!n[1],T(e,"class","svelte-1jwirqu")},m(l,u){ue(l,e,u),ke(t,e,null),j(e,r),o=!0,s||(a=Ce(e,"click",n[19]),s=!0)},p(l,u){(!o||u[0]&2&&i!==(i=!l[1]))&&(e.disabled=i)},i(l){o||(X(t.$$.fragment,l),o=!0)},o(l){te(t.$$.fragment,l),o=!1},d(l){l&&le(e),Oe(t),s=!1,a()}}}function rH(n){let e,t,r,i,o,s,a;return t=new Ot({props:{data:vh}}),{c(){e=ee("button"),Te(t.$$.fragment),r=Ue(" Copy"),T(e,"type","button"),T(e,"slot","defaultItem"),T(e,"title","Copy selected contents, formatted with indentation (Ctrl+C)"),e.disabled=i=!n[1],T(e,"class","svelte-1jwirqu")},m(l,u){ue(l,e,u),ke(t,e,null),j(e,r),o=!0,s||(a=Ce(e,"click",n[20]),s=!0)},p(l,u){(!o||u[0]&2&&i!==(i=!l[1]))&&(e.disabled=i)},i(l){o||(X(t.$$.fragment,l),o=!0)},o(l){te(t.$$.fragment,l),o=!1},d(l){l&&le(e),Oe(t),s=!1,a()}}}function Aw(n){let e,t,r,i,o,s,a;return i=new Ot({props:{data:$q}}),{c(){e=ee("div"),t=ee("div"),r=ee("div"),Te(i.$$.fragment),o=me(),s=ee("div"),s.textContent="Tip: you can open this context menu via right-click or with Ctrl+Q",T(r,"class","svelte-1jwirqu"),T(s,"class","svelte-1jwirqu"),T(t,"class","jse-tip svelte-1jwirqu"),T(e,"class","jse-row svelte-1jwirqu")},m(l,u){ue(l,e,u),j(e,t),j(t,r),ke(i,r,null),j(t,o),j(t,s),a=!0},p:Ne,i(l){a||(X(i.$$.fragment,l),a=!0)},o(l){te(i.$$.fragment,l),a=!1},d(l){l&&le(e),Oe(i)}}}function iH(n){let e,t,r,i,o,s,a,l,u,c,f,d,g,h,v,m,p,y,b,_,w,S,E,O,R,D,F,B,H,L,N,U,$,Z,A,P,V,W,z,I,M,J,q,Q,ae,he,Pe,Fe,Ae,ye,Me,xe,fe,ve,de,Ie,De,He,Xe,mt,be,Y,x,C,k,K,ie,pe,ge,Qe,G,se,re,_e,Ee,We,it,ct,ft,vt,Dt,ot,Et,yt,Ut,we,$e,Tt,Ct,At,Lt,Zt,On,It,Kn,ti;i=new Ot({props:{data:ev}}),l=new rm({props:{width:"11em",items:n[8],$$slots:{defaultItem:[tH]},$$scope:{ctx:n}}}),g=new rm({props:{width:"10em",items:n[7],$$slots:{defaultItem:[nH]},$$scope:{ctx:n}}}),v=new rm({props:{width:"12em",items:n[6],$$slots:{defaultItem:[rH]},$$scope:{ctx:n}}}),y=new Ot({props:{data:fL}}),F=new Ot({props:{data:Bu}}),U=new Ot({props:{data:rL}}),V=new Ot({props:{data:oL}}),J=new Ot({props:{data:Z0}}),Pe=new Ot({props:{data:X0}}),Ut=new Ot({props:{data:gL}}),At=new Ot({props:{data:pL}});let Xt=n[0]&&Aw();return{c(){e=ee("div"),t=ee("div"),r=ee("button"),Te(i.$$.fragment),o=Ue(" Edit key"),a=me(),Te(l.$$.fragment),u=me(),c=ee("div"),f=me(),d=ee("div"),Te(g.$$.fragment),h=me(),Te(v.$$.fragment),m=me(),p=ee("button"),Te(y.$$.fragment),b=Ue(" Paste"),w=me(),S=ee("div"),E=me(),O=ee("div"),R=ee("div"),D=ee("button"),Te(F.$$.fragment),B=Ue(" Remove"),L=me(),N=ee("button"),Te(U.$$.fragment),$=Ue(" Duplicate"),A=me(),P=ee("button"),Te(V.$$.fragment),W=Ue(" Extract"),I=me(),M=ee("button"),Te(J.$$.fragment),q=Ue(" Sort"),ae=me(),he=ee("button"),Te(Pe.$$.fragment),Fe=Ue(" Transform"),ye=me(),Me=ee("div"),xe=ee("div"),fe=Ue(n[13]),ve=Ue(":"),de=me(),Ie=ee("button"),De=ee("span"),He=ee("span"),He.textContent="+",Xe=Ue(" Structure"),Y=me(),x=ee("button"),C=ee("span"),C.textContent="{}",k=Ue(" Object"),pe=me(),ge=ee("button"),Qe=ee("span"),Qe.textContent="[]",G=Ue(" Array"),_e=me(),Ee=ee("button"),We=ee("span"),We.innerHTML='<span class="jse-quote svelte-1jwirqu">&quot;</span>',it=Ue(" Value"),vt=me(),Dt=ee("div"),ot=me(),Et=ee("div"),yt=ee("button"),Te(Ut.$$.fragment),we=Ue(" Insert before"),Tt=me(),Ct=ee("button"),Te(At.$$.fragment),Lt=Ue(" Insert after"),On=me(),Xt&&Xt.c(),T(r,"type","button"),T(r,"title","Edit the key (Double-click on the key)"),r.disabled=s=!n[14],T(r,"class","svelte-1jwirqu"),T(t,"class","jse-row svelte-1jwirqu"),T(c,"class","jse-separator svelte-1jwirqu"),T(p,"type","button"),T(p,"title","Paste clipboard contents (Ctrl+V)"),p.disabled=_=!n[3],T(p,"class","svelte-1jwirqu"),T(d,"class","jse-row svelte-1jwirqu"),T(S,"class","jse-separator svelte-1jwirqu"),T(D,"type","button"),T(D,"title","Remove selected contents (Delete)"),D.disabled=H=!n[1],T(D,"class","svelte-1jwirqu"),T(N,"type","button"),T(N,"title","Duplicate selected contents (Ctrl+D)"),N.disabled=Z=!n[16],T(N,"class","svelte-1jwirqu"),T(P,"type","button"),T(P,"title","Extract selected contents"),P.disabled=z=!n[15],T(P,"class","svelte-1jwirqu"),T(M,"type","button"),T(M,"title","Sort array or object contents"),M.disabled=Q=!n[1],T(M,"class","svelte-1jwirqu"),T(he,"type","button"),T(he,"title","Transform array or object contents (filter, sort, project)"),he.disabled=Ae=!n[1],T(he,"class","svelte-1jwirqu"),T(R,"class","jse-column svelte-1jwirqu"),T(xe,"class","jse-label svelte-1jwirqu"),T(He,"class","jse-plus svelte-1jwirqu"),T(De,"class","jse-insert svelte-1jwirqu"),T(Ie,"type","button"),T(Ie,"title",mt=n[13]+" structure"),Ie.disabled=be=!n[12],T(Ie,"class","svelte-1jwirqu"),T(C,"class","jse-insert svelte-1jwirqu"),T(x,"type","button"),T(x,"title",K=n[13]+" object"),x.disabled=ie=!n[11],T(x,"class","svelte-1jwirqu"),T(Qe,"class","jse-insert svelte-1jwirqu"),T(ge,"type","button"),T(ge,"title",se=n[13]+" array"),ge.disabled=re=!n[10],T(ge,"class","svelte-1jwirqu"),T(We,"class","jse-insert svelte-1jwirqu"),T(Ee,"type","button"),T(Ee,"title",ct=n[13]+" value"),Ee.disabled=ft=!n[9],T(Ee,"class","svelte-1jwirqu"),T(Me,"class","jse-column svelte-1jwirqu"),T(O,"class","jse-row svelte-1jwirqu"),T(Dt,"class","jse-separator svelte-1jwirqu"),T(yt,"type","button"),T(yt,"title","Select area before current entry to insert or paste contents"),yt.disabled=$e=!n[1]||n[4],T(yt,"class","svelte-1jwirqu"),T(Ct,"type","button"),T(Ct,"title","Select area after current entry to insert or paste contents"),Ct.disabled=Zt=!n[1]||n[4],T(Ct,"class","svelte-1jwirqu"),T(Et,"class","jse-row svelte-1jwirqu"),T(e,"class","jse-contextmenu svelte-1jwirqu")},m(et,bt){ue(et,e,bt),j(e,t),j(t,r),ke(i,r,null),j(r,o),j(t,a),ke(l,t,null),j(e,u),j(e,c),j(e,f),j(e,d),ke(g,d,null),j(d,h),ke(v,d,null),j(d,m),j(d,p),ke(y,p,null),j(p,b),j(e,w),j(e,S),j(e,E),j(e,O),j(O,R),j(R,D),ke(F,D,null),j(D,B),j(R,L),j(R,N),ke(U,N,null),j(N,$),j(R,A),j(R,P),ke(V,P,null),j(P,W),j(R,I),j(R,M),ke(J,M,null),j(M,q),j(R,ae),j(R,he),ke(Pe,he,null),j(he,Fe),j(O,ye),j(O,Me),j(Me,xe),j(xe,fe),j(xe,ve),j(Me,de),j(Me,Ie),j(Ie,De),j(De,He),j(Ie,Xe),j(Me,Y),j(Me,x),j(x,C),j(x,k),j(Me,pe),j(Me,ge),j(ge,Qe),j(ge,G),j(Me,_e),j(Me,Ee),j(Ee,We),j(Ee,it),j(e,vt),j(e,Dt),j(e,ot),j(e,Et),j(Et,yt),ke(Ut,yt,null),j(yt,we),j(Et,Tt),j(Et,Ct),ke(At,Ct,null),j(Ct,Lt),j(e,On),Xt&&Xt.m(e,null),n[58](e),It=!0,Kn||(ti=[Ce(r,"click",n[17]),Ce(p,"click",n[21]),Ce(D,"click",n[22]),Ce(N,"click",n[23]),Ce(P,"click",n[24]),Ce(M,"click",n[26]),Ce(he,"click",n[27]),Ce(Ie,"click",n[54]),Ce(x,"click",n[55]),Ce(ge,"click",n[56]),Ce(Ee,"click",n[57]),Ce(yt,"click",n[28]),Ce(Ct,"click",n[29]),Ce(e,"keydown",n[30])],Kn=!0)},p(et,bt){(!It||bt[0]&16384&&s!==(s=!et[14]))&&(r.disabled=s);const Cr={};bt[0]&256&&(Cr.items=et[8]),bt[0]&4|bt[2]&1&&(Cr.$$scope={dirty:bt,ctx:et}),l.$set(Cr);const Dr={};bt[0]&128&&(Dr.items=et[7]),bt[0]&2|bt[2]&1&&(Dr.$$scope={dirty:bt,ctx:et}),g.$set(Dr);const Pi={};bt[0]&64&&(Pi.items=et[6]),bt[0]&2|bt[2]&1&&(Pi.$$scope={dirty:bt,ctx:et}),v.$set(Pi),(!It||bt[0]&8&&_!==(_=!et[3]))&&(p.disabled=_),(!It||bt[0]&2&&H!==(H=!et[1]))&&(D.disabled=H),(!It||bt[0]&65536&&Z!==(Z=!et[16]))&&(N.disabled=Z),(!It||bt[0]&32768&&z!==(z=!et[15]))&&(P.disabled=z),(!It||bt[0]&2&&Q!==(Q=!et[1]))&&(M.disabled=Q),(!It||bt[0]&2&&Ae!==(Ae=!et[1]))&&(he.disabled=Ae),(!It||bt[0]&8192)&&_t(fe,et[13]),(!It||bt[0]&8192&&mt!==(mt=et[13]+" structure"))&&T(Ie,"title",mt),(!It||bt[0]&4096&&be!==(be=!et[12]))&&(Ie.disabled=be),(!It||bt[0]&8192&&K!==(K=et[13]+" object"))&&T(x,"title",K),(!It||bt[0]&2048&&ie!==(ie=!et[11]))&&(x.disabled=ie),(!It||bt[0]&8192&&se!==(se=et[13]+" array"))&&T(ge,"title",se),(!It||bt[0]&1024&&re!==(re=!et[10]))&&(ge.disabled=re),(!It||bt[0]&8192&&ct!==(ct=et[13]+" value"))&&T(Ee,"title",ct),(!It||bt[0]&512&&ft!==(ft=!et[9]))&&(Ee.disabled=ft),(!It||bt[0]&18&&$e!==($e=!et[1]||et[4]))&&(yt.disabled=$e),(!It||bt[0]&18&&Zt!==(Zt=!et[1]||et[4]))&&(Ct.disabled=Zt),et[0]?Xt?(Xt.p(et,bt),bt[0]&1&&X(Xt,1)):(Xt=Aw(),Xt.c(),X(Xt,1),Xt.m(e,null)):Xt&&(Ve(),te(Xt,1,1,()=>{Xt=null}),qe())},i(et){It||(X(i.$$.fragment,et),X(l.$$.fragment,et),X(g.$$.fragment,et),X(v.$$.fragment,et),X(y.$$.fragment,et),X(F.$$.fragment,et),X(U.$$.fragment,et),X(V.$$.fragment,et),X(J.$$.fragment,et),X(Pe.$$.fragment,et),X(Ut.$$.fragment,et),X(At.$$.fragment,et),X(Xt),It=!0)},o(et){te(i.$$.fragment,et),te(l.$$.fragment,et),te(g.$$.fragment,et),te(v.$$.fragment,et),te(y.$$.fragment,et),te(F.$$.fragment,et),te(U.$$.fragment,et),te(V.$$.fragment,et),te(J.$$.fragment,et),te(Pe.$$.fragment,et),te(Ut.$$.fragment,et),te(At.$$.fragment,et),te(Xt),It=!1},d(et){et&&le(e),Oe(i),Oe(l),Oe(g),Oe(v),Oe(y),Oe(F),Oe(U),Oe(V),Oe(J),Oe(Pe),Oe(Ut),Oe(At),Xt&&Xt.d(),n[58](null),Kn=!1,rn(ti)}}}function oH(n,e,t){let r,i,o,s,a,l,u,c,f,d,g,h,v,m,p,y,b,_,w,S,{json:E}=e,{documentState:O}=e,{showTip:R}=e,{onCloseContextMenu:D}=e,{onEditKey:F}=e,{onEditValue:B}=e,{onToggleEnforceString:H}=e,{onCut:L}=e,{onCopy:N}=e,{onPaste:U}=e,{onRemove:$}=e,{onDuplicate:Z}=e,{onExtract:A}=e,{onInsertBefore:P}=e,{onInsert:V}=e,{onConvert:W}=e,{onInsertAfter:z}=e,{onSort:I}=e,{onTransform:M}=e,J;Nr(()=>{setTimeout(()=>{const k=[...J.querySelectorAll("button")].find(K=>!K.disabled);k&&k.focus()})});function q(){D(),F()}function Q(){D(),B()}function ae(){D(),H()}function he(){D(),L(!0)}function Pe(){D(),L(!1)}function Fe(){D(),N(!0)}function Ae(){D(),N(!1)}function ye(){D(),U()}function Me(){D(),$()}function xe(){D(),Z()}function fe(){D(),A()}function ve(k){D(),l?W(k):V(k)}function de(){D(),I()}function Ie(){D(),M()}function De(){D(),P()}function He(){D(),z()}function Xe(k){const K=nl(k).replace(/^Command\+/,"Ctrl+");if(K==="Up"||K==="Down"||K==="Left"||K==="Right"){k.preventDefault();const ie=Array.from(J.querySelectorAll("button:not([disabled])")),pe=F8({allElements:ie,currentElement:k.target,direction:K,hasPrio:ge=>ge.getAttribute("data-type")!=="jse-open-dropdown"});pe&&pe.focus()}}const mt=()=>ve("structure"),be=()=>ve("object"),Y=()=>ve("array"),x=()=>ve("value");function C(k){wt[k?"unshift":"push"](()=>{J=k,t(5,J)})}return n.$$set=k=>{"json"in k&&t(31,E=k.json),"documentState"in k&&t(32,O=k.documentState),"showTip"in k&&t(0,R=k.showTip),"onCloseContextMenu"in k&&t(33,D=k.onCloseContextMenu),"onEditKey"in k&&t(34,F=k.onEditKey),"onEditValue"in k&&t(35,B=k.onEditValue),"onToggleEnforceString"in k&&t(36,H=k.onToggleEnforceString),"onCut"in k&&t(37,L=k.onCut),"onCopy"in k&&t(38,N=k.onCopy),"onPaste"in k&&t(39,U=k.onPaste),"onRemove"in k&&t(40,$=k.onRemove),"onDuplicate"in k&&t(41,Z=k.onDuplicate),"onExtract"in k&&t(42,A=k.onExtract),"onInsertBefore"in k&&t(43,P=k.onInsertBefore),"onInsert"in k&&t(44,V=k.onInsert),"onConvert"in k&&t(45,W=k.onConvert),"onInsertAfter"in k&&t(46,z=k.onInsertAfter),"onSort"in k&&t(47,I=k.onSort),"onTransform"in k&&t(48,M=k.onTransform)},n.$$.update=()=>{n.$$.dirty[1]&2&&t(50,r=O.selection),n.$$.dirty[1]&1&&t(53,i=E!==void 0),n.$$.dirty[1]&524288&&t(3,o=r!=null),n.$$.dirty[0]&8|n.$$.dirty[1]&524288&&t(4,s=o&&gn(r.focusPath)),n.$$.dirty[0]&8|n.$$.dirty[1]&524289&&t(51,a=o?tt(E,r.focusPath):void 0),n.$$.dirty[1]&4718592&&t(1,l=i&&(Kt(r)||An(r)||Wt(r))),n.$$.dirty[0]&18|n.$$.dirty[1]&4194304&&t(16,u=i&&l&&!s),n.$$.dirty[0]&16|n.$$.dirty[1]&4718592&&t(15,c=i&&r!=null&&(Kt(r)||Wt(r))&&!s),n.$$.dirty[0]&16|n.$$.dirty[1]&4718593&&t(14,f=i&&r!=null&&$g(r)&&!s&&!Array.isArray(tt(E,qt(r.focusPath)))),n.$$.dirty[1]&5767168&&t(2,d=i&&r!=null&&$g(r)&&!Hn(a)),n.$$.dirty[0]&2&&t(52,g=l),n.$$.dirty[1]&2097152&&t(13,h=g?"Convert to":"Insert"),n.$$.dirty[0]&8|n.$$.dirty[1]&2097152&&t(12,v=g?!1:o),n.$$.dirty[0]&8|n.$$.dirty[1]&3670016&&t(11,m=g?Zf(r)&&!ir(a):o),n.$$.dirty[0]&8|n.$$.dirty[1]&3670016&&t(10,p=g?Zf(r)&&!Array.isArray(a):o),n.$$.dirty[0]&8|n.$$.dirty[1]&3670016&&t(9,y=g?Zf(r)&&Hn(a):o),n.$$.dirty[1]&1572866&&t(49,b=r!=null?zu(a,O.enforceStringMap,Ge(r.focusPath)):!1),n.$$.dirty[0]&4|n.$$.dirty[1]&262144&&t(8,_=[{icon:ev,text:"Edit value",title:"Edit the value (Double-click on the value)",onClick:Q,disabled:!d},{icon:b?Zh:Qh,text:"Enforce string",title:"Enforce keeping the value as string when it contains a numeric value",onClick:ae,disabled:!d}]),n.$$.dirty[0]&2&&t(7,w=[{icon:lg,text:"Cut formatted",title:"Cut selected contents, formatted with indentation (Ctrl+X)",onClick:he,disabled:!l},{icon:lg,text:"Cut compacted",title:"Cut selected contents, without indentation (Ctrl+Shift+X)",onClick:Pe,disabled:!l}]),n.$$.dirty[0]&2&&t(6,S=[{icon:vh,text:"Copy formatted",title:"Copy selected contents, formatted with indentation (Ctrl+C)",onClick:Fe,disabled:!l},{icon:vh,text:"Copy compacted",title:"Copy selected contents, without indentation (Ctrl+Shift+C)",onClick:Ae,disabled:!l}])},[R,l,d,o,s,J,S,w,_,y,p,m,v,h,f,c,u,q,Q,he,Fe,ye,Me,xe,fe,ve,de,Ie,De,He,Xe,E,O,D,F,B,H,L,N,U,$,Z,A,P,V,W,z,I,M,b,r,a,g,i,mt,be,Y,x,C]}class sH extends rt{constructor(e){super(),nt(this,e,oH,iH,Nt,{json:31,documentState:32,showTip:0,onCloseContextMenu:33,onEditKey:34,onEditValue:35,onToggleEnforceString:36,onCut:37,onCopy:38,onPaste:39,onRemove:40,onDuplicate:41,onExtract:42,onInsertBefore:43,onInsert:44,onConvert:45,onInsertAfter:46,onSort:47,onTransform:48},null,[-1,-1,-1])}}var UP={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var r=[],i=0;i<arguments.length;i++){var o=arguments[i];if(!!o){var s=typeof o;if(s==="string"||s==="number")r.push(o);else if(Array.isArray(o)){if(o.length){var a=t.apply(null,o);a&&r.push(a)}}else if(s==="object")if(o.toString===Object.prototype.toString)for(var l in o)e.call(o,l)&&o[l]&&r.push(l);else r.push(o.toString())}}return r.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(UP);const Ha=UP.exports;function Rw(n,e,t){const r=n.slice();return r[13]=e[t],r}function xw(n){let e,t,r=n[13].start+"",i,o,s=n[13].end+"",a,l,u,c;function f(){return n[12](n[13])}return{c(){e=ee("button"),t=Ue("show "),i=Ue(r),o=Ue("-"),a=Ue(s),l=me(),T(e,"type","button"),T(e,"class","jse-expand-items svelte-a94vy2")},m(d,g){ue(d,e,g),j(e,t),j(e,i),j(e,o),j(e,a),j(e,l),u||(c=Ce(e,"click",f),u=!0)},p(d,g){n=d,g&16&&r!==(r=n[13].start+"")&&_t(i,r),g&16&&s!==(s=n[13].end+"")&&_t(a,s)},d(d){d&&le(e),u=!1,c()}}}function aH(n){let e,t,r,i,o,s,a,l,u,c,f,d=n[4],g=[];for(let h=0;h<d.length;h+=1)g[h]=xw(Rw(n,d,h));return{c(){e=ee("div"),t=ee("div"),r=ee("div"),i=Ue("Items "),o=Ue(n[3]),s=Ue("-"),a=Ue(n[2]),l=me();for(let h=0;h<g.length;h+=1)g[h].c();T(r,"class","jse-text svelte-a94vy2"),T(e,"class","jse-collapsed-items svelte-a94vy2"),T(e,"style",u=Nw(n[0].length+2)),ze(e,"jse-selected",n[5])},m(h,v){ue(h,e,v),j(e,t),j(t,r),j(r,i),j(r,o),j(r,s),j(r,a),j(t,l);for(let m=0;m<g.length;m+=1)g[m].m(t,null);c||(f=Ce(e,"mousemove",lH),c=!0)},p(h,[v]){if(v&8&&_t(o,h[3]),v&4&&_t(a,h[2]),v&19){d=h[4];let m;for(m=0;m<d.length;m+=1){const p=Rw(h,d,m);g[m]?g[m].p(p,v):(g[m]=xw(p),g[m].c(),g[m].m(t,null))}for(;m<g.length;m+=1)g[m].d(1);g.length=d.length}v&1&&u!==(u=Nw(h[0].length+2))&&T(e,"style",u),v&32&&ze(e,"jse-selected",h[5])},i:Ne,o:Ne,d(h){h&&le(e),xn(g,h),c=!1,f()}}}function Nw(n){return`margin-left: calc(${n} * var(--jse-indent-size))`}function lH(n){n.stopPropagation()}function uH(n,e,t){let r,i,o,s,a,{visibleSections:l}=e,{sectionIndex:u}=e,{total:c}=e,{path:f}=e,{pointer:d}=e,{selection:g}=e,{onExpandSection:h}=e;const v=m=>h(f,m);return n.$$set=m=>{"visibleSections"in m&&t(6,l=m.visibleSections),"sectionIndex"in m&&t(7,u=m.sectionIndex),"total"in m&&t(8,c=m.total),"path"in m&&t(0,f=m.path),"pointer"in m&&t(9,d=m.pointer),"selection"in m&&t(10,g=m.selection),"onExpandSection"in m&&t(1,h=m.onExpandSection)},n.$$.update=()=>{n.$$.dirty&192&&t(11,r=l[u]),n.$$.dirty&2048&&t(3,i=r.end),n.$$.dirty&448&&t(2,o=l[u+1]?l[u+1].start:c),n.$$.dirty&1544&&t(5,s=Kt(g)?g.pointersMap[zm(d,i)]===!0:!1),n.$$.dirty&12&&t(4,a=eq(i,o))},[f,h,o,i,a,s,l,u,c,d,g,r,v]}class cH extends rt{constructor(e){super(),nt(this,e,uH,aH,Nt,{visibleSections:6,sectionIndex:7,total:8,path:0,pointer:9,selection:10,onExpandSection:1})}}function fH(n){let e,t,r,i,o;return t=new Ot({props:{data:Fi}}),{c(){e=ee("button"),Te(t.$$.fragment),T(e,"type","button"),T(e,"class","jse-context-menu-button svelte-1lm9yxm"),T(e,"title",Ek),ze(e,"jse-selected",n[0])},m(s,a){ue(s,e,a),ke(t,e,null),r=!0,i||(o=Ce(e,"click",n[1]),i=!0)},p(s,[a]){a&1&&ze(e,"jse-selected",s[0])},i(s){r||(X(t.$$.fragment,s),r=!0)},o(s){te(t.$$.fragment,s),r=!1},d(s){s&&le(e),Oe(t),i=!1,o()}}}function hH(n,e,t){let{selected:r}=e,{onContextMenu:i}=e;function o(s){let a=s.target;for(;a&&a.nodeName!=="BUTTON";)a=a.parentNode;a&&i({anchor:a,left:0,top:0,width:xl,height:Rl,offsetTop:2,offsetLeft:0,showTip:!0})}return n.$$set=s=>{"selected"in s&&t(0,r=s.selected),"onContextMenu"in s&&t(2,i=s.onContextMenu)},[r,o,i]}class Qs extends rt{constructor(e){super(),nt(this,e,hH,fH,Nt,{selected:0,onContextMenu:2})}}function Mw(n,e,t){const r=n.slice();return r[3]=e[t],r}function dH(n){let e,t=Ds(n[3].text)+"",r;return{c(){e=ee("span"),r=Ue(t),T(e,"class","jse-highlight svelte-mtessu"),ze(e,"jse-active",n[3].active)},m(i,o){ue(i,e,o),j(e,r)},p(i,o){o&1&&t!==(t=Ds(i[3].text)+"")&&_t(r,t),o&1&&ze(e,"jse-active",i[3].active)},d(i){i&&le(e)}}}function pH(n){let e=n[3].text+"",t;return{c(){t=Ue(e)},m(r,i){ue(r,t,i)},p(r,i){i&1&&e!==(e=r[3].text+"")&&_t(t,e)},d(r){r&&le(t)}}}function Dw(n){let e;function t(o,s){return o[3].type==="normal"?pH:dH}let r=t(n),i=r(n);return{c(){i.c(),e=xt()},m(o,s){i.m(o,s),ue(o,e,s)},p(o,s){r===(r=t(o))&&i?i.p(o,s):(i.d(1),i=r(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){i.d(o),o&&le(e)}}}function mH(n){let e,t=n[0],r=[];for(let i=0;i<t.length;i+=1)r[i]=Dw(Mw(n,t,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=xt()},m(i,o){for(let s=0;s<r.length;s+=1)r[s].m(i,o);ue(i,e,o)},p(i,[o]){if(o&1){t=i[0];let s;for(s=0;s<t.length;s+=1){const a=Mw(i,t,s);r[s]?r[s].p(a,o):(r[s]=Dw(a),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=t.length}},i:Ne,o:Ne,d(i){xn(r,i),i&&le(e)}}}function gH(n,e,t){let r,{text:i}=e,{searchResultItems:o}=e;return n.$$set=s=>{"text"in s&&t(1,i=s.text),"searchResultItems"in s&&t(2,o=s.searchResultItems)},n.$$.update=()=>{n.$$.dirty&6&&t(0,r=Nq(String(i),o))},[r,i,o]}class VP extends rt{constructor(e){super(),nt(this,e,gH,mH,on,{text:1,searchResultItems:2})}}function vH(n){let e,t,r,i;return{c(){e=ee("div"),T(e,"class",t=Yn(Ha("jse-editable-div",n[2],{"jse-short-text":n[0]}))+" svelte-1rwbo30"),T(e,"contenteditable","true"),T(e,"spellcheck","false")},m(o,s){ue(o,e,s),n[13](e),r||(i=[Ce(e,"input",n[3]),Ce(e,"keydown",n[4]),Ce(e,"paste",n[5]),Ce(e,"blur",n[6])],r=!0)},p(o,[s]){s&5&&t!==(t=Yn(Ha("jse-editable-div",o[2],{"jse-short-text":o[0]}))+" svelte-1rwbo30")&&T(e,"class",t)},i:Ne,o:Ne,d(o){o&&le(e),n[13](null),r=!1,rn(i)}}}function yH(n,e,t){const r=Sr("jsoneditor:EditableDiv");let{value:i}=e,{shortText:o=!1}=e,{onChange:s}=e,{onCancel:a}=e,{onFind:l}=e,{onPaste:u=Gt}=e,{onValueClass:c=()=>""}=e,f,d=c(i),g=!1;Nr(()=>{r("onMount",{value:i}),v(i),setTimeout(()=>EO(f))}),fo(()=>{const w=h();r("onDestroy",{closed:g,value:i,newValue:w}),!g&&w!==i&&s(w,Cs.NO)});function h(){return N8(f.innerText)}function v(w){t(1,f.innerText=Ds(w),f)}function m(){const w=h();w===""&&v(""),t(2,d=c(w))}function p(w){w.stopPropagation();const S=nl(w).replace(/^Command\+/,"Ctrl+");if(S==="Escape"&&(g=!0,a()),S==="Enter"||S==="Tab"){g=!0;const E=h();s(E,Cs.NEXT_INSIDE)}S==="Ctrl+F"&&(w.preventDefault(),l(!1)),S==="Ctrl+H"&&(w.preventDefault(),l(!0))}function y(w){if(!u)return;const S=w.clipboardData.getData("text/plain");u(S)}function b(){const w=document.hasFocus(),S=h();r("handleBlur",{hasFocus:w,closed:g,value:i,newValue:S}),document.hasFocus()&&!g&&(g=!0,S!==i?s(S,Cs.SELF):a())}function _(w){wt[w?"unshift":"push"](()=>{f=w,t(1,f)})}return n.$$set=w=>{"value"in w&&t(7,i=w.value),"shortText"in w&&t(0,o=w.shortText),"onChange"in w&&t(8,s=w.onChange),"onCancel"in w&&t(9,a=w.onCancel),"onFind"in w&&t(10,l=w.onFind),"onPaste"in w&&t(11,u=w.onPaste),"onValueClass"in w&&t(12,c=w.onValueClass)},[o,f,d,m,p,y,b,i,s,a,l,u,c,_]}class qP extends rt{constructor(e){super(),nt(this,e,yH,vH,Nt,{value:7,shortText:0,onChange:8,onCancel:9,onFind:10,onPaste:11,onValueClass:12})}}function _H(n){let e,t,r,i,o,s,a;const l=[SH,wH],u=[];function c(f,d){return f[1]?0:1}return t=c(n),r=u[t]=l[t](n),{c(){e=ee("div"),r.c(),T(e,"data-type","selectable-key"),T(e,"class",i=Yn(n[6](n[0]))+" svelte-1cm0o9n")},m(f,d){ue(f,e,d),u[t].m(e,null),o=!0,s||(a=Ce(e,"dblclick",n[5]),s=!0)},p(f,d){let g=t;t=c(f),t===g?u[t].p(f,d):(Ve(),te(u[g],1,1,()=>{u[g]=null}),qe(),r=u[t],r?r.p(f,d):(r=u[t]=l[t](f),r.c()),X(r,1),r.m(e,null)),(!o||d&1&&i!==(i=Yn(f[6](f[0]))+" svelte-1cm0o9n"))&&T(e,"class",i)},i(f){o||(X(r),o=!0)},o(f){te(r),o=!1},d(f){f&&le(e),u[t].d(),s=!1,a()}}}function bH(n){let e,t;return e=new qP({props:{value:n[2].normalization.escapeValue(n[0]),shortText:!0,onChange:n[7],onCancel:n[8],onFind:n[2].onFind}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i&5&&(o.value=r[2].normalization.escapeValue(r[0])),i&4&&(o.onFind=r[2].onFind),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function wH(n){let e=Ds(n[2].normalization.escapeValue(n[0]))+"",t;return{c(){t=Ue(e)},m(r,i){ue(r,t,i)},p(r,i){i&5&&e!==(e=Ds(r[2].normalization.escapeValue(r[0]))+"")&&_t(t,e)},i:Ne,o:Ne,d(r){r&&le(t)}}}function SH(n){let e,t;return e=new VP({props:{text:n[2].normalization.escapeValue(n[0]),searchResultItems:n[1]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i&5&&(o.text=r[2].normalization.escapeValue(r[0])),i&2&&(o.searchResultItems=r[1]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Lw(n){let e,t;return e=new Qs({props:{selected:!0,onContextMenu:n[2].onContextMenu}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i&4&&(o.onContextMenu=r[2].onContextMenu),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function EH(n){let e,t,r,i,o;const s=[bH,_H],a=[];function l(c,f){return c[4]?0:1}e=l(n),t=a[e]=s[e](n);let u=!n[2].readOnly&&n[3]&&!n[4]&&Lw(n);return{c(){t.c(),r=me(),u&&u.c(),i=xt()},m(c,f){a[e].m(c,f),ue(c,r,f),u&&u.m(c,f),ue(c,i,f),o=!0},p(c,[f]){let d=e;e=l(c),e===d?a[e].p(c,f):(Ve(),te(a[d],1,1,()=>{a[d]=null}),qe(),t=a[e],t?t.p(c,f):(t=a[e]=s[e](c),t.c()),X(t,1),t.m(r.parentNode,r)),!c[2].readOnly&&c[3]&&!c[4]?u?(u.p(c,f),f&28&&X(u,1)):(u=Lw(c),u.c(),X(u,1),u.m(i.parentNode,i)):u&&(Ve(),te(u,1,1,()=>{u=null}),qe())},i(c){o||(X(t),X(u),o=!0)},o(c){te(t),te(u),o=!1},d(c){a[e].d(c),c&&le(r),u&&u.d(c),c&&le(i)}}}function CH(n,e,t){let r,i,{path:o}=e,{pointer:s}=e,{key:a}=e,{selection:l}=e,{searchResultItems:u}=e,{onUpdateKey:c}=e,{context:f}=e;function d(m){!i&&!f.readOnly&&(m.preventDefault(),f.onSelect(Gr(o,!0)))}function g(m){return Ha("jse-key",{"jse-empty":m===""})}function h(m,p){const y=c(a,f.normalization.unescapeValue(m)),b=qt(o).concat(y);f.onSelect(p===Cs.NEXT_INSIDE?hn(b,!1):Gr(b,!1)),p!==Cs.SELF&&f.focus()}function v(){f.onSelect(Gr(o,!1)),f.focus()}return n.$$set=m=>{"path"in m&&t(9,o=m.path),"pointer"in m&&t(10,s=m.pointer),"key"in m&&t(0,a=m.key),"selection"in m&&t(11,l=m.selection),"searchResultItems"in m&&t(1,u=m.searchResultItems),"onUpdateKey"in m&&t(12,c=m.onUpdateKey),"context"in m&&t(2,f=m.context)},n.$$.update=()=>{n.$$.dirty&3072&&t(3,r=l?l.pointersMap[s]===!0&&An(l):void 0),n.$$.dirty&2056&&t(4,i=r&&$l(l))},[a,u,f,r,i,d,g,h,v,o,s,l,c]}class kH extends rt{constructor(e){super(),nt(this,e,CH,EH,Nt,{path:9,pointer:10,key:0,selection:11,searchResultItems:1,onUpdateKey:12,context:2})}}function jw(n,e,t){const r=n.slice();return r[9]=e[t],r}function Bw(n){let e,t,r;const i=[n[9].props];var o=n[9].component;function s(a){let l={};for(let u=0;u<i.length;u+=1)l=is(l,i[u]);return{props:l}}return o&&(e=new o(s())),{c(){e&&Te(e.$$.fragment),t=xt()},m(a,l){e&&ke(e,a,l),ue(a,t,l),r=!0},p(a,l){const u=l&1?zs(i,[pd(a[9].props)]):{};if(o!==(o=a[9].component)){if(e){Ve();const c=e;te(c.$$.fragment,1,0,()=>{Oe(c,1)}),qe()}o?(e=new o(s()),Te(e.$$.fragment),X(e.$$.fragment,1),ke(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(a){r||(e&&X(e.$$.fragment,a),r=!0)},o(a){e&&te(e.$$.fragment,a),r=!1},d(a){a&&le(t),e&&Oe(e,a)}}}function OH(n){let e,t,r=n[0],i=[];for(let s=0;s<r.length;s+=1)i[s]=Bw(jw(n,r,s));const o=s=>te(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=xt()},m(s,a){for(let l=0;l<i.length;l+=1)i[l].m(s,a);ue(s,e,a),t=!0},p(s,[a]){if(a&1){r=s[0];let l;for(l=0;l<r.length;l+=1){const u=jw(s,r,l);i[l]?(i[l].p(u,a),X(i[l],1)):(i[l]=Bw(u),i[l].c(),X(i[l],1),i[l].m(e.parentNode,e))}for(Ve(),l=r.length;l<i.length;l+=1)o(l);qe()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)X(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)te(i[a]);t=!1},d(s){xn(i,s),s&&le(e)}}}function TH(n,e,t){let r,i,{path:o}=e,{value:s}=e,{context:a}=e,{isSelected:l}=e,{enforceString:u}=e,{selection:c}=e,{searchResultItems:f}=e;return n.$$set=d=>{"path"in d&&t(1,o=d.path),"value"in d&&t(2,s=d.value),"context"in d&&t(3,a=d.context),"isSelected"in d&&t(4,l=d.isSelected),"enforceString"in d&&t(5,u=d.enforceString),"selection"in d&&t(6,c=d.selection),"searchResultItems"in d&&t(7,f=d.searchResultItems)},n.$$.update=()=>{n.$$.dirty&72&&t(8,r=!a.readOnly&&Wt(c)&&$l(c)),n.$$.dirty&510&&t(0,i=a.onRenderValue({path:o,value:s,readOnly:a.readOnly,enforceString:u,isSelected:l,isEditing:r,normalization:a.normalization,selection:c,searchResultItems:f,onPatch:a.onPatch,onPasteJson:a.onPasteJson,onSelect:a.onSelect,onFind:a.onFind,focus:a.focus}))},[i,o,s,a,l,u,c,f,r]}class PH extends rt{constructor(e){super(),nt(this,e,TH,OH,Nt,{path:1,value:2,context:3,isSelected:4,enforceString:5,selection:6,searchResultItems:7})}}const Gn={selecting:!1,selectionAnchor:null,selectionAnchorType:null,selectionFocus:null,dragging:!1};function im({json:n,documentState:e,deltaY:t,items:r}){const i=e.selection,o=t<0?IH({json:n,selection:i,deltaY:t,items:r}):AH({json:n,selection:i,deltaY:t,items:r});if(!o||o.offset===0)return{operations:void 0,updatedSelection:void 0,offset:0};const s=kq(n,e.selection,o),a=qt(Va(i)),l=tt(n,a);if(Array.isArray(l)){const u=RH({items:r,json:n,selection:i,offset:o.offset});return{operations:s,updatedSelection:u,offset:o.offset}}else return{operations:s,updatedSelection:void 0,offset:o.offset}}function IH({items:n,selection:e,deltaY:t}){const r=Va(e),i=n.findIndex(c=>Yt(c.path,r)),o=()=>{var c;return(c=n[s-1])===null||c===void 0?void 0:c.height};let s=i,a=0;for(;o()!==void 0&&Math.abs(t)>a+o()/2;)a+=o(),s-=1;const l=n[s].path,u=s-i;return s!==i&&n[s]!==void 0?{beforePath:l,offset:u}:void 0}function AH({json:n,items:e,selection:t,deltaY:r}){var i;const o=Xd(t),s=e.findIndex(m=>Yt(m.path,o));let a=0,l=s;const u=()=>{var m;return(m=e[l+1])===null||m===void 0?void 0:m.height};for(;u()!==void 0&&Math.abs(r)>a+u()/2;)a+=u(),l+=1;const c=qt(o),f=tt(n,c),g=Array.isArray(f)?l:l+1,h=(i=e[g])===null||i===void 0?void 0:i.path,v=l-s;return h?{beforePath:h,offset:v}:{append:!0,offset:v}}function RH({items:n,json:e,selection:t,offset:r}){var i,o;const s=Va(t),a=Xd(t),l=n.findIndex(d=>Yt(d.path,s)),u=n.findIndex(d=>Yt(d.path,a)),c=(i=n[l+r])===null||i===void 0?void 0:i.path,f=(o=n[u+r])===null||o===void 0?void 0:o.path;return Rn(e,c,f)}function xH(n,e){if(!n)return;const t={};for(const r of Object.keys(n))e(r,n[r])&&(t[r]=n[r]);return Object.keys(t).length>0?t:void 0}function xi(n,e){return xH(n,t=>Ta(t,e))}function NH(n){let e,t;return{c(){e=ee("div"),t=Ue(n[0]),T(e,"class","jse-tooltip svelte-r4omvg")},m(r,i){ue(r,e,i),j(e,t)},p(r,[i]){i&1&&_t(t,r[0])},i:Ne,o:Ne,d(r){r&&le(e)}}}function MH(n,e,t){let{text:r}=e;return n.$$set=i=>{"text"in i&&t(0,r=i.text)},[r]}class DH extends rt{constructor(e){super(),nt(this,e,MH,NH,on,{text:0})}}function HP(n,{text:e,openAbsolutePopup:t,closeAbsolutePopup:r}){let i;function o(){i=t(DH,{text:e},{position:"top",width:10*e.length,offsetTop:3,anchor:n,closeOnOuterClick:!0})}function s(){r(i)}return n.addEventListener("mouseenter",o),n.addEventListener("mouseleave",s),{destroy(){n.removeEventListener("mouseenter",o),n.removeEventListener("mouseleave",s)}}}function LH(n){let e,t,r,i,o,s;return t=new Ot({props:{data:rl}}),{c(){e=ee("button"),Te(t.$$.fragment),T(e,"type","button"),T(e,"class","jse-validation-error svelte-1q62mys")},m(a,l){ue(a,e,l),ke(t,e,null),i=!0,o||(s=[Ce(e,"click",function(){si(n[0])&&n[0].apply(this,arguments)}),xu(r=HP.call(null,e,{text:n[1],...n[2]}))],o=!0)},p(a,[l]){n=a,r&&si(r.update)&&l&2&&r.update.call(null,{text:n[1],...n[2]})},i(a){i||(X(t.$$.fragment,a),i=!0)},o(a){te(t.$$.fragment,a),i=!1},d(a){a&&le(e),Oe(t),o=!1,rn(s)}}}function jH(n,e,t){let r;const i=ur("absolute-popup");let{validationError:o}=e,{onExpand:s}=e;return n.$$set=a=>{"validationError"in a&&t(3,o=a.validationError),"onExpand"in a&&t(0,s=a.onExpand)},n.$$.update=()=>{n.$$.dirty&8&&t(1,r=o.isChildError?"Contains invalid data":o.message)},[s,r,i,o]}class Fv extends rt{constructor(e){super(),nt(this,e,jH,LH,on,{validationError:3,onExpand:0})}}const BH=n=>({}),Fw=n=>({});function Uw(n,e,t){const r=n.slice();return r[54]=e[t],r}const FH=n=>({}),Vw=n=>({});function qw(n,e,t){const r=n.slice();return r[48]=e[t],r[50]=t,r}function Hw(n,e,t){const r=n.slice();return r[51]=e[t],r}const UH=n=>({}),zw=n=>({});function VH(n){let e,t,r,i,o,s,a=!n[8].readOnly&&n[16]&&n[7]&&(Wt(n[7])||Kt(n[7]))&&!n[7].edit&&Yt(n[7].focusPath,n[1]),l,u,c;const f=n[35].identifier,d=Yr(f,n,n[36],Fw);let g=!n[17]&&Ww();o=new PH({props:{path:n[1],value:n[0],enforceString:n[13],isSelected:n[16],selection:n[16]?n[7]:void 0,searchResultItems:kw(n[6],n[9]),context:n[8]}});let h=a&&Kw(n),v=n[15]&&Gw(n),m=!n[17]&&Jw(n);return{c(){e=ee("div"),t=ee("div"),d&&d.c(),r=me(),g&&g.c(),i=me(),Te(o.$$.fragment),s=me(),h&&h.c(),l=me(),v&&v.c(),u=me(),m&&m.c(),T(t,"class","jse-contents svelte-1dkd71f"),T(e,"class","jse-contents-outer svelte-1dkd71f"),T(e,"style",n[18])},m(p,y){ue(p,e,y),j(e,t),d&&d.m(t,null),j(t,r),g&&g.m(t,null),j(t,i),ke(o,t,null),j(t,s),h&&h.m(t,null),j(e,l),v&&v.m(e,null),j(e,u),m&&m.m(e,null),c=!0},p(p,y){d&&d.p&&(!c||y[1]&32)&&Zr(d,f,p,p[36],c?Qr(f,p[36],y,BH):Xr(p[36]),Fw),p[17]?g&&(g.d(1),g=null):g||(g=Ww(),g.c(),g.m(t,i));const b={};y[0]&2&&(b.path=p[1]),y[0]&1&&(b.value=p[0]),y[0]&8192&&(b.enforceString=p[13]),y[0]&65536&&(b.isSelected=p[16]),y[0]&65664&&(b.selection=p[16]?p[7]:void 0),y[0]&576&&(b.searchResultItems=kw(p[6],p[9])),y[0]&256&&(b.context=p[8]),o.$set(b),y[0]&65922&&(a=!p[8].readOnly&&p[16]&&p[7]&&(Wt(p[7])||Kt(p[7]))&&!p[7].edit&&Yt(p[7].focusPath,p[1])),a?h?(h.p(p,y),y[0]&65922&&X(h,1)):(h=Kw(p),h.c(),X(h,1),h.m(t,null)):h&&(Ve(),te(h,1,1,()=>{h=null}),qe()),p[15]?v?(v.p(p,y),y[0]&32768&&X(v,1)):(v=Gw(p),v.c(),X(v,1),v.m(e,u)):v&&(Ve(),te(v,1,1,()=>{v=null}),qe()),p[17]?m&&(m.d(1),m=null):m?m.p(p,y):(m=Jw(p),m.c(),m.m(e,null)),(!c||y[0]&262144)&&T(e,"style",p[18])},i(p){c||(X(d,p),X(o.$$.fragment,p),X(h),X(v),c=!0)},o(p){te(d,p),te(o.$$.fragment,p),te(h),te(v),c=!1},d(p){p&&le(e),d&&d.d(p),g&&g.d(),Oe(o),h&&h.d(),v&&v.d(),m&&m.d()}}}function qH(n){let e,t,r,i,o,s,a,l,u,c,f,d=!n[8].readOnly&&n[16]&&n[7]&&(Wt(n[7])||Kt(n[7]))&&!n[7].edit&&Yt(n[7].focusPath,n[1]),g,h,v,m,p,y,b;const _=[WH,zH],w=[];function S(A,P){return A[12]?0:1}i=S(n),o=w[i]=_[i](n);const E=n[35].identifier,O=Yr(E,n,n[36],Vw);let R=!n[17]&&Yw();function D(A,P){return A[12]?GH:KH}let F=D(n),B=F(n),H=d&&Qw(n),L=n[15]&&(!n[12]||!n[15].isChildError)&&Zw(n);function N(A,P){if(A[12])return YH;if(!A[17])return JH}let U=N(n),$=U&&U(n),Z=n[12]&&Xw(n);return{c(){e=ee("div"),t=ee("div"),r=ee("button"),o.c(),s=me(),O&&O.c(),a=me(),R&&R.c(),l=me(),u=ee("div"),c=ee("div"),B.c(),f=me(),H&&H.c(),g=me(),L&&L.c(),h=me(),$&&$.c(),v=me(),Z&&Z.c(),m=xt(),T(r,"type","button"),T(r,"class","jse-expand svelte-1dkd71f"),T(r,"title","Expand or collapse this object (Ctrl+Click to expand/collapse recursively)"),T(c,"class","jse-meta-inner svelte-1dkd71f"),T(u,"class","jse-meta svelte-1dkd71f"),T(u,"data-type","selectable-value"),T(t,"class","jse-header svelte-1dkd71f"),T(e,"class","jse-header-outer svelte-1dkd71f"),T(e,"style",n[18])},m(A,P){ue(A,e,P),j(e,t),j(t,r),w[i].m(r,null),j(t,s),O&&O.m(t,null),j(t,a),R&&R.m(t,null),j(t,l),j(t,u),j(u,c),B.m(c,null),j(t,f),H&&H.m(t,null),j(e,g),L&&L.m(e,null),j(e,h),$&&$.m(e,null),ue(A,v,P),Z&&Z.m(A,P),ue(A,m,P),p=!0,y||(b=Ce(r,"click",n[22]),y=!0)},p(A,P){let V=i;i=S(A),i===V?w[i].p(A,P):(Ve(),te(w[V],1,1,()=>{w[V]=null}),qe(),o=w[i],o?o.p(A,P):(o=w[i]=_[i](A),o.c()),X(o,1),o.m(r,null)),O&&O.p&&(!p||P[1]&32)&&Zr(O,E,A,A[36],p?Qr(E,A[36],P,FH):Xr(A[36]),Vw),A[17]?R&&(R.d(1),R=null):R||(R=Yw(),R.c(),R.m(t,l)),F===(F=D(A))&&B?B.p(A,P):(B.d(1),B=F(A),B&&(B.c(),B.m(c,null))),P[0]&65922&&(d=!A[8].readOnly&&A[16]&&A[7]&&(Wt(A[7])||Kt(A[7]))&&!A[7].edit&&Yt(A[7].focusPath,A[1])),d?H?(H.p(A,P),P[0]&65922&&X(H,1)):(H=Qw(A),H.c(),X(H,1),H.m(t,null)):H&&(Ve(),te(H,1,1,()=>{H=null}),qe()),A[15]&&(!A[12]||!A[15].isChildError)?L?(L.p(A,P),P[0]&36864&&X(L,1)):(L=Zw(A),L.c(),X(L,1),L.m(e,h)):L&&(Ve(),te(L,1,1,()=>{L=null}),qe()),U===(U=N(A))&&$?$.p(A,P):($&&$.d(1),$=U&&U(A),$&&($.c(),$.m(e,null))),(!p||P[0]&262144)&&T(e,"style",A[18]),A[12]?Z?(Z.p(A,P),P[0]&4096&&X(Z,1)):(Z=Xw(A),Z.c(),X(Z,1),Z.m(m.parentNode,m)):Z&&(Ve(),te(Z,1,1,()=>{Z=null}),qe())},i(A){p||(X(o),X(O,A),X(H),X(L),X(Z),p=!0)},o(A){te(o),te(O,A),te(H),te(L),te(Z),p=!1},d(A){A&&le(e),w[i].d(),O&&O.d(A),R&&R.d(),B.d(),H&&H.d(),L&&L.d(),$&&$.d(),A&&le(v),Z&&Z.d(A),A&&le(m),y=!1,b()}}}function HH(n){let e,t,r,i,o,s,a,l,u,c,f,d=!n[8].readOnly&&n[16]&&n[7]&&(Wt(n[7])||Kt(n[7]))&&!n[7].edit&&Yt(n[7].focusPath,n[1]),g,h,v,m,p,y,b;const _=[XH,ZH],w=[];function S(A,P){return A[12]?0:1}i=S(n),o=w[i]=_[i](n);const E=n[35].identifier,O=Yr(E,n,n[36],zw);let R=!n[17]&&n2();function D(A,P){return A[12]?ez:$H}let F=D(n),B=F(n),H=d&&r2(n),L=n[15]&&(!n[12]||!n[15].isChildError)&&i2(n);function N(A,P){return A[12]?nz:tz}let U=N(n),$=U(n),Z=n[12]&&o2(n);return{c(){e=ee("div"),t=ee("div"),r=ee("button"),o.c(),s=me(),O&&O.c(),a=me(),R&&R.c(),l=me(),u=ee("div"),c=ee("div"),B.c(),f=me(),H&&H.c(),g=me(),L&&L.c(),h=me(),$.c(),v=me(),Z&&Z.c(),m=xt(),T(r,"type","button"),T(r,"class","jse-expand svelte-1dkd71f"),T(r,"title","Expand or collapse this array (Ctrl+Click to expand/collapse recursively)"),T(c,"class","jse-meta-inner svelte-1dkd71f"),T(c,"data-type","selectable-value"),T(u,"class","jse-meta svelte-1dkd71f"),T(t,"class","jse-header svelte-1dkd71f"),T(e,"class","jse-header-outer svelte-1dkd71f"),T(e,"style",n[18])},m(A,P){ue(A,e,P),j(e,t),j(t,r),w[i].m(r,null),j(t,s),O&&O.m(t,null),j(t,a),R&&R.m(t,null),j(t,l),j(t,u),j(u,c),B.m(c,null),j(t,f),H&&H.m(t,null),j(e,g),L&&L.m(e,null),j(e,h),$.m(e,null),ue(A,v,P),Z&&Z.m(A,P),ue(A,m,P),p=!0,y||(b=Ce(r,"click",n[22]),y=!0)},p(A,P){let V=i;i=S(A),i===V?w[i].p(A,P):(Ve(),te(w[V],1,1,()=>{w[V]=null}),qe(),o=w[i],o?o.p(A,P):(o=w[i]=_[i](A),o.c()),X(o,1),o.m(r,null)),O&&O.p&&(!p||P[1]&32)&&Zr(O,E,A,A[36],p?Qr(E,A[36],P,UH):Xr(A[36]),zw),A[17]?R&&(R.d(1),R=null):R||(R=n2(),R.c(),R.m(t,l)),F===(F=D(A))&&B?B.p(A,P):(B.d(1),B=F(A),B&&(B.c(),B.m(c,null))),P[0]&65922&&(d=!A[8].readOnly&&A[16]&&A[7]&&(Wt(A[7])||Kt(A[7]))&&!A[7].edit&&Yt(A[7].focusPath,A[1])),d?H?(H.p(A,P),P[0]&65922&&X(H,1)):(H=r2(A),H.c(),X(H,1),H.m(t,null)):H&&(Ve(),te(H,1,1,()=>{H=null}),qe()),A[15]&&(!A[12]||!A[15].isChildError)?L?(L.p(A,P),P[0]&36864&&X(L,1)):(L=i2(A),L.c(),X(L,1),L.m(e,h)):L&&(Ve(),te(L,1,1,()=>{L=null}),qe()),U===(U=N(A))&&$?$.p(A,P):($.d(1),$=U(A),$&&($.c(),$.m(e,null))),(!p||P[0]&262144)&&T(e,"style",A[18]),A[12]?Z?(Z.p(A,P),P[0]&4096&&X(Z,1)):(Z=o2(A),Z.c(),X(Z,1),Z.m(m.parentNode,m)):Z&&(Ve(),te(Z,1,1,()=>{Z=null}),qe())},i(A){p||(X(o),X(O,A),X(H),X(L),X(Z),p=!0)},o(A){te(o),te(O,A),te(H),te(L),te(Z),p=!1},d(A){A&&le(e),w[i].d(),O&&O.d(A),R&&R.d(),B.d(),H&&H.d(),L&&L.d(),$.d(),A&&le(v),Z&&Z.d(A),A&&le(m),y=!1,b()}}}function Ww(n){let e;return{c(){e=ee("div"),e.textContent=":",T(e,"class","jse-separator svelte-1dkd71f")},m(t,r){ue(t,e,r)},d(t){t&&le(e)}}}function Kw(n){let e,t,r;return t=new Qs({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=ee("div"),Te(t.$$.fragment),T(e,"class","jse-context-menu-button-anchor svelte-1dkd71f")},m(i,o){ue(i,e,o),ke(t,e,null),r=!0},p(i,o){const s={};o[0]&256&&(s.onContextMenu=i[8].onContextMenu),t.$set(s)},i(i){r||(X(t.$$.fragment,i),r=!0)},o(i){te(t.$$.fragment,i),r=!1},d(i){i&&le(e),Oe(t)}}}function Gw(n){let e,t;return e=new Fv({props:{validationError:n[15],onExpand:n[23]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i[0]&32768&&(o.validationError=r[15]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Jw(n){let e,t,r;return{c(){e=ee("div"),T(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),T(e,"data-type","insert-selection-area-after")},m(i,o){ue(i,e,o),t||(r=Ce(e,"click",n[31]),t=!0)},p:Ne,d(i){i&&le(e),t=!1,r()}}}function zH(n){let e,t;return e=new Ot({props:{data:Do}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p:Ne,i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function WH(n){let e,t;return e=new Ot({props:{data:Fi}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p:Ne,i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Yw(n){let e;return{c(){e=ee("div"),e.textContent=":",T(e,"class","jse-separator svelte-1dkd71f")},m(t,r){ue(t,e,r)},d(t){t&&le(e)}}}function KH(n){let e,t,r,i=Object.keys(n[0]).length+"",o,s,a=Object.keys(n[0]).length===1?"prop":"props",l,u,c,f,d;return{c(){e=ee("div"),e.textContent="{",t=me(),r=ee("button"),o=Ue(i),s=me(),l=Ue(a),u=me(),c=ee("div"),c.textContent="}",T(e,"class","jse-bracket svelte-1dkd71f"),T(r,"type","button"),T(r,"class","jse-tag svelte-1dkd71f"),T(c,"class","jse-bracket svelte-1dkd71f")},m(g,h){ue(g,e,h),ue(g,t,h),ue(g,r,h),j(r,o),j(r,s),j(r,l),ue(g,u,h),ue(g,c,h),f||(d=Ce(r,"click",n[23]),f=!0)},p(g,h){h[0]&1&&i!==(i=Object.keys(g[0]).length+"")&&_t(o,i),h[0]&1&&a!==(a=Object.keys(g[0]).length===1?"prop":"props")&&_t(l,a)},d(g){g&&le(e),g&&le(t),g&&le(r),g&&le(u),g&&le(c),f=!1,d()}}}function GH(n){let e;return{c(){e=ee("div"),e.textContent="{",T(e,"class","jse-bracket jse-expanded svelte-1dkd71f")},m(t,r){ue(t,e,r)},p:Ne,d(t){t&&le(e)}}}function Qw(n){let e,t,r;return t=new Qs({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=ee("div"),Te(t.$$.fragment),T(e,"class","jse-context-menu-button-anchor svelte-1dkd71f")},m(i,o){ue(i,e,o),ke(t,e,null),r=!0},p(i,o){const s={};o[0]&256&&(s.onContextMenu=i[8].onContextMenu),t.$set(s)},i(i){r||(X(t.$$.fragment,i),r=!0)},o(i){te(t.$$.fragment,i),r=!1},d(i){i&&le(e),Oe(t)}}}function Zw(n){let e,t;return e=new Fv({props:{validationError:n[15],onExpand:n[23]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i[0]&32768&&(o.validationError=r[15]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function JH(n){let e,t,r;return{c(){e=ee("div"),T(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),T(e,"data-type","insert-selection-area-after")},m(i,o){ue(i,e,o),t||(r=Ce(e,"click",n[31]),t=!0)},p:Ne,d(i){i&&le(e),t=!1,r()}}}function YH(n){let e,t,r;return{c(){e=ee("div"),T(e,"class","jse-insert-selection-area jse-inside svelte-1dkd71f"),T(e,"data-type","insert-selection-area-inside")},m(i,o){ue(i,e,o),t||(r=Ce(e,"click",n[30]),t=!0)},p:Ne,d(i){i&&le(e),t=!1,r()}}}function Xw(n){let e,t=!n[8].readOnly&&(n[10]===ho||n[16]&&Bn(n[7])),r,i,o,s,a,l,u=t&&$w(n),c=n[20](n[1],n[0],n[2],n[3],n[4],n[5],n[6],n[7],n[11]),f=[];for(let h=0;h<c.length;h+=1)f[h]=e2(Uw(n,c,h));const d=h=>te(f[h],1,1,()=>{f[h]=null});let g=!n[17]&&t2(n);return{c(){e=ee("div"),u&&u.c(),r=me();for(let h=0;h<f.length;h+=1)f[h].c();i=me(),o=ee("div"),s=ee("div"),s.innerHTML='<div class="jse-bracket svelte-1dkd71f">}</div>',a=me(),g&&g.c(),T(e,"class","jse-props svelte-1dkd71f"),T(s,"data-type","selectable-value"),T(s,"class","jse-footer svelte-1dkd71f"),T(o,"class","jse-footer-outer svelte-1dkd71f"),T(o,"style",n[18])},m(h,v){ue(h,e,v),u&&u.m(e,null),j(e,r);for(let m=0;m<f.length;m+=1)f[m].m(e,null);ue(h,i,v),ue(h,o,v),j(o,s),j(o,a),g&&g.m(o,null),l=!0},p(h,v){if(v[0]&66944&&(t=!h[8].readOnly&&(h[10]===ho||h[16]&&Bn(h[7]))),t?u?(u.p(h,v),v[0]&66944&&X(u,1)):(u=$w(h),u.c(),X(u,1),u.m(e,r)):u&&(Ve(),te(u,1,1,()=>{u=null}),qe()),v[0]&152046079){c=h[20](h[1],h[0],h[2],h[3],h[4],h[5],h[6],h[7],h[11]);let m;for(m=0;m<c.length;m+=1){const p=Uw(h,c,m);f[m]?(f[m].p(p,v),X(f[m],1)):(f[m]=e2(p),f[m].c(),X(f[m],1),f[m].m(e,null))}for(Ve(),m=c.length;m<f.length;m+=1)d(m);qe()}h[17]?g&&(g.d(1),g=null):g?g.p(h,v):(g=t2(h),g.c(),g.m(o,null)),(!l||v[0]&262144)&&T(o,"style",h[18])},i(h){if(!l){X(u);for(let v=0;v<c.length;v+=1)X(f[v]);l=!0}},o(h){te(u),f=f.filter(Boolean);for(let v=0;v<f.length;v+=1)te(f[v]);l=!1},d(h){h&&le(e),u&&u.d(),xn(f,h),h&&le(i),h&&le(o),g&&g.d()}}}function $w(n){let e,t,r,i;return t=new Qs({props:{selected:n[16]&&Bn(n[7]),onContextMenu:n[32]}}),{c(){e=ee("div"),Te(t.$$.fragment),T(e,"class","jse-insert-area jse-inside svelte-1dkd71f"),T(e,"data-type","insert-selection-area-inside"),T(e,"style",r=Eu(n[1].length+1)),T(e,"title",T0),ze(e,"jse-hovered",n[10]===ho),ze(e,"jse-selected",n[16]&&Bn(n[7]))},m(o,s){ue(o,e,s),ke(t,e,null),i=!0},p(o,s){const a={};s[0]&65664&&(a.selected=o[16]&&Bn(o[7])),t.$set(a),(!i||s[0]&2&&r!==(r=Eu(o[1].length+1)))&&T(e,"style",r),s[0]&1024&&ze(e,"jse-hovered",o[10]===ho),s[0]&65664&&ze(e,"jse-selected",o[16]&&Bn(o[7]))},i(o){i||(X(t.$$.fragment,o),i=!0)},o(o){te(t.$$.fragment,o),i=!1},d(o){o&&le(e),Oe(t)}}}function QH(n){let e,t,r,i;return t=new kH({props:{path:n[54].path,pointer:n[54].pointer,key:n[54].key,selection:n[54].selection,searchResultItems:n[54].keySearchResultItemsMap,context:n[8],onUpdateKey:n[24]}}),{c(){e=ee("div"),Te(t.$$.fragment),r=me(),T(e,"slot","identifier"),T(e,"class","jse-identifier svelte-1dkd71f")},m(o,s){ue(o,e,s),ke(t,e,null),j(e,r),i=!0},p(o,s){const a={};s[0]&2303&&(a.path=o[54].path),s[0]&2303&&(a.pointer=o[54].pointer),s[0]&2303&&(a.key=o[54].key),s[0]&2303&&(a.selection=o[54].selection),s[0]&2303&&(a.searchResultItems=o[54].keySearchResultItemsMap),s[0]&256&&(a.context=o[8]),t.$set(a)},i(o){i||(X(t.$$.fragment,o),i=!0)},o(o){te(t.$$.fragment,o),i=!1},d(o){o&&le(e),Oe(t)}}}function e2(n){let e,t;return e=new Uv({props:{value:n[54].value,path:n[54].path,expandedMap:n[54].expandedMap,enforceStringMap:n[54].enforceStringMap,visibleSectionsMap:n[54].visibleSectionsMap,validationErrorsMap:n[54].validationErrorsMap,searchResultItemsMap:n[54].valueSearchResultItemsMap,selection:n[54].selection,context:n[8],onDragSelectionStart:n[27],$$slots:{identifier:[QH]},$$scope:{ctx:n}}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i[0]&2303&&(o.value=r[54].value),i[0]&2303&&(o.path=r[54].path),i[0]&2303&&(o.expandedMap=r[54].expandedMap),i[0]&2303&&(o.enforceStringMap=r[54].enforceStringMap),i[0]&2303&&(o.visibleSectionsMap=r[54].visibleSectionsMap),i[0]&2303&&(o.validationErrorsMap=r[54].validationErrorsMap),i[0]&2303&&(o.searchResultItemsMap=r[54].valueSearchResultItemsMap),i[0]&2303&&(o.selection=r[54].selection),i[0]&256&&(o.context=r[8]),i[0]&2559|i[1]&32&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function t2(n){let e,t,r;return{c(){e=ee("div"),T(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),T(e,"data-type","insert-selection-area-after")},m(i,o){ue(i,e,o),t||(r=Ce(e,"click",n[31]),t=!0)},p:Ne,d(i){i&&le(e),t=!1,r()}}}function ZH(n){let e,t;return e=new Ot({props:{data:Do}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p:Ne,i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function XH(n){let e,t;return e=new Ot({props:{data:Fi}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p:Ne,i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function n2(n){let e;return{c(){e=ee("div"),e.textContent=":",T(e,"class","jse-separator svelte-1dkd71f")},m(t,r){ue(t,e,r)},d(t){t&&le(e)}}}function $H(n){let e,t,r,i=n[0].length+"",o,s,a=n[0].length===1?"item":"items",l,u,c,f,d;return{c(){e=ee("div"),e.textContent="[",t=me(),r=ee("button"),o=Ue(i),s=me(),l=Ue(a),u=me(),c=ee("div"),c.textContent="]",T(e,"class","jse-bracket svelte-1dkd71f"),T(r,"type","button"),T(r,"class","jse-tag svelte-1dkd71f"),T(c,"class","jse-bracket svelte-1dkd71f")},m(g,h){ue(g,e,h),ue(g,t,h),ue(g,r,h),j(r,o),j(r,s),j(r,l),ue(g,u,h),ue(g,c,h),f||(d=Ce(r,"click",n[23]),f=!0)},p(g,h){h[0]&1&&i!==(i=g[0].length+"")&&_t(o,i),h[0]&1&&a!==(a=g[0].length===1?"item":"items")&&_t(l,a)},d(g){g&&le(e),g&&le(t),g&&le(r),g&&le(u),g&&le(c),f=!1,d()}}}function ez(n){let e,t,r,i=n[0].length+"",o,s,a=n[0].length===1?"item":"items",l;return{c(){e=ee("div"),e.textContent="[",t=me(),r=ee("span"),o=Ue(i),s=me(),l=Ue(a),T(e,"class","jse-bracket svelte-1dkd71f"),T(r,"class","jse-tag jse-expanded svelte-1dkd71f")},m(u,c){ue(u,e,c),ue(u,t,c),ue(u,r,c),j(r,o),j(r,s),j(r,l)},p(u,c){c[0]&1&&i!==(i=u[0].length+"")&&_t(o,i),c[0]&1&&a!==(a=u[0].length===1?"item":"items")&&_t(l,a)},d(u){u&&le(e),u&&le(t),u&&le(r)}}}function r2(n){let e,t,r;return t=new Qs({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=ee("div"),Te(t.$$.fragment),T(e,"class","jse-context-menu-button-anchor svelte-1dkd71f")},m(i,o){ue(i,e,o),ke(t,e,null),r=!0},p(i,o){const s={};o[0]&256&&(s.onContextMenu=i[8].onContextMenu),t.$set(s)},i(i){r||(X(t.$$.fragment,i),r=!0)},o(i){te(t.$$.fragment,i),r=!1},d(i){i&&le(e),Oe(t)}}}function i2(n){let e,t;return e=new Fv({props:{validationError:n[15],onExpand:n[23]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i[0]&32768&&(o.validationError=r[15]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function tz(n){let e,t,r;return{c(){e=ee("div"),T(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),T(e,"data-type","insert-selection-area-after")},m(i,o){ue(i,e,o),t||(r=Ce(e,"click",n[31]),t=!0)},p:Ne,d(i){i&&le(e),t=!1,r()}}}function nz(n){let e,t,r;return{c(){e=ee("div"),T(e,"class","jse-insert-selection-area jse-inside svelte-1dkd71f"),T(e,"data-type","insert-selection-area-inside")},m(i,o){ue(i,e,o),t||(r=Ce(e,"click",n[30]),t=!0)},p:Ne,d(i){i&&le(e),t=!1,r()}}}function o2(n){let e,t=!n[8].readOnly&&(n[10]===ho||n[16]&&Bn(n[7])),r,i=[],o=new Map,s,a,l,u,c,f=t&&s2(n),d=n[14]||As;const g=v=>v[50];for(let v=0;v<d.length;v+=1){let m=qw(n,d,v),p=g(m);o.set(p,i[v]=u2(p,m))}let h=!n[17]&&c2(n);return{c(){e=ee("div"),f&&f.c(),r=me();for(let v=0;v<i.length;v+=1)i[v].c();s=me(),a=ee("div"),l=ee("div"),l.innerHTML='<span class="jse-bracket svelte-1dkd71f">]</span>',u=me(),h&&h.c(),T(e,"class","jse-items svelte-1dkd71f"),T(l,"data-type","selectable-value"),T(l,"class","jse-footer svelte-1dkd71f"),T(a,"class","jse-footer-outer svelte-1dkd71f"),T(a,"style",n[18])},m(v,m){ue(v,e,m),f&&f.m(e,null),j(e,r);for(let p=0;p<i.length;p+=1)i[p].m(e,null);ue(v,s,m),ue(v,a,m),j(a,l),j(a,u),h&&h.m(a,null),c=!0},p(v,m){m[0]&66944&&(t=!v[8].readOnly&&(v[10]===ho||v[16]&&Bn(v[7]))),t?f?(f.p(v,m),m[0]&66944&&X(f,1)):(f=s2(v),f.c(),X(f,1),f.m(e,r)):f&&(Ve(),te(f,1,1,()=>{f=null}),qe()),m[0]&136334335&&(d=v[14]||As,Ve(),i=Nu(i,m,g,1,v,d,o,e,dd,u2,null,qw),qe()),v[17]?h&&(h.d(1),h=null):h?h.p(v,m):(h=c2(v),h.c(),h.m(a,null)),(!c||m[0]&262144)&&T(a,"style",v[18])},i(v){if(!c){X(f);for(let m=0;m<d.length;m+=1)X(i[m]);c=!0}},o(v){te(f);for(let m=0;m<i.length;m+=1)te(i[m]);c=!1},d(v){v&&le(e),f&&f.d();for(let m=0;m<i.length;m+=1)i[m].d();v&&le(s),v&&le(a),h&&h.d()}}}function s2(n){let e,t,r,i;return t=new Qs({props:{selected:n[16]&&Bn(n[7]),onContextMenu:n[32]}}),{c(){e=ee("div"),Te(t.$$.fragment),T(e,"class","jse-insert-area jse-inside svelte-1dkd71f"),T(e,"data-type","insert-selection-area-inside"),T(e,"style",r=Eu(n[1].length+1)),T(e,"title",T0),ze(e,"jse-hovered",n[10]===ho),ze(e,"jse-selected",n[16]&&Bn(n[7]))},m(o,s){ue(o,e,s),ke(t,e,null),i=!0},p(o,s){const a={};s[0]&65664&&(a.selected=o[16]&&Bn(o[7])),t.$set(a),(!i||s[0]&2&&r!==(r=Eu(o[1].length+1)))&&T(e,"style",r),s[0]&1024&&ze(e,"jse-hovered",o[10]===ho),s[0]&65664&&ze(e,"jse-selected",o[16]&&Bn(o[7]))},i(o){i||(X(t.$$.fragment,o),i=!0)},o(o){te(t.$$.fragment,o),i=!1},d(o){o&&le(e),Oe(t)}}}function rz(n){let e,t,r=n[51].index+"",i;return{c(){e=ee("div"),t=ee("div"),i=Ue(r),T(t,"class","jse-index svelte-1dkd71f"),T(e,"slot","identifier"),T(e,"class","jse-identifier svelte-1dkd71f")},m(o,s){ue(o,e,s),j(e,t),j(t,i)},p(o,s){s[0]&18687&&r!==(r=o[51].index+"")&&_t(i,r)},d(o){o&&le(e)}}}function a2(n,e){let t,r,i;return r=new Uv({props:{value:e[51].value,path:e[51].path,expandedMap:e[51].expandedMap,enforceStringMap:e[51].enforceStringMap,visibleSectionsMap:e[51].visibleSectionsMap,validationErrorsMap:e[51].validationErrorsMap,searchResultItemsMap:e[51].searchResultItemsMap,selection:e[51].selection,context:e[8],onDragSelectionStart:e[27],$$slots:{identifier:[rz]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=xt(),Te(r.$$.fragment),this.first=t},m(o,s){ue(o,t,s),ke(r,o,s),i=!0},p(o,s){e=o;const a={};s[0]&18687&&(a.value=e[51].value),s[0]&18687&&(a.path=e[51].path),s[0]&18687&&(a.expandedMap=e[51].expandedMap),s[0]&18687&&(a.enforceStringMap=e[51].enforceStringMap),s[0]&18687&&(a.visibleSectionsMap=e[51].visibleSectionsMap),s[0]&18687&&(a.validationErrorsMap=e[51].validationErrorsMap),s[0]&18687&&(a.searchResultItemsMap=e[51].searchResultItemsMap),s[0]&18687&&(a.selection=e[51].selection),s[0]&256&&(a.context=e[8]),s[0]&18687|s[1]&32&&(a.$$scope={dirty:s,ctx:e}),r.$set(a)},i(o){i||(X(r.$$.fragment,o),i=!0)},o(o){te(r.$$.fragment,o),i=!1},d(o){o&&le(t),Oe(r,o)}}}function l2(n){let e,t;return e=new cH({props:{visibleSections:n[14]||As,sectionIndex:n[50],total:n[0].length,path:n[1],pointer:n[9],onExpandSection:n[8].onExpandSection,selection:n[7]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i[0]&16384&&(o.visibleSections=r[14]||As),i[0]&16384&&(o.sectionIndex=r[50]),i[0]&1&&(o.total=r[0].length),i[0]&2&&(o.path=r[1]),i[0]&512&&(o.pointer=r[9]),i[0]&256&&(o.onExpandSection=r[8].onExpandSection),i[0]&128&&(o.selection=r[7]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function u2(n,e){let t,r=[],i=new Map,o,s,a,l=e[21](e[1],e[0],e[48],e[2],e[3],e[4],e[5],e[6],e[7],e[11]);const u=f=>f[51].index;for(let f=0;f<l.length;f+=1){let d=Hw(e,l,f),g=u(d);i.set(g,r[f]=a2(g,d))}let c=e[48].end<e[0].length&&l2(e);return{key:n,first:null,c(){t=xt();for(let f=0;f<r.length;f+=1)r[f].c();o=me(),c&&c.c(),s=xt(),this.first=t},m(f,d){ue(f,t,d);for(let g=0;g<r.length;g+=1)r[g].m(f,d);ue(f,o,d),c&&c.m(f,d),ue(f,s,d),a=!0},p(f,d){e=f,d[0]&136333823&&(l=e[21](e[1],e[0],e[48],e[2],e[3],e[4],e[5],e[6],e[7],e[11]),Ve(),r=Nu(r,d,u,1,e,l,i,o.parentNode,dd,a2,o,Hw),qe()),e[48].end<e[0].length?c?(c.p(e,d),d[0]&16385&&X(c,1)):(c=l2(e),c.c(),X(c,1),c.m(s.parentNode,s)):c&&(Ve(),te(c,1,1,()=>{c=null}),qe())},i(f){if(!a){for(let d=0;d<l.length;d+=1)X(r[d]);X(c),a=!0}},o(f){for(let d=0;d<r.length;d+=1)te(r[d]);te(c),a=!1},d(f){f&&le(t);for(let d=0;d<r.length;d+=1)r[d].d(f);f&&le(o),c&&c.d(f),f&&le(s)}}}function c2(n){let e,t,r;return{c(){e=ee("div"),T(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),T(e,"data-type","insert-selection-area-after")},m(i,o){ue(i,e,o),t||(r=Ce(e,"click",n[31]),t=!0)},p:Ne,d(i){i&&le(e),t=!1,r()}}}function f2(n){let e,t,r;return t=new Qs({props:{selected:n[16]&&wi(n[7]),onContextMenu:n[33]}}),{c(){e=ee("div"),Te(t.$$.fragment),T(e,"class","jse-insert-area jse-after svelte-1dkd71f"),T(e,"data-type","insert-selection-area-after"),T(e,"style",n[18]),T(e,"title",T0),ze(e,"jse-hovered",n[10]===ou),ze(e,"jse-selected",n[16]&&wi(n[7]))},m(i,o){ue(i,e,o),ke(t,e,null),r=!0},p(i,o){const s={};o[0]&65664&&(s.selected=i[16]&&wi(i[7])),t.$set(s),(!r||o[0]&262144)&&T(e,"style",i[18]),o[0]&1024&&ze(e,"jse-hovered",i[10]===ou),o[0]&65664&&ze(e,"jse-selected",i[16]&&wi(i[7]))},i(i){r||(X(t.$$.fragment,i),r=!0)},o(i){te(t.$$.fragment,i),r=!1},d(i){i&&le(e),Oe(t)}}}function iz(n){let e,t,r,i,o=!n[8].readOnly&&(n[10]===ou||n[16]&&wi(n[7])),s,a,l,u,c;const f=[HH,qH,VH],d=[];function g(v,m){return v[19]==="array"?0:v[19]==="object"?1:2}t=g(n),r=d[t]=f[t](n);let h=o&&f2(n);return{c(){e=ee("div"),r.c(),i=me(),h&&h.c(),T(e,"class",s=Yn(Ha("jse-json-node",{"jse-expanded":n[12]},n[8].onClassName(n[1],n[0])))+" svelte-1dkd71f"),T(e,"data-path",a=sg(n[1])),ze(e,"jse-root",n[17]),ze(e,"jse-selected",n[16]&&Kt(n[7])),ze(e,"jse-selected-key",n[16]&&An(n[7])),ze(e,"jse-selected-value",n[16]&&Wt(n[7])),ze(e,"jse-hovered",n[10]===Vm)},m(v,m){ue(v,e,m),d[t].m(e,null),j(e,i),h&&h.m(e,null),l=!0,u||(c=[Ce(e,"mousedown",n[25]),Ce(e,"mousemove",n[26]),Ce(e,"mouseover",n[28]),Ce(e,"mouseout",n[29]),Ce(e,"focus",void 0),Ce(e,"blur",void 0)],u=!0)},p(v,m){let p=t;t=g(v),t===p?d[t].p(v,m):(Ve(),te(d[p],1,1,()=>{d[p]=null}),qe(),r=d[t],r?r.p(v,m):(r=d[t]=f[t](v),r.c()),X(r,1),r.m(e,i)),m[0]&66944&&(o=!v[8].readOnly&&(v[10]===ou||v[16]&&wi(v[7]))),o?h?(h.p(v,m),m[0]&66944&&X(h,1)):(h=f2(v),h.c(),X(h,1),h.m(e,null)):h&&(Ve(),te(h,1,1,()=>{h=null}),qe()),(!l||m[0]&4355&&s!==(s=Yn(Ha("jse-json-node",{"jse-expanded":v[12]},v[8].onClassName(v[1],v[0])))+" svelte-1dkd71f"))&&T(e,"class",s),(!l||m[0]&2&&a!==(a=sg(v[1])))&&T(e,"data-path",a),m[0]&135427&&ze(e,"jse-root",v[17]),m[0]&70019&&ze(e,"jse-selected",v[16]&&Kt(v[7])),m[0]&70019&&ze(e,"jse-selected-key",v[16]&&An(v[7])),m[0]&70019&&ze(e,"jse-selected-value",v[16]&&Wt(v[7])),m[0]&5379&&ze(e,"jse-hovered",v[10]===Vm)},i(v){l||(X(r),X(h),l=!0)},o(v){te(r),te(h),l=!1},d(v){v&&le(e),d[t].d(),h&&h.d(),u=!1,rn(c)}}}function Eu(n){return`margin-left: calc(${n} * var(--jse-indent-size))`}function oz(n,e,t){let r,i,o,{$$slots:s={},$$scope:a}=e,{value:l}=e,{path:u}=e,{expandedMap:c}=e,{enforceStringMap:f}=e,{visibleSectionsMap:d}=e,{validationErrorsMap:g}=e,{searchResultItemsMap:h}=e,{selection:v}=e,{context:m}=e,{onDragSelectionStart:p}=e;const y=Sr("jsoneditor:JSONNode");let b,_,w;const S=FL();let E,O,R,D,F,B;function H(ye,Me,xe,fe,ve,de,Ie,De,He){let Xe=Object.keys(Me).map(mt=>{const be=zm(E,mt);return{key:mt,value:Me[mt],path:S(ye.concat(mt)),pointer:be,expandedMap:xi(xe,be),enforceStringMap:xi(fe,be),visibleSectionsMap:xi(ve,be),validationErrorsMap:xi(de,be),keySearchResultItemsMap:Mq(Ie,be),valueSearchResultItemsMap:xi(Ie,be),selection:vw(De,be)}});return He&&He.offset!==0&&(Xe=B_(Xe,He.selectionStartIndex,He.selectionItemsCount,He.offset)),Xe}function L(ye,Me,xe,fe,ve,de,Ie,De,He,Xe){const mt=xe.start,be=Math.min(xe.end,Me.length);let Y=[];for(let x=mt;x<be;x++){const C=zm(E,x);Y.push({index:x,value:Me[x],path:S(ye.concat(String(x))),pointer:C,expandedMap:xi(fe,C),enforceStringMap:xi(ve,C),visibleSectionsMap:xi(de,C),validationErrorsMap:xi(Ie,C),searchResultItemsMap:xi(De,C),selection:vw(He,C)})}if(Xe&&Xe.offset!==0){const x=Y.map(C=>C.index);Y=B_(Y,Xe.selectionStartIndex,Xe.selectionItemsCount,Xe.offset);for(let C=0;C<Y.length;C++)Y[C].index=x[C]}return Y}function N(ye){ye.stopPropagation();const Me=ye.ctrlKey;m.onExpand(u,!O,Me)}function U(ye){ye.stopPropagation(),m.onExpand(u,!0)}function $(ye,Me){const xe=Gu(u,Object.keys(l),ye,Me);return m.onPatch(xe),St(Ko(xe[0].path))}function Z(ye){if(M8(ye.target)||ye.which===1&&SO(ye.target,"BUTTON"))return;ye.stopPropagation(),ye.preventDefault(),document.addEventListener("mousemove",P,!0),document.addEventListener("mouseup",V);const Me=wp(ye.target),xe=m.getJson(),fe=m.getDocumentState();if(pq(v,u,Me)){ye.button===0&&p(ye);return}if(Gn.selecting=!0,Gn.selectionAnchor=u,Gn.selectionAnchorType=Me,Gn.selectionFocus=u,ye.shiftKey)v&&m.onSelect(Rn(xe,v.anchorPath,u));else if(Me===nn.multi)if(r&&ye.target.hasAttribute("data-path")){const ve=St(NP(l,fe));m.onSelect(Bv(ve))}else m.onSelect(Rn(xe,u,u));else m.onSelect(gw(xe,Me,u));m.focus()}function A(ye){if(Gn.selecting){ye.preventDefault(),ye.stopPropagation(),Gn.selectionFocus==null&&window.getSelection&&window.getSelection().empty();const Me=wp(ye.target);if(!Yt(u,Gn.selectionFocus)||Me!==Gn.selectionAnchorType){Gn.selectionFocus=u,Gn.selectionAnchorType=Me;const xe=m.getJson();m.onSelect(Rn(xe,Gn.selectionAnchor,Gn.selectionFocus))}}}function P(ye){m.onDrag(ye)}function V(ye){Gn.selecting&&(Gn.selecting=!1,ye.stopPropagation()),m.onDragEnd(),document.removeEventListener("mousemove",P,!0),document.removeEventListener("mouseup",V)}function W(){var ye,Me;return((Me=(ye=m.findElement([]))===null||ye===void 0?void 0:ye.getBoundingClientRect())===null||Me===void 0?void 0:Me.top)||0}function z(ye,Me){const fe=W()-ye.initialContentTop;return Me.clientY-ye.initialClientY-fe}function I(ye){if(m.readOnly)return;const Me=qt(v.focusPath);if(!Yt(u,Me)){p(ye);return}const xe=q(v,D||As);if(y("dragSelectionStart",{selection:v,items:xe}),!xe){y("Cannot drag the current selection (probably spread over multiple sections)");return}const fe=Va(v),ve=xe.findIndex(He=>Yt(He.path,fe)),de=m.getJson(),Ie=m.getDocumentState(),{offset:De}=im({json:de,documentState:Ie,deltaY:0,items:xe});t(11,w={initialTarget:ye.target,initialClientY:ye.clientY,initialContentTop:W(),selectionStartIndex:ve,selectionItemsCount:jP(v).length,items:xe,offset:De,didMoveItems:!1}),Gn.dragging=!0,document.addEventListener("mousemove",M,!0),document.addEventListener("mouseup",J)}function M(ye){if(w){const Me=m.getJson(),xe=m.getDocumentState(),fe=z(w,ye),{offset:ve}=im({json:Me,documentState:xe,deltaY:fe,items:w.items});ve!==w.offset&&(y("drag selection",ve,fe),t(11,w={...w,offset:ve,didMoveItems:!0}))}}function J(ye){if(w){const Me=m.getJson(),xe=m.getDocumentState(),fe=z(w,ye),{operations:ve,updatedSelection:de}=im({json:Me,documentState:xe,deltaY:fe,items:w.items});if(ve)m.onPatch(ve,(Ie,De)=>({state:{...De,selection:de||v}}));else if(ye.target===w.initialTarget&&!w.didMoveItems){const Ie=wp(ye.target),De=B8(ye.target);De&&m.onSelect(gw(Me,Ie,De))}t(11,w=void 0),Gn.dragging=!1,document.removeEventListener("mousemove",M,!0),document.removeEventListener("mouseup",J)}}function q(ye,Me){const xe=[];function fe(ve){const de=u.concat(ve),Ie=m.findElement(de);Ie!=null&&xe.push({path:de,height:Ie.clientHeight})}if(Array.isArray(l)){const ve=Va(ye),de=Xd(ye),Ie=St(ve),De=St(de),He=Me.find(be=>Ie>=be.start&&De<=be.end);if(!He)return null;const{start:Xe,end:mt}=He;pO(Xe,Math.min(l.length,mt),be=>fe(String(be)))}else Object.keys(l).forEach(fe);return xe}function Q(ye){Gn.selecting||Gn.dragging||(ye.stopPropagation(),_s(ye.target,"data-type","selectable-value")?t(10,b=Vm):_s(ye.target,"data-type","insert-selection-area-inside")?t(10,b=ho):_s(ye.target,"data-type","insert-selection-area-after")&&t(10,b=ou),clearTimeout(_))}function ae(ye){ye.stopPropagation(),_=setTimeout(()=>t(10,b=void 0))}function he(ye){ye.shiftKey||(ye.stopPropagation(),ye.preventDefault(),m.onSelect(qi(u)))}function Pe(ye){ye.shiftKey||(ye.stopPropagation(),ye.preventDefault(),m.onSelect(po(u)))}function Fe(ye){m.onSelect(qi(u)),m.onContextMenu(ye)}function Ae(ye){m.onSelect(po(u)),m.onContextMenu(ye)}return n.$$set=ye=>{"value"in ye&&t(0,l=ye.value),"path"in ye&&t(1,u=ye.path),"expandedMap"in ye&&t(2,c=ye.expandedMap),"enforceStringMap"in ye&&t(3,f=ye.enforceStringMap),"visibleSectionsMap"in ye&&t(4,d=ye.visibleSectionsMap),"validationErrorsMap"in ye&&t(5,g=ye.validationErrorsMap),"searchResultItemsMap"in ye&&t(6,h=ye.searchResultItemsMap),"selection"in ye&&t(7,v=ye.selection),"context"in ye&&t(8,m=ye.context),"onDragSelectionStart"in ye&&t(34,p=ye.onDragSelectionStart),"$$scope"in ye&&t(36,a=ye.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&2&&t(9,E=Ge(u)),n.$$.dirty[0]&516&&t(12,O=c?c[E]===!0:!1),n.$$.dirty[0]&521&&t(13,R=zu(l,f,E)),n.$$.dirty[0]&528&&t(14,D=d?d[E]:void 0),n.$$.dirty[0]&544&&t(15,F=g?g[E]:void 0),n.$$.dirty[0]&640&&t(16,B=v?v.pointersMap[E]===!0:!1),n.$$.dirty[0]&2&&t(17,r=u.length===0),n.$$.dirty[0]&1&&t(19,i=M0(l)),n.$$.dirty[0]&2&&t(18,o=Eu(u.length))},[l,u,c,f,d,g,h,v,m,E,b,w,O,R,D,F,B,r,o,i,H,L,N,U,$,Z,A,I,Q,ae,he,Pe,Fe,Ae,p,s,a]}class Uv extends rt{constructor(e){super(),nt(this,e,oz,iz,Nt,{value:0,path:1,expandedMap:2,enforceStringMap:3,visibleSectionsMap:4,validationErrorsMap:5,searchResultItemsMap:6,selection:7,context:8,onDragSelectionStart:34},null,[-1,-1])}}function sz(n){let e,t;return e=new nv({props:{items:n[0]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,[i]){const o={};i&1&&(o.items=r[0]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function az(n,e,t){let r,i,o,s,a,l,u,{json:c}=e,{selection:f}=e,{readOnly:d}=e,{showSearch:g=!1}=e,{historyState:h}=e,{onExpandAll:v}=e,{onCollapseAll:m}=e,{onUndo:p}=e,{onRedo:y}=e,{onSort:b}=e,{onTransform:_}=e,{onContextMenu:w}=e,{onCopy:S}=e,{onRenderMenu:E=Gt}=e;function O(){t(1,g=!g)}return n.$$set=R=>{"json"in R&&t(2,c=R.json),"selection"in R&&t(3,f=R.selection),"readOnly"in R&&t(4,d=R.readOnly),"showSearch"in R&&t(1,g=R.showSearch),"historyState"in R&&t(5,h=R.historyState),"onExpandAll"in R&&t(6,v=R.onExpandAll),"onCollapseAll"in R&&t(7,m=R.onCollapseAll),"onUndo"in R&&t(8,p=R.onUndo),"onRedo"in R&&t(9,y=R.onRedo),"onSort"in R&&t(10,b=R.onSort),"onTransform"in R&&t(11,_=R.onTransform),"onContextMenu"in R&&t(12,w=R.onContextMenu),"onCopy"in R&&t(13,S=R.onCopy),"onRenderMenu"in R&&t(14,E=R.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&4&&t(20,r=c!==void 0),n.$$.dirty&8,n.$$.dirty&1048584&&t(17,i=r&&(Kt(f)||An(f)||Wt(f))),n.$$.dirty&68&&t(19,o={icon:zL,title:"Expand all",className:"jse-expand-all",onClick:v,disabled:!Hn(c)}),n.$$.dirty&132&&t(18,s={icon:WL,title:"Collapse all",className:"jse-collapse-all",onClick:m,disabled:!Hn(c)}),n.$$.dirty&4&&t(16,a={icon:$0,title:"Search (Ctrl+F)",className:"jse-search",onClick:O,disabled:c===void 0}),n.$$.dirty&999220&&t(15,l=d?[o,s,{separator:!0},{icon:vh,title:"Copy (Ctrl+C)",className:"jse-copy",onClick:S,disabled:!i},{separator:!0},a,{space:!0}]:[o,s,{separator:!0},{icon:Z0,title:"Sort",className:"jse-sort",onClick:b,disabled:d||c===void 0},{icon:X0,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:_,disabled:d||c===void 0},a,{icon:aL,title:Ek,className:"jse-contextmenu",onClick:w},{separator:!0},{icon:TO,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:p,disabled:!h.canUndo},{icon:PO,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:y,disabled:!h.canRedo},{space:!0}]),n.$$.dirty&49152&&t(0,u=E("tree",l)||l)},[u,g,c,f,d,h,v,m,p,y,b,_,w,S,E,l,a,i,s,o,r]}class lz extends rt{constructor(e){super(),nt(this,e,az,sz,Nt,{json:2,selection:3,readOnly:4,showSearch:1,historyState:5,onExpandAll:6,onCollapseAll:7,onUndo:8,onRedo:9,onSort:10,onTransform:11,onContextMenu:12,onCopy:13,onRenderMenu:14})}}function h2(n){let e;return{c(){e=ee("ul"),e.innerHTML=`<li class="svelte-17jij2m">Click inside the editor</li> 
        <li class="svelte-17jij2m">Paste clipboard data using <span class="jse-bold svelte-17jij2m">Ctrl+V</span></li> 
        <li class="svelte-17jij2m">Create a new object by typing <span class="jse-bold svelte-17jij2m">{</span></li> 
        <li class="svelte-17jij2m">Create a new array by typing <span class="jse-bold svelte-17jij2m">[</span></li>`,T(e,"class","svelte-17jij2m")},m(t,r){ue(t,e,r)},d(t){t&&le(e)}}}function uz(n){let e,t,r,i,o,s,a,l=!n[0]&&h2();return{c(){e=ee("div"),t=ee("div"),r=me(),i=ee("div"),o=Ue(`Empty document
    `),l&&l.c(),s=me(),a=ee("div"),T(t,"class","jse-space jse-before svelte-17jij2m"),T(i,"class","jse-contents svelte-17jij2m"),T(a,"class","jse-space jse-after svelte-17jij2m"),T(e,"class","jse-welcome svelte-17jij2m")},m(u,c){ue(u,e,c),j(e,t),j(e,r),j(e,i),j(i,o),l&&l.m(i,null),j(e,s),j(e,a)},p(u,[c]){u[0]?l&&(l.d(1),l=null):l||(l=h2(),l.c(),l.m(i,null))},i:Ne,o:Ne,d(u){u&&le(e),l&&l.d()}}}function cz(n,e,t){let{readOnly:r}=e;return n.$$set=i=>{"readOnly"in i&&t(0,r=i.readOnly)},[r]}class fz extends rt{constructor(e){super(),nt(this,e,cz,uz,Nt,{readOnly:0})}}function d2(n,e,t){const r=n.slice();return r[4]=e[t],r}function p2(n,e){let t,r=Yh(e[4],g2)+"",i,o,s,a;function l(){return e[3](e[4])}return{key:n,first:null,c(){t=ee("button"),i=Ue(r),T(t,"type","button"),T(t,"class","jse-navigation-bar-dropdown-item svelte-1rtf8mz"),T(t,"title",o=e[4]),ze(t,"jse-selected",e[4]===e[1]),this.first=t},m(u,c){ue(u,t,c),j(t,i),s||(a=Ce(t,"click",pk(l)),s=!0)},p(u,c){e=u,c&1&&r!==(r=Yh(e[4],g2)+"")&&_t(i,r),c&1&&o!==(o=e[4])&&T(t,"title",o),c&3&&ze(t,"jse-selected",e[4]===e[1])},d(u){u&&le(t),s=!1,a()}}}function m2(n){let e,t;return{c(){e=ee("button"),t=Ue("..."),T(e,"type","button"),T(e,"class","jse-navigation-bar-dropdown-item svelte-1rtf8mz"),T(e,"title","Limited to "+Fl+" items")},m(r,i){ue(r,e,i),j(e,t)},p:Ne,d(r){r&&le(e)}}}function hz(n){let e,t=[],r=new Map,i,o=D_(n[0],Fl);const s=l=>l[4];for(let l=0;l<o.length;l+=1){let u=d2(n,o,l),c=s(u);r.set(c,t[l]=p2(c,u))}let a=n[0].length>Fl&&m2();return{c(){e=ee("div");for(let l=0;l<t.length;l+=1)t[l].c();i=me(),a&&a.c(),T(e,"class","jse-navigation-bar-dropdown svelte-1rtf8mz")},m(l,u){ue(l,e,u);for(let c=0;c<t.length;c+=1)t[c].m(e,null);j(e,i),a&&a.m(e,null)},p(l,[u]){u&7&&(o=D_(l[0],Fl),t=Nu(t,u,s,1,l,o,r,e,NA,p2,i,d2)),l[0].length>Fl?a?a.p(l,u):(a=m2(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:Ne,o:Ne,d(l){l&&le(e);for(let u=0;u<t.length;u+=1)t[u].d();a&&a.d()}}}const Fl=100,g2=30;function dz(n,e,t){let{items:r}=e,{selectedItem:i}=e,{onSelect:o}=e;const s=a=>o(a);return n.$$set=a=>{"items"in a&&t(0,r=a.items),"selectedItem"in a&&t(1,i=a.selectedItem),"onSelect"in a&&t(2,o=a.onSelect)},[r,i,o,s]}class pz extends rt{constructor(e){super(),nt(this,e,dz,hz,Nt,{items:0,selectedItem:1,onSelect:2})}}function v2(n){let e,t,r,i;return{c(){e=ee("button"),t=Ue(n[2]),T(e,"type","button"),T(e,"class","jse-navigation-bar-button svelte-4ttwnh")},m(o,s){ue(o,e,s),j(e,t),r||(i=Ce(e,"click",n[9]),r=!0)},p(o,s){s&4&&_t(t,o[2])},d(o){o&&le(e),r=!1,i()}}}function mz(n){let e,t,r,i,o,s,a;r=new Ot({props:{data:OO}});let l=n[2]!==void 0&&v2(n);return{c(){e=ee("div"),t=ee("button"),Te(r.$$.fragment),i=me(),l&&l.c(),T(t,"type","button"),T(t,"class","jse-navigation-bar-button jse-navigation-bar-arrow svelte-4ttwnh"),ze(t,"jse-open",n[1]),T(e,"class","jse-navigation-bar-item svelte-4ttwnh")},m(u,c){ue(u,e,c),j(e,t),ke(r,t,null),j(e,i),l&&l.m(e,null),n[10](e),o=!0,s||(a=Ce(t,"click",n[4]),s=!0)},p(u,[c]){c&2&&ze(t,"jse-open",u[1]),u[2]!==void 0?l?l.p(u,c):(l=v2(u),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(u){o||(X(r.$$.fragment,u),o=!0)},o(u){te(r.$$.fragment,u),o=!1},d(u){u&&le(e),Oe(r),l&&l.d(),n[10](null),s=!1,a()}}}function gz(n,e,t){let r,i;const{openAbsolutePopup:o,closeAbsolutePopup:s}=ur("absolute-popup");let{path:a}=e,{index:l}=e,{onSelect:u}=e,{getItems:c}=e,f,d=!1,g;function h(y){s(g),u(r.concat(y))}function v(){if(f){t(1,d=!0);const y={items:c(r),selectedItem:i,onSelect:h};g=o(pz,y,{anchor:f,closeOnOuterClick:!0,onClose:()=>{t(1,d=!1)}})}}const m=()=>h(i);function p(y){wt[y?"unshift":"push"](()=>{f=y,t(0,f)})}return n.$$set=y=>{"path"in y&&t(5,a=y.path),"index"in y&&t(6,l=y.index),"onSelect"in y&&t(7,u=y.onSelect),"getItems"in y&&t(8,c=y.getItems)},n.$$.update=()=>{n.$$.dirty&96&&(r=a.slice(0,l)),n.$$.dirty&96&&t(2,i=a[l])},[f,d,i,h,v,a,l,u,c,m,p]}class zP extends rt{constructor(e){super(),nt(this,e,gz,mz,Nt,{path:5,index:6,onSelect:7,getItems:8})}}var WP={exports:{}};/*
 * @version    1.4.0
 * @date       2015-10-26
 * @stability  3 - Stable
 * @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)
 * @license    MIT License
 */var y2=function(n,e){var t,r,i=1,o=0,s=0,a=String.alphabet;function l(u,c,f){if(f){for(t=c;f=l(u,t),f<76&&f>65;)++t;return+u.slice(c-1,t)}return f=a&&a.indexOf(u.charAt(c)),f>-1?f+76:(f=u.charCodeAt(c)||0,f<45||f>127?f:f<46?65:f<48?f-1:f<58?f+18:f<65?f-11:f<91?f+11:f<97?f-37:f<123?f+5:f-63)}if((n+="")!=(e+="")){for(;i;)if(r=l(n,o++),i=l(e,s++),r<76&&i<76&&r>66&&i>66&&(r=l(n,o,o),i=l(e,s,o=t),s=t),r!=i)return r<i?-1:1}return 0};try{WP.exports=y2}catch{String.naturalCompare=y2}function Vv(n,e){const t=typeof n=="string"?n.toLowerCase():n,r=typeof e=="string"?e.toLowerCase():e;return WP.exports(t,r)}function vz(n,e=[],t=1){const r=tt(n,e),o=Object.keys(r).slice();o.sort((a,l)=>t*Vv(a,l));const s=[];for(let a=0;a<o.length;a++){const l=o[a],u=Ge(e.concat(l));s.push({op:"move",from:u,path:u})}return s}function yz(n,e=[],t=[],r=1){const i=_z(t,r),o=tt(n,e);return[{op:"replace",path:Ge(e),value:o.slice(0).sort(i)}]}function _z(n,e){return function(r,i){const o=tt(r,n),s=tt(i,n);return o===void 0?e:s===void 0?-e:typeof o!="string"&&typeof s!="string"?o>s?e:o<s?-e:0:e*Vv(o,s)}}function _2(n,e,t){const r=n.slice();return r[11]=e[t],r[13]=t,r}function b2(n,e){let t,r,i;return r=new zP({props:{getItems:e[4],path:e[1],index:e[13],onSelect:e[5]}}),{key:n,first:null,c(){t=xt(),Te(r.$$.fragment),this.first=t},m(o,s){ue(o,t,s),ke(r,o,s),i=!0},p(o,s){e=o;const a={};s&2&&(a.path=e[1]),s&2&&(a.index=e[13]),r.$set(a)},i(o){i||(X(r.$$.fragment,o),i=!0)},o(o){te(r.$$.fragment,o),i=!1},d(o){o&&le(t),Oe(r,o)}}}function w2(n){let e,t;return e=new zP({props:{getItems:n[4],path:n[1],index:void 0,onSelect:n[5]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i&2&&(o.path=r[1]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function bz(n){let e,t=[],r=new Map,i,o,s,a=Hn(n[0])?"\xA0":"Navigation bar",l,u,c=n[1];const f=g=>g[13];for(let g=0;g<c.length;g+=1){let h=_2(n,c,g),v=f(h);r.set(v,t[g]=b2(v,h))}let d=n[3]&&w2(n);return{c(){e=ee("div");for(let g=0;g<t.length;g+=1)t[g].c();i=me(),d&&d.c(),o=me(),s=ee("div"),l=Ue(a),T(s,"class","jse-navigation-bar-space svelte-1blb1xo"),T(e,"class","jse-navigation-bar svelte-1blb1xo")},m(g,h){ue(g,e,h);for(let v=0;v<t.length;v+=1)t[v].m(e,null);j(e,i),d&&d.m(e,null),j(e,o),j(e,s),j(s,l),n[8](e),u=!0},p(g,[h]){h&50&&(c=g[1],Ve(),t=Nu(t,h,f,1,g,c,r,e,dd,b2,i,_2),qe()),g[3]?d?(d.p(g,h),h&8&&X(d,1)):(d=w2(g),d.c(),X(d,1),d.m(e,o)):d&&(Ve(),te(d,1,1,()=>{d=null}),qe()),(!u||h&1)&&a!==(a=Hn(g[0])?"\xA0":"Navigation bar")&&_t(l,a)},i(g){if(!u){for(let h=0;h<c.length;h+=1)X(t[h]);X(d),u=!0}},o(g){for(let h=0;h<t.length;h+=1)te(t[h]);te(d),u=!1},d(g){g&&le(e);for(let h=0;h<t.length;h+=1)t[h].d();d&&d.d(),n[8](null)}}}function wz(n,e,t){let r,i;const o=Sr("jsoneditor:NavigationBar");let{json:s}=e,{documentState:a}=e,{onSelect:l}=e,u;function c(){setTimeout(()=>{if(u&&u.scrollTo){const h=u.scrollWidth-u.clientWidth;h>0&&(o("scrollTo ",h),u.scrollTo({left:h,behavior:"smooth"}))}})}function f(h){o("get items for path",h);const v=tt(s,h);if(Array.isArray(v))return u8(0,v.length).map(String);if(ir(v)){const p=Object.keys(v).slice(0);return p.sort(Vv),p}else return[]}function d(h){o("select path",JSON.stringify(h)),l(Rn(s,h,h))}function g(h){wt[h?"unshift":"push"](()=>{u=h,t(2,u)})}return n.$$set=h=>{"json"in h&&t(0,s=h.json),"documentState"in h&&t(6,a=h.documentState),"onSelect"in h&&t(7,l=h.onSelect)},n.$$.update=()=>{n.$$.dirty&64&&t(1,r=a.selection?a.selection.focusPath:[]),n.$$.dirty&3&&t(3,i=Hn(tt(s,r))),n.$$.dirty&2&&c()},[s,r,u,i,f,d,a,l,g]}class Sz extends rt{constructor(e){super(),nt(this,e,wz,bz,Nt,{json:0,documentState:6,onSelect:7})}}function S2(n){let e,t,r,i,o,s,a,l,u,c,f,d,g,h=n[3]!==-1?`${n[3]+1}/`:"",v,m,p,y,b,_,w,S,E,O,R,D,F,B,H,L=!n[4]&&E2(n);const N=[Cz,Ez],U=[];function $(A,P){return A[2]?0:1}a=$(n),l=U[a]=N[a](n),b=new Ot({props:{data:eL}}),S=new Ot({props:{data:tL}}),R=new Ot({props:{data:Bu}});let Z=n[0]&&!n[4]&&C2(n);return{c(){e=ee("div"),t=ee("form"),L&&L.c(),r=me(),i=ee("div"),o=ee("div"),s=ee("div"),l.c(),u=me(),c=ee("label"),f=ee("input"),d=me(),g=ee("div"),v=Ue(h),m=Ue(n[10]),p=me(),y=ee("button"),Te(b.$$.fragment),_=me(),w=ee("button"),Te(S.$$.fragment),E=me(),O=ee("button"),Te(R.$$.fragment),D=me(),Z&&Z.c(),T(s,"class","jse-search-icon svelte-10nesp9"),T(f,"class","jse-search-input svelte-10nesp9"),T(f,"title","Enter text to search"),T(f,"type","text"),T(f,"placeholder","Find"),T(c,"class","jse-search-input-label svelte-10nesp9"),T(c,"about","jse-search input"),T(g,"class","jse-search-count svelte-10nesp9"),ze(g,"jse-visible",n[8]!==""),T(y,"type","button"),T(y,"class","jse-search-next svelte-10nesp9"),T(y,"title","Go to next search result (Enter)"),T(w,"type","button"),T(w,"class","jse-search-previous svelte-10nesp9"),T(w,"title","Go to previous search result (Shift+Enter)"),T(O,"type","button"),T(O,"class","jse-search-clear svelte-10nesp9"),T(O,"title","Close search box (Esc)"),T(o,"class","jse-search-section svelte-10nesp9"),T(i,"class","jse-search-contents svelte-10nesp9"),T(t,"class","jse-search-form svelte-10nesp9"),T(e,"class","jse-search-box svelte-10nesp9")},m(A,P){ue(A,e,P),j(e,t),L&&L.m(t,null),j(t,r),j(t,i),j(i,o),j(o,s),U[a].m(s,null),j(o,u),j(o,c),j(c,f),Nn(f,n[8]),j(o,d),j(o,g),j(g,v),j(g,m),j(o,p),j(o,y),ke(b,y,null),j(o,_),j(o,w),ke(S,w,null),j(o,E),j(o,O),ke(R,O,null),j(i,D),Z&&Z.m(i,null),F=!0,B||(H=[Ce(f,"input",n[21]),xu(Oz.call(null,f)),Ce(y,"click",n[22]),Ce(w,"click",n[23]),Ce(O,"click",n[24]),Ce(t,"submit",n[12]),Ce(t,"keydown",n[13])],B=!0)},p(A,P){A[4]?L&&(Ve(),te(L,1,1,()=>{L=null}),qe()):L?(L.p(A,P),P&16&&X(L,1)):(L=E2(A),L.c(),X(L,1),L.m(t,r));let V=a;a=$(A),a===V?U[a].p(A,P):(Ve(),te(U[V],1,1,()=>{U[V]=null}),qe(),l=U[a],l?l.p(A,P):(l=U[a]=N[a](A),l.c()),X(l,1),l.m(s,null)),P&256&&f.value!==A[8]&&Nn(f,A[8]),(!F||P&8)&&h!==(h=A[3]!==-1?`${A[3]+1}/`:"")&&_t(v,h),(!F||P&1024)&&_t(m,A[10]),P&256&&ze(g,"jse-visible",A[8]!==""),A[0]&&!A[4]?Z?Z.p(A,P):(Z=C2(A),Z.c(),Z.m(i,null)):Z&&(Z.d(1),Z=null)},i(A){F||(X(L),X(l),X(b.$$.fragment,A),X(S.$$.fragment,A),X(R.$$.fragment,A),F=!0)},o(A){te(L),te(l),te(b.$$.fragment,A),te(S.$$.fragment,A),te(R.$$.fragment,A),F=!1},d(A){A&&le(e),L&&L.d(),U[a].d(),Oe(b),Oe(S),Oe(R),Z&&Z.d(),B=!1,rn(H)}}}function E2(n){let e,t,r,i,o;return t=new Ot({props:{data:n[0]?Fi:Do}}),{c(){e=ee("button"),Te(t.$$.fragment),T(e,"type","button"),T(e,"class","jse-replace-toggle svelte-10nesp9"),T(e,"title","Toggle visibility of replace options (Ctrl+H)")},m(s,a){ue(s,e,a),ke(t,e,null),r=!0,i||(o=Ce(e,"click",n[11]),i=!0)},p(s,a){const l={};a&1&&(l.data=s[0]?Fi:Do),t.$set(l)},i(s){r||(X(t.$$.fragment,s),r=!0)},o(s){te(t.$$.fragment,s),r=!1},d(s){s&&le(e),Oe(t),i=!1,o()}}}function Ez(n){let e,t;return e=new Ot({props:{data:$0}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p:Ne,i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Cz(n){let e,t;return e=new Ot({props:{data:nL,spin:!0}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p:Ne,i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function C2(n){let e,t,r,i,o,s,a,l;return{c(){e=ee("div"),t=ee("input"),r=me(),i=ee("button"),i.textContent="Replace",o=me(),s=ee("button"),s.textContent="All",T(t,"class","jse-replace-input svelte-10nesp9"),T(t,"title","Enter replacement text"),T(t,"type","text"),T(t,"placeholder","Replace"),T(i,"type","button"),T(i,"title","Replace current occurrence (Ctrl+Enter)"),T(i,"class","svelte-10nesp9"),T(s,"type","button"),T(s,"title","Replace all occurrences"),T(s,"class","svelte-10nesp9"),T(e,"class","jse-replace-section svelte-10nesp9")},m(u,c){ue(u,e,c),j(e,t),Nn(t,n[9]),j(e,r),j(e,i),j(e,o),j(e,s),a||(l=[Ce(t,"input",n[25]),Ce(i,"click",n[14]),Ce(s,"click",n[15])],a=!0)},p(u,c){c&512&&t.value!==u[9]&&Nn(t,u[9])},d(u){u&&le(e),a=!1,rn(l)}}}function kz(n){let e,t,r=n[1]&&S2(n);return{c(){r&&r.c(),e=xt()},m(i,o){r&&r.m(i,o),ue(i,e,o),t=!0},p(i,[o]){i[1]?r?(r.p(i,o),o&2&&X(r,1)):(r=S2(i),r.c(),X(r,1),r.m(e.parentNode,e)):r&&(Ve(),te(r,1,1,()=>{r=null}),qe())},i(i){t||(X(r),t=!0)},o(i){te(r),t=!1},d(i){r&&r.d(i),i&&le(e)}}}function Oz(n){n.select()}function Tz(n,e,t){let r,i,{show:o=!1}=e,{searching:s}=e,{resultCount:a=0}=e,{activeIndex:l=0}=e,{showReplace:u=!1}=e,{readOnly:c=!1}=e,{onChange:f=Gt}=e,{onPrevious:d=Gt}=e,{onNext:g=Gt}=e,{onReplace:h=Gt}=e,{onReplaceAll:v=Gt}=e,{onClose:m=Gt}=e,p="",y="",b="";function _(){p!==""&&f(p)}function w(){t(0,u=!u&&!c)}function S(N){N.preventDefault(),p!==y?(y=p,i.cancel(),f(p)):g()}function E(N){N.stopPropagation();const U=nl(N);U==="Enter"&&(N.preventDefault(),g()),U==="Shift+Enter"&&(N.preventDefault(),d()),(U==="Ctrl+Enter"||U==="Command+Enter")&&(N.preventDefault(),u?O():g()),U==="Ctrl+H"&&(N.preventDefault(),w()),U==="Escape"&&(N.preventDefault(),m())}function O(){c||h(p,b)}function R(){c||v(p,b)}function D(){p=this.value,t(8,p)}const F=()=>g(),B=()=>d(),H=()=>m();function L(){b=this.value,t(9,b)}return n.$$set=N=>{"show"in N&&t(1,o=N.show),"searching"in N&&t(2,s=N.searching),"resultCount"in N&&t(16,a=N.resultCount),"activeIndex"in N&&t(3,l=N.activeIndex),"showReplace"in N&&t(0,u=N.showReplace),"readOnly"in N&&t(4,c=N.readOnly),"onChange"in N&&t(17,f=N.onChange),"onPrevious"in N&&t(5,d=N.onPrevious),"onNext"in N&&t(6,g=N.onNext),"onReplace"in N&&t(18,h=N.onReplace),"onReplaceAll"in N&&t(19,v=N.onReplaceAll),"onClose"in N&&t(7,m=N.onClose)},n.$$.update=()=>{n.$$.dirty&65536&&t(10,r=a>=Fm?`${Fm-1}+`:String(a)),n.$$.dirty&131072&&t(20,i=Ad(f,Sk)),n.$$.dirty&1048832&&i(p),n.$$.dirty&2&&o&&_()},[u,o,s,l,c,d,g,m,p,b,r,w,S,E,O,R,a,f,h,v,i,D,F,B,H,L]}class Pz extends rt{constructor(e){super(),nt(this,e,Tz,kz,Nt,{show:1,searching:2,resultCount:16,activeIndex:3,showReplace:0,readOnly:4,onChange:17,onPrevious:5,onNext:6,onReplace:18,onReplaceAll:19,onClose:7})}}const{window:Iz}=O0;function k2(n){let e,t,r;function i(s){n[70](s)}let o={json:n[7],selection:n[13].selection,readOnly:n[0],historyState:n[19],onExpandAll:n[37],onCollapseAll:n[38],onUndo:n[33],onRedo:n[34],onSort:n[35],onTransform:n[36],onContextMenu:n[42],onCopy:n[31],onRenderMenu:n[4]};return n[16]!==void 0&&(o.showSearch=n[16]),e=new lz({props:o}),wt.push(()=>Ir(e,"showSearch",i)),{c(){Te(e.$$.fragment)},m(s,a){ke(e,s,a),r=!0},p(s,a){const l={};a[0]&128&&(l.json=s[7]),a[0]&8192&&(l.selection=s[13].selection),a[0]&1&&(l.readOnly=s[0]),a[0]&524288&&(l.historyState=s[19]),a[0]&16&&(l.onRenderMenu=s[4]),!t&&a[0]&65536&&(t=!0,l.showSearch=s[16],qr(()=>t=!1)),e.$set(l)},i(s){r||(X(e.$$.fragment,s),r=!0)},o(s){te(e.$$.fragment,s),r=!1},d(s){Oe(e,s)}}}function O2(n){let e,t;return e=new Sz({props:{json:n[7],documentState:n[13],onSelect:n[45]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i[0]&128&&(o.json=r[7]),i[0]&8192&&(o.documentState=r[13]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Az(n){let e;return{c(){e=ee("div"),e.innerHTML=`<div class="jse-loading-space svelte-15tyejh"></div> 
      <div class="jse-loading svelte-15tyejh">loading...</div>`,T(e,"class","jse-contents svelte-15tyejh")},m(t,r){ue(t,e,r)},p:Ne,i:Ne,o:Ne,d(t){t&&le(e)}}}function Rz(n){let e,t,r,i,o,s,a,l,u;const c=[Nz,xz],f=[];function d(g,h){return g[7]===void 0?0:1}return i=d(n),o=f[i]=c[i](n),{c(){e=ee("label"),t=ee("input"),r=me(),o.c(),s=xt(),T(t,"class","jse-hidden-input svelte-15tyejh"),T(t,"tabindex","-1"),T(e,"class","jse-hidden-input-label svelte-15tyejh")},m(g,h){ue(g,e,h),j(e,t),n[71](t),ue(g,r,h),f[i].m(g,h),ue(g,s,h),a=!0,l||(u=Ce(t,"paste",n[32]),l=!0)},p(g,h){let v=i;i=d(g),i===v?f[i].p(g,h):(Ve(),te(f[v],1,1,()=>{f[v]=null}),qe(),o=f[i],o?o.p(g,h):(o=f[i]=c[i](g),o.c()),X(o,1),o.m(s.parentNode,s))},i(g){a||(X(o),a=!0)},o(g){te(o),a=!1},d(g){g&&le(e),n[71](null),g&&le(r),f[i].d(g),g&&le(s),l=!1,u()}}}function xz(n){var g,h,v,m;let e,t,r,i,o,s,a,l,u,c;t=new Pz({props:{show:n[16],resultCount:((h=(g=n[14])==null?void 0:g.items)==null?void 0:h.length)||0,activeIndex:((v=n[14])==null?void 0:v.activeIndex)||0,showReplace:n[17],searching:n[18],readOnly:n[0],onChange:n[24],onNext:n[25],onPrevious:n[26],onReplace:n[27],onReplaceAll:n[28],onClose:n[29]}}),o=new Uv({props:{value:n[7],path:n[23],expandedMap:n[13].expandedMap,enforceStringMap:n[13].enforceStringMap,visibleSectionsMap:n[13].visibleSectionsMap,validationErrorsMap:n[21],searchResultItemsMap:(m=n[14])==null?void 0:m.itemsMap,selection:n[13].selection,context:n[10],onDragSelectionStart:Gt}});let f=n[15]&&T2(n),d=n[20]&&P2(n);return u=new xO({props:{validationErrors:n[9],selectError:n[30]}}),{c(){e=ee("div"),Te(t.$$.fragment),r=me(),i=ee("div"),Te(o.$$.fragment),s=me(),f&&f.c(),a=me(),d&&d.c(),l=me(),Te(u.$$.fragment),T(e,"class","jse-search-box-container svelte-15tyejh"),T(i,"class","jse-contents svelte-15tyejh"),T(i,"data-jsoneditor-scrollable-contents",!0)},m(p,y){ue(p,e,y),ke(t,e,null),ue(p,r,y),ue(p,i,y),ke(o,i,null),n[72](i),ue(p,s,y),f&&f.m(p,y),ue(p,a,y),d&&d.m(p,y),ue(p,l,y),ke(u,p,y),c=!0},p(p,y){var S,E,O,R;const b={};y[0]&65536&&(b.show=p[16]),y[0]&16384&&(b.resultCount=((E=(S=p[14])==null?void 0:S.items)==null?void 0:E.length)||0),y[0]&16384&&(b.activeIndex=((O=p[14])==null?void 0:O.activeIndex)||0),y[0]&131072&&(b.showReplace=p[17]),y[0]&262144&&(b.searching=p[18]),y[0]&1&&(b.readOnly=p[0]),t.$set(b);const _={};y[0]&128&&(_.value=p[7]),y[0]&8192&&(_.expandedMap=p[13].expandedMap),y[0]&8192&&(_.enforceStringMap=p[13].enforceStringMap),y[0]&8192&&(_.visibleSectionsMap=p[13].visibleSectionsMap),y[0]&2097152&&(_.validationErrorsMap=p[21]),y[0]&16384&&(_.searchResultItemsMap=(R=p[14])==null?void 0:R.itemsMap),y[0]&8192&&(_.selection=p[13].selection),y[0]&1024&&(_.context=p[10]),o.$set(_),p[15]?f?(f.p(p,y),y[0]&32768&&X(f,1)):(f=T2(p),f.c(),X(f,1),f.m(a.parentNode,a)):f&&(Ve(),te(f,1,1,()=>{f=null}),qe()),p[20]?d?(d.p(p,y),y[0]&1048576&&X(d,1)):(d=P2(p),d.c(),X(d,1),d.m(l.parentNode,l)):d&&(Ve(),te(d,1,1,()=>{d=null}),qe());const w={};y[0]&512&&(w.validationErrors=p[9]),u.$set(w)},i(p){c||(X(t.$$.fragment,p),X(o.$$.fragment,p),X(f),X(d),X(u.$$.fragment,p),c=!0)},o(p){te(t.$$.fragment,p),te(o.$$.fragment,p),te(f),te(d),te(u.$$.fragment,p),c=!1},d(p){p&&le(e),Oe(t),p&&le(r),p&&le(i),Oe(o),n[72](null),p&&le(s),f&&f.d(p),p&&le(a),d&&d.d(p),p&&le(l),Oe(u,p)}}}function Nz(n){let e,t,r,i;const o=[Dz,Mz],s=[];function a(l,u){return l[8]===""||l[8]===void 0?0:1}return e=a(n),t=s[e]=o[e](n),{c(){t.c(),r=xt()},m(l,u){s[e].m(l,u),ue(l,r,u),i=!0},p(l,u){let c=e;e=a(l),e===c?s[e].p(l,u):(Ve(),te(s[c],1,1,()=>{s[c]=null}),qe(),t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),X(t,1),t.m(r.parentNode,r))},i(l){i||(X(t),i=!0)},o(l){te(t),i=!1},d(l){s[e].d(l),l&&le(r)}}}function T2(n){let e,t;return e=new Gs({props:{type:"info",message:`You pasted a JSON ${Array.isArray(n[15].contents)?"array":"object"} as text`,actions:[{icon:tv,text:"Paste as JSON instead",onMouseDown:n[43]},{text:"Leave as is",onClick:n[44]}]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i[0]&32768&&(o.message=`You pasted a JSON ${Array.isArray(r[15].contents)?"array":"object"} as text`),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function P2(n){let e,t;return e=new Gs({props:{type:"success",message:"The loaded JSON document was invalid but is successfully repaired.",actions:n[0]?[]:[{icon:ag,text:"Ok",onClick:n[5]},{icon:gh,text:"Repair manually instead",onClick:n[3]}]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i[0]&9&&(o.actions=r[0]?[]:[{icon:ag,text:"Ok",onClick:r[5]},{icon:gh,text:"Repair manually instead",onClick:r[3]}]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Mz(n){let e,t,r,i=Yh(n[8],Wy)+"",o,s;return e=new Gs({props:{type:"error",message:"The loaded JSON document is invalid and could not be repaired automatically.",actions:n[0]?[]:[{icon:gh,text:"Repair manually",onClick:n[3]}]}}),{c(){Te(e.$$.fragment),t=me(),r=ee("div"),o=Ue(i),T(r,"class","jse-preview svelte-15tyejh")},m(a,l){ke(e,a,l),ue(a,t,l),ue(a,r,l),j(r,o),s=!0},p(a,l){const u={};l[0]&9&&(u.actions=a[0]?[]:[{icon:gh,text:"Repair manually",onClick:a[3]}]),e.$set(u),(!s||l[0]&256)&&i!==(i=Yh(a[8],Wy)+"")&&_t(o,i)},i(a){s||(X(e.$$.fragment,a),s=!0)},o(a){te(e.$$.fragment,a),s=!1},d(a){Oe(e,a),a&&le(t),a&&le(r)}}}function Dz(n){let e,t;return e=new fz({props:{readOnly:n[0]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i[0]&1&&(o.readOnly=r[0]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Lz(n){let e,t,r,i,o,s,a,l,u=n[1]&&k2(n),c=n[2]&&O2(n);const f=[Rz,Az],d=[];function g(h,v){return h[22]?1:0}return i=g(n),o=d[i]=f[i](n),{c(){e=ee("div"),u&&u.c(),t=me(),c&&c.c(),r=me(),o.c(),T(e,"class","jse-tree-mode svelte-15tyejh"),ze(e,"no-main-menu",!n[1])},m(h,v){ue(h,e,v),u&&u.m(e,null),j(e,t),c&&c.m(e,null),j(e,r),d[i].m(e,null),n[73](e),s=!0,a||(l=[Ce(Iz,"mousedown",n[46]),Ce(e,"keydown",n[39]),Ce(e,"mousedown",n[40]),Ce(e,"contextmenu",n[41])],a=!0)},p(h,v){h[1]?u?(u.p(h,v),v[0]&2&&X(u,1)):(u=k2(h),u.c(),X(u,1),u.m(e,t)):u&&(Ve(),te(u,1,1,()=>{u=null}),qe()),h[2]?c?(c.p(h,v),v[0]&4&&X(c,1)):(c=O2(h),c.c(),X(c,1),c.m(e,r)):c&&(Ve(),te(c,1,1,()=>{c=null}),qe()),o.p(h,v),v[0]&2&&ze(e,"no-main-menu",!h[1])},i(h){s||(X(u),X(c),X(o),s=!0)},o(h){te(u),te(c),te(o),s=!1},d(h){h&&le(e),u&&u.d(),c&&c.d(),d[i].d(),n[73](null),a=!1,rn(l)}}}function ia(n){return n.length===0?!0:n.length===1&&n[0]==="0"}function Uc(){return!0}function jz(n,e,t){let r;const i=Sr("jsoneditor:TreeMode"),o=typeof window>"u";i("isSSR:",o);const{open:s}=ur("simple-modal"),a=mh(),l=mh(),{openAbsolutePopup:u,closeAbsolutePopup:c}=ur("absolute-popup");let f,d,g,h=!1;const v=$V();let{readOnly:m=!1}=e,{externalContent:p}=e,{mainMenuBar:y=!0}=e,{navigationBar:b=!0}=e,{escapeControlCharacters:_=!1}=e,{escapeUnicodeCharacters:w=!1}=e,{validator:S=null}=e,{indentation:E=2}=e,{onError:O}=e,{onChange:R}=e,{onRenderValue:D}=e,{onRequestRepair:F=Gt}=e,{onRenderMenu:B=Gt}=e,{onClassName:H}=e,{onFocus:L}=e,{onBlur:N}=e,{onSortModal:U}=e,{onTransformModal:$}=e,Z=!1;IO({onMount:Nr,onDestroy:fo,getWindow:()=>cu(g),hasFocus:()=>Z&&document.hasFocus()||og(g),onFocus:()=>{h=!0,L&&L()},onBlur:()=>{h=!1,N&&N()}});let A,P;const V=[];let W;function z(ne){i("updateSelection",ne);const Se=typeof ne=="function"?ne(I.selection):ne;Yt(Se,I.selection)||t(13,I={...I,selection:Se})}let I=hw({json:A,expand:Q(A)}),M,J,q;function Q(ne){return F_({json:ne},Ky)?ia:Uc}let ae=!1,he=!1,Pe=!1,Fe="";async function Ae(ne){i("search text updated",ne),t(69,Fe=ne),await Pn(),await de()}async function ye(){t(14,M=M?Iq(M):void 0),await de()}async function Me(){t(14,M=M?Aq(M):void 0),await de()}async function xe(ne,Se){const Re=M==null?void 0:M.activeItem;if(i("handleReplace",{replacementText:Se,activeItem:Re}),!Re)return;const{operations:Be,newSelection:dt}=Rq(A,I,Se,Re);pn(Be,(kt,yn)=>({state:{...yn,selection:dt}})),await Pn(),await de()}async function fe(ne,Se){i("handleReplaceAll",{text:ne,replacementText:Se});const{operations:Re,newSelection:Be}=xq(A,I,ne,Se);pn(Re,(dt,kt)=>({state:{...kt,selection:Be}})),await Pn(),await de()}function ve(){t(16,ae=!1),t(17,he=!1),Ae(""),kr()}async function de(){const ne=M==null?void 0:M.activeItem;if(i("focusActiveSearchResult",M),ne){const Se=ne.path;t(13,I={...Zp(A,I,Se),selection:void 0}),await Pn(),await lt(Se)}}function Ie(){if(Fe===""){i("clearing search result"),M!==void 0&&t(14,M=void 0);return}t(18,Pe=!0),setTimeout(()=>{i("searching...",Fe);const ne=BP(Fe,A,I,Fm);t(14,M=Pq(A,ne,M)),t(18,Pe=!1)})}function De(ne){i("select validation error",ne),z(hn(ne.path,!1)),lt(ne.path)}const He=cq({onChange:ne=>{t(19,Xe=ne)}});let Xe=He.getState();function mt(ne=()=>!0){i("expand");const Se={...I,expandedMap:{},visibleSectionsMap:{}};t(13,I=mi(A,Se,V,ne))}const be=d8(Ie,GA);let Y=!1,x=[],C;const k=OP(HV);function K(ne,Se){const Re=Se?k(ne,Se):[];Yt(Re,x)||(i("validationErrors changed:",Re),t(9,x=Re))}function ie(){return i("validate"),W?{parseError:W,isRepairable:!1}:(K(A,S),{validationErrors:x})}function pe(){return A}function ge(){return I}function Qe(ne){ne.json!==void 0&&G(ne.json),ne.text!==void 0&&se(ne.text)}function G(ne){if(ne===void 0)return;const Se=!Yt(A,ne);if(i("update external json",{isChanged:Se,currentlyText:A===void 0}),!Se)return;const Re=I,Be=A,dt=P,kt=Y;t(7,A=ne),t(13,I=mi(A,I,V,Q(A))),t(8,P=void 0),t(20,Y=!1),re(A),_e({previousJson:Be,previousState:Re,previousText:dt,previousTextIsRepaired:kt})}function se(ne){if(ne===void 0||p.json!==void 0||ne===P)return;i("update external text");const Se=A,Re=I,Be=P,dt=Y;try{t(7,A=JSON.parse(ne)),t(13,I=mi(A,I,V,Q(A))),t(8,P=ne),t(20,Y=!1),W=void 0,re(A)}catch(kt){try{t(7,A=JSON.parse(qo(ne))),t(13,I=mi(A,I,V,Q(A))),t(8,P=ne),t(20,Y=!0),W=void 0,re(A)}catch{t(7,A=void 0),t(8,P=p.text),t(20,Y=!1),W=Y0(P,kt.message||kt.toString()),re(A)}}_e({previousJson:Se,previousState:Re,previousText:Be,previousTextIsRepaired:dt})}function re(ne){I.selection!==void 0&&(I.selection&&Rs(ne,I.selection.anchorPath)&&Rs(ne,I.selection.focusPath)||(i("clearing selection: path does not exist anymore",I.selection),t(13,I={...I,selection:void 0})))}function _e({previousJson:ne,previousState:Se,previousText:Re,previousTextIsRepaired:Be}){ne===void 0&&Re===void 0||(A!==void 0?ne!==void 0?He.add({undo:{patch:[{op:"replace",path:"",value:ne}],state:wo(Se),json:void 0,text:Re,textIsRepaired:Be},redo:{patch:[{op:"replace",path:"",value:A}],state:wo(I),json:void 0,text:P,textIsRepaired:Y}}):He.add({undo:{patch:void 0,json:void 0,text:Re,state:wo(Se),textIsRepaired:Be},redo:{patch:void 0,json:A,state:wo(I),text:P,textIsRepaired:Y}}):ne!==void 0&&He.add({undo:{patch:void 0,json:ne,state:wo(Se),text:Re,textIsRepaired:Be},redo:{patch:void 0,json:void 0,text:P,textIsRepaired:Y,state:wo(I)}}))}function Ee(){i("createDefaultSelection"),t(13,I={...I,selection:Rn(A||{},[],[])})}function We(ne,Se){if(i("patch",ne,Se),A===void 0)throw new Error("Cannot apply patch: no JSON");const Re=A,Be=I,dt=P,kt=Y,yn=Tq(A,ne),Un=oq(A,I,ne),Tn=qa(A,ne),ea=bq(Un.documentState,Tn,!1);i("patch updatedSelection",Tn);const ta=typeof Se=="function"?Se(Un.json,ea):void 0;t(7,A=ta&&ta.json!==void 0?ta.json:Un.json);const My=ta&&ta.state!==void 0?ta.state:ea;return t(13,I=My),t(8,P=void 0),t(20,Y=!1),re(A),He.add({undo:{patch:yn,json:void 0,text:dt,state:wo(Be),textIsRepaired:kt},redo:{patch:ne,json:void 0,state:wo(My),text:P,textIsRepaired:Y}}),{json:A,previousJson:Re,undo:yn,redo:ne}}function it(ne){return Kt(ne)||An(ne)||Wt(ne)}function ct(){m||!I.selection||z(Gr(I.selection.focusPath,!0))}function ft(){m||!I.selection||z(hn(I.selection.focusPath,!0))}function vt(){if(m||!Wt(I.selection))return;const ne=I.selection.focusPath,Se=Ge(ne),Re=tt(A,ne),Be=!zu(Re,I.enforceStringMap,Se),dt=Be?String(Re):Du(String(Re));i("handleToggleEnforceString",{enforceString:Be,value:Re,updatedValue:dt}),pn([{op:"replace",path:Ge(ne),value:dt}],(kt,yn)=>({state:rq(yn,Se,Be)}))}function Dt(){return Y&&A!==void 0&&Ny(A),{json:A,text:P}}async function ot(ne=!0){if(m||!it(I.selection))return;const Se=ne?E:null,Re=mw(A,I.selection,Se);if(Re==null)return;i("cut",{selection:I.selection,clipboard:Re,indent:ne});try{await navigator.clipboard.writeText(Re)}catch(kt){O(kt)}const{operations:Be,newSelection:dt}=bw(A,I.selection);pn(Be,(kt,yn)=>({state:{...yn,selection:dt}}))}async function Et(ne=!0){const Se=ne?E:null,Re=mw(A,I.selection,Se);if(Re!=null){i("copy",{clipboard:Re,indent:ne});try{await navigator.clipboard.writeText(Re)}catch(Be){O(Be)}}}function yt(ne){if(ne.preventDefault(),m)return;const Se=ne.clipboardData.getData("text/plain");try{we(Se)}catch{$e(Se,Be=>{i("repaired pasted text: ",Be),we(Be)})}}function Ut(){s(Fq,{},{...ah,styleWindow:{width:"450px"}},{onClose:()=>kr()})}function we(ne){if(A!==void 0){I.selection||Ee();const Se=_w(A,I.selection,ne);i("paste",{clipboardText:ne,operations:Se,selection:I.selection}),pn(Se,(Re,Be)=>{let dt=Be;return Se.filter(kt=>(Rk(kt)||Nk(kt))&&Hn(kt.value)).forEach(kt=>{const yn=Si(A,kt.path);dt=bo(Re,dt,yn)}),{state:dt}})}else i("paste text",{clipboardText:ne}),QI(ne,(Se,Re)=>{if(Se)return{state:bo(Se,Re,[])}})}function $e(ne,Se){s(Jq,{text:ne,onParse:J0,onRepair:_8,onApply:Se,onRenderMenu:B},{...ah,styleWindow:{width:"600px",height:"500px"},styleContent:{padding:0,height:"100%"}},{onClose:()=>kr()})}function Tt(){if(m||!I.selection)return;const ne=An(I.selection)||Wt(I.selection)?Rn(A,I.selection.anchorPath,I.selection.focusPath):I.selection;if(gn(I.selection.focusPath))i("remove root",{selection:I.selection}),R({text:"",json:void 0},{text:P,json:A},{contentErrors:ie(),patchResult:null});else{const{operations:Se,newSelection:Re}=bw(A,ne);i("remove",{operations:Se,selection:I.selection,newSelection:Re}),pn(Se,(Be,dt)=>({state:{...dt,selection:Re}}))}}function Ct(){if(m||!it(I.selection)||gn(I.selection.focusPath))return;i("duplicate",{selection:I.selection});const ne=Eq(A,jP(I.selection));pn(ne)}function At(){if(m||!I.selection||!Kt(I.selection)&&!Wt(I.selection)||gn(I.selection.focusPath))return;i("extract",{selection:I.selection});const ne=Cq(A,I.selection);pn(ne,(Se,Re)=>{if(Hn(Se))return{state:bo(Se,Re,[])}})}function Lt(ne){if(m||!I.selection)return;const Se=Oq(A,I.selection,ne);if(A!==void 0){const Re=JSON.stringify(Se),Be=_w(A,I.selection,Re);i("handleInsert",{type:ne,operations:Be,newValue:Se,data:Re});const dt=St(Be.filter(kt=>kt.op==="add"||kt.op==="replace"));pn(Be,(kt,yn)=>{if(dt){const Un=Si(kt,dt.path);if(Hn(Se))return{state:{...mi(kt,yn,Un,Uc),selection:qi(Un)}};if(Se===""){const Tn=gn(Un)?null:tt(kt,qt(Un));return i("test A",Un,qi(Un)),{state:Zp(kt,{...I,selection:ir(Tn)?Gr(Un,!0):hn(Un,!0)},Un)}}return}}),i("after patch"),dt&&Se===""&&Pn().then(()=>{setTimeout(()=>ti("",!0))})}else{i("handleInsert",{type:ne,newValue:Se});const Re=[];Ny(Se,(Be,dt)=>({state:{...bo(Be,dt,Re),selection:qi(Re)}}))}}function Zt(ne){An(I.selection)&&z(hn(I.selection.focusPath,!1)),Lt(ne)}function On(ne){if(!(m||!I.selection)){if(!Zf(I.selection)){O(new Error(`Cannot convert current selection to ${ne}`));return}try{const Se=I.selection.anchorPath,Re=tt(A,Se),Be=E8(Re,ne);if(Be===Re)return;const dt=[{op:"replace",path:Ge(Se),value:Be}];i("handleConvert",{selection:I.selection,path:Se,type:ne,operations:dt}),pn(dt,(kt,yn)=>({state:bo(kt,yn,I.selection.focusPath)}))}catch(Se){O(Se)}}}function It(){const ne=dw(A,I,!1),Se=qt(I.selection.focusPath);!gn(ne.focusPath)&&Yt(Se,qt(ne.focusPath))?z(po(ne.focusPath)):z(qi(Se)),i("insert before",{selection:I.selection,selectionBefore:ne,parentPath:Se}),Pn().then(cc)}function Kn(){const ne=Kt(I.selection)?St(I.selection.paths):I.selection.focusPath;i("insert after",ne),z(po(ne)),Pn().then(cc)}function ti(ne,Se){const Re=cu(g).document.activeElement;Re.isContentEditable&&(Re.textContent=Se?ne:Re.textContent+ne,EO(Re))}async function Xt(ne){if(!(m||!I.selection)){if(An(I.selection)){const Se=!I.selection.edit;z({...I.selection,edit:!0}),await Pn(),setTimeout(()=>ti(ne,Se));return}if(ne==="{")Lt("object");else if(ne==="[")Lt("array");else if(Wt(I.selection)){if(!Hn(tt(A,I.selection.focusPath))){const Se=!I.selection.edit;z({...I.selection,edit:!0}),await Pn(),setTimeout(()=>ti(ne,Se))}}else await et(ne)}}async function et(ne){if(m||!I.selection)return;Lt("value");const Se=!$l(I.selection),Re=I.selection.focusPath,Be=tt(A,qt(Re));Array.isArray(Be)||!Be||Wt(I.selection)?z(hn(Re,!0)):z(Gr(Re,!0)),await Pn(),setTimeout(()=>ti(ne,Se))}function bt(){if(m||!He.getState().canUndo)return;const ne=He.undo();if(!ne)return;const Se={json:A,text:P};t(7,A=ne.undo.patch?ks(A,ne.undo.patch):ne.undo.json),t(13,I=ne.undo.state),t(8,P=ne.undo.text),t(20,Y=ne.undo.textIsRepaired),i("undo",{item:ne,json:A,documentState:I});const Re={json:A,previousJson:Se.json,redo:ne.undo.patch,undo:ne.redo.patch};Lr(Se,Re),kr(),I.selection&&lt(I.selection.focusPath,!1)}function Cr(){if(m||!He.getState().canRedo)return;const ne=He.redo();if(!ne)return;const Se={json:A,text:P};t(7,A=ne.redo.patch?ks(A,ne.redo.patch):ne.redo.json),t(13,I=ne.redo.state),t(8,P=ne.redo.text),t(20,Y=ne.redo.textIsRepaired),i("redo",{item:ne,json:A,documentState:I});const Re={json:A,previousJson:Se.json,redo:ne.redo.patch,undo:ne.undo.patch};Lr(Se,Re),kr(),I.selection&&lt(I.selection.focusPath,!1)}function Dr(ne){m||(Z=!0,U({id:a,json:A,selectedPath:ne,onSort:async Se=>{i("onSort",ne,Se),pn(Se,(Re,Be)=>({state:{...bo(Re,Be,ne),selection:hn(ne,!1)}}))},onClose:()=>{Z=!1,kr()}}))}function Pi(){if(!I.selection)return;const ne=pw(A,I.selection);Dr(ne)}function $s(){Dr([])}function hi({id:ne,selectedPath:Se,onTransform:Re,onClose:Be}){Z=!0,$({id:ne||l,json:A,selectedPath:Se,onTransform:Re?dt=>{Re({operations:dt,json:A,transformedJson:ks(A,dt)})}:dt=>{i("onTransform",Se,dt),pn(dt,(kt,yn)=>({state:{...bo(kt,yn,Se),selection:hn(Se,!1)}}))},onClose:()=>{Z=!1,kr(),Be&&Be()}})}function up(){if(!I.selection)return;const ne=pw(A,I.selection);hi({selectedPath:ne})}function ce(){hi({selectedPath:[]})}async function lt(ne,Se=!0){t(13,I=Zp(A,I,qt(ne))),await Pn();const Re=Ht(ne);if(Re){i("scrollTo",{path:ne,elem:Re,refContents:f});const Be=f.getBoundingClientRect(),dt=Re.getBoundingClientRect();if(!Se&&dt.bottom>Be.top&&dt.top<Be.bottom)return;const kt=-(Be.height/4);v(Re,{container:f,offset:kt,duration:KA})}}function Ht(ne){return f?f.querySelector(`div[data-path="${sg(ne)}"]`):null}function Xn(ne){const Se=Ht(ne);if(!Se||!f)return;const Re=f.getBoundingClientRect(),Be=Se.getBoundingClientRect(),dt=20,kt=Hn(tt(A,ne))?dt:Be.height;Be.top<Re.top+dt?v(Se,{container:f,offset:-dt,duration:0}):Be.top+kt>Re.bottom-dt&&v(Se,{container:f,offset:-(Re.height-kt-dt),duration:0})}function Lr(ne,Se){P!==void 0?R({text:P,json:void 0},ne,{contentErrors:ie(),patchResult:Se}):A!==void 0&&R({text:void 0,json:A},ne,{contentErrors:ie(),patchResult:Se})}function pn(ne,Se){if(m)return;i("handlePatch",ne,Se);const Re={json:A,text:P},Be=We(ne,Se);return t(15,q=void 0),Lr(Re,Be),Be}function Ny(ne,Se){const Re=I,Be=A,dt=P,kt={json:A,text:P},yn=Y,Un=mi(A,I,V,ia),Tn=typeof Se=="function"?Se(ne,Un):void 0;t(7,A=Tn&&Tn.json!==void 0?Tn.json:ne),t(13,I=Tn&&Tn.state!==void 0?Tn.state:Un),t(8,P=void 0),t(20,Y=!1),re(A),_e({previousJson:Be,previousState:Re,previousText:dt,previousTextIsRepaired:yn}),Lr(kt,null)}function QI(ne,Se){i("handleChangeText");const Re=I,Be=A,dt=P,kt={json:A,text:P},yn=Y;try{t(7,A=JSON.parse(ne)),t(13,I=mi(A,I,V,ia)),t(8,P=void 0),t(20,Y=!1)}catch{try{t(7,A=JSON.parse(qo(ne))),t(13,I=mi(A,I,V,ia)),t(8,P=ne),t(20,Y=!0)}catch{t(7,A=void 0),t(13,I=hw({json:A,expand:ia})),t(8,P=ne),t(20,Y=!1)}}if(typeof Se=="function"){const Tn=Se(A,I);t(7,A=Tn&&Tn.json?Tn.json:A),t(13,I=Tn&&Tn.state?Tn.state:I)}re(A),_e({previousJson:Be,previousState:Re,previousText:dt,previousTextIsRepaired:yn}),Lr(kt,null)}function bo(ne,Se,Re){const Be=tt(ne,Re),kt=!F_({json:Be},Ky)?Uc:ia;return mi(ne,Se,Re,kt)}function uc(ne,Se,Re=!1){i("expand",{path:ne,expanded:Se,recursive:Re}),Se?Re?t(13,I=mi(A,I,ne,Uc)):t(13,I=nq(I,ne)):t(13,I=PP(I,ne)),I.selection&&!Se&&dq(I.selection,ne)&&z(void 0),setTimeout(()=>{og(g)||kr()})}function ZI(){uc([],!0,!0)}function XI(){uc([],!1,!0)}function cp(ne){i("openFind",{findAndReplace:ne}),t(16,ae=!1),t(17,he=!1),Pn().then(()=>{t(16,ae=!0),t(17,he=ne)})}function $I(ne,Se){i("handleExpandSection",ne,Se);const Re=Ge(ne);t(13,I=iq(A,I,Re,Se))}function eA(ne){i("pasted json as text",ne),t(15,q=ne)}function tA(ne){const Se=nl(ne).replace(/^Command\+/,"Ctrl+"),Re=ne.shiftKey;if(Se==="Ctrl+X"&&(ne.preventDefault(),ot(!0)),Se==="Ctrl+Shift+X"&&(ne.preventDefault(),ot(!1)),Se==="Ctrl+C"&&(ne.preventDefault(),Et(!0)),Se==="Ctrl+Shift+C"&&(ne.preventDefault(),Et(!1)),Se==="Ctrl+D"&&(ne.preventDefault(),Ct()),(Se==="Delete"||Se==="Backspace")&&(ne.preventDefault(),Tt()),Se==="Insert"&&(ne.preventDefault(),Lt("structure")),Se==="Ctrl+A"&&(ne.preventDefault(),z(wq())),Se==="Ctrl+Q"&&cc(ne),Se==="Up"||Se==="Shift+Up"){ne.preventDefault();const Be=I.selection?dw(A,I,Re,!0)||I.selection:Bc(A,I);z(Be),Xn(Be.focusPath)}if(Se==="Down"||Se==="Shift+Down"){ne.preventDefault();const Be=I.selection?mq(A,I,Re,!0)||I.selection:Bc(A,I);z(Be),Xn(Be.focusPath)}if(Se==="Left"||Se==="Shift+Left"){ne.preventDefault();const Be=I.selection?vq(A,I,Re,!m)||I.selection:Bc(A,I);z(Be),Xn(Be.focusPath)}if(Se==="Right"||Se==="Shift+Right"){ne.preventDefault();const Be=I.selection?yq(A,I,Re,!m)||I.selection:Bc(A,I);z(Be),Xn(Be.focusPath)}if(Se==="Enter"&&I.selection){if(!m&&Kt(I.selection)&&I.selection.paths.length===1){const Be=I.selection.focusPath,dt=tt(A,qt(Be));Array.isArray(dt)&&z(hn(Be,!1))}if(!m&&An(I.selection)&&(ne.preventDefault(),z({...I.selection,edit:!0})),Wt(I.selection)){ne.preventDefault();const Be=tt(A,I.selection.focusPath);Hn(Be)?uc(I.selection.focusPath,!0):m||z({...I.selection,edit:!0})}}if(Se.length===(Se.startsWith("Shift+")?7:1)&&I.selection){ne.preventDefault(),Xt(ne.key);return}if(Se==="Enter"&&(wi(I.selection)||Bn(I.selection))){ne.preventDefault(),Xt("");return}if(Se==="Ctrl+Enter"&&Wt(I.selection)){const Be=tt(A,I.selection.focusPath);D0(Be)&&window.open(String(Be),"_blank")}if(Se==="Escape"&&I.selection&&(ne.preventDefault(),z(void 0)),Se==="Ctrl+F"&&(ne.preventDefault(),cp(!1)),Se==="Ctrl+H"&&(ne.preventDefault(),cp(!0)),Se==="Ctrl+Z"){ne.preventDefault();const Be=document.activeElement;Be&&Be.blur&&Be.focus?(Be.blur(),setTimeout(()=>{bt(),setTimeout(()=>Be.select())})):bt()}if(Se==="Ctrl+Shift+Z"){ne.preventDefault();const Be=document.activeElement;Be&&Be.blur&&Be.focus?(Be.blur(),setTimeout(()=>{Cr(),setTimeout(()=>Be.select())})):Cr()}}function nA(ne){i("handleMouseDown",ne),setTimeout(()=>{setTimeout(()=>{!h&&!SO(ne.target,"BUTTON")&&(kr(),!I.selection&&A===void 0&&(P===""||P===void 0)&&Ee())})})}function fl({anchor:ne,left:Se,top:Re,width:Be,height:dt,offsetTop:kt,offsetLeft:yn,showTip:Un}){const Tn={json:A,documentState:I,showTip:Un,onEditKey:ct,onEditValue:ft,onToggleEnforceString:vt,onCut:ot,onCopy:Et,onPaste:Ut,onRemove:Tt,onDuplicate:Ct,onExtract:At,onInsertBefore:It,onInsert:Zt,onConvert:On,onInsertAfter:Kn,onSort:Pi,onTransform:up,onCloseContextMenu(){c(ea),kr()}};Z=!0;const ea=u(sH,Tn,{left:Se,top:Re,offsetTop:kt,offsetLeft:yn,width:Be,height:dt,anchor:ne,closeOnOuterClick:!0,onClose:()=>{Z=!1,kr()}})}function cc(ne){if(!(m||$l(I.selection))){if(ne&&(ne.stopPropagation(),ne.preventDefault()),ne&&ne.type==="contextmenu"&&ne.target!==d)fl({left:ne.clientX,top:ne.clientY,width:xl,height:Rl,showTip:!1});else{const Se=f==null?void 0:f.querySelector(".jse-context-menu-button.jse-selected");if(Se)fl({anchor:Se,offsetTop:2,width:xl,height:Rl,showTip:!1});else{const Re=f==null?void 0:f.getBoundingClientRect();Re&&fl({top:Re.top+2,left:Re.left+2,width:xl,height:Rl,showTip:!1})}}return!1}}function rA(ne){m||fl({anchor:L8(ne.target,"BUTTON"),offsetTop:0,width:xl,height:Rl,showTip:!0})}async function iA(){i("apply pasted json",q);const{path:ne,contents:Se}=q;z(hn(ne,!1)),await Pn();const Re=[{op:"replace",path:Ge(ne),value:Se}];pn(Re,(Be,dt)=>({state:bo(Be,dt,ne)}))}function oA(){i("clear pasted json"),t(15,q=void 0)}function sA(ne){z(ne),kr(),lt(ne.focusPath)}function kr(){i("focus"),d&&(d.focus(),d.select())}function aA(ne){!ju(ne.target,Re=>Re===g)&&$l(I.selection)&&(i("click outside the editor, stop edit mode"),z(Re=>An(Re)?{...Re,edit:!1}:Wt(Re)?{...Re,edit:!1}:Re),h&&d&&(d.focus(),d.blur()),Pn().then(()=>{setTimeout(()=>{d&&d.blur()})}))}function lA(ne){r&&r.onDrag(ne)}function uA(){r&&r.onDragEnd()}let fp;function cA(ne){ae=ne,t(16,ae)}function fA(ne){wt[ne?"unshift":"push"](()=>{d=ne,t(11,d)})}function hA(ne){wt[ne?"unshift":"push"](()=>{f=ne,t(6,f)})}function dA(ne){wt[ne?"unshift":"push"](()=>{g=ne,t(12,g)})}return n.$$set=ne=>{"readOnly"in ne&&t(0,m=ne.readOnly),"externalContent"in ne&&t(47,p=ne.externalContent),"mainMenuBar"in ne&&t(1,y=ne.mainMenuBar),"navigationBar"in ne&&t(2,b=ne.navigationBar),"escapeControlCharacters"in ne&&t(48,_=ne.escapeControlCharacters),"escapeUnicodeCharacters"in ne&&t(49,w=ne.escapeUnicodeCharacters),"validator"in ne&&t(50,S=ne.validator),"indentation"in ne&&t(51,E=ne.indentation),"onError"in ne&&t(52,O=ne.onError),"onChange"in ne&&t(53,R=ne.onChange),"onRenderValue"in ne&&t(54,D=ne.onRenderValue),"onRequestRepair"in ne&&t(3,F=ne.onRequestRepair),"onRenderMenu"in ne&&t(4,B=ne.onRenderMenu),"onClassName"in ne&&t(55,H=ne.onClassName),"onFocus"in ne&&t(56,L=ne.onFocus),"onBlur"in ne&&t(57,N=ne.onBlur),"onSortModal"in ne&&t(58,U=ne.onSortModal),"onTransformModal"in ne&&t(59,$=ne.onTransformModal)},n.$$.update=()=>{n.$$.dirty[1]&393216&&t(68,J=vO({escapeControlCharacters:_,escapeUnicodeCharacters:w})),n.$$.dirty[1]&65536&&Qe(p),n.$$.dirty[0]&128|n.$$.dirty[2]&128&&be(Fe,A),n.$$.dirty[0]&384,n.$$.dirty[0]&128|n.$$.dirty[1]&524288&&K(A,S),n.$$.dirty[0]&512&&t(21,C=qV(x)),n.$$.dirty[0]&64&&(r=f?ZV(f):void 0),n.$$.dirty[0]&1|n.$$.dirty[1]&25165824|n.$$.dirty[2]&64&&t(10,fp={readOnly:m,normalization:J,getJson:pe,getDocumentState:ge,findElement:Ht,focus:kr,onPatch:pn,onInsert:Lt,onExpand:uc,onSelect:z,onFind:cp,onExpandSection:$I,onPasteJson:eA,onRenderValue:D,onContextMenu:fl,onClassName:H||(()=>{}),onDrag:lA,onDragEnd:uA}),n.$$.dirty[0]&1024&&i("context changed",fp)},[m,y,b,F,B,Dt,f,A,P,x,fp,d,g,I,M,q,ae,he,Pe,Xe,Y,C,o,V,Ae,ye,Me,xe,fe,ve,De,Et,yt,bt,Cr,$s,ce,ZI,XI,tA,nA,cc,rA,iA,oA,sA,aA,p,_,w,S,E,O,R,D,H,L,N,U,$,mt,ie,pe,We,hi,lt,Ht,kr,J,Fe,cA,fA,hA,dA]}class qv extends rt{constructor(e){super(),nt(this,e,jz,Lz,Nt,{readOnly:0,externalContent:47,mainMenuBar:1,navigationBar:2,escapeControlCharacters:48,escapeUnicodeCharacters:49,validator:50,indentation:51,onError:52,onChange:53,onRenderValue:54,onRequestRepair:3,onRenderMenu:4,onClassName:55,onFocus:56,onBlur:57,onSortModal:58,onTransformModal:59,expand:60,validate:61,getJson:62,patch:63,acceptAutoRepair:5,openTransformModal:64,scrollTo:65,findElement:66,focus:67},null,[-1,-1,-1,-1,-1])}get expand(){return this.$$.ctx[60]}get validate(){return this.$$.ctx[61]}get getJson(){return this.$$.ctx[62]}get patch(){return this.$$.ctx[63]}get acceptAutoRepair(){return this.$$.ctx[5]}get openTransformModal(){return this.$$.ctx[64]}get scrollTo(){return this.$$.ctx[65]}get findElement(){return this.$$.ctx[66]}get focus(){return this.$$.ctx[67]}}const Bz=`
<p>
  Enter a JavaScript function to filter, sort, or transform the data.
</p>
`,Fz={id:"javascript",name:"JavaScript",description:Bz,createQuery:Uz,executeQuery:Vz};function Uz(n,e){const{filter:t,sort:r,projection:i}=e,o=[];if(t&&t.path&&t.relation&&t.value){const s=`item => item${as(t.path)}`,a=typeof fq(t.value)=="string"?`'${t.value}'`:t.value;o.push(`  data = data.filter(${s} ${t.relation} ${a})
`)}if(r&&r.path&&r.direction&&(r.direction==="desc"?o.push(`  data = data.slice().sort((a, b) => {
    // sort descending
    const valueA = a${as(r.path)}
    const valueB = b${as(r.path)}
    return valueA > valueB ? -1 : valueA < valueB ? 1 : 0
  })
`):o.push(`  data = data.slice().sort((a, b) => {
    // sort ascending
    const valueA = a${as(r.path)}
    const valueB = b${as(r.path)}
    return valueA > valueB ? 1 : valueA < valueB ? -1 : 0
  })
`)),i&&i.paths)if(i.paths.length>1){const s=i.paths.map(a=>{const l=a[a.length-1]||"item",u=`item${as(a)}`;return`    ${JSON.stringify(l)}: ${u}`});o.push(`  data = data.map(item => ({
${s.join(`,
`)}})
  )
`)}else{const s=`item${as(i.paths[0])}`;o.push(`  data = data.map(item => ${s})
`)}return o.push(`  return data
`),`function query (data) {
${o.join("")}}`}function Vz(n,e){const r=new Function(`"use strict";

`+e+`

if (typeof query !== "function") {
  throw new Error("Cannot execute query: expecting a function named 'query' but is undefined")
}

return query;
`)()(n);return r!==void 0?r:null}function qz(n){let e,t,r,i,o,s;return t=new Ot({props:{data:n[0]===!0?Zh:Qh}}),{c(){e=ee("div"),Te(t.$$.fragment),T(e,"class","jse-boolean-toggle svelte-zs5o25"),T(e,"title",r=n[1]?`Boolean value ${n[0]}`:"Click to toggle this boolean value")},m(a,l){ue(a,e,l),ke(t,e,null),i=!0,o||(s=Ce(e,"mousedown",n[2]),o=!0)},p(a,[l]){const u={};l&1&&(u.data=a[0]===!0?Zh:Qh),t.$set(u),(!i||l&3&&r!==(r=a[1]?`Boolean value ${a[0]}`:"Click to toggle this boolean value"))&&T(e,"title",r)},i(a){i||(X(t.$$.fragment,a),i=!0)},o(a){te(t.$$.fragment,a),i=!1},d(a){a&&le(e),Oe(t),o=!1,s()}}}function Hz(n,e,t){let{path:r}=e,{value:i}=e,{readOnly:o}=e,{onPatch:s}=e,{focus:a}=e;function l(u){u.stopPropagation(),!o&&(s([{op:"replace",path:Ge(r),value:!i}]),setTimeout(a))}return n.$$set=u=>{"path"in u&&t(3,r=u.path),"value"in u&&t(0,i=u.value),"readOnly"in u&&t(1,o=u.readOnly),"onPatch"in u&&t(4,s=u.onPatch),"focus"in u&&t(5,a=u.focus)},[i,o,l,r,s,a]}class zz extends rt{constructor(e){super(),nt(this,e,Hz,qz,Nt,{path:3,value:0,readOnly:1,onPatch:4,focus:5})}}const Wz="modulepreload",Kz=function(n,e){return new URL(n,e).href},I2={},Gz=function(e,t,r){return!t||t.length===0?e():Promise.all(t.map(i=>{if(i=Kz(i,r),i in I2)return;I2[i]=!0;const o=i.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":Wz,o||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),o)return new Promise((l,u)=>{a.addEventListener("load",l),a.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())};function Jz(n){let e;return{c(){e=ee("div"),T(e,"class","jse-color-picker-popup svelte-1las40j")},m(t,r){ue(t,e,r),n[4](e)},p:Ne,i:Ne,o:Ne,d(t){t&&le(e),n[4](null)}}}function Yz(n,e,t){let{color:r}=e,{onChange:i}=e,{showOnTop:o}=e,s,a;Nr(async()=>{const u=(await Gz(()=>import("./vanilla-picker.bc2093b3.js"),[],import.meta.url)).default;a=new u({parent:s,color:r,popup:o?"top":"bottom",onDone(c){const d=c.rgba[3]===1?c.hex.substring(0,7):c.hex;i(d)}}),a.show()}),fo(()=>{a&&a.destroy()});function l(u){wt[u?"unshift":"push"](()=>{s=u,t(0,s)})}return n.$$set=u=>{"color"in u&&t(1,r=u.color),"onChange"in u&&t(2,i=u.onChange),"showOnTop"in u&&t(3,o=u.showOnTop)},[s,r,i,o,l]}class Qz extends rt{constructor(e){super(),nt(this,e,Yz,Jz,on,{color:1,onChange:2,showOnTop:3})}}function Zz(n){let e,t,r,i;return{c(){e=ee("button"),T(e,"class","jse-color-picker-button svelte-fk1u9y"),ri(e,"background",n[2]),T(e,"title",t=n[1]?`Color ${n[0]}`:"Click to open a color picker")},m(o,s){ue(o,e,s),r||(i=Ce(e,"click",n[3]),r=!0)},p(o,[s]){s&4&&ri(e,"background",o[2]),s&3&&t!==(t=o[1]?`Color ${o[0]}`:"Click to open a color picker")&&T(e,"title",t)},i:Ne,o:Ne,d(o){o&&le(e),r=!1,i()}}}function Xz(n,e,t){let r;const{openAbsolutePopup:i}=ur("absolute-popup");let{path:o}=e,{value:s}=e,{readOnly:a}=e,{onPatch:l}=e,{focus:u}=e;function c(g){l([{op:"replace",path:Ge(o),value:g}]),f()}function f(){u()}function d(g){if(a)return;const h=300,v=g.target.getBoundingClientRect().top,p=cu(g.target).innerHeight-v<h&&v>h;i(Qz,{color:s,onChange:c,showOnTop:p},{anchor:g.target,closeOnOuterClick:!0,onClose:f,offsetTop:18,offsetLeft:-8,height:h})}return n.$$set=g=>{"path"in g&&t(4,o=g.path),"value"in g&&t(0,s=g.value),"readOnly"in g&&t(1,a=g.readOnly),"onPatch"in g&&t(5,l=g.onPatch),"focus"in g&&t(6,u=g.focus)},n.$$.update=()=>{n.$$.dirty&1&&t(2,r=Lk(s))},[s,a,r,d,o,l,u]}class $z extends rt{constructor(e){super(),nt(this,e,Xz,Zz,Nt,{path:4,value:0,readOnly:1,onPatch:5,focus:6})}}function n0(n){const e=M0(n);return Ha("jse-value","jse-"+e,{"jse-url":D0(n),"jse-empty":typeof n=="string"&&n.length===0})}function eW(n){let e,t;return e=new qP({props:{value:n[1].escapeValue(n[0]),onChange:n[3],onCancel:n[4],onPaste:n[5],onFind:n[2],onValueClass:n[6]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,[i]){const o={};i&3&&(o.value=r[1].escapeValue(r[0])),i&4&&(o.onFind=r[2]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function tW(n,e,t){let{path:r}=e,{value:i}=e,{normalization:o}=e,{enforceString:s}=e,{onPatch:a}=e,{onPasteJson:l}=e,{onSelect:u}=e,{onFind:c}=e,{focus:f}=e;function d(p){return s?p:Du(p)}function g(p,y){a([{op:"replace",path:Ge(r),value:d(o.unescapeValue(p))}],(b,_)=>{const w=y===Cs.NEXT_INSIDE?gq(b,_,r)||_.selection:hn(r,!1);return{state:{..._,selection:w}}}),y!==Cs.SELF&&f()}function h(){u(hn(r,!1)),f()}function v(p){try{const y=JSON.parse(p);Hn(y)&&l({path:r,contents:y})}catch{}}function m(p){return n0(d(o.unescapeValue(p)))}return n.$$set=p=>{"path"in p&&t(7,r=p.path),"value"in p&&t(0,i=p.value),"normalization"in p&&t(1,o=p.normalization),"enforceString"in p&&t(8,s=p.enforceString),"onPatch"in p&&t(9,a=p.onPatch),"onPasteJson"in p&&t(10,l=p.onPasteJson),"onSelect"in p&&t(11,u=p.onSelect),"onFind"in p&&t(2,c=p.onFind),"focus"in p&&t(12,f=p.focus)},[i,o,c,g,h,v,m,r,s,a,l,u,f]}class nW extends rt{constructor(e){super(),nt(this,e,tW,eW,Nt,{path:7,value:0,normalization:1,enforceString:8,onPatch:9,onPasteJson:10,onSelect:11,onFind:2,focus:12})}}function rW(n){let e=Ds(n[1].escapeValue(n[0]))+"",t;return{c(){t=Ue(e)},m(r,i){ue(r,t,i)},p(r,i){i&3&&e!==(e=Ds(r[1].escapeValue(r[0]))+"")&&_t(t,e)},i:Ne,o:Ne,d(r){r&&le(t)}}}function iW(n){let e,t;return e=new VP({props:{text:n[1].escapeValue(n[0]),searchResultItems:n[2]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i&3&&(o.text=r[1].escapeValue(r[0])),i&4&&(o.searchResultItems=r[2]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function oW(n){let e,t,r,i,o,s,a,l;const u=[iW,rW],c=[];function f(d,g){return d[2]?0:1}return t=f(n),r=c[t]=u[t](n),{c(){e=ee("div"),r.c(),T(e,"data-type","selectable-value"),T(e,"class",i=Yn(n0(n[0]))+" svelte-wuf5jd"),T(e,"title",o=n[3]?"Ctrl+Click or Ctrl+Enter to open url in new window":null)},m(d,g){ue(d,e,g),c[t].m(e,null),s=!0,a||(l=[Ce(e,"click",n[4]),Ce(e,"dblclick",n[5])],a=!0)},p(d,[g]){let h=t;t=f(d),t===h?c[t].p(d,g):(Ve(),te(c[h],1,1,()=>{c[h]=null}),qe(),r=c[t],r?r.p(d,g):(r=c[t]=u[t](d),r.c()),X(r,1),r.m(e,null)),(!s||g&1&&i!==(i=Yn(n0(d[0]))+" svelte-wuf5jd"))&&T(e,"class",i),(!s||g&8&&o!==(o=d[3]?"Ctrl+Click or Ctrl+Enter to open url in new window":null))&&T(e,"title",o)},i(d){s||(X(r),s=!0)},o(d){te(r),s=!1},d(d){d&&le(e),c[t].d(),a=!1,rn(l)}}}function sW(n,e,t){let r,{path:i}=e,{value:o}=e,{readOnly:s}=e,{normalization:a}=e,{onSelect:l}=e,{searchResultItems:u}=e;function c(d){typeof o=="string"&&r&&d.ctrlKey&&(d.preventDefault(),d.stopPropagation(),window.open(o,"_blank"))}function f(d){s||(d.preventDefault(),l(hn(i,!0)))}return n.$$set=d=>{"path"in d&&t(6,i=d.path),"value"in d&&t(0,o=d.value),"readOnly"in d&&t(7,s=d.readOnly),"normalization"in d&&t(1,a=d.normalization),"onSelect"in d&&t(8,l=d.onSelect),"searchResultItems"in d&&t(2,u=d.searchResultItems)},n.$$.update=()=>{n.$$.dirty&1&&t(3,r=D0(o))},[o,a,u,r,c,f,i,s,l]}class aW extends rt{constructor(e){super(),nt(this,e,sW,oW,Nt,{path:6,value:0,readOnly:7,normalization:1,onSelect:8,searchResultItems:2})}}function lW(n){let e,t,r,i,o,s;return t=new Ot({props:{data:Xq}}),{c(){e=ee("div"),Te(t.$$.fragment),T(e,"class","jse-timestamp svelte-1u00zub")},m(a,l){ue(a,e,l),ke(t,e,null),i=!0,o||(s=xu(r=HP.call(null,e,{text:n[0],...n[1]})),o=!0)},p(a,[l]){r&&si(r.update)&&l&1&&r.update.call(null,{text:a[0],...a[1]})},i(a){i||(X(t.$$.fragment,a),i=!0)},o(a){te(t.$$.fragment,a),i=!1},d(a){a&&le(e),Oe(t),o=!1,s()}}}function uW(n,e,t){let r;const i=ur("absolute-popup");let{value:o}=e;return n.$$set=s=>{"value"in s&&t(2,o=s.value)},n.$$.update=()=>{n.$$.dirty&4&&t(0,r=`Time: ${new Date(o).toString()}`)},[r,i,o]}class cW extends rt{constructor(e){super(),nt(this,e,uW,lW,Nt,{value:2})}}function fW({path:n,value:e,readOnly:t,enforceString:r,searchResultItems:i,isEditing:o,normalization:s,onPatch:a,onPasteJson:l,onSelect:u,onFind:c,focus:f}){const d=[];return!o&&ex(e)&&d.push({component:zz,props:{path:n,value:e,readOnly:t,onPatch:a,focus:f}}),!o&&nx(e)&&d.push({component:$z,props:{path:n,value:e,readOnly:t,onPatch:a,focus:f}}),o&&d.push({component:nW,props:{path:n,value:e,enforceString:r,normalization:s,onPatch:a,onPasteJson:l,onSelect:u,onFind:c,focus:f}}),o||d.push({component:aW,props:{path:n,value:e,readOnly:t,normalization:s,searchResultItems:i,onSelect:u}}),!o&&tx(e)&&d.push({component:cW,props:{value:e}}),d}const pi={};function hW(n,e){const t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i={};return i.top=t.top<0,i.left=t.left<0,i.bottom=t.bottom+r.height>(window.innerHeight||document.documentElement.clientHeight),i.right=t.right>(window.innerWidth||document.documentElement.clientWidth),i.any=i.top||i.left||i.bottom||i.right,i}function dW(n){let e,t=n[0](n[1],n[2])+"",r;return{c(){e=ee("div"),T(e,"class",r="item "+n[3]+" svelte-3e0qet")},m(i,o){ue(i,e,o),e.innerHTML=t},p(i,[o]){o&7&&t!==(t=i[0](i[1],i[2])+"")&&(e.innerHTML=t),o&8&&r!==(r="item "+i[3]+" svelte-3e0qet")&&T(e,"class",r)},i:Ne,o:Ne,d(i){i&&le(e)}}}function pW(n,e,t){let{isActive:r=!1}=e,{isFirst:i=!1}=e,{isHover:o=!1}=e,{isSelectable:s=!1}=e,{getOptionLabel:a=void 0}=e,{item:l=void 0}=e,{filterText:u=""}=e,c="";return n.$$set=f=>{"isActive"in f&&t(4,r=f.isActive),"isFirst"in f&&t(5,i=f.isFirst),"isHover"in f&&t(6,o=f.isHover),"isSelectable"in f&&t(7,s=f.isSelectable),"getOptionLabel"in f&&t(0,a=f.getOptionLabel),"item"in f&&t(1,l=f.item),"filterText"in f&&t(2,u=f.filterText)},n.$$.update=()=>{if(n.$$.dirty&242){const f=[];r&&f.push("active"),i&&f.push("first"),o&&f.push("hover"),l.isGroupHeader&&f.push("groupHeader"),l.isGroupItem&&f.push("groupItem"),s||f.push("notSelectable"),t(3,c=f.join(" "))}},[a,l,u,c,r,i,o,s]}class KP extends rt{constructor(e){super(),nt(this,e,pW,dW,on,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function A2(n,e,t){const r=n.slice();return r[41]=e[t],r[42]=t,r}function mW(n){let e,t,r=n[1],i=[];for(let a=0;a<r.length;a+=1)i[a]=N2(A2(n,r,a));const o=a=>te(i[a],1,1,()=>{i[a]=null});let s=null;return r.length||(s=R2(n)),{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=xt(),s&&s.c()},m(a,l){for(let u=0;u<i.length;u+=1)i[u].m(a,l);ue(a,e,l),s&&s.m(a,l),t=!0},p(a,l){if(l[0]&114390){r=a[1];let u;for(u=0;u<r.length;u+=1){const c=A2(a,r,u);i[u]?(i[u].p(c,l),X(i[u],1)):(i[u]=N2(c),i[u].c(),X(i[u],1),i[u].m(e.parentNode,e))}for(Ve(),u=r.length;u<i.length;u+=1)o(u);qe(),!r.length&&s?s.p(a,l):r.length?s&&(s.d(1),s=null):(s=R2(a),s.c(),s.m(e.parentNode,e))}},i(a){if(!t){for(let l=0;l<r.length;l+=1)X(i[l]);t=!0}},o(a){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)te(i[l]);t=!1},d(a){xn(i,a),a&&le(e),s&&s.d(a)}}}function gW(n){let e,t,r;var i=n[3];function o(s){return{props:{items:s[1],itemHeight:s[8],$$slots:{default:[_W,({item:a,i:l})=>({41:a,42:l}),({item:a,i:l})=>[0,(a?1024:0)|(l?2048:0)]]},$$scope:{ctx:s}}}}return i&&(e=new i(o(n))),{c(){e&&Te(e.$$.fragment),t=xt()},m(s,a){e&&ke(e,s,a),ue(s,t,a),r=!0},p(s,a){const l={};if(a[0]&2&&(l.items=s[1]),a[0]&256&&(l.itemHeight=s[8]),a[0]&9814|a[1]&11264&&(l.$$scope={dirty:a,ctx:s}),i!==(i=s[3])){if(e){Ve();const u=e;te(u.$$.fragment,1,0,()=>{Oe(u,1)}),qe()}i?(e=new i(o(s)),Te(e.$$.fragment),X(e.$$.fragment,1),ke(e,t.parentNode,t)):e=null}else i&&e.$set(l)},i(s){r||(e&&X(e.$$.fragment,s),r=!0)},o(s){e&&te(e.$$.fragment,s),r=!1},d(s){s&&le(t),e&&Oe(e,s)}}}function R2(n){let e,t=!n[11]&&x2(n);return{c(){t&&t.c(),e=xt()},m(r,i){t&&t.m(r,i),ue(r,e,i)},p(r,i){r[11]?t&&(t.d(1),t=null):t?t.p(r,i):(t=x2(r),t.c(),t.m(e.parentNode,e))},d(r){t&&t.d(r),r&&le(e)}}}function x2(n){let e,t;return{c(){e=ee("div"),t=Ue(n[12]),T(e,"class","empty svelte-1uyqfml")},m(r,i){ue(r,e,i),j(e,t)},p(r,i){i[0]&4096&&_t(t,r[12])},d(r){r&&le(e)}}}function vW(n){let e,t,r,i,o,s;var a=n[4];function l(d){return{props:{item:d[41],filterText:d[13],getOptionLabel:d[6],isFirst:r0(d[42]),isActive:Xh(d[41],d[9],d[10]),isHover:$h(d[2],d[41],d[42],d[1]),isSelectable:Us(d[41])}}}a&&(t=new a(l(n)));function u(){return n[29](n[42])}function c(){return n[30](n[42])}function f(...d){return n[31](n[41],n[42],...d)}return{c(){e=ee("div"),t&&Te(t.$$.fragment),r=me(),T(e,"class","listItem"),T(e,"tabindex","-1")},m(d,g){ue(d,e,g),t&&ke(t,e,null),j(e,r),i=!0,o||(s=[Ce(e,"mouseover",u),Ce(e,"focus",c),Ce(e,"click",f)],o=!0)},p(d,g){n=d;const h={};if(g[0]&2&&(h.item=n[41]),g[0]&8192&&(h.filterText=n[13]),g[0]&64&&(h.getOptionLabel=n[6]),g[0]&1538&&(h.isActive=Xh(n[41],n[9],n[10])),g[0]&6&&(h.isHover=$h(n[2],n[41],n[42],n[1])),g[0]&2&&(h.isSelectable=Us(n[41])),a!==(a=n[4])){if(t){Ve();const v=t;te(v.$$.fragment,1,0,()=>{Oe(v,1)}),qe()}a?(t=new a(l(n)),Te(t.$$.fragment),X(t.$$.fragment,1),ke(t,e,r)):t=null}else a&&t.$set(h)},i(d){i||(t&&X(t.$$.fragment,d),i=!0)},o(d){t&&te(t.$$.fragment,d),i=!1},d(d){d&&le(e),t&&Oe(t),o=!1,rn(s)}}}function yW(n){let e,t=n[7](n[41])+"",r;return{c(){e=ee("div"),r=Ue(t),T(e,"class","listGroupTitle svelte-1uyqfml")},m(i,o){ue(i,e,o),j(e,r)},p(i,o){o[0]&130&&t!==(t=i[7](i[41])+"")&&_t(r,t)},i:Ne,o:Ne,d(i){i&&le(e)}}}function N2(n){let e,t,r,i;const o=[yW,vW],s=[];function a(l,u){return l[41].isGroupHeader&&!l[41].isSelectable?0:1}return e=a(n),t=s[e]=o[e](n),{c(){t.c(),r=xt()},m(l,u){s[e].m(l,u),ue(l,r,u),i=!0},p(l,u){let c=e;e=a(l),e===c?s[e].p(l,u):(Ve(),te(s[c],1,1,()=>{s[c]=null}),qe(),t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),X(t,1),t.m(r.parentNode,r))},i(l){i||(X(t),i=!0)},o(l){te(t),i=!1},d(l){s[e].d(l),l&&le(r)}}}function _W(n){let e,t,r,i,o;var s=n[4];function a(f){return{props:{item:f[41],filterText:f[13],getOptionLabel:f[6],isFirst:r0(f[42]),isActive:Xh(f[41],f[9],f[10]),isHover:$h(f[2],f[41],f[42],f[1]),isSelectable:Us(f[41])}}}s&&(t=new s(a(n)));function l(){return n[26](n[42])}function u(){return n[27](n[42])}function c(...f){return n[28](n[41],n[42],...f)}return{c(){e=ee("div"),t&&Te(t.$$.fragment),T(e,"class","listItem")},m(f,d){ue(f,e,d),t&&ke(t,e,null),r=!0,i||(o=[Ce(e,"mouseover",l),Ce(e,"focus",u),Ce(e,"click",c)],i=!0)},p(f,d){n=f;const g={};if(d[1]&1024&&(g.item=n[41]),d[0]&8192&&(g.filterText=n[13]),d[0]&64&&(g.getOptionLabel=n[6]),d[1]&2048&&(g.isFirst=r0(n[42])),d[0]&1536|d[1]&1024&&(g.isActive=Xh(n[41],n[9],n[10])),d[0]&6|d[1]&3072&&(g.isHover=$h(n[2],n[41],n[42],n[1])),d[1]&1024&&(g.isSelectable=Us(n[41])),s!==(s=n[4])){if(t){Ve();const h=t;te(h.$$.fragment,1,0,()=>{Oe(h,1)}),qe()}s?(t=new s(a(n)),Te(t.$$.fragment),X(t.$$.fragment,1),ke(t,e,null)):t=null}else s&&t.$set(g)},i(f){r||(t&&X(t.$$.fragment,f),r=!0)},o(f){t&&te(t.$$.fragment,f),r=!1},d(f){f&&le(e),t&&Oe(t),i=!1,rn(o)}}}function bW(n){let e,t,r,i,o,s;const a=[gW,mW],l=[];function u(c,f){return c[5]?0:1}return t=u(n),r=l[t]=a[t](n),{c(){e=ee("div"),r.c(),T(e,"class","listContainer svelte-1uyqfml"),T(e,"style",n[14]),ze(e,"virtualList",n[5])},m(c,f){ue(c,e,f),l[t].m(e,null),n[32](e),i=!0,o||(s=[Ce(window,"keydown",n[17]),Ce(window,"resize",n[18])],o=!0)},p(c,f){let d=t;t=u(c),t===d?l[t].p(c,f):(Ve(),te(l[d],1,1,()=>{l[d]=null}),qe(),r=l[t],r?r.p(c,f):(r=l[t]=a[t](c),r.c()),X(r,1),r.m(e,null)),(!i||f[0]&16384)&&T(e,"style",c[14]),f[0]&32&&ze(e,"virtualList",c[5])},i(c){i||(X(r),i=!0)},o(c){te(r),i=!1},d(c){c&&le(e),l[t].d(),n[32](null),o=!1,rn(s)}}}function Xh(n,e,t){return e&&e[t]===n[t]}function r0(n){return n===0}function $h(n,e,t,r){return Us(e)&&(n===t||r.length===1)}function Us(n){return n.isGroupHeader&&n.isSelectable||n.selectable||!n.hasOwnProperty("selectable")}function wW(n,e,t){const r=hd();let{container:i=void 0}=e,{VirtualList:o=null}=e,{Item:s=KP}=e,{isVirtualList:a=!1}=e,{items:l=[]}=e,{labelIdentifier:u="label"}=e,{getOptionLabel:c=(Q,ae)=>{if(Q)return Q.isCreator?`Create "${ae}"`:Q[u]}}=e,{getGroupHeaderLabel:f=null}=e,{itemHeight:d=40}=e,{hoverItemIndex:g=0}=e,{value:h=void 0}=e,{optionIdentifier:v="value"}=e,{hideEmptyState:m=!1}=e,{noOptionsMessage:p="No options"}=e,{isMulti:y=!1}=e,{activeItemIndex:b=0}=e,{filterText:_=""}=e,{parent:w=null}=e,{listPlacement:S=null}=e,{listAutoWidth:E=null}=e,{listOffset:O=5}=e,R=0,D=!1,F;Nr(()=>{if(l.length>0&&!y&&h){const Q=l.findIndex(ae=>ae[v]===h[v]);Q&&t(2,g=Q)}Z("active"),i.addEventListener("scroll",()=>{clearTimeout(R),R=setTimeout(()=>{D=!1},100)},!1)}),gk(()=>{l||t(1,l=[]),l!==F&&l.length>0&&t(2,g=0),F=l});function B(Q){Q.isCreator||r("itemSelected",Q)}function H(Q){D||t(2,g=Q)}function L(Q){const{item:ae,i:he,event:Pe}=Q;if(Pe.stopPropagation(),h&&!y&&h[v]===ae[v])return N();ae.isCreator?r("itemCreated",_):Us(ae)&&(t(19,b=he),t(2,g=he),B(ae))}function N(){r("closeList")}async function U(Q){if(a)return;let ae=!0;for(;ae;)Q>0&&g===l.length-1?t(2,g=0):Q<0&&g===0?t(2,g=l.length-1):t(2,g=g+Q),ae=!Us(l[g]);await Pn(),Z("hover")}function $(Q){switch(Q.key){case"Escape":Q.preventDefault(),N();break;case"ArrowDown":Q.preventDefault(),l.length&&U(1);break;case"ArrowUp":Q.preventDefault(),l.length&&U(-1);break;case"Enter":if(Q.preventDefault(),l.length===0)break;const ae=l[g];if(h&&!y&&h[v]===ae[v]){N();break}ae.isCreator?r("itemCreated",_):(t(19,b=g),B(l[g]));break;case"Tab":if(Q.preventDefault(),l.length===0||h&&h[v]===l[g][v])return N();t(19,b=g),B(l[g]);break}}function Z(Q){if(a||!i)return;let ae;const he=i.querySelector(`.listItem .${Q}`);he&&(ae=i.getBoundingClientRect().bottom-he.getBoundingClientRect().bottom),t(0,i.scrollTop-=ae,i)}let A;function P(){const{height:Q,width:ae}=w.getBoundingClientRect();t(14,A=""),t(14,A+=`min-width:${ae}px;width:${E?"auto":"100%"};`),S==="top"||S==="auto"&&hW(w,i).bottom?t(14,A+=`bottom:${Q+O}px;`):t(14,A+=`top:${Q+O}px;`)}const V=Q=>H(Q),W=Q=>H(Q),z=(Q,ae,he)=>L({item:Q,i:ae,event:he}),I=Q=>H(Q),M=Q=>H(Q),J=(Q,ae,he)=>L({item:Q,i:ae,event:he});function q(Q){wt[Q?"unshift":"push"](()=>{i=Q,t(0,i)})}return n.$$set=Q=>{"container"in Q&&t(0,i=Q.container),"VirtualList"in Q&&t(3,o=Q.VirtualList),"Item"in Q&&t(4,s=Q.Item),"isVirtualList"in Q&&t(5,a=Q.isVirtualList),"items"in Q&&t(1,l=Q.items),"labelIdentifier"in Q&&t(20,u=Q.labelIdentifier),"getOptionLabel"in Q&&t(6,c=Q.getOptionLabel),"getGroupHeaderLabel"in Q&&t(7,f=Q.getGroupHeaderLabel),"itemHeight"in Q&&t(8,d=Q.itemHeight),"hoverItemIndex"in Q&&t(2,g=Q.hoverItemIndex),"value"in Q&&t(9,h=Q.value),"optionIdentifier"in Q&&t(10,v=Q.optionIdentifier),"hideEmptyState"in Q&&t(11,m=Q.hideEmptyState),"noOptionsMessage"in Q&&t(12,p=Q.noOptionsMessage),"isMulti"in Q&&t(21,y=Q.isMulti),"activeItemIndex"in Q&&t(19,b=Q.activeItemIndex),"filterText"in Q&&t(13,_=Q.filterText),"parent"in Q&&t(22,w=Q.parent),"listPlacement"in Q&&t(23,S=Q.listPlacement),"listAutoWidth"in Q&&t(24,E=Q.listAutoWidth),"listOffset"in Q&&t(25,O=Q.listOffset)},n.$$.update=()=>{n.$$.dirty[0]&4194305&&w&&i&&P()},[i,l,g,o,s,a,c,f,d,h,v,m,p,_,A,H,L,$,P,b,u,y,w,S,E,O,V,W,z,I,M,J,q]}class SW extends rt{constructor(e){super(),nt(this,e,wW,bW,on,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function EW(n){let e,t=n[0](n[1])+"";return{c(){e=ee("div"),T(e,"class","selection svelte-pu1q1n")},m(r,i){ue(r,e,i),e.innerHTML=t},p(r,[i]){i&3&&t!==(t=r[0](r[1])+"")&&(e.innerHTML=t)},i:Ne,o:Ne,d(r){r&&le(e)}}}function CW(n,e,t){let{getSelectionLabel:r=void 0}=e,{item:i=void 0}=e;return n.$$set=o=>{"getSelectionLabel"in o&&t(0,r=o.getSelectionLabel),"item"in o&&t(1,i=o.item)},[r,i]}class kW extends rt{constructor(e){super(),nt(this,e,CW,EW,on,{getSelectionLabel:0,item:1})}}function M2(n,e,t){const r=n.slice();return r[9]=e[t],r[11]=t,r}function D2(n){let e,t,r;function i(...o){return n[6](n[11],...o)}return{c(){e=ee("div"),e.innerHTML='<svg width="100%" height="100%" viewBox="-2 -2 50 50" focusable="false" aria-hidden="true" role="presentation" class="svelte-liu9pa"><path d="M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"></path></svg>',T(e,"class","multiSelectItem_clear svelte-liu9pa")},m(o,s){ue(o,e,s),t||(r=Ce(e,"click",i),t=!0)},p(o,s){n=o},d(o){o&&le(e),t=!1,r()}}}function L2(n){let e,t,r=n[4](n[9])+"",i,o,s,a,l,u=!n[2]&&!n[3]&&D2(n);function c(...f){return n[7](n[11],...f)}return{c(){e=ee("div"),t=ee("div"),i=me(),u&&u.c(),o=me(),T(t,"class","multiSelectItem_label svelte-liu9pa"),T(e,"class",s="multiSelectItem "+(n[1]===n[11]?"active":"")+" "+(n[2]?"disabled":"")+" svelte-liu9pa")},m(f,d){ue(f,e,d),j(e,t),t.innerHTML=r,j(e,i),u&&u.m(e,null),j(e,o),a||(l=Ce(e,"click",c),a=!0)},p(f,d){n=f,d&17&&r!==(r=n[4](n[9])+"")&&(t.innerHTML=r),!n[2]&&!n[3]?u?u.p(n,d):(u=D2(n),u.c(),u.m(e,o)):u&&(u.d(1),u=null),d&6&&s!==(s="multiSelectItem "+(n[1]===n[11]?"active":"")+" "+(n[2]?"disabled":"")+" svelte-liu9pa")&&T(e,"class",s)},d(f){f&&le(e),u&&u.d(),a=!1,l()}}}function OW(n){let e,t=n[0],r=[];for(let i=0;i<t.length;i+=1)r[i]=L2(M2(n,t,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=xt()},m(i,o){for(let s=0;s<r.length;s+=1)r[s].m(i,o);ue(i,e,o)},p(i,[o]){if(o&63){t=i[0];let s;for(s=0;s<t.length;s+=1){const a=M2(i,t,s);r[s]?r[s].p(a,o):(r[s]=L2(a),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=t.length}},i:Ne,o:Ne,d(i){xn(r,i),i&&le(e)}}}function TW(n,e,t){const r=hd();let{value:i=[]}=e,{activeValue:o=void 0}=e,{isDisabled:s=!1}=e,{multiFullItemClearable:a=!1}=e,{getSelectionLabel:l=void 0}=e;function u(d,g){g.stopPropagation(),r("multiItemClear",{i:d})}const c=(d,g)=>u(d,g),f=(d,g)=>a?u(d,g):{};return n.$$set=d=>{"value"in d&&t(0,i=d.value),"activeValue"in d&&t(1,o=d.activeValue),"isDisabled"in d&&t(2,s=d.isDisabled),"multiFullItemClearable"in d&&t(3,a=d.multiFullItemClearable),"getSelectionLabel"in d&&t(4,l=d.getSelectionLabel)},[i,o,s,a,l,u,c,f]}class PW extends rt{constructor(e){super(),nt(this,e,TW,OW,on,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function j2(n,e,t){const r=n.slice();return r[23]=e[t],r}const IW=n=>({item:n&32,i:n&32,hoverItemIndex:n&2}),B2=n=>({item:n[23].data,i:n[23].index,hoverItemIndex:n[1]});function AW(n){let e;return{c(){e=Ue("Missing template")},m(t,r){ue(t,e,r)},d(t){t&&le(e)}}}function F2(n,e){let t,r,i;const o=e[15].default,s=Yr(o,e,e[14],B2),a=s||AW();return{key:n,first:null,c(){t=ee("svelte-virtual-list-row"),a&&a.c(),r=me(),Lm(t,"class","svelte-g2cagw"),this.first=t},m(l,u){ue(l,t,u),a&&a.m(t,null),j(t,r),i=!0},p(l,u){e=l,s&&s.p&&(!i||u&16418)&&Zr(s,o,e,e[14],i?Qr(o,e[14],u,IW):Xr(e[14]),B2)},i(l){i||(X(a,l),i=!0)},o(l){te(a,l),i=!1},d(l){l&&le(t),a&&a.d(l)}}}function RW(n){let e,t,r=[],i=new Map,o,s,a,l,u=n[5];const c=f=>f[23].index;for(let f=0;f<u.length;f+=1){let d=j2(n,u,f),g=c(d);i.set(g,r[f]=F2(g,d))}return{c(){e=ee("svelte-virtual-list-viewport"),t=ee("svelte-virtual-list-contents");for(let f=0;f<r.length;f+=1)r[f].c();ri(t,"padding-top",n[6]+"px"),ri(t,"padding-bottom",n[7]+"px"),Lm(t,"class","svelte-g2cagw"),ri(e,"height",n[0]),Lm(e,"class","svelte-g2cagw"),Ki(()=>n[18].call(e))},m(f,d){ue(f,e,d),j(e,t);for(let g=0;g<r.length;g+=1)r[g].m(t,null);n[16](t),n[17](e),o=k0(e,n[18].bind(e)),s=!0,a||(l=Ce(e,"scroll",n[8]),a=!0)},p(f,[d]){d&16418&&(u=f[5],Ve(),r=Nu(r,d,c,1,f,u,i,t,dd,F2,null,j2),qe()),(!s||d&64)&&ri(t,"padding-top",f[6]+"px"),(!s||d&128)&&ri(t,"padding-bottom",f[7]+"px"),(!s||d&1)&&ri(e,"height",f[0])},i(f){if(!s){for(let d=0;d<u.length;d+=1)X(r[d]);s=!0}},o(f){for(let d=0;d<r.length;d+=1)te(r[d]);s=!1},d(f){f&&le(e);for(let d=0;d<r.length;d+=1)r[d].d();n[16](null),n[17](null),o(),a=!1,l()}}}function xW(n,e,t){let{$$slots:r={},$$scope:i}=e,{items:o=void 0}=e,{height:s="100%"}=e,{itemHeight:a=40}=e,{hoverItemIndex:l=0}=e,{start:u=0}=e,{end:c=0}=e,f=[],d,g,h,v=0,m,p,y=0,b=0,_;async function w(D,F,B){const{scrollTop:H}=g;await Pn();let L=y-H,N=u;for(;L<F&&N<D.length;){let $=d[N-u];$||(t(10,c=N+1),await Pn(),$=d[N-u]),L+=f[N]=B||$.offsetHeight,N+=1}t(10,c=N);const U=D.length-c;_=(y+L)/c,t(7,b=U*_),f.length=D.length,g&&t(3,g.scrollTop=0,g)}async function S(){const{scrollTop:D}=g,F=u;for(let N=0;N<d.length;N+=1)f[u+N]=a||d[N].offsetHeight;let B=0,H=0;for(;B<o.length;){const N=f[B]||_;if(H+N>D){t(9,u=B),t(6,y=H);break}H+=N,B+=1}for(;B<o.length&&(H+=f[B]||_,B+=1,!(H>D+v)););t(10,c=B);const L=o.length-c;for(_=H/c;B<o.length;)f[B++]=_;if(t(7,b=L*_),u<F){await Pn();let N=0,U=0;for(let Z=u;Z<F;Z+=1)d[Z-u]&&(N+=f[Z],U+=a||d[Z-u].offsetHeight);const $=U-N;g.scrollTo(0,D+$)}}Nr(()=>{d=h.getElementsByTagName("svelte-virtual-list-row"),t(13,p=!0)});function E(D){wt[D?"unshift":"push"](()=>{h=D,t(4,h)})}function O(D){wt[D?"unshift":"push"](()=>{g=D,t(3,g)})}function R(){v=this.offsetHeight,t(2,v)}return n.$$set=D=>{"items"in D&&t(11,o=D.items),"height"in D&&t(0,s=D.height),"itemHeight"in D&&t(12,a=D.itemHeight),"hoverItemIndex"in D&&t(1,l=D.hoverItemIndex),"start"in D&&t(9,u=D.start),"end"in D&&t(10,c=D.end),"$$scope"in D&&t(14,i=D.$$scope)},n.$$.update=()=>{n.$$.dirty&3584&&t(5,m=o.slice(u,c).map((D,F)=>({index:F+u,data:D}))),n.$$.dirty&14340&&p&&w(o,v,a)},[s,l,v,g,h,m,y,b,S,u,c,o,a,p,i,r,E,O,R]}class NW extends rt{constructor(e){super(),nt(this,e,xW,RW,on,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function MW(n){let e,t;return{c(){e=Ft("svg"),t=Ft("path"),T(t,"fill","currentColor"),T(t,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),T(e,"width","100%"),T(e,"height","100%"),T(e,"viewBox","-2 -2 50 50"),T(e,"focusable","false"),T(e,"aria-hidden","true"),T(e,"role","presentation")},m(r,i){ue(r,e,i),j(e,t)},p:Ne,i:Ne,o:Ne,d(r){r&&le(e)}}}class DW extends rt{constructor(e){super(),nt(this,e,null,MW,on,{})}}function LW(n,e,t){let r;return function(){let o=this,s=arguments,a=function(){r=null,t||n.apply(o,s)},l=t&&!r;clearTimeout(r),r=setTimeout(a,e),l&&n.apply(o,s)}}function U2(n,e,t){const r=n.slice();return r[103]=e[t],r}function V2(n){let e,t,r,i,o;return{c(){e=ee("span"),t=Ue(n[33]),r=me(),i=ee("span"),o=Ue(n[32]),T(e,"id","aria-selection"),T(i,"id","aria-context")},m(s,a){ue(s,e,a),j(e,t),ue(s,r,a),ue(s,i,a),j(i,o)},p(s,a){a[1]&4&&_t(t,s[33]),a[1]&2&&_t(o,s[32])},d(s){s&&le(e),s&&le(r),s&&le(i)}}}function q2(n){let e,t,r;const i=[n[18]];var o=n[17];function s(a){let l={};for(let u=0;u<i.length;u+=1)l=is(l,i[u]);return{props:l}}return o&&(e=new o(s())),{c(){e&&Te(e.$$.fragment),t=xt()},m(a,l){e&&ke(e,a,l),ue(a,t,l),r=!0},p(a,l){const u=l[0]&262144?zs(i,[pd(a[18])]):{};if(o!==(o=a[17])){if(e){Ve();const c=e;te(c.$$.fragment,1,0,()=>{Oe(c,1)}),qe()}o?(e=new o(s()),Te(e.$$.fragment),X(e.$$.fragment,1),ke(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(a){r||(e&&X(e.$$.fragment,a),r=!0)},o(a){e&&te(e.$$.fragment,a),r=!1},d(a){a&&le(t),e&&Oe(e,a)}}}function H2(n){let e,t,r;var i=n[26];function o(s){return{props:{value:s[2],getSelectionLabel:s[12],activeValue:s[30],isDisabled:s[9],multiFullItemClearable:s[8]}}}return i&&(e=new i(o(n)),e.$on("multiItemClear",n[38]),e.$on("focus",n[40])),{c(){e&&Te(e.$$.fragment),t=xt()},m(s,a){e&&ke(e,s,a),ue(s,t,a),r=!0},p(s,a){const l={};if(a[0]&4&&(l.value=s[2]),a[0]&4096&&(l.getSelectionLabel=s[12]),a[0]&1073741824&&(l.activeValue=s[30]),a[0]&512&&(l.isDisabled=s[9]),a[0]&256&&(l.multiFullItemClearable=s[8]),i!==(i=s[26])){if(e){Ve();const u=e;te(u.$$.fragment,1,0,()=>{Oe(u,1)}),qe()}i?(e=new i(o(s)),e.$on("multiItemClear",s[38]),e.$on("focus",s[40]),Te(e.$$.fragment),X(e.$$.fragment,1),ke(e,t.parentNode,t)):e=null}else i&&e.$set(l)},i(s){r||(e&&X(e.$$.fragment,s),r=!0)},o(s){e&&te(e.$$.fragment,s),r=!1},d(s){s&&le(t),e&&Oe(e,s)}}}function z2(n){let e,t,r,i,o;var s=n[25];function a(l){return{props:{item:l[2],getSelectionLabel:l[12]}}}return s&&(t=new s(a(n))),{c(){e=ee("div"),t&&Te(t.$$.fragment),T(e,"class","selectedItem svelte-17l1npl")},m(l,u){ue(l,e,u),t&&ke(t,e,null),r=!0,i||(o=Ce(e,"focus",n[40]),i=!0)},p(l,u){const c={};if(u[0]&4&&(c.item=l[2]),u[0]&4096&&(c.getSelectionLabel=l[12]),s!==(s=l[25])){if(t){Ve();const f=t;te(f.$$.fragment,1,0,()=>{Oe(f,1)}),qe()}s?(t=new s(a(l)),Te(t.$$.fragment),X(t.$$.fragment,1),ke(t,e,null)):t=null}else s&&t.$set(c)},i(l){r||(t&&X(t.$$.fragment,l),r=!0)},o(l){t&&te(t.$$.fragment,l),r=!1},d(l){l&&le(e),t&&Oe(t),i=!1,o()}}}function W2(n){let e,t,r,i,o;var s=n[23];function a(l){return{}}return s&&(t=new s(a())),{c(){e=ee("div"),t&&Te(t.$$.fragment),T(e,"class","clearSelect svelte-17l1npl"),T(e,"aria-hidden","true")},m(l,u){ue(l,e,u),t&&ke(t,e,null),r=!0,i||(o=Ce(e,"click",dk(n[27])),i=!0)},p(l,u){if(s!==(s=l[23])){if(t){Ve();const c=t;te(c.$$.fragment,1,0,()=>{Oe(c,1)}),qe()}s?(t=new s(a()),Te(t.$$.fragment),X(t.$$.fragment,1),ke(t,e,null)):t=null}},i(l){r||(t&&X(t.$$.fragment,l),r=!0)},o(l){t&&te(t.$$.fragment,l),r=!1},d(l){l&&le(e),t&&Oe(t),i=!1,o()}}}function K2(n){let e;function t(o,s){return o[22]?BW:jW}let r=t(n),i=r(n);return{c(){e=ee("div"),i.c(),T(e,"class","indicator svelte-17l1npl"),T(e,"aria-hidden","true")},m(o,s){ue(o,e,s),i.m(e,null)},p(o,s){r===(r=t(o))&&i?i.p(o,s):(i.d(1),i=r(o),i&&(i.c(),i.m(e,null)))},d(o){o&&le(e),i.d()}}}function jW(n){let e,t;return{c(){e=Ft("svg"),t=Ft("path"),T(t,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),T(e,"width","100%"),T(e,"height","100%"),T(e,"viewBox","0 0 20 20"),T(e,"focusable","false"),T(e,"aria-hidden","true"),T(e,"class","svelte-17l1npl")},m(r,i){ue(r,e,i),j(e,t)},p:Ne,d(r){r&&le(e)}}}function BW(n){let e,t;return{c(){e=new kA(!1),t=xt(),e.a=t},m(r,i){e.m(n[22],r,i),ue(r,t,i)},p(r,i){i[0]&4194304&&e.p(r[22])},d(r){r&&le(t),r&&e.d()}}}function G2(n){let e;return{c(){e=ee("div"),e.innerHTML='<svg class="spinner_icon svelte-17l1npl" viewBox="25 25 50 50"><circle class="spinner_path svelte-17l1npl" cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="5" stroke-miterlimit="10"></circle></svg>',T(e,"class","spinner svelte-17l1npl")},m(t,r){ue(t,e,r)},d(t){t&&le(e)}}}function J2(n){let e,t,r,i;const o=[n[34]];function s(u){n[84](u)}var a=n[24];function l(u){let c={};for(let f=0;f<o.length;f+=1)c=is(c,o[f]);return u[28]!==void 0&&(c.hoverItemIndex=u[28]),{props:c}}return a&&(e=new a(l(n)),wt.push(()=>Ir(e,"hoverItemIndex",s)),e.$on("itemSelected",n[43]),e.$on("itemCreated",n[44]),e.$on("closeList",n[45])),{c(){e&&Te(e.$$.fragment),r=xt()},m(u,c){e&&ke(e,u,c),ue(u,r,c),i=!0},p(u,c){const f=c[1]&8?zs(o,[pd(u[34])]):{};if(!t&&c[0]&268435456&&(t=!0,f.hoverItemIndex=u[28],qr(()=>t=!1)),a!==(a=u[24])){if(e){Ve();const d=e;te(d.$$.fragment,1,0,()=>{Oe(d,1)}),qe()}a?(e=new a(l(u)),wt.push(()=>Ir(e,"hoverItemIndex",s)),e.$on("itemSelected",u[43]),e.$on("itemCreated",u[44]),e.$on("closeList",u[45]),Te(e.$$.fragment),X(e.$$.fragment,1),ke(e,r.parentNode,r)):e=null}else a&&e.$set(f)},i(u){i||(e&&X(e.$$.fragment,u),i=!0)},o(u){e&&te(e.$$.fragment,u),i=!1},d(u){u&&le(r),e&&Oe(e,u)}}}function Y2(n){let e,t,r;return{c(){e=ee("input"),T(e,"name",t=n[16].name),T(e,"type","hidden"),e.value=r=n[2]?n[12](n[2]):null,T(e,"class","svelte-17l1npl")},m(i,o){ue(i,e,o)},p(i,o){o[0]&65536&&t!==(t=i[16].name)&&T(e,"name",t),o[0]&4100&&r!==(r=i[2]?i[12](i[2]):null)&&(e.value=r)},d(i){i&&le(e)}}}function Q2(n){let e,t=n[2],r=[];for(let i=0;i<t.length;i+=1)r[i]=Z2(U2(n,t,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=xt()},m(i,o){for(let s=0;s<r.length;s+=1)r[s].m(i,o);ue(i,e,o)},p(i,o){if(o[0]&69636){t=i[2];let s;for(s=0;s<t.length;s+=1){const a=U2(i,t,s);r[s]?r[s].p(a,o):(r[s]=Z2(a),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=t.length}},d(i){xn(r,i),i&&le(e)}}}function Z2(n){let e,t,r;return{c(){e=ee("input"),T(e,"name",t=n[16].name),T(e,"type","hidden"),e.value=r=n[103]?n[12](n[103]):null,T(e,"class","svelte-17l1npl")},m(i,o){ue(i,e,o)},p(i,o){o[0]&65536&&t!==(t=i[16].name)&&T(e,"name",t),o[0]&4100&&r!==(r=i[103]?i[12](i[103]):null)&&(e.value=r)},d(i){i&&le(e)}}}function FW(n){let e,t,r,i,o,s,a,l,u,c,f,d,g,h,v,m,p,y,b=n[1]&&V2(n),_=n[17]&&q2(n),w=n[35]&&H2(n),S=[{readOnly:a=!n[13]},n[31],{placeholder:n[36]},{style:n[14]},{disabled:n[9]}],E={};for(let N=0;N<S.length;N+=1)E=is(E,S[N]);let O=!n[7]&&n[29]&&z2(n),R=n[37]&&W2(n),D=!n[37]&&(n[20]||n[19]&&!n[2]||!n[13]&&!n[9]&&!n[4]&&(n[29]&&!n[15]||!n[29]))&&K2(n),F=n[4]&&G2(),B=n[5]&&J2(n),H=(!n[7]||n[7]&&!n[35])&&Y2(n),L=n[7]&&n[35]&&Q2(n);return{c(){e=ee("div"),t=ee("span"),b&&b.c(),r=me(),_&&_.c(),i=me(),w&&w.c(),o=me(),s=ee("input"),l=me(),O&&O.c(),u=me(),R&&R.c(),c=me(),D&&D.c(),f=me(),F&&F.c(),d=me(),B&&B.c(),g=me(),H&&H.c(),h=me(),L&&L.c(),T(t,"aria-live","polite"),T(t,"aria-atomic","false"),T(t,"aria-relevant","additions text"),T(t,"class","a11yText svelte-17l1npl"),Ly(s,E),ze(s,"svelte-17l1npl",!0),T(e,"class",v="selectContainer "+n[21]+" svelte-17l1npl"),T(e,"style",n[11]),ze(e,"hasError",n[10]),ze(e,"multiSelect",n[7]),ze(e,"disabled",n[9]),ze(e,"focused",n[1])},m(N,U){ue(N,e,U),j(e,t),b&&b.m(t,null),j(e,r),_&&_.m(e,null),j(e,i),w&&w.m(e,null),j(e,o),j(e,s),s.autofocus&&s.focus(),n[82](s),Nn(s,n[3]),j(e,l),O&&O.m(e,null),j(e,u),R&&R.m(e,null),j(e,c),D&&D.m(e,null),j(e,f),F&&F.m(e,null),j(e,d),B&&B.m(e,null),j(e,g),H&&H.m(e,null),j(e,h),L&&L.m(e,null),n[85](e),m=!0,p||(y=[Ce(window,"click",n[41]),Ce(window,"focusin",n[41]),Ce(window,"keydown",n[39]),Ce(s,"focus",n[40]),Ce(s,"input",n[83]),Ce(e,"click",n[42])],p=!0)},p(N,U){N[1]?b?b.p(N,U):(b=V2(N),b.c(),b.m(t,null)):b&&(b.d(1),b=null),N[17]?_?(_.p(N,U),U[0]&131072&&X(_,1)):(_=q2(N),_.c(),X(_,1),_.m(e,i)):_&&(Ve(),te(_,1,1,()=>{_=null}),qe()),N[35]?w?(w.p(N,U),U[1]&16&&X(w,1)):(w=H2(N),w.c(),X(w,1),w.m(e,o)):w&&(Ve(),te(w,1,1,()=>{w=null}),qe()),Ly(s,E=zs(S,[(!m||U[0]&8192&&a!==(a=!N[13]))&&{readOnly:a},U[1]&1&&N[31],(!m||U[1]&32)&&{placeholder:N[36]},(!m||U[0]&16384)&&{style:N[14]},(!m||U[0]&512)&&{disabled:N[9]}])),U[0]&8&&s.value!==N[3]&&Nn(s,N[3]),ze(s,"svelte-17l1npl",!0),!N[7]&&N[29]?O?(O.p(N,U),U[0]&536871040&&X(O,1)):(O=z2(N),O.c(),X(O,1),O.m(e,u)):O&&(Ve(),te(O,1,1,()=>{O=null}),qe()),N[37]?R?(R.p(N,U),U[1]&64&&X(R,1)):(R=W2(N),R.c(),X(R,1),R.m(e,c)):R&&(Ve(),te(R,1,1,()=>{R=null}),qe()),!N[37]&&(N[20]||N[19]&&!N[2]||!N[13]&&!N[9]&&!N[4]&&(N[29]&&!N[15]||!N[29]))?D?D.p(N,U):(D=K2(N),D.c(),D.m(e,f)):D&&(D.d(1),D=null),N[4]?F||(F=G2(),F.c(),F.m(e,d)):F&&(F.d(1),F=null),N[5]?B?(B.p(N,U),U[0]&32&&X(B,1)):(B=J2(N),B.c(),X(B,1),B.m(e,g)):B&&(Ve(),te(B,1,1,()=>{B=null}),qe()),!N[7]||N[7]&&!N[35]?H?H.p(N,U):(H=Y2(N),H.c(),H.m(e,h)):H&&(H.d(1),H=null),N[7]&&N[35]?L?L.p(N,U):(L=Q2(N),L.c(),L.m(e,null)):L&&(L.d(1),L=null),(!m||U[0]&2097152&&v!==(v="selectContainer "+N[21]+" svelte-17l1npl"))&&T(e,"class",v),(!m||U[0]&2048)&&T(e,"style",N[11]),U[0]&2098176&&ze(e,"hasError",N[10]),U[0]&2097280&&ze(e,"multiSelect",N[7]),U[0]&2097664&&ze(e,"disabled",N[9]),U[0]&2097154&&ze(e,"focused",N[1])},i(N){m||(X(_),X(w),X(O),X(R),X(B),m=!0)},o(N){te(_),te(w),te(O),te(R),te(B),m=!1},d(N){N&&le(e),b&&b.d(),_&&_.d(),w&&w.d(),n[82](null),O&&O.d(),R&&R.d(),D&&D.d(),F&&F.d(),B&&B.d(),H&&H.d(),L&&L.d(),n[85](null),p=!1,rn(y)}}}function X2(n){return n.map((e,t)=>({index:t,value:e,label:`${e}`}))}function UW(n,e,t){let r,i,o,s,a,l,u,c;const f=hd();let{id:d=null}=e,{container:g=void 0}=e,{input:h=void 0}=e,{isMulti:v=!1}=e,{multiFullItemClearable:m=!1}=e,{isDisabled:p=!1}=e,{isCreatable:y=!1}=e,{isFocused:b=!1}=e,{value:_=null}=e,{filterText:w=""}=e,{placeholder:S="Select..."}=e,{placeholderAlwaysShow:E=!1}=e,{items:O=null}=e,{itemFilter:R=(ce,lt,Ht)=>`${ce}`.toLowerCase().includes(lt.toLowerCase())}=e,{groupBy:D=void 0}=e,{groupFilter:F=ce=>ce}=e,{isGroupHeaderSelectable:B=!1}=e,{getGroupHeaderLabel:H=ce=>ce[L]||ce.id}=e,{labelIdentifier:L="label"}=e,{getOptionLabel:N=(ce,lt)=>ce.isCreator?`Create "${lt}"`:ce[L]}=e,{optionIdentifier:U="value"}=e,{loadOptions:$=void 0}=e,{hasError:Z=!1}=e,{containerStyles:A=""}=e,{getSelectionLabel:P=ce=>ce?ce[L]:null}=e,{createGroupHeaderItem:V=ce=>({value:ce,label:ce})}=e,{createItem:W=ce=>({value:ce,label:ce})}=e;const z=()=>r;let{isSearchable:I=!0}=e,{inputStyles:M=""}=e,{isClearable:J=!0}=e,{isWaiting:q=!1}=e,{listPlacement:Q="auto"}=e,{listOpen:ae=!1}=e,{isVirtualList:he=!1}=e,{loadOptionsInterval:Pe=300}=e,{noOptionsMessage:Fe="No options"}=e,{hideEmptyState:Ae=!1}=e,{inputAttributes:ye={}}=e,{listAutoWidth:Me=!0}=e,{itemHeight:xe=40}=e,{Icon:fe=void 0}=e,{iconProps:ve={}}=e,{showChevron:de=!1}=e,{showIndicator:Ie=!1}=e,{containerClasses:De=""}=e,{indicatorSvg:He=void 0}=e,{listOffset:Xe=5}=e,{ClearIcon:mt=DW}=e,{Item:be=KP}=e,{List:Y=SW}=e,{Selection:x=kW}=e,{MultiSelection:C=PW}=e,{VirtualList:k=NW}=e;function K(ce){if(ce.loadOptions&&ce.filterText.length>0)return;if(!ce.items)return[];ce.items&&ce.items.length>0&&typeof ce.items[0]!="object"&&(ce.items=X2(ce.items));let lt=ce.items.filter(Ht=>{let Xn=R(N(Ht,ce.filterText),ce.filterText,Ht);return Xn&&ce.isMulti&&ce.value&&Array.isArray(ce.value)&&(Xn=!ce.value.some(Lr=>Lr[ce.optionIdentifier]===Ht[ce.optionIdentifier])),Xn});return ce.groupBy&&(lt=ft(lt)),ce.isCreatable&&(lt=ie(lt,ce.filterText)),lt}function ie(ce,lt){if(lt.length===0)return ce;const Ht=W(lt);return ce[0]&&lt===ce[0][L]?ce:(Ht.isCreator=!0,[...ce,Ht])}let{selectedValue:pe=null}=e,ge,Qe,G,se,re,_e;const Ee=LW(async()=>{t(4,q=!0);let ce=await $(w).catch(lt=>{console.warn("svelte-select loadOptions error :>> ",lt),f("error",{type:"loadOptions",details:lt})});ce&&!ce.cancelled&&(ce?(ce&&ce.length>0&&typeof ce[0]!="object"&&(ce=X2(ce)),t(81,r=[...ce]),f("loaded",{items:r})):t(81,r=[]),y&&t(81,r=ie(r,w)),t(4,q=!1),t(1,b=!0),t(5,ae=!0))},Pe);function We(){typeof _=="string"?t(2,_={[U]:_,label:_}):v&&Array.isArray(_)&&_.length>0&&t(2,_=_.map(ce=>typeof ce=="string"?{value:ce,label:ce}:ce))}let it;function ct(){t(31,it=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},ye)),d&&t(31,it.id=d,it),I||t(31,it.readonly=!0,it)}function ft(ce){const lt=[],Ht={};ce.forEach(Lr=>{const pn=D(Lr);lt.includes(pn)||(lt.push(pn),Ht[pn]=[],pn&&Ht[pn].push(Object.assign(V(pn,Lr),{id:pn,isGroupHeader:!0,isSelectable:B}))),Ht[pn].push(Object.assign({isGroupItem:!!pn},Lr))});const Xn=[];return F(lt).forEach(Lr=>{Xn.push(...Ht[Lr])}),Xn}function vt(){if(v){JSON.stringify(_)!==JSON.stringify(Qe)&&Ut()&&f("select",_);return}(!Qe||JSON.stringify(_[U])!==JSON.stringify(Qe[U]))&&f("select",_)}function Dt(){b||ae?At():h&&h.blur()}function ot(){_&&(Array.isArray(_)?t(2,_=[..._]):t(2,_=[_]))}function Et(){_&&t(2,_=null)}function yt(){w.length!==0&&(t(1,b=!0),t(5,ae=!0),$?Ee():(t(5,ae=!0),v&&t(30,ge=void 0)))}gk(async()=>{t(77,Qe=_),t(78,G=w),t(79,se=b),t(80,re=v)});function Ut(){let ce=!0;if(_){const lt=[],Ht=[];_.forEach(Xn=>{lt.includes(Xn[U])?ce=!1:(lt.push(Xn[U]),Ht.push(Xn))}),ce||t(2,_=Ht)}return ce}function we(ce){let lt=ce?ce[U]:_[U];return O.find(Ht=>Ht[U]===lt)}function $e(ce){!ce||ce.length===0||ce.some(lt=>typeof lt!="object")||!_||(v?_.some(lt=>!lt||!lt[U]):!_[U])||(Array.isArray(_)?t(2,_=_.map(lt=>we(lt)||lt)):t(2,_=we()||_))}function Tt(ce){const{detail:lt}=ce,Ht=_[lt?lt.i:_.length-1];_.length===1?t(2,_=void 0):t(2,_=_.filter(Xn=>Xn!==Ht)),f("clear",Ht)}function Ct(ce){if(!!b)switch(ce.key){case"ArrowDown":ce.preventDefault(),t(5,ae=!0),t(30,ge=void 0);break;case"ArrowUp":ce.preventDefault(),t(5,ae=!0),t(30,ge=void 0);break;case"Tab":ae||t(1,b=!1);break;case"Backspace":if(!v||w.length>0)return;if(v&&_&&_.length>0){if(Tt(ge!==void 0?ge:_.length-1),ge===0||ge===void 0)break;t(30,ge=_.length>ge?ge-1:void 0)}break;case"ArrowLeft":if(!v||w.length>0)return;ge===void 0?t(30,ge=_.length-1):_.length>ge&&ge!==0&&t(30,ge-=1);break;case"ArrowRight":if(!v||w.length>0||ge===void 0)return;ge===_.length-1?t(30,ge=void 0):ge<_.length-1&&t(30,ge+=1);break}}function At(){t(1,b=!0),h&&h.focus()}function Lt(ce){if(!g)return;const lt=ce.path&&ce.path.length>0?ce.path[0]:ce.target;g.contains(lt)||g.contains(ce.relatedTarget)||(t(1,b=!1),t(5,ae=!1),t(30,ge=void 0),h&&h.blur())}function Zt(){p||(t(1,b=!0),t(5,ae=!ae))}function On(){t(2,_=void 0),t(5,ae=!1),f("clear",_),At()}Nr(()=>{b&&h&&h.focus()});function It(ce){const{detail:lt}=ce;if(lt){t(3,w="");const Ht=Object.assign({},lt);(!Ht.isGroupHeader||Ht.isSelectable)&&(v?t(2,_=_?_.concat([Ht]):[Ht]):t(2,_=Ht),t(2,_),setTimeout(()=>{t(5,ae=!1),t(30,ge=void 0)}))}}function Kn(ce){const{detail:lt}=ce;v?(t(2,_=_||[]),t(2,_=[..._,W(lt)])):t(2,_=W(lt)),f("itemCreated",lt),t(3,w=""),t(5,ae=!1),t(30,ge=void 0)}function ti(){t(3,w=""),t(5,ae=!1)}let{ariaValues:Xt=ce=>`Option ${ce}, selected.`}=e,{ariaListOpen:et=(ce,lt)=>`You are currently focused on option ${ce}. There are ${lt} results available.`}=e,{ariaFocused:bt=()=>"Select is focused, type to refine list, press down to open the menu."}=e;function Cr(){let ce;return v&&_.length>0?ce=_.map(lt=>P(lt)).join(", "):ce=P(_),Xt(ce)}function Dr(){if(!b||!r||r.length===0)return"";let ce=r[_e];if(ae&&ce){let lt=P(ce),Ht=r?r.length:0;return et(lt,Ht)}else return bt()}function Pi(ce){wt[ce?"unshift":"push"](()=>{h=ce,t(6,h)})}function $s(){w=this.value,t(3,w)}function hi(ce){_e=ce,t(28,_e)}function up(ce){wt[ce?"unshift":"push"](()=>{g=ce,t(0,g)})}return n.$$set=ce=>{"id"in ce&&t(46,d=ce.id),"container"in ce&&t(0,g=ce.container),"input"in ce&&t(6,h=ce.input),"isMulti"in ce&&t(7,v=ce.isMulti),"multiFullItemClearable"in ce&&t(8,m=ce.multiFullItemClearable),"isDisabled"in ce&&t(9,p=ce.isDisabled),"isCreatable"in ce&&t(47,y=ce.isCreatable),"isFocused"in ce&&t(1,b=ce.isFocused),"value"in ce&&t(2,_=ce.value),"filterText"in ce&&t(3,w=ce.filterText),"placeholder"in ce&&t(48,S=ce.placeholder),"placeholderAlwaysShow"in ce&&t(49,E=ce.placeholderAlwaysShow),"items"in ce&&t(50,O=ce.items),"itemFilter"in ce&&t(51,R=ce.itemFilter),"groupBy"in ce&&t(52,D=ce.groupBy),"groupFilter"in ce&&t(53,F=ce.groupFilter),"isGroupHeaderSelectable"in ce&&t(54,B=ce.isGroupHeaderSelectable),"getGroupHeaderLabel"in ce&&t(55,H=ce.getGroupHeaderLabel),"labelIdentifier"in ce&&t(56,L=ce.labelIdentifier),"getOptionLabel"in ce&&t(57,N=ce.getOptionLabel),"optionIdentifier"in ce&&t(58,U=ce.optionIdentifier),"loadOptions"in ce&&t(59,$=ce.loadOptions),"hasError"in ce&&t(10,Z=ce.hasError),"containerStyles"in ce&&t(11,A=ce.containerStyles),"getSelectionLabel"in ce&&t(12,P=ce.getSelectionLabel),"createGroupHeaderItem"in ce&&t(60,V=ce.createGroupHeaderItem),"createItem"in ce&&t(61,W=ce.createItem),"isSearchable"in ce&&t(13,I=ce.isSearchable),"inputStyles"in ce&&t(14,M=ce.inputStyles),"isClearable"in ce&&t(15,J=ce.isClearable),"isWaiting"in ce&&t(4,q=ce.isWaiting),"listPlacement"in ce&&t(63,Q=ce.listPlacement),"listOpen"in ce&&t(5,ae=ce.listOpen),"isVirtualList"in ce&&t(64,he=ce.isVirtualList),"loadOptionsInterval"in ce&&t(65,Pe=ce.loadOptionsInterval),"noOptionsMessage"in ce&&t(66,Fe=ce.noOptionsMessage),"hideEmptyState"in ce&&t(67,Ae=ce.hideEmptyState),"inputAttributes"in ce&&t(16,ye=ce.inputAttributes),"listAutoWidth"in ce&&t(68,Me=ce.listAutoWidth),"itemHeight"in ce&&t(69,xe=ce.itemHeight),"Icon"in ce&&t(17,fe=ce.Icon),"iconProps"in ce&&t(18,ve=ce.iconProps),"showChevron"in ce&&t(19,de=ce.showChevron),"showIndicator"in ce&&t(20,Ie=ce.showIndicator),"containerClasses"in ce&&t(21,De=ce.containerClasses),"indicatorSvg"in ce&&t(22,He=ce.indicatorSvg),"listOffset"in ce&&t(70,Xe=ce.listOffset),"ClearIcon"in ce&&t(23,mt=ce.ClearIcon),"Item"in ce&&t(71,be=ce.Item),"List"in ce&&t(24,Y=ce.List),"Selection"in ce&&t(25,x=ce.Selection),"MultiSelection"in ce&&t(26,C=ce.MultiSelection),"VirtualList"in ce&&t(72,k=ce.VirtualList),"selectedValue"in ce&&t(73,pe=ce.selectedValue),"ariaValues"in ce&&t(74,Xt=ce.ariaValues),"ariaListOpen"in ce&&t(75,et=ce.ariaListOpen),"ariaFocused"in ce&&t(76,bt=ce.ariaFocused)},n.$$.update=()=>{n.$$.dirty[0]&140|n.$$.dirty[1]&405340160&&t(81,r=K({loadOptions:$,filterText:w,items:O,value:_,isMulti:v,optionIdentifier:U,groupBy:D,isCreatable:y})),n.$$.dirty[2]&2048&&pe&&console.warn("selectedValue is no longer used. Please use value instead."),n.$$.dirty[1]&524288&&$e(O),n.$$.dirty[0]&4&&_&&We(),n.$$.dirty[0]&73728&&(ye||!I)&&ct(),n.$$.dirty[0]&128|n.$$.dirty[2]&262144&&(v&&ot(),re&&!v&&Et()),n.$$.dirty[0]&132&&v&&_&&_.length>1&&Ut(),n.$$.dirty[0]&4&&_&&vt(),n.$$.dirty[0]&132|n.$$.dirty[2]&32768&&!_&&v&&Qe&&f("select",_),n.$$.dirty[0]&2|n.$$.dirty[2]&131072&&b!==se&&Dt(),n.$$.dirty[0]&8|n.$$.dirty[2]&65536&&w!==G&&yt(),n.$$.dirty[0]&12&&t(29,i=_&&w.length===0),n.$$.dirty[0]&536904208&&t(37,o=i&&J&&!p&&!q),n.$$.dirty[0]&132|n.$$.dirty[1]&393216&&t(36,s=E&&v?S:_?"":S),n.$$.dirty[0]&132&&t(35,a=v&&_&&_.length>0),n.$$.dirty[0]&141|n.$$.dirty[1]&218103808|n.$$.dirty[2]&526326&&t(34,l={Item:be,filterText:w,optionIdentifier:U,noOptionsMessage:Fe,hideEmptyState:Ae,isVirtualList:he,VirtualList:k,value:_,isMulti:v,getGroupHeaderLabel:H,items:r,itemHeight:xe,getOptionLabel:N,listPlacement:Q,parent:g,listAutoWidth:Me,listOffset:Xe}),n.$$.dirty[0]&132&&t(33,u=_?Cr():""),n.$$.dirty[0]&268435490|n.$$.dirty[2]&524288&&t(32,c=Dr())},[g,b,_,w,q,ae,h,v,m,p,Z,A,P,I,M,J,ye,fe,ve,de,Ie,De,He,mt,Y,x,C,On,_e,i,ge,it,c,u,l,a,s,o,Tt,Ct,At,Lt,Zt,It,Kn,ti,d,y,S,E,O,R,D,F,B,H,L,N,U,$,V,W,z,Q,he,Pe,Fe,Ae,Me,xe,Xe,be,k,pe,Xt,et,bt,Qe,G,se,re,r,Pi,$s,hi,up]}class ys extends rt{constructor(e){super(),nt(this,e,UW,FW,on,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function VW(n){let e,t,r,i,o,s,a,l,u,c,f,d,g,h,v,m,p,y,b,_,w,S,E,O,R,D,F,B,H,L,N,U,$,Z,A;function P(he){n[18](he)}let V={containerClasses:"jse-filter-path",showIndicator:!0,items:n[6]};n[0]!==void 0&&(V.value=n[0]),a=new ys({props:V}),wt.push(()=>Ir(a,"value",P));function W(he){n[19](he)}let z={containerClasses:"jse-filter-relation",showIndicator:!0,items:n[8]};n[1]!==void 0&&(z.value=n[1]),c=new ys({props:z}),wt.push(()=>Ir(c,"value",W));function I(he){n[21](he)}let M={containerClasses:"jse-sort-path",showIndicator:!0,items:n[6]};n[3]!==void 0&&(M.value=n[3]),_=new ys({props:M}),wt.push(()=>Ir(_,"value",I));function J(he){n[22](he)}let q={containerClasses:"jse-sort-direction",showIndicator:!0,items:n[9]};n[4]!==void 0&&(q.value=n[4]),E=new ys({props:q}),wt.push(()=>Ir(E,"value",J));function Q(he){n[23](he)}let ae={containerClasses:"jse-projection-paths",isMulti:!0,showIndicator:!0,items:n[7]};return n[5]!==void 0&&(ae.value=n[5]),N=new ys({props:ae}),wt.push(()=>Ir(N,"value",Q)),{c(){e=ee("table"),t=ee("tr"),r=ee("th"),r.textContent="Filter",i=me(),o=ee("td"),s=ee("div"),Te(a.$$.fragment),u=me(),Te(c.$$.fragment),d=me(),g=ee("input"),h=me(),v=ee("tr"),m=ee("th"),m.textContent="Sort",p=me(),y=ee("td"),b=ee("div"),Te(_.$$.fragment),S=me(),Te(E.$$.fragment),R=me(),D=ee("tr"),F=ee("th"),F.textContent="Pick",B=me(),H=ee("td"),L=ee("div"),Te(N.$$.fragment),T(r,"class","svelte-1pbg0mn"),T(g,"class","jse-filter-value svelte-1pbg0mn"),T(s,"class","jse-horizontal svelte-1pbg0mn"),T(m,"class","svelte-1pbg0mn"),T(b,"class","jse-horizontal svelte-1pbg0mn"),T(F,"class","svelte-1pbg0mn"),T(L,"class","jse-horizontal svelte-1pbg0mn"),T(e,"class","jse-transform-wizard svelte-1pbg0mn")},m(he,Pe){ue(he,e,Pe),j(e,t),j(t,r),j(t,i),j(t,o),j(o,s),ke(a,s,null),j(s,u),ke(c,s,null),j(s,d),j(s,g),Nn(g,n[2]),j(e,h),j(e,v),j(v,m),j(v,p),j(v,y),j(y,b),ke(_,b,null),j(b,S),ke(E,b,null),j(e,R),j(e,D),j(D,F),j(D,B),j(D,H),j(H,L),ke(N,L,null),$=!0,Z||(A=Ce(g,"input",n[20]),Z=!0)},p(he,Pe){const Fe={};Pe[0]&64&&(Fe.items=he[6]),!l&&Pe[0]&1&&(l=!0,Fe.value=he[0],qr(()=>l=!1)),a.$set(Fe);const Ae={};!f&&Pe[0]&2&&(f=!0,Ae.value=he[1],qr(()=>f=!1)),c.$set(Ae),Pe[0]&4&&g.value!==he[2]&&Nn(g,he[2]);const ye={};Pe[0]&64&&(ye.items=he[6]),!w&&Pe[0]&8&&(w=!0,ye.value=he[3],qr(()=>w=!1)),_.$set(ye);const Me={};!O&&Pe[0]&16&&(O=!0,Me.value=he[4],qr(()=>O=!1)),E.$set(Me);const xe={};Pe[0]&128&&(xe.items=he[7]),!U&&Pe[0]&32&&(U=!0,xe.value=he[5],qr(()=>U=!1)),N.$set(xe)},i(he){$||(X(a.$$.fragment,he),X(c.$$.fragment,he),X(_.$$.fragment,he),X(E.$$.fragment,he),X(N.$$.fragment,he),$=!0)},o(he){te(a.$$.fragment,he),te(c.$$.fragment,he),te(_.$$.fragment,he),te(E.$$.fragment,he),te(N.$$.fragment,he),$=!1},d(he){he&&le(e),Oe(a),Oe(c),Oe(_),Oe(E),Oe(N),Z=!1,A()}}}function qW(n,e,t){let r,i,o,s,a;var l,u,c,f,d,g,h;const v=Sr("jsoneditor:TransformWizard");let{json:m}=e,{queryOptions:p={}}=e,{onChange:y}=e;const b=["==","!=","<","<=",">",">="].map(I=>({value:I,label:I})),_=[{value:"asc",label:"ascending"},{value:"desc",label:"descending"}];let w=!((l=p==null?void 0:p.filter)===null||l===void 0)&&l.path?F(p.filter.path):null,S=!((u=p==null?void 0:p.filter)===null||u===void 0)&&u.relation?b.find(I=>I.value===p.filter.relation):null,E=((c=p==null?void 0:p.filter)===null||c===void 0?void 0:c.value)||"",O=!((f=p==null?void 0:p.sort)===null||f===void 0)&&f.path?F(p.sort.path):null,R=!((d=p==null?void 0:p.sort)===null||d===void 0)&&d.direction?_.find(I=>I.value===p.sort.direction):null,D=!((g=p==null?void 0:p.projection)===null||g===void 0)&&g.paths?p.projection.paths.map(F):null;function F(I){return{value:I,label:gn(I)?"(whole item)":Jo(I)}}function B(I){var M;Yt((M=p==null?void 0:p.filter)===null||M===void 0?void 0:M.path,I)||(v("changeFilterPath",I),t(10,p=gi(p,["filter","path"],I,!0)),y(p))}function H(I){var M;Yt((M=p==null?void 0:p.filter)===null||M===void 0?void 0:M.relation,I)||(v("changeFilterRelation",I),t(10,p=gi(p,["filter","relation"],I,!0)),y(p))}function L(I){var M;Yt((M=p==null?void 0:p.filter)===null||M===void 0?void 0:M.value,I)||(v("changeFilterValue",I),t(10,p=gi(p,["filter","value"],I,!0)),y(p))}function N(I){var M;Yt((M=p==null?void 0:p.sort)===null||M===void 0?void 0:M.path,I)||(v("changeSortPath",I),t(10,p=gi(p,["sort","path"],I,!0)),y(p))}function U(I){var M;Yt((M=p==null?void 0:p.sort)===null||M===void 0?void 0:M.direction,I)||(v("changeSortDirection",I),t(10,p=gi(p,["sort","direction"],I,!0)),y(p))}function $(I){var M;Yt((M=p==null?void 0:p.projection)===null||M===void 0?void 0:M.paths,I)||(v("changeProjectionPaths",I),t(10,p=gi(p,["projection","paths"],I,!0)),y(p))}function Z(I){w=I,t(0,w)}function A(I){S=I,t(1,S)}function P(){E=this.value,t(2,E)}function V(I){O=I,t(3,O)}function W(I){R=I,t(4,R)}function z(I){D=I,t(5,D)}return n.$$set=I=>{"json"in I&&t(11,m=I.json),"queryOptions"in I&&t(10,p=I.queryOptions),"onChange"in I&&t(12,y=I.onChange)},n.$$.update=()=>{n.$$.dirty[0]&2048&&t(17,r=Array.isArray(m)),n.$$.dirty[0]&133120&&t(16,i=r?rg(m):[]),n.$$.dirty[0]&133120&&t(15,o=r?rg(m,!0):[]),n.$$.dirty[0]&65536&&t(6,s=i.map(F)),n.$$.dirty[0]&32768&&t(7,a=o?o.map(F):[]),n.$$.dirty[0]&17472&&!(t(14,h=p==null?void 0:p.filter)===null||h===void 0)&&h.path&&s.find(I=>{var M;return Yt(I.value,(M=p==null?void 0:p.filter)===null||M===void 0?void 0:M.path)}),n.$$.dirty[0]&1&&B((w==null?void 0:w.value)||null),n.$$.dirty[0]&2&&H((S==null?void 0:S.value)||null),n.$$.dirty[0]&4&&L(E||null),n.$$.dirty[0]&8&&N((O==null?void 0:O.value)||null),n.$$.dirty[0]&16&&U((R==null?void 0:R.value)||null),n.$$.dirty[0]&32&&$(D?D.map(I=>I.value):null)},[w,S,E,O,R,D,s,a,b,_,p,m,y,l,h,o,i,r,Z,A,P,V,W,z]}class HW extends rt{constructor(e){super(),nt(this,e,qW,VW,Nt,{json:11,queryOptions:10,onChange:12},null,[-1,-1])}}function $2(n,e,t){const r=n.slice();return r[5]=e[t],r}function zW(n){let e,t;return e=new Ot({props:{data:Qh}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p:Ne,i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function WW(n){let e,t;return e=new Ot({props:{data:Zh}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p:Ne,i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function eS(n){let e,t,r,i,o=n[5].name+"",s,a,l,u,c,f;const d=[WW,zW],g=[];function h(m,p){return m[5].id===m[0]?0:1}t=h(n),r=g[t]=d[t](n);function v(){return n[4](n[5])}return{c(){e=ee("button"),r.c(),i=me(),s=Ue(o),a=me(),T(e,"type","button"),T(e,"class","jse-query-language svelte-ifjr8a"),T(e,"title",l=`Select ${n[5].name} as query language`),ze(e,"selected",n[5].id===n[0])},m(m,p){ue(m,e,p),g[t].m(e,null),j(e,i),j(e,s),j(e,a),u=!0,c||(f=Ce(e,"click",v),c=!0)},p(m,p){n=m;let y=t;t=h(n),t===y?g[t].p(n,p):(Ve(),te(g[y],1,1,()=>{g[y]=null}),qe(),r=g[t],r?r.p(n,p):(r=g[t]=d[t](n),r.c()),X(r,1),r.m(e,i)),(!u||p&2)&&o!==(o=n[5].name+"")&&_t(s,o),(!u||p&2&&l!==(l=`Select ${n[5].name} as query language`))&&T(e,"title",l),p&3&&ze(e,"selected",n[5].id===n[0])},i(m){u||(X(r),u=!0)},o(m){te(r),u=!1},d(m){m&&le(e),g[t].d(),c=!1,f()}}}function KW(n){let e,t,r,i=n[1],o=[];for(let a=0;a<i.length;a+=1)o[a]=eS($2(n,i,a));const s=a=>te(o[a],1,1,()=>{o[a]=null});return{c(){e=ee("div"),t=ee("div");for(let a=0;a<o.length;a+=1)o[a].c();T(t,"class","jse-select-query-language-container svelte-ifjr8a"),T(e,"class","jse-select-query-language svelte-ifjr8a")},m(a,l){ue(a,e,l),j(e,t);for(let u=0;u<o.length;u+=1)o[u].m(t,null);r=!0},p(a,[l]){if(l&7){i=a[1];let u;for(u=0;u<i.length;u+=1){const c=$2(a,i,u);o[u]?(o[u].p(c,l),X(o[u],1)):(o[u]=eS(c),o[u].c(),X(o[u],1),o[u].m(t,null))}for(Ve(),u=i.length;u<o.length;u+=1)s(u);qe()}},i(a){if(!r){for(let l=0;l<i.length;l+=1)X(o[l]);r=!0}},o(a){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)te(o[l]);r=!1},d(a){a&&le(e),xn(o,a)}}}function GW(n,e,t){let{queryLanguages:r}=e,{queryLanguageId:i}=e,{onChangeQueryLanguage:o}=e;function s(l){t(0,i=l),o(l)}const a=l=>s(l.id);return n.$$set=l=>{"queryLanguages"in l&&t(1,r=l.queryLanguages),"queryLanguageId"in l&&t(0,i=l.queryLanguageId),"onChangeQueryLanguage"in l&&t(3,o=l.onChangeQueryLanguage)},[i,r,s,o,a]}class JW extends rt{constructor(e){super(),nt(this,e,GW,KW,on,{queryLanguages:1,queryLanguageId:0,onChangeQueryLanguage:3})}}function tS(n){let e,t,r,i,o;return t=new Ot({props:{data:uL}}),{c(){e=ee("button"),Te(t.$$.fragment),T(e,"type","button"),T(e,"class","jse-config svelte-1djqugc"),T(e,"title","Select a query language")},m(s,a){ue(s,e,a),ke(t,e,null),n[6](e),r=!0,i||(o=Ce(e,"click",n[3]),i=!0)},p:Ne,i(s){r||(X(t.$$.fragment,s),r=!0)},o(s){te(t.$$.fragment,s),r=!1},d(s){s&&le(e),Oe(t),n[6](null),i=!1,o()}}}function YW(n){let e,t,r,i,o,s,a,l,u,c=n[0].length>1&&tS(n);return s=new Ot({props:{data:Bu}}),{c(){e=ee("div"),t=ee("div"),t.textContent="Transform",r=me(),c&&c.c(),i=me(),o=ee("button"),Te(s.$$.fragment),T(t,"class","jse-title svelte-1djqugc"),T(o,"type","button"),T(o,"class","jse-close svelte-1djqugc"),T(e,"class","jse-header svelte-1djqugc")},m(f,d){ue(f,e,d),j(e,t),j(e,r),c&&c.m(e,null),j(e,i),j(e,o),ke(s,o,null),a=!0,l||(u=Ce(o,"click",n[2]),l=!0)},p(f,[d]){f[0].length>1?c?(c.p(f,d),d&1&&X(c,1)):(c=tS(f),c.c(),X(c,1),c.m(e,i)):c&&(Ve(),te(c,1,1,()=>{c=null}),qe())},i(f){a||(X(c),X(s.$$.fragment,f),a=!0)},o(f){te(c),te(s.$$.fragment,f),a=!1},d(f){f&&le(e),c&&c.d(),Oe(s),l=!1,u()}}}function QW(n,e,t){let{queryLanguages:r}=e,{queryLanguageId:i}=e,{onChangeQueryLanguage:o}=e,s,a;const{close:l}=ur("simple-modal"),{openAbsolutePopup:u,closeAbsolutePopup:c}=ur("absolute-popup");function f(){a=u(JW,{queryLanguages:r,queryLanguageId:i,onChangeQueryLanguage:h=>{c(a),o(h)}},{position:"bottom",offsetTop:-2,offsetLeft:0,anchor:s,closeOnOuterClick:!0})}function d(g){wt[g?"unshift":"push"](()=>{s=g,t(1,s)})}return n.$$set=g=>{"queryLanguages"in g&&t(0,r=g.queryLanguages),"queryLanguageId"in g&&t(4,i=g.queryLanguageId),"onChangeQueryLanguage"in g&&t(5,o=g.onChangeQueryLanguage)},[r,s,l,f,i,o,d]}class ZW extends rt{constructor(e){super(),nt(this,e,QW,YW,Nt,{queryLanguages:0,queryLanguageId:4,onChangeQueryLanguage:5})}}function nS(n){let e,t,r,i,o;const s=[$W,XW],a=[];function l(u,c){return c[0]&512&&(e=null),e==null&&(e=!!Array.isArray(u[9])),e?0:1}return t=l(n,[-1,-1]),r=a[t]=s[t](n),{c(){r.c(),i=xt()},m(u,c){a[t].m(u,c),ue(u,i,c),o=!0},p(u,c){let f=t;t=l(u,c),t===f?a[t].p(u,c):(Ve(),te(a[f],1,1,()=>{a[f]=null}),qe(),r=a[t],r?r.p(u,c):(r=a[t]=s[t](u),r.c()),X(r,1),r.m(i.parentNode,i))},i(u){o||(X(r),o=!0)},o(u){te(r),o=!1},d(u){a[t].d(u),u&&le(i)}}}function XW(n){let e;return{c(){e=Ue("(Only available for arrays, not for objects)")},m(t,r){ue(t,e,r)},p:Ne,i:Ne,o:Ne,d(t){t&&le(e)}}}function $W(n){let e,t;return e=new HW({props:{queryOptions:n[7],json:n[9],onChange:n[16]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i[0]&128&&(o.queryOptions=r[7]),i[0]&512&&(o.json=r[9]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function rS(n){let e,t;return e=new qv({props:{externalContent:n[14],readOnly:!0,mainMenuBar:!1,navigationBar:!1,escapeControlCharacters:n[2],escapeUnicodeCharacters:n[3],onRenderValue:n[5],onError:console.error,onChange:Gt,onFocus:Gt,onBlur:Gt,onSortModal:Gt,onTransformModal:Gt,onClassName:n[6]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i[0]&16384&&(o.externalContent=r[14]),i[0]&4&&(o.escapeControlCharacters=r[2]),i[0]&8&&(o.escapeUnicodeCharacters=r[3]),i[0]&32&&(o.onRenderValue=r[5]),i[0]&64&&(o.onClassName=r[6]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function eK(n){let e,t=n[12].toString()+"",r;return{c(){e=ee("div"),r=Ue(t),T(e,"class","jse-preview jse-error svelte-mr4kda")},m(i,o){ue(i,e,o),j(e,r)},p(i,o){o[0]&4096&&t!==(t=i[12].toString()+"")&&_t(r,t)},i:Ne,o:Ne,d(i){i&&le(e)}}}function tK(n){let e,t;return e=new qv({props:{externalContent:n[13],readOnly:!0,mainMenuBar:!1,navigationBar:!1,escapeControlCharacters:n[2],escapeUnicodeCharacters:n[3],onRenderValue:n[5],onError:console.error,onChange:Gt,onFocus:Gt,onBlur:Gt,onSortModal:Gt,onTransformModal:Gt,onClassName:n[6]}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i[0]&8192&&(o.externalContent=r[13]),i[0]&4&&(o.escapeControlCharacters=r[2]),i[0]&8&&(o.escapeUnicodeCharacters=r[3]),i[0]&32&&(o.onRenderValue=r[5]),i[0]&64&&(o.onClassName=r[6]),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function nK(n){let e,t,r,i,o,s,a,l,u=n[15](n[0]).description+"",c,f,d,g,h,v,m,p,y,b,_,w,S,E,O,R,D,F,B,H,L,N,U,$,Z,A,P,V,W,z,I,M,J,q,Q,ae,he,Pe,Fe;e=new ZW({props:{queryLanguages:n[4],queryLanguageId:n[0],onChangeQueryLanguage:n[21]}}),b=new Ot({props:{data:n[10]?Fi:Do}});let Ae=n[10]&&nS(n);U=new Ot({props:{data:n[11]?Fi:Do}});let ye=n[11]&&rS(n);const Me=[tK,eK],xe=[];function fe(ve,de){return ve[12]?1:0}return z=fe(n),I=xe[z]=Me[z](n),{c(){Te(e.$$.fragment),t=me(),r=ee("div"),i=ee("div"),o=ee("div"),s=ee("div"),s.innerHTML='<div class="jse-label-inner svelte-mr4kda">Language</div>',a=me(),l=ee("div"),c=me(),f=ee("div"),f.innerHTML='<div class="jse-label-inner svelte-mr4kda">Path</div>',d=me(),g=ee("input"),v=me(),m=ee("div"),p=ee("div"),y=ee("button"),Te(b.$$.fragment),_=Ue(`
                Wizard`),w=me(),Ae&&Ae.c(),S=me(),E=ee("div"),E.innerHTML='<div class="jse-label-inner svelte-mr4kda">Query</div>',O=me(),R=ee("textarea"),D=me(),F=ee("div"),B=ee("div"),H=ee("div"),L=ee("div"),N=ee("button"),Te(U.$$.fragment),$=Ue(`
                  Original`),Z=me(),ye&&ye.c(),A=me(),P=ee("div"),V=ee("div"),V.innerHTML='<div class="jse-label-inner svelte-mr4kda">Preview</div>',W=me(),I.c(),M=me(),J=ee("div"),q=ee("button"),Q=Ue("Transform"),T(s,"class","jse-label svelte-mr4kda"),T(l,"class","jse-description svelte-mr4kda"),T(f,"class","jse-label svelte-mr4kda"),T(g,"class","jse-path svelte-mr4kda"),T(g,"type","text"),g.readOnly=!0,T(g,"title","Selected path"),g.value=h=gn(n[1])?"(whole document)":Jo(n[1]),T(y,"type","button"),T(y,"class","svelte-mr4kda"),T(p,"class","jse-label-inner svelte-mr4kda"),T(m,"class","jse-label svelte-mr4kda"),T(E,"class","jse-label svelte-mr4kda"),T(R,"class","jse-query svelte-mr4kda"),T(R,"spellcheck","false"),R.value=n[8],T(o,"class","jse-query-contents svelte-mr4kda"),T(N,"type","button"),T(N,"class","svelte-mr4kda"),T(L,"class","jse-label-inner svelte-mr4kda"),T(H,"class","jse-label svelte-mr4kda"),T(B,"class","jse-original-data svelte-mr4kda"),ze(B,"jse-hide",!n[11]),T(V,"class","jse-label svelte-mr4kda"),T(P,"class","jse-preview-data svelte-mr4kda"),T(F,"class","jse-data-contents svelte-mr4kda"),ze(F,"jse-hide-original-data",!n[11]),T(i,"class","jse-main-contents svelte-mr4kda"),T(q,"type","button"),T(q,"class","jse-primary svelte-mr4kda"),q.disabled=ae=!!n[12],T(J,"class","jse-actions svelte-mr4kda"),T(r,"class","jse-contents svelte-mr4kda")},m(ve,de){ke(e,ve,de),ue(ve,t,de),ue(ve,r,de),j(r,i),j(i,o),j(o,s),j(o,a),j(o,l),l.innerHTML=u,j(o,c),j(o,f),j(o,d),j(o,g),j(o,v),j(o,m),j(m,p),j(p,y),ke(b,y,null),j(y,_),j(o,w),Ae&&Ae.m(o,null),j(o,S),j(o,E),j(o,O),j(o,R),j(i,D),j(i,F),j(F,B),j(B,H),j(H,L),j(L,N),ke(U,N,null),j(N,$),j(B,Z),ye&&ye.m(B,null),j(F,A),j(F,P),j(P,V),j(P,W),xe[z].m(P,null),j(r,M),j(r,J),j(J,q),j(q,Q),he=!0,Pe||(Fe=[Ce(y,"click",n[19]),Ce(R,"input",n[17]),Ce(N,"click",n[20]),Ce(q,"click",n[18]),xu(iK.call(null,q))],Pe=!0)},p(ve,de){const Ie={};de[0]&16&&(Ie.queryLanguages=ve[4]),de[0]&1&&(Ie.queryLanguageId=ve[0]),e.$set(Ie),(!he||de[0]&1)&&u!==(u=ve[15](ve[0]).description+"")&&(l.innerHTML=u),(!he||de[0]&2&&h!==(h=gn(ve[1])?"(whole document)":Jo(ve[1]))&&g.value!==h)&&(g.value=h);const De={};de[0]&1024&&(De.data=ve[10]?Fi:Do),b.$set(De),ve[10]?Ae?(Ae.p(ve,de),de[0]&1024&&X(Ae,1)):(Ae=nS(ve),Ae.c(),X(Ae,1),Ae.m(o,S)):Ae&&(Ve(),te(Ae,1,1,()=>{Ae=null}),qe()),(!he||de[0]&256)&&(R.value=ve[8]);const He={};de[0]&2048&&(He.data=ve[11]?Fi:Do),U.$set(He),ve[11]?ye?(ye.p(ve,de),de[0]&2048&&X(ye,1)):(ye=rS(ve),ye.c(),X(ye,1),ye.m(B,null)):ye&&(Ve(),te(ye,1,1,()=>{ye=null}),qe()),de[0]&2048&&ze(B,"jse-hide",!ve[11]);let Xe=z;z=fe(ve),z===Xe?xe[z].p(ve,de):(Ve(),te(xe[Xe],1,1,()=>{xe[Xe]=null}),qe(),I=xe[z],I?I.p(ve,de):(I=xe[z]=Me[z](ve),I.c()),X(I,1),I.m(P,null)),de[0]&2048&&ze(F,"jse-hide-original-data",!ve[11]),(!he||de[0]&4096&&ae!==(ae=!!ve[12]))&&(q.disabled=ae)},i(ve){he||(X(e.$$.fragment,ve),X(b.$$.fragment,ve),X(Ae),X(U.$$.fragment,ve),X(ye),X(I),he=!0)},o(ve){te(e.$$.fragment,ve),te(b.$$.fragment,ve),te(Ae),te(U.$$.fragment,ve),te(ye),te(I),he=!1},d(ve){Oe(e,ve),ve&&le(t),ve&&le(r),Oe(b),Ae&&Ae.d(),Oe(U),ye&&ye.d(),xe[z].d(),Pe=!1,rn(Fe)}}}function rK(n){let e,t,r;return t=new kO({props:{$$slots:{default:[nK]},$$scope:{ctx:n}}}),{c(){e=ee("div"),Te(t.$$.fragment),T(e,"class","jse-modal jse-transform svelte-mr4kda")},m(i,o){ue(i,e,o),ke(t,e,null),r=!0},p(i,o){const s={};o[0]&32767|o[1]&8&&(s.$$scope={dirty:o,ctx:i}),t.$set(s)},i(i){r||(X(t.$$.fragment,i),r=!0)},o(i){te(t.$$.fragment,i),r=!1},d(i){i&&le(e),Oe(t)}}}function iK(n){n.focus()}function oK(n,e,t){let r,i;const o=Sr("jsoneditor:TransformModal");let{id:s="transform-modal-"+lh()}=e,{json:a}=e,{selectedPath:l=[]}=e,{escapeControlCharacters:u}=e,{escapeUnicodeCharacters:c}=e,{queryLanguages:f}=e,{queryLanguageId:d}=e,{onChangeQueryLanguage:g}=e,{onRenderValue:h}=e,{onClassName:v}=e,{onTransform:m}=e;const{close:p}=ur("simple-modal"),y=`${s}:${Ge(l)}`,b=pi[y]||{};let _=pi.showWizard!==!1,w=pi.showOriginal!==!1,S=b.queryOptions||{},E=d===b.queryLanguageId&&b.query?b.query:F(d).createQuery(a,b.queryOptions||{}),O=b.isManual||!1,R,D={text:""};function F(P){return f.find(V=>V.id===P)||f[0]}function B(P){t(7,S=P),t(8,E=F(d).createQuery(a,P)),t(27,O=!1),o("updateQueryByWizard",{queryOptions:S,query:E,isManual:O})}function H(P){t(8,E=P.target.value),t(27,O=!0),o("handleChangeQuery",{query:E,isManual:O})}function L(P,V){try{o("previewTransform",{query:V});const W=F(d).executeQuery(P,V);t(13,D={json:W}),t(12,R=void 0)}catch(W){t(13,D={text:""}),t(12,R=W)}}const N=Ad(L,Sk);function U(){try{o("handleTransform",{query:E});const P=F(d).executeQuery(r,E);m([{op:"replace",path:Ge(l),value:P}]),p()}catch(P){console.error(P),t(13,D={text:""}),t(12,R=P.toString())}}function $(){t(10,_=!_),t(26,pi.showWizard=_,pi)}function Z(){t(11,w=!w),t(26,pi.showOriginal=w,pi)}function A(P){o("handleChangeQueryLanguage",P),t(0,d=P),g(P);const V=F(d);t(8,E=V.createQuery(a,S)),t(27,O=!1)}return n.$$set=P=>{"id"in P&&t(22,s=P.id),"json"in P&&t(23,a=P.json),"selectedPath"in P&&t(1,l=P.selectedPath),"escapeControlCharacters"in P&&t(2,u=P.escapeControlCharacters),"escapeUnicodeCharacters"in P&&t(3,c=P.escapeUnicodeCharacters),"queryLanguages"in P&&t(4,f=P.queryLanguages),"queryLanguageId"in P&&t(0,d=P.queryLanguageId),"onChangeQueryLanguage"in P&&t(24,g=P.onChangeQueryLanguage),"onRenderValue"in P&&t(5,h=P.onRenderValue),"onClassName"in P&&t(6,v=P.onClassName),"onTransform"in P&&t(25,m=P.onTransform)},n.$$.update=()=>{n.$$.dirty[0]&8388610&&t(9,r=tt(a,l)),n.$$.dirty[0]&512&&t(14,i={json:r}),n.$$.dirty[0]&768&&N(r,E),n.$$.dirty[0]&201326977&&(t(26,pi[y]={queryOptions:S,query:E,queryLanguageId:d,isManual:O},pi),o("store state in memory",y,pi[y]))},[d,l,u,c,f,h,v,S,E,r,_,w,R,D,i,F,B,H,U,$,Z,A,s,a,g,m,pi,O]}class sK extends rt{constructor(e){super(),nt(this,e,oK,rK,Nt,{id:22,json:23,selectedPath:1,escapeControlCharacters:2,escapeUnicodeCharacters:3,queryLanguages:4,queryLanguageId:0,onChangeQueryLanguage:24,onRenderValue:5,onClassName:6,onTransform:25},null,[-1,-1])}}const So={};function iS(n){let e,t,r,i,o,s,a;function l(c){n[12](c)}let u={showIndicator:!0,items:n[4]};return n[1]!==void 0&&(u.value=n[1]),o=new ys({props:u}),wt.push(()=>Ir(o,"value",l)),{c(){e=ee("tr"),t=ee("th"),t.textContent="Property",r=me(),i=ee("td"),Te(o.$$.fragment),T(t,"class","svelte-196ovtt"),T(i,"class","svelte-196ovtt")},m(c,f){ue(c,e,f),j(e,t),j(e,r),j(e,i),ke(o,i,null),a=!0},p(c,f){const d={};f&16&&(d.items=c[4]),!s&&f&2&&(s=!0,d.value=c[1],qr(()=>s=!1)),o.$set(d)},i(c){a||(X(o.$$.fragment,c),a=!0)},o(c){te(o.$$.fragment,c),a=!1},d(c){c&&le(e),Oe(o)}}}function aK(n){let e,t,r,i,o,s,a,l,u,c,f,d,g,h,v,m,p,y,b,_,w,S,E,O,R,D,F,B,H,L,N,U;t=new FP({props:{title:n[3]?"Sort array items":"Sort object keys"}});let $=n[3]&&(n[4].length>1||n[1]===void 0)&&iS(n);function Z(P){n[13](P)}let A={showIndicator:!0,items:n[5],isClearable:!1};return n[2]!==void 0&&(A.value=n[2]),w=new ys({props:A}),wt.push(()=>Ir(w,"value",Z)),{c(){e=ee("div"),Te(t.$$.fragment),r=me(),i=ee("div"),o=ee("table"),s=ee("colgroup"),s.innerHTML=`<col width="25%"/> 
        <col width="75%"/>`,a=me(),l=ee("tbody"),u=ee("tr"),c=ee("th"),c.textContent="Path",f=me(),d=ee("td"),g=ee("input"),v=me(),$&&$.c(),m=me(),p=ee("tr"),y=ee("th"),y.textContent="Direction",b=me(),_=ee("td"),Te(w.$$.fragment),E=me(),O=ee("div"),R=me(),D=ee("div"),F=ee("button"),B=Ue("Sort"),T(c,"class","svelte-196ovtt"),T(g,"class","jse-path svelte-196ovtt"),T(g,"type","text"),g.readOnly=!0,T(g,"title","Selected path"),g.value=h=gn(n[0])?"(whole document)":Jo(n[0]),T(d,"class","svelte-196ovtt"),T(y,"class","svelte-196ovtt"),T(_,"class","svelte-196ovtt"),T(o,"class","svelte-196ovtt"),T(O,"class","jse-space svelte-196ovtt"),T(F,"type","button"),T(F,"class","jse-primary svelte-196ovtt"),F.disabled=H=n[3]?!n[1]:!1,T(D,"class","jse-actions svelte-196ovtt"),T(i,"class","jse-contents svelte-196ovtt"),T(e,"class","jse-modal jse-sort svelte-196ovtt")},m(P,V){ue(P,e,V),ke(t,e,null),j(e,r),j(e,i),j(i,o),j(o,s),j(o,a),j(o,l),j(l,u),j(u,c),j(u,f),j(u,d),j(d,g),j(l,v),$&&$.m(l,null),j(l,m),j(l,p),j(p,y),j(p,b),j(p,_),ke(w,_,null),j(i,E),j(i,O),j(i,R),j(i,D),j(D,F),j(F,B),L=!0,N||(U=[Ce(F,"click",n[6]),xu(lK.call(null,F))],N=!0)},p(P,[V]){const W={};V&8&&(W.title=P[3]?"Sort array items":"Sort object keys"),t.$set(W),(!L||V&1&&h!==(h=gn(P[0])?"(whole document)":Jo(P[0]))&&g.value!==h)&&(g.value=h),P[3]&&(P[4].length>1||P[1]===void 0)?$?($.p(P,V),V&26&&X($,1)):($=iS(P),$.c(),X($,1),$.m(l,m)):$&&(Ve(),te($,1,1,()=>{$=null}),qe());const z={};!S&&V&4&&(S=!0,z.value=P[2],qr(()=>S=!1)),w.$set(z),(!L||V&10&&H!==(H=P[3]?!P[1]:!1))&&(F.disabled=H)},i(P){L||(X(t.$$.fragment,P),X($),X(w.$$.fragment,P),L=!0)},o(P){te(t.$$.fragment,P),te($),te(w.$$.fragment,P),L=!1},d(P){P&&le(e),Oe(t),$&&$.d(),Oe(w),N=!1,rn(U)}}}function lK(n){n.focus()}function uK(n,e,t){let r,i,o;const s=Sr("jsoneditor:SortModal");let{id:a}=e,{json:l}=e,{selectedPath:u}=e,{onSort:c}=e;const{close:f}=ur("simple-modal"),d=`${a}:${Ge(u)}`,g=tt(l,u),h={value:1,label:"ascending"},m=[h,{value:-1,label:"descending"}];let p=So[d]&&So[d].selectedProperty||void 0,y=So[d]&&So[d].selectedDirection||h;function b(E){return{value:E,label:gn(E)?"(whole item)":Ge(E)}}function _(){if(r){if(!p)return;const E=p.value,O=y.value,R=yz(l,u,E,O);c(R)}else if(ir(g)){const E=y.value,O=vz(l,u,E);c(O)}else console.error("Cannot sort: no array or object");f()}function w(E){p=E,t(1,p),t(4,o),t(11,i),t(3,r)}function S(E){y=E,t(2,y)}return n.$$set=E=>{"id"in E&&t(7,a=E.id),"json"in E&&t(8,l=E.json),"selectedPath"in E&&t(0,u=E.selectedPath),"onSort"in E&&t(9,c=E.onSort)},n.$$.update=()=>{n.$$.dirty&8&&t(11,i=r?rg(g):void 0),n.$$.dirty&2048&&t(4,o=i?i.map(b):void 0),n.$$.dirty&18&&p===void 0&&o&&o.length===1&&t(1,p=o[0]),n.$$.dirty&1030&&(t(10,So[d]={selectedProperty:p,selectedDirection:y},So),s("store state in memory",d,So[d]))},t(3,r=Array.isArray(g)),[u,p,y,r,o,m,_,a,l,c,So,i,w,S]}class cK extends rt{constructor(e){super(),nt(this,e,uK,aK,Nt,{id:7,json:8,selectedPath:0,onSort:9})}}function fK(n,e,t){const r=ur("simple-modal"),i=r.open,o=r.close;return[i,o]}class hK extends rt{constructor(e){super(),nt(this,e,fK,null,Nt,{open:0,close:1})}get open(){return this.$$.ctx[0]}get close(){return this.$$.ctx[1]}}function dK(n){let e,t,r={readOnly:n[2],indentation:n[3],externalContent:n[0],mainMenuBar:n[5],navigationBar:n[6],escapeControlCharacters:n[8],escapeUnicodeCharacters:n[9],validator:n[10],onError:n[13],onChange:n[22],onRequestRepair:n[23],onRenderValue:n[11],onClassName:n[12],onFocus:n[25],onBlur:n[26],onRenderMenu:n[20],onSortModal:n[28],onTransformModal:n[27]};return e=new qv({props:r}),n[54](e),{c(){Te(e.$$.fragment)},m(i,o){ke(e,i,o),t=!0},p(i,o){const s={};o[0]&4&&(s.readOnly=i[2]),o[0]&8&&(s.indentation=i[3]),o[0]&1&&(s.externalContent=i[0]),o[0]&32&&(s.mainMenuBar=i[5]),o[0]&64&&(s.navigationBar=i[6]),o[0]&256&&(s.escapeControlCharacters=i[8]),o[0]&512&&(s.escapeUnicodeCharacters=i[9]),o[0]&1024&&(s.validator=i[10]),o[0]&8192&&(s.onError=i[13]),o[0]&2048&&(s.onRenderValue=i[11]),o[0]&4096&&(s.onClassName=i[12]),o[0]&1048576&&(s.onRenderMenu=i[20]),e.$set(s)},i(i){t||(X(e.$$.fragment,i),t=!0)},o(i){te(e.$$.fragment,i),t=!1},d(i){n[54](null),Oe(e,i)}}}function pK(n){let e,t,r={text:n[21](n[0]),readOnly:n[2],indentation:n[3],tabSize:n[4],mainMenuBar:n[5],statusBar:n[7],escapeUnicodeCharacters:n[9],validator:n[10],onChange:n[22],onSwitchToTreeMode:n[24],onError:n[13],onFocus:n[25],onBlur:n[26],onRenderMenu:n[20],onSortModal:n[28],onTransformModal:n[27]};return e=new QV({props:r}),n[53](e),{c(){Te(e.$$.fragment)},m(i,o){ke(e,i,o),t=!0},p(i,o){const s={};o[0]&1&&(s.text=i[21](i[0])),o[0]&4&&(s.readOnly=i[2]),o[0]&8&&(s.indentation=i[3]),o[0]&16&&(s.tabSize=i[4]),o[0]&32&&(s.mainMenuBar=i[5]),o[0]&128&&(s.statusBar=i[7]),o[0]&512&&(s.escapeUnicodeCharacters=i[9]),o[0]&1024&&(s.validator=i[10]),o[0]&8192&&(s.onError=i[13]),o[0]&1048576&&(s.onRenderMenu=i[20]),e.$set(s)},i(i){t||(X(e.$$.fragment,i),t=!0)},o(i){te(e.$$.fragment,i),t=!1},d(i){n[53](null),Oe(e,i)}}}function oS(n){let e,t,r,i;const o=[pK,dK],s=[];function a(l,u){return l[1]===Fr.text||l[1]==="code"?0:1}return e=a(n),t=s[e]=o[e](n),{c(){t.c(),r=xt()},m(l,u){s[e].m(l,u),ue(l,r,u),i=!0},p(l,u){let c=e;e=a(l),e===c?s[e].p(l,u):(Ve(),te(s[c],1,1,()=>{s[c]=null}),qe(),t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),X(t,1),t.m(r.parentNode,r))},i(l){i||(X(t),i=!0)},o(l){te(t),i=!1},d(l){s[e].d(l),l&&le(r)}}}function mK(n){let e,t=n[14],r,i=oS(n);return{c(){e=ee("div"),i.c(),T(e,"class","jse-main svelte-1tkifqe"),ze(e,"jse-focus",n[15])},m(o,s){ue(o,e,s),i.m(e,null),n[55](e),r=!0},p(o,s){s[0]&16384&&Nt(t,t=o[14])?(Ve(),te(i,1,1,Ne),qe(),i=oS(o),i.c(),X(i,1),i.m(e,null)):i.p(o,s),s[0]&32768&&ze(e,"jse-focus",o[15])},i(o){r||(X(i),r=!0)},o(o){te(i),r=!1},d(o){o&&le(e),i.d(o),n[55](null)}}}function gK(n){let e,t,r,i,o;function s(l){n[52](l)}let a={};return n[19]!==void 0&&(a.open=n[19]),e=new hK({props:a}),wt.push(()=>Ir(e,"open",s)),i=new kO({props:{$$slots:{default:[mK]},$$scope:{ctx:n}}}),{c(){Te(e.$$.fragment),r=me(),Te(i.$$.fragment)},m(l,u){ke(e,l,u),ue(l,r,u),ke(i,l,u),o=!0},p(l,u){const c={};!t&&u[0]&524288&&(t=!0,c.open=l[19],qr(()=>t=!1)),e.$set(c);const f={};u[0]&1572863|u[1]&536870912&&(f.$$scope={dirty:u,ctx:l}),i.$set(f)},i(l){o||(X(e.$$.fragment,l),X(i.$$.fragment,l),o=!0)},o(l){te(e.$$.fragment,l),te(i.$$.fragment,l),o=!1},d(l){Oe(e,l),l&&le(r),Oe(i,l)}}}function vK(n){let e,t;return e=new qA({props:{$$slots:{default:[gK]},$$scope:{ctx:n}}}),{c(){Te(e.$$.fragment)},m(r,i){ke(e,r,i),t=!0},p(r,i){const o={};i[0]&2097151|i[1]&536870912&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||(X(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function GP(n){this.$set(n)}function JP(){this.$destroy()}function yK(n,e,t){let r;const i=Sr("jsoneditor:Main");let{content:o={text:""}}=e,{readOnly:s=!1}=e,{indentation:a=2}=e,{tabSize:l=4}=e,{mode:u=Fr.tree}=e,{mainMenuBar:c=!0}=e,{navigationBar:f=!0}=e,{statusBar:d=!0}=e,{escapeControlCharacters:g=!1}=e,{escapeUnicodeCharacters:h=!1}=e,{validator:v=null}=e,{queryLanguages:m=[Fz]}=e,{queryLanguageId:p=m[0].id}=e,{onChangeQueryLanguage:y=Gt}=e,{onChange:b=null}=e,{onRenderValue:_=fW}=e,{onClassName:w=()=>{}}=e,{onRenderMenu:S=Gt}=e,{onChangeMode:E=Gt}=e,{onError:O=be=>{console.error(be),alert(be.toString())}}=e,{onFocus:R=Gt}=e,{onBlur:D=Gt}=e,F=lh(),B=!1,H,L,N,U;function $(){return o}function Z(be){return ig(be)?be.text:JSON.stringify(be.json,null,a)}function A(be){i("set");const Y=bp(be);if(Y)throw new Error(Y);t(14,F=lh()),t(0,o=be)}function P(be){i("update");const Y=bp(be);if(Y)throw new Error(Y);t(0,o=be)}function V(be){if(ig(o))try{t(0,o={json:JSON.parse(o.text),text:void 0})}catch{throw new Error("Cannot apply patch: current document contains invalid JSON")}if(L)return L.patch(be);if(N)return N.patch(be)}function W(be){if(L)return L.expand(be);throw new Error(`Method expand is not available in mode "${u}"`)}function z(be){if(N)N.openTransformModal(be);else if(L)L.openTransformModal(be);else throw new Error(`Method transform is not available in mode "${u}"`)}function I(){if(N)return N.validate();if(L)return L.validate();throw new Error(`Method validate is not available in mode "${u}"`)}function M(){return L?L.acceptAutoRepair():o}function J(be){if(L)return L.scrollTo(be);throw new Error(`Method scrollTo is not available in mode "${u}"`)}function q(be){if(L)return L.findElement(be);throw new Error(`Method findElement is not available in mode "${u}"`)}function Q(){N?N.focus():L&&L.focus()}function ae(){N&&N.refresh()}function he(be,Y,x){t(0,o=be),b&&b(be,Y,x)}async function Pe(){t(1,u=Fr.text),await Pn(),E(Fr.text)}async function Fe(){t(1,u=Fr.tree),await Pn(),E(Fr.tree)}function Ae(){t(15,B=!0),R&&R()}function ye(){t(15,B=!1),D&&D()}async function Me(be){u!==be&&(t(1,u=be),await Pn(),Q(),E(be))}let xe;const fe={separator:!0};function ve(be){i("handleChangeQueryLanguage",be),t(29,p=be),y(be)}function de({id:be,json:Y,selectedPath:x,onTransform:C,onClose:k}){s||U(sK,{id:be,json:Y,selectedPath:x,escapeControlCharacters:g,escapeUnicodeCharacters:h,queryLanguages:m,queryLanguageId:p,onChangeQueryLanguage:ve,onRenderValue:_,onClassName:w,onTransform:C},eR,{onClose:k})}function Ie({id:be,json:Y,selectedPath:x,onSort:C,onClose:k}){s||U(cK,{id:be,json:Y,selectedPath:x,onSort:C},$A,{onClose:k})}function De(be){U=be,t(19,U)}function He(be){wt[be?"unshift":"push"](()=>{N=be,t(18,N)})}function Xe(be){wt[be?"unshift":"push"](()=>{L=be,t(17,L)})}function mt(be){wt[be?"unshift":"push"](()=>{H=be,t(16,H)})}return n.$$set=be=>{"content"in be&&t(0,o=be.content),"readOnly"in be&&t(2,s=be.readOnly),"indentation"in be&&t(3,a=be.indentation),"tabSize"in be&&t(4,l=be.tabSize),"mode"in be&&t(1,u=be.mode),"mainMenuBar"in be&&t(5,c=be.mainMenuBar),"navigationBar"in be&&t(6,f=be.navigationBar),"statusBar"in be&&t(7,d=be.statusBar),"escapeControlCharacters"in be&&t(8,g=be.escapeControlCharacters),"escapeUnicodeCharacters"in be&&t(9,h=be.escapeUnicodeCharacters),"validator"in be&&t(10,v=be.validator),"queryLanguages"in be&&t(30,m=be.queryLanguages),"queryLanguageId"in be&&t(29,p=be.queryLanguageId),"onChangeQueryLanguage"in be&&t(31,y=be.onChangeQueryLanguage),"onChange"in be&&t(32,b=be.onChange),"onRenderValue"in be&&t(11,_=be.onRenderValue),"onClassName"in be&&t(12,w=be.onClassName),"onRenderMenu"in be&&t(33,S=be.onRenderMenu),"onChangeMode"in be&&t(34,E=be.onChangeMode),"onError"in be&&t(13,O=be.onError),"onFocus"in be&&t(35,R=be.onFocus),"onBlur"in be&&t(36,D=be.onBlur)},n.$$.update=()=>{if(n.$$.dirty[0]&1){const be=bp(o);be&&console.error("Error: "+be)}n.$$.dirty[0]&2&&t(51,xe=[{text:"text",title:`Switch to text mode (current mode: ${u})`,className:"jse-group-button jse-first"+(u===Fr.text||u==="code"?" jse-selected":""),onClick:()=>Me(Fr.text)},{text:"tree",title:`Switch to tree mode (current mode: ${u})`,className:"jse-group-button jse-last"+(u===Fr.tree?" jse-selected":""),onClick:()=>Me(Fr.tree)}]),n.$$.dirty[1]&1048580&&t(20,r=(be,Y)=>{const x=BV(Y[0])?xe.concat(Y):xe.concat(fe,Y);return S(be,x)||x}),n.$$.dirty[0]&2&&(i("mode changed to",u),u==="code"&&console.warn('Deprecation warning: "code" mode is renamed to "text". Please use mode="text" instead.'))},[o,u,s,a,l,c,f,d,g,h,v,_,w,O,F,B,H,L,N,U,r,Z,he,Pe,Fe,Ae,ye,de,Ie,p,m,y,b,S,E,R,D,$,A,P,V,W,z,I,M,J,q,Q,ae,GP,JP,xe,De,He,Xe,mt]}class _K extends rt{constructor(e){super(),nt(this,e,yK,vK,Nt,{content:0,readOnly:2,indentation:3,tabSize:4,mode:1,mainMenuBar:5,navigationBar:6,statusBar:7,escapeControlCharacters:8,escapeUnicodeCharacters:9,validator:10,queryLanguages:30,queryLanguageId:29,onChangeQueryLanguage:31,onChange:32,onRenderValue:11,onClassName:12,onRenderMenu:33,onChangeMode:34,onError:13,onFocus:35,onBlur:36,get:37,set:38,update:39,patch:40,expand:41,transform:42,validate:43,acceptAutoRepair:44,scrollTo:45,findElement:46,focus:47,refresh:48,updateProps:49,destroy:50},null,[-1,-1])}get get(){return this.$$.ctx[37]}get set(){return this.$$.ctx[38]}get update(){return this.$$.ctx[39]}get patch(){return this.$$.ctx[40]}get expand(){return this.$$.ctx[41]}get transform(){return this.$$.ctx[42]}get validate(){return this.$$.ctx[43]}get acceptAutoRepair(){return this.$$.ctx[44]}get scrollTo(){return this.$$.ctx[45]}get findElement(){return this.$$.ctx[46]}get focus(){return this.$$.ctx[47]}get refresh(){return this.$$.ctx[48]}get updateProps(){return GP}get destroy(){return JP}}function Vc(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var YP={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,i,o){function s(u,c){if(!i[u]){if(!r[u]){var f=typeof Vc=="function"&&Vc;if(!c&&f)return f(u,!0);if(a)return a(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var g=i[u]={exports:{}};r[u][0].call(g.exports,function(h){return s(r[u][1][h]||h)},g,g.exports,t,r,i,o)}return i[u].exports}for(var a=typeof Vc=="function"&&Vc,l=0;l<o.length;l++)s(o[l]);return s}({1:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.regexpCode=i.getEsmExportName=i.getProperty=i.safeStringify=i.stringify=i.strConcat=i.addCodeArg=i.str=i._=i.nil=i._Code=i.Name=i.IDENTIFIER=i._CodeOrName=void 0;class o{}i._CodeOrName=o,i.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class s extends o{constructor(v){if(super(),!i.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}i.Name=s;class a extends o{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((m,p)=>`${m}${p}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((m,p)=>(p instanceof s&&(m[p.str]=(m[p.str]||0)+1),m),{})}}function l(h,...v){const m=[h[0]];let p=0;for(;p<v.length;)f(m,v[p]),m.push(h[++p]);return new a(m)}i._Code=a,i.nil=new a(""),i._=l;const u=new a("+");function c(h,...v){const m=[g(h[0])];let p=0;for(;p<v.length;)m.push(u),f(m,v[p]),m.push(u,g(h[++p]));return function(y){let b=1;for(;b<y.length-1;){if(y[b]===u){const _=d(y[b-1],y[b+1]);if(_!==void 0){y.splice(b-1,3,_);continue}y[b++]="+"}b++}}(m),new a(m)}function f(h,v){var m;v instanceof a?h.push(...v._items):h.push(v instanceof s?v:typeof(m=v)=="number"||typeof m=="boolean"||m===null?m:g(Array.isArray(m)?m.join(","):m))}function d(h,v){return v==='""'?h:h==='""'?v:typeof h=="string"?v instanceof s||h[h.length-1]!=='"'?void 0:typeof v!="string"?`${h.slice(0,-1)}${v}"`:v[0]==='"'?h.slice(0,-1)+v.slice(1):void 0:typeof v!="string"||v[0]!=='"'||h instanceof s?void 0:`"${h}${v.slice(1)}`}function g(h){return JSON.stringify(h).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}i.str=c,i.addCodeArg=f,i.strConcat=function(h,v){return v.emptyStr()?h:h.emptyStr()?v:c`${h}${v}`},i.stringify=function(h){return new a(g(h))},i.safeStringify=g,i.getProperty=function(h){return typeof h=="string"&&i.IDENTIFIER.test(h)?new a(`.${h}`):l`[${h}]`},i.getEsmExportName=function(h){if(typeof h=="string"&&i.IDENTIFIER.test(h))return new a(`${h}`);throw new Error(`CodeGen: invalid export name: ${h}, use explicit $id name mapping`)},i.regexpCode=function(h){return new a(h.toString())}},{}],2:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.or=i.and=i.not=i.CodeGen=i.operators=i.varKinds=i.ValueScopeName=i.ValueScope=i.Scope=i.Name=i.regexpCode=i.stringify=i.getProperty=i.nil=i.strConcat=i.str=i._=void 0;const o=t("./code"),s=t("./scope");var a=t("./code");Object.defineProperty(i,"_",{enumerable:!0,get(){return a._}}),Object.defineProperty(i,"str",{enumerable:!0,get(){return a.str}}),Object.defineProperty(i,"strConcat",{enumerable:!0,get(){return a.strConcat}}),Object.defineProperty(i,"nil",{enumerable:!0,get(){return a.nil}}),Object.defineProperty(i,"getProperty",{enumerable:!0,get(){return a.getProperty}}),Object.defineProperty(i,"stringify",{enumerable:!0,get(){return a.stringify}}),Object.defineProperty(i,"regexpCode",{enumerable:!0,get(){return a.regexpCode}}),Object.defineProperty(i,"Name",{enumerable:!0,get(){return a.Name}});var l=t("./scope");Object.defineProperty(i,"Scope",{enumerable:!0,get(){return l.Scope}}),Object.defineProperty(i,"ValueScope",{enumerable:!0,get(){return l.ValueScope}}),Object.defineProperty(i,"ValueScopeName",{enumerable:!0,get(){return l.ValueScopeName}}),Object.defineProperty(i,"varKinds",{enumerable:!0,get(){return l.varKinds}}),i.operators={GT:new o._Code(">"),GTE:new o._Code(">="),LT:new o._Code("<"),LTE:new o._Code("<="),EQ:new o._Code("==="),NEQ:new o._Code("!=="),NOT:new o._Code("!"),OR:new o._Code("||"),AND:new o._Code("&&"),ADD:new o._Code("+")};class u{optimizeNodes(){return this}optimizeNames(M,J){return this}}class c extends u{constructor(M,J,q){super(),this.varKind=M,this.name=J,this.rhs=q}render({es5:M,_n:J}){return`${M?s.varKinds.var:this.varKind} ${this.name}${this.rhs===void 0?"":` = ${this.rhs}`};`+J}optimizeNames(M,J){if(M[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,M,J)),this}get names(){return this.rhs instanceof o._CodeOrName?this.rhs.names:{}}}class f extends u{constructor(M,J,q){super(),this.lhs=M,this.rhs=J,this.sideEffects=q}render({_n:M}){return`${this.lhs} = ${this.rhs};`+M}optimizeNames(M,J){if(!(this.lhs instanceof o.Name)||M[this.lhs.str]||this.sideEffects)return this.rhs=$(this.rhs,M,J),this}get names(){return U(this.lhs instanceof o.Name?{}:{...this.lhs.names},this.rhs)}}class d extends f{constructor(M,J,q,Q){super(M,q,Q),this.op=J}render({_n:M}){return`${this.lhs} ${this.op}= ${this.rhs};`+M}}class g extends u{constructor(M){super(),this.label=M,this.names={}}render({_n:M}){return`${this.label}:`+M}}class h extends u{constructor(M){super(),this.label=M,this.names={}}render({_n:M}){return`break${this.label?` ${this.label}`:""};`+M}}class v extends u{constructor(M){super(),this.error=M}render({_n:M}){return`throw ${this.error};`+M}get names(){return this.error.names}}class m extends u{constructor(M){super(),this.code=M}render({_n:M}){return`${this.code};`+M}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(M,J){return this.code=$(this.code,M,J),this}get names(){return this.code instanceof o._CodeOrName?this.code.names:{}}}class p extends u{constructor(M=[]){super(),this.nodes=M}render(M){return this.nodes.reduce((J,q)=>J+q.render(M),"")}optimizeNodes(){const{nodes:M}=this;let J=M.length;for(;J--;){const q=M[J].optimizeNodes();Array.isArray(q)?M.splice(J,1,...q):q?M[J]=q:M.splice(J,1)}return M.length>0?this:void 0}optimizeNames(M,J){const{nodes:q}=this;let Q=q.length;for(;Q--;){const ae=q[Q];ae.optimizeNames(M,J)||(Z(M,ae.names),q.splice(Q,1))}return q.length>0?this:void 0}get names(){return this.nodes.reduce((M,J)=>N(M,J.names),{})}}class y extends p{render(M){return"{"+M._n+super.render(M)+"}"+M._n}}class b extends p{}class _ extends y{}_.kind="else";class w extends y{constructor(M,J){super(J),this.condition=M}render(M){let J=`if(${this.condition})`+super.render(M);return this.else&&(J+="else "+this.else.render(M)),J}optimizeNodes(){super.optimizeNodes();const M=this.condition;if(M===!0)return this.nodes;let J=this.else;if(J){const q=J.optimizeNodes();J=this.else=Array.isArray(q)?new _(q):q}return J?M===!1?J instanceof w?J:J.nodes:this.nodes.length?this:new w(A(M),J instanceof w?[J]:J.nodes):M!==!1&&this.nodes.length?this:void 0}optimizeNames(M,J){var q;if(this.else=(q=this.else)===null||q===void 0?void 0:q.optimizeNames(M,J),super.optimizeNames(M,J)||this.else)return this.condition=$(this.condition,M,J),this}get names(){const M=super.names;return U(M,this.condition),this.else&&N(M,this.else.names),M}}w.kind="if";class S extends y{}S.kind="for";class E extends S{constructor(M){super(),this.iteration=M}render(M){return`for(${this.iteration})`+super.render(M)}optimizeNames(M,J){if(super.optimizeNames(M,J))return this.iteration=$(this.iteration,M,J),this}get names(){return N(super.names,this.iteration.names)}}class O extends S{constructor(M,J,q,Q){super(),this.varKind=M,this.name=J,this.from=q,this.to=Q}render(M){const J=M.es5?s.varKinds.var:this.varKind,{name:q,from:Q,to:ae}=this;return`for(${J} ${q}=${Q}; ${q}<${ae}; ${q}++)`+super.render(M)}get names(){const M=U(super.names,this.from);return U(M,this.to)}}class R extends S{constructor(M,J,q,Q){super(),this.loop=M,this.varKind=J,this.name=q,this.iterable=Q}render(M){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(M)}optimizeNames(M,J){if(super.optimizeNames(M,J))return this.iterable=$(this.iterable,M,J),this}get names(){return N(super.names,this.iterable.names)}}class D extends y{constructor(M,J,q){super(),this.name=M,this.args=J,this.async=q}render(M){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(M)}}D.kind="func";class F extends p{render(M){return"return "+super.render(M)}}F.kind="return";class B extends y{render(M){let J="try"+super.render(M);return this.catch&&(J+=this.catch.render(M)),this.finally&&(J+=this.finally.render(M)),J}optimizeNodes(){var M,J;return super.optimizeNodes(),(M=this.catch)===null||M===void 0||M.optimizeNodes(),(J=this.finally)===null||J===void 0||J.optimizeNodes(),this}optimizeNames(M,J){var q,Q;return super.optimizeNames(M,J),(q=this.catch)===null||q===void 0||q.optimizeNames(M,J),(Q=this.finally)===null||Q===void 0||Q.optimizeNames(M,J),this}get names(){const M=super.names;return this.catch&&N(M,this.catch.names),this.finally&&N(M,this.finally.names),M}}class H extends y{constructor(M){super(),this.error=M}render(M){return`catch(${this.error})`+super.render(M)}}H.kind="catch";class L extends y{render(M){return"finally"+super.render(M)}}L.kind="finally";function N(I,M){for(const J in M)I[J]=(I[J]||0)+(M[J]||0);return I}function U(I,M){return M instanceof o._CodeOrName?N(I,M.names):I}function $(I,M,J){return I instanceof o.Name?Q(I):(q=I)instanceof o._Code&&q._items.some(ae=>ae instanceof o.Name&&M[ae.str]===1&&J[ae.str]!==void 0)?new o._Code(I._items.reduce((ae,he)=>(he instanceof o.Name&&(he=Q(he)),he instanceof o._Code?ae.push(...he._items):ae.push(he),ae),[])):I;var q;function Q(ae){const he=J[ae.str];return he===void 0||M[ae.str]!==1?ae:(delete M[ae.str],he)}}function Z(I,M){for(const J in M)I[J]=(I[J]||0)-(M[J]||0)}function A(I){return typeof I=="boolean"||typeof I=="number"||I===null?!I:o._`!${z(I)}`}i.CodeGen=class{constructor(I,M={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...M,_n:M.lines?`
`:""},this._extScope=I,this._scope=new s.Scope({parent:I}),this._nodes=[new b]}toString(){return this._root.render(this.opts)}name(I){return this._scope.name(I)}scopeName(I){return this._extScope.name(I)}scopeValue(I,M){const J=this._extScope.value(I,M);return(this._values[J.prefix]||(this._values[J.prefix]=new Set)).add(J),J}getScopeValue(I,M){return this._extScope.getValue(I,M)}scopeRefs(I){return this._extScope.scopeRefs(I,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(I,M,J,q){const Q=this._scope.toName(M);return J!==void 0&&q&&(this._constants[Q.str]=J),this._leafNode(new c(I,Q,J)),Q}const(I,M,J){return this._def(s.varKinds.const,I,M,J)}let(I,M,J){return this._def(s.varKinds.let,I,M,J)}var(I,M,J){return this._def(s.varKinds.var,I,M,J)}assign(I,M,J){return this._leafNode(new f(I,M,J))}add(I,M){return this._leafNode(new d(I,i.operators.ADD,M))}code(I){return typeof I=="function"?I():I!==o.nil&&this._leafNode(new m(I)),this}object(...I){const M=["{"];for(const[J,q]of I)M.length>1&&M.push(","),M.push(J),(J!==q||this.opts.es5)&&(M.push(":"),(0,o.addCodeArg)(M,q));return M.push("}"),new o._Code(M)}if(I,M,J){if(this._blockNode(new w(I)),M&&J)this.code(M).else().code(J).endIf();else if(M)this.code(M).endIf();else if(J)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(I){return this._elseNode(new w(I))}else(){return this._elseNode(new _)}endIf(){return this._endBlockNode(w,_)}_for(I,M){return this._blockNode(I),M&&this.code(M).endFor(),this}for(I,M){return this._for(new E(I),M)}forRange(I,M,J,q,Q=this.opts.es5?s.varKinds.var:s.varKinds.let){const ae=this._scope.toName(I);return this._for(new O(Q,ae,M,J),()=>q(ae))}forOf(I,M,J,q=s.varKinds.const){const Q=this._scope.toName(I);if(this.opts.es5){const ae=M instanceof o.Name?M:this.var("_arr",M);return this.forRange("_i",0,o._`${ae}.length`,he=>{this.var(Q,o._`${ae}[${he}]`),J(Q)})}return this._for(new R("of",q,Q,M),()=>J(Q))}forIn(I,M,J,q=this.opts.es5?s.varKinds.var:s.varKinds.const){if(this.opts.ownProperties)return this.forOf(I,o._`Object.keys(${M})`,J);const Q=this._scope.toName(I);return this._for(new R("in",q,Q,M),()=>J(Q))}endFor(){return this._endBlockNode(S)}label(I){return this._leafNode(new g(I))}break(I){return this._leafNode(new h(I))}return(I){const M=new F;if(this._blockNode(M),this.code(I),M.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(F)}try(I,M,J){if(!M&&!J)throw new Error('CodeGen: "try" without "catch" and "finally"');const q=new B;if(this._blockNode(q),this.code(I),M){const Q=this.name("e");this._currNode=q.catch=new H(Q),M(Q)}return J&&(this._currNode=q.finally=new L,this.code(J)),this._endBlockNode(H,L)}throw(I){return this._leafNode(new v(I))}block(I,M){return this._blockStarts.push(this._nodes.length),I&&this.code(I).endBlock(M),this}endBlock(I){const M=this._blockStarts.pop();if(M===void 0)throw new Error("CodeGen: not in self-balancing block");const J=this._nodes.length-M;if(J<0||I!==void 0&&J!==I)throw new Error(`CodeGen: wrong number of nodes: ${J} vs ${I} expected`);return this._nodes.length=M,this}func(I,M=o.nil,J,q){return this._blockNode(new D(I,M,J)),q&&this.code(q).endFunc(),this}endFunc(){return this._endBlockNode(D)}optimize(I=1){for(;I-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(I){return this._currNode.nodes.push(I),this}_blockNode(I){this._currNode.nodes.push(I),this._nodes.push(I)}_endBlockNode(I,M){const J=this._currNode;if(J instanceof I||M&&J instanceof M)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${M?`${I.kind}/${M.kind}`:I.kind}"`)}_elseNode(I){const M=this._currNode;if(!(M instanceof w))throw new Error('CodeGen: "else" without "if"');return this._currNode=M.else=I,this}get _root(){return this._nodes[0]}get _currNode(){const I=this._nodes;return I[I.length-1]}set _currNode(I){const M=this._nodes;M[M.length-1]=I}},i.not=A;const P=W(i.operators.AND);i.and=function(...I){return I.reduce(P)};const V=W(i.operators.OR);function W(I){return(M,J)=>M===o.nil?J:J===o.nil?M:o._`${z(M)} ${I} ${z(J)}`}function z(I){return I instanceof o.Name?I:o._`(${I})`}i.or=function(...I){return I.reduce(V)}},{"./code":1,"./scope":3}],3:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.ValueScope=i.ValueScopeName=i.Scope=i.varKinds=i.UsedValueState=void 0;const o=t("./code");class s extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var a;(function(f){f[f.Started=0]="Started",f[f.Completed=1]="Completed"})(a=i.UsedValueState||(i.UsedValueState={})),i.varKinds={const:new o.Name("const"),let:new o.Name("let"),var:new o.Name("var")};class l{constructor({prefixes:d,parent:g}={}){this._names={},this._prefixes=d,this._parent=g}toName(d){return d instanceof o.Name?d:this.name(d)}name(d){return new o.Name(this._newName(d))}_newName(d){return`${d}${(this._names[d]||this._nameGroup(d)).index++}`}_nameGroup(d){var g,h;if(((h=(g=this._parent)===null||g===void 0?void 0:g._prefixes)===null||h===void 0?void 0:h.has(d))||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}i.Scope=l;class u extends o.Name{constructor(d,g){super(g),this.prefix=d}setValue(d,{property:g,itemIndex:h}){this.value=d,this.scopePath=o._`.${new o.Name(g)}[${h}]`}}i.ValueScopeName=u;const c=o._`\n`;i.ValueScope=class extends l{constructor(f){super(f),this._values={},this._scope=f.scope,this.opts={...f,_n:f.lines?c:o.nil}}get(){return this._scope}name(f){return new u(f,this._newName(f))}value(f,d){var g;if(d.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const h=this.toName(f),{prefix:v}=h,m=(g=d.key)!==null&&g!==void 0?g:d.ref;let p=this._values[v];if(p){const _=p.get(m);if(_)return _}else p=this._values[v]=new Map;p.set(m,h);const y=this._scope[v]||(this._scope[v]=[]),b=y.length;return y[b]=d.ref,h.setValue(d,{property:v,itemIndex:b}),h}getValue(f,d){const g=this._values[f];if(g)return g.get(d)}scopeRefs(f,d=this._values){return this._reduceValues(d,g=>{if(g.scopePath===void 0)throw new Error(`CodeGen: name "${g}" has no value`);return o._`${f}${g.scopePath}`})}scopeCode(f=this._values,d,g){return this._reduceValues(f,h=>{if(h.value===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return h.value.code},d,g)}_reduceValues(f,d,g={},h){let v=o.nil;for(const m in f){const p=f[m];if(!p)continue;const y=g[m]=g[m]||new Map;p.forEach(b=>{if(y.has(b))return;y.set(b,a.Started);let _=d(b);if(_)v=o._`${v}${this.opts.es5?i.varKinds.var:i.varKinds.const} ${b} = ${_};${this.opts._n}`;else{if(!(_=h==null?void 0:h(b)))throw new s(b);v=o._`${v}${_}${this.opts._n}`}y.set(b,a.Completed)})}return v}}},{"./code":1}],4:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.extendErrors=i.resetErrorsCount=i.reportExtraError=i.reportError=i.keyword$DataError=i.keywordError=void 0;const o=t("./codegen"),s=t("./util"),a=t("./names");function l(h,v){const m=h.const("err",v);h.if(o._`${a.default.vErrors} === null`,()=>h.assign(a.default.vErrors,o._`[${m}]`),o._`${a.default.vErrors}.push(${m})`),h.code(o._`${a.default.errors}++`)}function u(h,v){const{gen:m,validateName:p,schemaEnv:y}=h;y.$async?m.throw(o._`new ${h.ValidationError}(${v})`):(m.assign(o._`${p}.errors`,v),m.return(!1))}i.keywordError={message({keyword:h}){return o.str`must pass "${h}" keyword validation`}},i.keyword$DataError={message({keyword:h,schemaType:v}){return v?o.str`"${h}" keyword must be ${v} ($data)`:o.str`"${h}" keyword is invalid ($data)`}},i.reportError=function(h,v=i.keywordError,m,p){const{it:y}=h,{gen:b,compositeRule:_,allErrors:w}=y,S=f(h,v,m);(p!=null?p:_||w)?l(b,S):u(y,o._`[${S}]`)},i.reportExtraError=function(h,v=i.keywordError,m){const{it:p}=h,{gen:y,compositeRule:b,allErrors:_}=p;l(y,f(h,v,m)),b||_||u(p,a.default.vErrors)},i.resetErrorsCount=function(h,v){h.assign(a.default.errors,v),h.if(o._`${a.default.vErrors} !== null`,()=>h.if(v,()=>h.assign(o._`${a.default.vErrors}.length`,v),()=>h.assign(a.default.vErrors,null)))},i.extendErrors=function({gen:h,keyword:v,schemaValue:m,data:p,errsCount:y,it:b}){if(y===void 0)throw new Error("ajv implementation error");const _=h.name("err");h.forRange("i",y,a.default.errors,w=>{h.const(_,o._`${a.default.vErrors}[${w}]`),h.if(o._`${_}.instancePath === undefined`,()=>h.assign(o._`${_}.instancePath`,(0,o.strConcat)(a.default.instancePath,b.errorPath))),h.assign(o._`${_}.schemaPath`,o.str`${b.errSchemaPath}/${v}`),b.opts.verbose&&(h.assign(o._`${_}.schema`,m),h.assign(o._`${_}.data`,p))})};const c={keyword:new o.Name("keyword"),schemaPath:new o.Name("schemaPath"),params:new o.Name("params"),propertyName:new o.Name("propertyName"),message:new o.Name("message"),schema:new o.Name("schema"),parentSchema:new o.Name("parentSchema")};function f(h,v,m){const{createErrors:p}=h.it;return p===!1?o._`{}`:function(y,b,_={}){const{gen:w,it:S}=y,E=[d(S,_),g(y,_)];return function(O,{params:R,message:D},F){const{keyword:B,data:H,schemaValue:L,it:N}=O,{opts:U,propertyName:$,topSchemaRef:Z,schemaPath:A}=N;F.push([c.keyword,B],[c.params,typeof R=="function"?R(O):R||o._`{}`]),U.messages&&F.push([c.message,typeof D=="function"?D(O):D]),U.verbose&&F.push([c.schema,L],[c.parentSchema,o._`${Z}${A}`],[a.default.data,H]),$&&F.push([c.propertyName,$])}(y,b,E),w.object(...E)}(h,v,m)}function d({errorPath:h},{instancePath:v}){const m=v?o.str`${h}${(0,s.getErrorPath)(v,s.Type.Str)}`:h;return[a.default.instancePath,(0,o.strConcat)(a.default.instancePath,m)]}function g({keyword:h,it:{errSchemaPath:v}},{schemaPath:m,parentSchema:p}){let y=p?v:o.str`${v}/${h}`;return m&&(y=o.str`${y}${(0,s.getErrorPath)(m,s.Type.Str)}`),[c.schemaPath,y]}},{"./codegen":2,"./names":6,"./util":10}],5:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.resolveSchema=i.getCompilingSchema=i.resolveRef=i.compileSchema=i.SchemaEnv=void 0;const o=t("./codegen"),s=t("../runtime/validation_error"),a=t("./names"),l=t("./resolve"),u=t("./util"),c=t("./validate");class f{constructor(_){var w;let S;this.refs={},this.dynamicAnchors={},typeof _.schema=="object"&&(S=_.schema),this.schema=_.schema,this.schemaId=_.schemaId,this.root=_.root||this,this.baseId=(w=_.baseId)!==null&&w!==void 0?w:(0,l.normalizeId)(S==null?void 0:S[_.schemaId||"$id"]),this.schemaPath=_.schemaPath,this.localRefs=_.localRefs,this.meta=_.meta,this.$async=S==null?void 0:S.$async,this.refs={}}}function d(b){const _=h.call(this,b);if(_)return _;const w=(0,l.getFullPath)(this.opts.uriResolver,b.root.baseId),{es5:S,lines:E}=this.opts.code,{ownProperties:O}=this.opts,R=new o.CodeGen(this.scope,{es5:S,lines:E,ownProperties:O});let D;b.$async&&(D=R.scopeValue("Error",{ref:s.default,code:o._`require("ajv/dist/runtime/validation_error").default`}));const F=R.scopeName("validate");b.validateName=F;const B={gen:R,allErrors:this.opts.allErrors,data:a.default.data,parentData:a.default.parentData,parentDataProperty:a.default.parentDataProperty,dataNames:[a.default.data],dataPathArr:[o.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:R.scopeValue("schema",this.opts.code.source===!0?{ref:b.schema,code:(0,o.stringify)(b.schema)}:{ref:b.schema}),validateName:F,ValidationError:D,schema:b.schema,schemaEnv:b,rootId:w,baseId:b.baseId||w,schemaPath:o.nil,errSchemaPath:b.schemaPath||(this.opts.jtd?"":"#"),errorPath:o._`""`,opts:this.opts,self:this};let H;try{this._compilations.add(b),(0,c.validateFunctionCode)(B),R.optimize(this.opts.code.optimize);const L=R.toString();H=`${R.scopeRefs(a.default.scope)}return ${L}`,this.opts.code.process&&(H=this.opts.code.process(H,b));const N=new Function(`${a.default.self}`,`${a.default.scope}`,H)(this,this.scope.get());if(this.scope.value(F,{ref:N}),N.errors=null,N.schema=b.schema,N.schemaEnv=b,b.$async&&(N.$async=!0),this.opts.code.source===!0&&(N.source={validateName:F,validateCode:L,scopeValues:R._values}),this.opts.unevaluated){const{props:U,items:$}=B;N.evaluated={props:U instanceof o.Name?void 0:U,items:$ instanceof o.Name?void 0:$,dynamicProps:U instanceof o.Name,dynamicItems:$ instanceof o.Name},N.source&&(N.source.evaluated=(0,o.stringify)(N.evaluated))}return b.validate=N,b}catch(L){throw delete b.validate,delete b.validateName,H&&this.logger.error("Error compiling schema, function code:",H),L}finally{this._compilations.delete(b)}}function g(b){return(0,l.inlineRef)(b.schema,this.opts.inlineRefs)?b.schema:b.validate?b:d.call(this,b)}function h(b){for(const S of this._compilations)if((_=S).schema===(w=b).schema&&_.root===w.root&&_.baseId===w.baseId)return S;var _,w}function v(b,_){let w;for(;typeof(w=this.refs[_])=="string";)_=w;return w||this.schemas[_]||m.call(this,b,_)}function m(b,_){const w=this.opts.uriResolver.parse(_),S=(0,l._getFullPath)(this.opts.uriResolver,w);let E=(0,l.getFullPath)(this.opts.uriResolver,b.baseId,void 0);if(Object.keys(b.schema).length>0&&S===E)return y.call(this,w,b);const O=(0,l.normalizeId)(S),R=this.refs[O]||this.schemas[O];if(typeof R=="string"){const D=m.call(this,b,R);return typeof(D==null?void 0:D.schema)!="object"?void 0:y.call(this,w,D)}if(typeof(R==null?void 0:R.schema)=="object"){if(R.validate||d.call(this,R),O===(0,l.normalizeId)(_)){const{schema:D}=R,{schemaId:F}=this.opts,B=D[F];return B&&(E=(0,l.resolveUrl)(this.opts.uriResolver,E,B)),new f({schema:D,schemaId:F,root:b,baseId:E})}return y.call(this,w,R)}}i.SchemaEnv=f,i.compileSchema=d,i.resolveRef=function(b,_,w){var S;w=(0,l.resolveUrl)(this.opts.uriResolver,_,w);const E=b.refs[w];if(E)return E;let O=v.call(this,b,w);if(O===void 0){const R=(S=b.localRefs)===null||S===void 0?void 0:S[w],{schemaId:D}=this.opts;R&&(O=new f({schema:R,schemaId:D,root:b,baseId:_}))}return O!==void 0?b.refs[w]=g.call(this,O):void 0},i.getCompilingSchema=h,i.resolveSchema=m;const p=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function y(b,{baseId:_,schema:w,root:S}){var E;if(((E=b.fragment)===null||E===void 0?void 0:E[0])!=="/")return;for(const D of b.fragment.slice(1).split("/")){if(typeof w=="boolean")return;const F=w[(0,u.unescapeFragment)(D)];if(F===void 0)return;const B=typeof(w=F)=="object"&&w[this.opts.schemaId];!p.has(D)&&B&&(_=(0,l.resolveUrl)(this.opts.uriResolver,_,B))}let O;if(typeof w!="boolean"&&w.$ref&&!(0,u.schemaHasRulesButRef)(w,this.RULES)){const D=(0,l.resolveUrl)(this.opts.uriResolver,_,w.$ref);O=m.call(this,S,D)}const{schemaId:R}=this.opts;return O=O||new f({schema:w,schemaId:R,root:S,baseId:_}),O.schema!==O.root.schema?O:void 0}},{"../runtime/validation_error":24,"./codegen":2,"./names":6,"./resolve":8,"./util":10,"./validate":15}],6:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("./codegen"),s={data:new o.Name("data"),valCxt:new o.Name("valCxt"),instancePath:new o.Name("instancePath"),parentData:new o.Name("parentData"),parentDataProperty:new o.Name("parentDataProperty"),rootData:new o.Name("rootData"),dynamicAnchors:new o.Name("dynamicAnchors"),vErrors:new o.Name("vErrors"),errors:new o.Name("errors"),this:new o.Name("this"),self:new o.Name("self"),scope:new o.Name("scope"),json:new o.Name("json"),jsonPos:new o.Name("jsonPos"),jsonLen:new o.Name("jsonLen"),jsonPart:new o.Name("jsonPart")};i.default=s},{"./codegen":2}],7:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("./resolve");class s extends Error{constructor(l,u,c,f){super(f||`can't resolve reference ${c} from id ${u}`),this.missingRef=(0,o.resolveUrl)(l,u,c),this.missingSchema=(0,o.normalizeId)((0,o.getFullPath)(l,this.missingRef))}}i.default=s},{"./resolve":8}],8:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.getSchemaRefs=i.resolveUrl=i.normalizeId=i._getFullPath=i.getFullPath=i.inlineRef=void 0;const o=t("./util"),s=t("fast-deep-equal"),a=t("json-schema-traverse"),l=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);i.inlineRef=function(p,y=!0){return typeof p=="boolean"||(y===!0?!c(p):!!y&&f(p)<=y)};const u=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function c(p){for(const y in p){if(u.has(y))return!0;const b=p[y];if(Array.isArray(b)&&b.some(c)||typeof b=="object"&&c(b))return!0}return!1}function f(p){let y=0;for(const b in p)if(b==="$ref"||(y++,!l.has(b)&&(typeof p[b]=="object"&&(0,o.eachItem)(p[b],_=>y+=f(_)),y===1/0)))return 1/0;return y}function d(p,y="",b){b!==!1&&(y=v(y));const _=p.parse(y);return g(p,_)}function g(p,y){return p.serialize(y).split("#")[0]+"#"}i.getFullPath=d,i._getFullPath=g;const h=/#\/?$/;function v(p){return p?p.replace(h,""):""}i.normalizeId=v,i.resolveUrl=function(p,y,b){return b=v(b),p.resolve(y,b)};const m=/^[a-z_][-a-z0-9._]*$/i;i.getSchemaRefs=function(p,y){if(typeof p=="boolean")return{};const{schemaId:b,uriResolver:_}=this.opts,w=v(p[b]||y),S={"":w},E=d(_,w,!1),O={},R=new Set;return a(p,{allKeys:!0},(B,H,L,N)=>{if(N===void 0)return;const U=E+H;let $=S[N];function Z(P){if(P=v($?(0,this.opts.uriResolver.resolve)($,P):P),R.has(P))throw F(P);R.add(P);let V=this.refs[P];return typeof V=="string"&&(V=this.refs[V]),typeof V=="object"?D(B,V.schema,P):P!==v(U)&&(P[0]==="#"?(D(B,O[P],P),O[P]=B):this.refs[P]=U),P}function A(P){if(typeof P=="string"){if(!m.test(P))throw new Error(`invalid anchor "${P}"`);Z.call(this,`#${P}`)}}typeof B[b]=="string"&&($=Z.call(this,B[b])),A.call(this,B.$anchor),A.call(this,B.$dynamicAnchor),S[H]=$}),O;function D(B,H,L){if(H!==void 0&&!s(B,H))throw F(L)}function F(B){return new Error(`reference "${B}" resolves to more than one schema`)}}},{"./util":10,"fast-deep-equal":63,"json-schema-traverse":64}],9:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.getRules=i.isJSONType=void 0;const o=new Set(["string","number","integer","boolean","null","object","array"]);i.isJSONType=function(s){return typeof s=="string"&&o.has(s)},i.getRules=function(){const s={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...s,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},s.number,s.string,s.array,s.object],post:{rules:[]},all:{},keywords:{}}}},{}],10:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.checkStrictMode=i.getErrorPath=i.Type=i.useFunc=i.setEvaluated=i.evaluatedPropsToName=i.mergeEvaluated=i.eachItem=i.unescapeJsonPointer=i.escapeJsonPointer=i.escapeFragment=i.unescapeFragment=i.schemaRefOrVal=i.schemaHasRulesButRef=i.schemaHasRules=i.checkUnknownRules=i.alwaysValidSchema=i.toHash=void 0;const o=t("./codegen"),s=t("./codegen/code");function a(p,y=p.schema){const{opts:b,self:_}=p;if(!b.strictSchema||typeof y=="boolean")return;const w=_.RULES.keywords;for(const S in y)w[S]||m(p,`unknown keyword: "${S}"`)}function l(p,y){if(typeof p=="boolean")return!p;for(const b in p)if(y[b])return!0;return!1}function u(p){return typeof p=="number"?`${p}`:p.replace(/~/g,"~0").replace(/\//g,"~1")}function c(p){return p.replace(/~1/g,"/").replace(/~0/g,"~")}function f({mergeNames:p,mergeToName:y,mergeValues:b,resultToName:_}){return(w,S,E,O)=>{const R=E===void 0?S:E instanceof o.Name?(S instanceof o.Name?p(w,S,E):y(w,S,E),E):S instanceof o.Name?(y(w,E,S),S):b(S,E);return O!==o.Name||R instanceof o.Name?R:_(w,R)}}function d(p,y){if(y===!0)return p.var("props",!0);const b=p.var("props",o._`{}`);return y!==void 0&&g(p,b,y),b}function g(p,y,b){Object.keys(b).forEach(_=>p.assign(o._`${y}${(0,o.getProperty)(_)}`,!0))}i.toHash=function(p){const y={};for(const b of p)y[b]=!0;return y},i.alwaysValidSchema=function(p,y){return typeof y=="boolean"?y:Object.keys(y).length===0||(a(p,y),!l(y,p.self.RULES.all))},i.checkUnknownRules=a,i.schemaHasRules=l,i.schemaHasRulesButRef=function(p,y){if(typeof p=="boolean")return!p;for(const b in p)if(b!=="$ref"&&y.all[b])return!0;return!1},i.schemaRefOrVal=function({topSchemaRef:p,schemaPath:y},b,_,w){if(!w){if(typeof b=="number"||typeof b=="boolean")return b;if(typeof b=="string")return o._`${b}`}return o._`${p}${y}${(0,o.getProperty)(_)}`},i.unescapeFragment=function(p){return c(decodeURIComponent(p))},i.escapeFragment=function(p){return encodeURIComponent(u(p))},i.escapeJsonPointer=u,i.unescapeJsonPointer=c,i.eachItem=function(p,y){if(Array.isArray(p))for(const b of p)y(b);else y(p)},i.mergeEvaluated={props:f({mergeNames(p,y,b){return p.if(o._`${b} !== true && ${y} !== undefined`,()=>{p.if(o._`${y} === true`,()=>p.assign(b,!0),()=>p.assign(b,o._`${b} || {}`).code(o._`Object.assign(${b}, ${y})`))})},mergeToName(p,y,b){return p.if(o._`${b} !== true`,()=>{y===!0?p.assign(b,!0):(p.assign(b,o._`${b} || {}`),g(p,b,y))})},mergeValues(p,y){return p===!0||{...p,...y}},resultToName:d}),items:f({mergeNames(p,y,b){return p.if(o._`${b} !== true && ${y} !== undefined`,()=>p.assign(b,o._`${y} === true ? true : ${b} > ${y} ? ${b} : ${y}`))},mergeToName(p,y,b){return p.if(o._`${b} !== true`,()=>p.assign(b,y===!0||o._`${b} > ${y} ? ${b} : ${y}`))},mergeValues(p,y){return p===!0||Math.max(p,y)},resultToName(p,y){return p.var("items",y)}})},i.evaluatedPropsToName=d,i.setEvaluated=g;const h={};var v;function m(p,y,b=p.opts.strictSchema){if(b){if(y=`strict mode: ${y}`,b===!0)throw new Error(y);p.self.logger.warn(y)}}i.useFunc=function(p,y){return p.scopeValue("func",{ref:y,code:h[y.code]||(h[y.code]=new s._Code(y.code))})},function(p){p[p.Num=0]="Num",p[p.Str=1]="Str"}(v=i.Type||(i.Type={})),i.getErrorPath=function(p,y,b){if(p instanceof o.Name){const _=y===v.Num;return b?_?o._`"[" + ${p} + "]"`:o._`"['" + ${p} + "']"`:_?o._`"/" + ${p}`:o._`"/" + ${p}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return b?(0,o.getProperty)(p).toString():"/"+u(p)},i.checkStrictMode=m},{"./codegen":2,"./codegen/code":1}],11:[function(t,r,i){function o(a,l){return l.rules.some(u=>s(a,u))}function s(a,l){var u;return a[l.keyword]!==void 0||((u=l.definition.implements)===null||u===void 0?void 0:u.some(c=>a[c]!==void 0))}Object.defineProperty(i,"__esModule",{value:!0}),i.shouldUseRule=i.shouldUseGroup=i.schemaHasRulesForType=void 0,i.schemaHasRulesForType=function({schema:a,self:l},u){const c=l.RULES.types[u];return c&&c!==!0&&o(a,c)},i.shouldUseGroup=o,i.shouldUseRule=s},{}],12:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.boolOrEmptySchema=i.topBoolOrEmptySchema=void 0;const o=t("../errors"),s=t("../codegen"),a=t("../names"),l={message:"boolean schema is false"};function u(c,f){const{gen:d,data:g}=c;(0,o.reportError)({gen:d,keyword:"false schema",data:g,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:c},l,void 0,f)}i.topBoolOrEmptySchema=function(c){const{gen:f,schema:d,validateName:g}=c;d===!1?u(c,!1):typeof d=="object"&&d.$async===!0?f.return(a.default.data):(f.assign(s._`${g}.errors`,null),f.return(!0))},i.boolOrEmptySchema=function(c,f){const{gen:d,schema:g}=c;g===!1?(d.var(f,!1),u(c)):d.var(f,!0)}},{"../codegen":2,"../errors":4,"../names":6}],13:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.reportTypeError=i.checkDataTypes=i.checkDataType=i.coerceAndCheckDataType=i.getJSONTypes=i.getSchemaTypes=i.DataType=void 0;const o=t("../rules"),s=t("./applicability"),a=t("../errors"),l=t("../codegen"),u=t("../util");var c;function f(p){const y=Array.isArray(p)?p:p?[p]:[];if(y.every(o.isJSONType))return y;throw new Error("type must be JSONType or JSONType[]: "+y.join(","))}(function(p){p[p.Correct=0]="Correct",p[p.Wrong=1]="Wrong"})(c=i.DataType||(i.DataType={})),i.getSchemaTypes=function(p){const y=f(p.type);if(y.includes("null")){if(p.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!y.length&&p.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');p.nullable===!0&&y.push("null")}return y},i.getJSONTypes=f,i.coerceAndCheckDataType=function(p,y){const{gen:b,data:_,opts:w}=p,S=function(O,R){return R?O.filter(D=>d.has(D)||R==="array"&&D==="array"):[]}(y,w.coerceTypes),E=y.length>0&&!(S.length===0&&y.length===1&&(0,s.schemaHasRulesForType)(p,y[0]));if(E){const O=h(y,_,w.strictNumbers,c.Wrong);b.if(O,()=>{S.length?function(R,D,F){const{gen:B,data:H,opts:L}=R,N=B.let("dataType",l._`typeof ${H}`),U=B.let("coerced",l._`undefined`);L.coerceTypes==="array"&&B.if(l._`${N} == 'object' && Array.isArray(${H}) && ${H}.length == 1`,()=>B.assign(H,l._`${H}[0]`).assign(N,l._`typeof ${H}`).if(h(D,H,L.strictNumbers),()=>B.assign(U,H))),B.if(l._`${U} !== undefined`);for(const Z of F)(d.has(Z)||Z==="array"&&L.coerceTypes==="array")&&$(Z);function $(Z){switch(Z){case"string":return void B.elseIf(l._`${N} == "number" || ${N} == "boolean"`).assign(U,l._`"" + ${H}`).elseIf(l._`${H} === null`).assign(U,l._`""`);case"number":return void B.elseIf(l._`${N} == "boolean" || ${H} === null
	              || (${N} == "string" && ${H} && ${H} == +${H})`).assign(U,l._`+${H}`);case"integer":return void B.elseIf(l._`${N} === "boolean" || ${H} === null
	              || (${N} === "string" && ${H} && ${H} == +${H} && !(${H} % 1))`).assign(U,l._`+${H}`);case"boolean":return void B.elseIf(l._`${H} === "false" || ${H} === 0 || ${H} === null`).assign(U,!1).elseIf(l._`${H} === "true" || ${H} === 1`).assign(U,!0);case"null":return B.elseIf(l._`${H} === "" || ${H} === 0 || ${H} === false`),void B.assign(U,null);case"array":B.elseIf(l._`${N} === "string" || ${N} === "number"
	              || ${N} === "boolean" || ${H} === null`).assign(U,l._`[${H}]`)}}B.else(),m(R),B.endIf(),B.if(l._`${U} !== undefined`,()=>{B.assign(H,U),function({gen:Z,parentData:A,parentDataProperty:P},V){Z.if(l._`${A} !== undefined`,()=>Z.assign(l._`${A}[${P}]`,V))}(R,U)})}(p,y,S):m(p)})}return E};const d=new Set(["string","number","integer","boolean","null"]);function g(p,y,b,_=c.Correct){const w=_===c.Correct?l.operators.EQ:l.operators.NEQ;let S;switch(p){case"null":return l._`${y} ${w} null`;case"array":S=l._`Array.isArray(${y})`;break;case"object":S=l._`${y} && typeof ${y} == "object" && !Array.isArray(${y})`;break;case"integer":S=E(l._`!(${y} % 1) && !isNaN(${y})`);break;case"number":S=E();break;default:return l._`typeof ${y} ${w} ${p}`}return _===c.Correct?S:(0,l.not)(S);function E(O=l.nil){return(0,l.and)(l._`typeof ${y} == "number"`,O,b?l._`isFinite(${y})`:l.nil)}}function h(p,y,b,_){if(p.length===1)return g(p[0],y,b,_);let w;const S=(0,u.toHash)(p);if(S.array&&S.object){const E=l._`typeof ${y} != "object"`;w=S.null?E:l._`!${y} || ${E}`,delete S.null,delete S.array,delete S.object}else w=l.nil;S.number&&delete S.integer;for(const E in S)w=(0,l.and)(w,g(E,y,b,_));return w}i.checkDataType=g,i.checkDataTypes=h;const v={message({schema:p}){return`must be ${p}`},params({schema:p,schemaValue:y}){return typeof p=="string"?l._`{type: ${p}}`:l._`{type: ${y}}`}};function m(p){const y=function(b){const{gen:_,data:w,schema:S}=b,E=(0,u.schemaRefOrVal)(b,S,"type");return{gen:_,keyword:"type",data:w,schema:S.type,schemaCode:E,schemaValue:E,parentSchema:S,params:{},it:b}}(p);(0,a.reportError)(y,v)}i.reportTypeError=m},{"../codegen":2,"../errors":4,"../rules":9,"../util":10,"./applicability":11}],14:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.assignDefaults=void 0;const o=t("../codegen"),s=t("../util");function a(l,u,c){const{gen:f,compositeRule:d,data:g,opts:h}=l;if(c===void 0)return;const v=o._`${g}${(0,o.getProperty)(u)}`;if(d)return void(0,s.checkStrictMode)(l,`default is ignored for: ${v}`);let m=o._`${v} === undefined`;h.useDefaults==="empty"&&(m=o._`${m} || ${v} === null || ${v} === ""`),f.if(m,o._`${v} = ${(0,o.stringify)(c)}`)}i.assignDefaults=function(l,u){const{properties:c,items:f}=l.schema;if(u==="object"&&c)for(const d in c)a(l,d,c[d].default);else u==="array"&&Array.isArray(f)&&f.forEach((d,g)=>a(l,g,d.default))}},{"../codegen":2,"../util":10}],15:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.getData=i.KeywordCxt=i.validateFunctionCode=void 0;const o=t("./boolSchema"),s=t("./dataType"),a=t("./applicability"),l=t("./dataType"),u=t("./defaults"),c=t("./keyword"),f=t("./subschema"),d=t("../codegen"),g=t("../names"),h=t("../resolve"),v=t("../util"),m=t("../errors");function p({gen:A,validateName:P,schema:V,schemaEnv:W,opts:z},I){z.code.es5?A.func(P,d._`${g.default.data}, ${g.default.valCxt}`,W.$async,()=>{A.code(d._`"use strict"; ${y(V,z)}`),function(M,J){M.if(g.default.valCxt,()=>{M.var(g.default.instancePath,d._`${g.default.valCxt}.${g.default.instancePath}`),M.var(g.default.parentData,d._`${g.default.valCxt}.${g.default.parentData}`),M.var(g.default.parentDataProperty,d._`${g.default.valCxt}.${g.default.parentDataProperty}`),M.var(g.default.rootData,d._`${g.default.valCxt}.${g.default.rootData}`),J.dynamicRef&&M.var(g.default.dynamicAnchors,d._`${g.default.valCxt}.${g.default.dynamicAnchors}`)},()=>{M.var(g.default.instancePath,d._`""`),M.var(g.default.parentData,d._`undefined`),M.var(g.default.parentDataProperty,d._`undefined`),M.var(g.default.rootData,g.default.data),J.dynamicRef&&M.var(g.default.dynamicAnchors,d._`{}`)})}(A,z),A.code(I)}):A.func(P,d._`${g.default.data}, ${function(M){return d._`{${g.default.instancePath}="", ${g.default.parentData}, ${g.default.parentDataProperty}, ${g.default.rootData}=${g.default.data}${M.dynamicRef?d._`, ${g.default.dynamicAnchors}={}`:d.nil}}={}`}(z)}`,W.$async,()=>A.code(y(V,z)).code(I))}function y(A,P){const V=typeof A=="object"&&A[P.schemaId];return V&&(P.code.source||P.code.process)?d._`/*# sourceURL=${V} */`:d.nil}function b(A,P){w(A)&&(S(A),_(A))?function(V,W){const{schema:z,gen:I,opts:M}=V;M.$comment&&z.$comment&&O(V),function(q){const Q=q.schema[q.opts.schemaId];Q&&(q.baseId=(0,h.resolveUrl)(q.opts.uriResolver,q.baseId,Q))}(V),function(q){if(q.schema.$async&&!q.schemaEnv.$async)throw new Error("async schema in sync schema")}(V);const J=I.const("_errs",g.default.errors);E(V,J),I.var(W,d._`${J} === ${g.default.errors}`)}(A,P):(0,o.boolOrEmptySchema)(A,P)}function _({schema:A,self:P}){if(typeof A=="boolean")return!A;for(const V in A)if(P.RULES.all[V])return!0;return!1}function w(A){return typeof A.schema!="boolean"}function S(A){(0,v.checkUnknownRules)(A),function(P){const{schema:V,errSchemaPath:W,opts:z,self:I}=P;V.$ref&&z.ignoreKeywordsWithRef&&(0,v.schemaHasRulesButRef)(V,I.RULES)&&I.logger.warn(`$ref: keywords ignored in schema at path "${W}"`)}(A)}function E(A,P){if(A.opts.jtd)return R(A,[],!1,P);const V=(0,s.getSchemaTypes)(A.schema);R(A,V,!(0,s.coerceAndCheckDataType)(A,V),P)}function O({gen:A,schemaEnv:P,schema:V,errSchemaPath:W,opts:z}){const I=V.$comment;if(z.$comment===!0)A.code(d._`${g.default.self}.logger.log(${I})`);else if(typeof z.$comment=="function"){const M=d.str`${W}/$comment`,J=A.scopeValue("root",{ref:P.root});A.code(d._`${g.default.self}.opts.$comment(${I}, ${M}, ${J}.schema)`)}}function R(A,P,V,W){const{gen:z,schema:I,data:M,allErrors:J,opts:q,self:Q}=A,{RULES:ae}=Q;function he(Pe){(0,a.shouldUseGroup)(I,Pe)&&(Pe.type?(z.if((0,l.checkDataType)(Pe.type,M,q.strictNumbers)),D(A,Pe),P.length===1&&P[0]===Pe.type&&V&&(z.else(),(0,l.reportTypeError)(A)),z.endIf()):D(A,Pe),J||z.if(d._`${g.default.errors} === ${W||0}`))}!I.$ref||!q.ignoreKeywordsWithRef&&(0,v.schemaHasRulesButRef)(I,ae)?(q.jtd||function(Pe,Fe){Pe.schemaEnv.meta||!Pe.opts.strictTypes||(function(Ae,ye){if(!!ye.length){if(!Ae.dataTypes.length)return void(Ae.dataTypes=ye);ye.forEach(Me=>{B(Ae.dataTypes,Me)||H(Ae,`type "${Me}" not allowed by context "${Ae.dataTypes.join(",")}"`)}),Ae.dataTypes=Ae.dataTypes.filter(Me=>B(ye,Me))}}(Pe,Fe),Pe.opts.allowUnionTypes||function(Ae,ye){ye.length>1&&(ye.length!==2||!ye.includes("null"))&&H(Ae,"use allowUnionTypes to allow union type keyword")}(Pe,Fe),function(Ae,ye){const Me=Ae.self.RULES.all;for(const xe in Me){const fe=Me[xe];if(typeof fe=="object"&&(0,a.shouldUseRule)(Ae.schema,fe)){const{type:ve}=fe.definition;ve.length&&!ve.some(de=>F(ye,de))&&H(Ae,`missing type "${ve.join(",")}" for keyword "${xe}"`)}}}(Pe,Pe.dataTypes))}(A,P),z.block(()=>{for(const Pe of ae.rules)he(Pe);he(ae.post)})):z.block(()=>N(A,"$ref",ae.all.$ref.definition))}function D(A,P){const{gen:V,schema:W,opts:{useDefaults:z}}=A;z&&(0,u.assignDefaults)(A,P.type),V.block(()=>{for(const I of P.rules)(0,a.shouldUseRule)(W,I)&&N(A,I.keyword,I.definition,P.type)})}function F(A,P){return A.includes(P)||P==="number"&&A.includes("integer")}function B(A,P){return A.includes(P)||P==="integer"&&A.includes("number")}function H(A,P){(0,v.checkStrictMode)(A,P+=` at "${A.schemaEnv.baseId+A.errSchemaPath}" (strictTypes)`,A.opts.strictTypes)}i.validateFunctionCode=function(A){w(A)&&(S(A),_(A))?function(P){const{schema:V,opts:W,gen:z}=P;p(P,()=>{W.$comment&&V.$comment&&O(P),function(I){const{schema:M,opts:J}=I;M.default!==void 0&&J.useDefaults&&J.strictSchema&&(0,v.checkStrictMode)(I,"default is ignored in the schema root")}(P),z.let(g.default.vErrors,null),z.let(g.default.errors,0),W.unevaluated&&function(I){const{gen:M,validateName:J}=I;I.evaluated=M.const("evaluated",d._`${J}.evaluated`),M.if(d._`${I.evaluated}.dynamicProps`,()=>M.assign(d._`${I.evaluated}.props`,d._`undefined`)),M.if(d._`${I.evaluated}.dynamicItems`,()=>M.assign(d._`${I.evaluated}.items`,d._`undefined`))}(P),E(P),function(I){const{gen:M,schemaEnv:J,validateName:q,ValidationError:Q,opts:ae}=I;J.$async?M.if(d._`${g.default.errors} === 0`,()=>M.return(g.default.data),()=>M.throw(d._`new ${Q}(${g.default.vErrors})`)):(M.assign(d._`${q}.errors`,g.default.vErrors),ae.unevaluated&&function({gen:he,evaluated:Pe,props:Fe,items:Ae}){Fe instanceof d.Name&&he.assign(d._`${Pe}.props`,Fe),Ae instanceof d.Name&&he.assign(d._`${Pe}.items`,Ae)}(I),M.return(d._`${g.default.errors} === 0`))}(P)})}(A):p(A,()=>(0,o.topBoolOrEmptySchema)(A))};class L{constructor(P,V,W){if((0,c.validateKeywordUsage)(P,V,W),this.gen=P.gen,this.allErrors=P.allErrors,this.keyword=W,this.data=P.data,this.schema=P.schema[W],this.$data=V.$data&&P.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,v.schemaRefOrVal)(P,this.schema,W,this.$data),this.schemaType=V.schemaType,this.parentSchema=P.schema,this.params={},this.it=P,this.def=V,this.$data)this.schemaCode=P.gen.const("vSchema",Z(this.$data,P));else if(this.schemaCode=this.schemaValue,!(0,c.validSchemaType)(this.schema,V.schemaType,V.allowUndefined))throw new Error(`${W} value must be ${JSON.stringify(V.schemaType)}`);("code"in V?V.trackErrors:V.errors!==!1)&&(this.errsCount=P.gen.const("_errs",g.default.errors))}result(P,V,W){this.failResult((0,d.not)(P),V,W)}failResult(P,V,W){this.gen.if(P),W?W():this.error(),V?(this.gen.else(),V(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(P,V){this.failResult((0,d.not)(P),void 0,V)}fail(P){if(P===void 0)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(P),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(P){if(!this.$data)return this.fail(P);const{schemaCode:V}=this;this.fail(d._`${V} !== undefined && (${(0,d.or)(this.invalid$data(),P)})`)}error(P,V,W){if(V)return this.setParams(V),this._error(P,W),void this.setParams({});this._error(P,W)}_error(P,V){(P?m.reportExtraError:m.reportError)(this,this.def.error,V)}$dataError(){(0,m.reportError)(this,this.def.$dataError||m.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,m.resetErrorsCount)(this.gen,this.errsCount)}ok(P){this.allErrors||this.gen.if(P)}setParams(P,V){V?Object.assign(this.params,P):this.params=P}block$data(P,V,W=d.nil){this.gen.block(()=>{this.check$data(P,W),V()})}check$data(P=d.nil,V=d.nil){if(!this.$data)return;const{gen:W,schemaCode:z,schemaType:I,def:M}=this;W.if((0,d.or)(d._`${z} === undefined`,V)),P!==d.nil&&W.assign(P,!0),(I.length||M.validateSchema)&&(W.elseIf(this.invalid$data()),this.$dataError(),P!==d.nil&&W.assign(P,!1)),W.else()}invalid$data(){const{gen:P,schemaCode:V,schemaType:W,def:z,it:I}=this;return(0,d.or)(function(){if(W.length){if(!(V instanceof d.Name))throw new Error("ajv implementation error");const M=Array.isArray(W)?W:[W];return d._`${(0,l.checkDataTypes)(M,V,I.opts.strictNumbers,l.DataType.Wrong)}`}return d.nil}(),function(){if(z.validateSchema){const M=P.scopeValue("validate$data",{ref:z.validateSchema});return d._`!${M}(${V})`}return d.nil}())}subschema(P,V){const W=(0,f.getSubschema)(this.it,P);(0,f.extendSubschemaData)(W,this.it,P),(0,f.extendSubschemaMode)(W,P);const z={...this.it,...W,items:void 0,props:void 0};return b(z,V),z}mergeEvaluated(P,V){const{it:W,gen:z}=this;W.opts.unevaluated&&(W.props!==!0&&P.props!==void 0&&(W.props=v.mergeEvaluated.props(z,P.props,W.props,V)),W.items!==!0&&P.items!==void 0&&(W.items=v.mergeEvaluated.items(z,P.items,W.items,V)))}mergeValidEvaluated(P,V){const{it:W,gen:z}=this;if(W.opts.unevaluated&&(W.props!==!0||W.items!==!0))return z.if(V,()=>this.mergeEvaluated(P,d.Name)),!0}}function N(A,P,V,W){const z=new L(A,V,P);"code"in V?V.code(z,W):z.$data&&V.validate?(0,c.funcKeywordCode)(z,V):"macro"in V?(0,c.macroKeywordCode)(z,V):(V.compile||V.validate)&&(0,c.funcKeywordCode)(z,V)}i.KeywordCxt=L;const U=/^\/(?:[^~]|~0|~1)*$/,$=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Z(A,{dataLevel:P,dataNames:V,dataPathArr:W}){let z,I;if(A==="")return g.default.rootData;if(A[0]==="/"){if(!U.test(A))throw new Error(`Invalid JSON-pointer: ${A}`);z=A,I=g.default.rootData}else{const Q=$.exec(A);if(!Q)throw new Error(`Invalid JSON-pointer: ${A}`);const ae=+Q[1];if(z=Q[2],z==="#"){if(ae>=P)throw new Error(q("property/index",ae));return W[P-ae]}if(ae>P)throw new Error(q("data",ae));if(I=V[P-ae],!z)return I}let M=I;const J=z.split("/");for(const Q of J)Q&&(I=d._`${I}${(0,d.getProperty)((0,v.unescapeJsonPointer)(Q))}`,M=d._`${M} && ${I}`);return M;function q(Q,ae){return`Cannot access ${Q} ${ae} levels up, current level is ${P}`}}i.getData=Z},{"../codegen":2,"../errors":4,"../names":6,"../resolve":8,"../util":10,"./applicability":11,"./boolSchema":12,"./dataType":13,"./defaults":14,"./keyword":16,"./subschema":17}],16:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.validateKeywordUsage=i.validSchemaType=i.funcKeywordCode=i.macroKeywordCode=void 0;const o=t("../codegen"),s=t("../names"),a=t("../../vocabularies/code"),l=t("../errors");function u(f){const{gen:d,data:g,it:h}=f;d.if(h.parentData,()=>d.assign(g,o._`${h.parentData}[${h.parentDataProperty}]`))}function c(f,d,g){if(g===void 0)throw new Error(`keyword "${d}" failed to compile`);return f.scopeValue("keyword",typeof g=="function"?{ref:g}:{ref:g,code:(0,o.stringify)(g)})}i.macroKeywordCode=function(f,d){const{gen:g,keyword:h,schema:v,parentSchema:m,it:p}=f,y=d.macro.call(p.self,v,m,p),b=c(g,h,y);p.opts.validateSchema!==!1&&p.self.validateSchema(y,!0);const _=g.name("valid");f.subschema({schema:y,schemaPath:o.nil,errSchemaPath:`${p.errSchemaPath}/${h}`,topSchemaRef:b,compositeRule:!0},_),f.pass(_,()=>f.error(!0))},i.funcKeywordCode=function(f,d){var g;const{gen:h,keyword:v,schema:m,parentSchema:p,$data:y,it:b}=f;(function({schemaEnv:R},D){if(D.async&&!R.$async)throw new Error("async keyword in sync schema")})(b,d);const _=!y&&d.compile?d.compile.call(b.self,m,p,b):d.validate,w=c(h,v,_),S=h.let("valid");function E(R=d.async?o._`await `:o.nil){h.assign(S,o._`${R}${(0,a.callValidateCode)(f,w,b.opts.passContext?s.default.this:s.default.self,!("compile"in d&&!y||d.schema===!1))}`,d.modifying)}function O(R){var D;h.if((0,o.not)((D=d.valid)!==null&&D!==void 0?D:S),R)}f.block$data(S,function(){if(d.errors===!1)E(),d.modifying&&u(f),O(()=>f.error());else{const R=d.async?function(){const D=h.let("ruleErrs",null);return h.try(()=>E(o._`await `),F=>h.assign(S,!1).if(o._`${F} instanceof ${b.ValidationError}`,()=>h.assign(D,o._`${F}.errors`),()=>h.throw(F))),D}():function(){const D=o._`${w}.errors`;return h.assign(D,null),E(o.nil),D}();d.modifying&&u(f),O(()=>function(D,F){const{gen:B}=D;B.if(o._`Array.isArray(${F})`,()=>{B.assign(s.default.vErrors,o._`${s.default.vErrors} === null ? ${F} : ${s.default.vErrors}.concat(${F})`).assign(s.default.errors,o._`${s.default.vErrors}.length`),(0,l.extendErrors)(D)},()=>D.error())}(f,R))}}),f.ok((g=d.valid)!==null&&g!==void 0?g:S)},i.validSchemaType=function(f,d,g=!1){return!d.length||d.some(h=>h==="array"?Array.isArray(f):h==="object"?f&&typeof f=="object"&&!Array.isArray(f):typeof f==h||g&&f===void 0)},i.validateKeywordUsage=function({schema:f,opts:d,self:g,errSchemaPath:h},v,m){if(Array.isArray(v.keyword)?!v.keyword.includes(m):v.keyword!==m)throw new Error("ajv implementation error");const p=v.dependencies;if(p!=null&&p.some(y=>!Object.prototype.hasOwnProperty.call(f,y)))throw new Error(`parent schema must have dependencies of ${m}: ${p.join(",")}`);if(v.validateSchema&&!v.validateSchema(f[m])){const y=`keyword "${m}" value is invalid at path "${h}": `+g.errorsText(v.validateSchema.errors);if(d.validateSchema!=="log")throw new Error(y);g.logger.error(y)}}},{"../../vocabularies/code":42,"../codegen":2,"../errors":4,"../names":6}],17:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.extendSubschemaMode=i.extendSubschemaData=i.getSubschema=void 0;const o=t("../codegen"),s=t("../util");i.getSubschema=function(a,{keyword:l,schemaProp:u,schema:c,schemaPath:f,errSchemaPath:d,topSchemaRef:g}){if(l!==void 0&&c!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(l!==void 0){const h=a.schema[l];return u===void 0?{schema:h,schemaPath:o._`${a.schemaPath}${(0,o.getProperty)(l)}`,errSchemaPath:`${a.errSchemaPath}/${l}`}:{schema:h[u],schemaPath:o._`${a.schemaPath}${(0,o.getProperty)(l)}${(0,o.getProperty)(u)}`,errSchemaPath:`${a.errSchemaPath}/${l}/${(0,s.escapeFragment)(u)}`}}if(c!==void 0){if(f===void 0||d===void 0||g===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:c,schemaPath:f,topSchemaRef:g,errSchemaPath:d}}throw new Error('either "keyword" or "schema" must be passed')},i.extendSubschemaData=function(a,l,{dataProp:u,dataPropType:c,data:f,dataTypes:d,propertyName:g}){if(f!==void 0&&u!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:h}=l;if(u!==void 0){const{errorPath:m,dataPathArr:p,opts:y}=l;v(h.let("data",o._`${l.data}${(0,o.getProperty)(u)}`,!0)),a.errorPath=o.str`${m}${(0,s.getErrorPath)(u,c,y.jsPropertySyntax)}`,a.parentDataProperty=o._`${u}`,a.dataPathArr=[...p,a.parentDataProperty]}f!==void 0&&(v(f instanceof o.Name?f:h.let("data",f,!0)),g!==void 0&&(a.propertyName=g));function v(m){a.data=m,a.dataLevel=l.dataLevel+1,a.dataTypes=[],l.definedProperties=new Set,a.parentData=l.data,a.dataNames=[...l.dataNames,m]}d&&(a.dataTypes=d)},i.extendSubschemaMode=function(a,{jtdDiscriminator:l,jtdMetadata:u,compositeRule:c,createErrors:f,allErrors:d}){c!==void 0&&(a.compositeRule=c),f!==void 0&&(a.createErrors=f),d!==void 0&&(a.allErrors=d),a.jtdDiscriminator=l,a.jtdMetadata=u}},{"../codegen":2,"../util":10}],18:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.CodeGen=i.Name=i.nil=i.stringify=i.str=i._=i.KeywordCxt=void 0;var o=t("./compile/validate");Object.defineProperty(i,"KeywordCxt",{enumerable:!0,get(){return o.KeywordCxt}});var s=t("./compile/codegen");Object.defineProperty(i,"_",{enumerable:!0,get(){return s._}}),Object.defineProperty(i,"str",{enumerable:!0,get(){return s.str}}),Object.defineProperty(i,"stringify",{enumerable:!0,get(){return s.stringify}}),Object.defineProperty(i,"nil",{enumerable:!0,get(){return s.nil}}),Object.defineProperty(i,"Name",{enumerable:!0,get(){return s.Name}}),Object.defineProperty(i,"CodeGen",{enumerable:!0,get(){return s.CodeGen}});const a=t("./runtime/validation_error"),l=t("./compile/ref_error"),u=t("./compile/rules"),c=t("./compile"),f=t("./compile/codegen"),d=t("./compile/resolve"),g=t("./compile/validate/dataType"),h=t("./compile/util"),v=t("./refs/data.json"),m=t("./runtime/uri"),p=(W,z)=>new RegExp(W,z);p.code="new RegExp";const y=["removeAdditional","useDefaults","coerceTypes"],b=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),_={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},w={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function S(W){var z,I,M,J,q,Q,ae,he,Pe,Fe,Ae,ye,Me,xe,fe,ve,de,Ie,De,He,Xe,mt,be,Y,x;const C=W.strict,k=(z=W.code)===null||z===void 0?void 0:z.optimize,K=k===!0||k===void 0?1:k||0,ie=(M=(I=W.code)===null||I===void 0?void 0:I.regExp)!==null&&M!==void 0?M:p,pe=(J=W.uriResolver)!==null&&J!==void 0?J:m.default;return{strictSchema:(Q=(q=W.strictSchema)!==null&&q!==void 0?q:C)===null||Q===void 0||Q,strictNumbers:(he=(ae=W.strictNumbers)!==null&&ae!==void 0?ae:C)===null||he===void 0||he,strictTypes:(Fe=(Pe=W.strictTypes)!==null&&Pe!==void 0?Pe:C)!==null&&Fe!==void 0?Fe:"log",strictTuples:(ye=(Ae=W.strictTuples)!==null&&Ae!==void 0?Ae:C)!==null&&ye!==void 0?ye:"log",strictRequired:(xe=(Me=W.strictRequired)!==null&&Me!==void 0?Me:C)!==null&&xe!==void 0&&xe,code:W.code?{...W.code,optimize:K,regExp:ie}:{optimize:K,regExp:ie},loopRequired:(fe=W.loopRequired)!==null&&fe!==void 0?fe:200,loopEnum:(ve=W.loopEnum)!==null&&ve!==void 0?ve:200,meta:(de=W.meta)===null||de===void 0||de,messages:(Ie=W.messages)===null||Ie===void 0||Ie,inlineRefs:(De=W.inlineRefs)===null||De===void 0||De,schemaId:(He=W.schemaId)!==null&&He!==void 0?He:"$id",addUsedSchema:(Xe=W.addUsedSchema)===null||Xe===void 0||Xe,validateSchema:(mt=W.validateSchema)===null||mt===void 0||mt,validateFormats:(be=W.validateFormats)===null||be===void 0||be,unicodeRegExp:(Y=W.unicodeRegExp)===null||Y===void 0||Y,int32range:(x=W.int32range)===null||x===void 0||x,uriResolver:pe}}class E{constructor(z={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,z=this.opts={...z,...S(z)};const{es5:I,lines:M}=this.opts.code;this.scope=new f.ValueScope({scope:{},prefixes:b,es5:I,lines:M}),this.logger=function(q){if(q===!1)return L;if(q===void 0)return console;if(q.log&&q.warn&&q.error)return q;throw new Error("logger must implement log, warn and error methods")}(z.logger);const J=z.validateFormats;z.validateFormats=!1,this.RULES=(0,u.getRules)(),O.call(this,_,z,"NOT SUPPORTED"),O.call(this,w,z,"DEPRECATED","warn"),this._metaOpts=H.call(this),z.formats&&F.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),z.keywords&&B.call(this,z.keywords),typeof z.meta=="object"&&this.addMetaSchema(z.meta),D.call(this),z.validateFormats=J}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:z,meta:I,schemaId:M}=this.opts;let J=v;M==="id"&&(J={...v},J.id=J.$id,delete J.$id),I&&z&&this.addMetaSchema(J,J[M],!1)}defaultMeta(){const{meta:z,schemaId:I}=this.opts;return this.opts.defaultMeta=typeof z=="object"?z[I]||z:void 0}validate(z,I){let M;if(typeof z=="string"){if(M=this.getSchema(z),!M)throw new Error(`no schema with key or ref "${z}"`)}else M=this.compile(z);const J=M(I);return"$async"in M||(this.errors=M.errors),J}compile(z,I){const M=this._addSchema(z,I);return M.validate||this._compileSchemaEnv(M)}compileAsync(z,I){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:M}=this.opts;return J.call(this,z,I);async function J(Fe,Ae){await q.call(this,Fe.$schema);const ye=this._addSchema(Fe,Ae);return ye.validate||Q.call(this,ye)}async function q(Fe){Fe&&!this.getSchema(Fe)&&await J.call(this,{$ref:Fe},!0)}async function Q(Fe){try{return this._compileSchemaEnv(Fe)}catch(Ae){if(!(Ae instanceof l.default))throw Ae;return ae.call(this,Ae),await he.call(this,Ae.missingSchema),Q.call(this,Fe)}}function ae({missingSchema:Fe,missingRef:Ae}){if(this.refs[Fe])throw new Error(`AnySchema ${Fe} is loaded but ${Ae} cannot be resolved`)}async function he(Fe){const Ae=await Pe.call(this,Fe);this.refs[Fe]||await q.call(this,Ae.$schema),this.refs[Fe]||this.addSchema(Ae,Fe,I)}async function Pe(Fe){const Ae=this._loading[Fe];if(Ae)return Ae;try{return await(this._loading[Fe]=M(Fe))}finally{delete this._loading[Fe]}}}addSchema(z,I,M,J=this.opts.validateSchema){if(Array.isArray(z)){for(const Q of z)this.addSchema(Q,void 0,M,J);return this}let q;if(typeof z=="object"){const{schemaId:Q}=this.opts;if(q=z[Q],q!==void 0&&typeof q!="string")throw new Error(`schema ${Q} must be string`)}return I=(0,d.normalizeId)(I||q),this._checkUnique(I),this.schemas[I]=this._addSchema(z,M,I,J,!0),this}addMetaSchema(z,I,M=this.opts.validateSchema){return this.addSchema(z,I,!0,M),this}validateSchema(z,I){if(typeof z=="boolean")return!0;let M;if(M=z.$schema,M!==void 0&&typeof M!="string")throw new Error("$schema must be a string");if(M=M||this.opts.defaultMeta||this.defaultMeta(),!M)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const J=this.validate(M,z);if(!J&&I){const q="schema is invalid: "+this.errorsText();if(this.opts.validateSchema!=="log")throw new Error(q);this.logger.error(q)}return J}getSchema(z){let I;for(;typeof(I=R.call(this,z))=="string";)z=I;if(I===void 0){const{schemaId:M}=this.opts,J=new c.SchemaEnv({schema:{},schemaId:M});if(I=c.resolveSchema.call(this,J,z),!I)return;this.refs[z]=I}return I.validate||this._compileSchemaEnv(I)}removeSchema(z){if(z instanceof RegExp)return this._removeAllSchemas(this.schemas,z),this._removeAllSchemas(this.refs,z),this;switch(typeof z){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const I=R.call(this,z);return typeof I=="object"&&this._cache.delete(I.schema),delete this.schemas[z],delete this.refs[z],this}case"object":{this._cache.delete(z);let I=z[this.opts.schemaId];return I&&(I=(0,d.normalizeId)(I),delete this.schemas[I],delete this.refs[I]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(z){for(const I of z)this.addKeyword(I);return this}addKeyword(z,I){let M;if(typeof z=="string")M=z,typeof I=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),I.keyword=M);else{if(typeof z!="object"||I!==void 0)throw new Error("invalid addKeywords parameters");if(M=(I=z).keyword,Array.isArray(M)&&!M.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(U.call(this,M,I),!I)return(0,h.eachItem)(M,q=>$.call(this,q)),this;A.call(this,I);const J={...I,type:(0,g.getJSONTypes)(I.type),schemaType:(0,g.getJSONTypes)(I.schemaType)};return(0,h.eachItem)(M,J.type.length===0?q=>$.call(this,q,J):q=>J.type.forEach(Q=>$.call(this,q,J,Q))),this}getKeyword(z){const I=this.RULES.all[z];return typeof I=="object"?I.definition:!!I}removeKeyword(z){const{RULES:I}=this;delete I.keywords[z],delete I.all[z];for(const M of I.rules){const J=M.rules.findIndex(q=>q.keyword===z);J>=0&&M.rules.splice(J,1)}return this}addFormat(z,I){return typeof I=="string"&&(I=new RegExp(I)),this.formats[z]=I,this}errorsText(z=this.errors,{separator:I=", ",dataVar:M="data"}={}){return z&&z.length!==0?z.map(J=>`${M}${J.instancePath} ${J.message}`).reduce((J,q)=>J+I+q):"No errors"}$dataMetaSchema(z,I){const M=this.RULES.all;z=JSON.parse(JSON.stringify(z));for(const J of I){const q=J.split("/").slice(1);let Q=z;for(const ae of q)Q=Q[ae];for(const ae in M){const he=M[ae];if(typeof he!="object")continue;const{$data:Pe}=he.definition,Fe=Q[ae];Pe&&Fe&&(Q[ae]=V(Fe))}}return z}_removeAllSchemas(z,I){for(const M in z){const J=z[M];I&&!I.test(M)||(typeof J=="string"?delete z[M]:J&&!J.meta&&(this._cache.delete(J.schema),delete z[M]))}}_addSchema(z,I,M,J=this.opts.validateSchema,q=this.opts.addUsedSchema){let Q;const{schemaId:ae}=this.opts;if(typeof z=="object")Q=z[ae];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof z!="boolean")throw new Error("schema must be object or boolean")}let he=this._cache.get(z);if(he!==void 0)return he;M=(0,d.normalizeId)(Q||M);const Pe=d.getSchemaRefs.call(this,z,M);return he=new c.SchemaEnv({schema:z,schemaId:ae,meta:I,baseId:M,localRefs:Pe}),this._cache.set(he.schema,he),q&&!M.startsWith("#")&&(M&&this._checkUnique(M),this.refs[M]=he),J&&this.validateSchema(z,!0),he}_checkUnique(z){if(this.schemas[z]||this.refs[z])throw new Error(`schema with key or id "${z}" already exists`)}_compileSchemaEnv(z){if(z.meta?this._compileMetaSchema(z):c.compileSchema.call(this,z),!z.validate)throw new Error("ajv implementation error");return z.validate}_compileMetaSchema(z){const I=this.opts;this.opts=this._metaOpts;try{c.compileSchema.call(this,z)}finally{this.opts=I}}}function O(W,z,I,M="error"){for(const J in W){const q=J;q in z&&this.logger[M](`${I}: option ${J}. ${W[q]}`)}}function R(W){return W=(0,d.normalizeId)(W),this.schemas[W]||this.refs[W]}function D(){const W=this.opts.schemas;if(W)if(Array.isArray(W))this.addSchema(W);else for(const z in W)this.addSchema(W[z],z)}function F(){for(const W in this.opts.formats){const z=this.opts.formats[W];z&&this.addFormat(W,z)}}function B(W){if(Array.isArray(W))this.addVocabulary(W);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const z in W){const I=W[z];I.keyword||(I.keyword=z),this.addKeyword(I)}}}function H(){const W={...this.opts};for(const z of y)delete W[z];return W}i.default=E,E.ValidationError=a.default,E.MissingRefError=l.default;const L={log(){},warn(){},error(){}},N=/^[a-z_$][a-z0-9_$:-]*$/i;function U(W,z){const{RULES:I}=this;if((0,h.eachItem)(W,M=>{if(I.keywords[M])throw new Error(`Keyword ${M} is already defined`);if(!N.test(M))throw new Error(`Keyword ${M} has invalid name`)}),z&&z.$data&&!("code"in z)&&!("validate"in z))throw new Error('$data keyword must have "code" or "validate" function')}function $(W,z,I){var M;const J=z==null?void 0:z.post;if(I&&J)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:q}=this;let Q=J?q.post:q.rules.find(({type:he})=>he===I);if(Q||(Q={type:I,rules:[]},q.rules.push(Q)),q.keywords[W]=!0,!z)return;const ae={keyword:W,definition:{...z,type:(0,g.getJSONTypes)(z.type),schemaType:(0,g.getJSONTypes)(z.schemaType)}};z.before?Z.call(this,Q,ae,z.before):Q.rules.push(ae),q.all[W]=ae,(M=z.implements)===null||M===void 0||M.forEach(he=>this.addKeyword(he))}function Z(W,z,I){const M=W.rules.findIndex(J=>J.keyword===I);M>=0?W.rules.splice(M,0,z):(W.rules.push(z),this.logger.warn(`rule ${I} is not defined`))}function A(W){let{metaSchema:z}=W;z!==void 0&&(W.$data&&this.opts.$data&&(z=V(z)),W.validateSchema=this.compile(z,!0))}const P={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function V(W){return{anyOf:[W,P]}}},{"./compile":5,"./compile/codegen":2,"./compile/ref_error":7,"./compile/resolve":8,"./compile/rules":9,"./compile/util":10,"./compile/validate":15,"./compile/validate/dataType":13,"./refs/data.json":19,"./runtime/uri":23,"./runtime/validation_error":24}],19:[function(t,r,i){r.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}},{}],20:[function(t,r,i){r.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}},{}],21:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("fast-deep-equal");o.code='require("ajv/dist/runtime/equal").default',i.default=o},{"fast-deep-equal":63}],22:[function(t,r,i){function o(s){const a=s.length;let l,u=0,c=0;for(;c<a;)u++,l=s.charCodeAt(c++),l>=55296&&l<=56319&&c<a&&(l=s.charCodeAt(c),(64512&l)==56320&&c++);return u}Object.defineProperty(i,"__esModule",{value:!0}),i.default=o,o.code='require("ajv/dist/runtime/ucs2length").default'},{}],23:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("uri-js");o.code='require("ajv/dist/runtime/uri").default',i.default=o},{"uri-js":65}],24:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});class o extends Error{constructor(a){super("validation failed"),this.errors=a,this.ajv=this.validation=!0}}i.default=o},{}],25:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.validateAdditionalItems=void 0;const o=t("../../compile/codegen"),s=t("../../compile/util"),a={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message({params:{len:u}}){return o.str`must NOT have more than ${u} items`},params({params:{len:u}}){return o._`{limit: ${u}}`}},code(u){const{parentSchema:c,it:f}=u,{items:d}=c;Array.isArray(d)?l(u,d):(0,s.checkStrictMode)(f,'"additionalItems" is ignored when "items" is not an array of schemas')}};function l(u,c){const{gen:f,schema:d,data:g,keyword:h,it:v}=u;v.items=!0;const m=f.const("len",o._`${g}.length`);if(d===!1)u.setParams({len:c.length}),u.pass(o._`${m} <= ${c.length}`);else if(typeof d=="object"&&!(0,s.alwaysValidSchema)(v,d)){const p=f.var("valid",o._`${m} <= ${c.length}`);f.if((0,o.not)(p),()=>function(y){f.forRange("i",c.length,m,b=>{u.subschema({keyword:h,dataProp:b,dataPropType:s.Type.Num},y),v.allErrors||f.if((0,o.not)(y),()=>f.break())})}(p)),u.ok(p)}}i.validateAdditionalItems=l,i.default=a},{"../../compile/codegen":2,"../../compile/util":10}],26:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../code"),s=t("../../compile/codegen"),a=t("../../compile/names"),l=t("../../compile/util");i.default={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params({params:u}){return s._`{additionalProperty: ${u.additionalProperty}}`}},code(u){const{gen:c,schema:f,parentSchema:d,data:g,errsCount:h,it:v}=u;if(!h)throw new Error("ajv implementation error");const{allErrors:m,opts:p}=v;if(v.props=!0,p.removeAdditional!=="all"&&(0,l.alwaysValidSchema)(v,f))return;const y=(0,o.allSchemaProperties)(d.properties),b=(0,o.allSchemaProperties)(d.patternProperties);function _(E){c.code(s._`delete ${g}[${E}]`)}function w(E){if(p.removeAdditional==="all"||p.removeAdditional&&f===!1)_(E);else{if(f===!1)return u.setParams({additionalProperty:E}),u.error(),void(m||c.break());if(typeof f=="object"&&!(0,l.alwaysValidSchema)(v,f)){const O=c.name("valid");p.removeAdditional==="failing"?(S(E,O,!1),c.if((0,s.not)(O),()=>{u.reset(),_(E)})):(S(E,O),m||c.if((0,s.not)(O),()=>c.break()))}}}function S(E,O,R){const D={keyword:"additionalProperties",dataProp:E,dataPropType:l.Type.Str};R===!1&&Object.assign(D,{compositeRule:!0,createErrors:!1,allErrors:!1}),u.subschema(D,O)}c.forIn("key",g,E=>{y.length||b.length?c.if(function(O){let R;if(y.length>8){const D=(0,l.schemaRefOrVal)(v,d.properties,"properties");R=(0,o.isOwnProperty)(c,D,O)}else R=y.length?(0,s.or)(...y.map(D=>s._`${O} === ${D}`)):s.nil;return b.length&&(R=(0,s.or)(R,...b.map(D=>s._`${(0,o.usePattern)(u,D)}.test(${O})`))),(0,s.not)(R)}(E),()=>w(E)):w(E)}),u.ok(s._`${h} === ${a.default.errors}`)}}},{"../../compile/codegen":2,"../../compile/names":6,"../../compile/util":10,"../code":42}],27:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/util");i.default={keyword:"allOf",schemaType:"array",code(s){const{gen:a,schema:l,it:u}=s;if(!Array.isArray(l))throw new Error("ajv implementation error");const c=a.name("valid");l.forEach((f,d)=>{if((0,o.alwaysValidSchema)(u,f))return;const g=s.subschema({keyword:"allOf",schemaProp:d},c);s.ok(c),s.mergeEvaluated(g)})}}},{"../../compile/util":10}],28:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../code");i.default={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:o.validateUnion,error:{message:"must match a schema in anyOf"}}},{"../code":42}],29:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=t("../../compile/util");i.default={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message({params:{min:a,max:l}}){return l===void 0?o.str`must contain at least ${a} valid item(s)`:o.str`must contain at least ${a} and no more than ${l} valid item(s)`},params({params:{min:a,max:l}}){return l===void 0?o._`{minContains: ${a}}`:o._`{minContains: ${a}, maxContains: ${l}}`}},code(a){const{gen:l,schema:u,parentSchema:c,data:f,it:d}=a;let g,h;const{minContains:v,maxContains:m}=c;d.opts.next?(g=v===void 0?1:v,h=m):g=1;const p=l.const("len",o._`${f}.length`);if(a.setParams({min:g,max:h}),h===void 0&&g===0)return void(0,s.checkStrictMode)(d,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(h!==void 0&&g>h)return(0,s.checkStrictMode)(d,'"minContains" > "maxContains" is always invalid'),void a.fail();if((0,s.alwaysValidSchema)(d,u)){let w=o._`${p} >= ${g}`;return h!==void 0&&(w=o._`${w} && ${p} <= ${h}`),void a.pass(w)}d.items=!0;const y=l.name("valid");function b(){const w=l.name("_valid"),S=l.let("count",0);_(w,()=>l.if(w,()=>function(E){l.code(o._`${E}++`),h===void 0?l.if(o._`${E} >= ${g}`,()=>l.assign(y,!0).break()):(l.if(o._`${E} > ${h}`,()=>l.assign(y,!1).break()),g===1?l.assign(y,!0):l.if(o._`${E} >= ${g}`,()=>l.assign(y,!0)))}(S)))}function _(w,S){l.forRange("i",0,p,E=>{a.subschema({keyword:"contains",dataProp:E,dataPropType:s.Type.Num,compositeRule:!0},w),S()})}h===void 0&&g===1?_(y,()=>l.if(y,()=>l.break())):g===0?(l.let(y,!0),h!==void 0&&l.if(o._`${f}.length > 0`,b)):(l.let(y,!1),b()),a.result(y,()=>a.reset())}}},{"../../compile/codegen":2,"../../compile/util":10}],30:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.validateSchemaDeps=i.validatePropertyDeps=i.error=void 0;const o=t("../../compile/codegen"),s=t("../../compile/util"),a=t("../code");i.error={message({params:{property:f,depsCount:d,deps:g}}){return o.str`must have ${d===1?"property":"properties"} ${g} when property ${f} is present`},params({params:{property:f,depsCount:d,deps:g,missingProperty:h}}){return o._`{property: ${f},
	    missingProperty: ${h},
	    depsCount: ${d},
	    deps: ${g}}`}};const l={keyword:"dependencies",type:"object",schemaType:"object",error:i.error,code(f){const[d,g]=function({schema:h}){const v={},m={};for(const p in h)p!=="__proto__"&&((Array.isArray(h[p])?v:m)[p]=h[p]);return[v,m]}(f);u(f,d),c(f,g)}};function u(f,d=f.schema){const{gen:g,data:h,it:v}=f;if(Object.keys(d).length===0)return;const m=g.let("missing");for(const p in d){const y=d[p];if(y.length===0)continue;const b=(0,a.propertyInData)(g,h,p,v.opts.ownProperties);f.setParams({property:p,depsCount:y.length,deps:y.join(", ")}),v.allErrors?g.if(b,()=>{for(const _ of y)(0,a.checkReportMissingProp)(f,_)}):(g.if(o._`${b} && (${(0,a.checkMissingProp)(f,y,m)})`),(0,a.reportMissingProp)(f,m),g.else())}}function c(f,d=f.schema){const{gen:g,data:h,keyword:v,it:m}=f,p=g.name("valid");for(const y in d)(0,s.alwaysValidSchema)(m,d[y])||(g.if((0,a.propertyInData)(g,h,y,m.opts.ownProperties),()=>{const b=f.subschema({keyword:v,schemaProp:y},p);f.mergeValidEvaluated(b,p)},()=>g.var(p,!0)),f.ok(p))}i.validatePropertyDeps=u,i.validateSchemaDeps=c,i.default=l},{"../../compile/codegen":2,"../../compile/util":10,"../code":42}],31:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=t("../../compile/util");function a(l,u){const c=l.schema[u];return c!==void 0&&!(0,s.alwaysValidSchema)(l,c)}i.default={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message({params:l}){return o.str`must match "${l.ifClause}" schema`},params({params:l}){return o._`{failingKeyword: ${l.ifClause}}`}},code(l){const{gen:u,parentSchema:c,it:f}=l;c.then===void 0&&c.else===void 0&&(0,s.checkStrictMode)(f,'"if" without "then" and "else" is ignored');const d=a(f,"then"),g=a(f,"else");if(!d&&!g)return;const h=u.let("valid",!0),v=u.name("_valid");if(function(){const p=l.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},v);l.mergeEvaluated(p)}(),l.reset(),d&&g){const p=u.let("ifClause");l.setParams({ifClause:p}),u.if(v,m("then",p),m("else",p))}else d?u.if(v,m("then")):u.if((0,o.not)(v),m("else"));function m(p,y){return()=>{const b=l.subschema({keyword:p},v);u.assign(h,v),l.mergeValidEvaluated(b,h),y?u.assign(y,o._`${p}`):l.setParams({ifClause:p})}}l.pass(h,()=>l.error(!0))}}},{"../../compile/codegen":2,"../../compile/util":10}],32:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("./additionalItems"),s=t("./prefixItems"),a=t("./items"),l=t("./items2020"),u=t("./contains"),c=t("./dependencies"),f=t("./propertyNames"),d=t("./additionalProperties"),g=t("./properties"),h=t("./patternProperties"),v=t("./not"),m=t("./anyOf"),p=t("./oneOf"),y=t("./allOf"),b=t("./if"),_=t("./thenElse");i.default=function(w=!1){const S=[v.default,m.default,p.default,y.default,b.default,_.default,f.default,d.default,c.default,g.default,h.default];return w?S.push(s.default,l.default):S.push(o.default,a.default),S.push(u.default),S}},{"./additionalItems":25,"./additionalProperties":26,"./allOf":27,"./anyOf":28,"./contains":29,"./dependencies":30,"./if":31,"./items":33,"./items2020":34,"./not":35,"./oneOf":36,"./patternProperties":37,"./prefixItems":38,"./properties":39,"./propertyNames":40,"./thenElse":41}],33:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.validateTuple=void 0;const o=t("../../compile/codegen"),s=t("../../compile/util"),a=t("../code"),l={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(c){const{schema:f,it:d}=c;if(Array.isArray(f))return u(c,"additionalItems",f);d.items=!0,(0,s.alwaysValidSchema)(d,f)||c.ok((0,a.validateArray)(c))}};function u(c,f,d=c.schema){const{gen:g,parentSchema:h,data:v,keyword:m,it:p}=c;(function(_){const{opts:w,errSchemaPath:S}=p,E=d.length,O=E===_.minItems&&(E===_.maxItems||_[f]===!1);w.strictTuples&&!O&&(0,s.checkStrictMode)(p,`"${m}" is ${E}-tuple, but minItems or maxItems/${f} are not specified or different at path "${S}"`,w.strictTuples)})(h),p.opts.unevaluated&&d.length&&p.items!==!0&&(p.items=s.mergeEvaluated.items(g,d.length,p.items));const y=g.name("valid"),b=g.const("len",o._`${v}.length`);d.forEach((_,w)=>{(0,s.alwaysValidSchema)(p,_)||(g.if(o._`${b} > ${w}`,()=>c.subschema({keyword:m,schemaProp:w,dataProp:w},y)),c.ok(y))})}i.validateTuple=u,i.default=l},{"../../compile/codegen":2,"../../compile/util":10,"../code":42}],34:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=t("../../compile/util"),a=t("../code"),l=t("./additionalItems");i.default={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message({params:{len:u}}){return o.str`must NOT have more than ${u} items`},params({params:{len:u}}){return o._`{limit: ${u}}`}},code(u){const{schema:c,parentSchema:f,it:d}=u,{prefixItems:g}=f;d.items=!0,(0,s.alwaysValidSchema)(d,c)||(g?(0,l.validateAdditionalItems)(u,g):u.ok((0,a.validateArray)(u)))}}},{"../../compile/codegen":2,"../../compile/util":10,"../code":42,"./additionalItems":25}],35:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/util");i.default={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(s){const{gen:a,schema:l,it:u}=s;if((0,o.alwaysValidSchema)(u,l))return void s.fail();const c=a.name("valid");s.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},c),s.failResult(c,()=>s.reset(),()=>s.error())},error:{message:"must NOT be valid"}}},{"../../compile/util":10}],36:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=t("../../compile/util");i.default={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params({params:a}){return o._`{passingSchemas: ${a.passing}}`}},code(a){const{gen:l,schema:u,parentSchema:c,it:f}=a;if(!Array.isArray(u))throw new Error("ajv implementation error");if(f.opts.discriminator&&c.discriminator)return;const d=u,g=l.let("valid",!1),h=l.let("passing",null),v=l.name("_valid");a.setParams({passing:h}),l.block(function(){d.forEach((m,p)=>{let y;(0,s.alwaysValidSchema)(f,m)?l.var(v,!0):y=a.subschema({keyword:"oneOf",schemaProp:p,compositeRule:!0},v),p>0&&l.if(o._`${v} && ${g}`).assign(g,!1).assign(h,o._`[${h}, ${p}]`).else(),l.if(v,()=>{l.assign(g,!0),l.assign(h,p),y&&a.mergeEvaluated(y,o.Name)})})}),a.result(g,()=>a.reset(),()=>a.error(!0))}}},{"../../compile/codegen":2,"../../compile/util":10}],37:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../code"),s=t("../../compile/codegen"),a=t("../../compile/util"),l=t("../../compile/util");i.default={keyword:"patternProperties",type:"object",schemaType:"object",code(u){const{gen:c,schema:f,data:d,parentSchema:g,it:h}=u,{opts:v}=h,m=(0,o.allSchemaProperties)(f),p=m.filter(E=>(0,a.alwaysValidSchema)(h,f[E]));if(m.length===0||p.length===m.length&&(!h.opts.unevaluated||h.props===!0))return;const y=v.strictSchema&&!v.allowMatchingProperties&&g.properties,b=c.name("valid");h.props===!0||h.props instanceof s.Name||(h.props=(0,l.evaluatedPropsToName)(c,h.props));const{props:_}=h;function w(E){for(const O in y)new RegExp(E).test(O)&&(0,a.checkStrictMode)(h,`property ${O} matches pattern ${E} (use allowMatchingProperties)`)}function S(E){c.forIn("key",d,O=>{c.if(s._`${(0,o.usePattern)(u,E)}.test(${O})`,()=>{const R=p.includes(E);R||u.subschema({keyword:"patternProperties",schemaProp:E,dataProp:O,dataPropType:l.Type.Str},b),h.opts.unevaluated&&_!==!0?c.assign(s._`${_}[${O}]`,!0):R||h.allErrors||c.if((0,s.not)(b),()=>c.break())})})}(function(){for(const E of m)y&&w(E),h.allErrors?S(E):(c.var(b,!0),S(E),c.if(b))})()}}},{"../../compile/codegen":2,"../../compile/util":10,"../code":42}],38:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("./items");i.default={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code(s){return(0,o.validateTuple)(s,"items")}}},{"./items":33}],39:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/validate"),s=t("../code"),a=t("../../compile/util"),l=t("./additionalProperties");i.default={keyword:"properties",type:"object",schemaType:"object",code(u){const{gen:c,schema:f,parentSchema:d,data:g,it:h}=u;h.opts.removeAdditional==="all"&&d.additionalProperties===void 0&&l.default.code(new o.KeywordCxt(h,l.default,"additionalProperties"));const v=(0,s.allSchemaProperties)(f);for(const _ of v)h.definedProperties.add(_);h.opts.unevaluated&&v.length&&h.props!==!0&&(h.props=a.mergeEvaluated.props(c,(0,a.toHash)(v),h.props));const m=v.filter(_=>!(0,a.alwaysValidSchema)(h,f[_]));if(m.length===0)return;const p=c.name("valid");for(const _ of m)y(_)?b(_):(c.if((0,s.propertyInData)(c,g,_,h.opts.ownProperties)),b(_),h.allErrors||c.else().var(p,!0),c.endIf()),u.it.definedProperties.add(_),u.ok(p);function y(_){return h.opts.useDefaults&&!h.compositeRule&&f[_].default!==void 0}function b(_){u.subschema({keyword:"properties",schemaProp:_,dataProp:_},p)}}}},{"../../compile/util":10,"../../compile/validate":15,"../code":42,"./additionalProperties":26}],40:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=t("../../compile/util");i.default={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params({params:a}){return o._`{propertyName: ${a.propertyName}}`}},code(a){const{gen:l,schema:u,data:c,it:f}=a;if((0,s.alwaysValidSchema)(f,u))return;const d=l.name("valid");l.forIn("key",c,g=>{a.setParams({propertyName:g}),a.subschema({keyword:"propertyNames",data:g,dataTypes:["string"],propertyName:g,compositeRule:!0},d),l.if((0,o.not)(d),()=>{a.error(!0),f.allErrors||l.break()})}),a.ok(d)}}},{"../../compile/codegen":2,"../../compile/util":10}],41:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/util");i.default={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:s,parentSchema:a,it:l}){a.if===void 0&&(0,o.checkStrictMode)(l,`"${s}" without "if" is ignored`)}}},{"../../compile/util":10}],42:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.validateUnion=i.validateArray=i.usePattern=i.callValidateCode=i.schemaProperties=i.allSchemaProperties=i.noPropertyInData=i.propertyInData=i.isOwnProperty=i.hasPropFunc=i.reportMissingProp=i.checkMissingProp=i.checkReportMissingProp=void 0;const o=t("../compile/codegen"),s=t("../compile/util"),a=t("../compile/names"),l=t("../compile/util");function u(h){return h.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:o._`Object.prototype.hasOwnProperty`})}function c(h,v,m){return o._`${u(h)}.call(${v}, ${m})`}function f(h,v,m,p){const y=o._`${v}${(0,o.getProperty)(m)} === undefined`;return p?(0,o.or)(y,(0,o.not)(c(h,v,m))):y}function d(h){return h?Object.keys(h).filter(v=>v!=="__proto__"):[]}i.checkReportMissingProp=function(h,v){const{gen:m,data:p,it:y}=h;m.if(f(m,p,v,y.opts.ownProperties),()=>{h.setParams({missingProperty:o._`${v}`},!0),h.error()})},i.checkMissingProp=function({gen:h,data:v,it:{opts:m}},p,y){return(0,o.or)(...p.map(b=>(0,o.and)(f(h,v,b,m.ownProperties),o._`${y} = ${b}`)))},i.reportMissingProp=function(h,v){h.setParams({missingProperty:v},!0),h.error()},i.hasPropFunc=u,i.isOwnProperty=c,i.propertyInData=function(h,v,m,p){const y=o._`${v}${(0,o.getProperty)(m)} !== undefined`;return p?o._`${y} && ${c(h,v,m)}`:y},i.noPropertyInData=f,i.allSchemaProperties=d,i.schemaProperties=function(h,v){return d(v).filter(m=>!(0,s.alwaysValidSchema)(h,v[m]))},i.callValidateCode=function({schemaCode:h,data:v,it:{gen:m,topSchemaRef:p,schemaPath:y,errorPath:b},it:_},w,S,E){const O=E?o._`${h}, ${v}, ${p}${y}`:v,R=[[a.default.instancePath,(0,o.strConcat)(a.default.instancePath,b)],[a.default.parentData,_.parentData],[a.default.parentDataProperty,_.parentDataProperty],[a.default.rootData,a.default.rootData]];_.opts.dynamicRef&&R.push([a.default.dynamicAnchors,a.default.dynamicAnchors]);const D=o._`${O}, ${m.object(...R)}`;return S!==o.nil?o._`${w}.call(${S}, ${D})`:o._`${w}(${D})`};const g=o._`new RegExp`;i.usePattern=function({gen:h,it:{opts:v}},m){const p=v.unicodeRegExp?"u":"",{regExp:y}=v.code,b=y(m,p);return h.scopeValue("pattern",{key:b.toString(),ref:b,code:o._`${y.code==="new RegExp"?g:(0,l.useFunc)(h,y)}(${m}, ${p})`})},i.validateArray=function(h){const{gen:v,data:m,keyword:p,it:y}=h,b=v.name("valid");if(y.allErrors){const w=v.let("valid",!0);return _(()=>v.assign(w,!1)),w}return v.var(b,!0),_(()=>v.break()),b;function _(w){const S=v.const("len",o._`${m}.length`);v.forRange("i",0,S,E=>{h.subschema({keyword:p,dataProp:E,dataPropType:s.Type.Num},b),v.if((0,o.not)(b),w)})}},i.validateUnion=function(h){const{gen:v,schema:m,keyword:p,it:y}=h;if(!Array.isArray(m))throw new Error("ajv implementation error");if(m.some(w=>(0,s.alwaysValidSchema)(y,w))&&!y.opts.unevaluated)return;const b=v.let("valid",!1),_=v.name("_valid");v.block(()=>m.forEach((w,S)=>{const E=h.subschema({keyword:p,schemaProp:S,compositeRule:!0},_);v.assign(b,o._`${b} || ${_}`),h.mergeValidEvaluated(E,_)||v.if((0,o.not)(b))})),h.result(b,()=>h.reset(),()=>h.error(!0))}},{"../compile/codegen":2,"../compile/names":6,"../compile/util":10}],43:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}}},{}],44:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("./id"),s=t("./ref");i.default=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",o.default,s.default]},{"./id":43,"./ref":45}],45:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.callRef=i.getValidate=void 0;const o=t("../../compile/ref_error"),s=t("../code"),a=t("../../compile/codegen"),l=t("../../compile/names"),u=t("../../compile"),c=t("../../compile/util"),f={keyword:"$ref",schemaType:"string",code(h){const{gen:v,schema:m,it:p}=h,{baseId:y,schemaEnv:b,validateName:_,opts:w,self:S}=p,{root:E}=b;if((m==="#"||m==="#/")&&y===E.baseId)return function(){if(b===E)return g(h,_,b,b.$async);const R=v.scopeValue("root",{ref:E});return g(h,a._`${R}.validate`,E,E.$async)}();const O=u.resolveRef.call(S,E,y,m);if(O===void 0)throw new o.default(p.opts.uriResolver,y,m);return O instanceof u.SchemaEnv?function(R){const D=d(h,R);g(h,D,R,R.$async)}(O):function(R){const D=v.scopeValue("schema",w.code.source===!0?{ref:R,code:(0,a.stringify)(R)}:{ref:R}),F=v.name("valid"),B=h.subschema({schema:R,dataTypes:[],schemaPath:a.nil,topSchemaRef:D,errSchemaPath:m},F);h.mergeEvaluated(B),h.ok(F)}(O)}};function d(h,v){const{gen:m}=h;return v.validate?m.scopeValue("validate",{ref:v.validate}):a._`${m.scopeValue("wrapper",{ref:v})}.validate`}function g(h,v,m,p){const{gen:y,it:b}=h,{allErrors:_,schemaEnv:w,opts:S}=b,E=S.passContext?l.default.this:a.nil;function O(D){const F=a._`${D}.errors`;y.assign(l.default.vErrors,a._`${l.default.vErrors} === null ? ${F} : ${l.default.vErrors}.concat(${F})`),y.assign(l.default.errors,a._`${l.default.vErrors}.length`)}function R(D){var F;if(!b.opts.unevaluated)return;const B=(F=m==null?void 0:m.validate)===null||F===void 0?void 0:F.evaluated;if(b.props!==!0)if(B&&!B.dynamicProps)B.props!==void 0&&(b.props=c.mergeEvaluated.props(y,B.props,b.props));else{const H=y.var("props",a._`${D}.evaluated.props`);b.props=c.mergeEvaluated.props(y,H,b.props,a.Name)}if(b.items!==!0)if(B&&!B.dynamicItems)B.items!==void 0&&(b.items=c.mergeEvaluated.items(y,B.items,b.items));else{const H=y.var("items",a._`${D}.evaluated.items`);b.items=c.mergeEvaluated.items(y,H,b.items,a.Name)}}p?function(){if(!w.$async)throw new Error("async schema referenced by sync schema");const D=y.let("valid");y.try(()=>{y.code(a._`await ${(0,s.callValidateCode)(h,v,E)}`),R(v),_||y.assign(D,!0)},F=>{y.if(a._`!(${F} instanceof ${b.ValidationError})`,()=>y.throw(F)),O(F),_||y.assign(D,!1)}),h.ok(D)}():h.result((0,s.callValidateCode)(h,v,E),()=>R(v),()=>O(v))}i.getValidate=d,i.callRef=g,i.default=f},{"../../compile":5,"../../compile/codegen":2,"../../compile/names":6,"../../compile/ref_error":7,"../../compile/util":10,"../code":42}],46:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=t("../discriminator/types"),a=t("../../compile"),l=t("../../compile/util");i.default={keyword:"discriminator",type:"object",schemaType:"object",error:{message({params:{discrError:u,tagName:c}}){return u===s.DiscrError.Tag?`tag "${c}" must be string`:`value of tag "${c}" must be in oneOf`},params({params:{discrError:u,tag:c,tagName:f}}){return o._`{error: ${u}, tag: ${f}, tagValue: ${c}}`}},code(u){const{gen:c,data:f,schema:d,parentSchema:g,it:h}=u,{oneOf:v}=g;if(!h.opts.discriminator)throw new Error("discriminator: requires discriminator option");const m=d.propertyName;if(typeof m!="string")throw new Error("discriminator: requires propertyName");if(d.mapping)throw new Error("discriminator: mapping is not supported");if(!v)throw new Error("discriminator: requires oneOf keyword");const p=c.let("valid",!1),y=c.const("tag",o._`${f}${(0,o.getProperty)(m)}`);function b(_){const w=c.name("valid"),S=u.subschema({keyword:"oneOf",schemaProp:_},w);return u.mergeEvaluated(S,o.Name),w}c.if(o._`typeof ${y} == "string"`,()=>function(){const _=function(){var w;const S={},E=R(g);let O=!0;for(let B=0;B<v.length;B++){let H=v[B];(H==null?void 0:H.$ref)&&!(0,l.schemaHasRulesButRef)(H,h.self.RULES)&&(H=a.resolveRef.call(h.self,h.schemaEnv.root,h.baseId,H==null?void 0:H.$ref),H instanceof a.SchemaEnv&&(H=H.schema));const L=(w=H==null?void 0:H.properties)===null||w===void 0?void 0:w[m];if(typeof L!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${m}"`);O=O&&(E||R(H)),D(L,B)}if(!O)throw new Error(`discriminator: "${m}" must be required`);return S;function R({required:B}){return Array.isArray(B)&&B.includes(m)}function D(B,H){if(B.const)F(B.const,H);else{if(!B.enum)throw new Error(`discriminator: "properties/${m}" must have "const" or "enum"`);for(const L of B.enum)F(L,H)}}function F(B,H){if(typeof B!="string"||B in S)throw new Error(`discriminator: "${m}" values must be unique strings`);S[B]=H}}();c.if(!1);for(const w in _)c.elseIf(o._`${y} === ${w}`),c.assign(p,b(_[w]));c.else(),u.error(!1,{discrError:s.DiscrError.Mapping,tag:y,tagName:m}),c.endIf()}(),()=>u.error(!1,{discrError:s.DiscrError.Tag,tag:y,tagName:m})),u.ok(p)}}},{"../../compile":5,"../../compile/codegen":2,"../../compile/util":10,"../discriminator/types":47}],47:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.DiscrError=void 0,function(o){o.Tag="tag",o.Mapping="mapping"}(i.DiscrError||(i.DiscrError={}))},{}],48:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("./core"),s=t("./validation"),a=t("./applicator"),l=t("./format"),u=t("./metadata"),c=[o.default,s.default,(0,a.default)(),l.default,u.metadataVocabulary,u.contentVocabulary];i.default=c},{"./applicator":32,"./core":44,"./format":50,"./metadata":51,"./validation":54}],49:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen");i.default={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message({schemaCode:s}){return o.str`must match format "${s}"`},params({schemaCode:s}){return o._`{format: ${s}}`}},code(s,a){const{gen:l,data:u,$data:c,schema:f,schemaCode:d,it:g}=s,{opts:h,errSchemaPath:v,schemaEnv:m,self:p}=g;h.validateFormats&&(c?function(){const y=l.scopeValue("formats",{ref:p.formats,code:h.code.formats}),b=l.const("fDef",o._`${y}[${d}]`),_=l.let("fType"),w=l.let("format");l.if(o._`typeof ${b} == "object" && !(${b} instanceof RegExp)`,()=>l.assign(_,o._`${b}.type || "string"`).assign(w,o._`${b}.validate`),()=>l.assign(_,o._`"string"`).assign(w,b)),s.fail$data((0,o.or)(h.strictSchema===!1?o.nil:o._`${d} && !${w}`,function(){const S=m.$async?o._`(${b}.async ? await ${w}(${u}) : ${w}(${u}))`:o._`${w}(${u})`,E=o._`(typeof ${w} == "function" ? ${S} : ${w}.test(${u}))`;return o._`${w} && ${w} !== true && ${_} === ${a} && !${E}`}()))}():function(){const y=p.formats[f];if(!y)return void function(){if(h.strictSchema===!1)return void p.logger.warn(S());throw new Error(S());function S(){return`unknown format "${f}" ignored in schema at path "${v}"`}}();if(y===!0)return;const[b,_,w]=function(S){const E=S instanceof RegExp?(0,o.regexpCode)(S):h.code.formats?o._`${h.code.formats}${(0,o.getProperty)(f)}`:void 0,O=l.scopeValue("formats",{key:f,ref:S,code:E});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,o._`${O}.validate`]:["string",S,O]}(y);b===a&&s.pass(function(){if(typeof y=="object"&&!(y instanceof RegExp)&&y.async){if(!m.$async)throw new Error("async format in sync schema");return o._`await ${w}(${u})`}return typeof _=="function"?o._`${w}(${u})`:o._`${w}.test(${u})`}())}())}}},{"../../compile/codegen":2}],50:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("./format");i.default=[o.default]},{"./format":49}],51:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.contentVocabulary=i.metadataVocabulary=void 0,i.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],i.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},{}],52:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=t("../../compile/util"),a=t("../../runtime/equal");i.default={keyword:"const",$data:!0,error:{message:"must be equal to constant",params({schemaCode:l}){return o._`{allowedValue: ${l}}`}},code(l){const{gen:u,data:c,$data:f,schemaCode:d,schema:g}=l;f||g&&typeof g=="object"?l.fail$data(o._`!${(0,s.useFunc)(u,a.default)}(${c}, ${d})`):l.fail(o._`${g} !== ${c}`)}}},{"../../compile/codegen":2,"../../compile/util":10,"../../runtime/equal":21}],53:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=t("../../compile/util"),a=t("../../runtime/equal");i.default={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params({schemaCode:l}){return o._`{allowedValues: ${l}}`}},code(l){const{gen:u,data:c,$data:f,schema:d,schemaCode:g,it:h}=l;if(!f&&d.length===0)throw new Error("enum must have non-empty array");let v;const m=()=>v!=null?v:v=(0,s.useFunc)(u,a.default);let p;if(d.length>=h.opts.loopEnum||f)p=u.let("valid"),l.block$data(p,function(){u.assign(p,!1),u.forOf("v",g,y=>u.if(o._`${m()}(${c}, ${y})`,()=>u.assign(p,!0).break()))});else{if(!Array.isArray(d))throw new Error("ajv implementation error");const y=u.const("vSchema",g);p=(0,o.or)(...d.map((b,_)=>function(w,S){const E=d[S];return typeof E=="object"&&E!==null?o._`${m()}(${c}, ${w}[${S}])`:o._`${c} === ${E}`}(y,_)))}l.pass(p)}}},{"../../compile/codegen":2,"../../compile/util":10,"../../runtime/equal":21}],54:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("./limitNumber"),s=t("./multipleOf"),a=t("./limitLength"),l=t("./pattern"),u=t("./limitProperties"),c=t("./required"),f=t("./limitItems"),d=t("./uniqueItems"),g=t("./const"),h=t("./enum");i.default=[o.default,s.default,a.default,l.default,u.default,c.default,f.default,d.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},g.default,h.default]},{"./const":52,"./enum":53,"./limitItems":55,"./limitLength":56,"./limitNumber":57,"./limitProperties":58,"./multipleOf":59,"./pattern":60,"./required":61,"./uniqueItems":62}],55:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen");i.default={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message:({keyword:s,schemaCode:a})=>o.str`must NOT have ${s==="maxItems"?"more":"fewer"} than ${a} items`,params({schemaCode:s}){return o._`{limit: ${s}}`}},code(s){const{keyword:a,data:l,schemaCode:u}=s;s.fail$data(o._`${l}.length ${a==="maxItems"?o.operators.GT:o.operators.LT} ${u}`)}}},{"../../compile/codegen":2}],56:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=t("../../compile/util"),a=t("../../runtime/ucs2length");i.default={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message:({keyword:l,schemaCode:u})=>o.str`must NOT have ${l==="maxLength"?"more":"fewer"} than ${u} characters`,params({schemaCode:l}){return o._`{limit: ${l}}`}},code(l){const{keyword:u,data:c,schemaCode:f,it:d}=l,g=u==="maxLength"?o.operators.GT:o.operators.LT,h=d.opts.unicode===!1?o._`${c}.length`:o._`${(0,s.useFunc)(l.gen,a.default)}(${c})`;l.fail$data(o._`${h} ${g} ${f}`)}}},{"../../compile/codegen":2,"../../compile/util":10,"../../runtime/ucs2length":22}],57:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=o.operators,a={maximum:{okStr:"<=",ok:s.LTE,fail:s.GT},minimum:{okStr:">=",ok:s.GTE,fail:s.LT},exclusiveMaximum:{okStr:"<",ok:s.LT,fail:s.GTE},exclusiveMinimum:{okStr:">",ok:s.GT,fail:s.LTE}},l={message({keyword:c,schemaCode:f}){return o.str`must be ${a[c].okStr} ${f}`},params({keyword:c,schemaCode:f}){return o._`{comparison: ${a[c].okStr}, limit: ${f}}`}},u={keyword:Object.keys(a),type:"number",schemaType:"number",$data:!0,error:l,code(c){const{keyword:f,data:d,schemaCode:g}=c;c.fail$data(o._`${d} ${a[f].fail} ${g} || isNaN(${d})`)}};i.default=u},{"../../compile/codegen":2}],58:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen");i.default={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message:({keyword:s,schemaCode:a})=>o.str`must NOT have ${s==="maxProperties"?"more":"fewer"} than ${a} properties`,params({schemaCode:s}){return o._`{limit: ${s}}`}},code(s){const{keyword:a,data:l,schemaCode:u}=s;s.fail$data(o._`Object.keys(${l}).length ${a==="maxProperties"?o.operators.GT:o.operators.LT} ${u}`)}}},{"../../compile/codegen":2}],59:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen");i.default={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message({schemaCode:s}){return o.str`must be multiple of ${s}`},params({schemaCode:s}){return o._`{multipleOf: ${s}}`}},code(s){const{gen:a,data:l,schemaCode:u,it:c}=s,f=c.opts.multipleOfPrecision,d=a.let("res"),g=f?o._`Math.abs(Math.round(${d}) - ${d}) > 1e-${f}`:o._`${d} !== parseInt(${d})`;s.fail$data(o._`(${u} === 0 || (${d} = ${l}/${u}, ${g}))`)}}},{"../../compile/codegen":2}],60:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../code"),s=t("../../compile/codegen");i.default={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message({schemaCode:a}){return s.str`must match pattern "${a}"`},params({schemaCode:a}){return s._`{pattern: ${a}}`}},code(a){const{data:l,$data:u,schema:c,schemaCode:f,it:d}=a,g=u?s._`(new RegExp(${f}, ${d.opts.unicodeRegExp?"u":""}))`:(0,o.usePattern)(a,c);a.fail$data(s._`!${g}.test(${l})`)}}},{"../../compile/codegen":2,"../code":42}],61:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../code"),s=t("../../compile/codegen"),a=t("../../compile/util");i.default={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message({params:{missingProperty:l}}){return s.str`must have required property '${l}'`},params({params:{missingProperty:l}}){return s._`{missingProperty: ${l}}`}},code(l){const{gen:u,schema:c,schemaCode:f,data:d,$data:g,it:h}=l,{opts:v}=h;if(!g&&c.length===0)return;const m=c.length>=v.loopRequired;if(h.allErrors?function(){if(m||g)l.block$data(s.nil,p);else for(const y of c)(0,o.checkReportMissingProp)(l,y)}():function(){const y=u.let("missing");if(m||g){const b=u.let("valid",!0);l.block$data(b,()=>function(_,w){l.setParams({missingProperty:_}),u.forOf(_,f,()=>{u.assign(w,(0,o.propertyInData)(u,d,_,v.ownProperties)),u.if((0,s.not)(w),()=>{l.error(),u.break()})},s.nil)}(y,b)),l.ok(b)}else u.if((0,o.checkMissingProp)(l,c,y)),(0,o.reportMissingProp)(l,y),u.else()}(),v.strictRequired){const y=l.parentSchema.properties,{definedProperties:b}=l.it;for(const _ of c)(y==null?void 0:y[_])===void 0&&!b.has(_)&&(0,a.checkStrictMode)(h,`required property "${_}" is not defined at "${h.schemaEnv.baseId+h.errSchemaPath}" (strictRequired)`,h.opts.strictRequired)}function p(){u.forOf("prop",f,y=>{l.setParams({missingProperty:y}),u.if((0,o.noPropertyInData)(u,d,y,v.ownProperties),()=>l.error())})}}}},{"../../compile/codegen":2,"../../compile/util":10,"../code":42}],62:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/validate/dataType"),s=t("../../compile/codegen"),a=t("../../compile/util"),l=t("../../runtime/equal");i.default={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message({params:{i:u,j:c}}){return s.str`must NOT have duplicate items (items ## ${c} and ${u} are identical)`},params({params:{i:u,j:c}}){return s._`{i: ${u}, j: ${c}}`}},code(u){const{gen:c,data:f,$data:d,schema:g,parentSchema:h,schemaCode:v,it:m}=u;if(!d&&!g)return;const p=c.let("valid"),y=h.items?(0,o.getSchemaTypes)(h.items):[];function b(w,S){const E=c.name("item"),O=(0,o.checkDataTypes)(y,E,m.opts.strictNumbers,o.DataType.Wrong),R=c.const("indices",s._`{}`);c.for(s._`;${w}--;`,()=>{c.let(E,s._`${f}[${w}]`),c.if(O,s._`continue`),y.length>1&&c.if(s._`typeof ${E} == "string"`,s._`${E} += "_"`),c.if(s._`typeof ${R}[${E}] == "number"`,()=>{c.assign(S,s._`${R}[${E}]`),u.error(),c.assign(p,!1).break()}).code(s._`${R}[${E}] = ${w}`)})}function _(w,S){const E=(0,a.useFunc)(c,l.default),O=c.name("outer");c.label(O).for(s._`;${w}--;`,()=>c.for(s._`${S} = ${w}; ${S}--;`,()=>c.if(s._`${E}(${f}[${w}], ${f}[${S}])`,()=>{u.error(),c.assign(p,!1).break(O)})))}u.block$data(p,function(){const w=c.let("i",s._`${f}.length`),S=c.let("j");u.setParams({i:w,j:S}),c.assign(p,!0),c.if(s._`${w} > 1`,()=>(y.length>0&&!y.some(E=>E==="object"||E==="array")?b:_)(w,S))},s._`${v} === false`),u.ok(p)}}},{"../../compile/codegen":2,"../../compile/util":10,"../../compile/validate/dataType":13,"../../runtime/equal":21}],63:[function(t,r,i){r.exports=function o(s,a){if(s===a)return!0;if(s&&a&&typeof s=="object"&&typeof a=="object"){if(s.constructor!==a.constructor)return!1;var l,u,c;if(Array.isArray(s)){if((l=s.length)!=a.length)return!1;for(u=l;u--!=0;)if(!o(s[u],a[u]))return!1;return!0}if(s.constructor===RegExp)return s.source===a.source&&s.flags===a.flags;if(s.valueOf!==Object.prototype.valueOf)return s.valueOf()===a.valueOf();if(s.toString!==Object.prototype.toString)return s.toString()===a.toString();if((l=(c=Object.keys(s)).length)!==Object.keys(a).length)return!1;for(u=l;u--!=0;)if(!Object.prototype.hasOwnProperty.call(a,c[u]))return!1;for(u=l;u--!=0;){var f=c[u];if(!o(s[f],a[f]))return!1}return!0}return s!=s&&a!=a}},{}],64:[function(t,r,i){var o=r.exports=function(a,l,u){typeof l=="function"&&(u=l,l={}),s(l,typeof(u=l.cb||u)=="function"?u:u.pre||function(){},u.post||function(){},a,"",a)};function s(a,l,u,c,f,d,g,h,v,m){if(c&&typeof c=="object"&&!Array.isArray(c)){for(var p in l(c,f,d,g,h,v,m),c){var y=c[p];if(Array.isArray(y)){if(p in o.arrayKeywords)for(var b=0;b<y.length;b++)s(a,l,u,y[b],f+"/"+p+"/"+b,d,f,p,c,b)}else if(p in o.propsKeywords){if(y&&typeof y=="object")for(var _ in y)s(a,l,u,y[_],f+"/"+p+"/"+_.replace(/~/g,"~0").replace(/\//g,"~1"),d,f,p,c,_)}else(p in o.keywords||a.allKeys&&!(p in o.skipKeywords))&&s(a,l,u,y,f+"/"+p,d,f,p,c)}u(c,f,d,g,h,v,m)}}o.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},o.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},o.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},o.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},{}],65:[function(t,r,i){/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(o,s){s(typeof i=="object"&&r!==void 0?i:o.URI=o.URI||{})})(this,function(o){function s(){for(var G=arguments.length,se=Array(G),re=0;re<G;re++)se[re]=arguments[re];if(se.length>1){se[0]=se[0].slice(0,-1);for(var _e=se.length-1,Ee=1;Ee<_e;++Ee)se[Ee]=se[Ee].slice(1,-1);return se[_e]=se[_e].slice(1),se.join("")}return se[0]}function a(G){return"(?:"+G+")"}function l(G){return G===void 0?"undefined":G===null?"null":Object.prototype.toString.call(G).split(" ").pop().split("]").shift().toLowerCase()}function u(G){return G.toUpperCase()}function c(G){var se="[A-Za-z]",re="[0-9]",_e=s(re,"[A-Fa-f]"),Ee=a(a("%[EFef]"+_e+"%"+_e+_e+"%"+_e+_e)+"|"+a("%[89A-Fa-f]"+_e+"%"+_e+_e)+"|"+a("%"+_e+_e)),We="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",it=s("[\\:\\/\\?\\#\\[\\]\\@]",We),ct=G?"[\\uE000-\\uF8FF]":"[]",ft=s(se,re,"[\\-\\.\\_\\~]",G?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");a(se+s(se,re,"[\\+\\-\\.]")+"*"),a(a(Ee+"|"+s(ft,We,"[\\:]"))+"*");var vt=a(a("25[0-5]")+"|"+a("2[0-4][0-9]")+"|"+a("1[0-9][0-9]")+"|"+a("0?[1-9][0-9]")+"|0?0?"+re),Dt=a(vt+"\\."+vt+"\\."+vt+"\\."+vt),ot=a(_e+"{1,4}"),Et=a(a(ot+"\\:"+ot)+"|"+Dt),yt=a(a(ot+"\\:")+"{6}"+Et),Ut=a("\\:\\:"+a(ot+"\\:")+"{5}"+Et),we=a(a(ot)+"?\\:\\:"+a(ot+"\\:")+"{4}"+Et),$e=a(a(a(ot+"\\:")+"{0,1}"+ot)+"?\\:\\:"+a(ot+"\\:")+"{3}"+Et),Tt=a(a(a(ot+"\\:")+"{0,2}"+ot)+"?\\:\\:"+a(ot+"\\:")+"{2}"+Et),Ct=a(a(a(ot+"\\:")+"{0,3}"+ot)+"?\\:\\:"+ot+"\\:"+Et),At=a(a(a(ot+"\\:")+"{0,4}"+ot)+"?\\:\\:"+Et),Lt=a(a(a(ot+"\\:")+"{0,5}"+ot)+"?\\:\\:"+ot),Zt=a(a(a(ot+"\\:")+"{0,6}"+ot)+"?\\:\\:"),On=a([yt,Ut,we,$e,Tt,Ct,At,Lt,Zt].join("|")),It=a(a(ft+"|"+Ee)+"+");a("[vV]"+_e+"+\\."+s(ft,We,"[\\:]")+"+"),a(a(Ee+"|"+s(ft,We))+"*");var Kn=a(Ee+"|"+s(ft,We,"[\\:\\@]"));return a(a(Ee+"|"+s(ft,We,"[\\@]"))+"+"),a(a(Kn+"|"+s("[\\/\\?]",ct))+"*"),{NOT_SCHEME:new RegExp(s("[^]",se,re,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(s("[^\\%\\:]",ft,We),"g"),NOT_HOST:new RegExp(s("[^\\%\\[\\]\\:]",ft,We),"g"),NOT_PATH:new RegExp(s("[^\\%\\/\\:\\@]",ft,We),"g"),NOT_PATH_NOSCHEME:new RegExp(s("[^\\%\\/\\@]",ft,We),"g"),NOT_QUERY:new RegExp(s("[^\\%]",ft,We,"[\\:\\@\\/\\?]",ct),"g"),NOT_FRAGMENT:new RegExp(s("[^\\%]",ft,We,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(s("[^]",ft,We),"g"),UNRESERVED:new RegExp(ft,"g"),OTHER_CHARS:new RegExp(s("[^\\%]",ft,it),"g"),PCT_ENCODED:new RegExp(Ee,"g"),IPV4ADDRESS:new RegExp("^("+Dt+")$"),IPV6ADDRESS:new RegExp("^\\[?("+On+")"+a(a("\\%25|\\%(?!"+_e+"{2})")+"("+It+")")+"?\\]?$")}}var f=c(!1),d=c(!0),g=function(G,se){if(Array.isArray(G))return G;if(Symbol.iterator in Object(G))return function(re,_e){var Ee=[],We=!0,it=!1,ct=void 0;try{for(var ft,vt=re[Symbol.iterator]();!(We=(ft=vt.next()).done)&&(Ee.push(ft.value),!_e||Ee.length!==_e);We=!0);}catch(Dt){it=!0,ct=Dt}finally{try{!We&&vt.return&&vt.return()}finally{if(it)throw ct}}return Ee}(G,se);throw new TypeError("Invalid attempt to destructure non-iterable instance")},h=2147483647,v=36,m=/^xn--/,p=/[^\0-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=Math.floor,w=String.fromCharCode;function S(G){throw new RangeError(b[G])}function E(G,se){var re=G.split("@"),_e="";re.length>1&&(_e=re[0]+"@",G=re[1]);var Ee=function(We,it){for(var ct=[],ft=We.length;ft--;)ct[ft]=it(We[ft]);return ct}((G=G.replace(y,".")).split("."),se).join(".");return _e+Ee}function O(G){for(var se=[],re=0,_e=G.length;re<_e;){var Ee=G.charCodeAt(re++);if(Ee>=55296&&Ee<=56319&&re<_e){var We=G.charCodeAt(re++);(64512&We)==56320?se.push(((1023&Ee)<<10)+(1023&We)+65536):(se.push(Ee),re--)}else se.push(Ee)}return se}var R=function(G,se){return G+22+75*(G<26)-((se!=0)<<5)},D=function(G,se,re){var _e=0;for(G=re?_(G/700):G>>1,G+=_(G/se);G>455;_e+=v)G=_(G/35);return _(_e+36*G/(G+38))},F=function(G){var se,re=[],_e=G.length,Ee=0,We=128,it=72,ct=G.lastIndexOf("-");ct<0&&(ct=0);for(var ft=0;ft<ct;++ft)G.charCodeAt(ft)>=128&&S("not-basic"),re.push(G.charCodeAt(ft));for(var vt=ct>0?ct+1:0;vt<_e;){for(var Dt=Ee,ot=1,Et=v;;Et+=v){vt>=_e&&S("invalid-input");var yt=(se=G.charCodeAt(vt++))-48<10?se-22:se-65<26?se-65:se-97<26?se-97:v;(yt>=v||yt>_((h-Ee)/ot))&&S("overflow"),Ee+=yt*ot;var Ut=Et<=it?1:Et>=it+26?26:Et-it;if(yt<Ut)break;var we=v-Ut;ot>_(h/we)&&S("overflow"),ot*=we}var $e=re.length+1;it=D(Ee-Dt,$e,Dt==0),_(Ee/$e)>h-We&&S("overflow"),We+=_(Ee/$e),Ee%=$e,re.splice(Ee++,0,We)}return String.fromCodePoint.apply(String,re)},B=function(G){var se=[],re=(G=O(G)).length,_e=128,Ee=0,We=72,it=!0,ct=!1,ft=void 0;try{for(var vt,Dt=G[Symbol.iterator]();!(it=(vt=Dt.next()).done);it=!0){var ot=vt.value;ot<128&&se.push(w(ot))}}catch(hi){ct=!0,ft=hi}finally{try{!it&&Dt.return&&Dt.return()}finally{if(ct)throw ft}}var Et=se.length,yt=Et;for(Et&&se.push("-");yt<re;){var Ut=h,we=!0,$e=!1,Tt=void 0;try{for(var Ct,At=G[Symbol.iterator]();!(we=(Ct=At.next()).done);we=!0){var Lt=Ct.value;Lt>=_e&&Lt<Ut&&(Ut=Lt)}}catch(hi){$e=!0,Tt=hi}finally{try{!we&&At.return&&At.return()}finally{if($e)throw Tt}}var Zt=yt+1;Ut-_e>_((h-Ee)/Zt)&&S("overflow"),Ee+=(Ut-_e)*Zt,_e=Ut;var On=!0,It=!1,Kn=void 0;try{for(var ti,Xt=G[Symbol.iterator]();!(On=(ti=Xt.next()).done);On=!0){var et=ti.value;if(et<_e&&++Ee>h&&S("overflow"),et==_e){for(var bt=Ee,Cr=v;;Cr+=v){var Dr=Cr<=We?1:Cr>=We+26?26:Cr-We;if(bt<Dr)break;var Pi=bt-Dr,$s=v-Dr;se.push(w(R(Dr+Pi%$s,0))),bt=_(Pi/$s)}se.push(w(R(bt,0))),We=D(Ee,Zt,yt==Et),Ee=0,++yt}}}catch(hi){It=!0,Kn=hi}finally{try{!On&&Xt.return&&Xt.return()}finally{if(It)throw Kn}}++Ee,++_e}return se.join("")},H=function(G){return E(G,function(se){return p.test(se)?"xn--"+B(se):se})},L=function(G){return E(G,function(se){return m.test(se)?F(se.slice(4).toLowerCase()):se})},N={};function U(G){var se=G.charCodeAt(0);return se<16?"%0"+se.toString(16).toUpperCase():se<128?"%"+se.toString(16).toUpperCase():se<2048?"%"+(se>>6|192).toString(16).toUpperCase()+"%"+(63&se|128).toString(16).toUpperCase():"%"+(se>>12|224).toString(16).toUpperCase()+"%"+(se>>6&63|128).toString(16).toUpperCase()+"%"+(63&se|128).toString(16).toUpperCase()}function $(G){for(var se="",re=0,_e=G.length;re<_e;){var Ee=parseInt(G.substr(re+1,2),16);if(Ee<128)se+=String.fromCharCode(Ee),re+=3;else if(Ee>=194&&Ee<224){if(_e-re>=6){var We=parseInt(G.substr(re+4,2),16);se+=String.fromCharCode((31&Ee)<<6|63&We)}else se+=G.substr(re,6);re+=6}else if(Ee>=224){if(_e-re>=9){var it=parseInt(G.substr(re+4,2),16),ct=parseInt(G.substr(re+7,2),16);se+=String.fromCharCode((15&Ee)<<12|(63&it)<<6|63&ct)}else se+=G.substr(re,9);re+=9}else se+=G.substr(re,3),re+=3}return se}function Z(G,se){function re(_e){var Ee=$(_e);return Ee.match(se.UNRESERVED)?Ee:_e}return G.scheme&&(G.scheme=String(G.scheme).replace(se.PCT_ENCODED,re).toLowerCase().replace(se.NOT_SCHEME,"")),G.userinfo!==void 0&&(G.userinfo=String(G.userinfo).replace(se.PCT_ENCODED,re).replace(se.NOT_USERINFO,U).replace(se.PCT_ENCODED,u)),G.host!==void 0&&(G.host=String(G.host).replace(se.PCT_ENCODED,re).toLowerCase().replace(se.NOT_HOST,U).replace(se.PCT_ENCODED,u)),G.path!==void 0&&(G.path=String(G.path).replace(se.PCT_ENCODED,re).replace(G.scheme?se.NOT_PATH:se.NOT_PATH_NOSCHEME,U).replace(se.PCT_ENCODED,u)),G.query!==void 0&&(G.query=String(G.query).replace(se.PCT_ENCODED,re).replace(se.NOT_QUERY,U).replace(se.PCT_ENCODED,u)),G.fragment!==void 0&&(G.fragment=String(G.fragment).replace(se.PCT_ENCODED,re).replace(se.NOT_FRAGMENT,U).replace(se.PCT_ENCODED,u)),G}function A(G){return G.replace(/^0*(.*)/,"$1")||"0"}function P(G,se){var re=G.match(se.IPV4ADDRESS)||[],_e=g(re,2)[1];return _e?_e.split(".").map(A).join("."):G}function V(G,se){var re=G.match(se.IPV6ADDRESS)||[],_e=g(re,3),Ee=_e[1],We=_e[2];if(Ee){for(var it=Ee.toLowerCase().split("::").reverse(),ct=g(it,2),ft=ct[0],vt=ct[1],Dt=vt?vt.split(":").map(A):[],ot=ft.split(":").map(A),Et=se.IPV4ADDRESS.test(ot[ot.length-1]),yt=Et?7:8,Ut=ot.length-yt,we=Array(yt),$e=0;$e<yt;++$e)we[$e]=Dt[$e]||ot[Ut+$e]||"";Et&&(we[yt-1]=P(we[yt-1],se));var Tt=we.reduce(function(Zt,On,It){if(!On||On==="0"){var Kn=Zt[Zt.length-1];Kn&&Kn.index+Kn.length===It?Kn.length++:Zt.push({index:It,length:1})}return Zt},[]).sort(function(Zt,On){return On.length-Zt.length})[0],Ct=void 0;if(Tt&&Tt.length>1){var At=we.slice(0,Tt.index),Lt=we.slice(Tt.index+Tt.length);Ct=At.join(":")+"::"+Lt.join(":")}else Ct=we.join(":");return We&&(Ct+="%"+We),Ct}return G}var W=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,z="".match(/(){0}/)[1]===void 0;function I(G){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re={},_e=se.iri!==!1?d:f;se.reference==="suffix"&&(G=(se.scheme?se.scheme+":":"")+"//"+G);var Ee=G.match(W);if(Ee){z?(re.scheme=Ee[1],re.userinfo=Ee[3],re.host=Ee[4],re.port=parseInt(Ee[5],10),re.path=Ee[6]||"",re.query=Ee[7],re.fragment=Ee[8],isNaN(re.port)&&(re.port=Ee[5])):(re.scheme=Ee[1]||void 0,re.userinfo=G.indexOf("@")!==-1?Ee[3]:void 0,re.host=G.indexOf("//")!==-1?Ee[4]:void 0,re.port=parseInt(Ee[5],10),re.path=Ee[6]||"",re.query=G.indexOf("?")!==-1?Ee[7]:void 0,re.fragment=G.indexOf("#")!==-1?Ee[8]:void 0,isNaN(re.port)&&(re.port=G.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Ee[4]:void 0)),re.host&&(re.host=V(P(re.host,_e),_e)),re.reference=re.scheme!==void 0||re.userinfo!==void 0||re.host!==void 0||re.port!==void 0||re.path||re.query!==void 0?re.scheme===void 0?"relative":re.fragment===void 0?"absolute":"uri":"same-document",se.reference&&se.reference!=="suffix"&&se.reference!==re.reference&&(re.error=re.error||"URI is not a "+se.reference+" reference.");var We=N[(se.scheme||re.scheme||"").toLowerCase()];if(se.unicodeSupport||We&&We.unicodeSupport)Z(re,_e);else{if(re.host&&(se.domainHost||We&&We.domainHost))try{re.host=H(re.host.replace(_e.PCT_ENCODED,$).toLowerCase())}catch(it){re.error=re.error||"Host's domain name can not be converted to ASCII via punycode: "+it}Z(re,f)}We&&We.parse&&We.parse(re,se)}else re.error=re.error||"URI can not be parsed.";return re}function M(G,se){var re=se.iri!==!1?d:f,_e=[];return G.userinfo!==void 0&&(_e.push(G.userinfo),_e.push("@")),G.host!==void 0&&_e.push(V(P(String(G.host),re),re).replace(re.IPV6ADDRESS,function(Ee,We,it){return"["+We+(it?"%25"+it:"")+"]"})),typeof G.port!="number"&&typeof G.port!="string"||(_e.push(":"),_e.push(String(G.port))),_e.length?_e.join(""):void 0}var J=/^\.\.?\//,q=/^\/\.(\/|$)/,Q=/^\/\.\.(\/|$)/,ae=/^\/?(?:.|\n)*?(?=\/|$)/;function he(G){for(var se=[];G.length;)if(G.match(J))G=G.replace(J,"");else if(G.match(q))G=G.replace(q,"/");else if(G.match(Q))G=G.replace(Q,"/"),se.pop();else if(G==="."||G==="..")G="";else{var re=G.match(ae);if(!re)throw new Error("Unexpected dot segment condition");var _e=re[0];G=G.slice(_e.length),se.push(_e)}return se.join("")}function Pe(G){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re=se.iri?d:f,_e=[],Ee=N[(se.scheme||G.scheme||"").toLowerCase()];if(Ee&&Ee.serialize&&Ee.serialize(G,se),G.host&&!re.IPV6ADDRESS.test(G.host)){if(se.domainHost||Ee&&Ee.domainHost)try{G.host=se.iri?L(G.host):H(G.host.replace(re.PCT_ENCODED,$).toLowerCase())}catch(ct){G.error=G.error||"Host's domain name can not be converted to "+(se.iri?"Unicode":"ASCII")+" via punycode: "+ct}}Z(G,re),se.reference!=="suffix"&&G.scheme&&(_e.push(G.scheme),_e.push(":"));var We=M(G,se);if(We!==void 0&&(se.reference!=="suffix"&&_e.push("//"),_e.push(We),G.path&&G.path.charAt(0)!=="/"&&_e.push("/")),G.path!==void 0){var it=G.path;se.absolutePath||Ee&&Ee.absolutePath||(it=he(it)),We===void 0&&(it=it.replace(/^\/\//,"/%2F")),_e.push(it)}return G.query!==void 0&&(_e.push("?"),_e.push(G.query)),G.fragment!==void 0&&(_e.push("#"),_e.push(G.fragment)),_e.join("")}function Fe(G,se){var re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_e=arguments[3],Ee={};return _e||(G=I(Pe(G,re),re),se=I(Pe(se,re),re)),!(re=re||{}).tolerant&&se.scheme?(Ee.scheme=se.scheme,Ee.userinfo=se.userinfo,Ee.host=se.host,Ee.port=se.port,Ee.path=he(se.path||""),Ee.query=se.query):(se.userinfo!==void 0||se.host!==void 0||se.port!==void 0?(Ee.userinfo=se.userinfo,Ee.host=se.host,Ee.port=se.port,Ee.path=he(se.path||""),Ee.query=se.query):(se.path?(se.path.charAt(0)==="/"?Ee.path=he(se.path):(Ee.path=G.userinfo===void 0&&G.host===void 0&&G.port===void 0||G.path?G.path?G.path.slice(0,G.path.lastIndexOf("/")+1)+se.path:se.path:"/"+se.path,Ee.path=he(Ee.path)),Ee.query=se.query):(Ee.path=G.path,Ee.query=se.query!==void 0?se.query:G.query),Ee.userinfo=G.userinfo,Ee.host=G.host,Ee.port=G.port),Ee.scheme=G.scheme),Ee.fragment=se.fragment,Ee}function Ae(G,se){return G&&G.toString().replace(se&&se.iri?d.PCT_ENCODED:f.PCT_ENCODED,$)}var ye={scheme:"http",domainHost:!0,parse(G,se){return G.host||(G.error=G.error||"HTTP URIs must have a host."),G},serialize(G,se){var re=String(G.scheme).toLowerCase()==="https";return G.port!==(re?443:80)&&G.port!==""||(G.port=void 0),G.path||(G.path="/"),G}},Me={scheme:"https",domainHost:ye.domainHost,parse:ye.parse,serialize:ye.serialize};function xe(G){return typeof G.secure=="boolean"?G.secure:String(G.scheme).toLowerCase()==="wss"}var fe={scheme:"ws",domainHost:!0,parse(G,se){var re=G;return re.secure=xe(re),re.resourceName=(re.path||"/")+(re.query?"?"+re.query:""),re.path=void 0,re.query=void 0,re},serialize(G,se){if(G.port!==(xe(G)?443:80)&&G.port!==""||(G.port=void 0),typeof G.secure=="boolean"&&(G.scheme=G.secure?"wss":"ws",G.secure=void 0),G.resourceName){var re=G.resourceName.split("?"),_e=g(re,2),Ee=_e[0],We=_e[1];G.path=Ee&&Ee!=="/"?Ee:void 0,G.query=We,G.resourceName=void 0}return G.fragment=void 0,G}},ve={scheme:"wss",domainHost:fe.domainHost,parse:fe.parse,serialize:fe.serialize},de={},Ie="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",De="[0-9A-Fa-f]",He=a(a("%[EFef][0-9A-Fa-f]%"+De+De+"%"+De+De)+"|"+a("%[89A-Fa-f][0-9A-Fa-f]%"+De+De)+"|"+a("%"+De+De)),Xe=s("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),mt=new RegExp(Ie,"g"),be=new RegExp(He,"g"),Y=new RegExp(s("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',Xe),"g"),x=new RegExp(s("[^]",Ie,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),C=x;function k(G){var se=$(G);return se.match(mt)?se:G}var K={scheme:"mailto",parse(G,se){var re=G,_e=re.to=re.path?re.path.split(","):[];if(re.path=void 0,re.query){for(var Ee=!1,We={},it=re.query.split("&"),ct=0,ft=it.length;ct<ft;++ct){var vt=it[ct].split("=");switch(vt[0]){case"to":for(var Dt=vt[1].split(","),ot=0,Et=Dt.length;ot<Et;++ot)_e.push(Dt[ot]);break;case"subject":re.subject=Ae(vt[1],se);break;case"body":re.body=Ae(vt[1],se);break;default:Ee=!0,We[Ae(vt[0],se)]=Ae(vt[1],se)}}Ee&&(re.headers=We)}re.query=void 0;for(var yt=0,Ut=_e.length;yt<Ut;++yt){var we=_e[yt].split("@");if(we[0]=Ae(we[0]),se.unicodeSupport)we[1]=Ae(we[1],se).toLowerCase();else try{we[1]=H(Ae(we[1],se).toLowerCase())}catch($e){re.error=re.error||"Email address's domain name can not be converted to ASCII via punycode: "+$e}_e[yt]=we.join("@")}return re},serialize(G,se){var re,_e=G,Ee=(re=G.to)!=null?re instanceof Array?re:typeof re.length!="number"||re.split||re.setInterval||re.call?[re]:Array.prototype.slice.call(re):[];if(Ee){for(var We=0,it=Ee.length;We<it;++We){var ct=String(Ee[We]),ft=ct.lastIndexOf("@"),vt=ct.slice(0,ft).replace(be,k).replace(be,u).replace(Y,U),Dt=ct.slice(ft+1);try{Dt=se.iri?L(Dt):H(Ae(Dt,se).toLowerCase())}catch(Ut){_e.error=_e.error||"Email address's domain name can not be converted to "+(se.iri?"Unicode":"ASCII")+" via punycode: "+Ut}Ee[We]=vt+"@"+Dt}_e.path=Ee.join(",")}var ot=G.headers=G.headers||{};G.subject&&(ot.subject=G.subject),G.body&&(ot.body=G.body);var Et=[];for(var yt in ot)ot[yt]!==de[yt]&&Et.push(yt.replace(be,k).replace(be,u).replace(x,U)+"="+ot[yt].replace(be,k).replace(be,u).replace(C,U));return Et.length&&(_e.query=Et.join("&")),_e}},ie=/^([^\:]+)\:(.*)/,pe={scheme:"urn",parse(G,se){var re=G.path&&G.path.match(ie),_e=G;if(re){var Ee=se.scheme||_e.scheme||"urn",We=re[1].toLowerCase(),it=re[2],ct=N[Ee+":"+(se.nid||We)];_e.nid=We,_e.nss=it,_e.path=void 0,ct&&(_e=ct.parse(_e,se))}else _e.error=_e.error||"URN can not be parsed.";return _e},serialize(G,se){var re=G.nid,_e=N[(se.scheme||G.scheme||"urn")+":"+(se.nid||re)];_e&&(G=_e.serialize(G,se));var Ee=G;return Ee.path=(re||se.nid)+":"+G.nss,Ee}},ge=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Qe={scheme:"urn:uuid",parse(G,se){var re=G;return re.uuid=re.nss,re.nss=void 0,se.tolerant||re.uuid&&re.uuid.match(ge)||(re.error=re.error||"UUID is not valid."),re},serialize(G,se){var re=G;return re.nss=(G.uuid||"").toLowerCase(),re}};N[ye.scheme]=ye,N[Me.scheme]=Me,N[fe.scheme]=fe,N[ve.scheme]=ve,N[K.scheme]=K,N[pe.scheme]=pe,N[Qe.scheme]=Qe,o.SCHEMES=N,o.pctEncChar=U,o.pctDecChars=$,o.parse=I,o.removeDotSegments=he,o.serialize=Pe,o.resolveComponents=Fe,o.resolve=function(G,se,re){var _e=function(Ee,We){var it=Ee;if(We)for(var ct in We)it[ct]=We[ct];return it}({scheme:"null"},re);return Pe(Fe(I(G,_e),I(se,_e),_e,!0),_e)},o.normalize=function(G,se){return typeof G=="string"?G=Pe(I(G,se),se):l(G)==="object"&&(G=I(Pe(G,se),se)),G},o.equal=function(G,se,re){return typeof G=="string"?G=Pe(I(G,re),re):l(G)==="object"&&(G=Pe(G,re)),typeof se=="string"?se=Pe(I(se,re),re):l(se)==="object"&&(se=Pe(se,re)),G===se},o.escapeComponent=function(G,se){return G&&G.toString().replace(se&&se.iri?d.ESCAPE:f.ESCAPE,U)},o.unescapeComponent=Ae,Object.defineProperty(o,"__esModule",{value:!0})})},{}],ajv:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.CodeGen=i.Name=i.nil=i.stringify=i.str=i._=i.KeywordCxt=void 0;const o=t("./core"),s=t("./vocabularies/draft7"),a=t("./vocabularies/discriminator"),l=t("./refs/json-schema-draft-07.json"),u=["/properties"],c="http://json-schema.org/draft-07/schema";class f extends o.default{_addVocabularies(){super._addVocabularies(),s.default.forEach(v=>this.addVocabulary(v)),this.opts.discriminator&&this.addKeyword(a.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const v=this.opts.$data?this.$dataMetaSchema(l,u):l;this.addMetaSchema(v,c,!1),this.refs["http://json-schema.org/schema"]=c}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(c)?c:void 0)}}r.exports=i=f,Object.defineProperty(i,"__esModule",{value:!0}),i.default=f;var d=t("./compile/validate");Object.defineProperty(i,"KeywordCxt",{enumerable:!0,get(){return d.KeywordCxt}});var g=t("./compile/codegen");Object.defineProperty(i,"_",{enumerable:!0,get(){return g._}}),Object.defineProperty(i,"str",{enumerable:!0,get(){return g.str}}),Object.defineProperty(i,"stringify",{enumerable:!0,get(){return g.stringify}}),Object.defineProperty(i,"nil",{enumerable:!0,get(){return g.nil}}),Object.defineProperty(i,"Name",{enumerable:!0,get(){return g.Name}}),Object.defineProperty(i,"CodeGen",{enumerable:!0,get(){return g.CodeGen}})},{"./compile/codegen":2,"./compile/validate":15,"./core":18,"./refs/json-schema-draft-07.json":20,"./vocabularies/discriminator":46,"./vocabularies/draft7":48}]},{},[])("ajv")})})(YP);const bK=yR(YP.exports);function wK(n,e=void 0){const t=new bK({allErrors:!0,verbose:!0,$data:!0});e&&Object.keys(e).forEach(i=>{t.addSchema(e[i],i)});const r=t.compile(n);return function(o){return r(o),(r.errors||[]).map(EK).map(a=>SK(o,a))}}function SK(n,e){return{path:Si(n,e.instancePath),message:e.message,severity:en.warning}}function EK(n){if(n.keyword==="enum"&&Array.isArray(n.schema)){let e=n.schema;if(e){if(e=e.map(t=>JSON.stringify(t)),e.length>5){const t=["("+(e.length-5)+" more...)"];e=e.slice(0,5),e.push(t)}n.message="should be equal to one of: "+e.join(", ")}}return n.keyword==="additionalProperties"&&(n.message="should NOT have additional property: "+n.params.additionalProperty),n}var CK={};(function(n){(function(e){function t(Y){return Y!==null?Object.prototype.toString.call(Y)==="[object Array]":!1}function r(Y){return Y!==null?Object.prototype.toString.call(Y)==="[object Object]":!1}function i(Y,x){if(Y===x)return!0;var C=Object.prototype.toString.call(Y);if(C!==Object.prototype.toString.call(x))return!1;if(t(Y)===!0){if(Y.length!==x.length)return!1;for(var k=0;k<Y.length;k++)if(i(Y[k],x[k])===!1)return!1;return!0}if(r(Y)===!0){var K={};for(var ie in Y)if(hasOwnProperty.call(Y,ie)){if(i(Y[ie],x[ie])===!1)return!1;K[ie]=!0}for(var pe in x)if(hasOwnProperty.call(x,pe)&&K[pe]!==!0)return!1;return!0}return!1}function o(Y){if(Y===""||Y===!1||Y===null)return!0;if(t(Y)&&Y.length===0)return!0;if(r(Y)){for(var x in Y)if(Y.hasOwnProperty(x))return!1;return!0}else return!1}function s(Y){for(var x=Object.keys(Y),C=[],k=0;k<x.length;k++)C.push(Y[x[k]]);return C}var a;typeof String.prototype.trimLeft=="function"?a=function(Y){return Y.trimLeft()}:a=function(Y){return Y.match(/^\s*(.*)/)[1]};var l=0,u=1,c=2,f=3,d=4,g=5,h=6,v=7,m=8,p=9,y={0:"number",1:"any",2:"string",3:"array",4:"object",5:"boolean",6:"expression",7:"null",8:"Array<number>",9:"Array<string>"},b="EOF",_="UnquotedIdentifier",w="QuotedIdentifier",S="Rbracket",E="Rparen",O="Comma",R="Colon",D="Rbrace",F="Number",B="Current",H="Expref",L="Pipe",N="Or",U="And",$="EQ",Z="GT",A="LT",P="GTE",V="LTE",W="NE",z="Flatten",I="Star",M="Filter",J="Dot",q="Not",Q="Lbrace",ae="Lbracket",he="Lparen",Pe="Literal",Fe={".":J,"*":I,",":O,":":R,"{":Q,"}":D,"]":S,"(":he,")":E,"@":B},Ae={"<":!0,">":!0,"=":!0,"!":!0},ye={" ":!0,"	":!0,"\n":!0};function Me(Y){return Y>="a"&&Y<="z"||Y>="A"&&Y<="Z"||Y==="_"}function xe(Y){return Y>="0"&&Y<="9"||Y==="-"}function fe(Y){return Y>="a"&&Y<="z"||Y>="A"&&Y<="Z"||Y>="0"&&Y<="9"||Y==="_"}function ve(){}ve.prototype={tokenize:function(Y){var x=[];this._current=0;for(var C,k,K;this._current<Y.length;)if(Me(Y[this._current]))C=this._current,k=this._consumeUnquotedIdentifier(Y),x.push({type:_,value:k,start:C});else if(Fe[Y[this._current]]!==void 0)x.push({type:Fe[Y[this._current]],value:Y[this._current],start:this._current}),this._current++;else if(xe(Y[this._current]))K=this._consumeNumber(Y),x.push(K);else if(Y[this._current]==="[")K=this._consumeLBracket(Y),x.push(K);else if(Y[this._current]==='"')C=this._current,k=this._consumeQuotedIdentifier(Y),x.push({type:w,value:k,start:C});else if(Y[this._current]==="'")C=this._current,k=this._consumeRawStringLiteral(Y),x.push({type:Pe,value:k,start:C});else if(Y[this._current]==="`"){C=this._current;var ie=this._consumeLiteral(Y);x.push({type:Pe,value:ie,start:C})}else if(Ae[Y[this._current]]!==void 0)x.push(this._consumeOperator(Y));else if(ye[Y[this._current]]!==void 0)this._current++;else if(Y[this._current]==="&")C=this._current,this._current++,Y[this._current]==="&"?(this._current++,x.push({type:U,value:"&&",start:C})):x.push({type:H,value:"&",start:C});else if(Y[this._current]==="|")C=this._current,this._current++,Y[this._current]==="|"?(this._current++,x.push({type:N,value:"||",start:C})):x.push({type:L,value:"|",start:C});else{var pe=new Error("Unknown character:"+Y[this._current]);throw pe.name="LexerError",pe}return x},_consumeUnquotedIdentifier:function(Y){var x=this._current;for(this._current++;this._current<Y.length&&fe(Y[this._current]);)this._current++;return Y.slice(x,this._current)},_consumeQuotedIdentifier:function(Y){var x=this._current;this._current++;for(var C=Y.length;Y[this._current]!=='"'&&this._current<C;){var k=this._current;Y[k]==="\\"&&(Y[k+1]==="\\"||Y[k+1]==='"')?k+=2:k++,this._current=k}return this._current++,JSON.parse(Y.slice(x,this._current))},_consumeRawStringLiteral:function(Y){var x=this._current;this._current++;for(var C=Y.length;Y[this._current]!=="'"&&this._current<C;){var k=this._current;Y[k]==="\\"&&(Y[k+1]==="\\"||Y[k+1]==="'")?k+=2:k++,this._current=k}this._current++;var K=Y.slice(x+1,this._current-1);return K.replace("\\'","'")},_consumeNumber:function(Y){var x=this._current;this._current++;for(var C=Y.length;xe(Y[this._current])&&this._current<C;)this._current++;var k=parseInt(Y.slice(x,this._current));return{type:F,value:k,start:x}},_consumeLBracket:function(Y){var x=this._current;return this._current++,Y[this._current]==="?"?(this._current++,{type:M,value:"[?",start:x}):Y[this._current]==="]"?(this._current++,{type:z,value:"[]",start:x}):{type:ae,value:"[",start:x}},_consumeOperator:function(Y){var x=this._current,C=Y[x];if(this._current++,C==="!")return Y[this._current]==="="?(this._current++,{type:W,value:"!=",start:x}):{type:q,value:"!",start:x};if(C==="<")return Y[this._current]==="="?(this._current++,{type:V,value:"<=",start:x}):{type:A,value:"<",start:x};if(C===">")return Y[this._current]==="="?(this._current++,{type:P,value:">=",start:x}):{type:Z,value:">",start:x};if(C==="="&&Y[this._current]==="=")return this._current++,{type:$,value:"==",start:x}},_consumeLiteral:function(Y){this._current++;for(var x=this._current,C=Y.length,k;Y[this._current]!=="`"&&this._current<C;){var K=this._current;Y[K]==="\\"&&(Y[K+1]==="\\"||Y[K+1]==="`")?K+=2:K++,this._current=K}var ie=a(Y.slice(x,this._current));return ie=ie.replace("\\`","`"),this._looksLikeJSON(ie)?k=JSON.parse(ie):k=JSON.parse('"'+ie+'"'),this._current++,k},_looksLikeJSON:function(Y){var x='[{"',C=["true","false","null"],k="-0123456789";if(Y==="")return!1;if(x.indexOf(Y[0])>=0)return!0;if(C.indexOf(Y)>=0)return!0;if(k.indexOf(Y[0])>=0)try{return JSON.parse(Y),!0}catch{return!1}else return!1}};var de={};de[b]=0,de[_]=0,de[w]=0,de[S]=0,de[E]=0,de[O]=0,de[D]=0,de[F]=0,de[B]=0,de[H]=0,de[L]=1,de[N]=2,de[U]=3,de[$]=5,de[Z]=5,de[A]=5,de[P]=5,de[V]=5,de[W]=5,de[z]=9,de[I]=20,de[M]=21,de[J]=40,de[q]=45,de[Q]=50,de[ae]=55,de[he]=60;function Ie(){}Ie.prototype={parse:function(Y){this._loadTokens(Y),this.index=0;var x=this.expression(0);if(this._lookahead(0)!==b){var C=this._lookaheadToken(0),k=new Error("Unexpected token type: "+C.type+", value: "+C.value);throw k.name="ParserError",k}return x},_loadTokens:function(Y){var x=new ve,C=x.tokenize(Y);C.push({type:b,value:"",start:Y.length}),this.tokens=C},expression:function(Y){var x=this._lookaheadToken(0);this._advance();for(var C=this.nud(x),k=this._lookahead(0);Y<de[k];)this._advance(),C=this.led(k,C),k=this._lookahead(0);return C},_lookahead:function(Y){return this.tokens[this.index+Y].type},_lookaheadToken:function(Y){return this.tokens[this.index+Y]},_advance:function(){this.index++},nud:function(Y){var x,C,k;switch(Y.type){case Pe:return{type:"Literal",value:Y.value};case _:return{type:"Field",name:Y.value};case w:var K={type:"Field",name:Y.value};if(this._lookahead(0)===he)throw new Error("Quoted identifier not allowed for function names.");return K;case q:return C=this.expression(de.Not),{type:"NotExpression",children:[C]};case I:return x={type:"Identity"},C=null,this._lookahead(0)===S?C={type:"Identity"}:C=this._parseProjectionRHS(de.Star),{type:"ValueProjection",children:[x,C]};case M:return this.led(Y.type,{type:"Identity"});case Q:return this._parseMultiselectHash();case z:return x={type:z,children:[{type:"Identity"}]},C=this._parseProjectionRHS(de.Flatten),{type:"Projection",children:[x,C]};case ae:return this._lookahead(0)===F||this._lookahead(0)===R?(C=this._parseIndexExpression(),this._projectIfSlice({type:"Identity"},C)):this._lookahead(0)===I&&this._lookahead(1)===S?(this._advance(),this._advance(),C=this._parseProjectionRHS(de.Star),{type:"Projection",children:[{type:"Identity"},C]}):this._parseMultiselectList();case B:return{type:B};case H:return k=this.expression(de.Expref),{type:"ExpressionReference",children:[k]};case he:for(var ie=[];this._lookahead(0)!==E;)this._lookahead(0)===B?(k={type:B},this._advance()):k=this.expression(0),ie.push(k);return this._match(E),ie[0];default:this._errorToken(Y)}},led:function(Y,x){var C;switch(Y){case J:var k=de.Dot;return this._lookahead(0)!==I?(C=this._parseDotRHS(k),{type:"Subexpression",children:[x,C]}):(this._advance(),C=this._parseProjectionRHS(k),{type:"ValueProjection",children:[x,C]});case L:return C=this.expression(de.Pipe),{type:L,children:[x,C]};case N:return C=this.expression(de.Or),{type:"OrExpression",children:[x,C]};case U:return C=this.expression(de.And),{type:"AndExpression",children:[x,C]};case he:for(var K=x.name,ie=[],pe,ge;this._lookahead(0)!==E;)this._lookahead(0)===B?(pe={type:B},this._advance()):pe=this.expression(0),this._lookahead(0)===O&&this._match(O),ie.push(pe);return this._match(E),ge={type:"Function",name:K,children:ie},ge;case M:var Qe=this.expression(0);return this._match(S),this._lookahead(0)===z?C={type:"Identity"}:C=this._parseProjectionRHS(de.Filter),{type:"FilterProjection",children:[x,C,Qe]};case z:var G={type:z,children:[x]},se=this._parseProjectionRHS(de.Flatten);return{type:"Projection",children:[G,se]};case $:case W:case Z:case P:case A:case V:return this._parseComparator(x,Y);case ae:var re=this._lookaheadToken(0);return re.type===F||re.type===R?(C=this._parseIndexExpression(),this._projectIfSlice(x,C)):(this._match(I),this._match(S),C=this._parseProjectionRHS(de.Star),{type:"Projection",children:[x,C]});default:this._errorToken(this._lookaheadToken(0))}},_match:function(Y){if(this._lookahead(0)===Y)this._advance();else{var x=this._lookaheadToken(0),C=new Error("Expected "+Y+", got: "+x.type);throw C.name="ParserError",C}},_errorToken:function(Y){var x=new Error("Invalid token ("+Y.type+'): "'+Y.value+'"');throw x.name="ParserError",x},_parseIndexExpression:function(){if(this._lookahead(0)===R||this._lookahead(1)===R)return this._parseSliceExpression();var Y={type:"Index",value:this._lookaheadToken(0).value};return this._advance(),this._match(S),Y},_projectIfSlice:function(Y,x){var C={type:"IndexExpression",children:[Y,x]};return x.type==="Slice"?{type:"Projection",children:[C,this._parseProjectionRHS(de.Star)]}:C},_parseSliceExpression:function(){for(var Y=[null,null,null],x=0,C=this._lookahead(0);C!==S&&x<3;){if(C===R)x++,this._advance();else if(C===F)Y[x]=this._lookaheadToken(0).value,this._advance();else{var k=this._lookahead(0),K=new Error("Syntax error, unexpected token: "+k.value+"("+k.type+")");throw K.name="Parsererror",K}C=this._lookahead(0)}return this._match(S),{type:"Slice",children:Y}},_parseComparator:function(Y,x){var C=this.expression(de[x]);return{type:"Comparator",name:x,children:[Y,C]}},_parseDotRHS:function(Y){var x=this._lookahead(0),C=[_,w,I];if(C.indexOf(x)>=0)return this.expression(Y);if(x===ae)return this._match(ae),this._parseMultiselectList();if(x===Q)return this._match(Q),this._parseMultiselectHash()},_parseProjectionRHS:function(Y){var x;if(de[this._lookahead(0)]<10)x={type:"Identity"};else if(this._lookahead(0)===ae)x=this.expression(Y);else if(this._lookahead(0)===M)x=this.expression(Y);else if(this._lookahead(0)===J)this._match(J),x=this._parseDotRHS(Y);else{var C=this._lookaheadToken(0),k=new Error("Sytanx error, unexpected token: "+C.value+"("+C.type+")");throw k.name="ParserError",k}return x},_parseMultiselectList:function(){for(var Y=[];this._lookahead(0)!==S;){var x=this.expression(0);if(Y.push(x),this._lookahead(0)===O&&(this._match(O),this._lookahead(0)===S))throw new Error("Unexpected token Rbracket")}return this._match(S),{type:"MultiSelectList",children:Y}},_parseMultiselectHash:function(){for(var Y=[],x=[_,w],C,k,K,ie;;){if(C=this._lookaheadToken(0),x.indexOf(C.type)<0)throw new Error("Expecting an identifier token, got: "+C.type);if(k=C.value,this._advance(),this._match(R),K=this.expression(0),ie={type:"KeyValuePair",name:k,value:K},Y.push(ie),this._lookahead(0)===O)this._match(O);else if(this._lookahead(0)===D){this._match(D);break}}return{type:"MultiSelectHash",children:Y}}};function De(Y){this.runtime=Y}De.prototype={search:function(Y,x){return this.visit(Y,x)},visit:function(Y,x){var C,k,K,ie,pe,ge,Qe,G,se,re;switch(Y.type){case"Field":return x!==null&&r(x)?(ge=x[Y.name],ge===void 0?null:ge):null;case"Subexpression":for(K=this.visit(Y.children[0],x),re=1;re<Y.children.length;re++)if(K=this.visit(Y.children[1],K),K===null)return null;return K;case"IndexExpression":return Qe=this.visit(Y.children[0],x),G=this.visit(Y.children[1],Qe),G;case"Index":if(!t(x))return null;var _e=Y.value;return _e<0&&(_e=x.length+_e),K=x[_e],K===void 0&&(K=null),K;case"Slice":if(!t(x))return null;var Ee=Y.children.slice(0),We=this.computeSliceParams(x.length,Ee),it=We[0],ct=We[1],ft=We[2];if(K=[],ft>0)for(re=it;re<ct;re+=ft)K.push(x[re]);else for(re=it;re>ct;re+=ft)K.push(x[re]);return K;case"Projection":var vt=this.visit(Y.children[0],x);if(!t(vt))return null;for(se=[],re=0;re<vt.length;re++)k=this.visit(Y.children[1],vt[re]),k!==null&&se.push(k);return se;case"ValueProjection":if(vt=this.visit(Y.children[0],x),!r(vt))return null;se=[];var Dt=s(vt);for(re=0;re<Dt.length;re++)k=this.visit(Y.children[1],Dt[re]),k!==null&&se.push(k);return se;case"FilterProjection":if(vt=this.visit(Y.children[0],x),!t(vt))return null;var ot=[],Et=[];for(re=0;re<vt.length;re++)C=this.visit(Y.children[2],vt[re]),o(C)||ot.push(vt[re]);for(var yt=0;yt<ot.length;yt++)k=this.visit(Y.children[1],ot[yt]),k!==null&&Et.push(k);return Et;case"Comparator":switch(ie=this.visit(Y.children[0],x),pe=this.visit(Y.children[1],x),Y.name){case $:K=i(ie,pe);break;case W:K=!i(ie,pe);break;case Z:K=ie>pe;break;case P:K=ie>=pe;break;case A:K=ie<pe;break;case V:K=ie<=pe;break;default:throw new Error("Unknown comparator: "+Y.name)}return K;case z:var Ut=this.visit(Y.children[0],x);if(!t(Ut))return null;var we=[];for(re=0;re<Ut.length;re++)k=Ut[re],t(k)?we.push.apply(we,k):we.push(k);return we;case"Identity":return x;case"MultiSelectList":if(x===null)return null;for(se=[],re=0;re<Y.children.length;re++)se.push(this.visit(Y.children[re],x));return se;case"MultiSelectHash":if(x===null)return null;se={};var $e;for(re=0;re<Y.children.length;re++)$e=Y.children[re],se[$e.name]=this.visit($e.value,x);return se;case"OrExpression":return C=this.visit(Y.children[0],x),o(C)&&(C=this.visit(Y.children[1],x)),C;case"AndExpression":return ie=this.visit(Y.children[0],x),o(ie)===!0?ie:this.visit(Y.children[1],x);case"NotExpression":return ie=this.visit(Y.children[0],x),o(ie);case"Literal":return Y.value;case L:return Qe=this.visit(Y.children[0],x),this.visit(Y.children[1],Qe);case B:return x;case"Function":var Tt=[];for(re=0;re<Y.children.length;re++)Tt.push(this.visit(Y.children[re],x));return this.runtime.callFunction(Y.name,Tt);case"ExpressionReference":var Ct=Y.children[0];return Ct.jmespathType=H,Ct;default:throw new Error("Unknown node type: "+Y.type)}},computeSliceParams:function(Y,x){var C=x[0],k=x[1],K=x[2],ie=[null,null,null];if(K===null)K=1;else if(K===0){var pe=new Error("Invalid slice, step cannot be 0");throw pe.name="RuntimeError",pe}var ge=K<0;return C===null?C=ge?Y-1:0:C=this.capSliceRange(Y,C,K),k===null?k=ge?-1:Y:k=this.capSliceRange(Y,k,K),ie[0]=C,ie[1]=k,ie[2]=K,ie},capSliceRange:function(Y,x,C){return x<0?(x+=Y,x<0&&(x=C<0?-1:0)):x>=Y&&(x=C<0?Y-1:Y),x}};function He(Y){this._interpreter=Y,this.functionTable={abs:{_func:this._functionAbs,_signature:[{types:[l]}]},avg:{_func:this._functionAvg,_signature:[{types:[m]}]},ceil:{_func:this._functionCeil,_signature:[{types:[l]}]},contains:{_func:this._functionContains,_signature:[{types:[c,f]},{types:[u]}]},ends_with:{_func:this._functionEndsWith,_signature:[{types:[c]},{types:[c]}]},floor:{_func:this._functionFloor,_signature:[{types:[l]}]},length:{_func:this._functionLength,_signature:[{types:[c,f,d]}]},map:{_func:this._functionMap,_signature:[{types:[h]},{types:[f]}]},max:{_func:this._functionMax,_signature:[{types:[m,p]}]},merge:{_func:this._functionMerge,_signature:[{types:[d],variadic:!0}]},max_by:{_func:this._functionMaxBy,_signature:[{types:[f]},{types:[h]}]},sum:{_func:this._functionSum,_signature:[{types:[m]}]},starts_with:{_func:this._functionStartsWith,_signature:[{types:[c]},{types:[c]}]},min:{_func:this._functionMin,_signature:[{types:[m,p]}]},min_by:{_func:this._functionMinBy,_signature:[{types:[f]},{types:[h]}]},type:{_func:this._functionType,_signature:[{types:[u]}]},keys:{_func:this._functionKeys,_signature:[{types:[d]}]},values:{_func:this._functionValues,_signature:[{types:[d]}]},sort:{_func:this._functionSort,_signature:[{types:[p,m]}]},sort_by:{_func:this._functionSortBy,_signature:[{types:[f]},{types:[h]}]},join:{_func:this._functionJoin,_signature:[{types:[c]},{types:[p]}]},reverse:{_func:this._functionReverse,_signature:[{types:[c,f]}]},to_array:{_func:this._functionToArray,_signature:[{types:[u]}]},to_string:{_func:this._functionToString,_signature:[{types:[u]}]},to_number:{_func:this._functionToNumber,_signature:[{types:[u]}]},not_null:{_func:this._functionNotNull,_signature:[{types:[u],variadic:!0}]}}}He.prototype={callFunction:function(Y,x){var C=this.functionTable[Y];if(C===void 0)throw new Error("Unknown function: "+Y+"()");return this._validateArgs(Y,x,C._signature),C._func.call(this,x)},_validateArgs:function(Y,x,C){var k;if(C[C.length-1].variadic){if(x.length<C.length)throw k=C.length===1?" argument":" arguments",new Error("ArgumentError: "+Y+"() takes at least"+C.length+k+" but received "+x.length)}else if(x.length!==C.length)throw k=C.length===1?" argument":" arguments",new Error("ArgumentError: "+Y+"() takes "+C.length+k+" but received "+x.length);for(var K,ie,pe,ge=0;ge<C.length;ge++){pe=!1,K=C[ge].types,ie=this._getTypeName(x[ge]);for(var Qe=0;Qe<K.length;Qe++)if(this._typeMatches(ie,K[Qe],x[ge])){pe=!0;break}if(!pe){var G=K.map(function(se){return y[se]}).join(",");throw new Error("TypeError: "+Y+"() expected argument "+(ge+1)+" to be type "+G+" but received type "+y[ie]+" instead.")}}},_typeMatches:function(Y,x,C){if(x===u)return!0;if(x===p||x===m||x===f){if(x===f)return Y===f;if(Y===f){var k;x===m?k=l:x===p&&(k=c);for(var K=0;K<C.length;K++)if(!this._typeMatches(this._getTypeName(C[K]),k,C[K]))return!1;return!0}}else return Y===x},_getTypeName:function(Y){switch(Object.prototype.toString.call(Y)){case"[object String]":return c;case"[object Number]":return l;case"[object Array]":return f;case"[object Boolean]":return g;case"[object Null]":return v;case"[object Object]":return Y.jmespathType===H?h:d}},_functionStartsWith:function(Y){return Y[0].lastIndexOf(Y[1])===0},_functionEndsWith:function(Y){var x=Y[0],C=Y[1];return x.indexOf(C,x.length-C.length)!==-1},_functionReverse:function(Y){var x=this._getTypeName(Y[0]);if(x===c){for(var C=Y[0],k="",K=C.length-1;K>=0;K--)k+=C[K];return k}else{var ie=Y[0].slice(0);return ie.reverse(),ie}},_functionAbs:function(Y){return Math.abs(Y[0])},_functionCeil:function(Y){return Math.ceil(Y[0])},_functionAvg:function(Y){for(var x=0,C=Y[0],k=0;k<C.length;k++)x+=C[k];return x/C.length},_functionContains:function(Y){return Y[0].indexOf(Y[1])>=0},_functionFloor:function(Y){return Math.floor(Y[0])},_functionLength:function(Y){return r(Y[0])?Object.keys(Y[0]).length:Y[0].length},_functionMap:function(Y){for(var x=[],C=this._interpreter,k=Y[0],K=Y[1],ie=0;ie<K.length;ie++)x.push(C.visit(k,K[ie]));return x},_functionMerge:function(Y){for(var x={},C=0;C<Y.length;C++){var k=Y[C];for(var K in k)x[K]=k[K]}return x},_functionMax:function(Y){if(Y[0].length>0){var x=this._getTypeName(Y[0][0]);if(x===l)return Math.max.apply(Math,Y[0]);for(var C=Y[0],k=C[0],K=1;K<C.length;K++)k.localeCompare(C[K])<0&&(k=C[K]);return k}else return null},_functionMin:function(Y){if(Y[0].length>0){var x=this._getTypeName(Y[0][0]);if(x===l)return Math.min.apply(Math,Y[0]);for(var C=Y[0],k=C[0],K=1;K<C.length;K++)C[K].localeCompare(k)<0&&(k=C[K]);return k}else return null},_functionSum:function(Y){for(var x=0,C=Y[0],k=0;k<C.length;k++)x+=C[k];return x},_functionType:function(Y){switch(this._getTypeName(Y[0])){case l:return"number";case c:return"string";case f:return"array";case d:return"object";case g:return"boolean";case h:return"expref";case v:return"null"}},_functionKeys:function(Y){return Object.keys(Y[0])},_functionValues:function(Y){for(var x=Y[0],C=Object.keys(x),k=[],K=0;K<C.length;K++)k.push(x[C[K]]);return k},_functionJoin:function(Y){var x=Y[0],C=Y[1];return C.join(x)},_functionToArray:function(Y){return this._getTypeName(Y[0])===f?Y[0]:[Y[0]]},_functionToString:function(Y){return this._getTypeName(Y[0])===c?Y[0]:JSON.stringify(Y[0])},_functionToNumber:function(Y){var x=this._getTypeName(Y[0]),C;return x===l?Y[0]:x===c&&(C=+Y[0],!isNaN(C))?C:null},_functionNotNull:function(Y){for(var x=0;x<Y.length;x++)if(this._getTypeName(Y[x])!==v)return Y[x];return null},_functionSort:function(Y){var x=Y[0].slice(0);return x.sort(),x},_functionSortBy:function(Y){var x=Y[0].slice(0);if(x.length===0)return x;var C=this._interpreter,k=Y[1],K=this._getTypeName(C.visit(k,x[0]));if([l,c].indexOf(K)<0)throw new Error("TypeError");for(var ie=this,pe=[],ge=0;ge<x.length;ge++)pe.push([ge,x[ge]]);pe.sort(function(G,se){var re=C.visit(k,G[1]),_e=C.visit(k,se[1]);if(ie._getTypeName(re)!==K)throw new Error("TypeError: expected "+K+", received "+ie._getTypeName(re));if(ie._getTypeName(_e)!==K)throw new Error("TypeError: expected "+K+", received "+ie._getTypeName(_e));return re>_e?1:re<_e?-1:G[0]-se[0]});for(var Qe=0;Qe<pe.length;Qe++)x[Qe]=pe[Qe][1];return x},_functionMaxBy:function(Y){for(var x=Y[1],C=Y[0],k=this.createKeyFunction(x,[l,c]),K=-1/0,ie,pe,ge=0;ge<C.length;ge++)pe=k(C[ge]),pe>K&&(K=pe,ie=C[ge]);return ie},_functionMinBy:function(Y){for(var x=Y[1],C=Y[0],k=this.createKeyFunction(x,[l,c]),K=1/0,ie,pe,ge=0;ge<C.length;ge++)pe=k(C[ge]),pe<K&&(K=pe,ie=C[ge]);return ie},createKeyFunction:function(Y,x){var C=this,k=this._interpreter,K=function(ie){var pe=k.visit(Y,ie);if(x.indexOf(C._getTypeName(pe))<0){var ge="TypeError: expected one of "+x+", received "+C._getTypeName(pe);throw new Error(ge)}return pe};return K}};function Xe(Y){var x=new Ie,C=x.parse(Y);return C}function mt(Y){var x=new ve;return x.tokenize(Y)}function be(Y,x){var C=new Ie,k=new He,K=new De(k);k._interpreter=K;var ie=C.parse(x);return K.search(ie,Y)}e.tokenize=mt,e.compile=Xe,e.search=be,e.strictDeepEqual=i})(n)})(CK);function kK(n){let e,t,r;function i(s){n[4](s)}let o={mode:Fr.text,mainMenuBar:!1,readOnly:n[2],validator:n[1]};return n[3]!==void 0&&(o.content=n[3]),e=new _K({props:o}),wt.push(()=>Ir(e,"content",i)),{c(){Te(e.$$.fragment)},m(s,a){ke(e,s,a),r=!0},p(s,[a]){const l={};a&4&&(l.readOnly=s[2]),a&2&&(l.validator=s[1]),!t&&a&8&&(t=!0,l.content=s[3],qr(()=>t=!1)),e.$set(l)},i(s){r||(X(e.$$.fragment,s),r=!0)},o(s){te(e.$$.fragment,s),r=!1},d(s){Oe(e,s)}}}function OK(n,e,t){let r,i=Ne,o=()=>(i(),i=E0(s,c=>t(3,r=c)),s);n.$$.on_destroy.push(()=>i());let{content:s}=e;o();let{validator:a}=e,{testMode:l=!1}=e;function u(c){r=c,s.set(r)}return n.$$set=c=>{"content"in c&&o(t(0,s=c.content)),"validator"in c&&t(1,a=c.validator),"testMode"in c&&t(2,l=c.testMode)},[s,a,l,r,u]}class sS extends rt{constructor(e){super(),nt(this,e,OK,kK,on,{content:0,validator:1,testMode:2})}}class aS extends Map{constructor(e,t=IK){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(lS(this,e))}has(e){return super.has(lS(this,e))}set(e,t){return super.set(TK(this,e),t)}delete(e){return super.delete(PK(this,e))}}function lS({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function TK({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function PK({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function IK(n){return n!==null&&typeof n=="object"?n.valueOf():n}var AK={value:()=>{}};function Ju(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new Xf(t)}function Xf(n){this._=n}function RK(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}Xf.prototype=Ju.prototype={constructor:Xf,on:function(n,e){var t=this._,r=RK(n+"",t),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(n=r[o]).type)&&(i=xK(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(n=r[o]).type)t[i]=uS(t[i],n.name,e);else if(e==null)for(i in t)t[i]=uS(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new Xf(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,o;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],r=0,i=o.length;r<i;++r)o[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,o=r.length;i<o;++i)r[i].value.apply(e,t)}};function xK(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function uS(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=AK,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var i0="http://www.w3.org/1999/xhtml";const cS={svg:"http://www.w3.org/2000/svg",xhtml:i0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ep(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),cS.hasOwnProperty(e)?{space:cS[e],local:n}:n}function NK(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===i0&&e.documentElement.namespaceURI===i0?e.createElement(n):e.createElementNS(t,n)}}function MK(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function QP(n){var e=ep(n);return(e.local?MK:NK)(e)}function DK(){}function Hv(n){return n==null?DK:function(){return this.querySelector(n)}}function LK(n){typeof n!="function"&&(n=Hv(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),l,u,c=0;c<s;++c)(l=o[c])&&(u=n.call(l,l.__data__,c,o))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new $r(r,this._parents)}function jK(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function BK(){return[]}function ZP(n){return n==null?BK:function(){return this.querySelectorAll(n)}}function FK(n){return function(){return jK(n.apply(this,arguments))}}function UK(n){typeof n=="function"?n=FK(n):n=ZP(n);for(var e=this._groups,t=e.length,r=[],i=[],o=0;o<t;++o)for(var s=e[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(r.push(n.call(l,l.__data__,u,s)),i.push(l));return new $r(r,i)}function XP(n){return function(){return this.matches(n)}}function $P(n){return function(e){return e.matches(n)}}var VK=Array.prototype.find;function qK(n){return function(){return VK.call(this.children,n)}}function HK(){return this.firstElementChild}function zK(n){return this.select(n==null?HK:qK(typeof n=="function"?n:$P(n)))}var WK=Array.prototype.filter;function KK(){return Array.from(this.children)}function GK(n){return function(){return WK.call(this.children,n)}}function JK(n){return this.selectAll(n==null?KK:GK(typeof n=="function"?n:$P(n)))}function YK(n){typeof n!="function"&&(n=XP(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var o=e[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&n.call(l,l.__data__,u,o)&&a.push(l);return new $r(r,this._parents)}function e3(n){return new Array(n.length)}function QK(){return new $r(this._enter||this._groups.map(e3),this._parents)}function ed(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}ed.prototype={constructor:ed,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function ZK(n){return function(){return n}}function XK(n,e,t,r,i,o){for(var s=0,a,l=e.length,u=o.length;s<u;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):t[s]=new ed(n,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function $K(n,e,t,r,i,o,s){var a,l,u=new Map,c=e.length,f=o.length,d=new Array(c),g;for(a=0;a<c;++a)(l=e[a])&&(d[a]=g=s.call(l,l.__data__,a,e)+"",u.has(g)?i[a]=l:u.set(g,l));for(a=0;a<f;++a)g=s.call(n,o[a],a,o)+"",(l=u.get(g))?(r[a]=l,l.__data__=o[a],u.delete(g)):t[a]=new ed(n,o[a]);for(a=0;a<c;++a)(l=e[a])&&u.get(d[a])===l&&(i[a]=l)}function eG(n){return n.__data__}function tG(n,e){if(!arguments.length)return Array.from(this,eG);var t=e?$K:XK,r=this._parents,i=this._groups;typeof n!="function"&&(n=ZK(n));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],f=i[u],d=f.length,g=nG(n.call(c,c&&c.__data__,u,r)),h=g.length,v=a[u]=new Array(h),m=s[u]=new Array(h),p=l[u]=new Array(d);t(c,f,v,m,p,g,e);for(var y=0,b=0,_,w;y<h;++y)if(_=v[y]){for(y>=b&&(b=y+1);!(w=m[b])&&++b<h;);_._next=w||null}}return s=new $r(s,r),s._enter=a,s._exit=l,s}function nG(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function rG(){return new $r(this._exit||this._groups.map(e3),this._parents)}function iG(n,e,t){var r=this.enter(),i=this,o=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),e!=null&&(i=e(i),i&&(i=i.selection())),t==null?o.remove():t(o),r&&i?r.merge(i).order():i}function oG(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,i=t.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var u=t[l],c=r[l],f=u.length,d=a[l]=new Array(f),g,h=0;h<f;++h)(g=u[h]||c[h])&&(d[h]=g);for(;l<i;++l)a[l]=t[l];return new $r(a,this._parents)}function sG(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function aG(n){n||(n=lG);function e(f,d){return f&&d?n(f.__data__,d.__data__):!f-!d}for(var t=this._groups,r=t.length,i=new Array(r),o=0;o<r;++o){for(var s=t[o],a=s.length,l=i[o]=new Array(a),u,c=0;c<a;++c)(u=s[c])&&(l[c]=u);l.sort(e)}return new $r(i,this._parents).order()}function lG(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function uG(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function cG(){return Array.from(this)}function fG(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function hG(){let n=0;for(const e of this)++n;return n}function dG(){return!this.node()}function pG(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],o=0,s=i.length,a;o<s;++o)(a=i[o])&&n.call(a,a.__data__,o,i);return this}function mG(n){return function(){this.removeAttribute(n)}}function gG(n){return function(){this.removeAttributeNS(n.space,n.local)}}function vG(n,e){return function(){this.setAttribute(n,e)}}function yG(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function _G(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function bG(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function wG(n,e){var t=ep(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?gG:mG:typeof e=="function"?t.local?bG:_G:t.local?yG:vG)(t,e))}function t3(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function SG(n){return function(){this.style.removeProperty(n)}}function EG(n,e,t){return function(){this.style.setProperty(n,e,t)}}function CG(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function kG(n,e,t){return arguments.length>1?this.each((e==null?SG:typeof e=="function"?CG:EG)(n,e,t==null?"":t)):za(this.node(),n)}function za(n,e){return n.style.getPropertyValue(e)||t3(n).getComputedStyle(n,null).getPropertyValue(e)}function OG(n){return function(){delete this[n]}}function TG(n,e){return function(){this[n]=e}}function PG(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function IG(n,e){return arguments.length>1?this.each((e==null?OG:typeof e=="function"?PG:TG)(n,e)):this.node()[n]}function n3(n){return n.trim().split(/^|\s+/)}function zv(n){return n.classList||new r3(n)}function r3(n){this._node=n,this._names=n3(n.getAttribute("class")||"")}r3.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function i3(n,e){for(var t=zv(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function o3(n,e){for(var t=zv(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function AG(n){return function(){i3(this,n)}}function RG(n){return function(){o3(this,n)}}function xG(n,e){return function(){(e.apply(this,arguments)?i3:o3)(this,n)}}function NG(n,e){var t=n3(n+"");if(arguments.length<2){for(var r=zv(this.node()),i=-1,o=t.length;++i<o;)if(!r.contains(t[i]))return!1;return!0}return this.each((typeof e=="function"?xG:e?AG:RG)(t,e))}function MG(){this.textContent=""}function DG(n){return function(){this.textContent=n}}function LG(n){return function(){var e=n.apply(this,arguments);this.textContent=e==null?"":e}}function jG(n){return arguments.length?this.each(n==null?MG:(typeof n=="function"?LG:DG)(n)):this.node().textContent}function BG(){this.innerHTML=""}function FG(n){return function(){this.innerHTML=n}}function UG(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e==null?"":e}}function VG(n){return arguments.length?this.each(n==null?BG:(typeof n=="function"?UG:FG)(n)):this.node().innerHTML}function qG(){this.nextSibling&&this.parentNode.appendChild(this)}function HG(){return this.each(qG)}function zG(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function WG(){return this.each(zG)}function KG(n){var e=typeof n=="function"?n:QP(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function GG(){return null}function JG(n,e){var t=typeof n=="function"?n:QP(n),r=e==null?GG:typeof e=="function"?e:Hv(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function YG(){var n=this.parentNode;n&&n.removeChild(this)}function QG(){return this.each(YG)}function ZG(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function XG(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function $G(n){return this.select(n?XG:ZG)}function eJ(n){return arguments.length?this.property("__data__",n):this.node().__data__}function tJ(n){return function(e){n.call(this,e,this.__data__)}}function nJ(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function rJ(n){return function(){var e=this.__on;if(!!e){for(var t=0,r=-1,i=e.length,o;t<i;++t)o=e[t],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function iJ(n,e,t){return function(){var r=this.__on,i,o=tJ(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===n.type&&i.name===n.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=t),i.value=e;return}}this.addEventListener(n.type,o,t),i={type:n.type,name:n.name,value:e,listener:o,options:t},r?r.push(i):this.__on=[i]}}function oJ(n,e,t){var r=nJ(n+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(i=0,c=a[l];i<o;++i)if((s=r[i]).type===c.type&&s.name===c.name)return c.value}return}for(a=e?iJ:rJ,i=0;i<o;++i)this.each(a(r[i],e,t));return this}function s3(n,e,t){var r=t3(n),i=r.CustomEvent;typeof i=="function"?i=new i(e,t):(i=r.document.createEvent("Event"),t?(i.initEvent(e,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(e,!1,!1)),n.dispatchEvent(i)}function sJ(n,e){return function(){return s3(this,n,e)}}function aJ(n,e){return function(){return s3(this,n,e.apply(this,arguments))}}function lJ(n,e){return this.each((typeof e=="function"?aJ:sJ)(n,e))}function*uJ(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var a3=[null];function $r(n,e){this._groups=n,this._parents=e}function Yu(){return new $r([[document.documentElement]],a3)}function cJ(){return this}$r.prototype=Yu.prototype={constructor:$r,select:LK,selectAll:UK,selectChild:zK,selectChildren:JK,filter:YK,data:tG,enter:QK,exit:rG,join:iG,merge:oG,selection:cJ,order:sG,sort:aG,call:uG,nodes:cG,node:fG,size:hG,empty:dG,each:pG,attr:wG,style:kG,property:IG,classed:NG,text:jG,html:VG,raise:HG,lower:WG,append:KG,insert:JG,remove:QG,clone:$G,datum:eJ,on:oJ,dispatch:lJ,[Symbol.iterator]:uJ};function yi(n){return typeof n=="string"?new $r([[document.querySelector(n)]],[document.documentElement]):new $r([[n]],a3)}function fJ(n){let e;for(;e=n.sourceEvent;)n=e;return n}function io(n,e){if(n=fJ(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var r=t.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[n.clientX-i.left-e.clientLeft,n.clientY-i.top-e.clientTop]}}return[n.pageX,n.pageY]}const hJ={passive:!1},Cu={capture:!0,passive:!1};function om(n){n.stopImmediatePropagation()}function ka(n){n.preventDefault(),n.stopImmediatePropagation()}function l3(n){var e=n.document.documentElement,t=yi(n).on("dragstart.drag",ka,Cu);"onselectstart"in e?t.on("selectstart.drag",ka,Cu):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function u3(n,e){var t=n.document.documentElement,r=yi(n).on("dragstart.drag",null);e&&(r.on("click.drag",ka,Cu),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in t?r.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const qc=n=>()=>n;function o0(n,{sourceEvent:e,subject:t,target:r,identifier:i,active:o,x:s,y:a,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}o0.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function dJ(n){return!n.ctrlKey&&!n.button}function pJ(){return this.parentNode}function mJ(n,e){return e==null?{x:n.x,y:n.y}:e}function gJ(){return navigator.maxTouchPoints||"ontouchstart"in this}function c3(){var n=dJ,e=pJ,t=mJ,r=gJ,i={},o=Ju("start","drag","end"),s=0,a,l,u,c,f=0;function d(_){_.on("mousedown.drag",g).filter(r).on("touchstart.drag",m).on("touchmove.drag",p,hJ).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(_,w){if(!(c||!n.call(this,_,w))){var S=b(this,e.call(this,_,w),_,w,"mouse");!S||(yi(_.view).on("mousemove.drag",h,Cu).on("mouseup.drag",v,Cu),l3(_.view),om(_),u=!1,a=_.clientX,l=_.clientY,S("start",_))}}function h(_){if(ka(_),!u){var w=_.clientX-a,S=_.clientY-l;u=w*w+S*S>f}i.mouse("drag",_)}function v(_){yi(_.view).on("mousemove.drag mouseup.drag",null),u3(_.view,u),ka(_),i.mouse("end",_)}function m(_,w){if(!!n.call(this,_,w)){var S=_.changedTouches,E=e.call(this,_,w),O=S.length,R,D;for(R=0;R<O;++R)(D=b(this,E,_,w,S[R].identifier,S[R]))&&(om(_),D("start",_,S[R]))}}function p(_){var w=_.changedTouches,S=w.length,E,O;for(E=0;E<S;++E)(O=i[w[E].identifier])&&(ka(_),O("drag",_,w[E]))}function y(_){var w=_.changedTouches,S=w.length,E,O;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),E=0;E<S;++E)(O=i[w[E].identifier])&&(om(_),O("end",_,w[E]))}function b(_,w,S,E,O,R){var D=o.copy(),F=io(R||S,w),B,H,L;if((L=t.call(_,new o0("beforestart",{sourceEvent:S,target:d,identifier:O,active:s,x:F[0],y:F[1],dx:0,dy:0,dispatch:D}),E))!=null)return B=L.x-F[0]||0,H=L.y-F[1]||0,function N(U,$,Z){var A=F,P;switch(U){case"start":i[O]=N,P=s++;break;case"end":delete i[O],--s;case"drag":F=io(Z||$,w),P=s;break}D.call(U,_,new o0(U,{sourceEvent:$,subject:L,target:d,identifier:O,active:P,x:F[0]+B,y:F[1]+H,dx:F[0]-A[0],dy:F[1]-A[1],dispatch:D}),E)}}return d.filter=function(_){return arguments.length?(n=typeof _=="function"?_:qc(!!_),d):n},d.container=function(_){return arguments.length?(e=typeof _=="function"?_:qc(_),d):e},d.subject=function(_){return arguments.length?(t=typeof _=="function"?_:qc(_),d):t},d.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:qc(!!_),d):r},d.on=function(){var _=o.on.apply(o,arguments);return _===o?d:_},d.clickDistance=function(_){return arguments.length?(f=(_=+_)*_,d):Math.sqrt(f)},d}function Wv(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function f3(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function Qu(){}var ku=.7,td=1/ku,Oa="\\s*([+-]?\\d+)\\s*",Ou="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vJ=/^#([0-9a-f]{3,8})$/,yJ=new RegExp(`^rgb\\(${Oa},${Oa},${Oa}\\)$`),_J=new RegExp(`^rgb\\(${Wi},${Wi},${Wi}\\)$`),bJ=new RegExp(`^rgba\\(${Oa},${Oa},${Oa},${Ou}\\)$`),wJ=new RegExp(`^rgba\\(${Wi},${Wi},${Wi},${Ou}\\)$`),SJ=new RegExp(`^hsl\\(${Ou},${Wi},${Wi}\\)$`),EJ=new RegExp(`^hsla\\(${Ou},${Wi},${Wi},${Ou}\\)$`),fS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Wv(Qu,Tu,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:hS,formatHex:hS,formatHex8:CJ,formatHsl:kJ,formatRgb:dS,toString:dS});function hS(){return this.rgb().formatHex()}function CJ(){return this.rgb().formatHex8()}function kJ(){return h3(this).formatHsl()}function dS(){return this.rgb().formatRgb()}function Tu(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=vJ.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?pS(e):t===3?new Rr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Hc(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Hc(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=yJ.exec(n))?new Rr(e[1],e[2],e[3],1):(e=_J.exec(n))?new Rr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=bJ.exec(n))?Hc(e[1],e[2],e[3],e[4]):(e=wJ.exec(n))?Hc(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=SJ.exec(n))?vS(e[1],e[2]/100,e[3]/100,1):(e=EJ.exec(n))?vS(e[1],e[2]/100,e[3]/100,e[4]):fS.hasOwnProperty(n)?pS(fS[n]):n==="transparent"?new Rr(NaN,NaN,NaN,0):null}function pS(n){return new Rr(n>>16&255,n>>8&255,n&255,1)}function Hc(n,e,t,r){return r<=0&&(n=e=t=NaN),new Rr(n,e,t,r)}function OJ(n){return n instanceof Qu||(n=Tu(n)),n?(n=n.rgb(),new Rr(n.r,n.g,n.b,n.opacity)):new Rr}function s0(n,e,t,r){return arguments.length===1?OJ(n):new Rr(n,e,t,r==null?1:r)}function Rr(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}Wv(Rr,s0,f3(Qu,{brighter(n){return n=n==null?td:Math.pow(td,n),new Rr(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?ku:Math.pow(ku,n),new Rr(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Rr(Ps(this.r),Ps(this.g),Ps(this.b),nd(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mS,formatHex:mS,formatHex8:TJ,formatRgb:gS,toString:gS}));function mS(){return`#${Es(this.r)}${Es(this.g)}${Es(this.b)}`}function TJ(){return`#${Es(this.r)}${Es(this.g)}${Es(this.b)}${Es((isNaN(this.opacity)?1:this.opacity)*255)}`}function gS(){const n=nd(this.opacity);return`${n===1?"rgb(":"rgba("}${Ps(this.r)}, ${Ps(this.g)}, ${Ps(this.b)}${n===1?")":`, ${n})`}`}function nd(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ps(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Es(n){return n=Ps(n),(n<16?"0":"")+n.toString(16)}function vS(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new _i(n,e,t,r)}function h3(n){if(n instanceof _i)return new _i(n.h,n.s,n.l,n.opacity);if(n instanceof Qu||(n=Tu(n)),!n)return new _i;if(n instanceof _i)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),o=Math.max(e,t,r),s=NaN,a=o-i,l=(o+i)/2;return a?(e===o?s=(t-r)/a+(t<r)*6:t===o?s=(r-e)/a+2:s=(e-t)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new _i(s,a,l,n.opacity)}function PJ(n,e,t,r){return arguments.length===1?h3(n):new _i(n,e,t,r==null?1:r)}function _i(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Wv(_i,PJ,f3(Qu,{brighter(n){return n=n==null?td:Math.pow(td,n),new _i(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?ku:Math.pow(ku,n),new _i(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Rr(sm(n>=240?n-240:n+120,i,r),sm(n,i,r),sm(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new _i(yS(this.h),zc(this.s),zc(this.l),nd(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=nd(this.opacity);return`${n===1?"hsl(":"hsla("}${yS(this.h)}, ${zc(this.s)*100}%, ${zc(this.l)*100}%${n===1?")":`, ${n})`}`}}));function yS(n){return n=(n||0)%360,n<0?n+360:n}function zc(n){return Math.max(0,Math.min(1,n||0))}function sm(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const d3=n=>()=>n;function IJ(n,e){return function(t){return n+t*e}}function AJ(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function RJ(n){return(n=+n)==1?p3:function(e,t){return t-e?AJ(e,t,n):d3(isNaN(e)?t:e)}}function p3(n,e){var t=e-n;return t?IJ(n,t):d3(isNaN(n)?e:n)}const _S=function n(e){var t=RJ(e);function r(i,o){var s=t((i=s0(i)).r,(o=s0(o)).r),a=t(i.g,o.g),l=t(i.b,o.b),u=p3(i.opacity,o.opacity);return function(c){return i.r=s(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=n,r}(1);function Ro(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var a0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,am=new RegExp(a0.source,"g");function xJ(n){return function(){return n}}function NJ(n){return function(e){return n(e)+""}}function MJ(n,e){var t=a0.lastIndex=am.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(n=n+"",e=e+"";(r=a0.exec(n))&&(i=am.exec(e));)(o=i.index)>t&&(o=e.slice(t,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:Ro(r,i)})),t=am.lastIndex;return t<e.length&&(o=e.slice(t),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?NJ(l[0].x):xJ(e):(e=l.length,function(u){for(var c=0,f;c<e;++c)a[(f=l[c]).i]=f.x(u);return a.join("")})}var bS=180/Math.PI,l0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function m3(n,e,t,r,i,o){var s,a,l;return(s=Math.sqrt(n*n+e*e))&&(n/=s,e/=s),(l=n*t+e*r)&&(t-=n*l,r-=e*l),(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a,l/=a),n*r<e*t&&(n=-n,e=-e,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,n)*bS,skewX:Math.atan(l)*bS,scaleX:s,scaleY:a}}var Wc;function DJ(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?l0:m3(e.a,e.b,e.c,e.d,e.e,e.f)}function LJ(n){return n==null||(Wc||(Wc=document.createElementNS("http://www.w3.org/2000/svg","g")),Wc.setAttribute("transform",n),!(n=Wc.transform.baseVal.consolidate()))?l0:(n=n.matrix,m3(n.a,n.b,n.c,n.d,n.e,n.f))}function g3(n,e,t,r){function i(u){return u.length?u.pop()+" ":""}function o(u,c,f,d,g,h){if(u!==f||c!==d){var v=g.push("translate(",null,e,null,t);h.push({i:v-4,x:Ro(u,f)},{i:v-2,x:Ro(c,d)})}else(f||d)&&g.push("translate("+f+e+d+t)}function s(u,c,f,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Ro(u,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(u,c,f,d){u!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Ro(u,c)}):c&&f.push(i(f)+"skewX("+c+r)}function l(u,c,f,d,g,h){if(u!==f||c!==d){var v=g.push(i(g)+"scale(",null,",",null,")");h.push({i:v-4,x:Ro(u,f)},{i:v-2,x:Ro(c,d)})}else(f!==1||d!==1)&&g.push(i(g)+"scale("+f+","+d+")")}return function(u,c){var f=[],d=[];return u=n(u),c=n(c),o(u.translateX,u.translateY,c.translateX,c.translateY,f,d),s(u.rotate,c.rotate,f,d),a(u.skewX,c.skewX,f,d),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,d),u=c=null,function(g){for(var h=-1,v=d.length,m;++h<v;)f[(m=d[h]).i]=m.x(g);return f.join("")}}}var jJ=g3(DJ,"px, ","px)","deg)"),BJ=g3(LJ,", ",")",")"),FJ=1e-12;function wS(n){return((n=Math.exp(n))+1/n)/2}function UJ(n){return((n=Math.exp(n))-1/n)/2}function VJ(n){return((n=Math.exp(2*n))-1)/(n+1)}const qJ=function n(e,t,r){function i(o,s){var a=o[0],l=o[1],u=o[2],c=s[0],f=s[1],d=s[2],g=c-a,h=f-l,v=g*g+h*h,m,p;if(v<FJ)p=Math.log(d/u)/e,m=function(E){return[a+E*g,l+E*h,u*Math.exp(e*E*p)]};else{var y=Math.sqrt(v),b=(d*d-u*u+r*v)/(2*u*t*y),_=(d*d-u*u-r*v)/(2*d*t*y),w=Math.log(Math.sqrt(b*b+1)-b),S=Math.log(Math.sqrt(_*_+1)-_);p=(S-w)/e,m=function(E){var O=E*p,R=wS(w),D=u/(t*y)*(R*VJ(e*O+w)-UJ(w));return[a+D*g,l+D*h,u*R/wS(e*O+w)]}}return m.duration=p*1e3*e/Math.SQRT2,m}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return n(s,a,l)},i}(Math.SQRT2,2,4);var Wa=0,Ul=0,_l=0,v3=1e3,rd,Vl,id=0,Vs=0,tp=0,Pu=typeof performance=="object"&&performance.now?performance:Date,y3=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Kv(){return Vs||(y3(HJ),Vs=Pu.now()+tp)}function HJ(){Vs=0}function od(){this._call=this._time=this._next=null}od.prototype=Gv.prototype={constructor:od,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?Kv():+t)+(e==null?0:+e),!this._next&&Vl!==this&&(Vl?Vl._next=this:rd=this,Vl=this),this._call=n,this._time=t,u0()},stop:function(){this._call&&(this._call=null,this._time=1/0,u0())}};function Gv(n,e,t){var r=new od;return r.restart(n,e,t),r}function zJ(){Kv(),++Wa;for(var n=rd,e;n;)(e=Vs-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Wa}function SS(){Vs=(id=Pu.now())+tp,Wa=Ul=0;try{zJ()}finally{Wa=0,KJ(),Vs=0}}function WJ(){var n=Pu.now(),e=n-id;e>v3&&(tp-=e,id=n)}function KJ(){for(var n,e=rd,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:rd=t);Vl=n,u0(r)}function u0(n){if(!Wa){Ul&&(Ul=clearTimeout(Ul));var e=n-Vs;e>24?(n<1/0&&(Ul=setTimeout(SS,n-Pu.now()-tp)),_l&&(_l=clearInterval(_l))):(_l||(id=Pu.now(),_l=setInterval(WJ,v3)),Wa=1,y3(SS))}}function ES(n,e,t){var r=new od;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}var GJ=Ju("start","end","cancel","interrupt"),JJ=[],_3=0,CS=1,c0=2,$f=3,kS=4,f0=5,eh=6;function np(n,e,t,r,i,o){var s=n.__transition;if(!s)n.__transition={};else if(t in s)return;YJ(n,t,{name:e,index:r,group:i,on:GJ,tween:JJ,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:_3})}function Jv(n,e){var t=Ti(n,e);if(t.state>_3)throw new Error("too late; already scheduled");return t}function Xi(n,e){var t=Ti(n,e);if(t.state>$f)throw new Error("too late; already running");return t}function Ti(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function YJ(n,e,t){var r=n.__transition,i;r[e]=t,t.timer=Gv(o,0,t.time);function o(u){t.state=CS,t.timer.restart(s,t.delay,t.time),t.delay<=u&&s(u-t.delay)}function s(u){var c,f,d,g;if(t.state!==CS)return l();for(c in r)if(g=r[c],g.name===t.name){if(g.state===$f)return ES(s);g.state===kS?(g.state=eh,g.timer.stop(),g.on.call("interrupt",n,n.__data__,g.index,g.group),delete r[c]):+c<e&&(g.state=eh,g.timer.stop(),g.on.call("cancel",n,n.__data__,g.index,g.group),delete r[c])}if(ES(function(){t.state===$f&&(t.state=kS,t.timer.restart(a,t.delay,t.time),a(u))}),t.state=c0,t.on.call("start",n,n.__data__,t.index,t.group),t.state===c0){for(t.state=$f,i=new Array(d=t.tween.length),c=0,f=-1;c<d;++c)(g=t.tween[c].value.call(n,n.__data__,t.index,t.group))&&(i[++f]=g);i.length=f+1}}function a(u){for(var c=u<t.duration?t.ease.call(null,u/t.duration):(t.timer.restart(l),t.state=f0,1),f=-1,d=i.length;++f<d;)i[f].call(n,c);t.state===f0&&(t.on.call("end",n,n.__data__,t.index,t.group),l())}function l(){t.state=eh,t.timer.stop(),delete r[e];for(var u in r)return;delete n.__transition}}function th(n,e){var t=n.__transition,r,i,o=!0,s;if(!!t){e=e==null?null:e+"";for(s in t){if((r=t[s]).name!==e){o=!1;continue}i=r.state>c0&&r.state<f0,r.state=eh,r.timer.stop(),r.on.call(i?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[s]}o&&delete n.__transition}}function QJ(n){return this.each(function(){th(this,n)})}function ZJ(n,e){var t,r;return function(){var i=Xi(this,n),o=i.tween;if(o!==t){r=t=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function XJ(n,e,t){var r,i;if(typeof t!="function")throw new Error;return function(){var o=Xi(this,n),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:t},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=a;break}l===u&&i.push(a)}o.tween=i}}function $J(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r=Ti(this.node(),t).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===n)return s.value;return null}return this.each((e==null?ZJ:XJ)(t,n,e))}function Yv(n,e,t){var r=n._id;return n.each(function(){var i=Xi(this,r);(i.value||(i.value={}))[e]=t.apply(this,arguments)}),function(i){return Ti(i,r).value[e]}}function b3(n,e){var t;return(typeof e=="number"?Ro:e instanceof Tu?_S:(t=Tu(e))?(e=t,_S):MJ)(n,e)}function eY(n){return function(){this.removeAttribute(n)}}function tY(n){return function(){this.removeAttributeNS(n.space,n.local)}}function nY(n,e,t){var r,i=t+"",o;return function(){var s=this.getAttribute(n);return s===i?null:s===r?o:o=e(r=s,t)}}function rY(n,e,t){var r,i=t+"",o;return function(){var s=this.getAttributeNS(n.space,n.local);return s===i?null:s===r?o:o=e(r=s,t)}}function iY(n,e,t){var r,i,o;return function(){var s,a=t(this),l;return a==null?void this.removeAttribute(n):(s=this.getAttribute(n),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a)))}}function oY(n,e,t){var r,i,o;return function(){var s,a=t(this),l;return a==null?void this.removeAttributeNS(n.space,n.local):(s=this.getAttributeNS(n.space,n.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a)))}}function sY(n,e){var t=ep(n),r=t==="transform"?BJ:b3;return this.attrTween(n,typeof e=="function"?(t.local?oY:iY)(t,r,Yv(this,"attr."+n,e)):e==null?(t.local?tY:eY)(t):(t.local?rY:nY)(t,r,e))}function aY(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function lY(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function uY(n,e){var t,r;function i(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&lY(n,o)),t}return i._value=e,i}function cY(n,e){var t,r;function i(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&aY(n,o)),t}return i._value=e,i}function fY(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=ep(n);return this.tween(t,(r.local?uY:cY)(r,e))}function hY(n,e){return function(){Jv(this,n).delay=+e.apply(this,arguments)}}function dY(n,e){return e=+e,function(){Jv(this,n).delay=e}}function pY(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?hY:dY)(e,n)):Ti(this.node(),e).delay}function mY(n,e){return function(){Xi(this,n).duration=+e.apply(this,arguments)}}function gY(n,e){return e=+e,function(){Xi(this,n).duration=e}}function vY(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?mY:gY)(e,n)):Ti(this.node(),e).duration}function yY(n,e){if(typeof e!="function")throw new Error;return function(){Xi(this,n).ease=e}}function _Y(n){var e=this._id;return arguments.length?this.each(yY(e,n)):Ti(this.node(),e).ease}function bY(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;Xi(this,n).ease=t}}function wY(n){if(typeof n!="function")throw new Error;return this.each(bY(this._id,n))}function SY(n){typeof n!="function"&&(n=XP(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var o=e[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&n.call(l,l.__data__,u,o)&&a.push(l);return new mo(r,this._parents,this._name,this._id)}function EY(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,i=t.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=e[a],u=t[a],c=l.length,f=s[a]=new Array(c),d,g=0;g<c;++g)(d=l[g]||u[g])&&(f[g]=d);for(;a<r;++a)s[a]=e[a];return new mo(s,this._parents,this._name,this._id)}function CY(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function kY(n,e,t){var r,i,o=CY(e)?Jv:Xi;return function(){var s=o(this,n),a=s.on;a!==r&&(i=(r=a).copy()).on(e,t),s.on=i}}function OY(n,e){var t=this._id;return arguments.length<2?Ti(this.node(),t).on.on(n):this.each(kY(t,n,e))}function TY(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function PY(){return this.on("end.remove",TY(this._id))}function IY(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Hv(n));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,u=o[s]=new Array(l),c,f,d=0;d<l;++d)(c=a[d])&&(f=n.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),u[d]=f,np(u[d],e,t,d,u,Ti(c,t)));return new mo(o,this._parents,e,t)}function AY(n){var e=this._name,t=this._id;typeof n!="function"&&(n=ZP(n));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],u=l.length,c,f=0;f<u;++f)if(c=l[f]){for(var d=n.call(c,c.__data__,f,l),g,h=Ti(c,t),v=0,m=d.length;v<m;++v)(g=d[v])&&np(g,e,t,v,d,h);o.push(d),s.push(c)}return new mo(o,s,e,t)}var RY=Yu.prototype.constructor;function xY(){return new RY(this._groups,this._parents)}function NY(n,e){var t,r,i;return function(){var o=za(this,n),s=(this.style.removeProperty(n),za(this,n));return o===s?null:o===t&&s===r?i:i=e(t=o,r=s)}}function w3(n){return function(){this.style.removeProperty(n)}}function MY(n,e,t){var r,i=t+"",o;return function(){var s=za(this,n);return s===i?null:s===r?o:o=e(r=s,t)}}function DY(n,e,t){var r,i,o;return function(){var s=za(this,n),a=t(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(n),za(this,n))),s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a))}}function LY(n,e){var t,r,i,o="style."+e,s="end."+o,a;return function(){var l=Xi(this,n),u=l.on,c=l.value[o]==null?a||(a=w3(e)):void 0;(u!==t||i!==c)&&(r=(t=u).copy()).on(s,i=c),l.on=r}}function jY(n,e,t){var r=(n+="")=="transform"?jJ:b3;return e==null?this.styleTween(n,NY(n,r)).on("end.style."+n,w3(n)):typeof e=="function"?this.styleTween(n,DY(n,r,Yv(this,"style."+n,e))).each(LY(this._id,n)):this.styleTween(n,MY(n,r,e),t).on("end.style."+n,null)}function BY(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function FY(n,e,t){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&BY(n,s,t)),r}return o._value=e,o}function UY(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,FY(n,e,t==null?"":t))}function VY(n){return function(){this.textContent=n}}function qY(n){return function(){var e=n(this);this.textContent=e==null?"":e}}function HY(n){return this.tween("text",typeof n=="function"?qY(Yv(this,"text",n)):VY(n==null?"":n+""))}function zY(n){return function(e){this.textContent=n.call(this,e)}}function WY(n){var e,t;function r(){var i=n.apply(this,arguments);return i!==t&&(e=(t=i)&&zY(i)),e}return r._value=n,r}function KY(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,WY(n))}function GY(){for(var n=this._name,e=this._id,t=S3(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var c=Ti(l,e);np(l,n,t,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new mo(r,this._parents,n,t)}function JY(){var n,e,t=this,r=t._id,i=t.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};t.each(function(){var u=Xi(this,r),c=u.on;c!==n&&(e=(n=c).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),u.on=e}),i===0&&o()})}var YY=0;function mo(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function S3(){return++YY}var eo=Yu.prototype;mo.prototype={constructor:mo,select:IY,selectAll:AY,selectChild:eo.selectChild,selectChildren:eo.selectChildren,filter:SY,merge:EY,selection:xY,transition:GY,call:eo.call,nodes:eo.nodes,node:eo.node,size:eo.size,empty:eo.empty,each:eo.each,on:OY,attr:sY,attrTween:fY,style:jY,styleTween:UY,text:HY,textTween:KY,remove:PY,tween:$J,delay:pY,duration:vY,ease:_Y,easeVarying:wY,end:JY,[Symbol.iterator]:eo[Symbol.iterator]};function QY(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var ZY={time:null,delay:0,duration:250,ease:QY};function XY(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function $Y(n){var e,t;n instanceof mo?(e=n._id,n=n._name):(e=S3(),(t=ZY).time=Kv(),n=n==null?null:n+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&np(l,n,e,u,s,t||XY(l,e));return new mo(r,this._parents,n,e)}Yu.prototype.interrupt=QJ;Yu.prototype.transition=$Y;function E3(n,e){var t,r=1;n==null&&(n=0),e==null&&(e=0);function i(){var o,s=t.length,a,l=0,u=0;for(o=0;o<s;++o)a=t[o],l+=a.x,u+=a.y;for(l=(l/s-n)*r,u=(u/s-e)*r,o=0;o<s;++o)a=t[o],a.x-=l,a.y-=u}return i.initialize=function(o){t=o},i.x=function(o){return arguments.length?(n=+o,i):n},i.y=function(o){return arguments.length?(e=+o,i):e},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function eQ(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return C3(this.cover(e,t),e,t,n)}function C3(n,e,t,r){if(isNaN(e)||isNaN(t))return n;var i,o=n._root,s={data:r},a=n._x0,l=n._y0,u=n._x1,c=n._y1,f,d,g,h,v,m,p,y;if(!o)return n._root=s,n;for(;o.length;)if((v=e>=(f=(a+u)/2))?a=f:u=f,(m=t>=(d=(l+c)/2))?l=d:c=d,i=o,!(o=o[p=m<<1|v]))return i[p]=s,n;if(g=+n._x.call(null,o.data),h=+n._y.call(null,o.data),e===g&&t===h)return s.next=o,i?i[p]=s:n._root=s,n;do i=i?i[p]=new Array(4):n._root=new Array(4),(v=e>=(f=(a+u)/2))?a=f:u=f,(m=t>=(d=(l+c)/2))?l=d:c=d;while((p=m<<1|v)===(y=(h>=d)<<1|g>=f));return i[y]=o,i[p]=s,n}function tQ(n){var e,t,r=n.length,i,o,s=new Array(r),a=new Array(r),l=1/0,u=1/0,c=-1/0,f=-1/0;for(t=0;t<r;++t)isNaN(i=+this._x.call(null,e=n[t]))||isNaN(o=+this._y.call(null,e))||(s[t]=i,a[t]=o,i<l&&(l=i),i>c&&(c=i),o<u&&(u=o),o>f&&(f=o));if(l>c||u>f)return this;for(this.cover(l,u).cover(c,f),t=0;t<r;++t)C3(this,s[t],a[t],n[t]);return this}function nQ(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(t))i=(t=Math.floor(n))+1,o=(r=Math.floor(e))+1;else{for(var s=i-t||1,a=this._root,l,u;t>n||n>=i||r>e||e>=o;)switch(u=(e<r)<<1|n<t,l=new Array(4),l[u]=a,a=l,s*=2,u){case 0:i=t+s,o=r+s;break;case 1:t=i-s,o=r+s;break;case 2:i=t+s,r=o-s;break;case 3:t=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=t,this._y0=r,this._x1=i,this._y1=o,this}function rQ(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function iQ(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function pr(n,e,t,r,i){this.node=n,this.x0=e,this.y0=t,this.x1=r,this.y1=i}function oQ(n,e,t){var r,i=this._x0,o=this._y0,s,a,l,u,c=this._x1,f=this._y1,d=[],g=this._root,h,v;for(g&&d.push(new pr(g,i,o,c,f)),t==null?t=1/0:(i=n-t,o=e-t,c=n+t,f=e+t,t*=t);h=d.pop();)if(!(!(g=h.node)||(s=h.x0)>c||(a=h.y0)>f||(l=h.x1)<i||(u=h.y1)<o))if(g.length){var m=(s+l)/2,p=(a+u)/2;d.push(new pr(g[3],m,p,l,u),new pr(g[2],s,p,m,u),new pr(g[1],m,a,l,p),new pr(g[0],s,a,m,p)),(v=(e>=p)<<1|n>=m)&&(h=d[d.length-1],d[d.length-1]=d[d.length-1-v],d[d.length-1-v]=h)}else{var y=n-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),_=y*y+b*b;if(_<t){var w=Math.sqrt(t=_);i=n-w,o=e-w,c=n+w,f=e+w,r=g.data}}return r}function sQ(n){if(isNaN(c=+this._x.call(null,n))||isNaN(f=+this._y.call(null,n)))return this;var e,t=this._root,r,i,o,s=this._x0,a=this._y0,l=this._x1,u=this._y1,c,f,d,g,h,v,m,p;if(!t)return this;if(t.length)for(;;){if((h=c>=(d=(s+l)/2))?s=d:l=d,(v=f>=(g=(a+u)/2))?a=g:u=g,e=t,!(t=t[m=v<<1|h]))return this;if(!t.length)break;(e[m+1&3]||e[m+2&3]||e[m+3&3])&&(r=e,p=m)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(o=t.next)&&delete t.next,i?(o?i.next=o:delete i.next,this):e?(o?e[m]=o:delete e[m],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[p]=t:this._root=t),this):(this._root=o,this)}function aQ(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function lQ(){return this._root}function uQ(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function cQ(n){var e=[],t,r=this._root,i,o,s,a,l;for(r&&e.push(new pr(r,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(r=t.node,o=t.x0,s=t.y0,a=t.x1,l=t.y1)&&r.length){var u=(o+a)/2,c=(s+l)/2;(i=r[3])&&e.push(new pr(i,u,c,a,l)),(i=r[2])&&e.push(new pr(i,o,c,u,l)),(i=r[1])&&e.push(new pr(i,u,s,a,c)),(i=r[0])&&e.push(new pr(i,o,s,u,c))}return this}function fQ(n){var e=[],t=[],r;for(this._root&&e.push(new pr(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,l=r.x1,u=r.y1,c=(s+l)/2,f=(a+u)/2;(o=i[0])&&e.push(new pr(o,s,a,c,f)),(o=i[1])&&e.push(new pr(o,c,a,l,f)),(o=i[2])&&e.push(new pr(o,s,f,c,u)),(o=i[3])&&e.push(new pr(o,c,f,l,u))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.x1,r.y1);return this}function hQ(n){return n[0]}function dQ(n){return arguments.length?(this._x=n,this):this._x}function pQ(n){return n[1]}function mQ(n){return arguments.length?(this._y=n,this):this._y}function k3(n,e,t){var r=new Qv(e==null?hQ:e,t==null?pQ:t,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function Qv(n,e,t,r,i,o){this._x=n,this._y=e,this._x0=t,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function OS(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var Er=k3.prototype=Qv.prototype;Er.copy=function(){var n=new Qv(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=OS(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=OS(r));return n};Er.add=eQ;Er.addAll=tQ;Er.cover=nQ;Er.data=rQ;Er.extent=iQ;Er.find=oQ;Er.remove=sQ;Er.removeAll=aQ;Er.root=lQ;Er.size=uQ;Er.visit=cQ;Er.visitAfter=fQ;Er.x=dQ;Er.y=mQ;function eu(n){return function(){return n}}function ma(n){return(n()-.5)*1e-6}function gQ(n){return n.index}function TS(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function Zv(n){var e=gQ,t=f,r,i=eu(30),o,s,a,l,u,c=1;n==null&&(n=[]);function f(m){return 1/Math.min(a[m.source.index],a[m.target.index])}function d(m){for(var p=0,y=n.length;p<c;++p)for(var b=0,_,w,S,E,O,R,D;b<y;++b)_=n[b],w=_.source,S=_.target,E=S.x+S.vx-w.x-w.vx||ma(u),O=S.y+S.vy-w.y-w.vy||ma(u),R=Math.sqrt(E*E+O*O),R=(R-o[b])/R*m*r[b],E*=R,O*=R,S.vx-=E*(D=l[b]),S.vy-=O*D,w.vx+=E*(D=1-D),w.vy+=O*D}function g(){if(!!s){var m,p=s.length,y=n.length,b=new Map(s.map((w,S)=>[e(w,S,s),w])),_;for(m=0,a=new Array(p);m<y;++m)_=n[m],_.index=m,typeof _.source!="object"&&(_.source=TS(b,_.source)),typeof _.target!="object"&&(_.target=TS(b,_.target)),a[_.source.index]=(a[_.source.index]||0)+1,a[_.target.index]=(a[_.target.index]||0)+1;for(m=0,l=new Array(y);m<y;++m)_=n[m],l[m]=a[_.source.index]/(a[_.source.index]+a[_.target.index]);r=new Array(y),h(),o=new Array(y),v()}}function h(){if(!!s)for(var m=0,p=n.length;m<p;++m)r[m]=+t(n[m],m,n)}function v(){if(!!s)for(var m=0,p=n.length;m<p;++m)o[m]=+i(n[m],m,n)}return d.initialize=function(m,p){s=m,u=p,g()},d.links=function(m){return arguments.length?(n=m,g(),d):n},d.id=function(m){return arguments.length?(e=m,d):e},d.iterations=function(m){return arguments.length?(c=+m,d):c},d.strength=function(m){return arguments.length?(t=typeof m=="function"?m:eu(+m),h(),d):t},d.distance=function(m){return arguments.length?(i=typeof m=="function"?m:eu(+m),v(),d):i},d}const vQ=1664525,yQ=1013904223,PS=4294967296;function _Q(){let n=1;return()=>(n=(vQ*n+yQ)%PS)/PS}function bQ(n){return n.x}function wQ(n){return n.y}var SQ=10,EQ=Math.PI*(3-Math.sqrt(5));function Xv(n){var e,t=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,l=Gv(f),u=Ju("tick","end"),c=_Q();n==null&&(n=[]);function f(){d(),u.call("tick",e),t<r&&(l.stop(),u.call("end",e))}function d(v){var m,p=n.length,y;v===void 0&&(v=1);for(var b=0;b<v;++b)for(t+=(o-t)*i,a.forEach(function(_){_(t)}),m=0;m<p;++m)y=n[m],y.fx==null?y.x+=y.vx*=s:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=s:(y.y=y.fy,y.vy=0);return e}function g(){for(var v=0,m=n.length,p;v<m;++v){if(p=n[v],p.index=v,p.fx!=null&&(p.x=p.fx),p.fy!=null&&(p.y=p.fy),isNaN(p.x)||isNaN(p.y)){var y=SQ*Math.sqrt(.5+v),b=v*EQ;p.x=y*Math.cos(b),p.y=y*Math.sin(b)}(isNaN(p.vx)||isNaN(p.vy))&&(p.vx=p.vy=0)}}function h(v){return v.initialize&&v.initialize(n,c),v}return g(),e={tick:d,restart:function(){return l.restart(f),e},stop:function(){return l.stop(),e},nodes:function(v){return arguments.length?(n=v,g(),a.forEach(h),e):n},alpha:function(v){return arguments.length?(t=+v,e):t},alphaMin:function(v){return arguments.length?(r=+v,e):r},alphaDecay:function(v){return arguments.length?(i=+v,e):+i},alphaTarget:function(v){return arguments.length?(o=+v,e):o},velocityDecay:function(v){return arguments.length?(s=1-v,e):1-s},randomSource:function(v){return arguments.length?(c=v,a.forEach(h),e):c},force:function(v,m){return arguments.length>1?(m==null?a.delete(v):a.set(v,h(m)),e):a.get(v)},find:function(v,m,p){var y=0,b=n.length,_,w,S,E,O;for(p==null?p=1/0:p*=p,y=0;y<b;++y)E=n[y],_=v-E.x,w=m-E.y,S=_*_+w*w,S<p&&(O=E,p=S);return O},on:function(v,m){return arguments.length>1?(u.on(v,m),e):u.on(v)}}}function $v(){var n,e,t,r,i=eu(-30),o,s=1,a=1/0,l=.81;function u(g){var h,v=n.length,m=k3(n,bQ,wQ).visitAfter(f);for(r=g,h=0;h<v;++h)e=n[h],m.visit(d)}function c(){if(!!n){var g,h=n.length,v;for(o=new Array(h),g=0;g<h;++g)v=n[g],o[v.index]=+i(v,g,n)}}function f(g){var h=0,v,m,p=0,y,b,_;if(g.length){for(y=b=_=0;_<4;++_)(v=g[_])&&(m=Math.abs(v.value))&&(h+=v.value,p+=m,y+=m*v.x,b+=m*v.y);g.x=y/p,g.y=b/p}else{v=g,v.x=v.data.x,v.y=v.data.y;do h+=o[v.data.index];while(v=v.next)}g.value=h}function d(g,h,v,m){if(!g.value)return!0;var p=g.x-e.x,y=g.y-e.y,b=m-h,_=p*p+y*y;if(b*b/l<_)return _<a&&(p===0&&(p=ma(t),_+=p*p),y===0&&(y=ma(t),_+=y*y),_<s&&(_=Math.sqrt(s*_)),e.vx+=p*g.value*r/_,e.vy+=y*g.value*r/_),!0;if(g.length||_>=a)return;(g.data!==e||g.next)&&(p===0&&(p=ma(t),_+=p*p),y===0&&(y=ma(t),_+=y*y),_<s&&(_=Math.sqrt(s*_)));do g.data!==e&&(b=o[g.data.index]*r/_,e.vx+=p*b,e.vy+=y*b);while(g=g.next)}return u.initialize=function(g,h){n=g,t=h,c()},u.strength=function(g){return arguments.length?(i=typeof g=="function"?g:eu(+g),c(),u):i},u.distanceMin=function(g){return arguments.length?(s=g*g,u):Math.sqrt(s)},u.distanceMax=function(g){return arguments.length?(a=g*g,u):Math.sqrt(a)},u.theta=function(g){return arguments.length?(l=g*g,u):Math.sqrt(l)},u}function CQ(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const IS=Symbol("implicit");function O3(){var n=new aS,e=[],t=[],r=IS;function i(o){let s=n.get(o);if(s===void 0){if(r!==IS)return r;n.set(o,s=e.push(o)-1)}return t[s%t.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],n=new aS;for(const s of o)n.has(s)||n.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(t=Array.from(o),i):t.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return O3(e,t).unknown(r)},CQ.apply(i,arguments),i}function kQ(n){for(var e=n.length/6|0,t=new Array(e),r=0;r<e;)t[r]="#"+n.slice(r*6,++r*6);return t}const OQ=kQ("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Kc=n=>()=>n;function TQ(n,{sourceEvent:e,target:t,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function ao(n,e,t){this.k=n,this.x=e,this.y=t}ao.prototype={constructor:ao,scale:function(n){return n===1?this:new ao(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new ao(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rp=new ao(1,0,0);ao.prototype;function lm(n){n.stopImmediatePropagation()}function bl(n){n.preventDefault(),n.stopImmediatePropagation()}function PQ(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function IQ(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function AS(){return this.__zoom||rp}function AQ(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function RQ(){return navigator.maxTouchPoints||"ontouchstart"in this}function xQ(n,e,t){var r=n.invertX(e[0][0])-t[0][0],i=n.invertX(e[1][0])-t[1][0],o=n.invertY(e[0][1])-t[0][1],s=n.invertY(e[1][1])-t[1][1];return n.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function T3(){var n=PQ,e=IQ,t=xQ,r=AQ,i=RQ,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=qJ,u=Ju("start","zoom","end"),c,f,d,g=500,h=150,v=0,m=10;function p(L){L.property("__zoom",AS).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",D).filter(i).on("touchstart.zoom",F).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",H).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(L,N,U,$){var Z=L.selection?L.selection():L;Z.property("__zoom",AS),L!==Z?w(L,N,U,$):Z.interrupt().each(function(){S(this,arguments).event($).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},p.scaleBy=function(L,N,U,$){p.scaleTo(L,function(){var Z=this.__zoom.k,A=typeof N=="function"?N.apply(this,arguments):N;return Z*A},U,$)},p.scaleTo=function(L,N,U,$){p.transform(L,function(){var Z=e.apply(this,arguments),A=this.__zoom,P=U==null?_(Z):typeof U=="function"?U.apply(this,arguments):U,V=A.invert(P),W=typeof N=="function"?N.apply(this,arguments):N;return t(b(y(A,W),P,V),Z,s)},U,$)},p.translateBy=function(L,N,U,$){p.transform(L,function(){return t(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof U=="function"?U.apply(this,arguments):U),e.apply(this,arguments),s)},null,$)},p.translateTo=function(L,N,U,$,Z){p.transform(L,function(){var A=e.apply(this,arguments),P=this.__zoom,V=$==null?_(A):typeof $=="function"?$.apply(this,arguments):$;return t(rp.translate(V[0],V[1]).scale(P.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof U=="function"?-U.apply(this,arguments):-U),A,s)},$,Z)};function y(L,N){return N=Math.max(o[0],Math.min(o[1],N)),N===L.k?L:new ao(N,L.x,L.y)}function b(L,N,U){var $=N[0]-U[0]*L.k,Z=N[1]-U[1]*L.k;return $===L.x&&Z===L.y?L:new ao(L.k,$,Z)}function _(L){return[(+L[0][0]+ +L[1][0])/2,(+L[0][1]+ +L[1][1])/2]}function w(L,N,U,$){L.on("start.zoom",function(){S(this,arguments).event($).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event($).end()}).tween("zoom",function(){var Z=this,A=arguments,P=S(Z,A).event($),V=e.apply(Z,A),W=U==null?_(V):typeof U=="function"?U.apply(Z,A):U,z=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),I=Z.__zoom,M=typeof N=="function"?N.apply(Z,A):N,J=l(I.invert(W).concat(z/I.k),M.invert(W).concat(z/M.k));return function(q){if(q===1)q=M;else{var Q=J(q),ae=z/Q[2];q=new ao(ae,W[0]-Q[0]*ae,W[1]-Q[1]*ae)}P.zoom(null,q)}})}function S(L,N,U){return!U&&L.__zooming||new E(L,N)}function E(L,N){this.that=L,this.args=N,this.active=0,this.sourceEvent=null,this.extent=e.apply(L,N),this.taps=0}E.prototype={event:function(L){return L&&(this.sourceEvent=L),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(L,N){return this.mouse&&L!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&L!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&L!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(L){var N=yi(this.that).datum();u.call(L,this.that,new TQ(L,{sourceEvent:this.sourceEvent,target:p,type:L,transform:this.that.__zoom,dispatch:u}),N)}};function O(L,...N){if(!n.apply(this,arguments))return;var U=S(this,N).event(L),$=this.__zoom,Z=Math.max(o[0],Math.min(o[1],$.k*Math.pow(2,r.apply(this,arguments)))),A=io(L);if(U.wheel)(U.mouse[0][0]!==A[0]||U.mouse[0][1]!==A[1])&&(U.mouse[1]=$.invert(U.mouse[0]=A)),clearTimeout(U.wheel);else{if($.k===Z)return;U.mouse=[A,$.invert(A)],th(this),U.start()}bl(L),U.wheel=setTimeout(P,h),U.zoom("mouse",t(b(y($,Z),U.mouse[0],U.mouse[1]),U.extent,s));function P(){U.wheel=null,U.end()}}function R(L,...N){if(d||!n.apply(this,arguments))return;var U=L.currentTarget,$=S(this,N,!0).event(L),Z=yi(L.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",z,!0),A=io(L,U),P=L.clientX,V=L.clientY;l3(L.view),lm(L),$.mouse=[A,this.__zoom.invert(A)],th(this),$.start();function W(I){if(bl(I),!$.moved){var M=I.clientX-P,J=I.clientY-V;$.moved=M*M+J*J>v}$.event(I).zoom("mouse",t(b($.that.__zoom,$.mouse[0]=io(I,U),$.mouse[1]),$.extent,s))}function z(I){Z.on("mousemove.zoom mouseup.zoom",null),u3(I.view,$.moved),bl(I),$.event(I).end()}}function D(L,...N){if(!!n.apply(this,arguments)){var U=this.__zoom,$=io(L.changedTouches?L.changedTouches[0]:L,this),Z=U.invert($),A=U.k*(L.shiftKey?.5:2),P=t(b(y(U,A),$,Z),e.apply(this,N),s);bl(L),a>0?yi(this).transition().duration(a).call(w,P,$,L):yi(this).call(p.transform,P,$,L)}}function F(L,...N){if(!!n.apply(this,arguments)){var U=L.touches,$=U.length,Z=S(this,N,L.changedTouches.length===$).event(L),A,P,V,W;for(lm(L),P=0;P<$;++P)V=U[P],W=io(V,this),W=[W,this.__zoom.invert(W),V.identifier],Z.touch0?!Z.touch1&&Z.touch0[2]!==W[2]&&(Z.touch1=W,Z.taps=0):(Z.touch0=W,A=!0,Z.taps=1+!!c);c&&(c=clearTimeout(c)),A&&(Z.taps<2&&(f=W[0],c=setTimeout(function(){c=null},g)),th(this),Z.start())}}function B(L,...N){if(!!this.__zooming){var U=S(this,N).event(L),$=L.changedTouches,Z=$.length,A,P,V,W;for(bl(L),A=0;A<Z;++A)P=$[A],V=io(P,this),U.touch0&&U.touch0[2]===P.identifier?U.touch0[0]=V:U.touch1&&U.touch1[2]===P.identifier&&(U.touch1[0]=V);if(P=U.that.__zoom,U.touch1){var z=U.touch0[0],I=U.touch0[1],M=U.touch1[0],J=U.touch1[1],q=(q=M[0]-z[0])*q+(q=M[1]-z[1])*q,Q=(Q=J[0]-I[0])*Q+(Q=J[1]-I[1])*Q;P=y(P,Math.sqrt(q/Q)),V=[(z[0]+M[0])/2,(z[1]+M[1])/2],W=[(I[0]+J[0])/2,(I[1]+J[1])/2]}else if(U.touch0)V=U.touch0[0],W=U.touch0[1];else return;U.zoom("touch",t(b(P,V,W),U.extent,s))}}function H(L,...N){if(!!this.__zooming){var U=S(this,N).event(L),$=L.changedTouches,Z=$.length,A,P;for(lm(L),d&&clearTimeout(d),d=setTimeout(function(){d=null},g),A=0;A<Z;++A)P=$[A],U.touch0&&U.touch0[2]===P.identifier?delete U.touch0:U.touch1&&U.touch1[2]===P.identifier&&delete U.touch1;if(U.touch1&&!U.touch0&&(U.touch0=U.touch1,delete U.touch1),U.touch0)U.touch0[1]=this.__zoom.invert(U.touch0[0]);else if(U.end(),U.taps===2&&(P=io(P,this),Math.hypot(f[0]-P[0],f[1]-P[1])<m)){var V=yi(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return p.wheelDelta=function(L){return arguments.length?(r=typeof L=="function"?L:Kc(+L),p):r},p.filter=function(L){return arguments.length?(n=typeof L=="function"?L:Kc(!!L),p):n},p.touchable=function(L){return arguments.length?(i=typeof L=="function"?L:Kc(!!L),p):i},p.extent=function(L){return arguments.length?(e=typeof L=="function"?L:Kc([[+L[0][0],+L[0][1]],[+L[1][0],+L[1][1]]]),p):e},p.scaleExtent=function(L){return arguments.length?(o[0]=+L[0],o[1]=+L[1],p):[o[0],o[1]]},p.translateExtent=function(L){return arguments.length?(s[0][0]=+L[0][0],s[1][0]=+L[1][0],s[0][1]=+L[0][1],s[1][1]=+L[1][1],p):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},p.constrain=function(L){return arguments.length?(t=L,p):t},p.duration=function(L){return arguments.length?(a=+L,p):a},p.interpolate=function(L){return arguments.length?(l=L,p):l},p.on=function(){var L=u.on.apply(u,arguments);return L===u?p:L},p.clickDistance=function(L){return arguments.length?(v=(L=+L)*L,p):Math.sqrt(v)},p.tapDistance=function(L){return arguments.length?(m=+L,p):m},p}const NQ=[{id:"EmpProf0",labels:["Employee","Professor"],properties:{name:"Arnie"}},{id:"EmpProf1",labels:["Employee","Professor"],properties:{name:"Lesia"}},{id:"EmpProf2",labels:["Employee","Professor"],properties:{name:"Aaron"}},{id:"EmpProf3",labels:["Employee","Professor"],properties:{name:"Clemency"}},{id:"EmpProf4",labels:["Employee","Professor"],properties:{name:"Stirling"}},{id:"EmpTeacher0",labels:["Employee","Teacher"],properties:{name:"Kenton"}},{id:"EmpTeacher1",labels:["Employee","Teacher"],properties:{name:"Daniela"}},{id:"EmpTeacher2",labels:["Employee","Teacher"],properties:{name:"Nowell"}},{id:"EmpTeacher3",labels:["Employee","Teacher"],properties:{name:"McKenna"}},{id:"EmpPhD0",labels:["Employee","Ph.D."],properties:{name:"Sondra"}},{id:"EmpPhD1",labels:["Employee","Ph.D."],properties:{name:"Benjamin"}},{id:"EmpPhD2",labels:["Employee","Ph.D."],properties:{name:"Amos"}},{id:"EmpPhD3",labels:["Employee","Ph.D."],properties:{name:"Anissa"}},{id:"EmpPhD4",labels:["Employee","Ph.D."],properties:{name:"Brodie"}},{id:"EmpPhD5",labels:["Employee","Ph.D."],properties:{name:"Perlie"}},{id:"EmpResearch0",labels:["Employee","Researcher"],properties:{name:"Sylvanus"}},{id:"EmpResearch1",labels:["Employee","Researcher"],properties:{name:"Ebenezer"}},{id:"EmpResearch2",labels:["Employee","Researcher"],properties:{name:"Jaye"}},{id:"StudentBach0",labels:["Student"],properties:{name:"Nance",degree:"Bachelor"}},{id:"StudentBach1",labels:["Student"],properties:{name:"Tyra",degree:"Bachelor"}},{id:"StudentBach2",labels:["Student"],properties:{name:"Ivan",degree:"Bachelor"}},{id:"StudentBach3",labels:["Student"],properties:{name:"Adelaide",degree:"Bachelor"}},{id:"StudentBach4",labels:["Student"],properties:{name:"Mary Anne",degree:"Bachelor"}},{id:"StudentBach5",labels:["Student"],properties:{name:"Kamden",degree:"Bachelor"}},{id:"StudentBach6",labels:["Student"],properties:{name:"Karissa",degree:"Bachelor"}},{id:"StudentBach7",labels:["Student"],properties:{name:"Morley",degree:"Bachelor"}},{id:"StudentMaster0",labels:["Student"],properties:{name:"Charleigh",degree:"Master"}},{id:"StudentMaster1",labels:["Student"],properties:{name:"Christina",degree:"Master"}},{id:"StudentMaster2",labels:["Student"],properties:{name:"Mariabella",degree:"Master"}},{id:"StudentMaster3",labels:["Student"],properties:{name:"Oswin",degree:"Master"}},{id:"StudentMaster4",labels:["Student"],properties:{name:"Nickolas",degree:"Master"}},{id:"StudentMaster5",labels:["Student"],properties:{name:"Randall",degree:"Master"}},{id:"StudentMaster6",labels:["Student"],properties:{name:"Esmond",degree:"Master"}},{id:"StudentMaster7",labels:["Student"],properties:{name:"Eustacia",degree:"Master"}},{id:"StudentMaster8",labels:["Student"],properties:{name:"Georgie",degree:"Master"}},{id:"StudentMaster9",labels:["Student"],properties:{name:"Charissa",degree:"Master"}},{id:"Thesis0",labels:["Thesis","BachelorThesis"],properties:{year:"2020"}},{id:"Thesis1",labels:["Thesis","BachelorThesis"],properties:{year:"2021"}},{id:"Thesis2",labels:["Thesis","BachelorThesis"],properties:{year:"2021",finished:!1}},{id:"Thesis3",labels:["Thesis","MasterThesis"],properties:{year:"2019"}},{id:"Thesis4",labels:["Thesis","MasterThesis"],properties:{year:"2019",finished:!0}},{id:"Thesis5",labels:["Thesis","MasterThesis"],properties:{year:"2022",finished:!1}},{id:"Course0",labels:["Course","Core"],properties:{name:"Calculus"}},{id:"Course1",labels:["Course","Core"],properties:{name:"Linear Algebra"}},{id:"Course2",labels:["Course","Elective"],properties:{name:"Computer Systems"}},{id:"Course3",labels:["Course","Core"],properties:{name:"Logic and set theory"}},{id:"Course4",labels:["Course","Core"],properties:{name:"Programming"}},{id:"Course5",labels:["Course","Elective"],properties:{name:"Computer graphics"}},{id:"University",labels:["University"],properties:{name:"TU/e",city:"Eindhoven"}}],MQ=[{id:"e1",source:"EmpProf0",target:"EmpPhD5",isDirected:!0,labels:["mentors"],properties:{}},{id:"e2",source:"EmpProf1",target:"EmpPhD3",isDirected:!0,labels:["mentors"],properties:{}},{id:"e3",source:"EmpProf1",target:"EmpPhD2",isDirected:!0,labels:["mentors"],properties:{}},{id:"e4",source:"EmpProf1",target:"EmpPhD4",isDirected:!0,labels:["mentors"],properties:{}},{id:"e5",source:"EmpProf1",target:"StudentBach0",isDirected:!0,labels:["mentors"],properties:{}},{id:"e6",source:"EmpProf1",target:"StudentBach1",isDirected:!0,labels:["mentors"],properties:{}},{id:"e7",source:"EmpProf3",target:"StudentBach2",isDirected:!0,labels:["mentors"],properties:{}},{id:"e8",source:"EmpProf4",target:"StudentBach3",isDirected:!0,labels:["mentors"],properties:{}},{id:"e9",source:"EmpProf2",target:"StudentBach4",isDirected:!0,labels:["mentors"],properties:{}},{id:"e10",source:"EmpProf1",target:"StudentBach5",isDirected:!0,labels:["mentors"],properties:{}},{id:"e11",source:"EmpProf2",target:"StudentBach6",isDirected:!0,labels:["mentors"],properties:{}},{id:"e12",source:"EmpProf2",target:"StudentBach7",isDirected:!0,labels:["mentors"],properties:{}},{id:"e13",source:"EmpProf4",target:"StudentMaster0",isDirected:!0,labels:["mentors"],properties:{}},{id:"e14",source:"EmpProf4",target:"StudentMaster1",isDirected:!0,labels:["mentors"],properties:{}},{id:"e15",source:"EmpProf4",target:"StudentMaster2",isDirected:!0,labels:["mentors"],properties:{}},{id:"e16",source:"EmpProf4",target:"StudentMaster3",isDirected:!0,labels:["mentors"],properties:{}},{id:"e17",source:"EmpProf4",target:"StudentMaster4",isDirected:!0,labels:["mentors"],properties:{}},{id:"e18",source:"EmpProf1",target:"StudentMaster5",isDirected:!0,labels:["mentors"],properties:{}},{id:"e19",source:"EmpProf1",target:"StudentMaster6",isDirected:!0,labels:["mentors"],properties:{}},{id:"e20",source:"EmpProf1",target:"StudentMaster7",isDirected:!0,labels:["mentors"],properties:{}},{id:"e21",source:"EmpProf1",target:"StudentMaster8",isDirected:!0,labels:["mentors"],properties:{}},{id:"e22",source:"EmpProf0",target:"University",isDirected:!0,labels:["worksAt"],properties:{since:2013}},{id:"e23",source:"EmpProf1",target:"University",isDirected:!0,labels:["worksAt"],properties:{since:2019}},{id:"e24",source:"EmpProf2",target:"University",isDirected:!0,labels:["worksAt"],properties:{since:2015}},{id:"e25",source:"EmpProf3",target:"University",isDirected:!0,labels:["worksAt"],properties:{since:2016}},{id:"e26",source:"EmpProf4",target:"University",isDirected:!0,labels:["worksAt"],properties:{since:2013}},{id:"e27",source:"EmpTeacher0",target:"University",isDirected:!0,labels:["worksAt"],properties:{since:2016}},{id:"e28",source:"EmpTeacher1",target:"University",isDirected:!0,labels:["worksAt"],properties:{since:2014}},{id:"e29",source:"EmpTeacher2",target:"University",isDirected:!0,labels:["worksAt"],properties:{since:2019}},{id:"e30",source:"EmpTeacher3",target:"University",isDirected:!0,labels:["worksAt"],properties:{since:2012}},{id:"e31",source:"EmpPhD0",target:"University",isDirected:!0,labels:["worksAt"],properties:{since:2020}},{id:"e32",source:"EmpPhD1",target:"University",isDirected:!0,labels:["worksAt"],properties:{since:2021}},{id:"e33",source:"EmpPhD2",target:"University",isDirected:!0,labels:["worksAt"],properties:{since:2019}},{id:"e34",source:"EmpPhD3",target:"University",isDirected:!0,labels:["worksAt"],properties:{since:2020}},{id:"e35",source:"EmpPhD4",target:"University",isDirected:!0,labels:["worksAt"],properties:{since:2021}},{id:"e36",source:"EmpPhD5",target:"University",isDirected:!0,labels:["worksAt"],properties:{since:2020}},{id:"e37",source:"EmpResearch0",target:"University",isDirected:!0,labels:["worksAt"],properties:{since:2018}},{id:"e38",source:"EmpResearch1",target:"University",isDirected:!0,labels:["worksAt"],properties:{since:2018}},{id:"e39",source:"EmpResearch2",target:"University",isDirected:!0,labels:["worksAt"],properties:{since:2016}},{id:"e40",source:"StudentBach0",target:"University",isDirected:!0,labels:["studiesAt"],properties:{since:2016}},{id:"e41",source:"StudentBach1",target:"University",isDirected:!0,labels:["studiesAt"],properties:{since:2020}},{id:"e42",source:"StudentBach2",target:"University",isDirected:!0,labels:["studiesAt"],properties:{since:2019}},{id:"e43",source:"StudentBach3",target:"University",isDirected:!0,labels:["studiesAt"],properties:{since:2017}},{id:"e44",source:"StudentBach4",target:"University",isDirected:!0,labels:["studiesAt"],properties:{since:2019}},{id:"e45",source:"StudentBach5",target:"University",isDirected:!0,labels:["studiesAt"],properties:{since:2017}},{id:"e46",source:"StudentBach6",target:"University",isDirected:!0,labels:["studiesAt"],properties:{since:2012}},{id:"e47",source:"StudentBach7",target:"University",isDirected:!0,labels:["studiesAt"],properties:{since:2020}},{id:"e48",source:"StudentMaster0",target:"University",isDirected:!0,labels:["studiesAt"],properties:{since:2016}},{id:"e49",source:"StudentMaster1",target:"University",isDirected:!0,labels:["studiesAt"],properties:{since:2022}},{id:"e50",source:"StudentMaster2",target:"University",isDirected:!0,labels:["studiesAt"],properties:{since:2020}},{id:"e51",source:"StudentMaster3",target:"University",isDirected:!0,labels:["studiesAt"],properties:{since:2018}},{id:"e52",source:"StudentMaster4",target:"University",isDirected:!0,labels:["studiesAt"],properties:{since:2021}},{id:"e53",source:"StudentMaster5",target:"University",isDirected:!0,labels:["studiesAt"],properties:{since:2021}},{id:"e54",source:"StudentMaster6",target:"University",isDirected:!0,labels:["studiesAt"],properties:{since:2020}},{id:"e55",source:"StudentMaster7",target:"University",isDirected:!0,labels:["studiesAt"],properties:{since:2022}},{id:"e56",source:"StudentMaster8",target:"University",isDirected:!0,labels:["studiesAt"],properties:{since:2021}},{id:"e57",source:"StudentMaster9",target:"University",isDirected:!0,labels:["studiesAt"],properties:{since:2020}},{id:"e58",source:"StudentBach0",target:"Thesis0",isDirected:!0,labels:["worksOn"],properties:{}},{id:"e59",source:"StudentBach2",target:"Thesis1",isDirected:!0,labels:["worksOn"],properties:{}},{id:"e60",source:"StudentBach6",target:"Thesis2",isDirected:!0,labels:["worksOn"],properties:{}},{id:"e61",source:"StudentMaster0",target:"Thesis3",isDirected:!0,labels:["worksOn"],properties:{}},{id:"e62",source:"StudentMaster3",target:"Thesis4",isDirected:!0,labels:["worksOn"],properties:{}},{id:"e63",source:"StudentMaster6",target:"Thesis5",isDirected:!0,labels:["worksOn"],properties:{}},{id:"e64",source:"EmpTeacher1",target:"Thesis0",isDirected:!0,labels:["supervises"],properties:{}},{id:"e65",source:"EmpProf0",target:"Thesis1",isDirected:!0,labels:["supervises"],properties:{}},{id:"e66",source:"EmpTeacher1",target:"Thesis2",isDirected:!0,labels:["supervises"],properties:{}},{id:"e67",source:"EmpProf3",target:"Thesis3",isDirected:!0,labels:["supervises"],properties:{}},{id:"e68",source:"EmpTeacher0",target:"Thesis4",isDirected:!0,labels:["supervises"],properties:{}},{id:"e69",source:"EmpTeacher2",target:"Thesis5",isDirected:!0,labels:["supervises"],properties:{}},{id:"e70",source:"EmpProf3",target:"Course0",isDirected:!0,labels:["teaches"],properties:{in:2020}},{id:"e71",source:"EmpTeacher2",target:"Course0",isDirected:!0,labels:["teaches"],properties:{in:2021}},{id:"e72",source:"EmpTeacher2",target:"Course1",isDirected:!0,labels:["teaches"],properties:{in:2020}},{id:"e73",source:"EmpTeacher2",target:"Course1",isDirected:!0,labels:["teaches"],properties:{in:2021}},{id:"e74",source:"EmpProf2",target:"Course2",isDirected:!0,labels:["teaches"],properties:{in:2020}},{id:"e75",source:"EmpProf4",target:"Course2",isDirected:!0,labels:["teaches"],properties:{in:2022}},{id:"e76",source:"EmpTeacher3",target:"Course3",isDirected:!0,labels:["teaches"],properties:{in:2022}},{id:"e77",source:"EmpTeacher0",target:"Course4",isDirected:!0,labels:["teaches"],properties:{in:2021}},{id:"e78",source:"EmpTeacher3",target:"Course5",isDirected:!0,labels:["teaches"],properties:{in:2020}},{id:"e79",source:"StudentBach3",target:"Course0",isDirected:!0,labels:["follows"],properties:{in:2021}},{id:"e80",source:"StudentBach5",target:"Course0",isDirected:!0,labels:["follows"],properties:{in:2021}},{id:"e81",source:"StudentBach2",target:"Course0",isDirected:!0,labels:["follows"],properties:{in:2021}},{id:"e82",source:"StudentMaster5",target:"Course1",isDirected:!0,labels:["follows"],properties:{in:2020}},{id:"e83",source:"StudentBach2",target:"Course1",isDirected:!0,labels:["follows"],properties:{in:2021}},{id:"e84",source:"StudentMaster6",target:"Course2",isDirected:!0,labels:["follows"],properties:{in:2022}},{id:"e85",source:"StudentMaster2",target:"Course2",isDirected:!0,labels:["follows"],properties:{in:2020}},{id:"e86",source:"StudentBach2",target:"Course2",isDirected:!0,labels:["follows"],properties:{in:2020}},{id:"e87",source:"StudentBach7",target:"Course3",isDirected:!0,labels:["follows"],properties:{in:2022}},{id:"e88",source:"StudentBach6",target:"Course3",isDirected:!0,labels:["follows"],properties:{in:2022}},{id:"e89",source:"StudentBach3",target:"Course3",isDirected:!0,labels:["follows"],properties:{in:2022}},{id:"e90",source:"StudentMaster9",target:"Course4",isDirected:!0,labels:["follows"],properties:{in:2021}},{id:"e91",source:"StudentMaster5",target:"Course4",isDirected:!0,labels:["follows"],properties:{in:2021}},{id:"e92",source:"StudentMaster2",target:"Course4",isDirected:!0,labels:["follows"],properties:{in:2021}},{id:"e93",source:"StudentBach3",target:"Course5",isDirected:!0,labels:["follows"],properties:{in:2020}},{id:"e94",source:"StudentBach1",target:"Course5",isDirected:!0,labels:["follows"],properties:{in:2020}},{id:"e95",source:"StudentBach0",target:"Course5",isDirected:!0,labels:["follows"],properties:{in:2020}},{id:"e96",source:"EmpProf2",target:"EmpResearch2",isDirected:!1,labels:["worksWith"],properties:{}},{id:"e97",source:"EmpProf3",target:"EmpResearch1",isDirected:!1,labels:["worksWith"],properties:{}}],DQ={nodes:NQ,edges:MQ},LQ=[{label:"Employee",occurence:1},{label:"Student",occurence:.8},{label:"Thesis",occurence:.7},{label:"Course",occurence:.6},{label:"University",occurence:.3},{label:"mentors",occurence:.7},{label:"worksAt",occurence:.3},{label:"studiesAt",occurence:.2},{label:"worksOn",occurence:.7},{label:"supervises",occurence:.7},{label:"worksWith",occurence:.3},{label:"teaches",occurence:.6},{label:"follows",occurence:.6},{label:"Core",occurence:0},{label:"Elective",occurence:0},{label:"MasterThesis",occurence:0},{label:"BachelorThesis",occurence:0},{label:"Professor",occurence:0},{label:"Teacher",occurence:0},{label:"Ph.D.",occurence:0},{label:"Researcher",occurence:0}],jQ=JSON.stringify(DQ,null,2),BQ=JSON.stringify(LQ,null,2);class ey{constructor(){Vt(this,"nodeNodes");Vt(this,"edgeNodes");Vt(this,"labelNodes");Vt(this,"propertyNodes");Vt(this,"labelEdges");Vt(this,"propertyEdges");Vt(this,"edgeEdges");this.emptyGraph()}getNode(e){var t,r,i;return(i=(r=(t=this.nodeNodes.get(e))!=null?t:this.edgeNodes.get(e))!=null?r:this.labelNodes.get(e))!=null?i:this.propertyNodes.get(e)}emptyGraph(){this.nodeNodes=new Map,this.edgeNodes=new Map,this.labelNodes=new Map,this.propertyNodes=new Map,this.labelEdges=[],this.propertyEdges=[],this.edgeEdges=[]}addNodeNode(e){this.nodeNodes.set(e.id,e)}addNodeNodes(e){e.forEach(t=>this.addNodeNode(t))}addEdgeNode(e){this.edgeNodes.set(e.id,e)}addEdgeNodes(e){e.forEach(t=>this.addEdgeNode(t))}addLabelNode(e){this.labelNodes.set(e.id,e)}addLabelNodes(e){e.forEach(t=>this.addLabelNode(t))}addPropertyNode(e){this.propertyNodes.set(e.id,e)}addPropertyNodes(e){e.forEach(t=>this.addPropertyNode(t))}addLabelEdge(e){this.labelEdges.push(e)}addLabelEdges(e){this.labelEdges.push(...e)}addPropertyEdge(e){this.propertyEdges.push(e)}addPropertyEdges(e){this.propertyEdges.push(...e)}addEdgeEdge(e){this.edgeEdges.push(e)}addEdgeEdges(e){this.edgeEdges.push(...e)}}function ql(n,e){return`${n}_${e}`}function Eo(n){return n.split("_").slice(1).join("_")}var Is=(n=>(n.edge="edge",n.label="label",n.property="property",n))(Is||{}),Tr=(n=>(n.node="node",n.edge="edge",n.label="label",n.propertyType="propertyType",n))(Tr||{});class FQ{}class UQ extends FQ{constructor(){super(...arguments);Vt(this,"currentPId");Vt(this,"storage");Vt(this,"k",3);Vt(this,"nodes");Vt(this,"edges");Vt(this,"pIds",{old_pid:new Map,new_pid:new Map})}insert(t){return this.storage.has(t)?this.storage.get(t):(this.currentPId++,this.storage.set(t,this.currentPId),this.currentPId)}getNodePid(t,r){const i=this.pIds.j_pid_0.get(t.id).toString(),o=r.filter(l=>l.source.id===t.id).map(l=>`(${l.label},${l.oldPId})`),s=[i,...o].join(),a=this.insert(s);return[t.id,a]}uniqEdgeTId(t){return[...new Map(t.map(r=>[JSON.stringify(r),r])).values()]}groupBy(t,r){return t.reduce(function(i,o){return i[o[r]]||(i[o[r]]=[]),i[o[r]].push(o),i},{})}uniqEdges(t){const r={};return t.filter(i=>{const o=JSON.stringify(i);return r[o]?!1:r[o]=!0})}calculateSchema(t){console.time("calculateSchema"),this.currentPId=0,this.storage=new Map,this.nodes=[...t.nodeNodes.values(),...t.edgeNodes.values(),...t.labelNodes.values(),...t.propertyNodes.values()],this.edges=[...t.edgeEdges,...t.labelEdges,...t.propertyEdges],console.time(`build_bsim_${this.k}`),this.build_bsim(this.k),console.timeEnd(`build_bsim_${this.k}`);const r=this.graphFromPIds();return console.timeEnd("calculateSchema"),r}build_bsim(t){if(t===0){this.pIds.j_pid_0=new Map,this.nodes.sort((s,a)=>s.label.localeCompare(a.label));let o=this.nodes[0].label;this.nodes.forEach(s=>{s.label!==o&&(this.currentPId++,o=s.label),this.pIds.new_pid.set(s.id,this.currentPId),this.pIds.j_pid_0.set(s.id,this.currentPId)});return}console.time(`build_bsim_${t-1}`),this.build_bsim(t-1),console.timeEnd(`build_bsim_${t-1}`),this.pIds.old_pid=new Map(this.pIds.new_pid),console.time(`build_bsim_${t-1}_get_unique_edges`);const r=this.uniqEdgeTId(this.edges.map(o=>{const s=this.pIds.old_pid.get(o.target.id);return{source:o.source,label:o.label,oldPId:s}}));console.timeEnd(`build_bsim_${t-1}_get_unique_edges`),console.time(`build_bsim_${t-1}_get_node_signatures`);const i=this.nodes.map(o=>this.getNodePid(o,r));this.pIds.new_pid=new Map(i),this.pIds[`j_pid_${t}`]=new Map(i),console.timeEnd(`build_bsim_${t-1}_get_node_signatures`)}graphFromPIds(){var a,l,u,c,f,d,g;console.time("graphFromPIds");const t=new ey;t.emptyGraph();const r=new Map(this.nodes.map(h=>{const v=ql(h.type,this.pIds.new_pid.get(h.id).toString());return[this.pIds.new_pid.get(h.id),{id:v,label:h.label,type:h.type,x:h.x,y:h.y}]})),i=this.uniqEdges(this.edges.map(h=>{const v=r.get(this.pIds.new_pid.get(h.source.id)),m=r.get(this.pIds.new_pid.get(h.target.id));return{source:v,label:h.label,target:m,type:h.type}}));console.time("splitEdges");const o=this.groupBy(i,"type");console.timeEnd("splitEdges"),console.time("splitNodes");const s=this.groupBy([...r.values()],"type");return console.timeEnd("splitNodes"),t.nodeNodes=(a=s[Tr.node])!=null?a:[],t.edgeNodes=(l=s[Tr.edge])!=null?l:[],t.labelNodes=(u=s[Tr.label])!=null?u:[],t.propertyNodes=(c=s[Tr.propertyType])!=null?c:[],t.edgeEdges=(f=o[Is.edge])!=null?f:[],t.labelEdges=(d=o[Is.label])!=null?d:[],t.propertyEdges=(g=o[Is.property])!=null?g:[],console.timeEnd("graphFromPIds"),t}}class oa{static labelEdge(e,t){return{source:e,target:t,label:"label",type:Is.label}}static propertyEdge(e,t,r){return{source:e,target:t,label:r,type:Is.property}}static edgeEdge(e,t,r){return{source:e,target:t,label:r,type:Is.edge}}}class Hl{static nodeNode(e,t,r){return{id:ql(Tr.node,e),label:"node",type:Tr.node,x:t,y:r}}static edgeNode(e,t,r){return{id:ql(Tr.edge,e),label:"edge",type:Tr.edge,x:t,y:r}}static labelNode(e,t,r){return{id:ql(Tr.label,e),label:e,type:Tr.label,x:t,y:r}}static propertyNode(e,t,r){return{id:ql(Tr.propertyType,e.toString()),label:e.toString(),type:Tr.propertyType,x:t,y:r}}}var da=(n=>(n.string="string",n.number="number",n.boolean="boolean",n.array="array",n.other="other",n))(da||{}),ar=(n=>(n.from="from",n.to="to",n.connects1="connects1",n.connects2="connects2",n))(ar||{});function VQ(n){console.time("propertyToSimpleGraph");const e=new ey,t=new Map,r=new Map,i=new Map;function o(a,l){let u;r.has(l)?u=r.get(l):(u=Hl.labelNode(l,a.x,a.y),r.set(l,u),e.addLabelNode(u)),e.addLabelEdge(oa.labelEdge(a,u))}function s(a,l,u){let c;l.constructor===String?c=da.string:l.constructor===Number?c=da.number:l.constructor===Boolean?c=da.boolean:l.constructor===Array?c=da.array:c=da.other;let f;i.has(c)?f=i.get(c):(f=Hl.propertyNode(c,a.x,a.y),i.set(c,f),e.addPropertyNode(f)),e.addPropertyEdge(oa.propertyEdge(a,f,u))}return n.nodes.forEach(a=>{const l=Hl.nodeNode(a.id,a.x,a.y);t.set(a.id,l),e.addNodeNode(l),a.labels.forEach(u=>o(l,u)),a.properties.forEach((u,c)=>s(l,u,c))}),n.edges.forEach(a=>{const l=Hl.edgeNode(a.id,a.x,a.y);e.addEdgeNode(l);const u=t.get(a.sourceNode),c=t.get(a.targetNode);a.isDirected?(e.addEdgeEdge(oa.edgeEdge(l,u,ar.from)),e.addEdgeEdge(oa.edgeEdge(l,c,ar.to))):(e.addEdgeEdge(oa.edgeEdge(l,u,ar.connects1)),e.addEdgeEdge(oa.edgeEdge(l,c,ar.connects2))),a.labels.forEach(f=>o(l,f)),a.properties.forEach((f,d)=>s(l,f,d))}),console.timeEnd("propertyToSimpleGraph"),e}function ty(n){console.time("simpleToPropertyGraph");const e=new Za;return e.nodes=new Map([...n.nodeNodes.values()].map(t=>{const r=n.labelEdges.filter(a=>a.source===t).map(a=>a.target.label),i=new Map(n.propertyEdges.filter(a=>a.source===t).map(a=>[a.label.toString(),a.target.label])),o=Eo(t.id),s=new gd({id:o,labels:r,properties:i,x:t.x,y:t.y});return[Eo(t.id),s]})),e.edges=new Map([...n.edgeNodes.values()].map(t=>{const r=n.labelEdges.filter(f=>f.source===t).map(f=>f.target.label),i=new Map(n.propertyEdges.filter(f=>f.source===t).map(f=>[f.label.toString(),f.target.label])),o=n.edgeEdges.filter(f=>f.source===t);if(o.length!=2)throw new Error("Edge must have 2 connected nodes");if(o[0].label===ar.connects1&&o[1].label!==ar.connects2||o[0].label===ar.connects2&&o[1].label!==ar.connects1||o[0].label===ar.to&&o[1].label!==ar.from||o[0].label===ar.from&&o[1].label!==ar.to)throw new Error("Edges must have same directionality");const s=o[0].label!==ar.connects1&&o[0].label!==ar.connects2;let a,l;!s||o[0].label===ar.from?(a=Eo(o[0].target.id),l=Eo(o[1].target.id)):(a=Eo(o[1].target.id),l=Eo(o[0].target.id));const u=Eo(t.id),c=new md({id:u,labels:r,properties:i,sourceNode:a,targetNode:l,isDirected:s,x:t.x,y:t.y});return[Eo(t.id),c]})),console.timeEnd("simpleToPropertyGraph"),e}var sd=(n=>(n.mask="Mask",n.filter="Filter",n))(sd||{});function qQ(n,e){const t=n.filter(r=>r.occurence>=e);return new Set(t.map(r=>r.label))}function HQ(n,e,t,r,i){console.time("induceWorkload");const o=new ey;if(o.emptyGraph(),r===0)return o.nodeNodes=n.nodeNodes,o.edgeNodes=n.edgeNodes,o.labelNodes=n.labelNodes,o.propertyNodes=n.propertyNodes,o.edgeEdges=n.edgeEdges,o.labelEdges=n.labelEdges,o.propertyEdges=n.propertyEdges,console.timeEnd("induceWorkload"),o;const s=qQ(e,r),a=[...n.labelEdges.filter(l=>s.has(n.labelNodes.get(l.target.id).label))];if(console.time("induceWorkloadGetLabelConnecs"),a.forEach(l=>{var c;const u=(c=n.nodeNodes.get(l.source.id))!=null?c:n.edgeNodes.get(l.source.id);u.type==Tr.node?o.nodeNodes.has(l.source.id)||o.addNodeNode(u):o.edgeNodes.has(l.source.id)||o.addEdgeNode(u)}),console.timeEnd("induceWorkloadGetLabelConnects"),i>0)for(let l=0;l<i;l++){const u=n.edgeEdges.filter(f=>o.nodeNodes.has(f.target.id)),c=n.edgeEdges.filter(f=>o.edgeNodes.has(f.source.id));u.forEach(f=>{o.edgeNodes.has(f.source.id)||o.addEdgeNode(n.edgeNodes.get(f.source.id))}),c.forEach(f=>{o.nodeNodes.has(f.target.id)||o.addNodeNode(n.nodeNodes.get(f.target.id))})}if(console.time("induceWorkloadGetProperties"),o.propertyEdges=n.propertyEdges.filter(l=>o.nodeNodes.has(l.source.id)||o.edgeNodes.has(l.source.id)).map(l=>(o.propertyNodes.has(l.target.id)||o.addPropertyNode(l.target),l)),console.timeEnd("induceWorkloadGetProperties"),console.time("induceWorkloadGetLabels"),o.labelEdges=n.labelEdges.filter(l=>o.nodeNodes.has(l.source.id)||o.edgeNodes.has(l.source.id)).map(l=>(o.labelNodes.has(l.target.id)||o.addLabelNode(l.target),l)),console.timeEnd("induceWorkloadGetLabels"),t==="Mask")console.time("induceWorkloadMask"),o.nodeNodes=n.nodeNodes,o.edgeNodes=n.edgeNodes,o.edgeEdges=n.edgeEdges,console.timeEnd("induceWorkloadMask");else if(t==="Filter"){console.time("induceWorkloadFilter");let l=!1;const u=Hl.nodeNode("_empty");o.edgeEdges=n.edgeEdges.filter(c=>o.edgeNodes.has(c.source.id)).map(c=>o.nodeNodes.has(c.target.id)?c:(l=!0,{...c,target:u})),l&&o.addNodeNode(u),console.timeEnd("induceWorkloadFilter")}return console.timeEnd("induceWorkload"),o}const sa=[];function zQ(n,e){return{subscribe:$i(n,e).subscribe}}function $i(n,e=Ne){let t;const r=new Set;function i(a){if(on(n,a)&&(n=a,t)){const l=!sa.length;for(const u of r)u[1](),sa.push(u,n);if(l){for(let u=0;u<sa.length;u+=2)sa[u][0](sa[u+1]);sa.length=0}}}function o(a){i(a(n))}function s(a,l=Ne){const u=[a,l];return r.add(u),r.size===1&&(t=e(i)||Ne),a(n),()=>{r.delete(u),r.size===0&&(t(),t=null)}}return{set:i,update:o,subscribe:s}}function Zu(n,e,t){const r=!Array.isArray(n),i=r?[n]:n,o=e.length<2;return zQ(t,s=>{let a=!1;const l=[];let u=0,c=Ne;const f=()=>{if(u)return;c();const g=e(r?l[0]:l,s);o?s(g):c=si(g)?g:Ne},d=i.map((g,h)=>E0(g,v=>{l[h]=v,u&=~(1<<h),a&&f()},()=>{u|=1<<h}));return a=!0,f(),function(){rn(d),c()}})}function RS(n,e,t){const r=n.slice();return r[20]=e[t],r}function xS(n,e,t){const r=n.slice();return r[23]=e[t],r}function NS(n){let e,t,r,i,o,s;return{c(){e=Ft("g"),t=Ft("path"),T(t,"class","stroke-black dark:stroke-gray-200 svelte-1nfccio"),T(t,"id",r=n[23].source.id+"_"+n[23].target.id+"_"+n[23].linkIndex),T(t,"d",i=n[6](n[23])),T(t,"marker-end",o=n[23].directional?"url(#prop_arrow)":"url(#prop_dot)"),T(e,"class","edge svelte-1nfccio"),T(e,"transform",s="translate("+n[5].x+" "+n[5].y+") scale("+n[5].k+" "+n[5].k+")")},m(a,l){ue(a,e,l),j(e,t)},p(a,l){l&16&&r!==(r=a[23].source.id+"_"+a[23].target.id+"_"+a[23].linkIndex)&&T(t,"id",r),l&16&&i!==(i=a[6](a[23]))&&T(t,"d",i),l&16&&o!==(o=a[23].directional?"url(#prop_arrow)":"url(#prop_dot)")&&T(t,"marker-end",o),l&32&&s!==(s="translate("+a[5].x+" "+a[5].y+") scale("+a[5].k+" "+a[5].k+")")&&T(e,"transform",s)},d(a){a&&le(e)}}}function MS(n){let e,t,r=n[20].id+"",i,o,s,a,l,u,c,f,d=`<pre class="text-black dark:text-gray-200">${n[20].stringRepres}<pre>`,g,h,v,m,p;return{c(){e=Ft("g"),t=Ft("title"),i=Ue(r),o=Ft("rect"),f=Ft("foreignObject"),T(o,"class","stroke-black dark:stroke-gray-200 svelte-1nfccio"),T(o,"stroke-dasharray",s=n[20].type===ru.edge?"5,3":null),T(o,"x",a=n[20].x-.5*n[20].width),T(o,"y",l=n[20].y-.5*n[20].height),T(o,"width",u=n[20].width),T(o,"height",c=n[20].height),T(f,"x",g=n[20].x-.5*n[20].width),T(f,"y",h=n[20].y-.5*n[20].height),T(f,"width",v=n[20].width),T(f,"height",m=n[20].height),T(e,"class","node"),T(e,"transform",p="translate("+n[5].x+" "+n[5].y+") scale("+n[5].k+" "+n[5].k+")")},m(y,b){ue(y,e,b),j(e,t),j(t,i),j(e,o),j(e,f),f.innerHTML=d},p(y,b){b&8&&r!==(r=y[20].id+"")&&_t(i,r),b&8&&s!==(s=y[20].type===ru.edge?"5,3":null)&&T(o,"stroke-dasharray",s),b&8&&a!==(a=y[20].x-.5*y[20].width)&&T(o,"x",a),b&8&&l!==(l=y[20].y-.5*y[20].height)&&T(o,"y",l),b&8&&u!==(u=y[20].width)&&T(o,"width",u),b&8&&c!==(c=y[20].height)&&T(o,"height",c),b&8&&d!==(d=`<pre class="text-black dark:text-gray-200">${y[20].stringRepres}<pre>`)&&(f.innerHTML=d),b&8&&g!==(g=y[20].x-.5*y[20].width)&&T(f,"x",g),b&8&&h!==(h=y[20].y-.5*y[20].height)&&T(f,"y",h),b&8&&v!==(v=y[20].width)&&T(f,"width",v),b&8&&m!==(m=y[20].height)&&T(f,"height",m),b&32&&p!==(p="translate("+y[5].x+" "+y[5].y+") scale("+y[5].k+" "+y[5].k+")")&&T(e,"transform",p)},d(y){y&&le(e)}}}function WQ(n){let e,t,r,i,o,s,a,l,u,c=n[4],f=[];for(let h=0;h<c.length;h+=1)f[h]=NS(xS(n,c,h));let d=n[3],g=[];for(let h=0;h<d.length;h+=1)g[h]=MS(RS(n,d,h));return{c(){e=ee("figure"),t=Ft("svg"),r=Ft("defs"),i=Ft("marker"),o=Ft("path"),s=Ft("marker"),a=Ft("circle");for(let h=0;h<f.length;h+=1)f[h].c();l=xt();for(let h=0;h<g.length;h+=1)g[h].c();T(o,"class","fill-black dark:fill-gray-200 stroke-0"),T(o,"d","M 0 0 L 10 5 L 0 10 z"),T(i,"id","prop_arrow"),T(i,"viewBox","0 0 10 10"),T(i,"refX","10"),T(i,"refY","5"),T(i,"markerWidth","13"),T(i,"markerHeight","13"),T(i,"orient","auto-start-reverse"),T(a,"class","fill-black dark:fill-gray-200 stroke-0"),T(a,"cx","5"),T(a,"cy","5"),T(a,"r","5"),T(s,"id","prop_dot"),T(s,"viewBox","0 0 10 10"),T(s,"refX","10"),T(s,"refY","5"),T(s,"markerWidth","13"),T(s,"markerHeight","13"),T(s,"orient","auto-start-reverse"),T(t,"width",n[1]),T(t,"height",n[2]),T(t,"xmlns","http://www.w3.org/2000/svg"),T(t,"class","svelte-1nfccio"),T(e,"class","svelte-1nfccio"),Ki(()=>n[9].call(e))},m(h,v){ue(h,e,v),j(e,t),j(t,r),j(r,i),j(i,o),j(r,s),j(s,a);for(let m=0;m<f.length;m+=1)f[m].m(t,null);j(t,l);for(let m=0;m<g.length;m+=1)g[m].m(t,null);n[8](t),u=k0(e,n[9].bind(e))},p(h,[v]){if(v&112){c=h[4];let m;for(m=0;m<c.length;m+=1){const p=xS(h,c,m);f[m]?f[m].p(p,v):(f[m]=NS(p),f[m].c(),f[m].m(t,l))}for(;m<f.length;m+=1)f[m].d(1);f.length=c.length}if(v&40){d=h[3];let m;for(m=0;m<d.length;m+=1){const p=RS(h,d,m);g[m]?g[m].p(p,v):(g[m]=MS(p),g[m].c(),g[m].m(t,null))}for(;m<g.length;m+=1)g[m].d(1);g.length=d.length}v&2&&T(t,"width",h[1]),v&4&&T(t,"height",h[2])},i:Ne,o:Ne,d(h){h&&le(e),xn(f,h),xn(g,h),n[8](null),u()}}}function KQ(n){n.sort(function(e,t){return e.source>t.source?1:e.source<t.source?-1:e.target>t.target?1:e.target<t.target?-1:0})}function GQ(n,e,t){let{graph:r}=e,i,o,s,a=[],l=[],u=rp,c={};const f=Xv(),d=r.subscribe(E=>{t(3,a=[...E.nodes.values(),...E.edges.values()]),a.forEach(O=>O.setPrintOptions()),t(4,l=[...E.edges.values()].flatMap(O=>[{source:O.isDirected?E.nodes.get(O.sourceNode):O,target:O.isDirected?O:E.nodes.get(O.sourceNode),directional:O.isDirected},{source:O,target:E.nodes.get(O.targetNode),directional:O.isDirected}])),b(l),f.nodes(a).force("link",Zv(l).distance(250)).force("charge",$v().strength(-1200)).on("tick",g).alpha(1).tick(600),a.forEach(O=>{O.fx=O.x,O.fy=O.y})});Nr(()=>{yi(i).call(c3().container(i).subject(v).on("start",m).on("drag",p).on("end",y)).call(T3().scaleExtent([1/10,8]).on("zoom",h))}),fo(()=>{f.stop(),d()});function g(){f.tick(),t(3,a=[...a]),t(4,l=[...l])}function h(E){t(5,u=E.transform),g()}function v(E){const R=f.nodes().filter(D=>D.x-.5*D.width<u.invertX(E.x)&&D.x+.5*D.width>u.invertX(E.x)&&D.y-.5*D.height<u.invertY(E.y)&&D.y+.5*D.height>u.invertY(E.y))[0];return R&&(R.x=u.applyX(R.x),R.y=u.applyY(R.y)),R}function m(E){E.active||f.alphaTarget(.3).restart(),E.subject.fx=u.invertX(E.subject.x),E.subject.fy=u.invertY(E.subject.y)}function p(E){E.subject.fx=u.invertX(E.x),E.subject.fy=u.invertY(E.y)}function y(E){E.active||f.alphaTarget(0)}function b(E){KQ(E);for(var O=0;O<E.length;O++)O!=0&&E[O].source==E[O-1].source&&E[O].target==E[O-1].target?E[O].linkIndex=E[O-1].linkIndex+1:E[O].linkIndex=1,c[E[O].source.id+":"+E[O].target.id]=E[O].linkIndex}function _(E){const O=E.source.x<E.target.x-.5*E.target.width,R=E.source.y<E.target.y-.5*E.target.height,D=E.source.x>E.target.x+.5*E.target.width,F=E.source.y>E.target.y+.5*E.target.height;let B,H,L,N;O&&R?(B=E.source.x,L=E.source.y+.5*E.source.height,H=E.target.x-.5*E.target.width,N=E.target.y):O&&F?(B=E.source.x+.5*E.source.width,L=E.source.y,H=E.target.x,N=E.target.y+.5*E.target.height):O?(B=E.source.x+.5*E.source.width,L=E.source.y,H=E.target.x-.5*E.target.width,N=E.target.y):D&&R?(B=E.source.x-.5*E.source.width,L=E.source.y,H=E.target.x,N=E.target.y-.5*E.target.height):D&&F?(B=E.source.x,L=E.source.y-.5*E.source.height,H=E.target.x+.5*E.target.width,N=E.target.y):D?(B=E.source.x-.5*E.source.width,L=E.source.y,H=E.target.x+.5*E.target.width,N=E.target.y):R?(B=E.source.x,L=E.source.y+.5*E.source.height,H=E.target.x,N=E.target.y-.5*E.target.height):(B=E.source.x,L=E.source.y-.5*E.source.height,H=E.target.x,N=E.target.y+.5*E.target.height);var U=H-B,$=N-L,Z=Math.sqrt(U*U+$*$),A=c[E.source.id+":"+E.target.id];return A>1&&(Z=Z/(1+1/A*(E.linkIndex-1))),`M${B} ${L} A ${Z}, ${Z} 0, 0, 0 ${H}, ${N}`}function w(E){wt[E?"unshift":"push"](()=>{i=E,t(0,i)})}function S(){s=this.clientHeight,o=this.clientWidth,t(2,s),t(1,o)}return n.$$set=E=>{"graph"in E&&t(7,r=E.graph)},[i,o,s,a,l,u,_,r,w,S]}class um extends rt{constructor(e){super(),nt(this,e,GQ,WQ,on,{graph:7})}}function DS(n,e,t){const r=n.slice();return r[21]=e[t],r}function LS(n,e,t){const r=n.slice();return r[24]=e[t],r}function jS(n){let e,t,r=n[24].label+"",i,o,s,a,l,u,c,f,d,g=n[24].label.toString()+"",h,v,m;return{c(){e=Ft("g"),t=Ft("title"),i=Ue(r),o=Ft("path"),l=Ft("path"),f=Ft("text"),d=Ft("textPath"),h=Ue(g),T(o,"class","stroke-black dark:stroke-gray-200 svelte-x44ch3"),T(o,"id",s=n[24].source.id+"_"+n[24].target.id+"_"+n[24].linkIndex),T(o,"d",a=n[7](!0,n[24])),T(o,"marker-end","url(#simple_arrow)"),T(l,"class","stroke-0 svelte-x44ch3"),T(l,"id",u="invis_"+n[24].source.id+"_"+n[24].target.id+"_"+n[24].linkIndex),T(l,"d",c=n[7](n[24].source.x<n[24].target.x,n[24])),T(d,"href",v="#invis_"+n[24].source.id+"_"+n[24].target.id+"_"+n[24].linkIndex),T(d,"startOffset","50%"),T(d,"style",""),T(f,"class","fill-black dark:fill-gray-200 svelte-x44ch3"),T(e,"class","edge svelte-x44ch3"),T(e,"transform",m="translate("+n[5].x+" "+n[5].y+") scale("+n[5].k+" "+n[5].k+")")},m(p,y){ue(p,e,y),j(e,t),j(t,i),j(e,o),j(e,l),j(e,f),j(f,d),j(d,h)},p(p,y){y&16&&r!==(r=p[24].label+"")&&_t(i,r),y&16&&s!==(s=p[24].source.id+"_"+p[24].target.id+"_"+p[24].linkIndex)&&T(o,"id",s),y&16&&a!==(a=p[7](!0,p[24]))&&T(o,"d",a),y&16&&u!==(u="invis_"+p[24].source.id+"_"+p[24].target.id+"_"+p[24].linkIndex)&&T(l,"id",u),y&16&&c!==(c=p[7](p[24].source.x<p[24].target.x,p[24]))&&T(l,"d",c),y&16&&g!==(g=p[24].label.toString()+"")&&_t(h,g),y&16&&v!==(v="#invis_"+p[24].source.id+"_"+p[24].target.id+"_"+p[24].linkIndex)&&T(d,"href",v),y&32&&m!==(m="translate("+p[5].x+" "+p[5].y+") scale("+p[5].k+" "+p[5].k+")")&&T(e,"transform",m)},d(p){p&&le(e)}}}function BS(n){let e,t,r=n[21].id+"",i,o,s,a,l,u,c=n[21].label.toString()+"",f,d,g,h;return{c(){e=Ft("g"),t=Ft("title"),i=Ue(r),o=Ft("circle"),u=Ft("text"),f=Ue(c),T(o,"class","stroke-black"),T(o,"r",P3),T(o,"fill",s=n[6](n[21].type.toString())),T(o,"cx",a=n[21].x),T(o,"cy",l=n[21].y),T(u,"class","fill-black dark:fill-white svelte-x44ch3"),T(u,"x",d=n[21].x),T(u,"y",g=n[21].y),T(e,"class","node svelte-x44ch3"),T(e,"transform",h="translate("+n[5].x+" "+n[5].y+") scale("+n[5].k+" "+n[5].k+")")},m(v,m){ue(v,e,m),j(e,t),j(t,i),j(e,o),j(e,u),j(u,f)},p(v,m){m&8&&r!==(r=v[21].id+"")&&_t(i,r),m&8&&s!==(s=v[6](v[21].type.toString()))&&T(o,"fill",s),m&8&&a!==(a=v[21].x)&&T(o,"cx",a),m&8&&l!==(l=v[21].y)&&T(o,"cy",l),m&8&&c!==(c=v[21].label.toString()+"")&&_t(f,c),m&8&&d!==(d=v[21].x)&&T(u,"x",d),m&8&&g!==(g=v[21].y)&&T(u,"y",g),m&32&&h!==(h="translate("+v[5].x+" "+v[5].y+") scale("+v[5].k+" "+v[5].k+")")&&T(e,"transform",h)},d(v){v&&le(e)}}}function JQ(n){let e,t,r,i,o,s,a,l=n[4],u=[];for(let d=0;d<l.length;d+=1)u[d]=jS(LS(n,l,d));let c=n[3],f=[];for(let d=0;d<c.length;d+=1)f[d]=BS(DS(n,c,d));return{c(){e=ee("figure"),t=Ft("svg"),r=Ft("defs"),i=Ft("marker"),o=Ft("path");for(let d=0;d<u.length;d+=1)u[d].c();s=xt();for(let d=0;d<f.length;d+=1)f[d].c();T(o,"class","fill-black dark:fill-gray-200 stroke-0"),T(o,"d","M 0 0 L 10 5 L 0 10 z"),T(i,"id","simple_arrow"),T(i,"viewBox","0 0 10 10"),T(i,"refX","26"),T(i,"refY","6"),T(i,"markerWidth","13"),T(i,"markerHeight","13"),T(i,"orient","auto-start-reverse"),T(t,"width",n[0]),T(t,"height",n[1]),T(t,"class","svelte-x44ch3"),T(e,"class","svelte-x44ch3"),Ki(()=>n[10].call(e))},m(d,g){ue(d,e,g),j(e,t),j(t,r),j(r,i),j(i,o);for(let h=0;h<u.length;h+=1)u[h].m(t,null);j(t,s);for(let h=0;h<f.length;h+=1)f[h].m(t,null);n[9](t),a=k0(e,n[10].bind(e))},p(d,[g]){if(g&176){l=d[4];let h;for(h=0;h<l.length;h+=1){const v=LS(d,l,h);u[h]?u[h].p(v,g):(u[h]=jS(v),u[h].c(),u[h].m(t,s))}for(;h<u.length;h+=1)u[h].d(1);u.length=l.length}if(g&104){c=d[3];let h;for(h=0;h<c.length;h+=1){const v=DS(d,c,h);f[h]?f[h].p(v,g):(f[h]=BS(v),f[h].c(),f[h].m(t,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=c.length}g&1&&T(t,"width",d[0]),g&2&&T(t,"height",d[1])},i:Ne,o:Ne,d(d){d&&le(e),xn(u,d),xn(f,d),n[9](null),a()}}}const P3=20;function YQ(n){n.sort(function(e,t){return e.source>t.source?1:e.source<t.source?-1:e.target>t.target?1:e.target<t.target?-1:0})}function QQ(n,e,t){let{graph:r}=e,i,o,s,a=[],l=[],u=rp;const c=O3(OQ);let f={};const d=Xv(),g=r.subscribe(O=>{t(3,a=[...O.nodeNodes.values(),...O.edgeNodes.values(),...O.labelNodes.values(),...O.propertyNodes.values()]),t(4,l=[...O.edgeEdges,...O.labelEdges,...O.propertyEdges]),_(l),d.nodes(a).force("link",Zv(l).distance(250)).force("charge",$v().strength(-1200)).on("tick",h).alpha(1).tick(600),a.forEach(R=>{R.fx=R.x,R.fy=R.y})});Nr(()=>{yi(i).call(c3().container(i).subject(m).on("start",p).on("drag",y).on("end",b)).call(T3().scaleExtent([1/10,8]).on("zoom",v))}),fo(()=>{d.stop(),g()});function h(){d.tick(),t(3,a=[...a]),t(4,l=[...l])}function v(O){t(5,u=O.transform),h()}function m(O){const R=d.find(u.invertX(O.x),u.invertY(O.y),P3);return R&&(R.x=u.applyX(R.x),R.y=u.applyY(R.y)),R}function p(O){O.active||d.alphaTarget(.3).restart(),O.subject.fx=u.invertX(O.subject.x),O.subject.fy=u.invertY(O.subject.y)}function y(O){O.subject.fx=u.invertX(O.x),O.subject.fy=u.invertY(O.y)}function b(O){O.active||d.alphaTarget(0)}function _(O){YQ(O);for(var R=0;R<O.length;R++)R!=0&&O[R].source==O[R-1].source&&O[R].target==O[R-1].target?O[R].linkIndex=O[R-1].linkIndex+1:O[R].linkIndex=1,f[O[R].source.id+":"+O[R].target.id]=O[R].linkIndex}function w(O,R){var D=O?R.source.x:R.target.x,F=O?R.source.y:R.target.y,B=O?R.target.x:R.source.x,H=O?R.target.y:R.source.y,L=B-D,N=H-F,U=Math.sqrt(L*L+N*N),$=O?0:1,Z=f[R.source.id+":"+R.target.id];return Z>1&&(U=U/(1+1/Z*(R.linkIndex-1))),`M${D} ${F} A ${U}, ${U} 0, 0, ${$} ${B}, ${H}`}function S(O){wt[O?"unshift":"push"](()=>{i=O,t(2,i)})}function E(){o=this.clientWidth,s=this.clientHeight,t(0,o),t(1,s)}return n.$$set=O=>{"graph"in O&&t(8,r=O.graph)},n.$$.update=()=>{n.$$.dirty&3&&d.force("center",E3(o/2,s/2)).restart()},[o,s,i,a,l,u,c,w,r,S,E]}class cm extends rt{constructor(e){super(),nt(this,e,QQ,JQ,on,{graph:8})}}const ny=$i({text:jQ}),h0=$i(sd.mask),d0=$i(0),p0=$i(0),ad=$i({text:BQ}),ry=$i([]);let Wo;function I3(){try{Wo=ad.subscribe(n=>{ry.set(JSON.parse(n.text))}),Wo()}catch(n){console.error(n.message),Wo()}}I3();const iy=$i(new Za);function oy(){try{Wo=ny.subscribe(n=>{console.time("setPropertyDataGraph"),iy.set(Za.fromJSON(n.text)),console.timeEnd("setPropertyDataGraph")}),Wo()}catch(n){console.error(n.message),Wo()}}oy();const A3=Zu(iy,n=>VQ(n)),sy=Zu([A3,ry,h0,d0,p0],([n,e,t,r,i])=>HQ(n,e,t,r,i)),ZQ=Zu(sy,n=>ty(n)),ay=Zu(sy,n=>new UQ().calculateSchema(n)),R3=$i(new Za);Wo=ay.subscribe(n=>{const e=ty(n),t=[...e.nodes.values(),...e.edges.values()];t.forEach(i=>i.setPrintOptions());const r=[...e.edges.values()].flatMap(i=>[{source:i.isDirected?e.nodes.get(i.sourceNode):i,target:i.isDirected?i:e.nodes.get(i.sourceNode),directional:i.isDirected},{source:i,target:e.nodes.get(i.targetNode),directional:i.isDirected}]);Xv().nodes(t).force("link",Zv(r).distance(250)).force("charge",$v().strength(-1200)).force("center",E3(700,500)).tick(600).stop(),t.forEach(i=>{i.fx=i.x,i.fy=i.y}),R3.set(e)});Wo();function FS(n,e){return JSON.stringify(n.labels)===JSON.stringify(e.labels)&&n.properties.size===e.properties.size&&Array.from(n.properties.keys()).every(t=>n.properties.get(t)==e.properties.get(t))}const x3=Zu([ay,R3],([n,e])=>{const t=ty(n);return t.nodes.forEach((r,i)=>{if(r.labels.length>0||r.properties.size>0){const o=[...e.nodes.values()].find(s=>FS(r,s)&&[...t.edges.values()].filter(a=>a.sourceNode===r.id||a.targetNode===r.id).forEach(a=>{[...e.edges.values()].some(l=>FS(a,l))}));o&&t.nodes.set(i,o)}}),t.edges.forEach((r,i)=>{if(r.labels.length>0||r.properties.size>0){const o=[...e.edges.values()].find(s=>JSON.stringify(s.labels)===JSON.stringify(r.labels)&&s.properties.size===r.properties.size&&Array.from(s.properties.keys()).every(a=>s.properties.get(a)==r.properties.get(a))&&e.nodes.get(s.origSourceNode)===t.nodes.get(r.sourceNode)&&e.nodes.get(s.origTargetNode)===t.nodes.get(r.targetNode));o&&(o.sourceNode=r.sourceNode,o.targetNode=r.targetNode,t.edges.set(i,o))}}),t}),m0=[{name:"SimpleData",component:cm,graph:A3},{name:"SimpleInduced",component:cm,graph:sy},{name:"SimpleSchema",component:cm,graph:ay},{name:"PropertyData",component:um,graph:iy},{name:"PropertyInduced",component:um,graph:ZQ},{name:"PropertySchema",component:um,graph:x3}],US=$i(m0[5]);function XQ(n){const e=[],t=[],r=[];function i(s,a,l){if(!Array.isArray(s)){e.push({path:[l,a,"labels"],message:"must be array",severity:en.error});return}s.forEach((u,c)=>{typeof u!="string"&&e.push({path:[l,a,"labels",c],message:"must be string",severity:en.error})})}function o(s,a,l){if(typeof s!="object"){e.push({path:[l,a,"properties"],message:"must be object",severity:en.error});return}Object.entries(s).forEach(u=>{typeof u[0]!="string"&&e.push({path:[l,a,"properties",u[0]],message:"key must be string",severity:en.error}),u[1].constructor===String||u[1].constructor===Number||u[1].constructor===Boolean||u[1].constructor===Array||e.push({path:[l,a,"properties",u[0]],message:"must be string, number, boolean, array",severity:en.error})})}return"nodes"in n?Array.isArray(n.nodes)?n.nodes.forEach((s,a)=>{if(typeof s!="object"){e.push({path:["nodes",a],message:"must be object",severity:en.error});return}"id"in s?typeof s.id!="string"?e.push({path:["nodes",a,"id"],message:"must be string",severity:en.error}):t.includes(s.id)?e.push({path:["nodes",a,"id"],message:"id already exists",severity:en.error}):t.push(s.id):e.push({path:["nodes",a],message:"must have required property 'id'",severity:en.error}),"labels"in s&&i(s.labels,a,"nodes"),"properties"in s&&o(s.properties,a,"nodes")}):e.push({path:["nodes"],message:"must be array",severity:en.error}):e.push({path:[],message:"must have required property 'nodes'",severity:en.error}),"edges"in n?Array.isArray(n.edges)?n.edges.forEach((s,a)=>{if(typeof s!="object"){e.push({path:["edges",a],message:"must be object",severity:en.error});return}"id"in s?typeof s.id!="string"?e.push({path:["edges",a,"id"],message:"must be string",severity:en.error}):r.includes(s.id)?e.push({path:["edges",a,"id"],message:"id already exists",severity:en.error}):r.push(s.id):e.push({path:["edges",a],message:"must have required property 'id'",severity:en.error}),"source"in s?typeof s.source!="string"?e.push({path:["edges",a,"source"],message:"must be string",severity:en.error}):t.includes(s.source)||e.push({path:["edges",a,"source"],message:"must point to a valid node",severity:en.error}):e.push({path:["edges",a],message:"must have required property 'source'",severity:en.error}),"target"in s?typeof s.target!="string"?e.push({path:["edges",a,"target"],message:"must be string",severity:en.error}):t.includes(s.target)||e.push({path:["edges",a,"target"],message:"must point to a valid node",severity:en.error}):e.push({path:["edges",a],message:"must have required property 'target'",severity:en.error}),"labels"in s&&i(s.labels,a,"edges"),"properties"in s&&o(s.properties,a,"edges")}):e.push({path:["edges"],message:"must be array",severity:en.error}):e.push({path:[],message:"must have required property 'nodes'",severity:en.error}),e}const $Q={type:"array",items:{$ref:"workloadElement"}},eZ={workloadElement:{type:"object",additionalProperties:!1,properties:{label:{type:"string"},occurence:{type:"number",minimum:0,maximum:1}},required:["label","occurence"],title:"workloadElement"}},tZ=wK($Q,eZ);function nZ(n,e="schema.json"){const t=new Blob([n],{type:"application/json"}),r=new File([t],e),i=document.createElement("a"),o=URL.createObjectURL(r);i.href=o,i.download=r.name,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o)}var nh={},Zs={exports:{}};(function(n){function e(t){return t&&t.__esModule?t:{default:t}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Zs);var N3={},fm={exports:{}},VS;function Xu(){return VS||(VS=1,function(n){function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(fm)),fm.exports}var hm={exports:{}},qS;function $u(){return qS||(qS=1,function(n){function e(r,i){for(var o=0;o<i.length;o++){var s=i[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,s.key,s)}}function t(r,i,o){return i&&e(r.prototype,i),o&&e(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(hm)),hm.exports}var dm={exports:{}},pm={exports:{}},HS;function rZ(){return HS||(HS=1,function(n){function e(t,r){return n.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,s){return o.__proto__=s,o},n.exports.__esModule=!0,n.exports.default=n.exports,e(t,r)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(pm)),pm.exports}var zS;function iZ(){return zS||(zS=1,function(n){var e=rZ();function t(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&e(r,i)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(dm)),dm.exports}var mm={exports:{}},gm={exports:{}},WS;function oZ(){return WS||(WS=1,function(n){function e(t){return n.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},n.exports.__esModule=!0,n.exports.default=n.exports,e(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(gm)),gm.exports}var vm={exports:{}},KS;function sZ(){return KS||(KS=1,function(n){function e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(vm)),vm.exports}var GS;function aZ(){return GS||(GS=1,function(n){var e=oZ().default,t=sZ();function r(i,o){if(o&&(e(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t(i)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports}(mm)),mm.exports}var ym={exports:{}},JS;function lZ(){return JS||(JS=1,function(n){function e(t){return n.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},n.exports.__esModule=!0,n.exports.default=n.exports,e(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(ym)),ym.exports}var _m={},jr={},YS;function ei(){if(YS)return jr;YS=1;var n=oe&&oe.__extends||function(){var a=function(l,u){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},a(l,u)};return function(l,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");a(l,u);function c(){this.constructor=l}l.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}();Object.defineProperty(jr,"__esModule",{value:!0}),jr.PROTOCOL_ERROR=jr.SESSION_EXPIRED=jr.SERVICE_UNAVAILABLE=jr.Neo4jError=jr.newError=void 0;var e="ServiceUnavailable";jr.SERVICE_UNAVAILABLE=e;var t="SessionExpired";jr.SESSION_EXPIRED=t;var r="ProtocolError";jr.PROTOCOL_ERROR=r;var i="N/A",o=function(a){n(l,a);function l(u,c){var f=a.call(this,u)||this;return f.constructor=l,f.__proto__=l.prototype,f.code=c,f.name="Neo4jError",f}return l}(Error);jr.Neo4jError=o;function s(a,l){return new o(a,l!=null?l:i)}return jr.newError=s,jr}var Or={},QS;function sl(){if(QS)return Or;QS=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.toString=Or.toNumber=Or.inSafeRange=Or.isInt=Or.int=void 0;var n=ei(),e=new Map,t=function(){function h(v,m){this.low=v||0,this.high=m||0}return h.prototype.inSafeRange=function(){return this.greaterThanOrEqual(h.MIN_SAFE_VALUE)&&this.lessThanOrEqual(h.MAX_SAFE_VALUE)},h.prototype.toInt=function(){return this.low},h.prototype.toNumber=function(){return this.high*o+(this.low>>>0)},h.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(o)+BigInt(this.low>>>0);var v=this.negate();return BigInt(-1)*(BigInt(v.high>>>0)*BigInt(o)+BigInt(v.low>>>0))},h.prototype.toNumberOrInfinity=function(){return this.lessThan(h.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(h.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},h.prototype.toString=function(v){if(v=v||10,v<2||v>36)throw RangeError("radix out of range: "+v);if(this.isZero())return"0";var m;if(this.isNegative())if(this.equals(h.MIN_VALUE)){var p=h.fromNumber(v),y=this.div(p);return m=y.multiply(p).subtract(this),y.toString(v)+m.toInt().toString(v)}else return"-"+this.negate().toString(v);var b=h.fromNumber(Math.pow(v,6));m=this;for(var _="";;){var w=m.div(b),S=m.subtract(w.multiply(b)).toInt()>>>0,E=S.toString(v);if(m=w,m.isZero())return E+_;for(;E.length<6;)E="0"+E;_=""+E+_}},h.prototype.getHighBits=function(){return this.high},h.prototype.getLowBits=function(){return this.low},h.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(h.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var v=this.high!==0?this.high:this.low,m=31;m>0&&(v&1<<m)===0;m--);return this.high!==0?m+33:m+1},h.prototype.isZero=function(){return this.high===0&&this.low===0},h.prototype.isNegative=function(){return this.high<0},h.prototype.isPositive=function(){return this.high>=0},h.prototype.isOdd=function(){return(this.low&1)===1},h.prototype.isEven=function(){return(this.low&1)===0},h.prototype.equals=function(v){var m=h.fromValue(v);return this.high===m.high&&this.low===m.low},h.prototype.notEquals=function(v){return!this.equals(v)},h.prototype.lessThan=function(v){return this.compare(v)<0},h.prototype.lessThanOrEqual=function(v){return this.compare(v)<=0},h.prototype.greaterThan=function(v){return this.compare(v)>0},h.prototype.greaterThanOrEqual=function(v){return this.compare(v)>=0},h.prototype.compare=function(v){var m=h.fromValue(v);if(this.equals(m))return 0;var p=this.isNegative(),y=m.isNegative();return p&&!y?-1:!p&&y?1:this.subtract(m).isNegative()?-1:1},h.prototype.negate=function(){return this.equals(h.MIN_VALUE)?h.MIN_VALUE:this.not().add(h.ONE)},h.prototype.add=function(v){var m=h.fromValue(v),p=this.high>>>16,y=this.high&65535,b=this.low>>>16,_=this.low&65535,w=m.high>>>16,S=m.high&65535,E=m.low>>>16,O=m.low&65535,R=0,D=0,F=0,B=0;return B+=_+O,F+=B>>>16,B&=65535,F+=b+E,D+=F>>>16,F&=65535,D+=y+S,R+=D>>>16,D&=65535,R+=p+w,R&=65535,h.fromBits(F<<16|B,R<<16|D)},h.prototype.subtract=function(v){var m=h.fromValue(v);return this.add(m.negate())},h.prototype.multiply=function(v){if(this.isZero())return h.ZERO;var m=h.fromValue(v);if(m.isZero())return h.ZERO;if(this.equals(h.MIN_VALUE))return m.isOdd()?h.MIN_VALUE:h.ZERO;if(m.equals(h.MIN_VALUE))return this.isOdd()?h.MIN_VALUE:h.ZERO;if(this.isNegative())return m.isNegative()?this.negate().multiply(m.negate()):this.negate().multiply(m).negate();if(m.isNegative())return this.multiply(m.negate()).negate();if(this.lessThan(l)&&m.lessThan(l))return h.fromNumber(this.toNumber()*m.toNumber());var p=this.high>>>16,y=this.high&65535,b=this.low>>>16,_=this.low&65535,w=m.high>>>16,S=m.high&65535,E=m.low>>>16,O=m.low&65535,R=0,D=0,F=0,B=0;return B+=_*O,F+=B>>>16,B&=65535,F+=b*O,D+=F>>>16,F&=65535,F+=_*E,D+=F>>>16,F&=65535,D+=y*O,R+=D>>>16,D&=65535,D+=b*E,R+=D>>>16,D&=65535,D+=_*S,R+=D>>>16,D&=65535,R+=p*O+y*E+b*S+_*w,R&=65535,h.fromBits(F<<16|B,R<<16|D)},h.prototype.div=function(v){var m=h.fromValue(v);if(m.isZero())throw(0,n.newError)("division by zero");if(this.isZero())return h.ZERO;var p,y,b;if(this.equals(h.MIN_VALUE)){if(m.equals(h.ONE)||m.equals(h.NEG_ONE))return h.MIN_VALUE;if(m.equals(h.MIN_VALUE))return h.ONE;var _=this.shiftRight(1);return p=_.div(m).shiftLeft(1),p.equals(h.ZERO)?m.isNegative()?h.ONE:h.NEG_ONE:(y=this.subtract(m.multiply(p)),b=p.add(y.div(m)),b)}else if(m.equals(h.MIN_VALUE))return h.ZERO;if(this.isNegative())return m.isNegative()?this.negate().div(m.negate()):this.negate().div(m).negate();if(m.isNegative())return this.div(m.negate()).negate();for(b=h.ZERO,y=this;y.greaterThanOrEqual(m);){p=Math.max(1,Math.floor(y.toNumber()/m.toNumber()));for(var w=Math.ceil(Math.log(p)/Math.LN2),S=w<=48?1:Math.pow(2,w-48),E=h.fromNumber(p),O=E.multiply(m);O.isNegative()||O.greaterThan(y);)p-=S,E=h.fromNumber(p),O=E.multiply(m);E.isZero()&&(E=h.ONE),b=b.add(E),y=y.subtract(O)}return b},h.prototype.modulo=function(v){var m=h.fromValue(v);return this.subtract(this.div(m).multiply(m))},h.prototype.not=function(){return h.fromBits(~this.low,~this.high)},h.prototype.and=function(v){var m=h.fromValue(v);return h.fromBits(this.low&m.low,this.high&m.high)},h.prototype.or=function(v){var m=h.fromValue(v);return h.fromBits(this.low|m.low,this.high|m.high)},h.prototype.xor=function(v){var m=h.fromValue(v);return h.fromBits(this.low^m.low,this.high^m.high)},h.prototype.shiftLeft=function(v){var m=h.toNumber(v);return(m&=63)===0?h.ZERO:m<32?h.fromBits(this.low<<m,this.high<<m|this.low>>>32-m):h.fromBits(0,this.low<<m-32)},h.prototype.shiftRight=function(v){var m=h.toNumber(v);return(m&=63)===0?h.ZERO:v<32?h.fromBits(this.low>>>m|this.high<<32-m,this.high>>m):h.fromBits(this.high>>m-32,this.high>=0?0:-1)},h.isInteger=function(v){return(v&&v.__isInteger__)===!0},h.fromInt=function(v){var m,p;return v=v|0,v>=-128&&v<128&&(p=e.get(v),p)?p:(m=new h(v,v<0?-1:0),v>=-128&&v<128&&e.set(v,m),m)},h.fromBits=function(v,m){return new h(v,m)},h.fromNumber=function(v){return isNaN(v)||!isFinite(v)?h.ZERO:v<=-a?h.MIN_VALUE:v+1>=a?h.MAX_VALUE:v<0?h.fromNumber(-v).negate():new h(v%o|0,v/o|0)},h.fromString=function(v,m){if(v.length===0)throw(0,n.newError)("number format error: empty string");if(v==="NaN"||v==="Infinity"||v==="+Infinity"||v==="-Infinity")return h.ZERO;if(m=m||10,m<2||m>36)throw(0,n.newError)("radix out of range: "+m);var p;if((p=v.indexOf("-"))>0)throw(0,n.newError)('number format error: interior "-" character: '+v);if(p===0)return h.fromString(v.substring(1),m).negate();for(var y=h.fromNumber(Math.pow(m,8)),b=h.ZERO,_=0;_<v.length;_+=8){var w=Math.min(8,v.length-_),S=parseInt(v.substring(_,_+w),m);if(w<8){var E=h.fromNumber(Math.pow(m,w));b=b.multiply(E).add(h.fromNumber(S))}else b=b.multiply(y),b=b.add(h.fromNumber(S))}return b},h.fromValue=function(v){return v instanceof h?v:typeof v=="number"?h.fromNumber(v):typeof v=="string"?h.fromString(v):typeof v=="bigint"?h.fromString(v.toString()):new h(v.low,v.high)},h.toNumber=function(v){switch(typeof v){case"number":return v;case"bigint":return Number(v);default:return h.fromValue(v).toNumber()}},h.toString=function(v,m){return h.fromValue(v).toString(m)},h.inSafeRange=function(v){return h.fromValue(v).inSafeRange()},h.ZERO=h.fromInt(0),h.ONE=h.fromInt(1),h.NEG_ONE=h.fromInt(-1),h.MAX_VALUE=h.fromBits(-1,2147483647),h.MIN_VALUE=h.fromBits(0,-2147483648),h.MIN_SAFE_VALUE=h.fromBits(1,-2097152),h.MAX_SAFE_VALUE=h.fromBits(-1,2097151),h.__isInteger__=!0,h}();Object.defineProperty(t.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var r=1<<16,i=1<<24,o=r*r,s=o*o,a=s/2,l=t.fromInt(i),u=t.fromValue;Or.int=u;var c=t.isInteger;Or.isInt=c;var f=t.inSafeRange;Or.inSafeRange=f;var d=t.toNumber;Or.toNumber=d;var g=t.toString;return Or.toString=g,Or.default=t,Or}var sn={},bm={},an={},wl={},ZS;function ly(){if(ZS)return wl;ZS=1,Object.defineProperty(wl,"__esModule",{value:!0}),wl.stringify=void 0;function n(e){return JSON.stringify(e,function(t,r){return typeof r=="bigint"?r+"n":r})}return wl.stringify=n,wl}var XS;function ci(){if(XS)return an;XS=1,Object.defineProperty(an,"__esModule",{value:!0}),an.createBrokenObject=an.ENCRYPTION_OFF=an.ENCRYPTION_ON=an.validateQueryAndParameters=an.assertValidDate=an.assertNumberOrInteger=an.assertNumber=an.assertString=an.assertObject=an.isString=an.isObject=an.isEmptyObjectOrNull=void 0;var n=sl(),e=ly(),t="ENCRYPTION_ON";an.ENCRYPTION_ON=t;var r="ENCRYPTION_OFF";an.ENCRYPTION_OFF=r;function i(m){if(m===null)return!0;if(!o(m))return!1;for(var p in m)if(Object.prototype.hasOwnProperty.bind(m,p))return!1;return!0}an.isEmptyObjectOrNull=i;function o(m){return typeof m=="object"&&!Array.isArray(m)&&m!==null}an.isObject=o;function s(m,p,y){var b="",_=p||{},w=(y==null?void 0:y.skipAsserts)||!1;return typeof m=="string"?b=m:m instanceof String?b=m.toString():typeof m=="object"&&m.text&&(b=m.text,_=m.parameters||{}),w||(d(b),g(_)),{validatedQuery:b,params:_}}an.validateQueryAndParameters=s;function a(m,p){if(!o(m))throw new TypeError(p+" expected to be an object but was: "+(0,e.stringify)(m));return m}an.assertObject=a;function l(m,p){if(!h(m))throw new TypeError(p+" expected to be string but was: "+(0,e.stringify)(m));return m}an.assertString=l;function u(m,p){if(typeof m!="number")throw new TypeError(p+" expected to be a number but was: "+(0,e.stringify)(m));return m}an.assertNumber=u;function c(m,p){if(typeof m!="number"&&typeof m!="bigint"&&!(0,n.isInt)(m))throw new TypeError(p+" expected to be either a number or an Integer object but was: "+(0,e.stringify)(m));return m}an.assertNumberOrInteger=c;function f(m,p){if(Object.prototype.toString.call(m)!=="[object Date]")throw new TypeError(p+" expected to be a standard JavaScript Date but was: "+(0,e.stringify)(m));if(Number.isNaN(m.getTime()))throw new TypeError(p+" expected to be valid JavaScript Date but its time was NaN: "+(0,e.stringify)(m));return m}an.assertValidDate=f;function d(m){if(l(m,"Cypher query"),m.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}function g(m){if(!o(m)){var p=m.constructor?" "+m.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:"+p+" "+m)}}function h(m){return Object.prototype.toString.call(m)==="[object String]"}an.isString=h;function v(m,p){p===void 0&&(p={});var y=function(){throw m};return new Proxy(p,{get:y,set:y,apply:y,construct:y,defineProperty:y,deleteProperty:y,getOwnPropertyDescriptor:y,getPrototypeOf:y,has:y,isExtensible:y,ownKeys:y,preventExtensions:y,setPrototypeOf:y})}return an.createBrokenObject=v,an}var $S;function M3(){return $S||($S=1,function(n){var e=oe&&oe.__createBinding||(Object.create?function(P,V,W,z){z===void 0&&(z=W),Object.defineProperty(P,z,{enumerable:!0,get:function(){return V[W]}})}:function(P,V,W,z){z===void 0&&(z=W),P[z]=V[W]}),t=oe&&oe.__setModuleDefault||(Object.create?function(P,V){Object.defineProperty(P,"default",{enumerable:!0,value:V})}:function(P,V){P.default=V}),r=oe&&oe.__importStar||function(P){if(P&&P.__esModule)return P;var V={};if(P!=null)for(var W in P)W!=="default"&&Object.prototype.hasOwnProperty.call(P,W)&&e(V,P,W);return t(V,P),V};Object.defineProperty(n,"__esModule",{value:!0}),n.floorMod=n.floorDiv=n.assertValidZoneId=n.assertValidNanosecond=n.assertValidSecond=n.assertValidMinute=n.assertValidHour=n.assertValidDay=n.assertValidMonth=n.assertValidYear=n.timeZoneOffsetInSeconds=n.totalNanoseconds=n.dateToIsoString=n.timeZoneOffsetToIsoString=n.timeToIsoString=n.durationToIsoString=n.dateToEpochDay=n.localDateTimeToEpochSecond=n.localTimeToNanoOfDay=n.normalizeNanosecondsForDuration=n.normalizeSecondsForDuration=n.SECONDS_PER_DAY=n.DAYS_PER_400_YEAR_CYCLE=n.DAYS_0000_TO_1970=n.NANOS_PER_HOUR=n.NANOS_PER_MINUTE=n.NANOS_PER_MILLISECOND=n.NANOS_PER_SECOND=n.SECONDS_PER_HOUR=n.SECONDS_PER_MINUTE=n.MINUTES_PER_HOUR=n.NANOSECOND_OF_SECOND_RANGE=n.SECOND_OF_MINUTE_RANGE=n.MINUTE_OF_HOUR_RANGE=n.HOUR_OF_DAY_RANGE=n.DAY_OF_MONTH_RANGE=n.MONTH_OF_YEAR_RANGE=n.YEAR_RANGE=void 0;var i=r(sl()),o=ei(),s=ci(),a=function(){function P(V,W){this._minNumber=V,this._maxNumber=W,this._minInteger=(0,i.int)(V),this._maxInteger=(0,i.int)(W)}return P.prototype.contains=function(V){if((0,i.isInt)(V)&&V instanceof i.default)return V.greaterThanOrEqual(this._minInteger)&&V.lessThanOrEqual(this._maxInteger);if(typeof V=="bigint"){var W=(0,i.int)(V);return W.greaterThanOrEqual(this._minInteger)&&W.lessThanOrEqual(this._maxInteger)}else return V>=this._minNumber&&V<=this._maxNumber},P.prototype.toString=function(){return"["+this._minNumber+", "+this._maxNumber+"]"},P}();n.YEAR_RANGE=new a(-999999999,999999999),n.MONTH_OF_YEAR_RANGE=new a(1,12),n.DAY_OF_MONTH_RANGE=new a(1,31),n.HOUR_OF_DAY_RANGE=new a(0,23),n.MINUTE_OF_HOUR_RANGE=new a(0,59),n.SECOND_OF_MINUTE_RANGE=new a(0,59),n.NANOSECOND_OF_SECOND_RANGE=new a(0,999999999),n.MINUTES_PER_HOUR=60,n.SECONDS_PER_MINUTE=60,n.SECONDS_PER_HOUR=n.SECONDS_PER_MINUTE*n.MINUTES_PER_HOUR,n.NANOS_PER_SECOND=1e9,n.NANOS_PER_MILLISECOND=1e6,n.NANOS_PER_MINUTE=n.NANOS_PER_SECOND*n.SECONDS_PER_MINUTE,n.NANOS_PER_HOUR=n.NANOS_PER_MINUTE*n.MINUTES_PER_HOUR,n.DAYS_0000_TO_1970=719528,n.DAYS_PER_400_YEAR_CYCLE=146097,n.SECONDS_PER_DAY=86400;function l(P,V){return(0,i.int)(P).add(L(V,n.NANOS_PER_SECOND))}n.normalizeSecondsForDuration=l;function u(P){return N(P,n.NANOS_PER_SECOND)}n.normalizeNanosecondsForDuration=u;function c(P,V,W,z){P=(0,i.int)(P),V=(0,i.int)(V),W=(0,i.int)(W),z=(0,i.int)(z);var I=P.multiply(n.NANOS_PER_HOUR);return I=I.add(V.multiply(n.NANOS_PER_MINUTE)),I=I.add(W.multiply(n.NANOS_PER_SECOND)),I.add(z)}n.localTimeToNanoOfDay=c;function f(P,V,W,z,I,M,J){var q=d(P,V,W),Q=B(z,I,M);return q.multiply(n.SECONDS_PER_DAY).add(Q)}n.localDateTimeToEpochSecond=f;function d(P,V,W){P=(0,i.int)(P),V=(0,i.int)(V),W=(0,i.int)(W);var z=P.multiply(365);return P.greaterThanOrEqual(0)?z=z.add(P.add(3).div(4).subtract(P.add(99).div(100)).add(P.add(399).div(400))):z=z.subtract(P.div(-4).subtract(P.div(-100)).add(P.div(-400))),z=z.add(V.multiply(367).subtract(362).div(12)),z=z.add(W.subtract(1)),V.greaterThan(2)&&(z=z.subtract(1),H(P)||(z=z.subtract(1))),z.subtract(n.DAYS_0000_TO_1970)}n.dateToEpochDay=d;function g(P,V,W,z){var I=Z(P),M=Z(V),J=U(W,z);return"P"+I+"M"+M+"DT"+J+"S"}n.durationToIsoString=g;function h(P,V,W,z){var I=Z(P,2),M=Z(V,2),J=Z(W,2),q=$(z);return I+":"+M+":"+J+q}n.timeToIsoString=h;function v(P){if(P=(0,i.int)(P),P.equals(0))return"Z";var V=P.isNegative();V&&(P=P.multiply(-1));var W=V?"-":"+",z=Z(P.div(n.SECONDS_PER_HOUR),2),I=Z(P.div(n.SECONDS_PER_MINUTE).modulo(n.MINUTES_PER_HOUR),2),M=P.modulo(n.SECONDS_PER_MINUTE),J=M.equals(0)?null:Z(M,2);return J?""+W+z+":"+I+":"+J:""+W+z+":"+I}n.timeZoneOffsetToIsoString=v;function m(P,V,W){P=(0,i.int)(P);var z=P.isNegative();z&&(P=P.multiply(-1));var I=Z(P,4);z&&(I="-"+I);var M=Z(V,2),J=Z(W,2);return I+"-"+M+"-"+J}n.dateToIsoString=m;function p(P,V){V=V||0;var W=P.getMilliseconds()*n.NANOS_PER_MILLISECOND;return A(V,W)}n.totalNanoseconds=p;function y(P){var V=P.getTimezoneOffset();return V===0?0:-1*V*n.SECONDS_PER_MINUTE}n.timeZoneOffsetInSeconds=y;function b(P){return F(P,n.YEAR_RANGE,"Year")}n.assertValidYear=b;function _(P){return F(P,n.MONTH_OF_YEAR_RANGE,"Month")}n.assertValidMonth=_;function w(P){return F(P,n.DAY_OF_MONTH_RANGE,"Day")}n.assertValidDay=w;function S(P){return F(P,n.HOUR_OF_DAY_RANGE,"Hour")}n.assertValidHour=S;function E(P){return F(P,n.MINUTE_OF_HOUR_RANGE,"Minute")}n.assertValidMinute=E;function O(P){return F(P,n.SECOND_OF_MINUTE_RANGE,"Second")}n.assertValidSecond=O;function R(P){return F(P,n.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")}n.assertValidNanosecond=R;function D(P,V){try{Intl.DateTimeFormat(void 0,{timeZone:V})}catch{throw(0,o.newError)(P+' is expected to be a valid ZoneId but was: "'+V+'"')}}n.assertValidZoneId=D;function F(P,V,W){if((0,s.assertNumberOrInteger)(P,W),!V.contains(P))throw(0,o.newError)(W+" is expected to be in range "+V+" but was: "+P);return P}function B(P,V,W){P=(0,i.int)(P),V=(0,i.int)(V),W=(0,i.int)(W);var z=P.multiply(n.SECONDS_PER_HOUR);return z=z.add(V.multiply(n.SECONDS_PER_MINUTE)),z.add(W)}function H(P){return P=(0,i.int)(P),P.modulo(4).equals(0)?P.modulo(100).equals(0)?!!P.modulo(400).equals(0):!0:!1}function L(P,V){P=(0,i.int)(P),V=(0,i.int)(V);var W=P.div(V);return P.isPositive()!==V.isPositive()&&W.multiply(V).notEquals(P)&&(W=W.subtract(1)),W}n.floorDiv=L;function N(P,V){return P=(0,i.int)(P),V=(0,i.int)(V),P.subtract(L(P,V).multiply(V))}n.floorMod=N;function U(P,V){P=(0,i.int)(P),V=(0,i.int)(V);var W,z,I=P.isNegative(),M=V.greaterThan(0);return I&&M?P.equals(-1)?W="-0":W=P.add(1).toString():W=P.toString(),M&&(I?z=$(V.negate().add(2*n.NANOS_PER_SECOND).modulo(n.NANOS_PER_SECOND)):z=$(V.add(n.NANOS_PER_SECOND).modulo(n.NANOS_PER_SECOND))),z?W+z:W}function $(P){return P=(0,i.int)(P),P.equals(0)?"":"."+Z(P,9)}function Z(P,V){P=(0,i.int)(P);var W=P.isNegative();W&&(P=P.negate());var z=P.toString();if(V)for(;z.length<V;)z="0"+z;return W?"-"+z:z}function A(P,V){return P instanceof i.default?P.add(V):typeof P=="bigint"?P+BigInt(V):P+V}}(bm)),bm}var eE;function uZ(){if(eE)return sn;eE=1;var n=oe&&oe.__createBinding||(Object.create?function(N,U,$,Z){Z===void 0&&(Z=$),Object.defineProperty(N,Z,{enumerable:!0,get:function(){return U[$]}})}:function(N,U,$,Z){Z===void 0&&(Z=$),N[Z]=U[$]}),e=oe&&oe.__setModuleDefault||(Object.create?function(N,U){Object.defineProperty(N,"default",{enumerable:!0,value:U})}:function(N,U){N.default=U}),t=oe&&oe.__importStar||function(N){if(N&&N.__esModule)return N;var U={};if(N!=null)for(var $ in N)$!=="default"&&Object.prototype.hasOwnProperty.call(N,$)&&n(U,N,$);return e(U,N),U},r=oe&&oe.__read||function(N,U){var $=typeof Symbol=="function"&&N[Symbol.iterator];if(!$)return N;var Z=$.call(N),A,P=[],V;try{for(;(U===void 0||U-- >0)&&!(A=Z.next()).done;)P.push(A.value)}catch(W){V={error:W}}finally{try{A&&!A.done&&($=Z.return)&&$.call(Z)}finally{if(V)throw V.error}}return P};Object.defineProperty(sn,"__esModule",{value:!0}),sn.isDateTime=sn.DateTime=sn.isLocalDateTime=sn.LocalDateTime=sn.isDate=sn.Date=sn.isTime=sn.Time=sn.isLocalTime=sn.LocalTime=sn.isDuration=sn.Duration=void 0;var i=t(M3()),o=ci(),s=ei(),a=t(sl()),l={value:!0,enumerable:!1,configurable:!1,writable:!1},u="__isDuration__",c="__isLocalTime__",f="__isTime__",d="__isDate__",g="__isLocalDateTime__",h="__isDateTime__",v=function(){function N(U,$,Z,A){this.months=(0,o.assertNumberOrInteger)(U,"Months"),this.days=(0,o.assertNumberOrInteger)($,"Days"),(0,o.assertNumberOrInteger)(Z,"Seconds"),(0,o.assertNumberOrInteger)(A,"Nanoseconds"),this.seconds=i.normalizeSecondsForDuration(Z,A),this.nanoseconds=i.normalizeNanosecondsForDuration(A),Object.freeze(this)}return N.prototype.toString=function(){return i.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},N}();sn.Duration=v,Object.defineProperty(v.prototype,u,l);function m(N){return F(N,u)}sn.isDuration=m;var p=function(){function N(U,$,Z,A){this.hour=i.assertValidHour(U),this.minute=i.assertValidMinute($),this.second=i.assertValidSecond(Z),this.nanosecond=i.assertValidNanosecond(A),Object.freeze(this)}return N.fromStandardDate=function(U,$){L(U,$);var Z=i.totalNanoseconds(U,$);return new N(U.getHours(),U.getMinutes(),U.getSeconds(),Z instanceof a.default?Z.toInt():typeof Z=="bigint"?(0,a.int)(Z).toInt():Z)},N.prototype.toString=function(){return i.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},N}();sn.LocalTime=p,Object.defineProperty(p.prototype,c,l);function y(N){return F(N,c)}sn.isLocalTime=y;var b=function(){function N(U,$,Z,A,P){this.hour=i.assertValidHour(U),this.minute=i.assertValidMinute($),this.second=i.assertValidSecond(Z),this.nanosecond=i.assertValidNanosecond(A),this.timeZoneOffsetSeconds=(0,o.assertNumberOrInteger)(P,"Time zone offset in seconds"),Object.freeze(this)}return N.fromStandardDate=function(U,$){return L(U,$),new N(U.getHours(),U.getMinutes(),U.getSeconds(),(0,a.toNumber)(i.totalNanoseconds(U,$)),i.timeZoneOffsetInSeconds(U))},N.prototype.toString=function(){return i.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+i.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},N}();sn.Time=b,Object.defineProperty(b.prototype,f,l);function _(N){return F(N,f)}sn.isTime=_;var w=function(){function N(U,$,Z){this.year=i.assertValidYear(U),this.month=i.assertValidMonth($),this.day=i.assertValidDay(Z),Object.freeze(this)}return N.fromStandardDate=function(U){return L(U),new N(U.getFullYear(),U.getMonth()+1,U.getDate())},N.prototype.toString=function(){return i.dateToIsoString(this.year,this.month,this.day)},N}();sn.Date=w,Object.defineProperty(w.prototype,d,l);function S(N){return F(N,d)}sn.isDate=S;var E=function(){function N(U,$,Z,A,P,V,W){this.year=i.assertValidYear(U),this.month=i.assertValidMonth($),this.day=i.assertValidDay(Z),this.hour=i.assertValidHour(A),this.minute=i.assertValidMinute(P),this.second=i.assertValidSecond(V),this.nanosecond=i.assertValidNanosecond(W),Object.freeze(this)}return N.fromStandardDate=function(U,$){return L(U,$),new N(U.getFullYear(),U.getMonth()+1,U.getDate(),U.getHours(),U.getMinutes(),U.getSeconds(),(0,a.toNumber)(i.totalNanoseconds(U,$)))},N.prototype.toString=function(){return B(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},N}();sn.LocalDateTime=E,Object.defineProperty(E.prototype,g,l);function O(N){return F(N,g)}sn.isLocalDateTime=O;var R=function(){function N(U,$,Z,A,P,V,W,z,I){this.year=i.assertValidYear(U),this.month=i.assertValidMonth($),this.day=i.assertValidDay(Z),this.hour=i.assertValidHour(A),this.minute=i.assertValidMinute(P),this.second=i.assertValidSecond(V),this.nanosecond=i.assertValidNanosecond(W);var M=r(H(z,I),2),J=M[0],q=M[1];this.timeZoneOffsetSeconds=J,this.timeZoneId=q||void 0,Object.freeze(this)}return N.fromStandardDate=function(U,$){return L(U,$),new N(U.getFullYear(),U.getMonth()+1,U.getDate(),U.getHours(),U.getMinutes(),U.getSeconds(),(0,a.toNumber)(i.totalNanoseconds(U,$)),i.timeZoneOffsetInSeconds(U),null)},N.prototype.toString=function(){var U=B(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),$=this.timeZoneId?"["+this.timeZoneId+"]":i.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds||0);return U+$},N}();sn.DateTime=R,Object.defineProperty(R.prototype,h,l);function D(N){return F(N,h)}sn.isDateTime=D;function F(N,U){return(N&&N[U])===!0}function B(N,U,$,Z,A,P,V){return i.dateToIsoString(N,U,$)+"T"+i.timeToIsoString(Z,A,P,V)}function H(N,U){var $=N||N===0,Z=U&&U!=="";if(!$&&!Z)throw(0,s.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: "+N+" and id: "+U);var A=[void 0,void 0];return $&&((0,o.assertNumberOrInteger)(N,"Time zone offset in seconds"),A[0]=N),Z&&((0,o.assertString)(U,"Time zone ID"),i.assertValidZoneId("Time zone ID",U),A[1]=U),A}function L(N,U){(0,o.assertValidDate)(N,"Standard date"),U!=null&&(0,o.assertNumberOrInteger)(U,"Nanosecond")}return sn}var bn={},tE;function cZ(){if(tE)return bn;tE=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.isPathSegment=bn.PathSegment=bn.isPath=bn.Path=bn.isUnboundRelationship=bn.UnboundRelationship=bn.isRelationship=bn.Relationship=bn.isNode=bn.Node=void 0;var n=ly(),e={value:!0,enumerable:!1,configurable:!1,writable:!1},t="__isNode__",r="__isRelationship__",i="__isUnboundRelationship__",o="__isPath__",s="__isPathSegment__";function a(y,b){return(y&&y[b])===!0}var l=function(){function y(b,_,w){this.identity=b,this.labels=_,this.properties=w}return y.prototype.toString=function(){for(var b="("+this.identity,_=0;_<this.labels.length;_++)b+=":"+this.labels[_];var w=Object.keys(this.properties);if(w.length>0){b+=" {";for(var _=0;_<w.length;_++)_>0&&(b+=","),b+=w[_]+":"+(0,n.stringify)(this.properties[w[_]]);b+="}"}return b+=")",b},y}();bn.Node=l,Object.defineProperty(l.prototype,t,e);function u(y){return a(y,t)}bn.isNode=u;var c=function(){function y(b,_,w,S,E){this.identity=b,this.start=_,this.end=w,this.type=S,this.properties=E}return y.prototype.toString=function(){var b="("+this.start+")-[:"+this.type,_=Object.keys(this.properties);if(_.length>0){b+=" {";for(var w=0;w<_.length;w++)w>0&&(b+=","),b+=_[w]+":"+(0,n.stringify)(this.properties[_[w]]);b+="}"}return b+="]->("+this.end+")",b},y}();bn.Relationship=c,Object.defineProperty(c.prototype,r,e);function f(y){return a(y,r)}bn.isRelationship=f;var d=function(){function y(b,_,w){this.identity=b,this.type=_,this.properties=w}return y.prototype.bind=function(b,_){return new c(this.identity,b,_,this.type,this.properties)},y.prototype.toString=function(){var b="-[:"+this.type,_=Object.keys(this.properties);if(_.length>0){b+=" {";for(var w=0;w<_.length;w++)w>0&&(b+=","),b+=_[w]+":"+(0,n.stringify)(this.properties[_[w]]);b+="}"}return b+="]->",b},y}();bn.UnboundRelationship=d,Object.defineProperty(d.prototype,i,e);function g(y){return a(y,i)}bn.isUnboundRelationship=g;var h=function(){function y(b,_,w){this.start=b,this.relationship=_,this.end=w}return y}();bn.PathSegment=h,Object.defineProperty(h.prototype,s,e);function v(y){return a(y,s)}bn.isPathSegment=v;var m=function(){function y(b,_,w){this.start=b,this.end=_,this.segments=w,this.length=w.length}return y}();bn.Path=m,Object.defineProperty(m.prototype,o,e);function p(y){return a(y,o)}return bn.isPath=p,bn}var Gc={},nE;function fZ(){if(nE)return Gc;nE=1;var n=oe&&oe.__generator||function(s,a){var l={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},u,c,f,d;return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(v){return function(m){return h([v,m])}}function h(v){if(u)throw new TypeError("Generator is already executing.");for(;l;)try{if(u=1,c&&(f=v[0]&2?c.return:v[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,v[1])).done)return f;switch(c=0,f&&(v=[v[0]&2,f.value]),v[0]){case 0:case 1:f=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,c=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(f=l.trys,!(f=f.length>0&&f[f.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!f||v[1]>f[0]&&v[1]<f[3])){l.label=v[1];break}if(v[0]===6&&l.label<f[1]){l.label=f[1],f=v;break}if(f&&l.label<f[2]){l.label=f[2],l.ops.push(v);break}f[2]&&l.ops.pop(),l.trys.pop();continue}v=a.call(s,l)}catch(m){v=[6,m],c=0}finally{u=f=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},e=oe&&oe.__values||function(s){var a=typeof Symbol=="function"&&Symbol.iterator,l=a&&s[a],u=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&u>=s.length&&(s=void 0),{value:s&&s[u++],done:!s}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")},t=oe&&oe.__read||function(s,a){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var u=l.call(s),c,f=[],d;try{for(;(a===void 0||a-- >0)&&!(c=u.next()).done;)f.push(c.value)}catch(g){d={error:g}}finally{try{c&&!c.done&&(l=u.return)&&l.call(u)}finally{if(d)throw d.error}}return f};Object.defineProperty(Gc,"__esModule",{value:!0});var r=ei();function i(s){var a={};return s.forEach(function(l,u){a[l]=u}),a}var o=function(){function s(a,l,u){this.keys=a,this.length=a.length,this._fields=l,this._fieldLookup=u||i(a)}return s.prototype.forEach=function(a){var l,u;try{for(var c=e(this.entries()),f=c.next();!f.done;f=c.next()){var d=t(f.value,2),g=d[0],h=d[1];a(h,g,this)}}catch(v){l={error:v}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(l)throw l.error}}},s.prototype.map=function(a){var l,u,c=[];try{for(var f=e(this.entries()),d=f.next();!d.done;d=f.next()){var g=t(d.value,2),h=g[0],v=g[1];c.push(a(v,h,this))}}catch(m){l={error:m}}finally{try{d&&!d.done&&(u=f.return)&&u.call(f)}finally{if(l)throw l.error}}return c},s.prototype.entries=function(){var a;return n(this,function(l){switch(l.label){case 0:a=0,l.label=1;case 1:return a<this.keys.length?[4,[this.keys[a],this._fields[a]]]:[3,4];case 2:l.sent(),l.label=3;case 3:return a++,[3,1];case 4:return[2]}})},s.prototype.values=function(){var a;return n(this,function(l){switch(l.label){case 0:a=0,l.label=1;case 1:return a<this.keys.length?[4,this._fields[a]]:[3,4];case 2:l.sent(),l.label=3;case 3:return a++,[3,1];case 4:return[2]}})},s.prototype[Symbol.iterator]=function(){var a;return n(this,function(l){switch(l.label){case 0:a=0,l.label=1;case 1:return a<this.keys.length?[4,this._fields[a]]:[3,4];case 2:l.sent(),l.label=3;case 3:return a++,[3,1];case 4:return[2]}})},s.prototype.toObject=function(){var a,l,u={};try{for(var c=e(this.entries()),f=c.next();!f.done;f=c.next()){var d=t(f.value,2),g=d[0],h=d[1];u[g]=h}}catch(v){a={error:v}}finally{try{f&&!f.done&&(l=c.return)&&l.call(c)}finally{if(a)throw a.error}}return u},s.prototype.get=function(a){var l;if(typeof a!="number"){if(l=this._fieldLookup[a],l===void 0)throw(0,r.newError)("This record has no field with key '"+a+"', available key are: ["+this.keys+"].")}else l=a;if(l>this._fields.length-1||l<0)throw(0,r.newError)("This record has no field with index '"+l+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[l]},s.prototype.has=function(a){return typeof a=="number"?a>=0&&a<this._fields.length:this._fieldLookup[a]!==void 0},s}();return Gc.default=o,Gc}var us={},rE;function hZ(){if(rE)return us;rE=1,Object.defineProperty(us,"__esModule",{value:!0}),us.isPoint=us.Point=void 0;var n=ci(),e="__isPoint__",t=function(){function o(s,a,l,u){this.srid=(0,n.assertNumberOrInteger)(s,"SRID"),this.x=(0,n.assertNumber)(a,"X coordinate"),this.y=(0,n.assertNumber)(l,"Y coordinate"),this.z=u==null?u:(0,n.assertNumber)(u,"Z coordinate"),Object.freeze(this)}return o.prototype.toString=function(){return this.z||this.z===0?"Point{srid="+r(this.srid)+", x="+r(this.x)+", y="+r(this.y)+", z="+r(this.z)+"}":"Point{srid="+r(this.srid)+", x="+r(this.x)+", y="+r(this.y)+"}"},o}();us.Point=t;function r(o){return Number.isInteger(o)?o+".0":o.toString()}Object.defineProperty(t.prototype,e,{value:!0,enumerable:!1,configurable:!1,writable:!1});function i(o){return(o&&o[e])===!0}return us.isPoint=i,us}var Jn={},iE;function D3(){if(iE)return Jn;iE=1;var n=oe&&oe.__createBinding||(Object.create?function(h,v,m,p){p===void 0&&(p=m),Object.defineProperty(h,p,{enumerable:!0,get:function(){return v[m]}})}:function(h,v,m,p){p===void 0&&(p=m),h[p]=v[m]}),e=oe&&oe.__setModuleDefault||(Object.create?function(h,v){Object.defineProperty(h,"default",{enumerable:!0,value:v})}:function(h,v){h.default=v}),t=oe&&oe.__importStar||function(h){if(h&&h.__esModule)return h;var v={};if(h!=null)for(var m in h)m!=="default"&&Object.prototype.hasOwnProperty.call(h,m)&&n(v,h,m);return e(v,h),v};Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.Stats=Jn.QueryStatistics=Jn.ProfiledPlan=Jn.Plan=Jn.Notification=Jn.ServerInfo=Jn.queryType=void 0;var r=t(sl()),i=function(){function h(v,m,p,y){this.query={text:v,parameters:m},this.queryType=p.type,this.counters=new l(p.stats||{}),this.updateStatistics=this.counters,this.plan=p.plan||p.profile?new o(p.plan||p.profile):!1,this.profile=p.profile?new s(p.profile):!1,this.notifications=this._buildNotifications(p.notifications),this.server=new c(p.server,y),this.resultConsumedAfter=p.result_consumed_after,this.resultAvailableAfter=p.result_available_after,this.database={name:p.db||null}}return h.prototype._buildNotifications=function(v){return v?v.map(function(m){return new u(m)}):[]},h.prototype.hasPlan=function(){return this.plan instanceof o},h.prototype.hasProfile=function(){return this.profile instanceof s},h}(),o=function(){function h(v){this.operatorType=v.operatorType,this.identifiers=v.identifiers,this.arguments=v.args,this.children=v.children?v.children.map(function(m){return new h(m)}):[]}return h}();Jn.Plan=o;var s=function(){function h(v){this.operatorType=v.operatorType,this.identifiers=v.identifiers,this.arguments=v.args,this.dbHits=d("dbHits",v),this.rows=d("rows",v),this.pageCacheMisses=d("pageCacheMisses",v),this.pageCacheHits=d("pageCacheHits",v),this.pageCacheHitRatio=d("pageCacheHitRatio",v),this.time=d("time",v),this.children=v.children?v.children.map(function(m){return new h(m)}):[]}return h.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},h}();Jn.ProfiledPlan=s;var a=function(){function h(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0}return h}();Jn.Stats=a;var l=function(){function h(v){var m=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(v).forEach(function(p){var y=p.replace(/(-\w)/g,function(b){return b[1].toUpperCase()});y in m._stats?m._stats[y]=f(v[p]):y==="systemUpdates"?m._systemUpdates=f(v[p]):y==="containsSystemUpdates"?m._containsSystemUpdates=v[p]:y==="containsUpdates"&&(m._containsUpdates=v[p])}),this._stats=Object.freeze(this._stats)}return h.prototype.containsUpdates=function(){var v=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(m,p){return m+v._stats[p]},0)>0},h.prototype.updates=function(){return this._stats},h.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},h.prototype.systemUpdates=function(){return this._systemUpdates},h}();Jn.QueryStatistics=l;var u=function(){function h(v){this.code=v.code,this.title=v.title,this.description=v.description,this.severity=v.severity,this.position=h._constructPosition(v.position)}return h._constructPosition=function(v){return v?{offset:f(v.offset),line:f(v.line),column:f(v.column)}:{}},h}();Jn.Notification=u;var c=function(){function h(v,m){v&&(this.address=v.address,this.version=v.version,this.agent=v.version),this.protocolVersion=m}return h}();Jn.ServerInfo=c;function f(h){return h instanceof r.default?h.toInt():typeof h=="bigint"?(0,r.int)(h).toInt():h}function d(h,v,m){if(m===void 0&&(m=0),h in v){var p=v[h];return f(p)}else return m}var g={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};return Jn.queryType=g,Jn.default=i,Jn}var Jc={},Jt={},cs={},oE;function uy(){if(oE)return cs;oE=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.FailedObserver=cs.CompletedObserver=void 0;var n=function(){function r(){}return r.prototype.subscribe=function(i){t(i,i.onKeys,[]),t(i,i.onCompleted,{})},r.prototype.cancel=function(){},r.prototype.prepareToHandleSingleResponse=function(){},r.prototype.markCompleted=function(){},r.prototype.onError=function(i){throw Error("CompletedObserver not supposed to call onError")},r}();cs.CompletedObserver=n;var e=function(){function r(i){var o=i.error,s=i.onError;this._error=o,this._beforeError=s,this._observers=[],this.onError(o)}return r.prototype.subscribe=function(i){t(i,i.onError,this._error),this._observers.push(i)},r.prototype.onError=function(i){var o=this;Promise.resolve(t(this,this._beforeError,i)).then(function(){return o._observers.forEach(function(s){return t(s,s.onError,i)})})},r.prototype.cancel=function(){},r.prototype.prepareToHandleSingleResponse=function(){},r.prototype.markCompleted=function(){},r}();cs.FailedObserver=e;function t(r,i,o){i&&i.bind(r)(o)}return cs}var Sl={},sE;function ec(){if(sE)return Sl;sE=1;var n=oe&&oe.__createBinding||(Object.create?function(u,c,f,d){d===void 0&&(d=f),Object.defineProperty(u,d,{enumerable:!0,get:function(){return c[f]}})}:function(u,c,f,d){d===void 0&&(d=f),u[d]=c[f]}),e=oe&&oe.__setModuleDefault||(Object.create?function(u,c){Object.defineProperty(u,"default",{enumerable:!0,value:c})}:function(u,c){u.default=c}),t=oe&&oe.__importStar||function(u){if(u&&u.__esModule)return u;var c={};if(u!=null)for(var f in u)f!=="default"&&Object.prototype.hasOwnProperty.call(u,f)&&n(c,u,f);return e(c,u),c};Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.Bookmark=void 0;var r=t(ci()),i="bookmarks",o=function(){function u(c){this._values=a(c)}return u.empty=function(){return s},u.prototype.isEmpty=function(){return this._values.length===0},u.prototype.values=function(){return this._values},u.prototype.asBeginTransactionParameters=function(){var c;return this.isEmpty()?{}:(c={},c[i]=this._values,c)},u}();Sl.Bookmark=o;var s=new o(null);function a(u){if(!u)return[];if(r.isString(u))return[u];if(Array.isArray(u)){for(var c=[],f=l(u),d=0;d<f.length;d++){var g=f[d];if(g!=null){if(!r.isString(g))throw new TypeError("Bookmark value should be a string, given: '"+g+"'");c.push(g)}}return c}throw new TypeError("Bookmark should either be a string or a string array, given: '"+u+"'")}function l(u){return u.reduce(function(c,f){return Array.isArray(f)?c.concat(l(f)):c.concat(f)},[])}return Sl}var $t={},aE;function tc(){if(aE)return $t;aE=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.BOLT_PROTOCOL_V4_4=$t.BOLT_PROTOCOL_V4_3=$t.BOLT_PROTOCOL_V4_2=$t.BOLT_PROTOCOL_V4_1=$t.BOLT_PROTOCOL_V4_0=$t.BOLT_PROTOCOL_V3=$t.BOLT_PROTOCOL_V2=$t.BOLT_PROTOCOL_V1=$t.DEFAULT_POOL_MAX_SIZE=$t.DEFAULT_POOL_ACQUISITION_TIMEOUT=$t.ACCESS_MODE_WRITE=$t.ACCESS_MODE_READ=$t.FETCH_ALL=void 0;var n=-1;$t.FETCH_ALL=n;var e=60*1e3;$t.DEFAULT_POOL_ACQUISITION_TIMEOUT=e;var t=100;$t.DEFAULT_POOL_MAX_SIZE=t;var r="READ";$t.ACCESS_MODE_READ=r;var i="WRITE";$t.ACCESS_MODE_WRITE=i;var o=1;$t.BOLT_PROTOCOL_V1=o;var s=2;$t.BOLT_PROTOCOL_V2=s;var a=3;$t.BOLT_PROTOCOL_V3=a;var l=4;$t.BOLT_PROTOCOL_V4_0=l;var u=4.1;$t.BOLT_PROTOCOL_V4_1=u;var c=4.2;$t.BOLT_PROTOCOL_V4_2=c;var f=4.3;$t.BOLT_PROTOCOL_V4_3=f;var d=4.4;return $t.BOLT_PROTOCOL_V4_4=d,$t}var Ni={},lE;function ip(){if(lE)return Ni;lE=1;var n=oe&&oe.__extends||function(){var c=function(f,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,h){g.__proto__=h}||function(g,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(g[v]=h[v])},c(f,d)};return function(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");c(f,d);function g(){this.constructor=f}f.prototype=d===null?Object.create(d):(g.prototype=d.prototype,new g)}}();Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.EMPTY_CONNECTION_HOLDER=Ni.ReadOnlyConnectionHolder=Ni.ConnectionHolder=void 0;var e=ei(),t=ci(),r=tc(),i=ec(),o=function(){function c(f){var d=f===void 0?{}:f,g=d.mode,h=g===void 0?r.ACCESS_MODE_WRITE:g,v=d.database,m=v===void 0?"":v,p=d.bookmark,y=d.connectionProvider,b=d.impersonatedUser,_=d.onDatabaseNameResolved;this._mode=h,this._database=m?(0,t.assertString)(m,"database"):"",this._bookmark=p||i.Bookmark.empty(),this._connectionProvider=y,this._impersonatedUser=b,this._referenceCount=0,this._connectionPromise=Promise.resolve(),this._onDatabaseNameResolved=_}return c.prototype.mode=function(){return this._mode},c.prototype.database=function(){return this._database},c.prototype.setDatabase=function(f){this._database=f},c.prototype.bookmark=function(){return this._bookmark},c.prototype.connectionProvider=function(){return this._connectionProvider},c.prototype.referenceCount=function(){return this._referenceCount},c.prototype.initializeConnection=function(){if(this._referenceCount===0&&this._connectionProvider)this._connectionPromise=this._connectionProvider.acquireConnection({accessMode:this._mode,database:this._database,bookmarks:this._bookmark,impersonatedUser:this._impersonatedUser,onDatabaseNameResolved:this._onDatabaseNameResolved});else return this._referenceCount++,!1;return this._referenceCount++,!0},c.prototype.getConnection=function(){return this._connectionPromise},c.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},c.prototype.close=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection())},c.prototype._releaseConnection=function(){return this._connectionPromise=this._connectionPromise.then(function(f){return f?f.isOpen()?f.resetAndFlush().catch(u).then(function(){return f._release()}):f._release():Promise.resolve()}).catch(u),this._connectionPromise},c}();Ni.ConnectionHolder=o;var s=function(c){n(f,c);function f(d){var g=c.call(this,{mode:d.mode(),database:d.database(),bookmark:d.bookmark(),connectionProvider:d.connectionProvider()})||this;return g._connectionHolder=d,g}return f.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},f.prototype.getConnection=function(){return this._connectionHolder.getConnection()},f.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve()})},f.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve()})},f}(o);Ni.ReadOnlyConnectionHolder=s,Ni.default=s;var a=function(c){n(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return f.prototype.mode=function(){},f.prototype.database=function(){},f.prototype.initializeConnection=function(){return!0},f.prototype.getConnection=function(){return Promise.reject((0,e.newError)("This connection holder does not serve connections"))},f.prototype.releaseConnection=function(){return Promise.resolve()},f.prototype.close=function(){return Promise.resolve()},f}(o),l=new a;Ni.EMPTY_CONNECTION_HOLDER=l;function u(c){}return Ni}var El={},uE;function cy(){if(uE)return El;uE=1;var n=oe&&oe.__createBinding||(Object.create?function(f,d,g,h){h===void 0&&(h=g),Object.defineProperty(f,h,{enumerable:!0,get:function(){return d[g]}})}:function(f,d,g,h){h===void 0&&(h=g),f[h]=d[g]}),e=oe&&oe.__setModuleDefault||(Object.create?function(f,d){Object.defineProperty(f,"default",{enumerable:!0,value:d})}:function(f,d){f.default=d}),t=oe&&oe.__importStar||function(f){if(f&&f.__esModule)return f;var d={};if(f!=null)for(var g in f)g!=="default"&&Object.prototype.hasOwnProperty.call(f,g)&&n(d,f,g);return e(d,f),d};Object.defineProperty(El,"__esModule",{value:!0}),El.TxConfig=void 0;var r=t(ci()),i=ei(),o=sl(),s=function(){function f(d){c(d),this.timeout=l(d),this.metadata=u(d)}return f.empty=function(){return a},f.prototype.isEmpty=function(){return Object.values(this).every(function(d){return d==null})},f}();El.TxConfig=s;var a=new s({});function l(f){if(r.isObject(f)&&(f.timeout||f.timeout===0)){r.assertNumberOrInteger(f.timeout,"Transaction timeout");var d=(0,o.int)(f.timeout);if(d.isZero())throw(0,i.newError)("Transaction timeout should not be zero");if(d.isNegative())throw(0,i.newError)("Transaction timeout should not be negative");return d}return null}function u(f){if(r.isObject(f)&&f.metadata){var d=f.metadata;if(r.assertObject(d,"config.metadata"),Object.keys(d).length!==0)return d}return null}function c(f){f&&r.assertObject(f,"Transaction config")}return El}var Cl={},kl={},cE;function L3(){if(cE)return kl;cE=1,Object.defineProperty(kl,"__esModule",{value:!0}),kl.canRetryOn=void 0;var n=ei();function e(i){return i&&i instanceof n.Neo4jError&&i.code&&(i.code===n.SERVICE_UNAVAILABLE||i.code===n.SESSION_EXPIRED||r(i)||t(i))}kl.canRetryOn=e;function t(i){var o=i.code;return o.indexOf("TransientError")>=0?!(o==="Neo.TransientError.Transaction.Terminated"||o==="Neo.TransientError.Transaction.LockClientStopped"):!1}function r(i){return i.code==="Neo.ClientError.Security.AuthorizationExpired"}return kl}var fE;function j3(){if(fE)return Cl;fE=1,Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.TransactionExecutor=void 0;var n=ei(),e=L3(),t=30*1e3,r=1e3,i=2,o=.2,s=function(){function l(u,c,f,d){this._maxRetryTimeMs=a(u,t),this._initialRetryDelayMs=a(c,r),this._multiplier=a(f,i),this._jitterFactor=a(d,o),this._inFlightTimeoutIds=[],this._verifyAfterConstruction()}return l.prototype.execute=function(u,c){var f=this;return new Promise(function(d,g){f._executeTransactionInsidePromise(u,c,d,g)}).catch(function(d){var g=Date.now(),h=f._initialRetryDelayMs;return f._retryTransactionPromise(u,c,d,g,h)})},l.prototype.close=function(){this._inFlightTimeoutIds.forEach(function(u){return clearTimeout(u)}),this._inFlightTimeoutIds=[]},l.prototype._retryTransactionPromise=function(u,c,f,d,g){var h=this,v=Date.now()-d;return v>this._maxRetryTimeMs||!(0,e.canRetryOn)(f)?Promise.reject(f):new Promise(function(m,p){var y=h._computeDelayWithJitter(g),b=setTimeout(function(){h._inFlightTimeoutIds=h._inFlightTimeoutIds.filter(function(_){return _!==b}),h._executeTransactionInsidePromise(u,c,m,p)},y);h._inFlightTimeoutIds.push(b)}).catch(function(m){var p=g*h._multiplier;return h._retryTransactionPromise(u,c,m,d,p)})},l.prototype._executeTransactionInsidePromise=function(u,c,f,d){var g=this,h;try{h=u()}catch(m){d(m);return}var v=this._safeExecuteTransactionWork(h,c);v.then(function(m){return g._handleTransactionWorkSuccess(m,h,f,d)}).catch(function(m){return g._handleTransactionWorkFailure(m,h,d)})},l.prototype._safeExecuteTransactionWork=function(u,c){try{var f=c(u);return Promise.resolve(f)}catch(d){return Promise.reject(d)}},l.prototype._handleTransactionWorkSuccess=function(u,c,f,d){c.isOpen()?c.commit().then(function(){f(u)}).catch(function(g){d(g)}):f(u)},l.prototype._handleTransactionWorkFailure=function(u,c,f){c.isOpen()?c.rollback().catch(function(d){}).then(function(){return f(u)}):f(u)},l.prototype._computeDelayWithJitter=function(u){var c=u*this._jitterFactor,f=u-c,d=u+c;return Math.random()*(d-f)+f},l.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,n.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs);if(this._initialRetryDelayMs<0)throw(0,n.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs);if(this._multiplier<1)throw(0,n.newError)("Multiplier should be >= 1.0: "+this._multiplier);if(this._jitterFactor<0||this._jitterFactor>1)throw(0,n.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor)},l}();Cl.TransactionExecutor=s;function a(l,u){return l||l===0?l:u}return Cl}var Ol={},hE;function B3(){if(hE)return Ol;hE=1,Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.ConnectivityVerifier=void 0;var n=ip(),e=tc(),t=ei(),r=function(){function o(s){this._connectionProvider=s}return o.prototype.verify=function(s){var a=s===void 0?{}:s,l=a.database,u=l===void 0?"":l;return i(this._connectionProvider,u)},o}();Ol.ConnectivityVerifier=r;function i(o,s){var a=new n.ConnectionHolder({mode:e.ACCESS_MODE_READ,database:s,connectionProvider:o});return a.initializeConnection(),a.getConnection().then(function(l){if(!l)throw(0,t.newError)("Unexpected error acquiring transaction");return a.close().then(function(){return l.server})}).catch(function(l){return a.close().catch(function(u){}).then(function(){return Promise.reject(l)})})}return Ol}var Tl={},dE;function F3(){if(dE)return Tl;dE=1;var n=oe&&oe.__extends||function(){var v=function(m,p){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var _ in b)Object.prototype.hasOwnProperty.call(b,_)&&(y[_]=b[_])},v(m,p)};return function(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");v(m,p);function y(){this.constructor=m}m.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}}(),e;Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.Logger=void 0;var t=ei(),r="error",i="warn",o="info",s="debug",a=o,l=(e={},e[r]=0,e[i]=1,e[o]=2,e[s]=3,e),u=function(){function v(m,p){this._level=m,this._loggerFunction=p}return v.create=function(m){if(m&&m.logging){var p=m.logging,y=g(p),b=h(p);return new v(y,b)}return this.noOp()},v.noOp=function(){return f},v.prototype.isErrorEnabled=function(){return d(this._level,r)},v.prototype.error=function(m){this.isErrorEnabled()&&this._loggerFunction(r,m)},v.prototype.isWarnEnabled=function(){return d(this._level,i)},v.prototype.warn=function(m){this.isWarnEnabled()&&this._loggerFunction(i,m)},v.prototype.isInfoEnabled=function(){return d(this._level,o)},v.prototype.info=function(m){this.isInfoEnabled()&&this._loggerFunction(o,m)},v.prototype.isDebugEnabled=function(){return d(this._level,s)},v.prototype.debug=function(m){this.isDebugEnabled()&&this._loggerFunction(s,m)},v}();Tl.Logger=u;var c=function(v){n(m,v);function m(){return v.call(this,o,function(p,y){})||this}return m.prototype.isErrorEnabled=function(){return!1},m.prototype.error=function(p){},m.prototype.isWarnEnabled=function(){return!1},m.prototype.warn=function(p){},m.prototype.isInfoEnabled=function(){return!1},m.prototype.info=function(p){},m.prototype.isDebugEnabled=function(){return!1},m.prototype.debug=function(p){},m}(u),f=new c;function d(v,m){return l[v]>=l[m]}function g(v){if(v&&v.level){var m=v.level,p=l[m];if(!p&&p!==0)throw(0,t.newError)("Illegal logging level: "+m+". Supported levels are: "+Object.keys(l));return m}return a}function h(v){if(v&&v.logger){var m=v.logger;if(m&&typeof m=="function")return m}throw(0,t.newError)("Illegal logger function: "+v.logger)}return Tl}var Br={},pE;function U3(){if(pE)return Br;pE=1;var n=oe&&oe.__assign||function(){return n=Object.assign||function(S){for(var E,O=1,R=arguments.length;O<R;O++){E=arguments[O];for(var D in E)Object.prototype.hasOwnProperty.call(E,D)&&(S[D]=E[D])}return S},n.apply(this,arguments)},e=oe&&oe.__read||function(S,E){var O=typeof Symbol=="function"&&S[Symbol.iterator];if(!O)return S;var R=O.call(S),D,F=[],B;try{for(;(E===void 0||E-- >0)&&!(D=R.next()).done;)F.push(D.value)}catch(H){B={error:H}}finally{try{D&&!D.done&&(O=R.return)&&O.call(R)}finally{if(B)throw B.error}}return F};Object.defineProperty(Br,"__esModule",{value:!0}),Br.Url=Br.formatIPv6Address=Br.formatIPv4Address=Br.defaultPortForScheme=Br.parseDatabaseUrl=void 0;var t=ci(),r=7687,i=7474,o=7473,s=function(){function S(E,O,R,D,F){this.scheme=E,this.host=O,this.port=R,this.hostAndPort=D,this.query=F}return S}();Br.Url=s;function a(S){(0,t.assertString)(S,"URL");var E=u(S),O=w(E.url),R=E.schemeMissing?null:c(O.scheme),D=f(O.host),F=p(D),B=d(O.port,R),H=F+":"+B,L=g(O.query||l(O.resourceName),S);return new s(R,D,B,H,L)}Br.parseDatabaseUrl=a;function l(S){if(typeof S!="string")return null;var E=e(S.split("?"),2);E[0];var O=E[1];return O}function u(S){return S=S.trim(),S.indexOf("://")===-1?{schemeMissing:!0,url:"none://"+S}:{schemeMissing:!1,url:S}}function c(S){return S?(S=S.trim(),S.charAt(S.length-1)===":"&&(S=S.substring(0,S.length-1)),S):null}function f(S,E){if(!S)throw new Error("Unable to extract host from "+E);return S.trim()}function d(S,E){var O=typeof S=="string"?parseInt(S,10):S;return O===0||O?O:_(E)}function g(S,E){var O=S?h(S):null,R={};return O&&O.split("&").forEach(function(D){var F=D.split("=");if(F.length!==2)throw new Error("Invalid parameters: '"+F+"' in URL '"+E+"'.");var B=v(F[0],"key",E),H=v(F[1],"value",E);if(R[B])throw new Error("Duplicated query parameters with key '"+B+"' in URL '"+E+"'");R[B]=H}),R}function h(S){return S=(S||"").trim(),S&&S.charAt(0)==="?"&&(S=S.substring(1,S.length)),S}function v(S,E,O){if(S=(S||"").trim(),!S)throw new Error("Illegal empty "+E+" in URL query '"+O+"'");return S}function m(S){var E=S.charAt(0)==="[",O=S.charAt(S.length-1)==="]";if(!E&&!O)return"["+S+"]";if(E&&O)return S;throw new Error("Illegal IPv6 address "+S)}function p(S){if(!S)throw new Error("Illegal host "+S);var E=S.indexOf(":")>=0;return E?m(S):S}function y(S,E){return S+":"+E}Br.formatIPv4Address=y;function b(S,E){var O=m(S);return O+":"+E}Br.formatIPv6Address=b;function _(S){return S==="http"?i:S==="https"?o:r}Br.defaultPortForScheme=_;function w(S){function E(H,L){var N=H.indexOf(L);return N>=0?[H.substring(0,N),H[N],H.substring(N+1)]:[H,"",""]}function O(H,L){var N=H.lastIndexOf(L);return N>=0?[H.substring(0,N),H[N],H.substring(N+1)]:["","",H]}function R(H,L,N){var U=E(H,L),$=E(U[2],N);return[$[0],$[2]]}function D(H){var L={},N;N=O(H,"@"),N[1]==="@"&&(L.userInfo=decodeURIComponent(N[0]),H=N[2]);var U=e(R(H,"[","]"),2),$=U[0],Z=U[1];return $!==""?(L.host=$,N=E(Z,":")):(N=E(H,":"),L.host=N[0]),N[1]===":"&&(L.port=N[2]),L}var F={},B;return B=E(S,":"),B[1]===":"&&(F.scheme=decodeURIComponent(B[0]),S=B[2]),B=E(S,"#"),B[1]==="#"&&(F.fragment=decodeURIComponent(B[2]),S=B[0]),B=E(S,"?"),B[1]==="?"&&(F.query=B[2],S=B[0]),S.startsWith("//")?(B=E(S.substr(2),"/"),F=n(n({},F),D(B[0])),F.path=B[1]+B[2]):F.path=S,F}return Br}var Pl={},mE;function V3(){if(mE)return Pl;mE=1;var n=oe&&oe.__createBinding||(Object.create?function(s,a,l,u){u===void 0&&(u=l),Object.defineProperty(s,u,{enumerable:!0,get:function(){return a[l]}})}:function(s,a,l,u){u===void 0&&(u=l),s[u]=a[l]}),e=oe&&oe.__setModuleDefault||(Object.create?function(s,a){Object.defineProperty(s,"default",{enumerable:!0,value:a})}:function(s,a){s.default=a}),t=oe&&oe.__importStar||function(s){if(s&&s.__esModule)return s;var a={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&n(a,s,l);return e(a,s),a};Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.ServerAddress=void 0;var r=ci(),i=t(U3()),o=function(){function s(a,l,u,c){this._host=(0,r.assertString)(a,"host"),this._resolved=l?(0,r.assertString)(l,"resolved"):null,this._port=(0,r.assertNumber)(u,"port"),this._hostPort=c,this._stringValue=l?c+"("+l+")":""+c}return s.prototype.host=function(){return this._host},s.prototype.resolvedHost=function(){return this._resolved?this._resolved:this._host},s.prototype.port=function(){return this._port},s.prototype.resolveWith=function(a){return new s(this._host,a,this._port,this._hostPort)},s.prototype.asHostPort=function(){return this._hostPort},s.prototype.asKey=function(){return this._hostPort},s.prototype.toString=function(){return this._stringValue},s.fromUrl=function(a){var l=i.parseDatabaseUrl(a);return new s(l.host,null,l.port,l.hostAndPort)},s}();return Pl.ServerAddress=o,Pl}var fs={},Yc={},gE;function dZ(){if(gE)return Yc;gE=1,Object.defineProperty(Yc,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.resolve=function(){throw new Error("Abstract function")},e.prototype._resolveToItself=function(t){return Promise.resolve([t])},e}();return Yc.default=n,Yc}var Qc={},vE;function q3(){if(vE)return Qc;vE=1,Object.defineProperty(Qc,"__esModule",{value:!0});var n=V3();function e(r){return Promise.resolve([r])}var t=function(){function r(i){this._resolverFunction=i||e}return r.prototype.resolve=function(i){var o=this;return new Promise(function(s){return s(o._resolverFunction(i.asHostPort()))}).then(function(s){if(!Array.isArray(s))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+("Each address is '<host>:<port>'. Got: "+s));return s.map(function(a){return n.ServerAddress.fromUrl(a)})})},r}();return Qc.default=t,Qc}var yE;function pZ(){if(yE)return fs;yE=1;var n=oe&&oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fs,"__esModule",{value:!0}),fs.ConfiguredCustomResolver=fs.BaseHostNameResolver=void 0;var e=n(dZ());fs.BaseHostNameResolver=e.default;var t=n(q3());return fs.ConfiguredCustomResolver=t.default,fs}var _E;function H3(){if(_E)return Jt;_E=1;var n=oe&&oe.__createBinding||(Object.create?function(p,y,b,_){_===void 0&&(_=b),Object.defineProperty(p,_,{enumerable:!0,get:function(){return y[b]}})}:function(p,y,b,_){_===void 0&&(_=b),p[_]=y[b]}),e=oe&&oe.__setModuleDefault||(Object.create?function(p,y){Object.defineProperty(p,"default",{enumerable:!0,value:y})}:function(p,y){p.default=y}),t=oe&&oe.__importStar||function(p){if(p&&p.__esModule)return p;var y={};if(p!=null)for(var b in p)b!=="default"&&Object.prototype.hasOwnProperty.call(p,b)&&n(y,p,b);return e(y,p),y};Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.retryStrategy=Jt.resolver=Jt.serverAddress=Jt.urlUtil=Jt.logger=Jt.connectivityVerifier=Jt.transactionExecutor=Jt.txConfig=Jt.connectionHolder=Jt.constants=Jt.bookmark=Jt.observer=Jt.temporalUtil=Jt.util=void 0;var r=t(ci());Jt.util=r;var i=t(M3());Jt.temporalUtil=i;var o=t(uy());Jt.observer=o;var s=t(ec());Jt.bookmark=s;var a=t(tc());Jt.constants=a;var l=t(ip());Jt.connectionHolder=l;var u=t(cy());Jt.txConfig=u;var c=t(j3());Jt.transactionExecutor=c;var f=t(B3());Jt.connectivityVerifier=f;var d=t(F3());Jt.logger=d;var g=t(U3());Jt.urlUtil=g;var h=t(V3());Jt.serverAddress=h;var v=t(pZ());Jt.resolver=v;var m=t(L3());return Jt.retryStrategy=m,Jt}var bE;function fy(){if(bE)return Jc;bE=1;var n=oe&&oe.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Jc,"__esModule",{value:!0});var e=n(D3()),t=H3(),r=t.connectionHolder.EMPTY_CONNECTION_HOLDER,i=function(u){console.log("Uncaught error when processing result: "+u)},o=function(u){},s=function(){function u(c,f,d,g){this._stack=a(),this._streamObserverPromise=c,this._p=null,this._query=f,this._parameters=d||{},this._connectionHolder=g||r}return u.prototype.keys=function(){var c=this;return new Promise(function(f,d){c._streamObserverPromise.then(function(g){return g.subscribe({onKeys:function(h){return f(h)},onError:function(h){return d(h)}})}).catch(d)})},u.prototype.summary=function(){var c=this;return new Promise(function(f,d){c._streamObserverPromise.then(function(g){g.cancel(),g.subscribe({onCompleted:function(h){return c._createSummary(h).then(f,d)},onError:function(h){return d(h)}})}).catch(d)})},u.prototype._getOrCreatePromise=function(){var c=this;return this._p||(this._p=new Promise(function(f,d){var g=[],h={onNext:function(v){g.push(v)},onCompleted:function(v){f({records:g,summary:v})},onError:function(v){d(v)}};c.subscribe(h)})),this._p},u.prototype.then=function(c,f){return this._getOrCreatePromise().then(c,f)},u.prototype.catch=function(c){return this._getOrCreatePromise().catch(c)},u.prototype.finally=function(c){return this._getOrCreatePromise().finally(c)},u.prototype.subscribe=function(c){var f=this,d=c.onCompleted||o,g=function(m){f._createSummary(m).then(function(p){return d.call(c,p)})};c.onCompleted=g;var h=c.onError||i,v=function(m){f._connectionHolder.releaseConnection().then(function(){l(m,f._stack),h.call(c,m)})};c.onError=v,this._streamObserverPromise.then(function(m){return m.subscribe(c)}).catch(function(m){return c.onError(m)})},u.prototype._cancel=function(){this._streamObserverPromise.then(function(c){return c.cancel()})},u.prototype._createSummary=function(c){var f=t.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),d=f.validatedQuery,g=f.params,h=this._connectionHolder;return h.getConnection().then(function(v){return h.releaseConnection().then(function(){return v?v.protocol().version:void 0})},function(v){}).then(function(v){return new e.default(d,g,c,v)})},u}();function a(){var u=new Error("");return u.stack?u.stack.replace(/^Error(\n\r)*/,""):null}function l(u,c){c&&(u.stack=u.toString()+`
`+c)}return Jc.default=s,Jc}var Zc={},wE;function mZ(){if(wE)return Zc;wE=1,Object.defineProperty(Zc,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.acquireConnection=function(t){throw Error("Not implemented")},e.prototype.supportsMultiDb=function(){throw Error("Not implemented")},e.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},e.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},e.prototype.close=function(){throw Error("Not implemented")},e}();return Zc.default=n,Zc}var Xc={},SE;function gZ(){if(SE)return Xc;SE=1,Object.defineProperty(Xc,"__esModule",{value:!0});var n=function(){function e(){this.id="",this.databaseId=""}return e.prototype.isOpen=function(){return!1},e.prototype.protocol=function(){throw Error("Not implemented")},e.prototype.connect=function(t,r){throw Error("Not implemented")},e.prototype.write=function(t,r,i){throw Error("Not implemented")},e.prototype.resetAndFlush=function(){throw Error("Not implemented")},e.prototype.close=function(){throw Error("Not implemented")},e.prototype._release=function(){return Promise.resolve()},e}();return Xc.default=n,Xc}var $c={},EE;function z3(){if(EE)return $c;EE=1;var n=oe&&oe.__awaiter||function(h,v,m,p){function y(b){return b instanceof m?b:new m(function(_){_(b)})}return new(m||(m=Promise))(function(b,_){function w(O){try{E(p.next(O))}catch(R){_(R)}}function S(O){try{E(p.throw(O))}catch(R){_(R)}}function E(O){O.done?b(O.value):y(O.value).then(w,S)}E((p=p.apply(h,v||[])).next())})},e=oe&&oe.__generator||function(h,v){var m={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},p,y,b,_;return _={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function w(E){return function(O){return S([E,O])}}function S(E){if(p)throw new TypeError("Generator is already executing.");for(;m;)try{if(p=1,y&&(b=E[0]&2?y.return:E[0]?y.throw||((b=y.return)&&b.call(y),0):y.next)&&!(b=b.call(y,E[1])).done)return b;switch(y=0,b&&(E=[E[0]&2,b.value]),E[0]){case 0:case 1:b=E;break;case 4:return m.label++,{value:E[1],done:!1};case 5:m.label++,y=E[1],E=[0];continue;case 7:E=m.ops.pop(),m.trys.pop();continue;default:if(b=m.trys,!(b=b.length>0&&b[b.length-1])&&(E[0]===6||E[0]===2)){m=0;continue}if(E[0]===3&&(!b||E[1]>b[0]&&E[1]<b[3])){m.label=E[1];break}if(E[0]===6&&m.label<b[1]){m.label=b[1],b=E;break}if(b&&m.label<b[2]){m.label=b[2],m.ops.push(E);break}b[2]&&m.ops.pop(),m.trys.pop();continue}E=v.call(h,m)}catch(O){E=[6,O],y=0}finally{p=b=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},t=oe&&oe.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty($c,"__esModule",{value:!0});var r=ci(),i=ip(),o=ec(),s=cy(),a=uy(),l=ei(),u=t(fy()),c=function(){function h(v){var m=v.connectionHolder,p=v.onClose,y=v.onBookmark,b=v.onConnection,_=v.reactive,w=v.fetchSize,S=v.impersonatedUser;this._connectionHolder=m,this._reactive=_,this._state=f.ACTIVE,this._onClose=p,this._onBookmark=y,this._onConnection=b,this._onError=this._onErrorCallback.bind(this),this._onComplete=this._onCompleteCallback.bind(this),this._fetchSize=w,this._results=[],this._impersonatedUser=S}return h.prototype._begin=function(v,m){var p=this;this._connectionHolder.getConnection().then(function(y){if(p._onConnection(),y)return y.protocol().beginTransaction({bookmark:v,txConfig:m,mode:p._connectionHolder.mode(),database:p._connectionHolder.database(),impersonatedUser:p._impersonatedUser,beforeError:p._onError,afterComplete:p._onComplete});throw(0,l.newError)("No connection available")}).catch(function(y){return p._onError(y)})},h.prototype.run=function(v,m){var p=(0,r.validateQueryAndParameters)(v,m),y=p.validatedQuery,b=p.params,_=this._state.run(y,b,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize});return this._results.push(_),_},h.prototype.commit=function(){var v=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=v.state,this._onClose(),new Promise(function(m,p){v.result.subscribe({onCompleted:function(){return m()},onError:function(y){return p(y)}})})},h.prototype.rollback=function(){var v=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=v.state,this._onClose(),new Promise(function(m,p){v.result.subscribe({onCompleted:function(){return m()},onError:function(y){return p(y)}})})},h.prototype.isOpen=function(){return this._state===f.ACTIVE},h.prototype.close=function(){return n(this,void 0,void 0,function(){return e(this,function(v){switch(v.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:v.sent(),v.label=2;case 2:return[2]}})})},h.prototype._onErrorCallback=function(v){return this._state=f.FAILED,this._onClose(),this._connectionHolder.releaseConnection()},h.prototype._onCompleteCallback=function(v){this._onBookmark(new o.Bookmark(v.bookmark))},h}(),f={ACTIVE:{commit:function(h){var v=h.connectionHolder,m=h.onError,p=h.onComplete,y=h.onConnection,b=h.pendingResults;return{result:d(!0,v,m,p,y,b),state:f.SUCCEEDED}},rollback:function(h){var v=h.connectionHolder,m=h.onError,p=h.onComplete,y=h.onConnection,b=h.pendingResults;return{result:d(!1,v,m,p,y,b),state:f.ROLLED_BACK}},run:function(h,v,m){var p=m.connectionHolder,y=m.onError,b=m.onComplete,_=m.onConnection,w=m.reactive,S=m.fetchSize,E=p.getConnection().then(function(O){if(_(),O)return O.protocol().run(h,v,{bookmark:o.Bookmark.empty(),txConfig:s.TxConfig.empty(),beforeError:y,afterComplete:b,reactive:w,fetchSize:S});throw(0,l.newError)("No connection available")}).catch(function(O){return new a.FailedObserver({error:O,onError:y})});return g(E,h,v,p)}},FAILED:{commit:function(h){var v=h.connectionHolder,m=h.onError;return h.onComplete,{result:g(new a.FailedObserver({error:(0,l.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:m}),"COMMIT",{},v),state:f.FAILED}},rollback:function(h){var v=h.connectionHolder;return h.onError,h.onComplete,{result:g(new a.CompletedObserver,"ROLLBACK",{},v),state:f.FAILED}},run:function(h,v,m){var p=m.connectionHolder,y=m.onError;return m.onComplete,g(new a.FailedObserver({error:(0,l.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:y}),h,v,p)}},SUCCEEDED:{commit:function(h){var v=h.connectionHolder,m=h.onError;return h.onComplete,{result:g(new a.FailedObserver({error:(0,l.newError)("Cannot commit this transaction, because it has already been committed."),onError:m}),"COMMIT",{}),state:f.SUCCEEDED,connectionHolder:v}},rollback:function(h){var v=h.connectionHolder,m=h.onError;return h.onComplete,{result:g(new a.FailedObserver({error:(0,l.newError)("Cannot rollback this transaction, because it has already been committed."),onError:m}),"ROLLBACK",{}),state:f.SUCCEEDED,connectionHolder:v}},run:function(h,v,m){var p=m.connectionHolder,y=m.onError;return m.onComplete,g(new a.FailedObserver({error:(0,l.newError)("Cannot run query in this transaction, because it has already been committed."),onError:y}),h,v,p)}},ROLLED_BACK:{commit:function(h){var v=h.connectionHolder,m=h.onError;return h.onComplete,{result:g(new a.FailedObserver({error:(0,l.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:m}),"COMMIT",{},v),state:f.ROLLED_BACK}},rollback:function(h){var v=h.connectionHolder;return h.onError,h.onComplete,{result:g(new a.FailedObserver({error:(0,l.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},v),state:f.ROLLED_BACK}},run:function(h,v,m){var p=m.connectionHolder,y=m.onError;return m.onComplete,g(new a.FailedObserver({error:(0,l.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:y}),h,v,p)}}};function d(h,v,m,p,y,b){var _=v.getConnection().then(function(w){return y(),b.forEach(function(S){return S._cancel()}),Promise.all(b).then(function(S){if(w)return h?w.protocol().commitTransaction({beforeError:m,afterComplete:p}):w.protocol().rollbackTransaction({beforeError:m,afterComplete:p});throw(0,l.newError)("No connection available")})}).catch(function(w){return new a.FailedObserver({error:w,onError:m})});return new u.default(_,h?"COMMIT":"ROLLBACK",{},v)}function g(h,v,m,p){return p===void 0&&(p=i.EMPTY_CONNECTION_HOLDER),new u.default(Promise.resolve(h),v,m,new i.ReadOnlyConnectionHolder(p||i.EMPTY_CONNECTION_HOLDER))}return $c.default=c,$c}var ef={},CE;function W3(){if(CE)return ef;CE=1;var n=oe&&oe.__awaiter||function(v,m,p,y){function b(_){return _ instanceof p?_:new p(function(w){w(_)})}return new(p||(p=Promise))(function(_,w){function S(R){try{O(y.next(R))}catch(D){w(D)}}function E(R){try{O(y.throw(R))}catch(D){w(D)}}function O(R){R.done?_(R.value):b(R.value).then(S,E)}O((y=y.apply(v,m||[])).next())})},e=oe&&oe.__generator||function(v,m){var p={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},y,b,_,w;return w={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function S(O){return function(R){return E([O,R])}}function E(O){if(y)throw new TypeError("Generator is already executing.");for(;p;)try{if(y=1,b&&(_=O[0]&2?b.return:O[0]?b.throw||((_=b.return)&&_.call(b),0):b.next)&&!(_=_.call(b,O[1])).done)return _;switch(b=0,_&&(O=[O[0]&2,_.value]),O[0]){case 0:case 1:_=O;break;case 4:return p.label++,{value:O[1],done:!1};case 5:p.label++,b=O[1],O=[0];continue;case 7:O=p.ops.pop(),p.trys.pop();continue;default:if(_=p.trys,!(_=_.length>0&&_[_.length-1])&&(O[0]===6||O[0]===2)){p=0;continue}if(O[0]===3&&(!_||O[1]>_[0]&&O[1]<_[3])){p.label=O[1];break}if(O[0]===6&&p.label<_[1]){p.label=_[1],_=O;break}if(_&&p.label<_[2]){p.label=_[2],p.ops.push(O);break}_[2]&&p.ops.pop(),p.trys.pop();continue}O=m.call(v,p)}catch(R){O=[6,R],b=0}finally{y=_=0}if(O[0]&5)throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}},t=oe&&oe.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(ef,"__esModule",{value:!0});var r=uy(),i=ci(),o=ei(),s=t(fy()),a=t(z3()),l=ip(),u=tc(),c=j3(),f=ec(),d=cy(),g=function(){function v(m){var p=m.mode,y=m.connectionProvider,b=m.bookmark,_=m.database,w=m.config,S=m.reactive,E=m.fetchSize,O=m.impersonatedUser;this._mode=p,this._database=_,this._reactive=S,this._fetchSize=E,this._onDatabaseNameResolved=this._onDatabaseNameResolved.bind(this),this._readConnectionHolder=new l.ConnectionHolder({mode:u.ACCESS_MODE_READ,database:_,bookmark:b,connectionProvider:y,impersonatedUser:O,onDatabaseNameResolved:this._onDatabaseNameResolved}),this._writeConnectionHolder=new l.ConnectionHolder({mode:u.ACCESS_MODE_WRITE,database:_,bookmark:b,connectionProvider:y,impersonatedUser:O,onDatabaseNameResolved:this._onDatabaseNameResolved}),this._open=!0,this._hasTx=!1,this._impersonatedUser=O,this._lastBookmark=b||f.Bookmark.empty(),this._transactionExecutor=h(w),this._onComplete=this._onCompleteCallback.bind(this),this._databaseNameResolved=this._database!==""}return v.prototype.run=function(m,p,y){var b=this,_=(0,i.validateQueryAndParameters)(m,p),w=_.validatedQuery,S=_.params,E=y?new d.TxConfig(y):d.TxConfig.empty();return this._run(w,S,function(O){return b._assertSessionIsOpen(),O.protocol().run(w,S,{bookmark:b._lastBookmark,txConfig:E,mode:b._mode,database:b._database,impersonatedUser:b._impersonatedUser,afterComplete:b._onComplete,reactive:b._reactive,fetchSize:b._fetchSize})})},v.prototype._run=function(m,p,y){var b=this._connectionHolderWithMode(this._mode),_;return this._open?!this._hasTx&&b.initializeConnection()?_=b.getConnection().then(function(w){return y(w)}).catch(function(w){return Promise.resolve(new r.FailedObserver({error:w}))}):_=Promise.resolve(new r.FailedObserver({error:(0,o.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")})):_=Promise.resolve(new r.FailedObserver({error:(0,o.newError)("Cannot run query in a closed session.")})),new s.default(_,m,p,b)},v.prototype._acquireConnection=function(m){return n(this,void 0,void 0,function(){var p,y,b=this;return e(this,function(_){return y=this._connectionHolderWithMode(this._mode),this._open?!this._hasTx&&y.initializeConnection()?p=y.getConnection().then(function(w){return m(w)}).then(function(w){return n(b,void 0,void 0,function(){return e(this,function(S){switch(S.label){case 0:return[4,y.releaseConnection()];case 1:return S.sent(),[2,w]}})})}):p=Promise.reject((0,o.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):p=Promise.reject((0,o.newError)("Cannot run query in a closed session.")),[2,p]})})},v.prototype.beginTransaction=function(m){var p=m,y=d.TxConfig.empty();return p&&(y=new d.TxConfig(p)),this._beginTransaction(this._mode,y)},v.prototype._beginTransaction=function(m,p){if(!this._open)throw(0,o.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,o.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var y=v._validateSessionMode(m),b=this._connectionHolderWithMode(y);b.initializeConnection(),this._hasTx=!0;var _=new a.default({connectionHolder:b,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmark:this._updateBookmark.bind(this),onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize});return _._begin(this._lastBookmark,p),_},v.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,o.newError)("You cannot run more transactions on a closed session.")},v.prototype._transactionClosed=function(){this._hasTx=!1},v.prototype.lastBookmark=function(){return this._lastBookmark.values()},v.prototype.readTransaction=function(m,p){var y=new d.TxConfig(p);return this._runTransaction(u.ACCESS_MODE_READ,y,m)},v.prototype.writeTransaction=function(m,p){var y=new d.TxConfig(p);return this._runTransaction(u.ACCESS_MODE_WRITE,y,m)},v.prototype._runTransaction=function(m,p,y){var b=this;return this._transactionExecutor.execute(function(){return b._beginTransaction(m,p)},y)},v.prototype._onDatabaseNameResolved=function(m){if(!this._databaseNameResolved){var p=m||"";this._database=p,this._readConnectionHolder.setDatabase(p),this._writeConnectionHolder.setDatabase(p),this._databaseNameResolved=!0}},v.prototype._updateBookmark=function(m){m&&!m.isEmpty()&&(this._lastBookmark=m)},v.prototype.close=function(){return n(this,void 0,void 0,function(){return e(this,function(m){switch(m.label){case 0:return this._open?(this._open=!1,this._transactionExecutor.close(),[4,this._readConnectionHolder.close()]):[3,3];case 1:return m.sent(),[4,this._writeConnectionHolder.close()];case 2:m.sent(),m.label=3;case 3:return[2]}})})},v.prototype._connectionHolderWithMode=function(m){if(m===u.ACCESS_MODE_READ)return this._readConnectionHolder;if(m===u.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,o.newError)("Unknown access mode: "+m)},v.prototype._onCompleteCallback=function(m){this._updateBookmark(new f.Bookmark(m.bookmark))},v._validateSessionMode=function(m){var p=m||u.ACCESS_MODE_WRITE;if(p!==u.ACCESS_MODE_READ&&p!==u.ACCESS_MODE_WRITE)throw(0,o.newError)("Illegal session mode "+p);return p},v}();function h(v){var m=v&&v.maxTransactionRetryTime?v.maxTransactionRetryTime:null;return new c.TransactionExecutor(m)}return ef.default=g,ef}var Mi={},kE;function vZ(){if(kE)return Mi;kE=1;var n=oe&&oe.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.WRITE=Mi.READ=Mi.Driver=void 0;var e=ec(),t=B3(),r=n(q3()),i=tc(),o=F3(),s=n(W3()),a=ci(),l=60*60*1e3,u=1e3,c=i.ACCESS_MODE_READ;Mi.READ=c;var f=i.ACCESS_MODE_WRITE;Mi.WRITE=f;var d=0,g=function(){function b(_,w,S,E){w===void 0&&(w={}),E===void 0&&(E=function(O){return new s.default(O)}),v(w),h(w),this._id=d++,this._meta=_,this._config=w,this._log=o.Logger.create(w),this._createConnectionProvider=S,this._createSession=E,this._connectionProvider=null,this._afterConstruction()}return b.prototype.verifyConnectivity=function(_){var w=_===void 0?{}:_,S=w.database,E=S===void 0?"":S,O=this._getOrCreateConnectionProvider(),R=new t.ConnectivityVerifier(O);return R.verify({database:E})},b.prototype.supportsMultiDb=function(){var _=this._getOrCreateConnectionProvider();return _.supportsMultiDb()},b.prototype.supportsTransactionConfig=function(){var _=this._getOrCreateConnectionProvider();return _.supportsTransactionConfig()},b.prototype.supportsUserImpersonation=function(){var _=this._getOrCreateConnectionProvider();return _.supportsUserImpersonation()},b.prototype._supportsRouting=function(){return this._meta.routing},b.prototype._isEncrypted=function(){return this._config.encrypted===a.ENCRYPTION_ON},b.prototype._getTrust=function(){return this._config.trust},b.prototype.session=function(_){var w=_===void 0?{}:_,S=w.defaultAccessMode,E=S===void 0?f:S,O=w.bookmarks,R=w.database,D=R===void 0?"":R,F=w.impersonatedUser,B=w.fetchSize;return this._newSession({defaultAccessMode:E,bookmarkOrBookmarks:O,database:D,reactive:!1,impersonatedUser:F,fetchSize:p(B,this._config.fetchSize)})},b.prototype.close=function(){return this._log.info("Driver "+this._id+" closing"),this._connectionProvider?this._connectionProvider.close():Promise.resolve()},b.prototype._afterConstruction=function(){this._log.info(this._meta.typename+" driver "+this._id+" created for server address "+this._meta.address)},b.prototype._newSession=function(_){var w=_.defaultAccessMode,S=_.bookmarkOrBookmarks,E=_.database,O=_.reactive,R=_.impersonatedUser,D=_.fetchSize,F=s.default._validateSessionMode(w),B=this._getOrCreateConnectionProvider(),H=S?new e.Bookmark(S):e.Bookmark.empty();return this._createSession({mode:F,database:E||"",connectionProvider:B,bookmark:H,config:this._config,reactive:O,impersonatedUser:R,fetchSize:D})},b.prototype._getOrCreateConnectionProvider=function(){return this._connectionProvider||(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,y(this._config))),this._connectionProvider},b}();Mi.Driver=g;function h(b){var _=b.resolver;if(_&&typeof _!="function")throw new TypeError("Configured resolver should be a function. Got: "+_);return b}function v(b){b.maxConnectionLifetime=m(b.maxConnectionLifetime,l),b.maxConnectionPoolSize=m(b.maxConnectionPoolSize,i.DEFAULT_POOL_MAX_SIZE),b.connectionAcquisitionTimeout=m(b.connectionAcquisitionTimeout,i.DEFAULT_POOL_ACQUISITION_TIMEOUT),b.fetchSize=p(b.fetchSize,u)}function m(b,_){var w=parseInt(b,10);return w>0||w===0?w:w<0?Number.MAX_SAFE_INTEGER:_}function p(b,_){var w=parseInt(b,10);if(w>0||w===i.FETCH_ALL)return w;if(w===0||w<0)throw new Error("The fetch size can only be a positive value or "+i.FETCH_ALL+" for ALL. However fetchSize = "+w);return _}function y(b){return new r.default(b.resolver)}return Mi.default=g,Mi}var tf={},OE;function yZ(){if(OE)return tf;OE=1,Object.defineProperty(tf,"__esModule",{value:!0});var n={basic:function(e,t,r){return r?{scheme:"basic",principal:e,credentials:t,realm:r}:{scheme:"basic",principal:e,credentials:t}},kerberos:function(e){return{scheme:"kerberos",principal:"",credentials:e}},bearer:function(e){return{scheme:"bearer",credentials:e}},custom:function(e,t,r,i,o){return o?{scheme:i,principal:e,credentials:t,realm:r,parameters:o}:{scheme:i,principal:e,credentials:t,realm:r}}};return tf.default=n,tf}var wm={},TE;function _Z(){return TE||(TE=1,Object.defineProperty(wm,"__esModule",{value:!0})),wm}var PE;function Mt(){return PE||(PE=1,function(n){var e=oe&&oe.__createBinding||(Object.create?function(R,D,F,B){B===void 0&&(B=F),Object.defineProperty(R,B,{enumerable:!0,get:function(){return D[F]}})}:function(R,D,F,B){B===void 0&&(B=F),R[B]=D[F]}),t=oe&&oe.__setModuleDefault||(Object.create?function(R,D){Object.defineProperty(R,"default",{enumerable:!0,value:D})}:function(R,D){R.default=D}),r=oe&&oe.__importStar||function(R){if(R&&R.__esModule)return R;var D={};if(R!=null)for(var F in R)F!=="default"&&Object.prototype.hasOwnProperty.call(R,F)&&e(D,R,F);return t(D,R),D},i=oe&&oe.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(n,"__esModule",{value:!0}),n.types=n.Driver=n.Session=n.Transaction=n.Connection=n.ConnectionProvider=n.Result=n.Stats=n.QueryStatistics=n.ProfiledPlan=n.Plan=n.Notification=n.ServerInfo=n.queryType=n.ResultSummary=n.Record=n.isPathSegment=n.PathSegment=n.isPath=n.Path=n.isUnboundRelationship=n.UnboundRelationship=n.isRelationship=n.Relationship=n.isNode=n.Node=n.Time=n.LocalTime=n.LocalDateTime=n.isTime=n.isLocalTime=n.isLocalDateTime=n.isDuration=n.isDateTime=n.isDate=n.Duration=n.DateTime=n.Date=n.Point=n.isPoint=n.internal=n.toString=n.toNumber=n.inSafeRange=n.isInt=n.int=n.Integer=n.error=n.Neo4jError=n.newError=void 0,n.auth=n.json=n.driver=void 0;var o=ei();Object.defineProperty(n,"newError",{enumerable:!0,get:function(){return o.newError}}),Object.defineProperty(n,"Neo4jError",{enumerable:!0,get:function(){return o.Neo4jError}});var s=r(sl());n.Integer=s.default,Object.defineProperty(n,"int",{enumerable:!0,get:function(){return s.int}}),Object.defineProperty(n,"isInt",{enumerable:!0,get:function(){return s.isInt}}),Object.defineProperty(n,"inSafeRange",{enumerable:!0,get:function(){return s.inSafeRange}}),Object.defineProperty(n,"toNumber",{enumerable:!0,get:function(){return s.toNumber}}),Object.defineProperty(n,"toString",{enumerable:!0,get:function(){return s.toString}});var a=uZ();Object.defineProperty(n,"Date",{enumerable:!0,get:function(){return a.Date}}),Object.defineProperty(n,"DateTime",{enumerable:!0,get:function(){return a.DateTime}}),Object.defineProperty(n,"Duration",{enumerable:!0,get:function(){return a.Duration}}),Object.defineProperty(n,"isDate",{enumerable:!0,get:function(){return a.isDate}}),Object.defineProperty(n,"isDateTime",{enumerable:!0,get:function(){return a.isDateTime}}),Object.defineProperty(n,"isDuration",{enumerable:!0,get:function(){return a.isDuration}}),Object.defineProperty(n,"isLocalDateTime",{enumerable:!0,get:function(){return a.isLocalDateTime}}),Object.defineProperty(n,"isLocalTime",{enumerable:!0,get:function(){return a.isLocalTime}}),Object.defineProperty(n,"isTime",{enumerable:!0,get:function(){return a.isTime}}),Object.defineProperty(n,"LocalDateTime",{enumerable:!0,get:function(){return a.LocalDateTime}}),Object.defineProperty(n,"LocalTime",{enumerable:!0,get:function(){return a.LocalTime}}),Object.defineProperty(n,"Time",{enumerable:!0,get:function(){return a.Time}});var l=cZ();Object.defineProperty(n,"Node",{enumerable:!0,get:function(){return l.Node}}),Object.defineProperty(n,"isNode",{enumerable:!0,get:function(){return l.isNode}}),Object.defineProperty(n,"Relationship",{enumerable:!0,get:function(){return l.Relationship}}),Object.defineProperty(n,"isRelationship",{enumerable:!0,get:function(){return l.isRelationship}}),Object.defineProperty(n,"UnboundRelationship",{enumerable:!0,get:function(){return l.UnboundRelationship}}),Object.defineProperty(n,"isUnboundRelationship",{enumerable:!0,get:function(){return l.isUnboundRelationship}}),Object.defineProperty(n,"Path",{enumerable:!0,get:function(){return l.Path}}),Object.defineProperty(n,"isPath",{enumerable:!0,get:function(){return l.isPath}}),Object.defineProperty(n,"PathSegment",{enumerable:!0,get:function(){return l.PathSegment}}),Object.defineProperty(n,"isPathSegment",{enumerable:!0,get:function(){return l.isPathSegment}});var u=i(fZ());n.Record=u.default;var c=hZ();Object.defineProperty(n,"isPoint",{enumerable:!0,get:function(){return c.isPoint}}),Object.defineProperty(n,"Point",{enumerable:!0,get:function(){return c.Point}});var f=r(D3());n.ResultSummary=f.default,Object.defineProperty(n,"queryType",{enumerable:!0,get:function(){return f.queryType}}),Object.defineProperty(n,"ServerInfo",{enumerable:!0,get:function(){return f.ServerInfo}}),Object.defineProperty(n,"Notification",{enumerable:!0,get:function(){return f.Notification}}),Object.defineProperty(n,"Plan",{enumerable:!0,get:function(){return f.Plan}}),Object.defineProperty(n,"ProfiledPlan",{enumerable:!0,get:function(){return f.ProfiledPlan}}),Object.defineProperty(n,"QueryStatistics",{enumerable:!0,get:function(){return f.QueryStatistics}}),Object.defineProperty(n,"Stats",{enumerable:!0,get:function(){return f.Stats}});var d=i(fy());n.Result=d.default;var g=i(mZ());n.ConnectionProvider=g.default;var h=i(gZ());n.Connection=h.default;var v=i(z3());n.Transaction=v.default;var m=i(W3());n.Session=m.default;var p=r(vZ()),y=p;n.Driver=p.default,n.driver=y;var b=i(yZ());n.auth=b.default;var _=r(_Z());n.types=_;var w=r(ly());n.json=w;var S=r(H3());n.internal=S;var E={SERVICE_UNAVAILABLE:o.SERVICE_UNAVAILABLE,SESSION_EXPIRED:o.SESSION_EXPIRED,PROTOCOL_ERROR:o.PROTOCOL_ERROR};n.error=E;var O={newError:o.newError,Neo4jError:o.Neo4jError,error:E,Integer:s.default,int:s.int,isInt:s.isInt,inSafeRange:s.inSafeRange,toNumber:s.toNumber,toString:s.toString,internal:S,isPoint:c.isPoint,Point:c.Point,Date:a.Date,DateTime:a.DateTime,Duration:a.Duration,isDate:a.isDate,isDateTime:a.isDateTime,isDuration:a.isDuration,isLocalDateTime:a.isLocalDateTime,isLocalTime:a.isLocalTime,isTime:a.isTime,LocalDateTime:a.LocalDateTime,LocalTime:a.LocalTime,Time:a.Time,Node:l.Node,isNode:l.isNode,Relationship:l.Relationship,isRelationship:l.isRelationship,UnboundRelationship:l.UnboundRelationship,isUnboundRelationship:l.isUnboundRelationship,Path:l.Path,isPath:l.isPath,PathSegment:l.PathSegment,isPathSegment:l.isPathSegment,Record:u.default,ResultSummary:f.default,queryType:f.queryType,ServerInfo:f.ServerInfo,Notification:f.Notification,Plan:f.Plan,ProfiledPlan:f.ProfiledPlan,QueryStatistics:f.QueryStatistics,Stats:f.Stats,Result:d.default,Transaction:v.default,Session:m.default,Driver:p.default,Connection:h.default,types:_,driver:y,json:w,auth:b.default};n.default=O}(_m)),_m}var Sm={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var g0=function(n,e){return g0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},g0(n,e)};function je(n,e){g0(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Ka(n){return typeof n=="function"}var IE=!1,oi={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){var e=new Error;""+e.stack}IE=n},get useDeprecatedSynchronousErrorHandling(){return IE}};function ga(n){setTimeout(function(){throw n},0)}var ld={closed:!0,next:function(n){},error:function(n){if(oi.useDeprecatedSynchronousErrorHandling)throw n;ga(n)},complete:function(){}},br=function(){return Array.isArray||function(n){return n&&typeof n.length=="number"}}();function hy(n){return n!==null&&typeof n=="object"}var bZ=function(){function n(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(t,r){return r+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n}(),tu=bZ,Sn=function(){function n(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return n.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this,r=t._parentOrParents,i=t._ctorUnsubscribe,o=t._unsubscribe,s=t._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof n)r.remove(this);else if(r!==null)for(var a=0;a<r.length;++a){var l=r[a];l.remove(this)}if(Ka(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(f){e=f instanceof tu?AE(f.errors):[f]}}if(br(s))for(var a=-1,u=s.length;++a<u;){var c=s[a];if(hy(c))try{c.unsubscribe()}catch(d){e=e||[],d instanceof tu?e=e.concat(AE(d.errors)):e.push(d)}}if(e)throw new tu(e)}},n.prototype.add=function(e){var t=e;if(!e)return n.EMPTY;switch(typeof e){case"function":t=new n(e);case"object":if(t===this||t.closed||typeof t.unsubscribe!="function")return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof n)){var r=t;t=new n,t._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=t._parentOrParents;if(i===null)t._parentOrParents=this;else if(i instanceof n){if(i===this)return t;t._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return t;var o=this._subscriptions;return o===null?this._subscriptions=[t]:o.push(t),t},n.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);r!==-1&&t.splice(r,1)}},n.EMPTY=function(e){return e.closed=!0,e}(new n),n}();function AE(n){return n.reduce(function(e,t){return e.concat(t instanceof tu?t.errors:t)},[])}var ud=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),ht=function(n){je(e,n);function e(t,r,i){var o=n.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=ld;break;case 1:if(!t){o.destination=ld;break}if(typeof t=="object"){t instanceof e?(o.syncErrorThrowable=t.syncErrorThrowable,o.destination=t,t.add(o)):(o.syncErrorThrowable=!0,o.destination=new RE(o,t));break}default:o.syncErrorThrowable=!0,o.destination=new RE(o,t,r,i);break}return o}return e.prototype[ud]=function(){return this},e.create=function(t,r,i){var o=new e(t,r,i);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(Sn),RE=function(n){je(e,n);function e(t,r,i,o){var s=n.call(this)||this;s._parentSubscriber=t;var a,l=s;return Ka(r)?a=r:r&&(a=r.next,i=r.error,o=r.complete,r!==ld&&(l=Object.create(r),Ka(l.unsubscribe)&&s.add(l.unsubscribe.bind(l)),l.unsubscribe=s.unsubscribe.bind(s))),s._context=l,s._next=a,s._error=i,s._complete=o,s}return e.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parentSubscriber;!oi.useDeprecatedSynchronousErrorHandling||!r.syncErrorThrowable?this.__tryOrUnsub(this._next,t):this.__tryOrSetError(r,this._next,t)&&this.unsubscribe()}},e.prototype.error=function(t){if(!this.isStopped){var r=this._parentSubscriber,i=oi.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!r.syncErrorThrowable?(this.__tryOrUnsub(this._error,t),this.unsubscribe()):(this.__tryOrSetError(r,this._error,t),this.unsubscribe());else if(r.syncErrorThrowable)i?(r.syncErrorValue=t,r.syncErrorThrown=!0):ga(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;ga(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};!oi.useDeprecatedSynchronousErrorHandling||!r.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(r,i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(i){if(this.unsubscribe(),oi.useDeprecatedSynchronousErrorHandling)throw i;ga(i)}},e.prototype.__tryOrSetError=function(t,r,i){if(!oi.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{r.call(this._context,i)}catch(o){return oi.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=o,t.syncErrorThrown=!0,!0):(ga(o),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(ht);function dy(n){for(;n;){var e=n,t=e.closed,r=e.destination,i=e.isStopped;if(t||i)return!1;r&&r instanceof ht?n=r:n=null}return!0}function wZ(n,e,t){if(n){if(n instanceof ht)return n;if(n[ud])return n[ud]()}return!n&&!e&&!t?new ht(ld):new ht(n,e,t)}var al=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function es(n){return n}function v0(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return K3(n)}function K3(n){return n.length===0?es:n.length===1?n[0]:function(t){return n.reduce(function(r,i){return i(r)},t)}}var Rt=function(){function n(e){this._isScalar=!1,e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,r){var i=this.operator,o=wZ(e,t,r);if(i?o.add(i.call(o,this.source)):o.add(this.source||oi.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),oi.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){oi.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),dy(e)?e.error(t):console.warn(t)}},n.prototype.forEach=function(e,t){var r=this;return t=xE(t),new t(function(i,o){var s;s=r.subscribe(function(a){try{e(a)}catch(l){o(l),s&&s.unsubscribe()}},o,i)})},n.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},n.prototype[al]=function(){return this},n.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?this:K3(e)(this)},n.prototype.toPromise=function(e){var t=this;return e=xE(e),new e(function(r,i){var o;t.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},n.create=function(e){return new n(e)},n}();function xE(n){if(n||(n=oi.Promise||Promise),!n)throw new Error("no Promise impl found");return n}var SZ=function(){function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n}(),No=SZ,G3=function(n){je(e,n);function e(t,r){var i=n.call(this)||this;return i.subject=t,i.subscriber=r,i.closed=!1,i}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,r=t.observers;if(this.subject=null,!(!r||r.length===0||t.isStopped||t.closed)){var i=r.indexOf(this.subscriber);i!==-1&&r.splice(i,1)}}},e}(Sn),J3=function(n){je(e,n);function e(t){var r=n.call(this,t)||this;return r.destination=t,r}return e}(ht),Zn=function(n){je(e,n);function e(){var t=n.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype[ud]=function(){return new J3(this)},e.prototype.lift=function(t){var r=new NE(this,this);return r.operator=t,r},e.prototype.next=function(t){if(this.closed)throw new No;if(!this.isStopped)for(var r=this.observers,i=r.length,o=r.slice(),s=0;s<i;s++)o[s].next(t)},e.prototype.error=function(t){if(this.closed)throw new No;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var r=this.observers,i=r.length,o=r.slice(),s=0;s<i;s++)o[s].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new No;this.isStopped=!0;for(var t=this.observers,r=t.length,i=t.slice(),o=0;o<r;o++)i[o].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(t){if(this.closed)throw new No;return n.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){if(this.closed)throw new No;return this.hasError?(t.error(this.thrownError),Sn.EMPTY):this.isStopped?(t.complete(),Sn.EMPTY):(this.observers.push(t),new G3(this,t))},e.prototype.asObservable=function(){var t=new Rt;return t.source=this,t},e.create=function(t,r){return new NE(t,r)},e}(Rt),NE=function(n){je(e,n);function e(t,r){var i=n.call(this)||this;return i.destination=t,i.source=r,i}return e.prototype.next=function(t){var r=this.destination;r&&r.next&&r.next(t)},e.prototype.error=function(t){var r=this.destination;r&&r.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){var r=this.source;return r?this.source.subscribe(t):Sn.EMPTY},e}(Zn);function py(){return function(e){return e.lift(new EZ(e))}}var EZ=function(){function n(e){this.connectable=e}return n.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var i=new CZ(e,r),o=t.subscribe(i);return i.closed||(i.connection=r.connect()),o},n}(),CZ=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.connectable=r,i}return e.prototype._unsubscribe=function(){var t=this.connectable;if(!t){this.connection=null;return}this.connectable=null;var r=t._refCount;if(r<=0){this.connection=null;return}if(t._refCount=r-1,r>1){this.connection=null;return}var i=this.connection,o=t._connection;this.connection=null,o&&(!i||o===i)&&o.unsubscribe()},e}(ht),Y3=function(n){je(e,n);function e(t,r){var i=n.call(this)||this;return i.source=t,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,t=this._connection=new Sn,t.add(this.source.subscribe(new OZ(this.getSubject(),this))),t.closed&&(this._connection=null,t=Sn.EMPTY)),t},e.prototype.refCount=function(){return py()(this)},e}(Rt),kZ=function(){var n=Y3.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}}(),OZ=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.connectable=r,i}return e.prototype._error=function(t){this._unsubscribe(),n.prototype._error.call(this,t)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),n.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var r=t._connection;t._refCount=0,t._subject=null,t._connection=null,r&&r.unsubscribe()}},e}(J3);function TZ(n,e,t,r){return function(i){return i.lift(new PZ(n,e,t,r))}}var PZ=function(){function n(e,t,r,i){this.keySelector=e,this.elementSelector=t,this.durationSelector=r,this.subjectSelector=i}return n.prototype.call=function(e,t){return t.subscribe(new IZ(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},n}(),IZ=function(n){je(e,n);function e(t,r,i,o,s){var a=n.call(this,t)||this;return a.keySelector=r,a.elementSelector=i,a.durationSelector=o,a.subjectSelector=s,a.groups=null,a.attemptedToUnsubscribe=!1,a.count=0,a}return e.prototype._next=function(t){var r;try{r=this.keySelector(t)}catch(i){this.error(i);return}this._group(t,r)},e.prototype._group=function(t,r){var i=this.groups;i||(i=this.groups=new Map);var o=i.get(r),s;if(this.elementSelector)try{s=this.elementSelector(t)}catch(u){this.error(u)}else s=t;if(!o){o=this.subjectSelector?this.subjectSelector():new Zn,i.set(r,o);var a=new y0(r,o,this);if(this.destination.next(a),this.durationSelector){var l=void 0;try{l=this.durationSelector(new y0(r,o))}catch(u){this.error(u);return}this.add(l.subscribe(new AZ(r,o,this)))}}o.closed||o.next(s)},e.prototype._error=function(t){var r=this.groups;r&&(r.forEach(function(i,o){i.error(t)}),r.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(r,i){r.complete()}),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&n.prototype.unsubscribe.call(this))},e}(ht),AZ=function(n){je(e,n);function e(t,r,i){var o=n.call(this,r)||this;return o.key=t,o.group=r,o.parent=i,o}return e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this,r=t.parent,i=t.key;this.key=this.parent=null,r&&r.removeGroup(i)},e}(ht),y0=function(n){je(e,n);function e(t,r,i){var o=n.call(this)||this;return o.key=t,o.groupSubject=r,o.refCountSubscription=i,o}return e.prototype._subscribe=function(t){var r=new Sn,i=this,o=i.refCountSubscription,s=i.groupSubject;return o&&!o.closed&&r.add(new RZ(o)),r.add(s.subscribe(t)),r},e}(Rt),RZ=function(n){je(e,n);function e(t){var r=n.call(this)||this;return r.parent=t,t.count++,r}return e.prototype.unsubscribe=function(){var t=this.parent;!t.closed&&!this.closed&&(n.prototype.unsubscribe.call(this),t.count-=1,t.count===0&&t.attemptedToUnsubscribe&&t.unsubscribe())},e}(Sn),Q3=function(n){je(e,n);function e(t){var r=n.call(this)||this;return r._value=t,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(t){var r=n.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new No;return this._value},e.prototype.next=function(t){n.prototype.next.call(this,this._value=t)},e}(Zn),xZ=function(n){je(e,n);function e(t,r){return n.call(this)||this}return e.prototype.schedule=function(t,r){return this},e}(Sn),nc=function(n){je(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.scheduler=t,i.work=r,i.pending=!1,i}return e.prototype.schedule=function(t,r){if(r===void 0&&(r=0),this.closed)return this;this.state=t;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,r)),this.pending=!0,this.delay=r,this.id=this.id||this.requestAsyncId(o,this.id,r),this},e.prototype.requestAsyncId=function(t,r,i){return i===void 0&&(i=0),setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,r,i){if(i===void 0&&(i=0),i!==null&&this.delay===i&&this.pending===!1)return r;clearInterval(r)},e.prototype.execute=function(t,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,r){var i=!1,o=void 0;try{this.work(t)}catch(s){i=!0,o=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),o},e.prototype._unsubscribe=function(){var t=this.id,r=this.scheduler,i=r.actions,o=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,o!==-1&&i.splice(o,1),t!=null&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null},e}(xZ),NZ=function(n){je(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.scheduler=t,i.work=r,i}return e.prototype.schedule=function(t,r){return r===void 0&&(r=0),r>0?n.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},e.prototype.execute=function(t,r){return r>0||this.closed?n.prototype.execute.call(this,t,r):this._execute(t,r)},e.prototype.requestAsyncId=function(t,r,i){return i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0?n.prototype.requestAsyncId.call(this,t,r,i):t.flush(this)},e}(nc),_0=function(){function n(e,t){t===void 0&&(t=n.now),this.SchedulerAction=e,this.now=t}return n.prototype.schedule=function(e,t,r){return t===void 0&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},n.now=function(){return Date.now()},n}(),rc=function(n){je(e,n);function e(t,r){r===void 0&&(r=_0.now);var i=n.call(this,t,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return e.prototype.schedule=function(t,r,i){return r===void 0&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(t,r,i):n.prototype.schedule.call(this,t,r,i)},e.prototype.flush=function(t){var r=this.actions;if(this.active){r.push(t);return}var i;this.active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=r.shift());if(this.active=!1,i){for(;t=r.shift();)t.unsubscribe();throw i}},e}(_0),MZ=function(n){je(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(rc),Z3=new MZ(NZ),X3=Z3,Ga=new Rt(function(n){return n.complete()});function ll(n){return n?DZ(n):Ga}function DZ(n){return new Rt(function(e){return n.schedule(function(){return e.complete()})})}function Jr(n){return n&&typeof n.schedule=="function"}var $3=function(n){return function(e){for(var t=0,r=n.length;t<r&&!e.closed;t++)e.next(n[t]);e.complete()}};function my(n,e){return new Rt(function(t){var r=new Sn,i=0;return r.add(e.schedule(function(){if(i===n.length){t.complete();return}t.next(n[i++]),t.closed||r.add(this.schedule())})),r})}function ic(n,e){return e?my(n,e):new Rt($3(n))}function op(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n[n.length-1];return Jr(t)?(n.pop(),my(n,t)):ic(n)}function gy(n,e){return e?new Rt(function(t){return e.schedule(LZ,0,{error:n,subscriber:t})}):new Rt(function(t){return t.error(n)})}function LZ(n){var e=n.error,t=n.subscriber;t.error(e)}var b0;b0||(b0={});var co=function(){function n(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue=e==="N"}return n.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},n.prototype.do=function(e,t,r){var i=this.kind;switch(i){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},n.prototype.accept=function(e,t,r){return e&&typeof e.next=="function"?this.observe(e):this.do(e,t,r)},n.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return op(this.value);case"E":return gy(this.error);case"C":return ll()}throw new Error("unexpected notification kind value")},n.createNext=function(e){return typeof e<"u"?new n("N",e):n.undefinedValueNotification},n.createError=function(e){return new n("E",void 0,e)},n.createComplete=function(){return n.completeNotification},n.completeNotification=new n("C"),n.undefinedValueNotification=new n("N",void 0),n}();function jZ(n,e){return e===void 0&&(e=0),function(r){return r.lift(new BZ(n,e))}}var BZ=function(){function n(e,t){t===void 0&&(t=0),this.scheduler=e,this.delay=t}return n.prototype.call=function(e,t){return t.subscribe(new eI(e,this.scheduler,this.delay))},n}(),eI=function(n){je(e,n);function e(t,r,i){i===void 0&&(i=0);var o=n.call(this,t)||this;return o.scheduler=r,o.delay=i,o}return e.dispatch=function(t){var r=t.notification,i=t.destination;r.observe(i),this.unsubscribe()},e.prototype.scheduleMessage=function(t){var r=this.destination;r.add(this.scheduler.schedule(e.dispatch,this.delay,new FZ(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(co.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(co.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(co.createComplete()),this.unsubscribe()},e}(ht),FZ=function(){function n(e,t){this.notification=e,this.destination=t}return n}(),vy=function(n){je(e,n);function e(t,r,i){t===void 0&&(t=Number.POSITIVE_INFINITY),r===void 0&&(r=Number.POSITIVE_INFINITY);var o=n.call(this)||this;return o.scheduler=i,o._events=[],o._infiniteTimeWindow=!1,o._bufferSize=t<1?1:t,o._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(o._infiniteTimeWindow=!0,o.next=o.nextInfiniteTimeWindow):o.next=o.nextTimeWindow,o}return e.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var r=this._events;r.push(t),r.length>this._bufferSize&&r.shift()}n.prototype.next.call(this,t)},e.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new UZ(this._getNow(),t)),this._trimBufferThenGetEvents()),n.prototype.next.call(this,t)},e.prototype._subscribe=function(t){var r=this._infiniteTimeWindow,i=r?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,s=i.length,a;if(this.closed)throw new No;if(this.isStopped||this.hasError?a=Sn.EMPTY:(this.observers.push(t),a=new G3(this,t)),o&&t.add(t=new eI(t,o)),r)for(var l=0;l<s&&!t.closed;l++)t.next(i[l]);else for(var l=0;l<s&&!t.closed;l++)t.next(i[l].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),a},e.prototype._getNow=function(){return(this.scheduler||X3).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),r=this._bufferSize,i=this._windowTime,o=this._events,s=o.length,a=0;a<s&&!(t-o[a].time<i);)a++;return s>r&&(a=Math.max(a,s-r)),a>0&&o.splice(0,a),o},e}(Zn),UZ=function(){function n(e,t){this.time=e,this.value=t}return n}(),ul=function(n){je(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return e.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),Sn.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),Sn.EMPTY):n.prototype._subscribe.call(this,t)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(t){this.hasCompleted||n.prototype.error.call(this,t)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&n.prototype.next.call(this,this.value),n.prototype.complete.call(this)},e}(Zn),VZ=1,qZ=function(){return Promise.resolve()}(),w0={};function ME(n){return n in w0?(delete w0[n],!0):!1}var DE={setImmediate:function(n){var e=VZ++;return w0[e]=!0,qZ.then(function(){return ME(e)&&n()}),e},clearImmediate:function(n){ME(n)}},HZ=function(n){je(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.scheduler=t,i.work=r,i}return e.prototype.requestAsyncId=function(t,r,i){return i===void 0&&(i=0),i!==null&&i>0?n.prototype.requestAsyncId.call(this,t,r,i):(t.actions.push(this),t.scheduled||(t.scheduled=DE.setImmediate(t.flush.bind(t,null))))},e.prototype.recycleAsyncId=function(t,r,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return n.prototype.recycleAsyncId.call(this,t,r,i);t.actions.length===0&&(DE.clearImmediate(r),t.scheduled=void 0)},e}(nc),zZ=function(n){je(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var r=this.actions,i,o=-1,s=r.length;t=t||r.shift();do if(i=t.execute(t.state,t.delay))break;while(++o<s&&(t=r.shift()));if(this.active=!1,i){for(;++o<s&&(t=r.shift());)t.unsubscribe();throw i}},e}(rc),tI=new zZ(HZ),rh=tI,nI=new rc(nc),wr=nI,WZ=function(n){je(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.scheduler=t,i.work=r,i}return e.prototype.requestAsyncId=function(t,r,i){return i===void 0&&(i=0),i!==null&&i>0?n.prototype.requestAsyncId.call(this,t,r,i):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(function(){return t.flush(null)})))},e.prototype.recycleAsyncId=function(t,r,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return n.prototype.recycleAsyncId.call(this,t,r,i);t.actions.length===0&&(cancelAnimationFrame(r),t.scheduled=void 0)},e}(nc),KZ=function(n){je(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var r=this.actions,i,o=-1,s=r.length;t=t||r.shift();do if(i=t.execute(t.state,t.delay))break;while(++o<s&&(t=r.shift()));if(this.active=!1,i){for(;++o<s&&(t=r.shift());)t.unsubscribe();throw i}},e}(rc),rI=new KZ(WZ),GZ=rI,JZ=function(n){je(e,n);function e(t,r){t===void 0&&(t=iI),r===void 0&&(r=Number.POSITIVE_INFINITY);var i=n.call(this,t,function(){return i.frame})||this;return i.maxFrames=r,i.frame=0,i.index=-1,i}return e.prototype.flush=function(){for(var t=this,r=t.actions,i=t.maxFrames,o,s;(s=r[0])&&s.delay<=i&&(r.shift(),this.frame=s.delay,!(o=s.execute(s.state,s.delay))););if(o){for(;s=r.shift();)s.unsubscribe();throw o}},e.frameTimeFactor=10,e}(rc),iI=function(n){je(e,n);function e(t,r,i){i===void 0&&(i=t.index+=1);var o=n.call(this,t,r)||this;return o.scheduler=t,o.work=r,o.index=i,o.active=!0,o.index=t.index=i,o}return e.prototype.schedule=function(t,r){if(r===void 0&&(r=0),!this.id)return n.prototype.schedule.call(this,t,r);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(t,r)},e.prototype.requestAsyncId=function(t,r,i){i===void 0&&(i=0),this.delay=t.frame+i;var o=t.actions;return o.push(this),o.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,r,i){},e.prototype._execute=function(t,r){if(this.active===!0)return n.prototype._execute.call(this,t,r)},e.sortActions=function(t,r){return t.delay===r.delay?t.index===r.index?0:t.index>r.index?1:-1:t.delay>r.delay?1:-1},e}(nc);function Li(){}function YZ(n){return!!n&&(n instanceof Rt||typeof n.lift=="function"&&typeof n.subscribe=="function")}var QZ=function(){function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n}(),Ja=QZ,ZZ=function(){function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n}(),oc=ZZ,XZ=function(){function n(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return n.prototype=Object.create(Error.prototype),n}(),oI=XZ;function fi(n,e){return function(r){if(typeof n!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new $Z(n,e))}}var $Z=function(){function n(e,t){this.project=e,this.thisArg=t}return n.prototype.call=function(e,t){return t.subscribe(new eX(e,this.project,this.thisArg))},n}(),eX=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.project=r,o.count=0,o.thisArg=i||o,o}return e.prototype._next=function(t){var r;try{r=this.project.call(this.thisArg,t,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(r)},e}(ht);function sI(n,e,t){if(e)if(Jr(e))t=e;else return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return sI(n,t).apply(void 0,r).pipe(fi(function(o){return br(o)?e.apply(void 0,o):e(o)}))};return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=this,s,a={context:o,subject:s,callbackFunc:n,scheduler:t};return new Rt(function(l){if(t){var c={args:r,subscriber:l,params:a};return t.schedule(tX,0,c)}else{if(!s){s=new ul;var u=function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];s.next(f.length<=1?f[0]:f),s.complete()};try{n.apply(o,r.concat([u]))}catch(f){dy(s)?s.error(f):console.warn(f)}}return s.subscribe(l)}})}}function tX(n){var e=this,t=n.args,r=n.subscriber,i=n.params,o=i.callbackFunc,s=i.context,a=i.scheduler,l=i.subject;if(!l){l=i.subject=new ul;var u=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var d=c.length<=1?c[0]:c;e.add(a.schedule(nX,0,{value:d,subject:l}))};try{o.apply(s,t.concat([u]))}catch(c){l.error(c)}}this.add(l.subscribe(r))}function nX(n){var e=n.value,t=n.subject;t.next(e),t.complete()}function aI(n,e,t){if(e)if(Jr(e))t=e;else return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return aI(n,t).apply(void 0,r).pipe(fi(function(o){return br(o)?e.apply(void 0,o):e(o)}))};return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o={subject:void 0,args:r,callbackFunc:n,scheduler:t,context:this};return new Rt(function(s){var a=o.context,l=o.subject;if(t)return t.schedule(rX,0,{params:o,subscriber:s,context:a});if(!l){l=o.subject=new ul;var u=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var d=c.shift();if(d){l.error(d);return}l.next(c.length<=1?c[0]:c),l.complete()};try{n.apply(a,r.concat([u]))}catch(c){dy(l)?l.error(c):console.warn(c)}}return l.subscribe(s)})}}function rX(n){var e=this,t=n.params,r=n.subscriber,i=n.context,o=t.callbackFunc,s=t.args,a=t.scheduler,l=t.subject;if(!l){l=t.subject=new ul;var u=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var d=c.shift();if(d)e.add(a.schedule(LE,0,{err:d,subject:l}));else{var g=c.length<=1?c[0]:c;e.add(a.schedule(iX,0,{value:g,subject:l}))}};try{o.apply(i,s.concat([u]))}catch(c){this.add(a.schedule(LE,0,{err:c,subject:l}))}}this.add(l.subscribe(r))}function iX(n){var e=n.value,t=n.subject;t.next(e),t.complete()}function LE(n){var e=n.err,t=n.subject;t.error(e)}var Xs=function(n){je(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.notifyNext=function(t,r,i,o,s){this.destination.next(r)},e.prototype.notifyError=function(t,r){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(ht),oX=function(n){je(e,n);function e(t,r,i){var o=n.call(this)||this;return o.parent=t,o.outerValue=r,o.outerIndex=i,o.index=0,o}return e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(ht),sX=function(n){return function(e){return n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,ga),e}};function aX(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ts=aX(),lX=function(n){return function(e){var t=n[ts]();do{var r=void 0;try{r=t.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}while(!0);return typeof t.return=="function"&&e.add(function(){t.return&&t.return()}),e}},uX=function(n){return function(e){var t=n[al]();if(typeof t.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)}},lI=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function uI(n){return!!n&&typeof n.subscribe!="function"&&typeof n.then=="function"}var Iu=function(n){if(!!n&&typeof n[al]=="function")return uX(n);if(lI(n))return $3(n);if(uI(n))return sX(n);if(!!n&&typeof n[ts]=="function")return lX(n);var e=hy(n)?"an invalid object":"'"+n+"'",t="You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(t)};function go(n,e,t,r,i){if(i===void 0&&(i=new oX(n,t,r)),!i.closed)return e instanceof Rt?e.subscribe(i):Iu(e)(i)}var jE={};function cX(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=void 0,r=void 0;return Jr(n[n.length-1])&&(r=n.pop()),typeof n[n.length-1]=="function"&&(t=n.pop()),n.length===1&&br(n[0])&&(n=n[0]),ic(n,r).lift(new yy(t))}var yy=function(){function n(e){this.resultSelector=e}return n.prototype.call=function(e,t){return t.subscribe(new fX(e,this.resultSelector))},n}(),fX=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return e.prototype._next=function(t){this.values.push(jE),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,r=t.length;if(r===0)this.destination.complete();else{this.active=r,this.toRespond=r;for(var i=0;i<r;i++){var o=t[i];this.add(go(this,o,void 0,i))}}},e.prototype.notifyComplete=function(t){(this.active-=1)===0&&this.destination.complete()},e.prototype.notifyNext=function(t,r,i){var o=this.values,s=o[i],a=this.toRespond?s===jE?--this.toRespond:this.toRespond:0;o[i]=r,a===0&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var r;try{r=this.resultSelector.apply(this,t)}catch(i){this.destination.error(i);return}this.destination.next(r)},e}(Xs);function hX(n,e){return new Rt(function(t){var r=new Sn;return r.add(e.schedule(function(){var i=n[al]();r.add(i.subscribe({next:function(o){r.add(e.schedule(function(){return t.next(o)}))},error:function(o){r.add(e.schedule(function(){return t.error(o)}))},complete:function(){r.add(e.schedule(function(){return t.complete()}))}}))})),r})}function dX(n,e){return new Rt(function(t){var r=new Sn;return r.add(e.schedule(function(){return n.then(function(i){r.add(e.schedule(function(){t.next(i),r.add(e.schedule(function(){return t.complete()}))}))},function(i){r.add(e.schedule(function(){return t.error(i)}))})})),r})}function pX(n,e){if(!n)throw new Error("Iterable cannot be null");return new Rt(function(t){var r=new Sn,i;return r.add(function(){i&&typeof i.return=="function"&&i.return()}),r.add(e.schedule(function(){i=n[ts](),r.add(e.schedule(function(){if(!t.closed){var o,s;try{var a=i.next();o=a.value,s=a.done}catch(l){t.error(l);return}s?t.complete():(t.next(o),this.schedule())}}))})),r})}function mX(n){return n&&typeof n[al]=="function"}function gX(n){return n&&typeof n[ts]=="function"}function cI(n,e){if(n!=null){if(mX(n))return hX(n,e);if(uI(n))return dX(n,e);if(lI(n))return my(n,e);if(gX(n)||typeof n=="string")return pX(n,e)}throw new TypeError((n!==null&&typeof n||n)+" is not observable")}function _o(n,e){return e?cI(n,e):n instanceof Rt?n:new Rt(Iu(n))}var En=function(n){je(e,n);function e(t){var r=n.call(this)||this;return r.parent=t,r}return e.prototype._next=function(t){this.parent.notifyNext(t)},e.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(ht),Cn=function(n){je(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(ht);function kn(n,e){if(!e.closed){if(n instanceof Rt)return n.subscribe(e);var t;try{t=Iu(n)(e)}catch(r){e.error(r)}return t}}function qs(n,e,t){return t===void 0&&(t=Number.POSITIVE_INFINITY),typeof e=="function"?function(r){return r.pipe(qs(function(i,o){return _o(n(i,o)).pipe(fi(function(s,a){return e(i,s,o,a)}))},t))}:(typeof e=="number"&&(t=e),function(r){return r.lift(new vX(n,t))})}var vX=function(){function n(e,t){t===void 0&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return n.prototype.call=function(e,t){return t.subscribe(new yX(e,this.project,this.concurrent))},n}(),yX=function(n){je(e,n);function e(t,r,i){i===void 0&&(i=Number.POSITIVE_INFINITY);var o=n.call(this,t)||this;return o.project=r,o.concurrent=i,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var r,i=this.index++;try{r=this.project(t,i)}catch(o){this.destination.error(o);return}this.active++,this._innerSub(r)},e.prototype._innerSub=function(t){var r=new En(this),i=this.destination;i.add(r);var o=kn(t,r);o!==r&&i.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},e}(Cn),_X=qs;function _y(n){return n===void 0&&(n=Number.POSITIVE_INFINITY),qs(es,n)}function fI(){return _y(1)}function Au(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return fI()(op.apply(void 0,n))}function by(n){return new Rt(function(e){var t;try{t=n()}catch(i){e.error(i);return}var r=t?_o(t):ll();return r.subscribe(e)})}function bX(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(n.length===1){var t=n[0];if(br(t))return nf(t,null);if(hy(t)&&Object.getPrototypeOf(t)===Object.prototype){var r=Object.keys(t);return nf(r.map(function(o){return t[o]}),r)}}if(typeof n[n.length-1]=="function"){var i=n.pop();return n=n.length===1&&br(n[0])?n[0]:n,nf(n,null).pipe(fi(function(o){return i.apply(void 0,o)}))}return nf(n,null)}function nf(n,e){return new Rt(function(t){var r=n.length;if(r===0){t.complete();return}for(var i=new Array(r),o=0,s=0,a=function(u){var c=_o(n[u]),f=!1;t.add(c.subscribe({next:function(d){f||(f=!0,s++),i[u]=d},error:function(d){return t.error(d)},complete:function(){o++,(o===r||!f)&&(s===r&&t.next(e?e.reduce(function(d,g,h){return d[g]=i[h],d},{}):i),t.complete())}}))},l=0;l<r;l++)a(l)})}function hI(n,e,t,r){return Ka(t)&&(r=t,t=void 0),r?hI(n,e,t).pipe(fi(function(i){return br(i)?r.apply(void 0,i):r(i)})):new Rt(function(i){function o(s){arguments.length>1?i.next(Array.prototype.slice.call(arguments)):i.next(s)}dI(n,e,o,i,t)})}function dI(n,e,t,r,i){var o;if(EX(n)){var s=n;n.addEventListener(e,t,i),o=function(){return s.removeEventListener(e,t,i)}}else if(SX(n)){var a=n;n.on(e,t),o=function(){return a.off(e,t)}}else if(wX(n)){var l=n;n.addListener(e,t),o=function(){return l.removeListener(e,t)}}else if(n&&n.length)for(var u=0,c=n.length;u<c;u++)dI(n[u],e,t,r,i);else throw new TypeError("Invalid event target");r.add(o)}function wX(n){return n&&typeof n.addListener=="function"&&typeof n.removeListener=="function"}function SX(n){return n&&typeof n.on=="function"&&typeof n.off=="function"}function EX(n){return n&&typeof n.addEventListener=="function"&&typeof n.removeEventListener=="function"}function pI(n,e,t){return t?pI(n,e).pipe(fi(function(r){return br(r)?t.apply(void 0,r):t(r)})):new Rt(function(r){var i=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return r.next(s.length===1?s[0]:s)},o;try{o=n(i)}catch(s){r.error(s);return}if(!!Ka(e))return function(){return e(i,o)}})}function CX(n,e,t,r,i){var o,s;if(arguments.length==1){var a=n;s=a.initialState,e=a.condition,t=a.iterate,o=a.resultSelector||es,i=a.scheduler}else r===void 0||Jr(r)?(s=n,o=es,i=r):(s=n,o=r);return new Rt(function(l){var u=s;if(i)return i.schedule(kX,0,{subscriber:l,iterate:t,condition:e,resultSelector:o,state:u});do{if(e){var c=void 0;try{c=e(u)}catch(d){l.error(d);return}if(!c){l.complete();break}}var f=void 0;try{f=o(u)}catch(d){l.error(d);return}if(l.next(f),l.closed)break;try{u=t(u)}catch(d){l.error(d);return}}while(!0)})}function kX(n){var e=n.subscriber,t=n.condition;if(!e.closed){if(n.needIterate)try{n.state=n.iterate(n.state)}catch(o){e.error(o);return}else n.needIterate=!0;if(t){var r=void 0;try{r=t(n.state)}catch(o){e.error(o);return}if(!r){e.complete();return}if(e.closed)return}var i;try{i=n.resultSelector(n.state)}catch(o){e.error(o);return}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(n)}}function OX(n,e,t){return e===void 0&&(e=Ga),t===void 0&&(t=Ga),by(function(){return n()?e:t})}function Ya(n){return!br(n)&&n-parseFloat(n)+1>=0}function TX(n,e){return n===void 0&&(n=0),e===void 0&&(e=wr),(!Ya(n)||n<0)&&(n=0),(!e||typeof e.schedule!="function")&&(e=wr),new Rt(function(t){return t.add(e.schedule(PX,n,{subscriber:t,counter:0,period:n})),t})}function PX(n){var e=n.subscriber,t=n.counter,r=n.period;e.next(t),this.schedule({subscriber:e,counter:t+1,period:r},r)}function mI(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=Number.POSITIVE_INFINITY,r=null,i=n[n.length-1];return Jr(i)?(r=n.pop(),n.length>1&&typeof n[n.length-1]=="number"&&(t=n.pop())):typeof i=="number"&&(t=n.pop()),r===null&&n.length===1&&n[0]instanceof Rt?n[0]:_y(t)(ic(n,r))}var gI=new Rt(Li);function IX(){return gI}function S0(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(n.length===0)return Ga;var t=n[0],r=n.slice(1);return n.length===1&&br(t)?S0.apply(void 0,t):new Rt(function(i){var o=function(){return i.add(S0.apply(void 0,r).subscribe(i))};return _o(t).subscribe({next:function(s){i.next(s)},error:o,complete:o})})}function AX(n,e){return e?new Rt(function(t){var r=Object.keys(n),i=new Sn;return i.add(e.schedule(RX,0,{keys:r,index:0,subscriber:t,subscription:i,obj:n})),i}):new Rt(function(t){for(var r=Object.keys(n),i=0;i<r.length&&!t.closed;i++){var o=r[i];n.hasOwnProperty(o)&&t.next([o,n[o]])}t.complete()})}function RX(n){var e=n.keys,t=n.index,r=n.subscriber,i=n.subscription,o=n.obj;if(!r.closed)if(t<e.length){var s=e[t];r.next([s,o[s]]),i.add(this.schedule({keys:e,index:t+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}function vI(n,e){function t(){return!t.pred.apply(t.thisArg,arguments)}return t.pred=n,t.thisArg=e,t}function ns(n,e){return function(r){return r.lift(new xX(n,e))}}var xX=function(){function n(e,t){this.predicate=e,this.thisArg=t}return n.prototype.call=function(e,t){return t.subscribe(new NX(e,this.predicate,this.thisArg))},n}(),NX=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.predicate=r,o.thisArg=i,o.count=0,o}return e.prototype._next=function(t){var r;try{r=this.predicate.call(this.thisArg,t,this.count++)}catch(i){this.destination.error(i);return}r&&this.destination.next(t)},e}(ht);function MX(n,e,t){return[ns(e,t)(new Rt(Iu(n))),ns(vI(e,t))(new Rt(Iu(n)))]}function yI(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(n.length===1)if(br(n[0]))n=n[0];else return n[0];return ic(n,void 0).lift(new DX)}var DX=function(){function n(){}return n.prototype.call=function(e,t){return t.subscribe(new LX(e))},n}(),LX=function(n){je(e,n);function e(t){var r=n.call(this,t)||this;return r.hasFirst=!1,r.observables=[],r.subscriptions=[],r}return e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,r=t.length;if(r===0)this.destination.complete();else{for(var i=0;i<r&&!this.hasFirst;i++){var o=t[i],s=go(this,o,void 0,i);this.subscriptions&&this.subscriptions.push(s),this.add(s)}this.observables=null}},e.prototype.notifyNext=function(t,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==i){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(r)},e}(Xs);function jX(n,e,t){return n===void 0&&(n=0),new Rt(function(r){e===void 0&&(e=n,n=0);var i=0,o=n;if(t)return t.schedule(BX,0,{index:i,count:e,start:n,subscriber:r});do{if(i++>=e){r.complete();break}if(r.next(o++),r.closed)break}while(!0)})}function BX(n){var e=n.start,t=n.index,r=n.count,i=n.subscriber;if(t>=r){i.complete();return}i.next(e),!i.closed&&(n.index=t+1,n.start=e+1,this.schedule(n))}function _I(n,e,t){n===void 0&&(n=0);var r=-1;return Ya(e)?r=Number(e)<1&&1||Number(e):Jr(e)&&(t=e),Jr(t)||(t=wr),new Rt(function(i){var o=Ya(n)?n:+n-t.now();return t.schedule(FX,o,{index:0,period:r,subscriber:i})})}function FX(n){var e=n.index,t=n.period,r=n.subscriber;if(r.next(e),!r.closed){if(t===-1)return r.complete();n.index=e+1,this.schedule(n,t)}}function UX(n,e){return new Rt(function(t){var r;try{r=n()}catch(a){t.error(a);return}var i;try{i=e(r)}catch(a){t.error(a);return}var o=i?_o(i):Ga,s=o.subscribe(t);return function(){s.unsubscribe(),r&&r.unsubscribe()}})}function bI(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n[n.length-1];return typeof t=="function"&&n.pop(),ic(n,void 0).lift(new wI(t))}var wI=function(){function n(e){this.resultSelector=e}return n.prototype.call=function(e,t){return t.subscribe(new VX(e,this.resultSelector))},n}(),VX=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.resultSelector=r,o.iterators=[],o.active=0,o.resultSelector=typeof r=="function"?r:void 0,o}return e.prototype._next=function(t){var r=this.iterators;br(t)?r.push(new HX(t)):typeof t[ts]=="function"?r.push(new qX(t[ts]())):r.push(new zX(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,r=t.length;if(this.unsubscribe(),r===0){this.destination.complete();return}this.active=r;for(var i=0;i<r;i++){var o=t[i];if(o.stillUnsubscribed){var s=this.destination;s.add(o.subscribe())}else this.active--}},e.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,r=t.length,i=this.destination,o=0;o<r;o++){var s=t[o];if(typeof s.hasValue=="function"&&!s.hasValue())return}for(var a=!1,l=[],o=0;o<r;o++){var s=t[o],u=s.next();if(s.hasCompleted()&&(a=!0),u.done){i.complete();return}l.push(u.value)}this.resultSelector?this._tryresultSelector(l):i.next(l),a&&i.complete()},e.prototype._tryresultSelector=function(t){var r;try{r=this.resultSelector.apply(this,t)}catch(i){this.destination.error(i);return}this.destination.next(r)},e}(ht),qX=function(){function n(e){this.iterator=e,this.nextResult=e.next()}return n.prototype.hasValue=function(){return!0},n.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},n.prototype.hasCompleted=function(){var e=this.nextResult;return Boolean(e&&e.done)},n}(),HX=function(){function n(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return n.prototype[ts]=function(){return this},n.prototype.next=function(e){var t=this.index++,r=this.array;return t<this.length?{value:r[t],done:!1}:{value:null,done:!0}},n.prototype.hasValue=function(){return this.array.length>this.index},n.prototype.hasCompleted=function(){return this.array.length===this.index},n}(),zX=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.parent=r,o.observable=i,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return e.prototype[ts]=function(){return this},e.prototype.next=function(){var t=this.buffer;return t.length===0&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t){this.buffer.push(t),this.parent.checkIterators()},e.prototype.subscribe=function(){return kn(this.observable,new En(this))},e}(Cn);const WX=Object.freeze(Object.defineProperty({__proto__:null,Observable:Rt,ConnectableObservable:Y3,GroupedObservable:y0,observable:al,Subject:Zn,BehaviorSubject:Q3,ReplaySubject:vy,AsyncSubject:ul,asap:rh,asapScheduler:tI,async:wr,asyncScheduler:nI,queue:X3,queueScheduler:Z3,animationFrame:GZ,animationFrameScheduler:rI,VirtualTimeScheduler:JZ,VirtualAction:iI,Scheduler:_0,Subscription:Sn,Subscriber:ht,Notification:co,get NotificationKind(){return b0},pipe:v0,noop:Li,identity:es,isObservable:YZ,ArgumentOutOfRangeError:Ja,EmptyError:oc,ObjectUnsubscribedError:No,UnsubscriptionError:tu,TimeoutError:oI,bindCallback:sI,bindNodeCallback:aI,combineLatest:cX,concat:Au,defer:by,empty:ll,forkJoin:bX,from:_o,fromEvent:hI,fromEventPattern:pI,generate:CX,iif:OX,interval:TX,merge:mI,never:IX,of:op,onErrorResumeNext:S0,pairs:AX,partition:MX,race:yI,range:jX,throwError:gy,timer:_I,using:UX,zip:bI,scheduled:cI,EMPTY:Ga,NEVER:gI,config:oi},Symbol.toStringTag,{value:"Module"})),sp=Mk(WX);function SI(n){return function(t){return t.lift(new KX(n))}}var KX=function(){function n(e){this.durationSelector=e}return n.prototype.call=function(e,t){return t.subscribe(new GX(e,this.durationSelector))},n}(),GX=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.durationSelector=r,i.hasValue=!1,i}return e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var r=void 0;try{var i=this.durationSelector;r=i(t)}catch(s){return this.destination.error(s)}var o=kn(r,new En(this));!o||o.closed?this.clearThrottle():this.add(this.throttled=o)}},e.prototype.clearThrottle=function(){var t=this,r=t.value,i=t.hasValue,o=t.throttled;o&&(this.remove(o),this.throttled=void 0,o.unsubscribe()),i&&(this.value=void 0,this.hasValue=!1,this.destination.next(r))},e.prototype.notifyNext=function(){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(Cn);function JX(n,e){return e===void 0&&(e=wr),SI(function(){return _I(n,e)})}function YX(n){return function(t){return t.lift(new QX(n))}}var QX=function(){function n(e){this.closingNotifier=e}return n.prototype.call=function(e,t){return t.subscribe(new ZX(e,this.closingNotifier))},n}(),ZX=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.buffer=[],i.add(kn(r,new En(i))),i}return e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(){var t=this.buffer;this.buffer=[],this.destination.next(t)},e}(Cn);function XX(n,e){return e===void 0&&(e=null),function(r){return r.lift(new $X(n,e))}}var $X=function(){function n(e,t){this.bufferSize=e,this.startBufferEvery=t,!t||e===t?this.subscriberClass=e$:this.subscriberClass=t$}return n.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},n}(),e$=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.bufferSize=r,i.buffer=[],i}return e.prototype._next=function(t){var r=this.buffer;r.push(t),r.length==this.bufferSize&&(this.destination.next(r),this.buffer=[])},e.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),n.prototype._complete.call(this)},e}(ht),t$=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.bufferSize=r,o.startBufferEvery=i,o.buffers=[],o.count=0,o}return e.prototype._next=function(t){var r=this,i=r.bufferSize,o=r.startBufferEvery,s=r.buffers,a=r.count;this.count++,a%o===0&&s.push([]);for(var l=s.length;l--;){var u=s[l];u.push(t),u.length===i&&(s.splice(l,1),this.destination.next(u))}},e.prototype._complete=function(){for(var t=this,r=t.buffers,i=t.destination;r.length>0;){var o=r.shift();o.length>0&&i.next(o)}n.prototype._complete.call(this)},e}(ht);function n$(n){var e=arguments.length,t=wr;Jr(arguments[arguments.length-1])&&(t=arguments[arguments.length-1],e--);var r=null;e>=2&&(r=arguments[1]);var i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),function(s){return s.lift(new r$(n,r,i,t))}}var r$=function(){function n(e,t,r,i){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=r,this.scheduler=i}return n.prototype.call=function(e,t){return t.subscribe(new o$(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},n}(),i$=function(){function n(){this.buffer=[]}return n}(),o$=function(n){je(e,n);function e(t,r,i,o,s){var a=n.call(this,t)||this;a.bufferTimeSpan=r,a.bufferCreationInterval=i,a.maxBufferSize=o,a.scheduler=s,a.contexts=[];var l=a.openContext();if(a.timespanOnly=i==null||i<0,a.timespanOnly){var u={subscriber:a,context:l,bufferTimeSpan:r};a.add(l.closeAction=s.schedule(BE,r,u))}else{var c={subscriber:a,context:l},f={bufferTimeSpan:r,bufferCreationInterval:i,subscriber:a,scheduler:s};a.add(l.closeAction=s.schedule(EI,r,c)),a.add(s.schedule(s$,i,f))}return a}return e.prototype._next=function(t){for(var r=this.contexts,i=r.length,o,s=0;s<i;s++){var a=r[s],l=a.buffer;l.push(t),l.length==this.maxBufferSize&&(o=a)}o&&this.onBufferFull(o)},e.prototype._error=function(t){this.contexts.length=0,n.prototype._error.call(this,t)},e.prototype._complete=function(){for(var t=this,r=t.contexts,i=t.destination;r.length>0;){var o=r.shift();i.next(o.buffer)}n.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var r=t.closeAction;if(r.unsubscribe(),this.remove(r),!this.closed&&this.timespanOnly){t=this.openContext();var i=this.bufferTimeSpan,o={subscriber:this,context:t,bufferTimeSpan:i};this.add(t.closeAction=this.scheduler.schedule(BE,i,o))}},e.prototype.openContext=function(){var t=new i$;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var r=this.contexts,i=r?r.indexOf(t):-1;i>=0&&r.splice(r.indexOf(t),1)},e}(ht);function BE(n){var e=n.subscriber,t=n.context;t&&e.closeContext(t),e.closed||(n.context=e.openContext(),n.context.closeAction=this.schedule(n,n.bufferTimeSpan))}function s$(n){var e=n.bufferCreationInterval,t=n.bufferTimeSpan,r=n.subscriber,i=n.scheduler,o=r.openContext(),s=this;r.closed||(r.add(o.closeAction=i.schedule(EI,t,{subscriber:r,context:o})),s.schedule(n,e))}function EI(n){var e=n.subscriber,t=n.context;e.closeContext(t)}function a$(n,e){return function(r){return r.lift(new l$(n,e))}}var l$=function(){function n(e,t){this.openings=e,this.closingSelector=t}return n.prototype.call=function(e,t){return t.subscribe(new u$(e,this.openings,this.closingSelector))},n}(),u$=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.closingSelector=i,o.contexts=[],o.add(go(o,r)),o}return e.prototype._next=function(t){for(var r=this.contexts,i=r.length,o=0;o<i;o++)r[o].buffer.push(t)},e.prototype._error=function(t){for(var r=this.contexts;r.length>0;){var i=r.shift();i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,n.prototype._error.call(this,t)},e.prototype._complete=function(){for(var t=this.contexts;t.length>0;){var r=t.shift();this.destination.next(r.buffer),r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,n.prototype._complete.call(this)},e.prototype.notifyNext=function(t,r){t?this.closeBuffer(t):this.openBuffer(r)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var r=this.closingSelector,i=r.call(this,t);i&&this.trySubscribe(i)}catch(o){this._error(o)}},e.prototype.closeBuffer=function(t){var r=this.contexts;if(r&&t){var i=t.buffer,o=t.subscription;this.destination.next(i),r.splice(r.indexOf(t),1),this.remove(o),o.unsubscribe()}},e.prototype.trySubscribe=function(t){var r=this.contexts,i=[],o=new Sn,s={buffer:i,subscription:o};r.push(s);var a=go(this,t,s);!a||a.closed?this.closeBuffer(s):(a.context=s,this.add(a),o.add(a))},e}(Xs);function c$(n){return function(e){return e.lift(new f$(n))}}var f$=function(){function n(e){this.closingSelector=e}return n.prototype.call=function(e,t){return t.subscribe(new h$(e,this.closingSelector))},n}(),h$=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.closingSelector=r,i.subscribing=!1,i.openBuffer(),i}return e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),n.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},e.prototype.notifyNext=function(){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var r=this.buffer;this.buffer&&this.destination.next(r),this.buffer=[];var i;try{var o=this.closingSelector;i=o()}catch(s){return this.error(s)}t=new Sn,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(kn(i,new En(this))),this.subscribing=!1},e}(Cn);function d$(n){return function(t){var r=new p$(n),i=t.lift(r);return r.caught=i}}var p$=function(){function n(e){this.selector=e}return n.prototype.call=function(e,t){return t.subscribe(new m$(e,this.selector,this.caught))},n}(),m$=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.selector=r,o.caught=i,o}return e.prototype.error=function(t){if(!this.isStopped){var r=void 0;try{r=this.selector(t,this.caught)}catch(s){n.prototype.error.call(this,s);return}this._unsubscribeAndRecycle();var i=new En(this);this.add(i);var o=kn(r,i);o!==i&&this.add(o)}},e}(Cn);function g$(n){return function(e){return e.lift(new yy(n))}}function v$(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=null;return typeof n[n.length-1]=="function"&&(t=n.pop()),n.length===1&&br(n[0])&&(n=n[0].slice()),function(r){return r.lift.call(_o([r].concat(n)),new yy(t))}}function y$(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(t){return t.lift.call(Au.apply(void 0,[t].concat(n)))}}function CI(n,e){return qs(n,e,1)}function _$(n,e){return CI(function(){return n},e)}function b$(n){return function(e){return e.lift(new w$(n,e))}}var w$=function(){function n(e,t){this.predicate=e,this.source=t}return n.prototype.call=function(e,t){return t.subscribe(new S$(e,this.predicate,this.source))},n}(),S$=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.predicate=r,o.source=i,o.count=0,o.index=0,o}return e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var r;try{r=this.predicate(t,this.index++,this.source)}catch(i){this.destination.error(i);return}r&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(ht);function E$(n){return function(e){return e.lift(new C$(n))}}var C$=function(){function n(e){this.durationSelector=e}return n.prototype.call=function(e,t){return t.subscribe(new k$(e,this.durationSelector))},n}(),k$=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.durationSelector=r,i.hasValue=!1,i}return e.prototype._next=function(t){try{var r=this.durationSelector.call(this,t);r&&this._tryNext(t,r)}catch(i){this.destination.error(i)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,r){var i=this.durationSubscription;this.value=t,this.hasValue=!0,i&&(i.unsubscribe(),this.remove(i)),i=kn(r,new En(this)),i&&!i.closed&&this.add(this.durationSubscription=i)},e.prototype.notifyNext=function(){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var t=this.value,r=this.durationSubscription;r&&(this.durationSubscription=void 0,r.unsubscribe(),this.remove(r)),this.value=void 0,this.hasValue=!1,n.prototype._next.call(this,t)}},e}(Cn);function O$(n,e){return e===void 0&&(e=wr),function(t){return t.lift(new T$(n,e))}}var T$=function(){function n(e,t){this.dueTime=e,this.scheduler=t}return n.prototype.call=function(e,t){return t.subscribe(new P$(e,this.dueTime,this.scheduler))},n}(),P$=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.dueTime=r,o.scheduler=i,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(I$,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;t!==null&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(ht);function I$(n){n.debouncedNext()}function sc(n){return n===void 0&&(n=null),function(e){return e.lift(new A$(n))}}var A$=function(){function n(e){this.defaultValue=e}return n.prototype.call=function(e,t){return t.subscribe(new R$(e,this.defaultValue))},n}(),R$=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.defaultValue=r,i.isEmpty=!0,i}return e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(ht);function kI(n){return n instanceof Date&&!isNaN(+n)}function x$(n,e){e===void 0&&(e=wr);var t=kI(n),r=t?+n-e.now():Math.abs(n);return function(i){return i.lift(new N$(r,e))}}var N$=function(){function n(e,t){this.delay=e,this.scheduler=t}return n.prototype.call=function(e,t){return t.subscribe(new M$(e,this.delay,this.scheduler))},n}(),M$=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.delay=r,o.scheduler=i,o.queue=[],o.active=!1,o.errored=!1,o}return e.dispatch=function(t){for(var r=t.source,i=r.queue,o=t.scheduler,s=t.destination;i.length>0&&i[0].time-o.now()<=0;)i.shift().notification.observe(s);if(i.length>0){var a=Math.max(0,i[0].time-o.now());this.schedule(t,a)}else this.unsubscribe(),r.active=!1},e.prototype._schedule=function(t){this.active=!0;var r=this.destination;r.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(this.errored!==!0){var r=this.scheduler,i=new D$(r.now()+this.delay,t);this.queue.push(i),this.active===!1&&this._schedule(r)}},e.prototype._next=function(t){this.scheduleNotification(co.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(co.createComplete()),this.unsubscribe()},e}(ht),D$=function(){function n(e,t){this.time=e,this.notification=t}return n}();function L$(n,e){return e?function(t){return new B$(t,e).lift(new FE(n))}:function(t){return t.lift(new FE(n))}}var FE=function(){function n(e){this.delayDurationSelector=e}return n.prototype.call=function(e,t){return t.subscribe(new j$(e,this.delayDurationSelector))},n}(),j$=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.delayDurationSelector=r,i.completed=!1,i.delayNotifierSubscriptions=[],i.index=0,i}return e.prototype.notifyNext=function(t,r,i,o,s){this.destination.next(t),this.removeSubscription(s),this.tryComplete()},e.prototype.notifyError=function(t,r){this._error(t)},e.prototype.notifyComplete=function(t){var r=this.removeSubscription(t);r&&this.destination.next(r),this.tryComplete()},e.prototype._next=function(t){var r=this.index++;try{var i=this.delayDurationSelector(t,r);i&&this.tryDelay(i,t)}catch(o){this.destination.error(o)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},e.prototype.removeSubscription=function(t){t.unsubscribe();var r=this.delayNotifierSubscriptions.indexOf(t);return r!==-1&&this.delayNotifierSubscriptions.splice(r,1),t.outerValue},e.prototype.tryDelay=function(t,r){var i=go(this,t,r);if(i&&!i.closed){var o=this.destination;o.add(i),this.delayNotifierSubscriptions.push(i)}},e.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()},e}(Xs),B$=function(n){je(e,n);function e(t,r){var i=n.call(this)||this;return i.source=t,i.subscriptionDelay=r,i}return e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new F$(t,this.source))},e}(Rt),F$=function(n){je(e,n);function e(t,r){var i=n.call(this)||this;return i.parent=t,i.source=r,i.sourceSubscribed=!1,i}return e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(ht);function U$(){return function(e){return e.lift(new V$)}}var V$=function(){function n(){}return n.prototype.call=function(e,t){return t.subscribe(new q$(e))},n}(),q$=function(n){je(e,n);function e(t){return n.call(this,t)||this}return e.prototype._next=function(t){t.observe(this.destination)},e}(ht);function H$(n,e){return function(t){return t.lift(new z$(n,e))}}var z$=function(){function n(e,t){this.keySelector=e,this.flushes=t}return n.prototype.call=function(e,t){return t.subscribe(new W$(e,this.keySelector,this.flushes))},n}(),W$=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.keySelector=r,o.values=new Set,i&&o.add(kn(i,new En(o))),o}return e.prototype.notifyNext=function(){this.values.clear()},e.prototype.notifyError=function(t){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var r,i=this.destination;try{r=this.keySelector(t)}catch(o){i.error(o);return}this._finalizeNext(r,t)},e.prototype._finalizeNext=function(t,r){var i=this.values;i.has(t)||(i.add(t),this.destination.next(r))},e}(Cn);function OI(n,e){return function(t){return t.lift(new K$(n,e))}}var K$=function(){function n(e,t){this.compare=e,this.keySelector=t}return n.prototype.call=function(e,t){return t.subscribe(new G$(e,this.compare,this.keySelector))},n}(),G$=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.keySelector=i,o.hasKey=!1,typeof r=="function"&&(o.compare=r),o}return e.prototype.compare=function(t,r){return t===r},e.prototype._next=function(t){var r;try{var i=this.keySelector;r=i?i(t):t}catch(a){return this.destination.error(a)}var o=!1;if(this.hasKey)try{var s=this.compare;o=s(this.key,r)}catch(a){return this.destination.error(a)}else this.hasKey=!0;o||(this.key=r,this.destination.next(t))},e}(ht);function J$(n,e){return OI(function(t,r){return e?e(t[n],r[n]):t[n]===r[n]})}function ap(n){return n===void 0&&(n=Z$),function(e){return e.lift(new Y$(n))}}var Y$=function(){function n(e){this.errorFactory=e}return n.prototype.call=function(e,t){return t.subscribe(new Q$(e,this.errorFactory))},n}(),Q$=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.errorFactory=r,i.hasValue=!1,i}return e.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(r){t=r}this.destination.error(t)},e}(ht);function Z$(){return new oc}function wy(n){return function(e){return n===0?ll():e.lift(new X$(n))}}var X$=function(){function n(e){if(this.total=e,this.total<0)throw new Ja}return n.prototype.call=function(e,t){return t.subscribe(new $$(e,this.total))},n}(),$$=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.total=r,i.count=0,i}return e.prototype._next=function(t){var r=this.total,i=++this.count;i<=r&&(this.destination.next(t),i===r&&(this.destination.complete(),this.unsubscribe()))},e}(ht);function eee(n,e){if(n<0)throw new Ja;var t=arguments.length>=2;return function(r){return r.pipe(ns(function(i,o){return o===n}),wy(1),t?sc(e):ap(function(){return new Ja}))}}function tee(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(t){return Au(t,op.apply(void 0,n))}}function nee(n,e){return function(t){return t.lift(new ree(n,e,t))}}var ree=function(){function n(e,t,r){this.predicate=e,this.thisArg=t,this.source=r}return n.prototype.call=function(e,t){return t.subscribe(new iee(e,this.predicate,this.thisArg,this.source))},n}(),iee=function(n){je(e,n);function e(t,r,i,o){var s=n.call(this,t)||this;return s.predicate=r,s.thisArg=i,s.source=o,s.index=0,s.thisArg=i||s,s}return e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var r=!1;try{r=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(i){this.destination.error(i);return}r||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(ht);function oee(){return function(n){return n.lift(new see)}}var see=function(){function n(){}return n.prototype.call=function(e,t){return t.subscribe(new aee(e))},n}(),aee=function(n){je(e,n);function e(t){var r=n.call(this,t)||this;return r.hasCompleted=!1,r.hasSubscription=!1,r}return e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(kn(t,new En(this))))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(Cn);function TI(n,e){return e?function(t){return t.pipe(TI(function(r,i){return _o(n(r,i)).pipe(fi(function(o,s){return e(r,o,i,s)}))}))}:function(t){return t.lift(new lee(n))}}var lee=function(){function n(e){this.project=e}return n.prototype.call=function(e,t){return t.subscribe(new uee(e,this.project))},n}(),uee=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.project=r,i.hasSubscription=!1,i.hasCompleted=!1,i.index=0,i}return e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var r,i=this.index++;try{r=this.project(t,i)}catch(o){this.destination.error(o);return}this.hasSubscription=!0,this._innerSub(r)},e.prototype._innerSub=function(t){var r=new En(this),i=this.destination;i.add(r);var o=kn(t,r);o!==r&&i.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(Cn);function cee(n,e,t){return e===void 0&&(e=Number.POSITIVE_INFINITY),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(r){return r.lift(new fee(n,e,t))}}var fee=function(){function n(e,t,r){this.project=e,this.concurrent=t,this.scheduler=r}return n.prototype.call=function(e,t){return t.subscribe(new hee(e,this.project,this.concurrent,this.scheduler))},n}(),hee=function(n){je(e,n);function e(t,r,i,o){var s=n.call(this,t)||this;return s.project=r,s.concurrent=i,s.scheduler=o,s.index=0,s.active=0,s.hasCompleted=!1,i<Number.POSITIVE_INFINITY&&(s.buffer=[]),s}return e.dispatch=function(t){var r=t.subscriber,i=t.result,o=t.value,s=t.index;r.subscribeToProjection(i,o,s)},e.prototype._next=function(t){var r=this.destination;if(r.closed){this._complete();return}var i=this.index++;if(this.active<this.concurrent){r.next(t);try{var o=this.project,s=o(t,i);if(!this.scheduler)this.subscribeToProjection(s,t,i);else{var a={subscriber:this,result:s,value:t,index:i},l=this.destination;l.add(this.scheduler.schedule(e.dispatch,0,a))}}catch(u){r.error(u)}}else this.buffer.push(t)},e.prototype.subscribeToProjection=function(t,r,i){this.active++;var o=this.destination;o.add(kn(t,new En(this)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this._next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&this.active===0&&this.destination.complete()},e}(Cn);function dee(n){return function(e){return e.lift(new pee(n))}}var pee=function(){function n(e){this.callback=e}return n.prototype.call=function(e,t){return t.subscribe(new mee(e,this.callback))},n}(),mee=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.add(new Sn(r)),i}return e}(ht);function gee(n,e){if(typeof n!="function")throw new TypeError("predicate is not a function");return function(t){return t.lift(new PI(n,t,!1,e))}}var PI=function(){function n(e,t,r,i){this.predicate=e,this.source=t,this.yieldIndex=r,this.thisArg=i}return n.prototype.call=function(e,t){return t.subscribe(new vee(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},n}(),vee=function(n){je(e,n);function e(t,r,i,o,s){var a=n.call(this,t)||this;return a.predicate=r,a.source=i,a.yieldIndex=o,a.thisArg=s,a.index=0,a}return e.prototype.notifyComplete=function(t){var r=this.destination;r.next(t),r.complete(),this.unsubscribe()},e.prototype._next=function(t){var r=this,i=r.predicate,o=r.thisArg,s=this.index++;try{var a=i.call(o||this,t,s,this.source);a&&this.notifyComplete(this.yieldIndex?s:t)}catch(l){this.destination.error(l)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(ht);function yee(n,e){return function(t){return t.lift(new PI(n,t,!0,e))}}function _ee(n,e){var t=arguments.length>=2;return function(r){return r.pipe(n?ns(function(i,o){return n(i,o,r)}):es,wy(1),t?sc(e):ap(function(){return new oc}))}}function bee(){return function(e){return e.lift(new wee)}}var wee=function(){function n(){}return n.prototype.call=function(e,t){return t.subscribe(new See(e))},n}(),See=function(n){je(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype._next=function(t){},e}(ht);function Eee(){return function(n){return n.lift(new Cee)}}var Cee=function(){function n(){}return n.prototype.call=function(e,t){return t.subscribe(new kee(e))},n}(),kee=function(n){je(e,n);function e(t){return n.call(this,t)||this}return e.prototype.notifyComplete=function(t){var r=this.destination;r.next(t),r.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(ht);function cd(n){return function(t){return n===0?ll():t.lift(new Oee(n))}}var Oee=function(){function n(e){if(this.total=e,this.total<0)throw new Ja}return n.prototype.call=function(e,t){return t.subscribe(new Tee(e,this.total))},n}(),Tee=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.total=r,i.ring=new Array,i.count=0,i}return e.prototype._next=function(t){var r=this.ring,i=this.total,o=this.count++;if(r.length<i)r.push(t);else{var s=o%i;r[s]=t}},e.prototype._complete=function(){var t=this.destination,r=this.count;if(r>0)for(var i=this.count>=this.total?this.total:this.count,o=this.ring,s=0;s<i;s++){var a=r++%i;t.next(o[a])}t.complete()},e}(ht);function Pee(n,e){var t=arguments.length>=2;return function(r){return r.pipe(n?ns(function(i,o){return n(i,o,r)}):es,cd(1),t?sc(e):ap(function(){return new oc}))}}function Iee(n){return function(e){return e.lift(new Aee(n))}}var Aee=function(){function n(e){this.value=e}return n.prototype.call=function(e,t){return t.subscribe(new Ree(e,this.value))},n}(),Ree=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype._next=function(t){this.destination.next(this.value)},e}(ht);function xee(){return function(e){return e.lift(new Nee)}}var Nee=function(){function n(){}return n.prototype.call=function(e,t){return t.subscribe(new Mee(e))},n}(),Mee=function(n){je(e,n);function e(t){return n.call(this,t)||this}return e.prototype._next=function(t){this.destination.next(co.createNext(t))},e.prototype._error=function(t){var r=this.destination;r.next(co.createError(t)),r.complete()},e.prototype._complete=function(){var t=this.destination;t.next(co.createComplete()),t.complete()},e}(ht);function fd(n,e){var t=!1;return arguments.length>=2&&(t=!0),function(i){return i.lift(new Dee(n,e,t))}}var Dee=function(){function n(e,t,r){r===void 0&&(r=!1),this.accumulator=e,this.seed=t,this.hasSeed=r}return n.prototype.call=function(e,t){return t.subscribe(new Lee(e,this.accumulator,this.seed,this.hasSeed))},n}(),Lee=function(n){je(e,n);function e(t,r,i,o){var s=n.call(this,t)||this;return s.accumulator=r,s._seed=i,s.hasSeed=o,s.index=0,s}return Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(!this.hasSeed)this.seed=t,this.destination.next(t);else return this._tryNext(t)},e.prototype._tryNext=function(t){var r=this.index++,i;try{i=this.accumulator(this.seed,t,r)}catch(o){this.destination.error(o)}this.seed=i,this.destination.next(i)},e}(ht);function lp(n,e){return arguments.length>=2?function(r){return v0(fd(n,e),cd(1),sc(e))(r)}:function(r){return v0(fd(function(i,o,s){return n(i,o,s+1)}),cd(1))(r)}}function jee(n){var e=typeof n=="function"?function(t,r){return n(t,r)>0?t:r}:function(t,r){return t>r?t:r};return lp(e)}function Bee(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(t){return t.lift.call(mI.apply(void 0,[t].concat(n)))}}function Fee(n,e,t){return t===void 0&&(t=Number.POSITIVE_INFINITY),typeof e=="function"?qs(function(){return n},e,t):(typeof e=="number"&&(t=e),qs(function(){return n},t))}function Uee(n,e,t){return t===void 0&&(t=Number.POSITIVE_INFINITY),function(r){return r.lift(new Vee(n,e,t))}}var Vee=function(){function n(e,t,r){this.accumulator=e,this.seed=t,this.concurrent=r}return n.prototype.call=function(e,t){return t.subscribe(new qee(e,this.accumulator,this.seed,this.concurrent))},n}(),qee=function(n){je(e,n);function e(t,r,i,o){var s=n.call(this,t)||this;return s.accumulator=r,s.acc=i,s.concurrent=o,s.hasValue=!1,s.hasCompleted=!1,s.buffer=[],s.active=0,s.index=0,s}return e.prototype._next=function(t){if(this.active<this.concurrent){var r=this.index++,i=this.destination,o=void 0;try{var s=this.accumulator;o=s(this.acc,t,r)}catch(a){return i.error(a)}this.active++,this._innerSub(o)}else this.buffer.push(t)},e.prototype._innerSub=function(t){var r=new En(this),i=this.destination;i.add(r);var o=kn(t,r);o!==r&&i.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},e.prototype.notifyNext=function(t){var r=this.destination;this.acc=t,this.hasValue=!0,r.next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},e}(Cn);function Hee(n){var e=typeof n=="function"?function(t,r){return n(t,r)<0?t:r}:function(t,r){return t<r?t:r};return lp(e)}function Hs(n,e){return function(r){var i;if(typeof n=="function"?i=n:i=function(){return n},typeof e=="function")return r.lift(new zee(i,e));var o=Object.create(r,kZ);return o.source=r,o.subjectFactory=i,o}}var zee=function(){function n(e,t){this.subjectFactory=e,this.selector=t}return n.prototype.call=function(e,t){var r=this.selector,i=this.subjectFactory(),o=r(i).subscribe(e);return o.add(t.subscribe(i)),o},n}();function Wee(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return n.length===1&&br(n[0])&&(n=n[0]),function(t){return t.lift(new Kee(n))}}var Kee=function(){function n(e){this.nextSources=e}return n.prototype.call=function(e,t){return t.subscribe(new Gee(e,this.nextSources))},n}(),Gee=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.destination=t,i.nextSources=r,i}return e.prototype.notifyError=function(){this.subscribeToNextSource()},e.prototype.notifyComplete=function(){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource(),this.unsubscribe()},e.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();if(t){var r=new En(this),i=this.destination;i.add(r);var o=kn(t,r);o!==r&&i.add(o)}else this.destination.complete()},e}(Cn);function Jee(){return function(n){return n.lift(new Yee)}}var Yee=function(){function n(){}return n.prototype.call=function(e,t){return t.subscribe(new Qee(e))},n}(),Qee=function(n){je(e,n);function e(t){var r=n.call(this,t)||this;return r.hasPrev=!1,r}return e.prototype._next=function(t){var r;this.hasPrev?r=[this.prev,t]:this.hasPrev=!0,this.prev=t,r&&this.destination.next(r)},e}(ht);function Zee(n,e){return function(t){return[ns(n,e)(t),ns(vI(n,e))(t)]}}function Xee(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.length;if(t===0)throw new Error("list of properties cannot be empty.");return function(r){return fi($ee(n,t))(r)}}function $ee(n,e){var t=function(r){for(var i=r,o=0;o<e;o++){var s=i!=null?i[n[o]]:void 0;if(s!==void 0)i=s;else return}return i};return t}function ete(n){return n?Hs(function(){return new Zn},n):Hs(new Zn)}function tte(n){return function(e){return Hs(new Q3(n))(e)}}function nte(){return function(n){return Hs(new ul)(n)}}function rte(n,e,t,r){t&&typeof t!="function"&&(r=t);var i=typeof t=="function"?t:void 0,o=new vy(n,e,r);return function(s){return Hs(function(){return o},i)(s)}}function ite(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(r){return n.length===1&&br(n[0])&&(n=n[0]),r.lift.call(yI.apply(void 0,[r].concat(n)))}}function ote(n){return n===void 0&&(n=-1),function(e){return n===0?ll():n<0?e.lift(new UE(-1,e)):e.lift(new UE(n-1,e))}}var UE=function(){function n(e,t){this.count=e,this.source=t}return n.prototype.call=function(e,t){return t.subscribe(new ste(e,this.count,this.source))},n}(),ste=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.count=r,o.source=i,o}return e.prototype.complete=function(){if(!this.isStopped){var t=this,r=t.source,i=t.count;if(i===0)return n.prototype.complete.call(this);i>-1&&(this.count=i-1),r.subscribe(this._unsubscribeAndRecycle())}},e}(ht);function ate(n){return function(e){return e.lift(new lte(n))}}var lte=function(){function n(e){this.notifier=e}return n.prototype.call=function(e,t){return t.subscribe(new ute(e,this.notifier,t))},n}(),ute=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.notifier=r,o.source=i,o.sourceIsBeingSubscribedTo=!0,o}return e.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(){if(this.sourceIsBeingSubscribedTo===!1)return n.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return n.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},e.prototype._unsubscribe=function(){var t=this,r=t.notifications,i=t.retriesSubscription;r&&(r.unsubscribe(),this.notifications=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},e.prototype._unsubscribeAndRecycle=function(){var t=this._unsubscribe;return this._unsubscribe=null,n.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=t,this},e.prototype.subscribeToRetries=function(){this.notifications=new Zn;var t;try{var r=this.notifier;t=r(this.notifications)}catch{return n.prototype.complete.call(this)}this.retries=t,this.retriesSubscription=kn(t,new En(this))},e}(Cn);function cte(n){return n===void 0&&(n=-1),function(e){return e.lift(new fte(n,e))}}var fte=function(){function n(e,t){this.count=e,this.source=t}return n.prototype.call=function(e,t){return t.subscribe(new hte(e,this.count,this.source))},n}(),hte=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.count=r,o.source=i,o}return e.prototype.error=function(t){if(!this.isStopped){var r=this,i=r.source,o=r.count;if(o===0)return n.prototype.error.call(this,t);o>-1&&(this.count=o-1),i.subscribe(this._unsubscribeAndRecycle())}},e}(ht);function dte(n){return function(e){return e.lift(new pte(n,e))}}var pte=function(){function n(e,t){this.notifier=e,this.source=t}return n.prototype.call=function(e,t){return t.subscribe(new mte(e,this.notifier,this.source))},n}(),mte=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.notifier=r,o.source=i,o}return e.prototype.error=function(t){if(!this.isStopped){var r=this.errors,i=this.retries,o=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{r=new Zn;try{var s=this.notifier;i=s(r)}catch(a){return n.prototype.error.call(this,a)}o=kn(i,new En(this))}this._unsubscribeAndRecycle(),this.errors=r,this.retries=i,this.retriesSubscription=o,r.next(t)}},e.prototype._unsubscribe=function(){var t=this,r=t.errors,i=t.retriesSubscription;r&&(r.unsubscribe(),this.errors=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},e.prototype.notifyNext=function(){var t=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=t,this.source.subscribe(this)},e}(Cn);function gte(n){return function(e){return e.lift(new vte(n))}}var vte=function(){function n(e){this.notifier=e}return n.prototype.call=function(e,t){var r=new yte(e),i=t.subscribe(r);return i.add(kn(this.notifier,new En(r))),i},n}(),yte=function(n){je(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.hasValue=!1,t}return e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(Cn);function _te(n,e){return e===void 0&&(e=wr),function(t){return t.lift(new bte(n,e))}}var bte=function(){function n(e,t){this.period=e,this.scheduler=t}return n.prototype.call=function(e,t){return t.subscribe(new wte(e,this.period,this.scheduler))},n}(),wte=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.period=r,o.scheduler=i,o.hasValue=!1,o.add(i.schedule(Ste,r,{subscriber:o,period:r})),o}return e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(ht);function Ste(n){var e=n.subscriber,t=n.period;e.notifyNext(),this.schedule(n,t)}function Ete(n,e){return function(t){return t.lift(new Cte(n,e))}}var Cte=function(){function n(e,t){this.compareTo=e,this.comparator=t}return n.prototype.call=function(e,t){return t.subscribe(new kte(e,this.compareTo,this.comparator))},n}(),kte=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.compareTo=r,o.comparator=i,o._a=[],o._b=[],o._oneComplete=!1,o.destination.add(r.subscribe(new Ote(t,o))),o}return e.prototype._next=function(t){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(t),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0,this.unsubscribe()},e.prototype.checkValues=function(){for(var t=this,r=t._a,i=t._b,o=t.comparator;r.length>0&&i.length>0;){var s=r.shift(),a=i.shift(),l=!1;try{l=o?o(s,a):s===a}catch(u){this.destination.error(u)}l||this.emit(!1)}},e.prototype.emit=function(t){var r=this.destination;r.next(t),r.complete()},e.prototype.nextB=function(t){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(t),this.checkValues())},e.prototype.completeB=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0},e}(ht),Ote=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.parent=r,i}return e.prototype._next=function(t){this.parent.nextB(t)},e.prototype._error=function(t){this.parent.error(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},e}(ht);function Tte(){return new Zn}function Pte(){return function(n){return py()(Hs(Tte)(n))}}function Ite(n,e,t){var r;return n&&typeof n=="object"?r=n:r={bufferSize:n,windowTime:e,refCount:!1,scheduler:t},function(i){return i.lift(Ate(r))}}function Ate(n){var e=n.bufferSize,t=e===void 0?Number.POSITIVE_INFINITY:e,r=n.windowTime,i=r===void 0?Number.POSITIVE_INFINITY:r,o=n.refCount,s=n.scheduler,a,l=0,u,c=!1,f=!1;return function(g){l++;var h;!a||c?(c=!1,a=new vy(t,i,s),h=a.subscribe(this),u=g.subscribe({next:function(v){a.next(v)},error:function(v){c=!0,a.error(v)},complete:function(){f=!0,u=void 0,a.complete()}}),f&&(u=void 0)):h=a.subscribe(this),this.add(function(){l--,h.unsubscribe(),h=void 0,u&&!f&&o&&l===0&&(u.unsubscribe(),u=void 0,a=void 0)})}}function Rte(n){return function(e){return e.lift(new xte(n,e))}}var xte=function(){function n(e,t){this.predicate=e,this.source=t}return n.prototype.call=function(e,t){return t.subscribe(new Nte(e,this.predicate,this.source))},n}(),Nte=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.predicate=r,o.source=i,o.seenValue=!1,o.index=0,o}return e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var r=this.index++;this.predicate?this.tryNext(t,r):this.applySingleValue(t)},e.prototype.tryNext=function(t,r){try{this.predicate(t,r,this.source)&&this.applySingleValue(t)}catch(i){this.destination.error(i)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new oc)},e}(ht);function Mte(n){return function(e){return e.lift(new Dte(n))}}var Dte=function(){function n(e){this.total=e}return n.prototype.call=function(e,t){return t.subscribe(new Lte(e,this.total))},n}(),Lte=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.total=r,i.count=0,i}return e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(ht);function jte(n){return function(e){return e.lift(new Bte(n))}}var Bte=function(){function n(e){if(this._skipCount=e,this._skipCount<0)throw new Ja}return n.prototype.call=function(e,t){return this._skipCount===0?t.subscribe(new ht(e)):t.subscribe(new Fte(e,this._skipCount))},n}(),Fte=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i._skipCount=r,i._count=0,i._ring=new Array(r),i}return e.prototype._next=function(t){var r=this._skipCount,i=this._count++;if(i<r)this._ring[i]=t;else{var o=i%r,s=this._ring,a=s[o];s[o]=t,this.destination.next(a)}},e}(ht);function Ute(n){return function(e){return e.lift(new Vte(n))}}var Vte=function(){function n(e){this.notifier=e}return n.prototype.call=function(e,t){return t.subscribe(new qte(e,this.notifier))},n}(),qte=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;i.hasValue=!1;var o=new En(i);i.add(o),i.innerSubscription=o;var s=kn(r,o);return s!==o&&(i.add(s),i.innerSubscription=s),i}return e.prototype._next=function(t){this.hasValue&&n.prototype._next.call(this,t)},e.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(Cn);function Hte(n){return function(e){return e.lift(new zte(n))}}var zte=function(){function n(e){this.predicate=e}return n.prototype.call=function(e,t){return t.subscribe(new Wte(e,this.predicate))},n}(),Wte=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.predicate=r,i.skipping=!0,i.index=0,i}return e.prototype._next=function(t){var r=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||r.next(t)},e.prototype.tryCallPredicate=function(t){try{var r=this.predicate(t,this.index++);this.skipping=Boolean(r)}catch(i){this.destination.error(i)}},e}(ht);function Kte(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n[n.length-1];return Jr(t)?(n.pop(),function(r){return Au(n,r,t)}):function(r){return Au(n,r)}}var Gte=function(n){je(e,n);function e(t,r,i){r===void 0&&(r=0),i===void 0&&(i=rh);var o=n.call(this)||this;return o.source=t,o.delayTime=r,o.scheduler=i,(!Ya(r)||r<0)&&(o.delayTime=0),(!i||typeof i.schedule!="function")&&(o.scheduler=rh),o}return e.create=function(t,r,i){return r===void 0&&(r=0),i===void 0&&(i=rh),new e(t,r,i)},e.dispatch=function(t){var r=t.source,i=t.subscriber;return this.add(r.subscribe(i))},e.prototype._subscribe=function(t){var r=this.delayTime,i=this.source,o=this.scheduler;return o.schedule(e.dispatch,r,{source:i,subscriber:t})},e}(Rt);function Jte(n,e){return e===void 0&&(e=0),function(r){return r.lift(new Yte(n,e))}}var Yte=function(){function n(e,t){this.scheduler=e,this.delay=t}return n.prototype.call=function(e,t){return new Gte(t,this.delay,this.scheduler).subscribe(e)},n}();function Ru(n,e){return typeof e=="function"?function(t){return t.pipe(Ru(function(r,i){return _o(n(r,i)).pipe(fi(function(o,s){return e(r,o,i,s)}))}))}:function(t){return t.lift(new Qte(n))}}var Qte=function(){function n(e){this.project=e}return n.prototype.call=function(e,t){return t.subscribe(new Zte(e,this.project))},n}(),Zte=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.project=r,i.index=0,i}return e.prototype._next=function(t){var r,i=this.index++;try{r=this.project(t,i)}catch(o){this.destination.error(o);return}this._innerSub(r)},e.prototype._innerSub=function(t){var r=this.innerSubscription;r&&r.unsubscribe();var i=new En(this),o=this.destination;o.add(i),this.innerSubscription=kn(t,i),this.innerSubscription!==i&&o.add(this.innerSubscription)},e.prototype._complete=function(){var t=this.innerSubscription;(!t||t.closed)&&n.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&n.prototype._complete.call(this)},e.prototype.notifyNext=function(t){this.destination.next(t)},e}(Cn);function Xte(){return Ru(es)}function $te(n,e){return e?Ru(function(){return n},e):Ru(function(){return n})}function ene(n){return function(e){return e.lift(new tne(n))}}var tne=function(){function n(e){this.notifier=e}return n.prototype.call=function(e,t){var r=new nne(e),i=kn(this.notifier,new En(r));return i&&!r.seenValue?(r.add(i),t.subscribe(r)):r},n}(),nne=function(n){je(e,n);function e(t){var r=n.call(this,t)||this;return r.seenValue=!1,r}return e.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(Cn);function rne(n,e){return e===void 0&&(e=!1),function(t){return t.lift(new ine(n,e))}}var ine=function(){function n(e,t){this.predicate=e,this.inclusive=t}return n.prototype.call=function(e,t){return t.subscribe(new one(e,this.predicate,this.inclusive))},n}(),one=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.predicate=r,o.inclusive=i,o.index=0,o}return e.prototype._next=function(t){var r=this.destination,i;try{i=this.predicate(t,this.index++)}catch(o){r.error(o);return}this.nextOrComplete(t,i)},e.prototype.nextOrComplete=function(t,r){var i=this.destination;Boolean(r)?i.next(t):(this.inclusive&&i.next(t),i.complete())},e}(ht);function sne(n,e,t){return function(i){return i.lift(new ane(n,e,t))}}var ane=function(){function n(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}return n.prototype.call=function(e,t){return t.subscribe(new lne(e,this.nextOrObserver,this.error,this.complete))},n}(),lne=function(n){je(e,n);function e(t,r,i,o){var s=n.call(this,t)||this;return s._tapNext=Li,s._tapError=Li,s._tapComplete=Li,s._tapError=i||Li,s._tapComplete=o||Li,Ka(r)?(s._context=s,s._tapNext=r):r&&(s._context=r,s._tapNext=r.next||Li,s._tapError=r.error||Li,s._tapComplete=r.complete||Li),s}return e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(r){this.destination.error(r);return}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(r){this.destination.error(r);return}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){this.destination.error(t);return}return this.destination.complete()},e}(ht),II={leading:!0,trailing:!1};function une(n,e){return e===void 0&&(e=II),function(t){return t.lift(new cne(n,!!e.leading,!!e.trailing))}}var cne=function(){function n(e,t,r){this.durationSelector=e,this.leading=t,this.trailing=r}return n.prototype.call=function(e,t){return t.subscribe(new fne(e,this.durationSelector,this.leading,this.trailing))},n}(),fne=function(n){je(e,n);function e(t,r,i,o){var s=n.call(this,t)||this;return s.destination=t,s.durationSelector=r,s._leading=i,s._trailing=o,s._hasValue=!1,s}return e.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},e.prototype.send=function(){var t=this,r=t._hasValue,i=t._sendValue;r&&(this.destination.next(i),this.throttle(i)),this._hasValue=!1,this._sendValue=void 0},e.prototype.throttle=function(t){var r=this.tryDurationSelector(t);r&&this.add(this._throttled=kn(r,new En(this)))},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(r){return this.destination.error(r),null}},e.prototype.throttlingDone=function(){var t=this,r=t._throttled,i=t._trailing;r&&r.unsubscribe(),this._throttled=void 0,i&&this.send()},e.prototype.notifyNext=function(){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()},e}(Cn);function hne(n,e,t){return e===void 0&&(e=wr),t===void 0&&(t=II),function(r){return r.lift(new dne(n,e,t.leading,t.trailing))}}var dne=function(){function n(e,t,r,i){this.duration=e,this.scheduler=t,this.leading=r,this.trailing=i}return n.prototype.call=function(e,t){return t.subscribe(new pne(e,this.duration,this.scheduler,this.leading,this.trailing))},n}(),pne=function(n){je(e,n);function e(t,r,i,o,s){var a=n.call(this,t)||this;return a.duration=r,a.scheduler=i,a.leading=o,a.trailing=s,a._hasTrailingValue=!1,a._trailingValue=null,a}return e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(mne,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(ht);function mne(n){var e=n.subscriber;e.clearThrottle()}function gne(n){return n===void 0&&(n=wr),function(e){return by(function(){return e.pipe(fd(function(t,r){var i=t.current;return{value:r,current:n.now(),last:i}},{current:n.now(),value:void 0,last:void 0}),fi(function(t){var r=t.current,i=t.last,o=t.value;return new vne(o,r-i)}))})}}var vne=function(){function n(e,t){this.value=e,this.interval=t}return n}();function AI(n,e,t){return t===void 0&&(t=wr),function(r){var i=kI(n),o=i?+n-t.now():Math.abs(n);return r.lift(new yne(o,i,e,t))}}var yne=function(){function n(e,t,r,i){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=r,this.scheduler=i}return n.prototype.call=function(e,t){return t.subscribe(new _ne(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},n}(),_ne=function(n){je(e,n);function e(t,r,i,o,s){var a=n.call(this,t)||this;return a.absoluteTimeout=r,a.waitFor=i,a.withObservable=o,a.scheduler=s,a.scheduleTimeout(),a}return e.dispatchTimeout=function(t){var r=t.withObservable;t._unsubscribeAndRecycle(),t.add(kn(r,new En(t)))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),n.prototype._next.call(this,t)},e.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},e}(Cn);function bne(n,e){return e===void 0&&(e=wr),AI(n,gy(new oI),e)}function wne(n){return n===void 0&&(n=wr),fi(function(e){return new Sne(e,n.now())})}var Sne=function(){function n(e,t){this.value=e,this.timestamp=t}return n}();function Ene(n,e,t){return t===0?[e]:(n.push(e),n)}function Cne(){return lp(Ene,[])}function kne(n){return function(t){return t.lift(new One(n))}}var One=function(){function n(e){this.windowBoundaries=e}return n.prototype.call=function(e,t){var r=new Tne(e),i=t.subscribe(r);return i.closed||r.add(kn(this.windowBoundaries,new En(r))),i},n}(),Tne=function(n){je(e,n);function e(t){var r=n.call(this,t)||this;return r.window=new Zn,t.next(r.window),r}return e.prototype.notifyNext=function(){this.openWindow()},e.prototype.notifyError=function(t){this._error(t)},e.prototype.notifyComplete=function(){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var r=this.destination,i=this.window=new Zn;r.next(i)},e}(Cn);function Pne(n,e){return e===void 0&&(e=0),function(r){return r.lift(new Ine(n,e))}}var Ine=function(){function n(e,t){this.windowSize=e,this.startWindowEvery=t}return n.prototype.call=function(e,t){return t.subscribe(new Ane(e,this.windowSize,this.startWindowEvery))},n}(),Ane=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.destination=t,o.windowSize=r,o.startWindowEvery=i,o.windows=[new Zn],o.count=0,t.next(o.windows[0]),o}return e.prototype._next=function(t){for(var r=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,i=this.destination,o=this.windowSize,s=this.windows,a=s.length,l=0;l<a&&!this.closed;l++)s[l].next(t);var u=this.count-o+1;if(u>=0&&u%r===0&&!this.closed&&s.shift().complete(),++this.count%r===0&&!this.closed){var c=new Zn;s.push(c),i.next(c)}},e.prototype._error=function(t){var r=this.windows;if(r)for(;r.length>0&&!this.closed;)r.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(ht);function Rne(n){var e=wr,t=null,r=Number.POSITIVE_INFINITY;return Jr(arguments[3])&&(e=arguments[3]),Jr(arguments[2])?e=arguments[2]:Ya(arguments[2])&&(r=Number(arguments[2])),Jr(arguments[1])?e=arguments[1]:Ya(arguments[1])&&(t=Number(arguments[1])),function(o){return o.lift(new xne(n,t,r,e))}}var xne=function(){function n(e,t,r,i){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=r,this.scheduler=i}return n.prototype.call=function(e,t){return t.subscribe(new Mne(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},n}(),Nne=function(n){je(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._numberOfNextedValues=0,t}return e.prototype.next=function(t){this._numberOfNextedValues++,n.prototype.next.call(this,t)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(Zn),Mne=function(n){je(e,n);function e(t,r,i,o,s){var a=n.call(this,t)||this;a.destination=t,a.windowTimeSpan=r,a.windowCreationInterval=i,a.maxWindowSize=o,a.scheduler=s,a.windows=[];var l=a.openWindow();if(i!==null&&i>=0){var u={subscriber:a,window:l,context:null},c={windowTimeSpan:r,windowCreationInterval:i,subscriber:a,scheduler:s};a.add(s.schedule(RI,r,u)),a.add(s.schedule(Lne,i,c))}else{var f={subscriber:a,window:l,windowTimeSpan:r};a.add(s.schedule(Dne,r,f))}return a}return e.prototype._next=function(t){for(var r=this.windows,i=r.length,o=0;o<i;o++){var s=r[o];s.closed||(s.next(t),s.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(s))}},e.prototype._error=function(t){for(var r=this.windows;r.length>0;)r.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var r=t.shift();r.closed||r.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new Nne;this.windows.push(t);var r=this.destination;return r.next(t),t},e.prototype.closeWindow=function(t){t.complete();var r=this.windows;r.splice(r.indexOf(t),1)},e}(ht);function Dne(n){var e=n.subscriber,t=n.windowTimeSpan,r=n.window;r&&e.closeWindow(r),n.window=e.openWindow(),this.schedule(n,t)}function Lne(n){var e=n.windowTimeSpan,t=n.subscriber,r=n.scheduler,i=n.windowCreationInterval,o=t.openWindow(),s=this,a={action:s,subscription:null},l={subscriber:t,window:o,context:a};a.subscription=r.schedule(RI,e,l),s.add(a.subscription),s.schedule(n,i)}function RI(n){var e=n.subscriber,t=n.window,r=n.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),e.closeWindow(t)}function jne(n,e){return function(t){return t.lift(new Bne(n,e))}}var Bne=function(){function n(e,t){this.openings=e,this.closingSelector=t}return n.prototype.call=function(e,t){return t.subscribe(new Fne(e,this.openings,this.closingSelector))},n}(),Fne=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.openings=r,o.closingSelector=i,o.contexts=[],o.add(o.openSubscription=go(o,r,r)),o}return e.prototype._next=function(t){var r=this.contexts;if(r)for(var i=r.length,o=0;o<i;o++)r[o].window.next(t)},e.prototype._error=function(t){var r=this.contexts;if(this.contexts=null,r)for(var i=r.length,o=-1;++o<i;){var s=r[o];s.window.error(t),s.subscription.unsubscribe()}n.prototype._error.call(this,t)},e.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var r=t.length,i=-1;++i<r;){var o=t[i];o.window.complete(),o.subscription.unsubscribe()}n.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var r=t.length,i=-1;++i<r;){var o=t[i];o.window.unsubscribe(),o.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,r,i,o,s){if(t===this.openings){var a=void 0;try{var l=this.closingSelector;a=l(r)}catch(g){return this.error(g)}var u=new Zn,c=new Sn,f={window:u,subscription:c};this.contexts.push(f);var d=go(this,a,f);d.closed?this.closeWindow(this.contexts.length-1):(d.context=f,c.add(d)),this.destination.next(u)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(t!==-1){var r=this.contexts,i=r[t],o=i.window,s=i.subscription;r.splice(t,1),o.complete(),s.unsubscribe()}},e}(Xs);function Une(n){return function(t){return t.lift(new Vne(n))}}var Vne=function(){function n(e){this.closingSelector=e}return n.prototype.call=function(e,t){return t.subscribe(new qne(e,this.closingSelector))},n}(),qne=function(n){je(e,n);function e(t,r){var i=n.call(this,t)||this;return i.destination=t,i.closingSelector=r,i.openWindow(),i}return e.prototype.notifyNext=function(t,r,i,o,s){this.openWindow(s)},e.prototype.notifyError=function(t){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){t===void 0&&(t=null),t&&(this.remove(t),t.unsubscribe());var r=this.window;r&&r.complete();var i=this.window=new Zn;this.destination.next(i);var o;try{var s=this.closingSelector;o=s()}catch(a){this.destination.error(a),this.window.error(a);return}this.add(this.closingNotification=go(this,o))},e}(Xs);function Hne(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(t){var r;typeof n[n.length-1]=="function"&&(r=n.pop());var i=n;return t.lift(new zne(i,r))}}var zne=function(){function n(e,t){this.observables=e,this.project=t}return n.prototype.call=function(e,t){return t.subscribe(new Wne(e,this.observables,this.project))},n}(),Wne=function(n){je(e,n);function e(t,r,i){var o=n.call(this,t)||this;o.observables=r,o.project=i,o.toRespond=[];var s=r.length;o.values=new Array(s);for(var a=0;a<s;a++)o.toRespond.push(a);for(var a=0;a<s;a++){var l=r[a];o.add(go(o,l,void 0,a))}return o}return e.prototype.notifyNext=function(t,r,i){this.values[i]=r;var o=this.toRespond;if(o.length>0){var s=o.indexOf(i);s!==-1&&o.splice(s,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(this.toRespond.length===0){var r=[t].concat(this.values);this.project?this._tryProject(r):this.destination.next(r)}},e.prototype._tryProject=function(t){var r;try{r=this.project.apply(this,t)}catch(i){this.destination.error(i);return}this.destination.next(r)},e}(Xs);function Kne(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(r){return r.lift.call(bI.apply(void 0,[r].concat(n)))}}function Gne(n){return function(e){return e.lift(new wI(n))}}const Jne=Object.freeze(Object.defineProperty({__proto__:null,audit:SI,auditTime:JX,buffer:YX,bufferCount:XX,bufferTime:n$,bufferToggle:a$,bufferWhen:c$,catchError:d$,combineAll:g$,combineLatest:v$,concat:y$,concatAll:fI,concatMap:CI,concatMapTo:_$,count:b$,debounce:E$,debounceTime:O$,defaultIfEmpty:sc,delay:x$,delayWhen:L$,dematerialize:U$,distinct:H$,distinctUntilChanged:OI,distinctUntilKeyChanged:J$,elementAt:eee,endWith:tee,every:nee,exhaust:oee,exhaustMap:TI,expand:cee,filter:ns,finalize:dee,find:gee,findIndex:yee,first:_ee,groupBy:TZ,ignoreElements:bee,isEmpty:Eee,last:Pee,map:fi,mapTo:Iee,materialize:xee,max:jee,merge:Bee,mergeAll:_y,mergeMap:qs,flatMap:_X,mergeMapTo:Fee,mergeScan:Uee,min:Hee,multicast:Hs,observeOn:jZ,onErrorResumeNext:Wee,pairwise:Jee,partition:Zee,pluck:Xee,publish:ete,publishBehavior:tte,publishLast:nte,publishReplay:rte,race:ite,reduce:lp,repeat:ote,repeatWhen:ate,retry:cte,retryWhen:dte,refCount:py,sample:gte,sampleTime:_te,scan:fd,sequenceEqual:Ete,share:Pte,shareReplay:Ite,single:Rte,skip:Mte,skipLast:jte,skipUntil:Ute,skipWhile:Hte,startWith:Kte,subscribeOn:Jte,switchAll:Xte,switchMap:Ru,switchMapTo:$te,take:wy,takeLast:cd,takeUntil:ene,takeWhile:rne,tap:sne,throttle:une,throttleTime:hne,throwIfEmpty:ap,timeInterval:gne,timeout:bne,timeoutWith:AI,timestamp:wne,toArray:Cne,window:kne,windowCount:Pne,windowTime:Rne,windowToggle:jne,windowWhen:Une,withLatestFrom:Hne,zip:Kne,zipAll:Gne},Symbol.toStringTag,{value:"Module"})),Sy=Mk(Jne);var Em={},VE;function Ey(){return VE||(VE=1,function(n){var e=Zs.exports;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=e(Xu()),r=e($u()),i=Mt(),o=sp,s=Sy,a={READY:0,STREAMING:1,COMPLETED:2},l=function(){function u(c){(0,t.default)(this,u);var f=c.pipe((0,s.publishReplay)(1),(0,s.refCount)());this._result=f,this._keys=f.pipe((0,s.flatMap)(function(d){return(0,o.from)(d.keys())}),(0,s.publishReplay)(1),(0,s.refCount)()),this._records=new o.Subject,this._summary=new o.ReplaySubject,this._state=a.READY}return(0,r.default)(u,[{key:"keys",value:function(){return this._keys}},{key:"records",value:function(){var f=this;return this._result.pipe((0,s.flatMap)(function(d){return new o.Observable(function(g){return f._startStreaming({result:d,recordsObserver:g})})}))}},{key:"consume",value:function(){var f=this;return this._result.pipe((0,s.flatMap)(function(d){return new o.Observable(function(g){return f._startStreaming({result:d,summaryObserver:g})})}))}},{key:"_startStreaming",value:function(){var f=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=d.result,h=d.recordsObserver,v=h===void 0?null:h,m=d.summaryObserver,p=m===void 0?null:m,y=[];return p&&y.push(this._summary.subscribe(p)),this._state<a.STREAMING?(this._state=a.STREAMING,v&&y.push(this._records.subscribe(v)),y.push({unsubscribe:function(){g._cancel&&g._cancel()}}),this._records.observers.length===0&&g._cancel(),g.subscribe({onNext:function(_){f._records.next(_)},onCompleted:function(_){f._records.complete(),f._summary.next(_),f._summary.complete(),f._state=a.COMPLETED},onError:function(_){f._records.error(_),f._summary.error(_),f._state=a.COMPLETED}})):v&&v.error((0,i.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){y.forEach(function(b){return b.unsubscribe()})}}}]),u}();n.default=l}(Em)),Em}var Cm={},qE;function xI(){return qE||(qE=1,function(n){var e=Zs.exports;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=e(Xu()),r=e($u()),i=sp,o=e(Ey());e(Mt());var s=function(){function a(l){(0,t.default)(this,a),this._txc=l}return(0,r.default)(a,[{key:"run",value:function(u,c){var f=this;return new o.default(new i.Observable(function(d){try{d.next(f._txc.run(u,c)),d.complete()}catch(g){d.error(g)}return function(){}}))}},{key:"commit",value:function(){var u=this;return new i.Observable(function(c){u._txc.commit().then(function(){c.complete()}).catch(function(f){return c.error(f)})})}},{key:"rollback",value:function(){var u=this;return new i.Observable(function(c){u._txc.rollback().then(function(){c.complete()}).catch(function(f){return c.error(f)})})}},{key:"close",value:function(){var u=this;return new i.Observable(function(c){u._txc.close().then(function(){c.complete()}).catch(function(f){return c.error(f)})})}}]),a}();n.default=s}(Cm)),Cm}var km={},HE;function Yne(){return HE||(HE=1,function(n){var e=Zs.exports;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=e(Xu()),r=e($u()),i=Mt(),o=sp,s=Sy;i.internal.logger.Logger;var a=i.internal.retryStrategy.canRetryOn,l=i.error.SERVICE_UNAVAILABLE;i.error.SESSION_EXPIRED;var u=30*1e3,c=1e3,f=2,d=.2,g=function(){function v(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=m.maxRetryTimeout,y=p===void 0?u:p,b=m.initialDelay,_=b===void 0?c:b,w=m.delayMultiplier,S=w===void 0?f:w,E=m.delayJitter,O=E===void 0?d:E,R=m.logger,D=R===void 0?null:R;(0,t.default)(this,v),this._maxRetryTimeout=h(y,u),this._initialDelay=h(_,c),this._delayMultiplier=h(S,f),this._delayJitter=h(O,d),this._logger=D}return(0,r.default)(v,[{key:"retry",value:function(p){var y=this;return p.pipe((0,s.retryWhen)(function(b){var _=[],w=Date.now(),S=1,E=y._initialDelay;return b.pipe((0,s.flatMap)(function(O){if(!a(O))return(0,o.throwError)(O);if(_.push(O),S>=2&&Date.now()-w>=y._maxRetryTimeout){var R=(0,i.newError)("Failed after retried for ".concat(S," times in ").concat(y._maxRetryTimeout," ms. Make sure that your database is online and retry again."),l);return R.seenErrors=_,(0,o.throwError)(R)}var D=y._computeNextDelay(E);return E=E*y._delayMultiplier,S++,y._logger&&y._logger.warn("Transaction failed and will be retried in ".concat(D)),(0,o.of)(1).pipe((0,s.delay)(D))}))}))}},{key:"_computeNextDelay",value:function(p){var y=p*this._delayJitter;return p-y+2*y*Math.random()}}]),v}();n.default=g;function h(v,m){return v||v===0?v:m}}(km)),km}var zE;function NI(){return zE||(zE=1,function(n){var e=Zs.exports;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=e(Xu()),r=e($u()),i=sp,o=Sy,s=e(Ey()),a=Mt(),l=e(xI()),u=e(Yne()),c=a.internal.constants,f=c.ACCESS_MODE_READ,d=c.ACCESS_MODE_WRITE,g=a.internal.txConfig.TxConfig,h=function(){function m(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=p.session,b=p.config;(0,t.default)(this,m),this._session=y,this._retryLogic=v(b)}return(0,r.default)(m,[{key:"run",value:function(y,b,_){var w=this;return new s.default(new i.Observable(function(S){try{S.next(w._session.run(y,b,_)),S.complete()}catch(E){S.error(E)}return function(){}}))}},{key:"beginTransaction",value:function(y){return this._beginTransaction(this._session._mode,y)}},{key:"readTransaction",value:function(y,b){return this._runTransaction(f,y,b)}},{key:"writeTransaction",value:function(y,b){return this._runTransaction(d,y,b)}},{key:"close",value:function(){var y=this;return new i.Observable(function(b){y._session.close().then(function(){b.complete()}).catch(function(_){return b.error(_)})})}},{key:"lastBookmark",value:function(){return this._session.lastBookmark()}},{key:"_beginTransaction",value:function(y,b){var _=this,w=g.empty();return b&&(w=new g(b)),new i.Observable(function(S){try{S.next(new l.default(_._session._beginTransaction(y,w))),S.complete()}catch(E){S.error(E)}return function(){}})}},{key:"_runTransaction",value:function(y,b,_){return g.empty(),_&&new g(_),this._retryLogic.retry(this._beginTransaction(y,_).pipe((0,o.flatMap)(function(w){return(0,i.defer)(function(){try{return b(w)}catch(S){return(0,i.throwError)(S)}}).pipe((0,o.catchError)(function(S){return w.rollback().pipe((0,o.concat)((0,i.throwError)(S)))}),(0,o.concat)(w.commit()))})))}}]),m}();n.default=h;function v(m){var p=m&&m.maxTransactionRetryTime?m.maxTransactionRetryTime:null;return new u.default({maxRetryTimeout:p})}}(Sm)),Sm}(function(n){var e=Zs.exports;Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.WRITE=n.READ=n.Driver=void 0;var t=e(Xu()),r=e($u()),i=e(iZ()),o=e(aZ()),s=e(lZ()),a=Mt(),l=e(NI());function u(p){var y=c();return function(){var _=(0,s.default)(p),w;if(y){var S=(0,s.default)(this).constructor;w=Reflect.construct(_,arguments,S)}else w=_.apply(this,arguments);return(0,o.default)(this,w)}}function c(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var f=a.internal.constants.FETCH_ALL,d=a.driver.READ,g=a.driver.WRITE;n.WRITE=g,n.READ=d;var h=function(p){(0,i.default)(b,p);var y=u(b);function b(){return(0,t.default)(this,b),y.apply(this,arguments)}return(0,r.default)(b,[{key:"rxSession",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=w.defaultAccessMode,E=S===void 0?g:S,O=w.bookmarks,R=w.database,D=R===void 0?"":R,F=w.fetchSize,B=w.impersonatedUser;return new l.default({session:this._newSession({defaultAccessMode:E,bookmarkOrBookmarks:O,database:D,impersonatedUser:B,reactive:!0,fetchSize:v(F,this._config.fetchSize)}),config:this._config})}}]),b}(a.Driver);n.Driver=h;function v(p,y){var b=parseInt(p,10);if(b>0||b===f)return b;if(b===0||b<0)throw new Error("The fetch size can only be a positive value or ".concat(f," for ALL. However fetchSize = ").concat(b));return y}var m=h;n.default=m})(N3);var Om={},WE;function Qne(){return WE||(WE=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e="4.4.7";n.default=e}(Om)),Om}var Tm={},Co={},rf={},KE;function MI(){if(KE)return rf;KE=1,Object.defineProperty(rf,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.selectReader=function(t){throw new Error("Abstract function")},e.prototype.selectWriter=function(t){throw new Error("Abstract function")},e}();return rf.default=n,rf}var of={},sf={},GE;function Zne(){if(GE)return sf;GE=1,Object.defineProperty(sf,"__esModule",{value:!0});var n=function(){function e(t){this._offset=t||0}return e.prototype.next=function(t){if(t===0)return-1;var r=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),r%t},e}();return sf.default=n,sf}var JE;function Xne(){if(JE)return of;JE=1;var n=oe&&oe.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&(l[c]=u[c])},o(s,a)};return function(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");o(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}(),e=oe&&oe.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(of,"__esModule",{value:!0});var t=e(Zne()),r=e(MI()),i=function(o){n(s,o);function s(a){var l=o.call(this)||this;return l._readersIndex=new t.default,l._writersIndex=new t.default,l._connectionPool=a,l}return s.prototype.selectReader=function(a){return this._select(a,this._readersIndex)},s.prototype.selectWriter=function(a){return this._select(a,this._writersIndex)},s.prototype._select=function(a,l){var u=a.length;if(u===0)return null;var c=l.next(u),f=c,d=null,g=Number.MAX_SAFE_INTEGER;do{var h=a[f],v=this._connectionPool.activeResourceCount(h);v<g&&(d=h,g=v),f===u-1?f=0:f++}while(f!==c);return d},s}(r.default);return of.default=i,of}var YE;function DI(){if(YE)return Co;YE=1;var n=oe&&oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Co,"__esModule",{value:!0}),Co.LeastConnectedLoadBalancingStrategy=Co.LoadBalancingStrategy=void 0;var e=n(MI());Co.LoadBalancingStrategy=e.default;var t=n(Xne());return Co.LeastConnectedLoadBalancingStrategy=t.default,Co.default=t.default,Co}var Pm={},af={},Im={},hs={},lf={},aa={},Am={},Il={},QE;function $ne(){if(QE)return Il;QE=1,Il.byteLength=a,Il.toByteArray=u,Il.fromByteArray=d;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e["-".charCodeAt(0)]=62,e["_".charCodeAt(0)]=63;function s(g){var h=g.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=g.indexOf("=");v===-1&&(v=h);var m=v===h?0:4-v%4;return[v,m]}function a(g){var h=s(g),v=h[0],m=h[1];return(v+m)*3/4-m}function l(g,h,v){return(h+v)*3/4-v}function u(g){var h,v=s(g),m=v[0],p=v[1],y=new t(l(g,m,p)),b=0,_=p>0?m-4:m,w;for(w=0;w<_;w+=4)h=e[g.charCodeAt(w)]<<18|e[g.charCodeAt(w+1)]<<12|e[g.charCodeAt(w+2)]<<6|e[g.charCodeAt(w+3)],y[b++]=h>>16&255,y[b++]=h>>8&255,y[b++]=h&255;return p===2&&(h=e[g.charCodeAt(w)]<<2|e[g.charCodeAt(w+1)]>>4,y[b++]=h&255),p===1&&(h=e[g.charCodeAt(w)]<<10|e[g.charCodeAt(w+1)]<<4|e[g.charCodeAt(w+2)]>>2,y[b++]=h>>8&255,y[b++]=h&255),y}function c(g){return n[g>>18&63]+n[g>>12&63]+n[g>>6&63]+n[g&63]}function f(g,h,v){for(var m,p=[],y=h;y<v;y+=3)m=(g[y]<<16&16711680)+(g[y+1]<<8&65280)+(g[y+2]&255),p.push(c(m));return p.join("")}function d(g){for(var h,v=g.length,m=v%3,p=[],y=16383,b=0,_=v-m;b<_;b+=y)p.push(f(g,b,b+y>_?_:b+y));return m===1?(h=g[v-1],p.push(n[h>>2]+n[h<<4&63]+"==")):m===2&&(h=(g[v-2]<<8)+g[v-1],p.push(n[h>>10]+n[h>>4&63]+n[h<<2&63]+"=")),p.join("")}return Il}var uf={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var ZE;function ere(){return ZE||(ZE=1,uf.read=function(n,e,t,r,i){var o,s,a=i*8-r-1,l=(1<<a)-1,u=l>>1,c=-7,f=t?i-1:0,d=t?-1:1,g=n[e+f];for(f+=d,o=g&(1<<-c)-1,g>>=-c,c+=a;c>0;o=o*256+n[e+f],f+=d,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=s*256+n[e+f],f+=d,c-=8);if(o===0)o=1-u;else{if(o===l)return s?NaN:(g?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-u}return(g?-1:1)*s*Math.pow(2,o-r)},uf.write=function(n,e,t,r,i,o){var s,a,l,u=o*8-i-1,c=(1<<u)-1,f=c>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:o-1,h=r?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+f>=1?e+=d/l:e+=d*Math.pow(2,1-f),e*l>=2&&(s++,l/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(e*l-1)*Math.pow(2,i),s=s+f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;n[t+g]=a&255,g+=h,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;n[t+g]=s&255,g+=h,s/=256,u-=8);n[t+g-h]|=v*128}),uf}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var XE;function Cy(){return XE||(XE=1,function(n){const e=$ne(),t=ere(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=y,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const x=new Uint8Array(1),C={foo:function(){return 42}};return Object.setPrototypeOf(C,Uint8Array.prototype),Object.setPrototypeOf(x,C),x.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.byteOffset}});function s(x){if(x>i)throw new RangeError('The value "'+x+'" is invalid for option "size"');const C=new Uint8Array(x);return Object.setPrototypeOf(C,a.prototype),C}function a(x,C,k){if(typeof x=="number"){if(typeof C=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(x)}return l(x,C,k)}a.poolSize=8192;function l(x,C,k){if(typeof x=="string")return d(x,C);if(ArrayBuffer.isView(x))return h(x);if(x==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x);if(He(x,ArrayBuffer)||x&&He(x.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(He(x,SharedArrayBuffer)||x&&He(x.buffer,SharedArrayBuffer)))return v(x,C,k);if(typeof x=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const K=x.valueOf&&x.valueOf();if(K!=null&&K!==x)return a.from(K,C,k);const ie=m(x);if(ie)return ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof x[Symbol.toPrimitive]=="function")return a.from(x[Symbol.toPrimitive]("string"),C,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x)}a.from=function(x,C,k){return l(x,C,k)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(x){if(typeof x!="number")throw new TypeError('"size" argument must be of type number');if(x<0)throw new RangeError('The value "'+x+'" is invalid for option "size"')}function c(x,C,k){return u(x),x<=0?s(x):C!==void 0?typeof k=="string"?s(x).fill(C,k):s(x).fill(C):s(x)}a.alloc=function(x,C,k){return c(x,C,k)};function f(x){return u(x),s(x<0?0:p(x)|0)}a.allocUnsafe=function(x){return f(x)},a.allocUnsafeSlow=function(x){return f(x)};function d(x,C){if((typeof C!="string"||C==="")&&(C="utf8"),!a.isEncoding(C))throw new TypeError("Unknown encoding: "+C);const k=b(x,C)|0;let K=s(k);const ie=K.write(x,C);return ie!==k&&(K=K.slice(0,ie)),K}function g(x){const C=x.length<0?0:p(x.length)|0,k=s(C);for(let K=0;K<C;K+=1)k[K]=x[K]&255;return k}function h(x){if(He(x,Uint8Array)){const C=new Uint8Array(x);return v(C.buffer,C.byteOffset,C.byteLength)}return g(x)}function v(x,C,k){if(C<0||x.byteLength<C)throw new RangeError('"offset" is outside of buffer bounds');if(x.byteLength<C+(k||0))throw new RangeError('"length" is outside of buffer bounds');let K;return C===void 0&&k===void 0?K=new Uint8Array(x):k===void 0?K=new Uint8Array(x,C):K=new Uint8Array(x,C,k),Object.setPrototypeOf(K,a.prototype),K}function m(x){if(a.isBuffer(x)){const C=p(x.length)|0,k=s(C);return k.length===0||x.copy(k,0,0,C),k}if(x.length!==void 0)return typeof x.length!="number"||Xe(x.length)?s(0):g(x);if(x.type==="Buffer"&&Array.isArray(x.data))return g(x.data)}function p(x){if(x>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return x|0}function y(x){return+x!=x&&(x=0),a.alloc(+x)}a.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==a.prototype},a.compare=function(C,k){if(He(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),He(k,Uint8Array)&&(k=a.from(k,k.offset,k.byteLength)),!a.isBuffer(C)||!a.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===k)return 0;let K=C.length,ie=k.length;for(let pe=0,ge=Math.min(K,ie);pe<ge;++pe)if(C[pe]!==k[pe]){K=C[pe],ie=k[pe];break}return K<ie?-1:ie<K?1:0},a.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(C,k){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return a.alloc(0);let K;if(k===void 0)for(k=0,K=0;K<C.length;++K)k+=C[K].length;const ie=a.allocUnsafe(k);let pe=0;for(K=0;K<C.length;++K){let ge=C[K];if(He(ge,Uint8Array))pe+ge.length>ie.length?(a.isBuffer(ge)||(ge=a.from(ge)),ge.copy(ie,pe)):Uint8Array.prototype.set.call(ie,ge,pe);else if(a.isBuffer(ge))ge.copy(ie,pe);else throw new TypeError('"list" argument must be an Array of Buffers');pe+=ge.length}return ie};function b(x,C){if(a.isBuffer(x))return x.length;if(ArrayBuffer.isView(x)||He(x,ArrayBuffer))return x.byteLength;if(typeof x!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof x);const k=x.length,K=arguments.length>2&&arguments[2]===!0;if(!K&&k===0)return 0;let ie=!1;for(;;)switch(C){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return fe(x).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k*2;case"hex":return k>>>1;case"base64":return Ie(x).length;default:if(ie)return K?-1:fe(x).length;C=(""+C).toLowerCase(),ie=!0}}a.byteLength=b;function _(x,C,k){let K=!1;if((C===void 0||C<0)&&(C=0),C>this.length||((k===void 0||k>this.length)&&(k=this.length),k<=0)||(k>>>=0,C>>>=0,k<=C))return"";for(x||(x="utf8");;)switch(x){case"hex":return A(this,C,k);case"utf8":case"utf-8":return L(this,C,k);case"ascii":return $(this,C,k);case"latin1":case"binary":return Z(this,C,k);case"base64":return H(this,C,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,C,k);default:if(K)throw new TypeError("Unknown encoding: "+x);x=(x+"").toLowerCase(),K=!0}}a.prototype._isBuffer=!0;function w(x,C,k){const K=x[C];x[C]=x[k],x[k]=K}a.prototype.swap16=function(){const C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let k=0;k<C;k+=2)w(this,k,k+1);return this},a.prototype.swap32=function(){const C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let k=0;k<C;k+=4)w(this,k,k+3),w(this,k+1,k+2);return this},a.prototype.swap64=function(){const C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let k=0;k<C;k+=8)w(this,k,k+7),w(this,k+1,k+6),w(this,k+2,k+5),w(this,k+3,k+4);return this},a.prototype.toString=function(){const C=this.length;return C===0?"":arguments.length===0?L(this,0,C):_.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(C){if(!a.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:a.compare(this,C)===0},a.prototype.inspect=function(){let C="";const k=n.INSPECT_MAX_BYTES;return C=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&(C+=" ... "),"<Buffer "+C+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(C,k,K,ie,pe){if(He(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),!a.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(k===void 0&&(k=0),K===void 0&&(K=C?C.length:0),ie===void 0&&(ie=0),pe===void 0&&(pe=this.length),k<0||K>C.length||ie<0||pe>this.length)throw new RangeError("out of range index");if(ie>=pe&&k>=K)return 0;if(ie>=pe)return-1;if(k>=K)return 1;if(k>>>=0,K>>>=0,ie>>>=0,pe>>>=0,this===C)return 0;let ge=pe-ie,Qe=K-k;const G=Math.min(ge,Qe),se=this.slice(ie,pe),re=C.slice(k,K);for(let _e=0;_e<G;++_e)if(se[_e]!==re[_e]){ge=se[_e],Qe=re[_e];break}return ge<Qe?-1:Qe<ge?1:0};function S(x,C,k,K,ie){if(x.length===0)return-1;if(typeof k=="string"?(K=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),k=+k,Xe(k)&&(k=ie?0:x.length-1),k<0&&(k=x.length+k),k>=x.length){if(ie)return-1;k=x.length-1}else if(k<0)if(ie)k=0;else return-1;if(typeof C=="string"&&(C=a.from(C,K)),a.isBuffer(C))return C.length===0?-1:E(x,C,k,K,ie);if(typeof C=="number")return C=C&255,typeof Uint8Array.prototype.indexOf=="function"?ie?Uint8Array.prototype.indexOf.call(x,C,k):Uint8Array.prototype.lastIndexOf.call(x,C,k):E(x,[C],k,K,ie);throw new TypeError("val must be string, number or Buffer")}function E(x,C,k,K,ie){let pe=1,ge=x.length,Qe=C.length;if(K!==void 0&&(K=String(K).toLowerCase(),K==="ucs2"||K==="ucs-2"||K==="utf16le"||K==="utf-16le")){if(x.length<2||C.length<2)return-1;pe=2,ge/=2,Qe/=2,k/=2}function G(re,_e){return pe===1?re[_e]:re.readUInt16BE(_e*pe)}let se;if(ie){let re=-1;for(se=k;se<ge;se++)if(G(x,se)===G(C,re===-1?0:se-re)){if(re===-1&&(re=se),se-re+1===Qe)return re*pe}else re!==-1&&(se-=se-re),re=-1}else for(k+Qe>ge&&(k=ge-Qe),se=k;se>=0;se--){let re=!0;for(let _e=0;_e<Qe;_e++)if(G(x,se+_e)!==G(C,_e)){re=!1;break}if(re)return se}return-1}a.prototype.includes=function(C,k,K){return this.indexOf(C,k,K)!==-1},a.prototype.indexOf=function(C,k,K){return S(this,C,k,K,!0)},a.prototype.lastIndexOf=function(C,k,K){return S(this,C,k,K,!1)};function O(x,C,k,K){k=Number(k)||0;const ie=x.length-k;K?(K=Number(K),K>ie&&(K=ie)):K=ie;const pe=C.length;K>pe/2&&(K=pe/2);let ge;for(ge=0;ge<K;++ge){const Qe=parseInt(C.substr(ge*2,2),16);if(Xe(Qe))return ge;x[k+ge]=Qe}return ge}function R(x,C,k,K){return De(fe(C,x.length-k),x,k,K)}function D(x,C,k,K){return De(ve(C),x,k,K)}function F(x,C,k,K){return De(Ie(C),x,k,K)}function B(x,C,k,K){return De(de(C,x.length-k),x,k,K)}a.prototype.write=function(C,k,K,ie){if(k===void 0)ie="utf8",K=this.length,k=0;else if(K===void 0&&typeof k=="string")ie=k,K=this.length,k=0;else if(isFinite(k))k=k>>>0,isFinite(K)?(K=K>>>0,ie===void 0&&(ie="utf8")):(ie=K,K=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const pe=this.length-k;if((K===void 0||K>pe)&&(K=pe),C.length>0&&(K<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");ie||(ie="utf8");let ge=!1;for(;;)switch(ie){case"hex":return O(this,C,k,K);case"utf8":case"utf-8":return R(this,C,k,K);case"ascii":case"latin1":case"binary":return D(this,C,k,K);case"base64":return F(this,C,k,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,C,k,K);default:if(ge)throw new TypeError("Unknown encoding: "+ie);ie=(""+ie).toLowerCase(),ge=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(x,C,k){return C===0&&k===x.length?e.fromByteArray(x):e.fromByteArray(x.slice(C,k))}function L(x,C,k){k=Math.min(x.length,k);const K=[];let ie=C;for(;ie<k;){const pe=x[ie];let ge=null,Qe=pe>239?4:pe>223?3:pe>191?2:1;if(ie+Qe<=k){let G,se,re,_e;switch(Qe){case 1:pe<128&&(ge=pe);break;case 2:G=x[ie+1],(G&192)===128&&(_e=(pe&31)<<6|G&63,_e>127&&(ge=_e));break;case 3:G=x[ie+1],se=x[ie+2],(G&192)===128&&(se&192)===128&&(_e=(pe&15)<<12|(G&63)<<6|se&63,_e>2047&&(_e<55296||_e>57343)&&(ge=_e));break;case 4:G=x[ie+1],se=x[ie+2],re=x[ie+3],(G&192)===128&&(se&192)===128&&(re&192)===128&&(_e=(pe&15)<<18|(G&63)<<12|(se&63)<<6|re&63,_e>65535&&_e<1114112&&(ge=_e))}}ge===null?(ge=65533,Qe=1):ge>65535&&(ge-=65536,K.push(ge>>>10&1023|55296),ge=56320|ge&1023),K.push(ge),ie+=Qe}return U(K)}const N=4096;function U(x){const C=x.length;if(C<=N)return String.fromCharCode.apply(String,x);let k="",K=0;for(;K<C;)k+=String.fromCharCode.apply(String,x.slice(K,K+=N));return k}function $(x,C,k){let K="";k=Math.min(x.length,k);for(let ie=C;ie<k;++ie)K+=String.fromCharCode(x[ie]&127);return K}function Z(x,C,k){let K="";k=Math.min(x.length,k);for(let ie=C;ie<k;++ie)K+=String.fromCharCode(x[ie]);return K}function A(x,C,k){const K=x.length;(!C||C<0)&&(C=0),(!k||k<0||k>K)&&(k=K);let ie="";for(let pe=C;pe<k;++pe)ie+=mt[x[pe]];return ie}function P(x,C,k){const K=x.slice(C,k);let ie="";for(let pe=0;pe<K.length-1;pe+=2)ie+=String.fromCharCode(K[pe]+K[pe+1]*256);return ie}a.prototype.slice=function(C,k){const K=this.length;C=~~C,k=k===void 0?K:~~k,C<0?(C+=K,C<0&&(C=0)):C>K&&(C=K),k<0?(k+=K,k<0&&(k=0)):k>K&&(k=K),k<C&&(k=C);const ie=this.subarray(C,k);return Object.setPrototypeOf(ie,a.prototype),ie};function V(x,C,k){if(x%1!==0||x<0)throw new RangeError("offset is not uint");if(x+C>k)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(C,k,K){C=C>>>0,k=k>>>0,K||V(C,k,this.length);let ie=this[C],pe=1,ge=0;for(;++ge<k&&(pe*=256);)ie+=this[C+ge]*pe;return ie},a.prototype.readUintBE=a.prototype.readUIntBE=function(C,k,K){C=C>>>0,k=k>>>0,K||V(C,k,this.length);let ie=this[C+--k],pe=1;for(;k>0&&(pe*=256);)ie+=this[C+--k]*pe;return ie},a.prototype.readUint8=a.prototype.readUInt8=function(C,k){return C=C>>>0,k||V(C,1,this.length),this[C]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(C,k){return C=C>>>0,k||V(C,2,this.length),this[C]|this[C+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(C,k){return C=C>>>0,k||V(C,2,this.length),this[C]<<8|this[C+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(C,k){return C=C>>>0,k||V(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(C,k){return C=C>>>0,k||V(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},a.prototype.readBigUInt64LE=be(function(C){C=C>>>0,Ae(C,"offset");const k=this[C],K=this[C+7];(k===void 0||K===void 0)&&ye(C,this.length-8);const ie=k+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,pe=this[++C]+this[++C]*2**8+this[++C]*2**16+K*2**24;return BigInt(ie)+(BigInt(pe)<<BigInt(32))}),a.prototype.readBigUInt64BE=be(function(C){C=C>>>0,Ae(C,"offset");const k=this[C],K=this[C+7];(k===void 0||K===void 0)&&ye(C,this.length-8);const ie=k*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],pe=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+K;return(BigInt(ie)<<BigInt(32))+BigInt(pe)}),a.prototype.readIntLE=function(C,k,K){C=C>>>0,k=k>>>0,K||V(C,k,this.length);let ie=this[C],pe=1,ge=0;for(;++ge<k&&(pe*=256);)ie+=this[C+ge]*pe;return pe*=128,ie>=pe&&(ie-=Math.pow(2,8*k)),ie},a.prototype.readIntBE=function(C,k,K){C=C>>>0,k=k>>>0,K||V(C,k,this.length);let ie=k,pe=1,ge=this[C+--ie];for(;ie>0&&(pe*=256);)ge+=this[C+--ie]*pe;return pe*=128,ge>=pe&&(ge-=Math.pow(2,8*k)),ge},a.prototype.readInt8=function(C,k){return C=C>>>0,k||V(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},a.prototype.readInt16LE=function(C,k){C=C>>>0,k||V(C,2,this.length);const K=this[C]|this[C+1]<<8;return K&32768?K|4294901760:K},a.prototype.readInt16BE=function(C,k){C=C>>>0,k||V(C,2,this.length);const K=this[C+1]|this[C]<<8;return K&32768?K|4294901760:K},a.prototype.readInt32LE=function(C,k){return C=C>>>0,k||V(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},a.prototype.readInt32BE=function(C,k){return C=C>>>0,k||V(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},a.prototype.readBigInt64LE=be(function(C){C=C>>>0,Ae(C,"offset");const k=this[C],K=this[C+7];(k===void 0||K===void 0)&&ye(C,this.length-8);const ie=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(K<<24);return(BigInt(ie)<<BigInt(32))+BigInt(k+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),a.prototype.readBigInt64BE=be(function(C){C=C>>>0,Ae(C,"offset");const k=this[C],K=this[C+7];(k===void 0||K===void 0)&&ye(C,this.length-8);const ie=(k<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt(ie)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+K)}),a.prototype.readFloatLE=function(C,k){return C=C>>>0,k||V(C,4,this.length),t.read(this,C,!0,23,4)},a.prototype.readFloatBE=function(C,k){return C=C>>>0,k||V(C,4,this.length),t.read(this,C,!1,23,4)},a.prototype.readDoubleLE=function(C,k){return C=C>>>0,k||V(C,8,this.length),t.read(this,C,!0,52,8)},a.prototype.readDoubleBE=function(C,k){return C=C>>>0,k||V(C,8,this.length),t.read(this,C,!1,52,8)};function W(x,C,k,K,ie,pe){if(!a.isBuffer(x))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>ie||C<pe)throw new RangeError('"value" argument is out of bounds');if(k+K>x.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(C,k,K,ie){if(C=+C,k=k>>>0,K=K>>>0,!ie){const Qe=Math.pow(2,8*K)-1;W(this,C,k,K,Qe,0)}let pe=1,ge=0;for(this[k]=C&255;++ge<K&&(pe*=256);)this[k+ge]=C/pe&255;return k+K},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(C,k,K,ie){if(C=+C,k=k>>>0,K=K>>>0,!ie){const Qe=Math.pow(2,8*K)-1;W(this,C,k,K,Qe,0)}let pe=K-1,ge=1;for(this[k+pe]=C&255;--pe>=0&&(ge*=256);)this[k+pe]=C/ge&255;return k+K},a.prototype.writeUint8=a.prototype.writeUInt8=function(C,k,K){return C=+C,k=k>>>0,K||W(this,C,k,1,255,0),this[k]=C&255,k+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(C,k,K){return C=+C,k=k>>>0,K||W(this,C,k,2,65535,0),this[k]=C&255,this[k+1]=C>>>8,k+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(C,k,K){return C=+C,k=k>>>0,K||W(this,C,k,2,65535,0),this[k]=C>>>8,this[k+1]=C&255,k+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(C,k,K){return C=+C,k=k>>>0,K||W(this,C,k,4,4294967295,0),this[k+3]=C>>>24,this[k+2]=C>>>16,this[k+1]=C>>>8,this[k]=C&255,k+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(C,k,K){return C=+C,k=k>>>0,K||W(this,C,k,4,4294967295,0),this[k]=C>>>24,this[k+1]=C>>>16,this[k+2]=C>>>8,this[k+3]=C&255,k+4};function z(x,C,k,K,ie){Fe(C,K,ie,x,k,7);let pe=Number(C&BigInt(4294967295));x[k++]=pe,pe=pe>>8,x[k++]=pe,pe=pe>>8,x[k++]=pe,pe=pe>>8,x[k++]=pe;let ge=Number(C>>BigInt(32)&BigInt(4294967295));return x[k++]=ge,ge=ge>>8,x[k++]=ge,ge=ge>>8,x[k++]=ge,ge=ge>>8,x[k++]=ge,k}function I(x,C,k,K,ie){Fe(C,K,ie,x,k,7);let pe=Number(C&BigInt(4294967295));x[k+7]=pe,pe=pe>>8,x[k+6]=pe,pe=pe>>8,x[k+5]=pe,pe=pe>>8,x[k+4]=pe;let ge=Number(C>>BigInt(32)&BigInt(4294967295));return x[k+3]=ge,ge=ge>>8,x[k+2]=ge,ge=ge>>8,x[k+1]=ge,ge=ge>>8,x[k]=ge,k+8}a.prototype.writeBigUInt64LE=be(function(C,k=0){return z(this,C,k,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=be(function(C,k=0){return I(this,C,k,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(C,k,K,ie){if(C=+C,k=k>>>0,!ie){const G=Math.pow(2,8*K-1);W(this,C,k,K,G-1,-G)}let pe=0,ge=1,Qe=0;for(this[k]=C&255;++pe<K&&(ge*=256);)C<0&&Qe===0&&this[k+pe-1]!==0&&(Qe=1),this[k+pe]=(C/ge>>0)-Qe&255;return k+K},a.prototype.writeIntBE=function(C,k,K,ie){if(C=+C,k=k>>>0,!ie){const G=Math.pow(2,8*K-1);W(this,C,k,K,G-1,-G)}let pe=K-1,ge=1,Qe=0;for(this[k+pe]=C&255;--pe>=0&&(ge*=256);)C<0&&Qe===0&&this[k+pe+1]!==0&&(Qe=1),this[k+pe]=(C/ge>>0)-Qe&255;return k+K},a.prototype.writeInt8=function(C,k,K){return C=+C,k=k>>>0,K||W(this,C,k,1,127,-128),C<0&&(C=255+C+1),this[k]=C&255,k+1},a.prototype.writeInt16LE=function(C,k,K){return C=+C,k=k>>>0,K||W(this,C,k,2,32767,-32768),this[k]=C&255,this[k+1]=C>>>8,k+2},a.prototype.writeInt16BE=function(C,k,K){return C=+C,k=k>>>0,K||W(this,C,k,2,32767,-32768),this[k]=C>>>8,this[k+1]=C&255,k+2},a.prototype.writeInt32LE=function(C,k,K){return C=+C,k=k>>>0,K||W(this,C,k,4,2147483647,-2147483648),this[k]=C&255,this[k+1]=C>>>8,this[k+2]=C>>>16,this[k+3]=C>>>24,k+4},a.prototype.writeInt32BE=function(C,k,K){return C=+C,k=k>>>0,K||W(this,C,k,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[k]=C>>>24,this[k+1]=C>>>16,this[k+2]=C>>>8,this[k+3]=C&255,k+4},a.prototype.writeBigInt64LE=be(function(C,k=0){return z(this,C,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=be(function(C,k=0){return I(this,C,k,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function M(x,C,k,K,ie,pe){if(k+K>x.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function J(x,C,k,K,ie){return C=+C,k=k>>>0,ie||M(x,C,k,4),t.write(x,C,k,K,23,4),k+4}a.prototype.writeFloatLE=function(C,k,K){return J(this,C,k,!0,K)},a.prototype.writeFloatBE=function(C,k,K){return J(this,C,k,!1,K)};function q(x,C,k,K,ie){return C=+C,k=k>>>0,ie||M(x,C,k,8),t.write(x,C,k,K,52,8),k+8}a.prototype.writeDoubleLE=function(C,k,K){return q(this,C,k,!0,K)},a.prototype.writeDoubleBE=function(C,k,K){return q(this,C,k,!1,K)},a.prototype.copy=function(C,k,K,ie){if(!a.isBuffer(C))throw new TypeError("argument should be a Buffer");if(K||(K=0),!ie&&ie!==0&&(ie=this.length),k>=C.length&&(k=C.length),k||(k=0),ie>0&&ie<K&&(ie=K),ie===K||C.length===0||this.length===0)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("sourceEnd out of bounds");ie>this.length&&(ie=this.length),C.length-k<ie-K&&(ie=C.length-k+K);const pe=ie-K;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(k,K,ie):Uint8Array.prototype.set.call(C,this.subarray(K,ie),k),pe},a.prototype.fill=function(C,k,K,ie){if(typeof C=="string"){if(typeof k=="string"?(ie=k,k=0,K=this.length):typeof K=="string"&&(ie=K,K=this.length),ie!==void 0&&typeof ie!="string")throw new TypeError("encoding must be a string");if(typeof ie=="string"&&!a.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);if(C.length===1){const ge=C.charCodeAt(0);(ie==="utf8"&&ge<128||ie==="latin1")&&(C=ge)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(k<0||this.length<k||this.length<K)throw new RangeError("Out of range index");if(K<=k)return this;k=k>>>0,K=K===void 0?this.length:K>>>0,C||(C=0);let pe;if(typeof C=="number")for(pe=k;pe<K;++pe)this[pe]=C;else{const ge=a.isBuffer(C)?C:a.from(C,ie),Qe=ge.length;if(Qe===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(pe=0;pe<K-k;++pe)this[pe+k]=ge[pe%Qe]}return this};const Q={};function ae(x,C,k){Q[x]=class extends k{constructor(){super(),Object.defineProperty(this,"message",{value:C.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${x}]`,this.stack,delete this.name}get code(){return x}set code(ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ie,writable:!0})}toString(){return`${this.name} [${x}]: ${this.message}`}}}ae("ERR_BUFFER_OUT_OF_BOUNDS",function(x){return x?`${x} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ae("ERR_INVALID_ARG_TYPE",function(x,C){return`The "${x}" argument must be of type number. Received type ${typeof C}`},TypeError),ae("ERR_OUT_OF_RANGE",function(x,C,k){let K=`The value of "${x}" is out of range.`,ie=k;return Number.isInteger(k)&&Math.abs(k)>2**32?ie=he(String(k)):typeof k=="bigint"&&(ie=String(k),(k>BigInt(2)**BigInt(32)||k<-(BigInt(2)**BigInt(32)))&&(ie=he(ie)),ie+="n"),K+=` It must be ${C}. Received ${ie}`,K},RangeError);function he(x){let C="",k=x.length;const K=x[0]==="-"?1:0;for(;k>=K+4;k-=3)C=`_${x.slice(k-3,k)}${C}`;return`${x.slice(0,k)}${C}`}function Pe(x,C,k){Ae(C,"offset"),(x[C]===void 0||x[C+k]===void 0)&&ye(C,x.length-(k+1))}function Fe(x,C,k,K,ie,pe){if(x>k||x<C){const ge=typeof C=="bigint"?"n":"";let Qe;throw pe>3?C===0||C===BigInt(0)?Qe=`>= 0${ge} and < 2${ge} ** ${(pe+1)*8}${ge}`:Qe=`>= -(2${ge} ** ${(pe+1)*8-1}${ge}) and < 2 ** ${(pe+1)*8-1}${ge}`:Qe=`>= ${C}${ge} and <= ${k}${ge}`,new Q.ERR_OUT_OF_RANGE("value",Qe,x)}Pe(K,ie,pe)}function Ae(x,C){if(typeof x!="number")throw new Q.ERR_INVALID_ARG_TYPE(C,"number",x)}function ye(x,C,k){throw Math.floor(x)!==x?(Ae(x,k),new Q.ERR_OUT_OF_RANGE(k||"offset","an integer",x)):C<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE(k||"offset",`>= ${k?1:0} and <= ${C}`,x)}const Me=/[^+/0-9A-Za-z-_]/g;function xe(x){if(x=x.split("=")[0],x=x.trim().replace(Me,""),x.length<2)return"";for(;x.length%4!==0;)x=x+"=";return x}function fe(x,C){C=C||1/0;let k;const K=x.length;let ie=null;const pe=[];for(let ge=0;ge<K;++ge){if(k=x.charCodeAt(ge),k>55295&&k<57344){if(!ie){if(k>56319){(C-=3)>-1&&pe.push(239,191,189);continue}else if(ge+1===K){(C-=3)>-1&&pe.push(239,191,189);continue}ie=k;continue}if(k<56320){(C-=3)>-1&&pe.push(239,191,189),ie=k;continue}k=(ie-55296<<10|k-56320)+65536}else ie&&(C-=3)>-1&&pe.push(239,191,189);if(ie=null,k<128){if((C-=1)<0)break;pe.push(k)}else if(k<2048){if((C-=2)<0)break;pe.push(k>>6|192,k&63|128)}else if(k<65536){if((C-=3)<0)break;pe.push(k>>12|224,k>>6&63|128,k&63|128)}else if(k<1114112){if((C-=4)<0)break;pe.push(k>>18|240,k>>12&63|128,k>>6&63|128,k&63|128)}else throw new Error("Invalid code point")}return pe}function ve(x){const C=[];for(let k=0;k<x.length;++k)C.push(x.charCodeAt(k)&255);return C}function de(x,C){let k,K,ie;const pe=[];for(let ge=0;ge<x.length&&!((C-=2)<0);++ge)k=x.charCodeAt(ge),K=k>>8,ie=k%256,pe.push(ie),pe.push(K);return pe}function Ie(x){return e.toByteArray(xe(x))}function De(x,C,k,K){let ie;for(ie=0;ie<K&&!(ie+k>=C.length||ie>=x.length);++ie)C[ie+k]=x[ie];return ie}function He(x,C){return x instanceof C||x!=null&&x.constructor!=null&&x.constructor.name!=null&&x.constructor.name===C.name}function Xe(x){return x!==x}const mt=function(){const x="0123456789abcdef",C=new Array(256);for(let k=0;k<16;++k){const K=k*16;for(let ie=0;ie<16;++ie)C[K+ie]=x[k]+x[ie]}return C}();function be(x){return typeof BigInt>"u"?Y:x}function Y(){throw new Error("BigInt not supported")}}(Am)),Am}var la={},cf={},$E;function LI(){if($E)return cf;$E=1;var n=oe&&oe.__extends||function(){var r=function(i,o){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},r(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");r(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}();Object.defineProperty(cf,"__esModule",{value:!0});var e=function(){function r(i){this.position=0,this.length=i}return r.prototype.getUInt8=function(i){throw new Error("Not implemented")},r.prototype.getInt8=function(i){throw new Error("Not implemented")},r.prototype.getFloat64=function(i){throw new Error("Not implemented")},r.prototype.putUInt8=function(i,o){throw new Error("Not implemented")},r.prototype.putInt8=function(i,o){throw new Error("Not implemented")},r.prototype.putFloat64=function(i,o){throw new Error("Not implemented")},r.prototype.getInt16=function(i){return this.getInt8(i)<<8|this.getUInt8(i+1)},r.prototype.getUInt16=function(i){return this.getUInt8(i)<<8|this.getUInt8(i+1)},r.prototype.getInt32=function(i){return this.getInt8(i)<<24|this.getUInt8(i+1)<<16|this.getUInt8(i+2)<<8|this.getUInt8(i+3)},r.prototype.getUInt32=function(i){return this.getUInt8(i)<<24|this.getUInt8(i+1)<<16|this.getUInt8(i+2)<<8|this.getUInt8(i+3)},r.prototype.getInt64=function(i){return this.getInt8(i)<<56|this.getUInt8(i+1)<<48|this.getUInt8(i+2)<<40|this.getUInt8(i+3)<<32|this.getUInt8(i+4)<<24|this.getUInt8(i+5)<<16|this.getUInt8(i+6)<<8|this.getUInt8(i+7)},r.prototype.getSlice=function(i,o){return new t(i,o,this)},r.prototype.putInt16=function(i,o){this.putInt8(i,o>>8),this.putUInt8(i+1,o&255)},r.prototype.putUInt16=function(i,o){this.putUInt8(i,o>>8&255),this.putUInt8(i+1,o&255)},r.prototype.putInt32=function(i,o){this.putInt8(i,o>>24),this.putUInt8(i+1,o>>16&255),this.putUInt8(i+2,o>>8&255),this.putUInt8(i+3,o&255)},r.prototype.putUInt32=function(i,o){this.putUInt8(i,o>>24&255),this.putUInt8(i+1,o>>16&255),this.putUInt8(i+2,o>>8&255),this.putUInt8(i+3,o&255)},r.prototype.putInt64=function(i,o){this.putInt8(i,o>>48),this.putUInt8(i+1,o>>42&255),this.putUInt8(i+2,o>>36&255),this.putUInt8(i+3,o>>30&255),this.putUInt8(i+4,o>>24&255),this.putUInt8(i+5,o>>16&255),this.putUInt8(i+6,o>>8&255),this.putUInt8(i+7,o&255)},r.prototype.putBytes=function(i,o){for(var s=0,a=o.remaining();s<a;s++)this.putUInt8(i+s,o.readUInt8())},r.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},r.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},r.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},r.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},r.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},r.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},r.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},r.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},r.prototype.writeUInt8=function(i){this.putUInt8(this._updatePos(1),i)},r.prototype.writeInt8=function(i){this.putInt8(this._updatePos(1),i)},r.prototype.writeInt16=function(i){this.putInt16(this._updatePos(2),i)},r.prototype.writeInt32=function(i){this.putInt32(this._updatePos(4),i)},r.prototype.writeUInt32=function(i){this.putUInt32(this._updatePos(4),i)},r.prototype.writeInt64=function(i){this.putInt64(this._updatePos(8),i)},r.prototype.writeFloat64=function(i){this.putFloat64(this._updatePos(8),i)},r.prototype.writeBytes=function(i){this.putBytes(this._updatePos(i.remaining()),i)},r.prototype.readSlice=function(i){return this.getSlice(this._updatePos(i),i)},r.prototype._updatePos=function(i){var o=this.position;return this.position+=i,o},r.prototype.remaining=function(){return this.length-this.position},r.prototype.hasRemaining=function(){return this.remaining()>0},r.prototype.reset=function(){this.position=0},r.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},r.prototype.toHex=function(){for(var i="",o=0;o<this.length;o++){var s=this.getUInt8(o).toString(16);s.length===1&&(s="0"+s),i+=s,o!==this.length-1&&(i+=" ")}return i},r}();cf.default=e;var t=function(r){n(i,r);function i(o,s,a){var l=r.call(this,s)||this;return l._start=o,l._inner=a,l}return i.prototype.putUInt8=function(o,s){this._inner.putUInt8(this._start+o,s)},i.prototype.getUInt8=function(o){return this._inner.getUInt8(this._start+o)},i.prototype.putInt8=function(o,s){this._inner.putInt8(this._start+o,s)},i.prototype.putFloat64=function(o,s){this._inner.putFloat64(this._start+o,s)},i.prototype.getInt8=function(o){return this._inner.getInt8(this._start+o)},i.prototype.getFloat64=function(o){return this._inner.getFloat64(this._start+o)},i}(e);return cf}var eC;function ky(){if(eC)return la;eC=1;var n=oe&&oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(la,"__esModule",{value:!0}),la.BaseBuffer=void 0;var e=n(LI());return la.BaseBuffer=e.default,la.default=e.default,la}var tC;function ac(){if(tC)return aa;tC=1;var n=oe&&oe.__extends||function(){var a=function(l,u){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},a(l,u)};return function(l,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");a(l,u);function c(){this.constructor=l}l.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),e=oe&&oe.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(aa,"__esModule",{value:!0}),aa.alloc=void 0;var t=e(Cy()),r=e(ky()),i=function(a){n(l,a);function l(u){var c=this,f=s(u);return c=a.call(this,f.length)||this,c._buffer=f,c}return l.prototype.getUInt8=function(u){return this._buffer.readUInt8(u)},l.prototype.getInt8=function(u){return this._buffer.readInt8(u)},l.prototype.getFloat64=function(u){return this._buffer.readDoubleBE(u)},l.prototype.putUInt8=function(u,c){this._buffer.writeUInt8(c,u)},l.prototype.putInt8=function(u,c){this._buffer.writeInt8(c,u)},l.prototype.putFloat64=function(u,c){this._buffer.writeDoubleBE(c,u)},l.prototype.putBytes=function(u,c){if(c instanceof l){var f=Math.min(c.length-c.position,this.length-u);c._buffer.copy(this._buffer,u,c.position,c.position+f),c.position+=f}else a.prototype.putBytes.call(this,u,c)},l.prototype.getSlice=function(u,c){return new l(this._buffer.slice(u,u+c))},l}(r.default);aa.default=i;function o(a){return new i(a)}aa.alloc=o;function s(a){return a instanceof t.default.Buffer?a:typeof a=="number"&&typeof t.default.Buffer.alloc=="function"?t.default.Buffer.alloc(a):new t.default.Buffer(a)}return aa}var nC;function tre(){if(nC)return lf;nC=1;var n=oe&&oe.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(lf,"__esModule",{value:!0});var e=n(ac()),t=Mt(),r=t.internal.util,i=r.ENCRYPTION_OFF,o=r.ENCRYPTION_ON,s=1,a=3,l=function(){function b(_,w,S){w===void 0&&(w=y),S===void 0&&(S=function(F){return new WebSocket(F)}),this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=_;var E=g(_,w),O=E.scheme,R=E.error;if(R){this._error=R;return}this._ws=u(O,_.address,S),this._ws.binaryType="arraybuffer";var D=this;this._ws.onclose=function(F){F&&!F.wasClean&&D._handleConnectionError(),D._open=!1},this._ws.onopen=function(){D._clearConnectionTimeout();var F=D._pending;D._pending=null;for(var B=0;B<F.length;B++)D.write(F[B])},this._ws.onmessage=function(F){if(D.onmessage){var B=new e.default(F.data);D.onmessage(B)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}return b.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired){this._error=(0,t.newError)("Failed to establish connection in "+this._config.connectionTimeout+"ms",this._config.connectionErrorCode),this.onerror&&this.onerror(this._error);return}this._open&&(this._error=(0,t.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},b.prototype.write=function(_){if(this._pending!==null)this._pending.push(_);else if(_ instanceof e.default)try{this._ws.send(_._buffer)}catch(w){if(this._ws.readyState!==s)this._handleConnectionError();else throw w}else throw(0,t.newError)("Don't know how to send buffer: "+_)},b.prototype.close=function(){var _=this;return new Promise(function(w,S){_._ws&&_._ws.readyState!==a?(_._open=!1,_._clearConnectionTimeout(),_._ws.onclose=function(){return w()},_._ws.close()):w()})},b.prototype.setupReceiveTimeout=function(_){},b.prototype.stopReceiveTimeout=function(){},b.prototype.startReceiveTimeout=function(){},b.prototype._setupConnectionTimeout=function(){var _=this,w=this._config.connectionTimeout;if(w){var S=this._ws;return setTimeout(function(){S.readyState!==s&&(_._connectionTimeoutFired=!0,S.close())},w)}return null},b.prototype._clearConnectionTimeout=function(){var _=this._connectionTimeoutId;(_||_===0)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(_))},b}();lf.default=l;function u(b,_,w){var S=b+"://"+_.asHostPort();try{return w(S)}catch(O){if(c(O,_)){var E=d(b,_);return w(E)}else throw O}}function c(b,_){return b.name==="SyntaxError"&&f(_.asHostPort())}function f(b){return b.charAt(0)==="["&&b.indexOf("]")!==-1}function d(b,_){var w=_.host().replace(new RegExp(":","g"),"-"),S=w.replace("%","s"),E=S+".ipv6-literal.net";return b+"://"+E+":"+_.port()}function g(b,_){var w=h(b),S=v(b),E=b.trust,O=m(_);if(p(w,S,O),S)return{scheme:"ws",error:null};if(O)return{scheme:"wss",error:null};if(w){if(!E||E==="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES")return{scheme:"wss",error:null};var R=(0,t.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+E+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+i+'"` in the driver configuration.');return{scheme:null,error:R}}return{scheme:"ws",error:null}}function h(b){return b.encrypted===!0||b.encrypted===o}function v(b){return b.encrypted===!1||b.encrypted===i}function m(b){var _=typeof b=="function"?b():"";return _&&_.toLowerCase().indexOf("https")>=0}function p(b,_,w){w===null||(b&&!w?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):_&&w&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}function y(){return typeof window<"u"&&window.location?window.location.protocol:null}return lf}var ff={},rC;function nre(){if(rC)return ff;rC=1;var n=oe&&oe.__extends||function(){var i=function(o,s){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])},i(o,s)};return function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");i(o,s);function a(){this.constructor=o}o.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}();Object.defineProperty(ff,"__esModule",{value:!0});var e=Mt(),t=e.internal.resolver.BaseHostNameResolver,r=function(i){n(o,i);function o(){return i!==null&&i.apply(this,arguments)||this}return o.prototype.resolve=function(s){return this._resolveToItself(s)},o}(t);return ff.default=r,ff}var iC;function rre(){if(iC)return hs;iC=1;var n=oe&&oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hs,"__esModule",{value:!0}),hs.HostNameResolver=hs.Channel=void 0;var e=n(tre()),t=n(nre());return hs.Channel=e.default,hs.HostNameResolver=t.default,hs}var ds={},hf={},oC;function ire(){if(oC)return hf;oC=1;var n=oe&&oe.__extends||function(){var i=function(o,s){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])},i(o,s)};return function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");i(o,s);function a(){this.constructor=o}o.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}();Object.defineProperty(hf,"__esModule",{value:!0});var e=ky(),t=ac(),r=function(i){n(o,i);function o(s){for(var a=this,l=0,u=0;u<s.length;u++)l+=s[u].length;return a=i.call(this,l)||this,a._buffers=s,a}return o.prototype.getUInt8=function(s){for(var a=0;a<this._buffers.length;a++){var l=this._buffers[a];if(s>=l.length)s-=l.length;else return l.getUInt8(s)}},o.prototype.getInt8=function(s){for(var a=0;a<this._buffers.length;a++){var l=this._buffers[a];if(s>=l.length)s-=l.length;else return l.getInt8(s)}},o.prototype.getFloat64=function(s){for(var a=(0,t.alloc)(8),l=0;l<8;l++)a.putUInt8(l,this.getUInt8(s+l));return a.getFloat64(0)},o}(e.BaseBuffer);return hf.default=r,hf}var sC;function ore(){if(sC)return ds;sC=1;var n=oe&&oe.__extends||function(){var c=function(f,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,h){g.__proto__=h}||function(g,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(g[v]=h[v])},c(f,d)};return function(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");c(f,d);function g(){this.constructor=f}f.prototype=d===null?Object.create(d):(g.prototype=d.prototype,new g)}}(),e=oe&&oe.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(ds,"__esModule",{value:!0}),ds.Dechunker=ds.Chunker=void 0;var t=e(LI()),r=ac(),i=e(ire()),o=2,s=0,a=1400,l=function(c){n(f,c);function f(d,g){var h=c.call(this,0)||this;return h._bufferSize=g||a,h._ch=d,h._buffer=(0,r.alloc)(h._bufferSize),h._currentChunkStart=0,h._chunkOpen=!1,h}return f.prototype.putUInt8=function(d,g){this._ensure(1),this._buffer.writeUInt8(g)},f.prototype.putInt8=function(d,g){this._ensure(1),this._buffer.writeInt8(g)},f.prototype.putFloat64=function(d,g){this._ensure(8),this._buffer.writeFloat64(g)},f.prototype.putBytes=function(d,g){for(;g.remaining()>0;)this._ensure(1),this._buffer.remaining()>g.remaining()?this._buffer.writeBytes(g):this._buffer.writeBytes(g.readSlice(this._buffer.remaining()));return this},f.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var d=this._buffer;this._buffer=null,this._ch.write(d.getSlice(0,d.position)),this._buffer=(0,r.alloc)(this._bufferSize),this._chunkOpen=!1}return this},f.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<o&&this.flush(),this._buffer.writeInt16(s)},f.prototype._ensure=function(d){var g=this._chunkOpen?d:d+o;this._buffer.remaining()<g&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+o,this._chunkOpen=!0)},f.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var d=this._buffer.position-(this._currentChunkStart+o);this._buffer.putUInt16(this._currentChunkStart,d),this._chunkOpen=!1}},f}(t.default);ds.Chunker=l;var u=function(){function c(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return c.prototype.AWAITING_CHUNK=function(f){return f.remaining()>=2?this._onHeader(f.readUInt16()):(this._partialChunkHeader=f.readUInt8()<<8,this.IN_HEADER)},c.prototype.IN_HEADER=function(f){return this._onHeader((this._partialChunkHeader|f.readUInt8())&65535)},c.prototype.IN_CHUNK=function(f){return this._chunkSize<=f.remaining()?(this._currentMessage.push(f.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=f.remaining(),this._currentMessage.push(f.readSlice(f.remaining())),this.IN_CHUNK)},c.prototype.CLOSED=function(f){},c.prototype._onHeader=function(f){if(f===0){var d=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:d=this._currentMessage[0];break;default:d=new i.default(this._currentMessage);break}return this._currentMessage=[],this.onmessage(d),this.AWAITING_CHUNK}else return this._chunkSize=f,this.IN_CHUNK},c.prototype.write=function(f){for(;f.hasRemaining();)this._state=this._state(f)},c}();return ds.Dechunker=u,ds}var df={},aC;function sre(){if(aC)return df;aC=1,Object.defineProperty(df,"__esModule",{value:!0});var n=Mt(),e=n.internal.util,t=e.ENCRYPTION_OFF,r=e.ENCRYPTION_ON,i=n.error.SERVICE_UNAVAILABLE,o=3e4,s=[null,void 0,!0,!1,r,t],a=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"],l=function(){function h(v,m,p){this.address=v,this.encrypted=u(m),this.trust=c(m),this.trustedCertificates=f(m),this.knownHostsPath=d(m),this.connectionErrorCode=p||i,this.connectionTimeout=g(m)}return h}();df.default=l;function u(h){var v=h.encrypted;if(s.indexOf(v)===-1)throw(0,n.newError)("Illegal value of the encrypted setting "+v+". Expected one of "+s);return v}function c(h){var v=h.trust;if(a.indexOf(v)===-1)throw(0,n.newError)("Illegal value of the trust setting "+v+". Expected one of "+a);return v}function f(h){return h.trustedCertificates||[]}function d(h){return h.knownHosts||null}function g(h){var v=parseInt(h.connectionTimeout,10);return v===0||v&&v<0?null:v||o}return df}var pf={},Rm={},mf={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var lC;function are(){return lC||(lC=1,function(n,e){var t=Cy(),r=t.Buffer;function i(s,a){for(var l in s)a[l]=s[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=t:(i(t,e),e.Buffer=o);function o(s,a,l){return r(s,a,l)}o.prototype=Object.create(r.prototype),i(r,o),o.from=function(s,a,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return r(s,a,l)},o.alloc=function(s,a,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var u=r(s);return a!==void 0?typeof l=="string"?u.fill(a,l):u.fill(a):u.fill(0),u},o.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r(s)},o.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(s)}}(mf,mf.exports)),mf.exports}var uC;function lre(){if(uC)return Rm;uC=1;var n=are().Buffer,e=n.isEncoding||function(p){switch(p=""+p,p&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(p){if(!p)return"utf8";for(var y;;)switch(p){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return p;default:if(y)return;p=(""+p).toLowerCase(),y=!0}}function r(p){var y=t(p);if(typeof y!="string"&&(n.isEncoding===e||!e(p)))throw new Error("Unknown encoding: "+p);return y||p}Rm.StringDecoder=i;function i(p){this.encoding=r(p);var y;switch(this.encoding){case"utf16le":this.text=f,this.end=d,y=4;break;case"utf8":this.fillLast=l,y=4;break;case"base64":this.text=g,this.end=h,y=3;break;default:this.write=v,this.end=m;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(y)}i.prototype.write=function(p){if(p.length===0)return"";var y,b;if(this.lastNeed){if(y=this.fillLast(p),y===void 0)return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<p.length?y?y+this.text(p,b):this.text(p,b):y||""},i.prototype.end=c,i.prototype.text=u,i.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length};function o(p){return p<=127?0:p>>5===6?2:p>>4===14?3:p>>3===30?4:p>>6===2?-1:-2}function s(p,y,b){var _=y.length-1;if(_<b)return 0;var w=o(y[_]);return w>=0?(w>0&&(p.lastNeed=w-1),w):--_<b||w===-2?0:(w=o(y[_]),w>=0?(w>0&&(p.lastNeed=w-2),w):--_<b||w===-2?0:(w=o(y[_]),w>=0?(w>0&&(w===2?w=0:p.lastNeed=w-3),w):0))}function a(p,y,b){if((y[0]&192)!==128)return p.lastNeed=0,"\uFFFD";if(p.lastNeed>1&&y.length>1){if((y[1]&192)!==128)return p.lastNeed=1,"\uFFFD";if(p.lastNeed>2&&y.length>2&&(y[2]&192)!==128)return p.lastNeed=2,"\uFFFD"}}function l(p){var y=this.lastTotal-this.lastNeed,b=a(this,p);if(b!==void 0)return b;if(this.lastNeed<=p.length)return p.copy(this.lastChar,y,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,y,0,p.length),this.lastNeed-=p.length}function u(p,y){var b=s(this,p,y);if(!this.lastNeed)return p.toString("utf8",y);this.lastTotal=b;var _=p.length-(b-this.lastNeed);return p.copy(this.lastChar,0,_),p.toString("utf8",y,_)}function c(p){var y=p&&p.length?this.write(p):"";return this.lastNeed?y+"\uFFFD":y}function f(p,y){if((p.length-y)%2===0){var b=p.toString("utf16le",y);if(b){var _=b.charCodeAt(b.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",y,p.length-1)}function d(p){var y=p&&p.length?this.write(p):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return y+this.lastChar.toString("utf16le",0,b)}return y}function g(p,y){var b=(p.length-y)%3;return b===0?p.toString("base64",y):(this.lastNeed=3-b,this.lastTotal=3,b===1?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",y,p.length-b))}function h(p){var y=p&&p.length?this.write(p):"";return this.lastNeed?y+this.lastChar.toString("base64",0,3-this.lastNeed):y}function v(p){return p.toString(this.encoding)}function m(p){return p&&p.length?this.write(p):""}return Rm}var cC;function ure(){if(cC)return pf;cC=1;var n=oe&&oe.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(pf,"__esModule",{value:!0});var e=n(ac()),t=Mt(),r=n(Cy()),i=lre(),o=new i.StringDecoder("utf8");function s(d){return new e.default(f(d))}function a(d,g){if(Object.prototype.hasOwnProperty.call(d,"_buffer"))return l(d,g);if(Object.prototype.hasOwnProperty.call(d,"_buffers"))return u(d,g);throw(0,t.newError)("Don't know how to decode strings from '"+d+"'")}function l(d,g){var h=d.position,v=h+g;return d.position=Math.min(v,d.length),d._buffer.toString("utf8",h,v)}function u(d,g){return c(d,g,function(h){return o.write(h._buffer)},function(){return o.end()})}function c(d,g,h,v){var m=g,p=d.position;d._updatePos(Math.min(g,d.length-p));var y=d._buffers.reduce(function(b,_){if(m<=0)return b;if(p>=_.length)return p-=_.length,"";_._updatePos(p-_.position);var w=Math.min(_.length-p,m),S=_.readSlice(w);return _._updatePos(w),m=Math.max(m-S.length,0),p=0,b+h(S)},"");return y+v()}function f(d){return typeof r.default.Buffer.from=="function"?r.default.Buffer.from(d,"utf8"):new r.default.Buffer(d,"utf8")}return pf.default={encode:s,decode:a},pf}var fC;function lc(){return fC||(fC=1,function(n){var e=oe&&oe.__createBinding||(Object.create?function(a,l,u,c){c===void 0&&(c=u),Object.defineProperty(a,c,{enumerable:!0,get:function(){return l[u]}})}:function(a,l,u,c){c===void 0&&(c=u),a[c]=l[u]}),t=oe&&oe.__exportStar||function(a,l){for(var u in a)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&e(l,a,u)},r=oe&&oe.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(n,"__esModule",{value:!0}),n.utf8=n.alloc=n.ChannelConfig=void 0,t(rre(),n),t(ore(),n);var i=sre();Object.defineProperty(n,"ChannelConfig",{enumerable:!0,get:function(){return r(i).default}});var o=ac();Object.defineProperty(n,"alloc",{enumerable:!0,get:function(){return o.alloc}});var s=ure();Object.defineProperty(n,"utf8",{enumerable:!0,get:function(){return r(s).default}})}(Im)),Im}var hC;function cre(){if(hC)return af;hC=1,Object.defineProperty(af,"__esModule",{value:!0});var n=lc(),e=Mt(),t=1616949271;function r(l,u){return{major:l,minor:u}}function i(l){if(l.length>4)throw(0,e.newError)("It should not have more than 4 versions of the protocol");var u=(0,n.alloc)(5*4);return u.writeInt32(t),l.forEach(function(c){if(c instanceof Array){var f=c[0],d=f.major,g=f.minor,h=c[1].minor,v=g-h;u.writeInt32(v<<16|g<<8|d)}else{var d=c.major,g=c.minor;u.writeInt32(g<<8|d)}}),u.reset(),u}function o(l){var u=[l.readUInt8(),l.readUInt8(),l.readUInt8(),l.readUInt8()];if(u[0]===72&&u[1]===84&&u[2]===84&&u[3]===80)throw(0,e.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return Number(u[3]+"."+u[2])}function s(){return i([[r(4,4),r(4,2)],r(4,1),r(4,0),r(3,0)])}function a(l){var u=this;return new Promise(function(c,f){var d=function(g){f(g)};l.onerror=d.bind(u),l._error&&d(l._error),l.onmessage=function(g){try{var h=o(g);c({protocolVersion:h,consumeRemainingBuffer:function(v){g.hasRemaining()&&v(g.readSlice(g.remaining()))}})}catch(v){f(v)}},l.write(s())})}return af.default=a,af}var gf={},vf={},to={},dC;function Oy(){if(dC)return to;dC=1,Object.defineProperty(to,"__esModule",{value:!0}),to.assertImpersonatedUserIsEmpty=to.assertTxConfigIsEmpty=to.assertDatabaseIsEmpty=void 0;var n=Mt();function e(i,o,s){if(o===void 0&&(o=function(){}),i&&!i.isEmpty()){var a=(0,n.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw o(a.message),s.onError(a),a}}to.assertTxConfigIsEmpty=e;function t(i,o,s){if(o===void 0&&(o=function(){}),i){var a=(0,n.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw o(a.message),s.onError(a),a}}to.assertDatabaseIsEmpty=t;function r(i,o,s){if(o===void 0&&(o=function(){}),i){var a=(0,n.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+("Trying to impersonate "+i+"."));throw o(a.message),s.onError(a),a}}return to.assertImpersonatedUserIsEmpty=r,to}var ko={},no={},pC;function jI(){if(pC)return no;pC=1,Object.defineProperty(no,"__esModule",{value:!0}),no.Structure=no.Unpacker=no.Packer=void 0;var n=lc(),e=Mt(),t=e.internal.util,r=e.error.PROTOCOL_ERROR,i=128,o=144,s=160,a=176,l=192,u=193,c=194,f=195,d=200,g=201,h=202,v=203,m=208,p=209,y=210,b=212,_=213,w=214,S=204,E=205,O=206,R=216,D=217,F=218,B=220,H=221,L=78,N=3,U=82,$=5,Z=114,A=3,P=80,V=3,W=function(){function J(q,Q){this.signature=q,this.fields=Q}return J.prototype.toString=function(){for(var q="",Q=0;Q<this.fields.length;Q++)Q>0&&(q+=", "),q+=this.fields[Q];return"Structure("+this.signature+", ["+q+"])"},J}();no.Structure=W;var z=function(){function J(q){this._ch=q,this._byteArraysSupported=!0}return J.prototype.packable=function(q){var Q=this;if(q===null)return function(){return Q._ch.writeUInt8(l)};if(q===!0)return function(){return Q._ch.writeUInt8(f)};if(q===!1)return function(){return Q._ch.writeUInt8(c)};if(typeof q=="number")return function(){return Q.packFloat(q)};if(typeof q=="string")return function(){return Q.packString(q)};if(typeof q=="bigint")return function(){return Q.packInteger((0,e.int)(q))};if((0,e.isInt)(q))return function(){return Q.packInteger(q)};if(q instanceof Int8Array)return function(){return Q.packBytes(q)};if(q instanceof Array)return function(){Q.packListHeader(q.length);for(var Pe=0;Pe<q.length;Pe++)Q.packable(q[Pe]===void 0?null:q[Pe])()};if(M(q))return this.packableIterable(q);if(q instanceof e.Node)return this._nonPackableValue("It is not allowed to pass nodes in query parameters, given: "+q);if(q instanceof e.Relationship)return this._nonPackableValue("It is not allowed to pass relationships in query parameters, given: "+q);if(q instanceof e.Path)return this._nonPackableValue("It is not allowed to pass paths in query parameters, given: "+q);if(q instanceof W){for(var ae=[],he=0;he<q.fields.length;he++)ae[he]=this.packable(q.fields[he]);return function(){return Q.packStruct(q.signature,ae)}}else return typeof q=="object"?function(){for(var Pe=Object.keys(q),Fe=0,Ae=0;Ae<Pe.length;Ae++)q[Pe[Ae]]!==void 0&&Fe++;Q.packMapHeader(Fe);for(var ye=0;ye<Pe.length;ye++){var Me=Pe[ye];q[Me]!==void 0&&(Q.packString(Me),Q.packable(q[Me])())}}:this._nonPackableValue("Unable to pack the given value: "+q)},J.prototype.packableIterable=function(q){try{var Q=Array.from(q);return this.packable(Q)}catch(ae){throw(0,e.newError)("Cannot pack given iterable, "+ae.message+": "+q)}},J.prototype.packStruct=function(q,Q){Q=Q||[],this.packStructHeader(Q.length,q);for(var ae=0;ae<Q.length;ae++)Q[ae]()},J.prototype.packInteger=function(q){var Q=q.high,ae=q.low;q.greaterThanOrEqual(-16)&&q.lessThan(128)?this._ch.writeInt8(ae):q.greaterThanOrEqual(-128)&&q.lessThan(-16)?(this._ch.writeUInt8(d),this._ch.writeInt8(ae)):q.greaterThanOrEqual(-32768)&&q.lessThan(32768)?(this._ch.writeUInt8(g),this._ch.writeInt16(ae)):q.greaterThanOrEqual(-2147483648)&&q.lessThan(2147483648)?(this._ch.writeUInt8(h),this._ch.writeInt32(ae)):(this._ch.writeUInt8(v),this._ch.writeInt32(Q),this._ch.writeInt32(ae))},J.prototype.packFloat=function(q){this._ch.writeUInt8(u),this._ch.writeFloat64(q)},J.prototype.packString=function(q){var Q=n.utf8.encode(q),ae=Q.length;if(ae<16)this._ch.writeUInt8(i|ae),this._ch.writeBytes(Q);else if(ae<256)this._ch.writeUInt8(m),this._ch.writeUInt8(ae),this._ch.writeBytes(Q);else if(ae<65536)this._ch.writeUInt8(p),this._ch.writeUInt8(ae/256>>0),this._ch.writeUInt8(ae%256),this._ch.writeBytes(Q);else if(ae<4294967296)this._ch.writeUInt8(y),this._ch.writeUInt8((ae/16777216>>0)%256),this._ch.writeUInt8((ae/65536>>0)%256),this._ch.writeUInt8((ae/256>>0)%256),this._ch.writeUInt8(ae%256),this._ch.writeBytes(Q);else throw(0,e.newError)("UTF-8 strings of size "+ae+" are not supported")},J.prototype.packListHeader=function(q){if(q<16)this._ch.writeUInt8(o|q);else if(q<256)this._ch.writeUInt8(b),this._ch.writeUInt8(q);else if(q<65536)this._ch.writeUInt8(_),this._ch.writeUInt8((q/256>>0)%256),this._ch.writeUInt8(q%256);else if(q<4294967296)this._ch.writeUInt8(w),this._ch.writeUInt8((q/16777216>>0)%256),this._ch.writeUInt8((q/65536>>0)%256),this._ch.writeUInt8((q/256>>0)%256),this._ch.writeUInt8(q%256);else throw(0,e.newError)("Lists of size "+q+" are not supported")},J.prototype.packBytes=function(q){if(this._byteArraysSupported){this.packBytesHeader(q.length);for(var Q=0;Q<q.length;Q++)this._ch.writeInt8(q[Q])}else throw(0,e.newError)("Byte arrays are not supported by the database this driver is connected to")},J.prototype.packBytesHeader=function(q){if(q<256)this._ch.writeUInt8(S),this._ch.writeUInt8(q);else if(q<65536)this._ch.writeUInt8(E),this._ch.writeUInt8((q/256>>0)%256),this._ch.writeUInt8(q%256);else if(q<4294967296)this._ch.writeUInt8(O),this._ch.writeUInt8((q/16777216>>0)%256),this._ch.writeUInt8((q/65536>>0)%256),this._ch.writeUInt8((q/256>>0)%256),this._ch.writeUInt8(q%256);else throw(0,e.newError)("Byte arrays of size "+q+" are not supported")},J.prototype.packMapHeader=function(q){if(q<16)this._ch.writeUInt8(s|q);else if(q<256)this._ch.writeUInt8(R),this._ch.writeUInt8(q);else if(q<65536)this._ch.writeUInt8(D),this._ch.writeUInt8(q/256>>0),this._ch.writeUInt8(q%256);else if(q<4294967296)this._ch.writeUInt8(F),this._ch.writeUInt8((q/16777216>>0)%256),this._ch.writeUInt8((q/65536>>0)%256),this._ch.writeUInt8((q/256>>0)%256),this._ch.writeUInt8(q%256);else throw(0,e.newError)("Maps of size "+q+" are not supported")},J.prototype.packStructHeader=function(q,Q){if(q<16)this._ch.writeUInt8(a|q),this._ch.writeUInt8(Q);else if(q<256)this._ch.writeUInt8(B),this._ch.writeUInt8(q),this._ch.writeUInt8(Q);else if(q<65536)this._ch.writeUInt8(H),this._ch.writeUInt8(q/256>>0),this._ch.writeUInt8(q%256);else throw(0,e.newError)("Structures of size "+q+" are not supported")},J.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},J.prototype._nonPackableValue=function(q){return function(){throw(0,e.newError)(q,r)}},J}();no.Packer=z;var I=function(){function J(q,Q){q===void 0&&(q=!1),Q===void 0&&(Q=!1),this._disableLosslessIntegers=q,this._useBigInt=Q}return J.prototype.unpack=function(q){var Q=q.readUInt8(),ae=Q&240,he=Q&15;if(Q===l)return null;var Pe=this._unpackBoolean(Q);if(Pe!==null)return Pe;var Fe=this._unpackNumberOrInteger(Q,q);if(Fe!==null){if((0,e.isInt)(Fe)){if(this._useBigInt)return Fe.toBigInt();if(this._disableLosslessIntegers)return Fe.toNumberOrInfinity()}return Fe}var Ae=this._unpackString(Q,ae,he,q);if(Ae!==null)return Ae;var ye=this._unpackList(Q,ae,he,q);if(ye!==null)return ye;var Me=this._unpackByteArray(Q,q);if(Me!==null)return Me;var xe=this._unpackMap(Q,ae,he,q);if(xe!==null)return xe;var fe=this._unpackStruct(Q,ae,he,q);if(fe!==null)return fe;throw(0,e.newError)("Unknown packed value with marker "+Q.toString(16))},J.prototype.unpackInteger=function(q){var Q=q.readUInt8(),ae=this._unpackInteger(Q,q);if(ae==null)throw(0,e.newError)("Unable to unpack integer value with marker "+Q.toString(16));return ae},J.prototype._unpackBoolean=function(q){return q===f?!0:q===c?!1:null},J.prototype._unpackNumberOrInteger=function(q,Q){return q===u?Q.readFloat64():this._unpackInteger(q,Q)},J.prototype._unpackInteger=function(q,Q){if(q>=0&&q<128)return(0,e.int)(q);if(q>=240&&q<256)return(0,e.int)(q-256);if(q===d)return(0,e.int)(Q.readInt8());if(q===g)return(0,e.int)(Q.readInt16());if(q===h){var ae=Q.readInt32();return(0,e.int)(ae)}else if(q===v){var he=Q.readInt32(),Pe=Q.readInt32();return new e.Integer(Pe,he)}else return null},J.prototype._unpackString=function(q,Q,ae,he){return Q===i?n.utf8.decode(he,ae):q===m?n.utf8.decode(he,he.readUInt8()):q===p?n.utf8.decode(he,he.readUInt16()):q===y?n.utf8.decode(he,he.readUInt32()):null},J.prototype._unpackList=function(q,Q,ae,he){return Q===o?this._unpackListWithSize(ae,he):q===b?this._unpackListWithSize(he.readUInt8(),he):q===_?this._unpackListWithSize(he.readUInt16(),he):q===w?this._unpackListWithSize(he.readUInt32(),he):null},J.prototype._unpackListWithSize=function(q,Q){for(var ae=[],he=0;he<q;he++)ae.push(this.unpack(Q));return ae},J.prototype._unpackByteArray=function(q,Q){return q===S?this._unpackByteArrayWithSize(Q.readUInt8(),Q):q===E?this._unpackByteArrayWithSize(Q.readUInt16(),Q):q===O?this._unpackByteArrayWithSize(Q.readUInt32(),Q):null},J.prototype._unpackByteArrayWithSize=function(q,Q){for(var ae=new Int8Array(q),he=0;he<q;he++)ae[he]=Q.readInt8();return ae},J.prototype._unpackMap=function(q,Q,ae,he){return Q===s?this._unpackMapWithSize(ae,he):q===R?this._unpackMapWithSize(he.readUInt8(),he):q===D?this._unpackMapWithSize(he.readUInt16(),he):q===F?this._unpackMapWithSize(he.readUInt32(),he):null},J.prototype._unpackMapWithSize=function(q,Q){for(var ae={},he=0;he<q;he++){var Pe=this.unpack(Q);ae[Pe]=this.unpack(Q)}return ae},J.prototype._unpackStruct=function(q,Q,ae,he){try{return Q===a?this._unpackStructWithSize(ae,he):q===B?this._unpackStructWithSize(he.readUInt8(),he):q===H?this._unpackStructWithSize(he.readUInt16(),he):null}catch(Pe){return t.createBrokenObject(Pe)}},J.prototype._unpackStructWithSize=function(q,Q){var ae=Q.readUInt8();return ae===L?this._unpackNode(q,Q):ae===U?this._unpackRelationship(q,Q):ae===Z?this._unpackUnboundRelationship(q,Q):ae===P?this._unpackPath(q,Q):this._unpackUnknownStruct(ae,q,Q)},J.prototype._unpackNode=function(q,Q){return this._verifyStructSize("Node",N,q),new e.Node(this.unpack(Q),this.unpack(Q),this.unpack(Q))},J.prototype._unpackRelationship=function(q,Q){return this._verifyStructSize("Relationship",$,q),new e.Relationship(this.unpack(Q),this.unpack(Q),this.unpack(Q),this.unpack(Q),this.unpack(Q))},J.prototype._unpackUnboundRelationship=function(q,Q){return this._verifyStructSize("UnboundRelationship",A,q),new e.UnboundRelationship(this.unpack(Q),this.unpack(Q),this.unpack(Q))},J.prototype._unpackPath=function(q,Q){this._verifyStructSize("Path",V,q);for(var ae=this.unpack(Q),he=this.unpack(Q),Pe=this.unpack(Q),Fe=[],Ae=ae[0],ye=0;ye<Pe.length;ye+=2){var Me=ae[Pe[ye+1]],xe=(0,e.toNumber)(Pe[ye]),fe=void 0;xe>0?(fe=he[xe-1],fe instanceof e.UnboundRelationship&&(he[xe-1]=fe=fe.bind(Ae.identity,Me.identity))):(fe=he[-xe-1],fe instanceof e.UnboundRelationship&&(he[-xe-1]=fe=fe.bind(Me.identity,Ae.identity))),Fe.push(new e.PathSegment(Ae,fe,Me)),Ae=Me}return new e.Path(ae[0],ae[ae.length-1],Fe)},J.prototype._unpackUnknownStruct=function(q,Q,ae){for(var he=new W(q,[]),Pe=0;Pe<Q;Pe++)he.fields.push(this.unpack(ae));return he},J.prototype._verifyStructSize=function(q,Q,ae){if(Q!==ae)throw(0,e.newError)("Wrong struct size for "+q+", expected "+Q+" but was "+ae,r)},J}();no.Unpacker=I;function M(J){return J==null?!1:typeof J[Symbol.iterator]=="function"}return no}var ps={},xm={},ro={},mC;function BI(){if(mC)return ro;mC=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.epochSecondAndNanoToLocalDateTime=ro.nanoOfDayToLocalTime=ro.epochDayToDate=void 0;var n=Mt(),e=n.internal.temporalUtil,t=e.DAYS_0000_TO_1970,r=e.DAYS_PER_400_YEAR_CYCLE,i=e.NANOS_PER_HOUR,o=e.NANOS_PER_MINUTE,s=e.NANOS_PER_SECOND,a=e.SECONDS_PER_DAY,l=e.floorDiv,u=e.floorMod;function c(g){g=(0,n.int)(g);var h=g.add(t).subtract(60),v=(0,n.int)(0);if(h.lessThan(0)){var m=h.add(1).div(r).subtract(1);v=m.multiply(400),h=h.add(m.multiply(-r))}var p=h.multiply(400).add(591).div(r),y=h.subtract(p.multiply(365).add(p.div(4)).subtract(p.div(100)).add(p.div(400)));y.lessThan(0)&&(p=p.subtract(1),y=h.subtract(p.multiply(365).add(p.div(4)).subtract(p.div(100)).add(p.div(400)))),p=p.add(v);var b=y,_=b.multiply(5).add(2).div(153),w=_.add(2).modulo(12).add(1),S=b.subtract(_.multiply(306).add(5).div(10)).add(1);return p=p.add(_.div(10)),new n.Date(p,w,S)}ro.epochDayToDate=c;function f(g){g=(0,n.int)(g);var h=g.div(i);g=g.subtract(h.multiply(i));var v=g.div(o);g=g.subtract(v.multiply(o));var m=g.div(s),p=g.subtract(m.multiply(s));return new n.LocalTime(h,v,m,p)}ro.nanoOfDayToLocalTime=f;function d(g,h){var v=l(g,a),m=u(g,a),p=m.multiply(s).add(h),y=c(v),b=f(p);return new n.LocalDateTime(y.year,y.month,y.day,b.hour,b.minute,b.second,b.nanosecond)}return ro.epochSecondAndNanoToLocalDateTime=d,ro}var gC;function fre(){return gC||(gC=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.packDateTime=n.unpackDateTimeWithZoneId=n.unpackDateTimeWithZoneOffset=n.DATE_TIME_WITH_ZONE_ID=n.DATE_TIME_WITH_ZONE_OFFSET=void 0;var e=Mt(),t=BI(),r=e.internal.temporalUtil.localDateTimeToEpochSecond;n.DATE_TIME_WITH_ZONE_OFFSET=73;var i=3;n.DATE_TIME_WITH_ZONE_ID=105;var o=3;function s(h,v,m,p,y){h._verifyStructSize("DateTimeWithZoneOffset",i,v);var b=h.unpackInteger(m),_=h.unpackInteger(m),w=h.unpackInteger(m),S=(0,e.int)(b).add(w),E=(0,t.epochSecondAndNanoToLocalDateTime)(S,_),O=new e.DateTime(E.year,E.month,E.day,E.hour,E.minute,E.second,E.nanosecond,w,null);return g(O,p,y)}n.unpackDateTimeWithZoneOffset=s;function a(h,v,m,p,y){h._verifyStructSize("DateTimeWithZoneId",o,v);var b=h.unpackInteger(m),_=h.unpackInteger(m),w=h.unpack(m),S=d(w,b,_),E=new e.DateTime(S.year,S.month,S.day,S.hour,S.minute,S.second,(0,e.int)(_),S.timeZoneOffsetSeconds,w);return g(E,p,y)}n.unpackDateTimeWithZoneId=a;function l(h,v){h.timeZoneId?u(h,v):c(h,v)}n.packDateTime=l;function u(h,v){var m=r(h.year,h.month,h.day,h.hour,h.minute,h.second,h.nanosecond),p=h.timeZoneOffsetSeconds!=null?h.timeZoneOffsetSeconds:f(h.timeZoneId,m,h.nanosecond),y=m.subtract(p),b=(0,e.int)(h.nanosecond),_=h.timeZoneId,w=[v.packable(y),v.packable(b),v.packable(_)];v.packStruct(n.DATE_TIME_WITH_ZONE_ID,w)}function c(h,v){var m=r(h.year,h.month,h.day,h.hour,h.minute,h.second,h.nanosecond),p=(0,e.int)(h.nanosecond),y=(0,e.int)(h.timeZoneOffsetSeconds),b=m.subtract(y),_=[v.packable(b),v.packable(p),v.packable(y)];v.packStruct(n.DATE_TIME_WITH_ZONE_OFFSET,_)}function f(h,v,m){var p=d(h,v,m),y=r(p.year,p.month,p.day,p.hour,p.minute,p.second,m),b=y.subtract(v),_=v.subtract(b),w=d(h,_,m),S=r(w.year,w.month,w.day,w.hour,w.minute,w.second,m),E=S.subtract(_);return E}function d(h,v,m){var p=new Intl.DateTimeFormat("en-US",{timeZone:h,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}),y=(0,t.epochSecondAndNanoToLocalDateTime)(v,m),b=Date.UTC((0,e.int)(y.year).toNumber(),(0,e.int)(y.month).toNumber()-1,(0,e.int)(y.day).toNumber(),(0,e.int)(y.hour).toNumber(),(0,e.int)(y.minute).toNumber(),(0,e.int)(y.second).toNumber()),_=p.formatToParts(b),w=_.reduce(function(E,O){return O.type!=="literal"&&(E[O.type]=(0,e.int)(O.value)),E},{}),S=r(w.year,w.month,w.day,w.hour,w.minute,w.second,w.nanosecond);return w.timeZoneOffsetSeconds=S.subtract(v),w.hour=w.hour.modulo(24),w}function g(h,v,m){if(!v&&!m)return h;var p=function(w){return m?w.toBigInt():w.toNumberOrInfinity()},y=Object.create(Object.getPrototypeOf(h));for(var b in h)if(Object.prototype.hasOwnProperty.call(h,b)===!0){var _=h[b];y[b]=(0,e.isInt)(_)?p(_):_}return Object.freeze(y),y}}(xm)),xm}var vC;function hre(){if(vC)return ps;vC=1;var n=oe&&oe.__extends||function(){var fe=function(ve,de){return fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ie,De){Ie.__proto__=De}||function(Ie,De){for(var He in De)Object.prototype.hasOwnProperty.call(De,He)&&(Ie[He]=De[He])},fe(ve,de)};return function(ve,de){if(typeof de!="function"&&de!==null)throw new TypeError("Class extends value "+String(de)+" is not a constructor or null");fe(ve,de);function Ie(){this.constructor=ve}ve.prototype=de===null?Object.create(de):(Ie.prototype=de.prototype,new Ie)}}(),e=oe&&oe.__createBinding||(Object.create?function(fe,ve,de,Ie){Ie===void 0&&(Ie=de),Object.defineProperty(fe,Ie,{enumerable:!0,get:function(){return ve[de]}})}:function(fe,ve,de,Ie){Ie===void 0&&(Ie=de),fe[Ie]=ve[de]}),t=oe&&oe.__setModuleDefault||(Object.create?function(fe,ve){Object.defineProperty(fe,"default",{enumerable:!0,value:ve})}:function(fe,ve){fe.default=ve}),r=oe&&oe.__importStar||function(fe){if(fe&&fe.__esModule)return fe;var ve={};if(fe!=null)for(var de in fe)de!=="default"&&Object.prototype.hasOwnProperty.call(fe,de)&&e(ve,fe,de);return t(ve,fe),ve};Object.defineProperty(ps,"__esModule",{value:!0}),ps.Unpacker=ps.Packer=void 0;var i=r(jI()),o=r(fre()),s=Mt(),a=BI(),l=s.internal.temporalUtil,u=l.dateToEpochDay,c=l.localDateTimeToEpochSecond,f=l.localTimeToNanoOfDay,d=88,g=3,h=89,v=4,m=69,p=4,y=116,b=1,_=84,w=2,S=68,E=1,O=100,R=2,D=70,F=3,B=102,H=3,L=function(fe){n(ve,fe);function ve(){return fe!==null&&fe.apply(this,arguments)||this}return ve.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},ve.prototype.packable=function(de){var Ie=this;return(0,s.isPoint)(de)?function(){return U(de,Ie)}:(0,s.isDuration)(de)?function(){return V(de,Ie)}:(0,s.isLocalTime)(de)?function(){return z(de,Ie)}:(0,s.isTime)(de)?function(){return M(de,Ie)}:(0,s.isDate)(de)?function(){return q(de,Ie)}:(0,s.isLocalDateTime)(de)?function(){return ae(de,Ie)}:(0,s.isDateTime)(de)&&this.useUtc?function(){return o.packDateTime(de,Ie)}:(0,s.isDateTime)(de)&&!this.useUtc?function(){return Pe(de,Ie)}:fe.prototype.packable.call(this,de)},ve}(i.Packer);ps.Packer=L;var N=function(fe){n(ve,fe);function ve(de,Ie){return de===void 0&&(de=!1),Ie===void 0&&(Ie=!1),fe.call(this,de,Ie)||this}return ve.prototype._unpackUnknownStruct=function(de,Ie,De){return de===d?A(this,Ie,De):de===h?P(this,Ie,De):de===m?W(this,Ie,De):de===y?I(this,Ie,De,this._disableLosslessIntegers,this._useBigInt):de===_?J(this,Ie,De,this._disableLosslessIntegers,this._useBigInt):de===S?Q(this,Ie,De,this._disableLosslessIntegers,this._useBigInt):de===O?he(this,Ie,De,this._disableLosslessIntegers,this._useBigInt):de===o.DATE_TIME_WITH_ZONE_OFFSET&&this.useUtc?o.unpackDateTimeWithZoneOffset(this,Ie,De,this._disableLosslessIntegers,this._useBigInt):de===D&&!this.useUtc?Ae(this,Ie,De,this._disableLosslessIntegers,this._useBigInt):de===o.DATE_TIME_WITH_ZONE_ID&&this.useUtc?o.unpackDateTimeWithZoneId(this,Ie,De,this._disableLosslessIntegers,this._useBigInt):de===B&&!this.useUtc?Me(this,Ie,De,this._disableLosslessIntegers,this._useBigInt):fe.prototype._unpackUnknownStruct.call(this,de,Ie,De,this._disableLosslessIntegers,this._useBigInt)},ve}(i.Unpacker);ps.Unpacker=N;function U(fe,ve){var de=fe.z===null||fe.z===void 0;de?$(fe,ve):Z(fe,ve)}function $(fe,ve){var de=[ve.packable((0,s.int)(fe.srid)),ve.packable(fe.x),ve.packable(fe.y)];ve.packStruct(d,de)}function Z(fe,ve){var de=[ve.packable((0,s.int)(fe.srid)),ve.packable(fe.x),ve.packable(fe.y),ve.packable(fe.z)];ve.packStruct(h,de)}function A(fe,ve,de){return fe._verifyStructSize("Point2D",g,ve),new s.Point(fe.unpack(de),fe.unpack(de),fe.unpack(de),void 0)}function P(fe,ve,de){return fe._verifyStructSize("Point3D",v,ve),new s.Point(fe.unpack(de),fe.unpack(de),fe.unpack(de),fe.unpack(de))}function V(fe,ve){var de=(0,s.int)(fe.months),Ie=(0,s.int)(fe.days),De=(0,s.int)(fe.seconds),He=(0,s.int)(fe.nanoseconds),Xe=[ve.packable(de),ve.packable(Ie),ve.packable(De),ve.packable(He)];ve.packStruct(m,Xe)}function W(fe,ve,de){fe._verifyStructSize("Duration",p,ve);var Ie=fe.unpack(de),De=fe.unpack(de),He=fe.unpack(de),Xe=fe.unpack(de);return new s.Duration(Ie,De,He,Xe)}function z(fe,ve){var de=f(fe.hour,fe.minute,fe.second,fe.nanosecond),Ie=[ve.packable(de)];ve.packStruct(y,Ie)}function I(fe,ve,de,Ie){fe._verifyStructSize("LocalTime",b,ve);var De=fe.unpackInteger(de),He=(0,a.nanoOfDayToLocalTime)(De);return xe(He,Ie)}function M(fe,ve){var de=f(fe.hour,fe.minute,fe.second,fe.nanosecond),Ie=(0,s.int)(fe.timeZoneOffsetSeconds),De=[ve.packable(de),ve.packable(Ie)];ve.packStruct(_,De)}function J(fe,ve,de,Ie,De){fe._verifyStructSize("Time",w,ve);var He=fe.unpackInteger(de),Xe=fe.unpackInteger(de),mt=(0,a.nanoOfDayToLocalTime)(He),be=new s.Time(mt.hour,mt.minute,mt.second,mt.nanosecond,Xe);return xe(be,Ie,De)}function q(fe,ve){var de=u(fe.year,fe.month,fe.day),Ie=[ve.packable(de)];ve.packStruct(S,Ie)}function Q(fe,ve,de,Ie,De){fe._verifyStructSize("Date",E,ve);var He=fe.unpackInteger(de),Xe=(0,a.epochDayToDate)(He);return xe(Xe,Ie,De)}function ae(fe,ve){var de=c(fe.year,fe.month,fe.day,fe.hour,fe.minute,fe.second,fe.nanosecond),Ie=(0,s.int)(fe.nanosecond),De=[ve.packable(de),ve.packable(Ie)];ve.packStruct(O,De)}function he(fe,ve,de,Ie,De){fe._verifyStructSize("LocalDateTime",R,ve);var He=fe.unpackInteger(de),Xe=fe.unpackInteger(de),mt=(0,a.epochSecondAndNanoToLocalDateTime)(He,Xe);return xe(mt,Ie,De)}function Pe(fe,ve){fe.timeZoneId?ye(fe,ve):Fe(fe,ve)}function Fe(fe,ve){var de=c(fe.year,fe.month,fe.day,fe.hour,fe.minute,fe.second,fe.nanosecond),Ie=(0,s.int)(fe.nanosecond),De=(0,s.int)(fe.timeZoneOffsetSeconds),He=[ve.packable(de),ve.packable(Ie),ve.packable(De)];ve.packStruct(D,He)}function Ae(fe,ve,de,Ie,De){fe._verifyStructSize("DateTimeWithZoneOffset",F,ve);var He=fe.unpackInteger(de),Xe=fe.unpackInteger(de),mt=fe.unpackInteger(de),be=(0,a.epochSecondAndNanoToLocalDateTime)(He,Xe),Y=new s.DateTime(be.year,be.month,be.day,be.hour,be.minute,be.second,be.nanosecond,mt,null);return xe(Y,Ie,De)}function ye(fe,ve){var de=c(fe.year,fe.month,fe.day,fe.hour,fe.minute,fe.second,fe.nanosecond),Ie=(0,s.int)(fe.nanosecond),De=fe.timeZoneId,He=[ve.packable(de),ve.packable(Ie),ve.packable(De)];ve.packStruct(B,He)}function Me(fe,ve,de,Ie,De){fe._verifyStructSize("DateTimeWithZoneId",H,ve);var He=fe.unpackInteger(de),Xe=fe.unpackInteger(de),mt=fe.unpack(de),be=(0,a.epochSecondAndNanoToLocalDateTime)(He,Xe),Y=new s.DateTime(be.year,be.month,be.day,be.hour,be.minute,be.second,be.nanosecond,null,mt);return xe(Y,Ie,De)}function xe(fe,ve,de){if(!ve&&!de)return fe;var Ie=function(mt){return de?mt.toBigInt():mt.toNumberOrInfinity()},De=Object.create(Object.getPrototypeOf(fe));for(var He in fe)if(fe.hasOwnProperty(He)){var Xe=fe[He];De[He]=(0,s.isInt)(Xe)?Ie(Xe):Xe}return Object.freeze(De),De}return ps}var yC;function Ty(){if(yC)return ko;yC=1;var n=oe&&oe.__createBinding||(Object.create?function(o,s,a,l){l===void 0&&(l=a),Object.defineProperty(o,l,{enumerable:!0,get:function(){return s[a]}})}:function(o,s,a,l){l===void 0&&(l=a),o[l]=s[a]}),e=oe&&oe.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=oe&&oe.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var a in o)a!=="default"&&Object.prototype.hasOwnProperty.call(o,a)&&n(s,o,a);return e(s,o),s};Object.defineProperty(ko,"__esModule",{value:!0}),ko.v2=ko.v1=void 0;var r=t(jI());ko.v1=r;var i=t(hre());return ko.v2=i,ko.default=i,ko}var yf={},_C;function cl(){if(_C)return yf;_C=1,Object.defineProperty(yf,"__esModule",{value:!0});var n=Mt(),e=n.internal.constants,t=e.ACCESS_MODE_READ,r=e.FETCH_ALL,i=n.internal.util.assertString,o=1,s=15,a=16,l=63,u=1,c=2,f=17,d=18,g=19,h=102,v=47,m=63,p="r",y=-1,b=function(){function F(B,H,L){this.signature=B,this.fields=H,this.toString=L}return F.init=function(B,H){return new F(o,[B,H],function(){return"INIT "+B+" {...}"})},F.run=function(B,H){return new F(a,[B,H],function(){return"RUN "+B+" "+n.json.stringify(H)})},F.pullAll=function(){return S},F.reset=function(){return E},F.hello=function(B,H,L,N){L===void 0&&(L=null),N===void 0&&(N=null);var U=Object.assign({user_agent:B},H);return L&&(U.routing=L),N&&(U.patch_bolt=N),new F(u,[U],function(){return"HELLO {user_agent: '"+B+"', ...}"})},F.begin=function(B){var H=B===void 0?{}:B,L=H.bookmark,N=H.txConfig,U=H.database,$=H.mode,Z=H.impersonatedUser,A=_(L,N,U,$,Z);return new F(f,[A],function(){return"BEGIN "+n.json.stringify(A)})},F.commit=function(){return O},F.rollback=function(){return R},F.runWithMetadata=function(B,H,L){var N=L===void 0?{}:L,U=N.bookmark,$=N.txConfig,Z=N.database,A=N.mode,P=N.impersonatedUser,V=_(U,$,Z,A,P);return new F(a,[B,H,V],function(){return"RUN "+B+" "+n.json.stringify(H)+" "+n.json.stringify(V)})},F.goodbye=function(){return D},F.pull=function(B){var H=B===void 0?{}:B,L=H.stmtId,N=L===void 0?y:L,U=H.n,$=U===void 0?r:U,Z=w(N==null?y:N,$||r);return new F(m,[Z],function(){return"PULL "+n.json.stringify(Z)})},F.discard=function(B){var H=B===void 0?{}:B,L=H.stmtId,N=L===void 0?y:L,U=H.n,$=U===void 0?r:U,Z=w(N==null?y:N,$||r);return new F(v,[Z],function(){return"DISCARD "+n.json.stringify(Z)})},F.route=function(B,H,L){return B===void 0&&(B={}),H===void 0&&(H=[]),L===void 0&&(L=null),new F(h,[B,H,L],function(){return"ROUTE "+n.json.stringify(B)+" "+n.json.stringify(H)+" "+L})},F.routeV4x4=function(B,H,L){B===void 0&&(B={}),H===void 0&&(H=[]),L===void 0&&(L={});var N={};return L.databaseName&&(N.db=L.databaseName),L.impersonatedUser&&(N.imp_user=L.impersonatedUser),new F(h,[B,H,N],function(){return"ROUTE "+n.json.stringify(B)+" "+n.json.stringify(H)+" "+n.json.stringify(N)})},F}();yf.default=b;function _(F,B,H,L,N){var U={};return F.isEmpty()||(U.bookmarks=F.values()),B.timeout&&(U.tx_timeout=B.timeout),B.metadata&&(U.tx_metadata=B.metadata),H&&(U.db=i(H,"database")),N&&(U.imp_user=i(N,"impersonatedUser")),L===t&&(U.mode=p),U}function w(F,B){var H={n:(0,n.int)(B)};return F!==y&&(H.qid=(0,n.int)(F)),H}var S=new b(l,[],function(){return"PULL_ALL"}),E=new b(s,[],function(){return"RESET"}),O=new b(d,[],function(){return"COMMIT"}),R=new b(g,[],function(){return"ROLLBACK"}),D=new b(c,[],function(){return"GOODBYE"});return yf}var Vn={},_f={},bC;function FI(){if(bC)return _f;bC=1;var n=oe&&oe.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var c in u)Object.prototype.hasOwnProperty.call(u,c)&&(l[c]=u[c])},o(s,a)};return function(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");o(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}();Object.defineProperty(_f,"__esModule",{value:!0});var e=function(){function o(){}return o.ofRecord=function(s){return s===null?o.ofNull():new i(s)},o.ofMessageResponse=function(s){return s===null?o.ofNull():new t(s)},o.ofNull=function(){return new r},Object.defineProperty(o.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),o}();_f.default=e;var t=function(o){n(s,o);function s(a){var l=o.call(this)||this;return l._response=a,l}return Object.defineProperty(s.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),s}(e),r=function(o){n(s,o);function s(){return o!==null&&o.apply(this,arguments)||this}return Object.defineProperty(s.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),s}(e),i=function(o){n(s,o);function s(a){var l=o.call(this)||this;return l._record=a,l}return Object.defineProperty(s.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),s}(e);return _f}var wC;function rs(){if(wC)return Vn;wC=1;var n=oe&&oe.__extends||function(){var v=function(m,p){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var _ in b)Object.prototype.hasOwnProperty.call(b,_)&&(y[_]=b[_])},v(m,p)};return function(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");v(m,p);function y(){this.constructor=m}m.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}}(),e=oe&&oe.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.ProcedureRouteObserver=Vn.RouteObserver=Vn.CompletedObserver=Vn.FailedObserver=Vn.ResetObserver=Vn.LoginObserver=Vn.ResultStreamObserver=Vn.StreamObserver=void 0;var t=Mt(),r=e(FI()),i=t.internal.constants.FETCH_ALL,o=t.error.PROTOCOL_ERROR,s=function(){function v(){}return v.prototype.onNext=function(m){},v.prototype.onError=function(m){},v.prototype.onCompleted=function(m){},v}();Vn.StreamObserver=s;var a=function(v){n(m,v);function m(p){var y=p===void 0?{}:p,b=y.reactive,_=b===void 0?!1:b,w=y.moreFunction,S=y.discardFunction,E=y.fetchSize,O=E===void 0?i:E,R=y.beforeError,D=y.afterError,F=y.beforeKeys,B=y.afterKeys,H=y.beforeComplete,L=y.afterComplete,N=y.server,U=v.call(this)||this;return U._fieldKeys=null,U._fieldLookup=null,U._head=null,U._queuedRecords=[],U._tail=null,U._error=null,U._observers=[],U._meta={},U._server=N,U._beforeError=R,U._afterError=D,U._beforeKeys=F,U._afterKeys=B,U._beforeComplete=H,U._afterComplete=L,U._queryId=null,U._moreFunction=w,U._discardFunction=S,U._discard=!1,U._fetchSize=O,U._setState(_?h.READY:h.READY_STREAMING),U._setupAuoPull(O),U}return m.prototype.onNext=function(p){var y=new t.Record(this._fieldKeys,p,this._fieldLookup);this._observers.some(function(b){return b.onNext})?this._observers.forEach(function(b){b.onNext&&b.onNext(y)}):(this._queuedRecords.push(y),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},m.prototype.onCompleted=function(p){this._state.onSuccess(this,p)},m.prototype.onError=function(p){this._state.onError(this,p)},m.prototype.cancel=function(){this._discard=!0},m.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(h.STREAMING)},m.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(h.SUCCEEDED)},m.prototype.subscribe=function(p){if(this._error){p.onError(this._error);return}if(this._head&&p.onKeys&&p.onKeys(this._head),this._queuedRecords.length>0&&p.onNext)for(var y=0;y<this._queuedRecords.length;y++)p.onNext(this._queuedRecords[y]),this._queuedRecords.length-y-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===h.READY&&this._handleStreaming());this._tail&&p.onCompleted&&p.onCompleted(this._tail),this._observers.push(p),this._state===h.READY&&this._handleStreaming()},m.prototype._handleHasMore=function(p){this._setState(h.READY),this._handleStreaming(),delete p.has_more},m.prototype._handlePullSuccess=function(p){var y=this;this._setState(h.SUCCEEDED);var b=Object.assign(this._server?{server:this._server}:{},this._meta,p),_=null;this._beforeComplete&&(_=this._beforeComplete(b));var w=function(){y._tail=b,y._observers.some(function(S){return S.onCompleted})&&y._observers.forEach(function(S){S.onCompleted&&S.onCompleted(b)}),y._afterComplete&&y._afterComplete(b)};_?Promise.resolve(_).then(function(){return w()}):w()},m.prototype._handleRunSuccess=function(p,y){var b=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},p.fields&&p.fields.length>0){this._fieldKeys=p.fields;for(var _=0;_<p.fields.length;_++)this._fieldLookup[p.fields[_]]=_;delete p.fields}p.qid!==null&&p.qid!==void 0&&(this._queryId=p.qid,delete p.qid),this._storeMetadataForCompletion(p);var w=null;this._beforeKeys&&(w=this._beforeKeys(this._fieldKeys));var S=function(){b._head=b._fieldKeys,b._observers.some(function(E){return E.onKeys})&&b._observers.forEach(function(E){E.onKeys&&E.onKeys(b._fieldKeys)}),b._afterKeys&&b._afterKeys(b._fieldKeys),y()};w?Promise.resolve(w).then(function(){return S()}):S()}},m.prototype._handleError=function(p){var y=this;this._setState(h.FAILED),this._error=p;var b=null;this._beforeError&&(b=this._beforeError(p));var _=function(){y._observers.some(function(w){return w.onError})&&y._observers.forEach(function(w){w.onError&&w.onError(p)}),y._afterError&&y._afterError(p)};b?Promise.resolve(b).then(function(){return _()}):_()},m.prototype._handleStreaming=function(){this._head&&this._observers.some(function(p){return p.onNext||p.onCompleted})&&(this._discard?(this._discardFunction(this._queryId,this),this._setState(h.STREAMING)):this._autoPull&&(this._moreFunction(this._queryId,this._fetchSize,this),this._setState(h.STREAMING)))},m.prototype._storeMetadataForCompletion=function(p){for(var y=Object.keys(p),b=y.length,_="";b--;)_=y[b],this._meta[_]=p[_]},m.prototype._setState=function(p){this._state=p},m.prototype._setupAuoPull=function(p){this._autoPull=!0,p===i?(this._lowRecordWatermark=Number.MAX_VALUE,this._highRecordWatermark=Number.MAX_VALUE):(this._lowRecordWatermark=.3*p,this._highRecordWatermark=.7*p)},m}(s);Vn.ResultStreamObserver=a;var l=function(v){n(m,v);function m(p){var y=p===void 0?{}:p,b=y.onError,_=y.onCompleted,w=v.call(this)||this;return w._onError=b,w._onCompleted=_,w}return m.prototype.onNext=function(p){this.onError((0,t.newError)("Received RECORD when initializing "+t.json.stringify(p)))},m.prototype.onError=function(p){this._onError&&this._onError(p)},m.prototype.onCompleted=function(p){this._onCompleted&&this._onCompleted(p)},m}(s);Vn.LoginObserver=l;var u=function(v){n(m,v);function m(p){var y=p===void 0?{}:p,b=y.onProtocolError,_=y.onError,w=y.onComplete,S=v.call(this)||this;return S._onProtocolError=b,S._onError=_,S._onComplete=w,S}return m.prototype.onNext=function(p){this.onError((0,t.newError)("Received RECORD when resetting: received record is: "+t.json.stringify(p),o))},m.prototype.onError=function(p){p.code===o&&this._onProtocolError&&this._onProtocolError(p.message),this._onError&&this._onError(p)},m.prototype.onCompleted=function(p){this._onComplete&&this._onComplete(p)},m}(s);Vn.ResetObserver=u;var c=function(v){n(m,v);function m(p){var y=p.error,b=p.onError,_=v.call(this,{beforeError:b})||this;return _.onError(y),_}return m}(a);Vn.FailedObserver=c;var f=function(v){n(m,v);function m(){var p=v.call(this)||this;return v.prototype.markCompleted.call(p),p}return m}(a);Vn.CompletedObserver=f;var d=function(v){n(m,v);function m(p){var y=p.resultObserver,b=p.onProtocolError,_=p.onError,w=p.onCompleted,S=v.call(this)||this;return S._resultObserver=y,S._onError=_,S._onCompleted=w,S._records=[],S._onProtocolError=b,y.subscribe(S),S}return m.prototype.onNext=function(p){this._records.push(p)},m.prototype.onError=function(p){p.code===o&&this._onProtocolError&&this._onProtocolError(p.message),this._onError&&this._onError(p)},m.prototype.onCompleted=function(){if(this._records!==null&&this._records.length!==1){this.onError((0,t.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+t.json.stringify(this._records),o));return}this._onCompleted&&this._onCompleted(r.default.ofRecord(this._records[0]))},m}(s);Vn.ProcedureRouteObserver=d;var g=function(v){n(m,v);function m(p){var y=p===void 0?{}:p,b=y.onProtocolError,_=y.onError,w=y.onCompleted,S=v.call(this)||this;return S._onProtocolError=b,S._onError=_,S._onCompleted=w,S}return m.prototype.onNext=function(p){this.onError((0,t.newError)("Received RECORD when resetting: received record is: "+t.json.stringify(p),o))},m.prototype.onError=function(p){p.code===o&&this._onProtocolError&&this._onProtocolError(p.message),this._onError&&this._onError(p)},m.prototype.onCompleted=function(p){this._onCompleted&&this._onCompleted(r.default.ofMessageResponse(p))},m}(s);Vn.RouteObserver=g;var h={READY_STREAMING:{onSuccess:function(v,m){v._handleRunSuccess(m,function(){v._setState(h.STREAMING)})},onError:function(v,m){v._handleError(m)},name:function(){return"READY_STREAMING"}},READY:{onSuccess:function(v,m){v._handleRunSuccess(m,function(){return v._handleStreaming()})},onError:function(v,m){v._handleError(m)},name:function(){return"READY"}},STREAMING:{onSuccess:function(v,m){m.has_more?v._handleHasMore(m):v._handlePullSuccess(m)},onError:function(v,m){v._handleError(m)},name:function(){return"STREAMING"}},FAILED:{onError:function(v){},name:function(){return"FAILED"}},SUCCEEDED:{name:function(){return"SUCCEEDED"}}};return Vn}var SC;function UI(){if(SC)return vf;SC=1;var n=oe&&oe.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(vf,"__esModule",{value:!0});var e=Oy(),t=Ty(),r=n(cl()),i=rs(),o=Mt(),s=o.internal.bookmark.Bookmark,a=o.internal.constants,l=a.ACCESS_MODE_WRITE,u=a.BOLT_PROTOCOL_V1;o.internal.logger.Logger;var c=o.internal.txConfig.TxConfig,f=function(){function d(g,h,v,m,p,y){var b=v===void 0?{}:v,_=b.disableLosslessIntegers,w=b.useBigInt;m===void 0&&(m=function(){return null}),this._server=g||{},this._chunker=h,this._packer=this._createPacker(h),this._unpacker=this._createUnpacker(_,w),this._responseHandler=m(this),this._log=p,this._onProtocolError=y,this._fatalError=null}return Object.defineProperty(d.prototype,"version",{get:function(){return u},enumerable:!1,configurable:!0}),d.prototype.packer=function(){return this._packer},d.prototype.unpacker=function(){return this._unpacker},d.prototype.transformMetadata=function(g){return g},d.prototype.initialize=function(g){var h=this,v=g===void 0?{}:g,m=v.userAgent,p=v.authToken,y=v.onError,b=v.onComplete,_=new i.LoginObserver({onError:function(w){return h._onLoginError(w,y)},onCompleted:function(w){return h._onLoginCompleted(w,b)}});return this.write(r.default.init(m,p),_,!0),_},d.prototype.prepareToClose=function(){},d.prototype.beginTransaction=function(g){var h=g===void 0?{}:g,v=h.bookmark,m=h.txConfig,p=h.database,y=h.mode,b=h.impersonatedUser,_=h.beforeError,w=h.afterError,S=h.beforeComplete,E=h.afterComplete;return this.run("BEGIN",v?v.asBeginTransactionParameters():{},{bookmark:v,txConfig:m,database:p,mode:y,impersonatedUser:b,beforeError:_,afterError:w,beforeComplete:S,afterComplete:E,flush:!1})},d.prototype.commitTransaction=function(g){var h=g===void 0?{}:g,v=h.beforeError,m=h.afterError,p=h.beforeComplete,y=h.afterComplete;return this.run("COMMIT",{},{bookmark:s.empty(),txConfig:c.empty(),mode:l,beforeError:v,afterError:m,beforeComplete:p,afterComplete:y})},d.prototype.rollbackTransaction=function(g){var h=g===void 0?{}:g,v=h.beforeError,m=h.afterError,p=h.beforeComplete,y=h.afterComplete;return this.run("ROLLBACK",{},{bookmark:s.empty(),txConfig:c.empty(),mode:l,beforeError:v,afterError:m,beforeComplete:p,afterComplete:y})},d.prototype.run=function(g,h,v){var m=v===void 0?{}:v;m.bookmark;var p=m.txConfig,y=m.database;m.mode;var b=m.impersonatedUser,_=m.beforeKeys,w=m.afterKeys,S=m.beforeError,E=m.afterError,O=m.beforeComplete,R=m.afterComplete,D=m.flush,F=D===void 0?!0:D,B=new i.ResultStreamObserver({server:this._server,beforeKeys:_,afterKeys:w,beforeError:S,afterError:E,beforeComplete:O,afterComplete:R});return(0,e.assertTxConfigIsEmpty)(p,this._onProtocolError,B),(0,e.assertDatabaseIsEmpty)(y,this._onProtocolError,B),(0,e.assertImpersonatedUserIsEmpty)(b,this._onProtocolError,B),this.write(r.default.run(g,h),B,!1),this.write(r.default.pullAll(),B,F),B},Object.defineProperty(d.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),d.prototype.reset=function(g){var h=g===void 0?{}:g,v=h.onError,m=h.onComplete,p=new i.ResetObserver({onProtocolError:this._onProtocolError,onError:v,onComplete:m});return this.write(r.default.reset(),p,!0),p},d.prototype._createPacker=function(g){return new t.v1.Packer(g)},d.prototype._createUnpacker=function(g,h){return new t.v1.Unpacker(g,h)},d.prototype.write=function(g,h,v){var m=this,p=this.queueObserverIfProtocolIsNotBroken(h);p&&(this._log.isDebugEnabled()&&this._log.debug("C: "+g),this.packer().packStruct(g.signature,g.fields.map(function(y){return m.packer().packable(y)})),this._chunker.messageBoundary(),v&&this._chunker.flush())},d.prototype.notifyFatalError=function(g){return this._fatalError=g,this._responseHandler._notifyErrorToObservers(g)},d.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},d.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},d.prototype.queueObserverIfProtocolIsNotBroken=function(g){return this.isBroken()?(this.notifyFatalErrorToObserver(g),!1):this._responseHandler._queueObserver(g)},d.prototype.isBroken=function(){return!!this._fatalError},d.prototype.notifyFatalErrorToObserver=function(g){g&&g.onError&&g.onError(this._fatalError)},d.prototype.resetFailure=function(){this._responseHandler._resetFailure()},d.prototype._onLoginCompleted=function(g,h){if(g){var v=g.server;this._server.version||(this._server.version=v)}h&&h(g)},d.prototype._onLoginError=function(g,h){this._onProtocolError(g.message),h&&h(g)},d}();return vf.default=f,vf}var bf={},EC;function VI(){if(EC)return bf;EC=1;var n=oe&&oe.__extends||function(){var a=function(l,u){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},a(l,u)};return function(l,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");a(l,u);function c(){this.constructor=l}l.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),e=oe&&oe.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(bf,"__esModule",{value:!0});var t=e(UI()),r=e(Ty()),i=Mt(),o=i.internal.constants.BOLT_PROTOCOL_V2,s=function(a){n(l,a);function l(){return a!==null&&a.apply(this,arguments)||this}return l.prototype._createPacker=function(u){return new r.default.Packer(u)},l.prototype._createUnpacker=function(u,c){return new r.default.Unpacker(u,c)},Object.defineProperty(l.prototype,"version",{get:function(){return o},enumerable:!1,configurable:!0}),l}(t.default);return bf.default=s,bf}var wf={},CC;function qI(){if(CC)return wf;CC=1;var n=oe&&oe.__extends||function(){var h=function(v,m){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(p[b]=y[b])},h(v,m)};return function(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");h(v,m);function p(){this.constructor=v}v.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}}(),e=oe&&oe.__assign||function(){return e=Object.assign||function(h){for(var v,m=1,p=arguments.length;m<p;m++){v=arguments[m];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(h[y]=v[y])}return h},e.apply(this,arguments)},t=oe&&oe.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(wf,"__esModule",{value:!0});var r=t(VI()),i=t(cl()),o=Oy(),s=rs(),a=Mt();a.internal.bookmark.Bookmark;var l=a.internal.constants.BOLT_PROTOCOL_V3,u=a.internal.txConfig.TxConfig,c="context",f="CALL dbms.cluster.routing.getRoutingTable($"+c+")",d=new s.StreamObserver,g=function(h){n(v,h);function v(){return h!==null&&h.apply(this,arguments)||this}return Object.defineProperty(v.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),v.prototype.transformMetadata=function(m){return"t_first"in m&&(m.result_available_after=m.t_first,delete m.t_first),"t_last"in m&&(m.result_consumed_after=m.t_last,delete m.t_last),m},v.prototype.initialize=function(m){var p=this,y=m===void 0?{}:m,b=y.userAgent,_=y.authToken,w=y.onError,S=y.onComplete,E=new s.LoginObserver({onError:function(O){return p._onLoginError(O,w)},onCompleted:function(O){return p._onLoginCompleted(O,S)}});return this.write(i.default.hello(b,_),E,!0),E},v.prototype.prepareToClose=function(){this.write(i.default.goodbye(),d,!0)},v.prototype.beginTransaction=function(m){var p=m===void 0?{}:m,y=p.bookmark,b=p.txConfig,_=p.database,w=p.impersonatedUser,S=p.mode,E=p.beforeError,O=p.afterError,R=p.beforeComplete,D=p.afterComplete,F=new s.ResultStreamObserver({server:this._server,beforeError:E,afterError:O,beforeComplete:R,afterComplete:D});return F.prepareToHandleSingleResponse(),(0,o.assertDatabaseIsEmpty)(_,this._onProtocolError,F),(0,o.assertImpersonatedUserIsEmpty)(w,this._onProtocolError,F),this.write(i.default.begin({bookmark:y,txConfig:b,mode:S}),F,!0),F},v.prototype.commitTransaction=function(m){var p=m===void 0?{}:m,y=p.beforeError,b=p.afterError,_=p.beforeComplete,w=p.afterComplete,S=new s.ResultStreamObserver({server:this._server,beforeError:y,afterError:b,beforeComplete:_,afterComplete:w});return S.prepareToHandleSingleResponse(),this.write(i.default.commit(),S,!0),S},v.prototype.rollbackTransaction=function(m){var p=m===void 0?{}:m,y=p.beforeError,b=p.afterError,_=p.beforeComplete,w=p.afterComplete,S=new s.ResultStreamObserver({server:this._server,beforeError:y,afterError:b,beforeComplete:_,afterComplete:w});return S.prepareToHandleSingleResponse(),this.write(i.default.rollback(),S,!0),S},v.prototype.run=function(m,p,y){var b=y===void 0?{}:y,_=b.bookmark,w=b.txConfig,S=b.database,E=b.impersonatedUser,O=b.mode,R=b.beforeKeys,D=b.afterKeys,F=b.beforeError,B=b.afterError,H=b.beforeComplete,L=b.afterComplete,N=b.flush,U=N===void 0?!0:N,$=new s.ResultStreamObserver({server:this._server,beforeKeys:R,afterKeys:D,beforeError:F,afterError:B,beforeComplete:H,afterComplete:L});return(0,o.assertDatabaseIsEmpty)(S,this._onProtocolError,$),(0,o.assertImpersonatedUserIsEmpty)(E,this._onProtocolError,$),this.write(i.default.runWithMetadata(m,p,{bookmark:_,txConfig:w,mode:O}),$,!1),this.write(i.default.pullAll(),$,U),$},v.prototype.requestRoutingInformation=function(m){var p,y=m.routingContext,b=y===void 0?{}:y,_=m.sessionContext,w=_===void 0?{}:_,S=m.onError,E=m.onCompleted,O=this.run(f,(p={},p[c]=b,p),e(e({},w),{txConfig:u.empty()}));return new s.ProcedureRouteObserver({resultObserver:O,onProtocolError:this._onProtocolError,onError:S,onCompleted:E})},v}(r.default);return wf.default=g,wf}var Sf={},kC;function HI(){if(kC)return Sf;kC=1;var n=oe&&oe.__extends||function(){var m=function(p,y){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,_){b.__proto__=_}||function(b,_){for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&(b[w]=_[w])},m(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");m(p,y);function b(){this.constructor=p}p.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}}(),e=oe&&oe.__assign||function(){return e=Object.assign||function(m){for(var p,y=1,b=arguments.length;y<b;y++){p=arguments[y];for(var _ in p)Object.prototype.hasOwnProperty.call(p,_)&&(m[_]=p[_])}return m},e.apply(this,arguments)},t=oe&&oe.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Sf,"__esModule",{value:!0});var r=t(qI()),i=t(cl()),o=Oy(),s=rs(),a=Mt();a.internal.bookmark.Bookmark;var l=a.internal.constants,u=l.BOLT_PROTOCOL_V4_0,c=l.FETCH_ALL,f=a.internal.txConfig.TxConfig,d="context",g="database",h="CALL dbms.routing.getRoutingTable($"+d+", $"+g+")",v=function(m){n(p,m);function p(){return m!==null&&m.apply(this,arguments)||this}return Object.defineProperty(p.prototype,"version",{get:function(){return u},enumerable:!1,configurable:!0}),p.prototype.beginTransaction=function(y){var b=y===void 0?{}:y,_=b.bookmark,w=b.txConfig,S=b.database,E=b.impersonatedUser,O=b.mode,R=b.beforeError,D=b.afterError,F=b.beforeComplete,B=b.afterComplete,H=new s.ResultStreamObserver({server:this._server,beforeError:R,afterError:D,beforeComplete:F,afterComplete:B});return H.prepareToHandleSingleResponse(),(0,o.assertImpersonatedUserIsEmpty)(E,this._onProtocolError,H),this.write(i.default.begin({bookmark:_,txConfig:w,database:S,mode:O}),H,!0),H},p.prototype.run=function(y,b,_){var w=_===void 0?{}:_,S=w.bookmark,E=w.txConfig,O=w.database,R=w.impersonatedUser,D=w.mode,F=w.beforeKeys,B=w.afterKeys,H=w.beforeError,L=w.afterError,N=w.beforeComplete,U=w.afterComplete,$=w.flush,Z=$===void 0?!0:$,A=w.reactive,P=A===void 0?!1:A,V=w.fetchSize,W=V===void 0?c:V,z=new s.ResultStreamObserver({server:this._server,reactive:P,fetchSize:W,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:F,afterKeys:B,beforeError:H,afterError:L,beforeComplete:N,afterComplete:U});(0,o.assertImpersonatedUserIsEmpty)(R,this._onProtocolError,z);var I=P;return this.write(i.default.runWithMetadata(y,b,{bookmark:S,txConfig:E,database:O,mode:D}),z,I&&Z),P||this.write(i.default.pull({n:W}),z,Z),z},p.prototype._requestMore=function(y,b,_){this.write(i.default.pull({stmtId:y,n:b}),_,!0)},p.prototype._requestDiscard=function(y,b){this.write(i.default.discard({stmtId:y}),b,!0)},p.prototype._noOp=function(){},p.prototype.requestRoutingInformation=function(y){var b,_=y.routingContext,w=_===void 0?{}:_,S=y.databaseName,E=S===void 0?null:S,O=y.sessionContext,R=O===void 0?{}:O,D=y.onError,F=y.onCompleted,B=this.run(h,(b={},b[d]=w,b[g]=E,b),e(e({},R),{txConfig:f.empty()}));return new s.ProcedureRouteObserver({resultObserver:B,onProtocolError:this._onProtocolError,onError:D,onCompleted:F})},p}(r.default);return Sf.default=v,Sf}var Ef={},OC;function zI(){if(OC)return Ef;OC=1;var n=oe&&oe.__extends||function(){var l=function(u,c){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(f[g]=d[g])},l(u,c)};return function(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");l(u,c);function f(){this.constructor=u}u.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}}(),e=oe&&oe.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ef,"__esModule",{value:!0});var t=e(HI()),r=e(cl()),i=rs(),o=Mt(),s=o.internal.constants.BOLT_PROTOCOL_V4_1,a=function(l){n(u,l);function u(c,f,d,g,h,v,m){g===void 0&&(g=function(){return null});var p=l.call(this,c,f,d,g,h,v)||this;return p._serversideRouting=m,p}return Object.defineProperty(u.prototype,"version",{get:function(){return s},enumerable:!1,configurable:!0}),u.prototype.initialize=function(c){var f=this,d=c===void 0?{}:c,g=d.userAgent,h=d.authToken,v=d.onError,m=d.onComplete,p=new i.LoginObserver({onError:function(y){return f._onLoginError(y,v)},onCompleted:function(y){return f._onLoginCompleted(y,m)}});return this.write(r.default.hello(g,h,this._serversideRouting),p,!0),p},u}(t.default);return Ef.default=a,Ef}var Cf={},TC;function WI(){if(TC)return Cf;TC=1;var n=oe&&oe.__extends||function(){var s=function(a,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(u[f]=c[f])},s(a,l)};return function(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");s(a,l);function u(){this.constructor=a}a.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}}(),e=oe&&oe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Cf,"__esModule",{value:!0});var t=e(zI()),r=Mt(),i=r.internal.constants.BOLT_PROTOCOL_V4_2,o=function(s){n(a,s);function a(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(a.prototype,"version",{get:function(){return i},enumerable:!1,configurable:!0}),a}(t.default);return Cf.default=o,Cf}var kf={},PC;function Py(){if(PC)return kf;PC=1;var n=oe&&oe.__extends||function(){var c=function(f,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,h){g.__proto__=h}||function(g,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(g[v]=h[v])},c(f,d)};return function(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");c(f,d);function g(){this.constructor=f}f.prototype=d===null?Object.create(d):(g.prototype=d.prototype,new g)}}(),e=oe&&oe.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(kf,"__esModule",{value:!0});var t=e(WI()),r=e(cl()),i=rs(),o=rs(),s=Mt(),a=s.internal.bookmark.Bookmark,l=s.internal.constants.BOLT_PROTOCOL_V4_3,u=function(c){n(f,c);function f(){return c!==null&&c.apply(this,arguments)||this}return Object.defineProperty(f.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),f.prototype.requestRoutingInformation=function(d){var g=d.routingContext,h=g===void 0?{}:g,v=d.databaseName,m=v===void 0?null:v,p=d.sessionContext,y=p===void 0?{}:p,b=d.onError,_=d.onCompleted,w=new i.RouteObserver({onProtocolError:this._onProtocolError,onError:b,onCompleted:_}),S=y.bookmark||a.empty();return this.write(r.default.route(h,S.values(),m),w,!0),w},f.prototype.initialize=function(d){var g=this,h=d===void 0?{}:d,v=h.userAgent,m=h.authToken,p=h.onError,y=h.onComplete,b=new o.LoginObserver({onError:function(_){return g._onLoginError(_,p)},onCompleted:function(_){return _.patch_bolt!==void 0&&g._applyPatches(_.patch_bolt),g._onLoginCompleted(_,y)}});return this.write(r.default.hello(v,m,this._serversideRouting,["utc"]),b,!0),b},f.prototype._applyPatches=function(d){d.includes("utc")&&this._applyUtcPatch()},f.prototype._applyUtcPatch=function(){this._packer.useUtc=!0,this._unpacker.useUtc=!0},f}(t.default);return kf.default=u,kf}var Of={},IC;function dre(){if(IC)return Of;IC=1;var n=oe&&oe.__extends||function(){var f=function(d,g){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(h[m]=v[m])},f(d,g)};return function(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");f(d,g);function h(){this.constructor=d}d.prototype=g===null?Object.create(g):(h.prototype=g.prototype,new h)}}(),e=oe&&oe.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Of,"__esModule",{value:!0});var t=e(Py()),r=Mt(),i=e(cl()),o=rs(),s=r.internal.constants,a=s.BOLT_PROTOCOL_V4_4,l=s.FETCH_ALL,u=r.internal.bookmark.Bookmark,c=function(f){n(d,f);function d(){return f!==null&&f.apply(this,arguments)||this}return Object.defineProperty(d.prototype,"version",{get:function(){return a},enumerable:!1,configurable:!0}),d.prototype.requestRoutingInformation=function(g){var h=g.routingContext,v=h===void 0?{}:h,m=g.databaseName,p=m===void 0?null:m,y=g.impersonatedUser,b=y===void 0?null:y,_=g.sessionContext,w=_===void 0?{}:_,S=g.onError,E=g.onCompleted,O=new o.RouteObserver({onProtocolError:this._onProtocolError,onError:S,onCompleted:E}),R=w.bookmark||u.empty();return this.write(i.default.routeV4x4(v,R.values(),{databaseName:p,impersonatedUser:b}),O,!0),O},d.prototype.run=function(g,h,v){var m=v===void 0?{}:v,p=m.bookmark,y=m.txConfig,b=m.database,_=m.mode,w=m.impersonatedUser,S=m.beforeKeys,E=m.afterKeys,O=m.beforeError,R=m.afterError,D=m.beforeComplete,F=m.afterComplete,B=m.flush,H=B===void 0?!0:B,L=m.reactive,N=L===void 0?!1:L,U=m.fetchSize,$=U===void 0?l:U,Z=new o.ResultStreamObserver({server:this._server,reactive:N,fetchSize:$,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:S,afterKeys:E,beforeError:O,afterError:R,beforeComplete:D,afterComplete:F}),A=N;return this.write(i.default.runWithMetadata(g,h,{bookmark:p,txConfig:y,database:b,mode:_,impersonatedUser:w}),Z,A&&H),N||this.write(i.default.pull({n:$}),Z,H),Z},d.prototype.beginTransaction=function(g){var h=g===void 0?{}:g,v=h.bookmark,m=h.txConfig,p=h.database,y=h.mode,b=h.impersonatedUser,_=h.beforeError,w=h.afterError,S=h.beforeComplete,E=h.afterComplete,O=new o.ResultStreamObserver({server:this._server,beforeError:_,afterError:w,beforeComplete:S,afterComplete:E});return O.prepareToHandleSingleResponse(),this.write(i.default.begin({bookmark:v,txConfig:m,database:p,mode:y,impersonatedUser:b}),O,!0),O},d}(t.default);return Of.default=c,Of}var Tf={},AC;function pre(){if(AC)return Tf;AC=1,Object.defineProperty(Tf,"__esModule",{value:!0});var n=Mt(),e=112,t=113,r=126,i=127;function o(){}function s(u){return u}var a={onNext:o,onCompleted:o,onError:o},l=function(){function u(c){var f=c===void 0?{}:c,d=f.transformMetadata,g=f.log,h=f.observer;this._pendingObservers=[],this._log=g,this._transformMetadata=d||s,this._observer=Object.assign({onPendingObserversChange:o,onError:o,onFailure:o,onErrorApplyTransformation:s},h)}return Object.defineProperty(u.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),u.prototype.handleResponse=function(c){var f=c.fields[0];switch(c.signature){case t:this._log.isDebugEnabled()&&this._log.debug("S: RECORD "+n.json.stringify(c)),this._currentObserver.onNext(f);break;case e:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS "+n.json.stringify(c));try{var d=this._transformMetadata(f);this._currentObserver.onCompleted(d)}finally{this._updateCurrentObserver()}break;case i:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE "+n.json.stringify(c));try{var g=(0,n.newError)(f.message,f.code);this._currentFailure=this._observer.onErrorApplyTransformation(g),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case r:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED "+n.json.stringify(c));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,n.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,n.newError)("Unknown Bolt protocol message: "+c))}},u.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onPendingObserversChange(this._pendingObservers.length)},u.prototype._queueObserver=function(c){return c=c||a,c.onCompleted=c.onCompleted||o,c.onError=c.onError||o,c.onNext=c.onNext||o,this._currentObserver===void 0?this._currentObserver=c:this._pendingObservers.push(c),this._observer.onPendingObserversChange(this._pendingObservers.length),!0},u.prototype._notifyErrorToObservers=function(c){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(c);this._pendingObservers.length>0;){var f=this._pendingObservers.shift();f&&f.onError&&f.onError(c)}},u.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},u.prototype._resetFailure=function(){this._currentFailure=null},u}();return Tf.default=l,Tf}var RC;function mre(){if(RC)return gf;RC=1;var n=oe&&oe.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(gf,"__esModule",{value:!0});var e=Mt(),t=n(UI()),r=n(VI()),i=n(qI()),o=n(HI()),s=n(zI()),a=n(WI()),l=n(Py()),u=n(dre()),c=n(pre());function f(g){var h=g===void 0?{}:g,v=h.version,m=h.chunker,p=h.dechunker,y=h.channel,b=h.disableLosslessIntegers,_=h.useBigInt,w=h.serversideRouting,S=h.server,E=h.log,O=h.observer,R=function(D){var F=new c.default({transformMetadata:D.transformMetadata.bind(D),log:E,observer:O});return y.onerror=O.onError.bind(O),y.onmessage=function(B){return p.write(B)},p.onmessage=function(B){try{F.handleResponse(D.unpacker().unpack(B))}catch(H){return O.onError(H)}},F};return d(v,S,m,{disableLosslessIntegers:b,useBigInt:_},w,R,O.onProtocolError.bind(O),E)}gf.default=f;function d(g,h,v,m,p,y,b,_){switch(g){case 1:return new t.default(h,v,m,y,_,b);case 2:return new r.default(h,v,m,y,_,b);case 3:return new i.default(h,v,m,y,_,b);case 4:return new o.default(h,v,m,y,_,b);case 4.1:return new s.default(h,v,m,y,_,b,p);case 4.2:return new a.default(h,v,m,y,_,b,p);case 4.3:return new l.default(h,v,m,y,_,b,p);case 4.4:return new u.default(h,v,m,y,_,b,p);default:throw(0,e.newError)("Unknown Bolt protocol version: "+g)}}return gf}var xC;function Iy(){return xC||(xC=1,function(n){var e=oe&&oe.__createBinding||(Object.create?function(l,u,c,f){f===void 0&&(f=c),Object.defineProperty(l,f,{enumerable:!0,get:function(){return u[c]}})}:function(l,u,c,f){f===void 0&&(f=c),l[f]=u[c]}),t=oe&&oe.__exportStar||function(l,u){for(var c in l)c!=="default"&&!Object.prototype.hasOwnProperty.call(u,c)&&e(u,l,c)},r=oe&&oe.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(n,"__esModule",{value:!0}),n.RawRoutingTable=n.BoltProtocol=void 0;var i=r(cre()),o=r(mre()),s=r(Py()),a=r(FI());t(rs(),n),n.BoltProtocol=s.default,n.RawRoutingTable=a.default,n.default={handshake:i.default,create:o.default}}(Pm)),Pm}var Nm={},Oo={},NC;function KI(){if(NC)return Oo;NC=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.DEFAULT_ACQUISITION_TIMEOUT=Oo.DEFAULT_MAX_SIZE=void 0;var n=100;Oo.DEFAULT_MAX_SIZE=n;var e=60*1e3;Oo.DEFAULT_ACQUISITION_TIMEOUT=e;var t=function(){function o(s,a){this.maxSize=r(s,n),this.acquisitionTimeout=r(a,e)}return o.defaultConfig=function(){return new o(n,e)},o.fromDriverConfig=function(s){var a=i(s.maxConnectionPoolSize),l=a?s.maxConnectionPoolSize:n,u=i(s.connectionAcquisitionTimeout),c=u?s.connectionAcquisitionTimeout:e;return new o(l,c)},o}();Oo.default=t;function r(o,s){return o===0||o?o:s}function i(o){return o===0||o}return Oo}var Pf={},MC;function gre(){if(MC)return Pf;MC=1;var n=oe&&oe.__awaiter||function(f,d,g,h){function v(m){return m instanceof g?m:new g(function(p){p(m)})}return new(g||(g=Promise))(function(m,p){function y(w){try{_(h.next(w))}catch(S){p(S)}}function b(w){try{_(h.throw(w))}catch(S){p(S)}}function _(w){w.done?m(w.value):v(w.value).then(y,b)}_((h=h.apply(f,d||[])).next())})},e=oe&&oe.__generator||function(f,d){var g={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},h,v,m,p;return p={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function y(_){return function(w){return b([_,w])}}function b(_){if(h)throw new TypeError("Generator is already executing.");for(;g;)try{if(h=1,v&&(m=_[0]&2?v.return:_[0]?v.throw||((m=v.return)&&m.call(v),0):v.next)&&!(m=m.call(v,_[1])).done)return m;switch(v=0,m&&(_=[_[0]&2,m.value]),_[0]){case 0:case 1:m=_;break;case 4:return g.label++,{value:_[1],done:!1};case 5:g.label++,v=_[1],_=[0];continue;case 7:_=g.ops.pop(),g.trys.pop();continue;default:if(m=g.trys,!(m=m.length>0&&m[m.length-1])&&(_[0]===6||_[0]===2)){g=0;continue}if(_[0]===3&&(!m||_[1]>m[0]&&_[1]<m[3])){g.label=_[1];break}if(_[0]===6&&g.label<m[1]){g.label=m[1],m=_;break}if(m&&g.label<m[2]){g.label=m[2],g.ops.push(_);break}m[2]&&g.ops.pop(),g.trys.pop();continue}_=d.call(f,g)}catch(w){_=[6,w],v=0}finally{h=m=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},t=oe&&oe.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Pf,"__esModule",{value:!0});var r=t(KI()),i=Mt(),o=i.internal.logger.Logger,s=function(){function f(d){var g=d===void 0?{}:d,h=g.create,v=h===void 0?function(B,H){return Promise.resolve()}:h,m=g.destroy,p=m===void 0?function(B){return Promise.resolve()}:m,y=g.validate,b=y===void 0?function(B){return!0}:y,_=g.installIdleObserver,w=_===void 0?function(B,H){}:_,S=g.removeIdleObserver,E=S===void 0?function(B){}:S,O=g.config,R=O===void 0?r.default.defaultConfig():O,D=g.log,F=D===void 0?o.noOp():D;this._create=v,this._destroy=p,this._validate=b,this._installIdleObserver=w,this._removeIdleObserver=E,this._maxSize=R.maxSize,this._acquisitionTimeout=R.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._poolState={},this._release=this._release.bind(this),this._log=F,this._closed=!1}return f.prototype.acquire=function(d){var g=this;return this._acquire(d).then(function(h){var v=d.asKey();if(h)return h;var m=g._acquireRequests,p=m[v];return p||(m[v]=[]),new Promise(function(y,b){var _,w=setTimeout(function(){var S=m[v];if(S&&(m[v]=S.filter(function(R){return R!==_})),!_.isCompleted()){var E=g.activeResourceCount(d),O=g.has(d)?g._pools[v].length:0;_.reject((0,i.newError)("Connection acquisition timed out in "+g._acquisitionTimeout+" ms. Pool status: Active conn count = "+E+", Idle conn count = "+O+"."))}},g._acquisitionTimeout);_=new u(v,y,b,w,g._log),m[v].push(_)})})},f.prototype.purge=function(d){return this._purgeKey(d.asKey())},f.prototype.close=function(){return n(this,void 0,void 0,function(){var d=this;return e(this,function(g){switch(g.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(h){return d._purgeKey(h)}))];case 1:return[2,g.sent()]}})})},f.prototype.keepAll=function(d){var g=this,h=d.map(function(p){return p.asKey()}),v=Object.keys(this._pools),m=v.filter(function(p){return h.indexOf(p)===-1});return Promise.all(m.map(function(p){return g._purgeKey(p)}))},f.prototype.has=function(d){return d.asKey()in this._pools},f.prototype.activeResourceCount=function(d){return this._activeResourceCounts[d.asKey()]||0},f.prototype._acquire=function(d){return n(this,void 0,void 0,function(){var g,h,v,m,p,y,b=this;return e(this,function(_){switch(_.label){case 0:if(this._closed)throw(0,i.newError)("Pool is closed, it is no more able to serve requests.");g=d.asKey(),h=this._pools[g],v=this._poolState[g],h||(h=[],v=new c,this._pools[g]=h,this._pendingCreates[g]=0,this._poolState[g]=v),_.label=1;case 1:return h.length?(m=h.pop(),this._validate(m)?(this._removeIdleObserver&&this._removeIdleObserver(m),a(g,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug(m+" acquired from the pool "+g),[2,m]):[3,2]):[3,5];case 2:return[4,this._destroy(m)];case 3:_.sent(),_.label=4;case 4:return[3,1];case 5:if(this._maxSize>0&&(p=this.activeResourceCount(d)+this._pendingCreates[g],p>=this._maxSize))return[2,null];this._pendingCreates[g]=this._pendingCreates[g]+1,_.label=6;case 6:return _.trys.push([6,,8,9]),[4,this._create(d,function(w,S){return b._release(v,w,S)})];case 7:return y=_.sent(),a(g,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug(y+" created for the pool "+g),[3,9];case 8:return this._pendingCreates[g]=this._pendingCreates[g]-1,[7];case 9:return[2,y]}})})},f.prototype._release=function(d,g,h){return n(this,void 0,void 0,function(){var v,m,p=this;return e(this,function(y){switch(y.label){case 0:return v=g.asKey(),m=this._pools[v],m&&d&&d.isActive()?this._validate(h)?[3,2]:(this._log.isDebugEnabled()&&this._log.debug(h+" destroyed and can't be released to the pool "+v+" because it is not functional"),[4,this._destroy(h)]):[3,4];case 1:return y.sent(),[3,3];case 2:this._installIdleObserver&&this._installIdleObserver(h,{onError:function(b){p._log.debug("Idle connection "+h+" destroyed because of error: "+b);var _=p._pools[v];_&&(p._pools[v]=_.filter(function(w){return w!==h})),p._destroy(h).catch(function(){})}}),m.push(h),this._log.isDebugEnabled()&&this._log.debug(h+" released to the pool "+v),y.label=3;case 3:return[3,6];case 4:return this._log.isDebugEnabled()&&this._log.debug(h+" destroyed and can't be released to the pool "+v+" because pool has been purged"),[4,this._destroy(h)];case 5:y.sent(),y.label=6;case 6:return l(v,this._activeResourceCounts),this._processPendingAcquireRequests(g),[2]}})})},f.prototype._purgeKey=function(d){return n(this,void 0,void 0,function(){var g,h,v;return e(this,function(m){switch(m.label){case 0:g=this._pools[d]||[],h=this._poolState[d]||new c,m.label=1;case 1:return g.length?(v=g.pop(),this._removeIdleObserver&&this._removeIdleObserver(v),[4,this._destroy(v)]):[3,3];case 2:return m.sent(),[3,1];case 3:return h.close(),delete this._pools[d],delete this._poolState[d],[2]}})})},f.prototype._processPendingAcquireRequests=function(d){var g=this,h=d.asKey(),v=this._acquireRequests[h],m=this._poolState[h];if(v){var p=v.shift();p?this._acquire(d).catch(function(y){return p.reject(y),null}).then(function(y){y&&(p.isCompleted()?g._release(m,d,y):p.resolve(y))}):delete this._acquireRequests[h]}},f}();function a(f,d){var g=d[f]||0;d[f]=g+1}function l(f,d){var g=d[f]||0,h=g-1;h>0?d[f]=h:delete d[f]}var u=function(){function f(d,g,h,v,m){this._key=d,this._resolve=g,this._reject=h,this._timeoutId=v,this._log=m,this._completed=!1}return f.prototype.isCompleted=function(){return this._completed},f.prototype.resolve=function(d){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug(d+" acquired from the pool "+this._key),this._resolve(d))},f.prototype.reject=function(d){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(d))},f}(),c=function(){function f(){this._active=!0}return f.prototype.isActive=function(){return this._active},f.prototype.close=function(){this._active=!1},f}();return Pf.default=s,Pf}var DC;function GI(){return DC||(DC=1,function(n){var e=oe&&oe.__createBinding||(Object.create?function(a,l,u,c){c===void 0&&(c=u),Object.defineProperty(a,c,{enumerable:!0,get:function(){return l[u]}})}:function(a,l,u,c){c===void 0&&(c=u),a[c]=l[u]}),t=oe&&oe.__setModuleDefault||(Object.create?function(a,l){Object.defineProperty(a,"default",{enumerable:!0,value:l})}:function(a,l){a.default=l}),r=oe&&oe.__importStar||function(a){if(a&&a.__esModule)return a;var l={};if(a!=null)for(var u in a)u!=="default"&&Object.prototype.hasOwnProperty.call(a,u)&&e(l,a,u);return t(l,a),l},i=oe&&oe.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_MAX_SIZE=n.DEFAULT_ACQUISITION_TIMEOUT=n.PoolConfig=n.Pool=void 0;var o=r(KI());n.PoolConfig=o.default,Object.defineProperty(n,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return o.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(n,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return o.DEFAULT_MAX_SIZE}});var s=i(gre());n.Pool=s.default,n.default=s.default}(Nm)),Nm}var Mm={},If={},LC;function JI(){if(LC)return If;LC=1;var n=oe&&oe.__extends||function(){var r=function(i,o){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},r(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");r(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}();Object.defineProperty(If,"__esModule",{value:!0});var e=Mt(),t=function(r){n(i,r);function i(o){var s=r.call(this)||this;return s._connection=o,s}return i.prototype.acquireConnection=function(o){var s=o===void 0?{}:o;s.accessMode,s.database,s.bookmarks;var a=this._connection;return this._connection=null,Promise.resolve(a)},i}(e.ConnectionProvider);return If.default=t,If}var Af={},Dm={},Rf={},jC;function Ay(){if(jC)return Rf;jC=1,Object.defineProperty(Rf,"__esModule",{value:!0});var n=function(){function e(t){this._errorHandler=t}return Object.defineProperty(e.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),e.prototype.isOpen=function(){throw new Error("not implemented")},e.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(e.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),e.prototype.connect=function(t,r){throw new Error("not implemented")},e.prototype.write=function(t,r,i){throw new Error("not implemented")},e.prototype.resetAndFlush=function(){throw new Error("not implemented")},e.prototype.close=function(){throw new Error("not implemented")},e.prototype.handleAndTransformError=function(t,r){return this._errorHandler?this._errorHandler.handleAndTransformError(t,r):t},e}();return Rf.default=n,Rf}var ua={},BC;function vre(){if(BC)return ua;BC=1;var n=oe&&oe.__extends||function(){var h=function(v,m){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(p[b]=y[b])},h(v,m)};return function(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");h(v,m);function p(){this.constructor=v}v.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}}(),e=oe&&oe.__awaiter||function(h,v,m,p){function y(b){return b instanceof m?b:new m(function(_){_(b)})}return new(m||(m=Promise))(function(b,_){function w(O){try{E(p.next(O))}catch(R){_(R)}}function S(O){try{E(p.throw(O))}catch(R){_(R)}}function E(O){O.done?b(O.value):y(O.value).then(w,S)}E((p=p.apply(h,v||[])).next())})},t=oe&&oe.__generator||function(h,v){var m={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},p,y,b,_;return _={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function w(E){return function(O){return S([E,O])}}function S(E){if(p)throw new TypeError("Generator is already executing.");for(;m;)try{if(p=1,y&&(b=E[0]&2?y.return:E[0]?y.throw||((b=y.return)&&b.call(y),0):y.next)&&!(b=b.call(y,E[1])).done)return b;switch(y=0,b&&(E=[E[0]&2,b.value]),E[0]){case 0:case 1:b=E;break;case 4:return m.label++,{value:E[1],done:!1};case 5:m.label++,y=E[1],E=[0];continue;case 7:E=m.ops.pop(),m.trys.pop();continue;default:if(b=m.trys,!(b=b.length>0&&b[b.length-1])&&(E[0]===6||E[0]===2)){m=0;continue}if(E[0]===3&&(!b||E[1]>b[0]&&E[1]<b[3])){m.label=E[1];break}if(E[0]===6&&m.label<b[1]){m.label=b[1],b=E;break}if(b&&m.label<b[2]){m.label=b[2],m.ops.push(E);break}b[2]&&m.ops.pop(),m.trys.pop();continue}E=v.call(h,m)}catch(O){E=[6,O],y=0}finally{p=b=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},r=oe&&oe.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(ua,"__esModule",{value:!0}),ua.createChannelConnection=void 0;var i=lc(),o=Mt(),s=r(Ay()),a=r(Iy()),l=o.error.PROTOCOL_ERROR,u=o.internal.logger.Logger,c=0;function f(h,v,m,p,y,b){y===void 0&&(y=null),b===void 0&&(b=function(S){return new i.Channel(S)});var _=new i.ChannelConfig(h,v,m.errorCode()),w=b(_);return a.default.handshake(w).then(function(S){var E=S.protocolVersion,O=S.consumeRemainingBuffer,R=new i.Chunker(w),D=new i.Dechunker,F=function(H){return a.default.create({version:E,channel:w,chunker:R,dechunker:D,disableLosslessIntegers:v.disableLosslessIntegers,useBigInt:v.useBigInt,serversideRouting:y,server:H.server,log:H.logger,observer:{onPendingObserversChange:H._handleOngoingRequestsNumberChange.bind(H),onError:H._handleFatalError.bind(H),onFailure:H._resetOnFailure.bind(H),onProtocolError:H._handleProtocolError.bind(H),onErrorApplyTransformation:function(L){return H.handleAndTransformError(L,H._address)}}})},B=new d(w,m,h,p,v.disableLosslessIntegers,y,R,F);return O(function(H){return D.write(H)}),B}).catch(function(S){return w.close().then(function(){throw S})})}ua.createChannelConnection=f;var d=function(h){n(v,h);function v(m,p,y,b,_,w,S,E){_===void 0&&(_=!1),w===void 0&&(w=null);var O=h.call(this,p)||this;return O._id=c++,O._address=y,O._server={address:y.asHostPort()},O.creationTimestamp=Date.now(),O._disableLosslessIntegers=_,O._ch=m,O._chunker=S,O._log=g(O,b),O._serversideRouting=w,O._dbConnectionId=null,O._protocol=E(O),O._isBroken=!1,O._log.isDebugEnabled()&&O._log.debug("created towards "+y),O}return Object.defineProperty(v.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(m){this._dbConnectionId=m},enumerable:!1,configurable:!0}),v.prototype.connect=function(m,p){return this._initialize(m,p)},v.prototype._initialize=function(m,p){var y=this,b=this;return new Promise(function(_,w){y._protocol.initialize({userAgent:m,authToken:p,onError:function(S){return w(S)},onComplete:function(S){if(S){var E=S.server;(!y.version||E)&&(y.version=E);var O=S.connection_id;if(y.databaseId||(y.databaseId=O),S.hints){var R=S.hints["connection.recv_timeout_seconds"];if(R!=null){var D=(0,o.toNumber)(R);Number.isInteger(D)&&D>0?y._ch.setupReceiveTimeout(D*1e3):y._log.info("Server located at "+y._address+" supplied an invalid connection receive timeout value ("+D+"). Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}}}_(b)}})})},v.prototype.protocol=function(){return this._protocol},Object.defineProperty(v.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"version",{get:function(){return this._server.version},set:function(m){this._server.version=m},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),v.prototype._handleFatalError=function(m){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||m,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by "+this._error+" ("+o.json.stringify(this._error)+")"),this._protocol.notifyFatalError(this._error)},v.prototype._queueObserver=function(m){return this._protocol.queueObserverIfProtocolIsNotBroken(m)},v.prototype.hasOngoingObservableRequests=function(){return this._protocol.hasOngoingObservableRequests()},v.prototype.resetAndFlush=function(){var m=this;return new Promise(function(p,y){m._protocol.reset({onError:function(b){if(m._isBroken)y(b);else{var _=m._handleProtocolError("Received FAILURE as a response for RESET: "+b);y(_)}},onComplete:function(){p()}})})},v.prototype._resetOnFailure=function(){var m=this;!this.isOpen()||this._protocol.reset({onError:function(){m._protocol.resetFailure()},onComplete:function(){m._protocol.resetFailure()}})},v.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},v.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},v.prototype._handleOngoingRequestsNumberChange=function(m){m===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout()},v.prototype.close=function(){return e(this,void 0,void 0,function(){return t(this,function(m){switch(m.label){case 0:return this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return m.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},v.prototype.toString=function(){return"Connection ["+this.id+"]["+(this.databaseId||"")+"]"},v.prototype._handleProtocolError=function(m){this._protocol.resetFailure(),this._updateCurrentObserver();var p=(0,o.newError)(m,l);return this._handleFatalError(p),p},v}(s.default);ua.default=d;function g(h,v){return new u(v._level,function(m,p){return v._loggerFunction(m,h+" "+p)})}return ua}var xf={},FC;function yre(){if(FC)return xf;FC=1;var n=oe&&oe.__extends||function(){var i=function(o,s){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])},i(o,s)};return function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");i(o,s);function a(){this.constructor=o}o.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}(),e=oe&&oe.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(xf,"__esModule",{value:!0});var t=e(Ay()),r=function(i){n(o,i);function o(s,a){var l=i.call(this,a)||this;return a&&(l._originalErrorHandler=s._errorHandler,s._errorHandler=l._errorHandler),l._delegate=s,l}return Object.defineProperty(o.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(s){this._delegate.databaseId=s},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"version",{get:function(){return this._delegate.version},set:function(s){this._delegate.version=s},enumerable:!1,configurable:!0}),o.prototype.isOpen=function(){return this._delegate.isOpen()},o.prototype.protocol=function(){return this._delegate.protocol()},o.prototype.connect=function(s,a){return this._delegate.connect(s,a)},o.prototype.write=function(s,a,l){return this._delegate.write(s,a,l)},o.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},o.prototype.close=function(){return this._delegate.close()},o.prototype._release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate._release()},o}(t.default);return xf.default=r,xf}var Nf={},UC;function _re(){if(UC)return Nf;UC=1,Object.defineProperty(Nf,"__esModule",{value:!0});var n=Mt(),e=n.error.SERVICE_UNAVAILABLE,t=n.error.SESSION_EXPIRED,r=function(){function l(u,c,f,d){this._errorCode=u,this._handleUnavailability=c||a,this._handleWriteFailure=f||a,this._handleAuthorizationExpired=d||a}return l.create=function(u){var c=u.errorCode,f=u.handleUnavailability,d=u.handleWriteFailure,g=u.handleAuthorizationExpired;return new l(c,f,d,g)},l.prototype.errorCode=function(){return this._errorCode},l.prototype.handleAndTransformError=function(u,c){return i(u)?this._handleAuthorizationExpired(u,c):o(u)?this._handleUnavailability(u,c):s(u)?this._handleWriteFailure(u,c):u},l}();Nf.default=r;function i(l){return l&&(l.code==="Neo.ClientError.Security.AuthorizationExpired"||l.code==="Neo.ClientError.Security.TokenExpired")}function o(l){return l?l.code===t||l.code===e||l.code==="Neo.TransientError.General.DatabaseUnavailable":!1}function s(l){return l?l.code==="Neo.ClientError.Cluster.NotALeader"||l.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase":!1}function a(l){return l}return Nf}var VC;function Ry(){return VC||(VC=1,function(n){var e=oe&&oe.__createBinding||(Object.create?function(u,c,f,d){d===void 0&&(d=f),Object.defineProperty(u,d,{enumerable:!0,get:function(){return c[f]}})}:function(u,c,f,d){d===void 0&&(d=f),u[d]=c[f]}),t=oe&&oe.__setModuleDefault||(Object.create?function(u,c){Object.defineProperty(u,"default",{enumerable:!0,value:c})}:function(u,c){u.default=c}),r=oe&&oe.__importStar||function(u){if(u&&u.__esModule)return u;var c={};if(u!=null)for(var f in u)f!=="default"&&Object.prototype.hasOwnProperty.call(u,f)&&e(c,u,f);return t(c,u),c},i=oe&&oe.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(n,"__esModule",{value:!0}),n.createChannelConnection=n.ConnectionErrorHandler=n.DelegateConnection=n.ChannelConnection=n.Connection=void 0;var o=i(Ay());n.Connection=o.default;var s=r(vre());n.ChannelConnection=s.default,Object.defineProperty(n,"createChannelConnection",{enumerable:!0,get:function(){return s.createChannelConnection}});var a=i(yre());n.DelegateConnection=a.default;var l=i(_re());n.ConnectionErrorHandler=l.default,n.default=o.default}(Dm)),Dm}var qC;function xy(){if(qC)return Af;qC=1;var n=oe&&oe.__extends||function(){var f=function(d,g){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(h[m]=v[m])},f(d,g)};return function(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");f(d,g);function h(){this.constructor=d}d.prototype=g===null?Object.create(g):(h.prototype=g.prototype,new h)}}(),e=oe&&oe.__createBinding||(Object.create?function(f,d,g,h){h===void 0&&(h=g),Object.defineProperty(f,h,{enumerable:!0,get:function(){return d[g]}})}:function(f,d,g,h){h===void 0&&(h=g),f[h]=d[g]}),t=oe&&oe.__setModuleDefault||(Object.create?function(f,d){Object.defineProperty(f,"default",{enumerable:!0,value:d})}:function(f,d){f.default=d}),r=oe&&oe.__importStar||function(f){if(f&&f.__esModule)return f;var d={};if(f!=null)for(var g in f)g!=="default"&&Object.prototype.hasOwnProperty.call(f,g)&&e(d,f,g);return t(d,f),d},i=oe&&oe.__awaiter||function(f,d,g,h){function v(m){return m instanceof g?m:new g(function(p){p(m)})}return new(g||(g=Promise))(function(m,p){function y(w){try{_(h.next(w))}catch(S){p(S)}}function b(w){try{_(h.throw(w))}catch(S){p(S)}}function _(w){w.done?m(w.value):v(w.value).then(y,b)}_((h=h.apply(f,d||[])).next())})},o=oe&&oe.__generator||function(f,d){var g={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},h,v,m,p;return p={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function y(_){return function(w){return b([_,w])}}function b(_){if(h)throw new TypeError("Generator is already executing.");for(;g;)try{if(h=1,v&&(m=_[0]&2?v.return:_[0]?v.throw||((m=v.return)&&m.call(v),0):v.next)&&!(m=m.call(v,_[1])).done)return m;switch(v=0,m&&(_=[_[0]&2,m.value]),_[0]){case 0:case 1:m=_;break;case 4:return g.label++,{value:_[1],done:!1};case 5:g.label++,v=_[1],_=[0];continue;case 7:_=g.ops.pop(),g.trys.pop();continue;default:if(m=g.trys,!(m=m.length>0&&m[m.length-1])&&(_[0]===6||_[0]===2)){g=0;continue}if(_[0]===3&&(!m||_[1]>m[0]&&_[1]<m[3])){g.label=_[1];break}if(_[0]===6&&g.label<m[1]){g.label=m[1],m=_;break}if(m&&g.label<m[2]){g.label=m[2],g.ops.push(_);break}m[2]&&g.ops.pop(),g.trys.pop();continue}_=d.call(f,g)}catch(w){_=[6,w],v=0}finally{h=m=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}};Object.defineProperty(Af,"__esModule",{value:!0});var s=Ry(),a=r(GI()),l=Mt(),u=l.error.SERVICE_UNAVAILABLE,c=function(f){n(d,f);function d(g,h){var v=g.id,m=g.config,p=g.log,y=g.userAgent,b=g.authToken;h===void 0&&(h=null);var _=f.call(this)||this;return _._id=v,_._config=m,_._log=p,_._userAgent=y,_._authToken=b,_._createChannelConnection=h||function(w){return(0,s.createChannelConnection)(w,_._config,_._createConnectionErrorHandler(),_._log)},_._connectionPool=new a.default({create:_._createConnection.bind(_),destroy:_._destroyConnection.bind(_),validate:_._validateConnection.bind(_),installIdleObserver:d._installIdleObserverOnConnection.bind(_),removeIdleObserver:d._removeIdleObserverOnConnection.bind(_),config:a.PoolConfig.fromDriverConfig(m),log:_._log}),_._openConnections={},_}return d.prototype._createConnectionErrorHandler=function(){return new s.ConnectionErrorHandler(u)},d.prototype._createConnection=function(g,h){var v=this;return this._createChannelConnection(g).then(function(m){return m._release=function(){return h(g,m)},v._openConnections[m.id]=m,m.connect(v._userAgent,v._authToken).catch(function(p){throw v._destroyConnection(m),p})})},d.prototype._validateConnection=function(g){if(!g.isOpen())return!1;var h=this._config.maxConnectionLifetime,v=Date.now()-g.creationTimestamp;return v<=h},d.prototype._destroyConnection=function(g){return delete this._openConnections[g.id],g.close()},d.prototype.close=function(){return i(this,void 0,void 0,function(){return o(this,function(g){switch(g.label){case 0:return[4,this._connectionPool.close()];case 1:return g.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(h){return h.close()}))];case 2:return g.sent(),[2]}})})},d._installIdleObserverOnConnection=function(g,h){g._queueObserver(h)},d._removeIdleObserverOnConnection=function(g){g._updateCurrentObserver()},d}(l.ConnectionProvider);return Af.default=c,Af}var Mf={},HC;function bre(){if(HC)return Mf;HC=1;var n=oe&&oe.__extends||function(){var g=function(h,v){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(m[y]=p[y])},g(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");g(h,v);function m(){this.constructor=h}h.prototype=v===null?Object.create(v):(m.prototype=v.prototype,new m)}}(),e=oe&&oe.__awaiter||function(g,h,v,m){function p(y){return y instanceof v?y:new v(function(b){b(y)})}return new(v||(v=Promise))(function(y,b){function _(E){try{S(m.next(E))}catch(O){b(O)}}function w(E){try{S(m.throw(E))}catch(O){b(O)}}function S(E){E.done?y(E.value):p(E.value).then(_,w)}S((m=m.apply(g,h||[])).next())})},t=oe&&oe.__generator||function(g,h){var v={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},m,p,y,b;return b={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function _(S){return function(E){return w([S,E])}}function w(S){if(m)throw new TypeError("Generator is already executing.");for(;v;)try{if(m=1,p&&(y=S[0]&2?p.return:S[0]?p.throw||((y=p.return)&&y.call(p),0):p.next)&&!(y=y.call(p,S[1])).done)return y;switch(p=0,y&&(S=[S[0]&2,y.value]),S[0]){case 0:case 1:y=S;break;case 4:return v.label++,{value:S[1],done:!1};case 5:v.label++,p=S[1],S=[0];continue;case 7:S=v.ops.pop(),v.trys.pop();continue;default:if(y=v.trys,!(y=y.length>0&&y[y.length-1])&&(S[0]===6||S[0]===2)){v=0;continue}if(S[0]===3&&(!y||S[1]>y[0]&&S[1]<y[3])){v.label=S[1];break}if(S[0]===6&&v.label<y[1]){v.label=y[1],y=S;break}if(y&&v.label<y[2]){v.label=y[2],v.ops.push(S);break}y[2]&&v.ops.pop(),v.trys.pop();continue}S=h.call(g,v)}catch(E){S=[6,E],p=0}finally{m=y=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},r=oe&&oe.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(Mf,"__esModule",{value:!0});var i=r(xy()),o=Ry(),s=Mt(),a=s.internal.constants,l=a.BOLT_PROTOCOL_V3,u=a.BOLT_PROTOCOL_V4_0,c=a.BOLT_PROTOCOL_V4_4,f=s.error.SERVICE_UNAVAILABLE;s.error.newError;var d=function(g){n(h,g);function h(v){var m=v.id,p=v.config,y=v.log,b=v.address,_=v.userAgent,w=v.authToken,S=g.call(this,{id:m,config:p,log:y,userAgent:_,authToken:w})||this;return S._address=b,S}return h.prototype.acquireConnection=function(v){var m=this,p=v===void 0?{}:v;p.accessMode;var y=p.database;p.bookmarks;var b=o.ConnectionErrorHandler.create({errorCode:f,handleAuthorizationExpired:function(_,w){return m._handleAuthorizationExpired(_,w,y)}});return this._connectionPool.acquire(this._address).then(function(_){return new o.DelegateConnection(_,b)})},h.prototype._handleAuthorizationExpired=function(v,m,p){return this._log.warn("Direct driver "+this._id+" will close connection to "+m+" for database '"+p+"' because of an error "+v.code+" '"+v.message+"'"),this._connectionPool.purge(m).catch(function(){}),v},h.prototype._hasProtocolVersion=function(v){return e(this,void 0,void 0,function(){var m,p;return t(this,function(y){switch(y.label){case 0:return[4,(0,o.createChannelConnection)(this._address,this._config,this._createConnectionErrorHandler(),this._log)];case 1:return m=y.sent(),p=m.protocol()?m.protocol().version:null,[4,m.close()];case 2:return y.sent(),p?[2,v(p)]:[2,!1]}})})},h.prototype.supportsMultiDb=function(){return e(this,void 0,void 0,function(){return t(this,function(v){switch(v.label){case 0:return[4,this._hasProtocolVersion(function(m){return m>=u})];case 1:return[2,v.sent()]}})})},h.prototype.supportsTransactionConfig=function(){return e(this,void 0,void 0,function(){return t(this,function(v){switch(v.label){case 0:return[4,this._hasProtocolVersion(function(m){return m>=l})];case 1:return[2,v.sent()]}})})},h.prototype.supportsUserImpersonation=function(){return e(this,void 0,void 0,function(){return t(this,function(v){switch(v.label){case 0:return[4,this._hasProtocolVersion(function(m){return m>=c})];case 1:return[2,v.sent()]}})})},h}(i.default);return Mf.default=d,Mf}var Df={},To={},Lf={},ca={},zC;function YI(){if(zC)return ca;zC=1;var n=oe&&oe.__read||function(m,p){var y=typeof Symbol=="function"&&m[Symbol.iterator];if(!y)return m;var b=y.call(m),_,w=[],S;try{for(;(p===void 0||p-- >0)&&!(_=b.next()).done;)w.push(_.value)}catch(E){S={error:E}}finally{try{_&&!_.done&&(y=b.return)&&y.call(b)}finally{if(S)throw S.error}}return w},e=oe&&oe.__spreadArray||function(m,p,y){if(y||arguments.length===2)for(var b=0,_=p.length,w;b<_;b++)(w||!(b in p))&&(w||(w=Array.prototype.slice.call(p,0,b)),w[b]=p[b]);return m.concat(w||Array.prototype.slice.call(p))};Object.defineProperty(ca,"__esModule",{value:!0}),ca.createValidRoutingTable=void 0;var t=Mt(),r=t.internal.constants,i=r.ACCESS_MODE_WRITE,o=r.ACCESS_MODE_READ,s=t.internal.serverAddress.ServerAddress,a=t.error.PROTOCOL_ERROR,l=1,u=function(){function m(p){var y=p===void 0?{}:p,b=y.database,_=y.routers,w=y.readers,S=y.writers,E=y.expirationTime,O=y.ttl;this.database=b||null,this.databaseName=b||"default database",this.routers=_||[],this.readers=w||[],this.writers=S||[],this.expirationTime=E||(0,t.int)(0),this.ttl=O}return m.fromRawRoutingTable=function(p,y,b){return f(p,y,b)},m.prototype.forget=function(p){this.readers=c(this.readers,p),this.writers=c(this.writers,p)},m.prototype.forgetRouter=function(p){this.routers=c(this.routers,p)},m.prototype.forgetWriter=function(p){this.writers=c(this.writers,p)},m.prototype.isStaleFor=function(p){return this.expirationTime.lessThan(Date.now())||this.routers.length<l||p===o&&this.readers.length===0||p===i&&this.writers.length===0},m.prototype.isExpiredFor=function(p){return this.expirationTime.add(p).lessThan(Date.now())},m.prototype.allServers=function(){return e(e(e([],n(this.routers),!1),n(this.readers),!1),n(this.writers),!1)},m.prototype.toString=function(){return"RoutingTable["+("database="+this.databaseName+", ")+("expirationTime="+this.expirationTime+", ")+("currentTime="+Date.now()+", ")+("routers=["+this.routers+"], ")+("readers=["+this.readers+"], ")+("writers=["+this.writers+"]]")},m}();ca.default=u;function c(m,p){return m.filter(function(y){return y.asKey()!==p.asKey()})}function f(m,p,y){var b=y.ttl,_=g(y,p),w=d(y,p),S=w.routers,E=w.readers,O=w.writers;return h(S,"routers",p),h(E,"readers",p),new u({database:m||y.db,routers:S,readers:E,writers:O,expirationTime:_,ttl:b})}ca.createValidRoutingTable=f;function d(m,p){try{var y=[],b=[],_=[];return m.servers.forEach(function(w){var S=w.role,E=w.addresses;S==="ROUTE"?y=v(E).map(function(O){return s.fromUrl(O)}):S==="WRITE"?_=v(E).map(function(O){return s.fromUrl(O)}):S==="READ"&&(b=v(E).map(function(O){return s.fromUrl(O)}))}),{routers:y,readers:b,writers:_}}catch(w){throw(0,t.newError)("Unable to parse servers entry from router "+p+` from addresses:
`+t.json.stringify(m.servers)+`
Error message: `+w.message,a)}}function g(m,p){try{var y=(0,t.int)(Date.now()),b=(0,t.int)(m.ttl).multiply(1e3).add(y);return b.lessThan(y)?t.Integer.MAX_VALUE:b}catch(_){throw(0,t.newError)("Unable to parse TTL entry from router "+p+` from raw routing table:
`+t.json.stringify(m)+`
Error message: `+_.message,a)}}function h(m,p,y){if(m.length===0)throw(0,t.newError)("Received no "+p+" from router "+y,a)}function v(m){if(!Array.isArray(m))throw new TypeError("Array expected but got: "+m);return Array.from(m)}return ca}var WC;function wre(){if(WC)return Lf;WC=1;var n=oe&&oe.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Lf,"__esModule",{value:!0});var e=n(YI()),t=Iy(),r=Mt(),i=r.error.SERVICE_UNAVAILABLE,o="Neo.ClientError.Procedure.ProcedureNotFound",s="Neo.ClientError.Database.DatabaseNotFound",a=function(){function l(u){this._routingContext=u}return l.prototype.lookupRoutingTableOnRouter=function(u,c,f,d){var g=this;return u._acquireConnection(function(h){return g._requestRawRoutingTable(h,u,c,f,d).then(function(v){return v.isNull?null:e.default.fromRawRoutingTable(c,f,v)})})},l.prototype._requestRawRoutingTable=function(u,c,f,d,g){var h=this;return new Promise(function(v,m){u.protocol().requestRoutingInformation({routingContext:h._routingContext,databaseName:f,impersonatedUser:g,sessionContext:{bookmark:c._lastBookmark,mode:c._mode,database:c._database,afterComplete:c._onComplete},onCompleted:v,onError:function(p){p.code===s?m(p):p.code===o?m((0,r.newError)("Server at "+d.asHostPort()+" can't perform routing. Make sure you are connecting to a causal cluster",i)):v(t.RawRoutingTable.ofNull())}})})},l}();return Lf.default=a,Lf}var KC;function Sre(){if(KC)return To;KC=1;var n=oe&&oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(To,"__esModule",{value:!0}),To.RoutingTable=To.Rediscovery=void 0;var e=n(wre());To.Rediscovery=e.default;var t=n(YI());return To.RoutingTable=t.default,To.default=e.default,To}var GC;function Ere(){if(GC)return Df;GC=1;var n=oe&&oe.__extends||function(){var $=function(Z,A){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,V){P.__proto__=V}||function(P,V){for(var W in V)Object.prototype.hasOwnProperty.call(V,W)&&(P[W]=V[W])},$(Z,A)};return function(Z,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");$(Z,A);function P(){this.constructor=Z}Z.prototype=A===null?Object.create(A):(P.prototype=A.prototype,new P)}}(),e=oe&&oe.__assign||function(){return e=Object.assign||function($){for(var Z,A=1,P=arguments.length;A<P;A++){Z=arguments[A];for(var V in Z)Object.prototype.hasOwnProperty.call(Z,V)&&($[V]=Z[V])}return $},e.apply(this,arguments)},t=oe&&oe.__createBinding||(Object.create?function($,Z,A,P){P===void 0&&(P=A),Object.defineProperty($,P,{enumerable:!0,get:function(){return Z[A]}})}:function($,Z,A,P){P===void 0&&(P=A),$[P]=Z[A]}),r=oe&&oe.__setModuleDefault||(Object.create?function($,Z){Object.defineProperty($,"default",{enumerable:!0,value:Z})}:function($,Z){$.default=Z}),i=oe&&oe.__importStar||function($){if($&&$.__esModule)return $;var Z={};if($!=null)for(var A in $)A!=="default"&&Object.prototype.hasOwnProperty.call($,A)&&t(Z,$,A);return r(Z,$),Z},o=oe&&oe.__awaiter||function($,Z,A,P){function V(W){return W instanceof A?W:new A(function(z){z(W)})}return new(A||(A=Promise))(function(W,z){function I(q){try{J(P.next(q))}catch(Q){z(Q)}}function M(q){try{J(P.throw(q))}catch(Q){z(Q)}}function J(q){q.done?W(q.value):V(q.value).then(I,M)}J((P=P.apply($,Z||[])).next())})},s=oe&&oe.__generator||function($,Z){var A={label:0,sent:function(){if(W[0]&1)throw W[1];return W[1]},trys:[],ops:[]},P,V,W,z;return z={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function I(J){return function(q){return M([J,q])}}function M(J){if(P)throw new TypeError("Generator is already executing.");for(;A;)try{if(P=1,V&&(W=J[0]&2?V.return:J[0]?V.throw||((W=V.return)&&W.call(V),0):V.next)&&!(W=W.call(V,J[1])).done)return W;switch(V=0,W&&(J=[J[0]&2,W.value]),J[0]){case 0:case 1:W=J;break;case 4:return A.label++,{value:J[1],done:!1};case 5:A.label++,V=J[1],J=[0];continue;case 7:J=A.ops.pop(),A.trys.pop();continue;default:if(W=A.trys,!(W=W.length>0&&W[W.length-1])&&(J[0]===6||J[0]===2)){A=0;continue}if(J[0]===3&&(!W||J[1]>W[0]&&J[1]<W[3])){A.label=J[1];break}if(J[0]===6&&A.label<W[1]){A.label=W[1],W=J;break}if(W&&A.label<W[2]){A.label=W[2],A.ops.push(J);break}W[2]&&A.ops.pop(),A.trys.pop();continue}J=Z.call($,A)}catch(q){J=[6,q],V=0}finally{P=W=0}if(J[0]&5)throw J[1];return{value:J[0]?J[1]:void 0,done:!0}}},a=oe&&oe.__values||function($){var Z=typeof Symbol=="function"&&Symbol.iterator,A=Z&&$[Z],P=0;if(A)return A.call($);if($&&typeof $.length=="number")return{next:function(){return $&&P>=$.length&&($=void 0),{value:$&&$[P++],done:!$}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")},l=oe&&oe.__read||function($,Z){var A=typeof Symbol=="function"&&$[Symbol.iterator];if(!A)return $;var P=A.call($),V,W=[],z;try{for(;(Z===void 0||Z-- >0)&&!(V=P.next()).done;)W.push(V.value)}catch(I){z={error:I}}finally{try{V&&!V.done&&(A=P.return)&&A.call(P)}finally{if(z)throw z.error}}return W},u=oe&&oe.__importDefault||function($){return $&&$.__esModule?$:{default:$}};Object.defineProperty(Df,"__esModule",{value:!0});var c=Mt(),f=i(Sre()),d=lc(),g=u(JI()),h=u(xy()),v=DI(),m=Ry(),p=c.error.SERVICE_UNAVAILABLE,y=c.error.SESSION_EXPIRED,b=c.internal.bookmark.Bookmark,_=c.internal.constants,w=_.ACCESS_MODE_READ,S=_.ACCESS_MODE_WRITE,E=_.BOLT_PROTOCOL_V3,O=_.BOLT_PROTOCOL_V4_0,R=_.BOLT_PROTOCOL_V4_4,D="Neo.ClientError.Security.Unauthorized",F="Neo.ClientError.Database.DatabaseNotFound",B="system",H=null,L=(0,c.int)(3e4),N=function($){n(Z,$);function Z(A){var P=A.id,V=A.address,W=A.routingContext,z=A.hostNameResolver,I=A.config,M=A.log,J=A.userAgent,q=A.authToken,Q=A.routingTablePurgeDelay,ae=$.call(this,{id:P,config:I,log:M,userAgent:J,authToken:q},function(he){return(0,m.createChannelConnection)(he,ae._config,ae._createConnectionErrorHandler(),ae._log,ae._routingContext)})||this;return ae._routingContext=e(e({},W),{address:V.toString()}),ae._seedRouter=V,ae._rediscovery=new f.default(ae._routingContext),ae._loadBalancingStrategy=new v.LeastConnectedLoadBalancingStrategy(ae._connectionPool),ae._hostNameResolver=z,ae._dnsResolver=new d.HostNameResolver,ae._log=M,ae._useSeedRouter=!0,ae._routingTableRegistry=new U(Q?(0,c.int)(Q):L),ae}return Z.prototype._createConnectionErrorHandler=function(){return new m.ConnectionErrorHandler(y)},Z.prototype._handleUnavailability=function(A,P,V){return this._log.warn("Routing driver "+this._id+" will forget "+P+" for database '"+V+"' because of an error "+A.code+" '"+A.message+"'"),this.forget(P,V||H),A},Z.prototype._handleAuthorizationExpired=function(A,P,V){return this._log.warn("Routing driver "+this._id+" will close connections to "+P+" for database '"+V+"' because of an error "+A.code+" '"+A.message+"'"),this._connectionPool.purge(P).catch(function(){}),A},Z.prototype._handleWriteFailure=function(A,P,V){return this._log.warn("Routing driver "+this._id+" will forget writer "+P+" for database '"+V+"' because of an error "+A.code+" '"+A.message+"'"),this.forgetWriter(P,V||H),(0,c.newError)("No longer possible to write to server at "+P,y)},Z.prototype.acquireConnection=function(A){var P=A===void 0?{}:A,V=P.accessMode,W=P.database,z=P.bookmarks,I=P.impersonatedUser,M=P.onDatabaseNameResolved;return o(this,void 0,void 0,function(){var J,q,Q,ae,he,Pe,Fe,Ae,ye=this;return s(this,function(Me){switch(Me.label){case 0:return Q={database:W||H},ae=new m.ConnectionErrorHandler(y,function(xe,fe){return ye._handleUnavailability(xe,fe,Q.database)},function(xe,fe){return ye._handleWriteFailure(xe,fe,Q.database)},function(xe,fe){return ye._handleAuthorizationExpired(xe,fe,Q.database)}),[4,this._freshRoutingTable({accessMode:V,database:Q.database,bookmark:z,impersonatedUser:I,onDatabaseNameResolved:function(xe){Q.database=Q.database||xe,M&&M(xe)}})];case 1:if(he=Me.sent(),V===w)q=this._loadBalancingStrategy.selectReader(he.readers),J="read";else if(V===S)q=this._loadBalancingStrategy.selectWriter(he.writers),J="write";else throw(0,c.newError)("Illegal mode "+V);if(!q)throw(0,c.newError)("Failed to obtain connection towards "+J+" server. Known routing table is: "+he,y);Me.label=2;case 2:return Me.trys.push([2,4,,5]),[4,this._acquireConnectionToServer(q,J,he)];case 3:return Pe=Me.sent(),[2,new m.DelegateConnection(Pe,ae)];case 4:throw Fe=Me.sent(),Ae=ae.handleAndTransformError(Fe,q),Ae;case 5:return[2]}})})},Z.prototype._hasProtocolVersion=function(A){return o(this,void 0,void 0,function(){var P,V,W,z,I,M;return s(this,function(J){switch(J.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:P=J.sent(),W=0,J.label=2;case 2:if(!(W<P.length))return[3,8];J.label=3;case 3:return J.trys.push([3,6,,7]),[4,(0,m.createChannelConnection)(P[W],this._config,this._createConnectionErrorHandler(),this._log)];case 4:return z=J.sent(),I=z.protocol()?z.protocol().version:null,[4,z.close()];case 5:return J.sent(),I?[2,A(I)]:[2,!1];case 6:return M=J.sent(),V=M,[3,7];case 7:return W++,[3,2];case 8:if(V)throw V;return[2,!1]}})})},Z.prototype.supportsMultiDb=function(){return o(this,void 0,void 0,function(){return s(this,function(A){switch(A.label){case 0:return[4,this._hasProtocolVersion(function(P){return P>=O})];case 1:return[2,A.sent()]}})})},Z.prototype.supportsTransactionConfig=function(){return o(this,void 0,void 0,function(){return s(this,function(A){switch(A.label){case 0:return[4,this._hasProtocolVersion(function(P){return P>=E})];case 1:return[2,A.sent()]}})})},Z.prototype.supportsUserImpersonation=function(){return o(this,void 0,void 0,function(){return s(this,function(A){switch(A.label){case 0:return[4,this._hasProtocolVersion(function(P){return P>=R})];case 1:return[2,A.sent()]}})})},Z.prototype.forget=function(A,P){this._routingTableRegistry.apply(P,{applyWhenExists:function(V){return V.forget(A)}}),this._connectionPool.purge(A).catch(function(){})},Z.prototype.forgetWriter=function(A,P){this._routingTableRegistry.apply(P,{applyWhenExists:function(V){return V.forgetWriter(A)}})},Z.prototype._acquireConnectionToServer=function(A,P,V){return this._connectionPool.acquire(A)},Z.prototype._freshRoutingTable=function(A){var P=A===void 0?{}:A,V=P.accessMode,W=P.database,z=P.bookmark,I=P.impersonatedUser,M=P.onDatabaseNameResolved,J=this._routingTableRegistry.get(W,function(){return new f.RoutingTable({database:W})});return J.isStaleFor(V)?(this._log.info('Routing table is stale for database: "'+W+'" and access mode: "'+V+'": '+J),this._refreshRoutingTable(J,z,I,M)):J},Z.prototype._refreshRoutingTable=function(A,P,V,W){var z=A.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(z,A,P,V,W):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(z,A,P,V,W)},Z.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(A,P,V,W,z){return o(this,void 0,void 0,function(){var I,M;return s(this,function(J){switch(J.label){case 0:return I=[],[4,this._fetchRoutingTableUsingSeedRouter(I,this._seedRouter,P,V,W)];case 1:return M=J.sent(),M?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(A,P,V,W)];case 3:M=J.sent(),J.label=4;case 4:return[4,this._applyRoutingTableIfPossible(P,M,z)];case 5:return[2,J.sent()]}})})},Z.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(A,P,V,W,z){return o(this,void 0,void 0,function(){var I;return s(this,function(M){switch(M.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(A,P,V,W)];case 1:return I=M.sent(),I?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(A,this._seedRouter,P,V,W)];case 2:I=M.sent(),M.label=3;case 3:return[4,this._applyRoutingTableIfPossible(P,I,z)];case 4:return[2,M.sent()]}})})},Z.prototype._fetchRoutingTableUsingKnownRouters=function(A,P,V,W){return o(this,void 0,void 0,function(){var z,I;return s(this,function(M){switch(M.label){case 0:return[4,this._fetchRoutingTable(A,P,V,W)];case 1:return z=M.sent(),z?[2,z]:(I=A.length-1,Z._forgetRouter(P,A,I),[2,null])}})})},Z.prototype._fetchRoutingTableUsingSeedRouter=function(A,P,V,W,z){return o(this,void 0,void 0,function(){var I,M;return s(this,function(J){switch(J.label){case 0:return[4,this._resolveSeedRouter(P)];case 1:return I=J.sent(),M=I.filter(function(q){return A.indexOf(q)<0}),[4,this._fetchRoutingTable(M,V,W,z)];case 2:return[2,J.sent()]}})})},Z.prototype._resolveSeedRouter=function(A){return o(this,void 0,void 0,function(){var P,V,W=this;return s(this,function(z){switch(z.label){case 0:return[4,this._hostNameResolver.resolve(A)];case 1:return P=z.sent(),[4,Promise.all(P.map(function(I){return W._dnsResolver.resolve(I)}))];case 2:return V=z.sent(),[2,[].concat.apply([],V)]}})})},Z.prototype._fetchRoutingTable=function(A,P,V,W){var z=this;return A.reduce(function(I,M,J){return o(z,void 0,void 0,function(){var q,Q,ae,he;return s(this,function(Pe){switch(Pe.label){case 0:return[4,I];case 1:return q=Pe.sent(),q?[2,q]:(Q=J-1,Z._forgetRouter(P,A,Q),[4,this._createSessionForRediscovery(M,V,W)]);case 2:if(ae=Pe.sent(),!ae)return[3,8];Pe.label=3;case 3:return Pe.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(ae,P.database,M,W)];case 4:return[2,Pe.sent()];case 5:if(he=Pe.sent(),he&&he.code===F)throw he;return this._log.warn("unable to fetch routing table because of an error "+he),[2,null];case 6:return ae.close(),[7];case 7:return[3,9];case 8:return[2,null];case 9:return[2]}})})},Promise.resolve(null))},Z.prototype._createSessionForRediscovery=function(A,P,V){return o(this,void 0,void 0,function(){var W,z,I,M,J,q=this;return s(this,function(Q){switch(Q.label){case 0:return Q.trys.push([0,2,,3]),[4,this._connectionPool.acquire(A)];case 1:return W=Q.sent(),z=m.ConnectionErrorHandler.create({errorCode:y,handleAuthorizationExpired:function(ae,he){return q._handleAuthorizationExpired(ae,he)}}),I=new g.default(new m.DelegateConnection(W,z)),M=W.protocol().version,M<4?[2,new c.Session({mode:S,bookmark:b.empty(),connectionProvider:I})]:[2,new c.Session({mode:w,database:B,bookmark:P,connectionProvider:I,impersonatedUser:V})];case 2:if(J=Q.sent(),J&&J.code===D)throw J;return[2,null];case 3:return[2]}})})},Z.prototype._applyRoutingTableIfPossible=function(A,P,V){return o(this,void 0,void 0,function(){return s(this,function(W){switch(W.label){case 0:if(!P)throw(0,c.newError)("Could not perform discovery. No routing servers available. Known routing table: "+A,p);return P.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(P,V)];case 1:return W.sent(),[2,P]}})})},Z.prototype._updateRoutingTable=function(A,P){return o(this,void 0,void 0,function(){return s(this,function(V){switch(V.label){case 0:return[4,this._connectionPool.keepAll(A.allServers())];case 1:return V.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(A),P(A.database),this._log.info("Updated routing table "+A),[2]}})})},Z._forgetRouter=function(A,P,V){var W=P[V];A&&W&&A.forgetRouter(W)},Z}(h.default);Df.default=N;var U=function(){function $(Z){this._tables=new Map,this._routingTablePurgeDelay=Z}return $.prototype.register=function(Z){return this._tables.set(Z.database,Z),this},$.prototype.apply=function(Z,A){var P=A===void 0?{}:A,V=P.applyWhenExists,W=P.applyWhenDontExists,z=W===void 0?function(){}:W;return this._tables.has(Z)?V(this._tables.get(Z)):typeof Z=="string"||Z===null?z():this._forEach(V),this},$.prototype.get=function(Z,A){return this._tables.has(Z)?this._tables.get(Z):typeof A=="function"?A():A},$.prototype.removeExpired=function(){var Z=this;return this._removeIf(function(A){return A.isExpiredFor(Z._routingTablePurgeDelay)})},$.prototype._forEach=function(Z){var A,P;try{for(var V=a(this._tables),W=V.next();!W.done;W=V.next()){var z=l(W.value,2),I=z[1];Z(I)}}catch(M){A={error:M}}finally{try{W&&!W.done&&(P=V.return)&&P.call(V)}finally{if(A)throw A.error}}return this},$.prototype._remove=function(Z){return this._tables.delete(Z),this},$.prototype._removeIf=function(Z){var A,P;try{for(var V=a(this._tables),W=V.next();!W.done;W=V.next()){var z=l(W.value,2),I=z[0],M=z[1];Z(M)&&this._remove(I)}}catch(J){A={error:J}}finally{try{W&&!W.done&&(P=V.return)&&P.call(V)}finally{if(A)throw A.error}}return this},$}();return Df}var JC;function Cre(){return JC||(JC=1,function(n){var e=oe&&oe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(n,"__esModule",{value:!0}),n.RoutingConnectionProvider=n.DirectConnectionProvider=n.PooledConnectionProvider=n.SingleConnectionProvider=void 0;var t=JI();Object.defineProperty(n,"SingleConnectionProvider",{enumerable:!0,get:function(){return e(t).default}});var r=xy();Object.defineProperty(n,"PooledConnectionProvider",{enumerable:!0,get:function(){return e(r).default}});var i=bre();Object.defineProperty(n,"DirectConnectionProvider",{enumerable:!0,get:function(){return e(i).default}});var o=Ere();Object.defineProperty(n,"RoutingConnectionProvider",{enumerable:!0,get:function(){return e(o).default}})}(Mm)),Mm}var YC;function kre(){return YC||(YC=1,function(n){var e=oe&&oe.__createBinding||(Object.create?function(o,s,a,l){l===void 0&&(l=a),Object.defineProperty(o,l,{enumerable:!0,get:function(){return s[a]}})}:function(o,s,a,l){l===void 0&&(l=a),o[l]=s[a]}),t=oe&&oe.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=oe&&oe.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var a in o)a!=="default"&&Object.prototype.hasOwnProperty.call(o,a)&&e(s,o,a);return t(s,o),s},i=oe&&oe.__exportStar||function(o,s){for(var a in o)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,o,a)};Object.defineProperty(n,"__esModule",{value:!0}),n.pool=n.packstream=n.channel=n.buf=n.bolt=n.loadBalancing=void 0,n.loadBalancing=r(DI()),n.bolt=r(Iy()),n.buf=r(ky()),n.channel=r(lc()),n.packstream=r(Ty()),n.pool=r(GI()),i(Cre(),n)}(Tm)),Tm}(function(n){var e=Zs.exports;Object.defineProperty(n,"__esModule",{value:!0}),n.driver=v,Object.defineProperty(n,"Driver",{enumerable:!0,get:function(){return t.Driver}}),Object.defineProperty(n,"Neo4jError",{enumerable:!0,get:function(){return i.Neo4jError}}),Object.defineProperty(n,"error",{enumerable:!0,get:function(){return i.error}}),Object.defineProperty(n,"Integer",{enumerable:!0,get:function(){return i.Integer}}),Object.defineProperty(n,"int",{enumerable:!0,get:function(){return i.int}}),Object.defineProperty(n,"isInt",{enumerable:!0,get:function(){return i.isInt}}),Object.defineProperty(n,"isPoint",{enumerable:!0,get:function(){return i.isPoint}}),Object.defineProperty(n,"Point",{enumerable:!0,get:function(){return i.Point}}),Object.defineProperty(n,"Date",{enumerable:!0,get:function(){return i.Date}}),Object.defineProperty(n,"DateTime",{enumerable:!0,get:function(){return i.DateTime}}),Object.defineProperty(n,"Duration",{enumerable:!0,get:function(){return i.Duration}}),Object.defineProperty(n,"isDate",{enumerable:!0,get:function(){return i.isDate}}),Object.defineProperty(n,"isDateTime",{enumerable:!0,get:function(){return i.isDateTime}}),Object.defineProperty(n,"isDuration",{enumerable:!0,get:function(){return i.isDuration}}),Object.defineProperty(n,"isLocalDateTime",{enumerable:!0,get:function(){return i.isLocalDateTime}}),Object.defineProperty(n,"isLocalTime",{enumerable:!0,get:function(){return i.isLocalTime}}),Object.defineProperty(n,"isTime",{enumerable:!0,get:function(){return i.isTime}}),Object.defineProperty(n,"LocalDateTime",{enumerable:!0,get:function(){return i.LocalDateTime}}),Object.defineProperty(n,"LocalTime",{enumerable:!0,get:function(){return i.LocalTime}}),Object.defineProperty(n,"Time",{enumerable:!0,get:function(){return i.Time}}),Object.defineProperty(n,"Node",{enumerable:!0,get:function(){return i.Node}}),Object.defineProperty(n,"Path",{enumerable:!0,get:function(){return i.Path}}),Object.defineProperty(n,"PathSegment",{enumerable:!0,get:function(){return i.PathSegment}}),Object.defineProperty(n,"Relationship",{enumerable:!0,get:function(){return i.Relationship}}),Object.defineProperty(n,"UnboundRelationship",{enumerable:!0,get:function(){return i.UnboundRelationship}}),Object.defineProperty(n,"Record",{enumerable:!0,get:function(){return i.Record}}),Object.defineProperty(n,"ResultSummary",{enumerable:!0,get:function(){return i.ResultSummary}}),Object.defineProperty(n,"Plan",{enumerable:!0,get:function(){return i.Plan}}),Object.defineProperty(n,"ProfiledPlan",{enumerable:!0,get:function(){return i.ProfiledPlan}}),Object.defineProperty(n,"QueryStatistics",{enumerable:!0,get:function(){return i.QueryStatistics}}),Object.defineProperty(n,"Notification",{enumerable:!0,get:function(){return i.Notification}}),Object.defineProperty(n,"ServerInfo",{enumerable:!0,get:function(){return i.ServerInfo}}),Object.defineProperty(n,"Result",{enumerable:!0,get:function(){return i.Result}}),Object.defineProperty(n,"auth",{enumerable:!0,get:function(){return i.auth}}),Object.defineProperty(n,"Session",{enumerable:!0,get:function(){return i.Session}}),Object.defineProperty(n,"Transaction",{enumerable:!0,get:function(){return i.Transaction}}),Object.defineProperty(n,"RxSession",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"RxTransaction",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"RxResult",{enumerable:!0,get:function(){return l.default}}),n.default=n.temporal=n.spatial=n.session=n.types=n.logging=n.integer=void 0;var t=N3,r=e(Qne()),i=Mt(),o=kre(),s=e(NI()),a=e(xI()),l=e(Ey()),u=i.internal.util,c=u.ENCRYPTION_ON;u.ENCRYPTION_OFF;var f=u.assertString,d=u.isEmptyObjectOrNull,g=i.internal.serverAddress.ServerAddress,h=i.internal.urlUtil;function v(R,D){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};f(R,"Bolt URL");var B=h.parseDatabaseUrl(R),H=!1,L=!1,N;switch(B.scheme){case"bolt":break;case"bolt+s":L=!0,N="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":L=!0,N="TRUST_ALL_CERTIFICATES";break;case"neo4j":H=!0;break;case"neo4j+s":L=!0,N="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",H=!0;break;case"neo4j+ssc":L=!0,N="TRUST_ALL_CERTIFICATES",H=!0;break;default:throw new Error("Unknown scheme: ".concat(B.scheme))}if(L){if("encrypted"in F||"trust"in F)throw new Error("Encryption/trust can only be configured either through URL or config, not both");F.encrypted=c,F.trust=N}D=D||{},D.scheme=D.scheme||"none",F.userAgent=F.userAgent||m;var U=g.fromUrl(B.hostAndPort),$={address:U,typename:H?"Routing":"Direct",routing:H};return new t.Driver($,F,Z());function Z(){if(H)return function(A,P,V,W){return new o.RoutingConnectionProvider({id:A,config:P,log:V,hostNameResolver:W,authToken:D,address:U,userAgent:P.userAgent,routingContext:B.query})};if(!d(B.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(R,"'"));return function(A,P,V){return new o.DirectConnectionProvider({id:A,config:P,log:V,authToken:D,address:U,userAgent:P.userAgent})}}}var m="neo4j-javascript/"+r.default,p={console:function(R){function D(F){return R.apply(this,arguments)}return D.toString=function(){return R.toString()},D}(function(R){return{level:R,logger:function(F,B){return console.log("".concat(oe.Date.now()," ").concat(F.toUpperCase()," ").concat(B))}}})};n.logging=p;var y={Node:i.Node,Relationship:i.Relationship,UnboundRelationship:i.UnboundRelationship,PathSegment:i.PathSegment,Path:i.Path,Result:i.Result,ResultSummary:i.ResultSummary,Record:i.Record,Point:i.Point,Date:i.Date,DateTime:i.DateTime,Duration:i.Duration,LocalDateTime:i.LocalDateTime,LocalTime:i.LocalTime,Time:i.Time,Integer:i.Integer};n.types=y;var b={READ:t.READ,WRITE:t.WRITE};n.session=b;var _={toNumber:i.toNumber,toString:i.toString,inSafeRange:i.inSafeRange};n.integer=_;var w={isPoint:i.isPoint};n.spatial=w;var S={isDuration:i.isDuration,isLocalTime:i.isLocalTime,isTime:i.isTime,isDate:i.isDate,isLocalDateTime:i.isLocalDateTime,isDateTime:i.isDateTime};n.temporal=S;var E={driver:v,int:i.int,isInt:i.isInt,isPoint:i.isPoint,isDuration:i.isDuration,isLocalTime:i.isLocalTime,isTime:i.isTime,isDate:i.isDate,isLocalDateTime:i.isLocalDateTime,isDateTime:i.isDateTime,integer:_,Neo4jError:i.Neo4jError,auth:i.auth,logging:p,types:y,session:b,error:i.error,spatial:w,temporal:S,Driver:t.Driver,Session:i.Session,Transaction:i.Transaction,Result:i.Result,RxSession:s.default,RxTransaction:a.default,RxResult:l.default,ResultSummary:i.ResultSummary,Plan:i.Plan,ProfiledPlan:i.ProfiledPlan,QueryStatistics:i.QueryStatistics,Notification:i.Notification,ServerInfo:i.ServerInfo,Record:i.Record,Node:i.Node,Relationship:i.Relationship,UnboundRelationship:i.UnboundRelationship,Path:i.Path,PathSegment:i.PathSegment,Point:i.Point,Integer:i.Integer,Duration:i.Duration,LocalTime:i.LocalTime,Time:i.Time,Date:i.Date,LocalDateTime:i.LocalDateTime,DateTime:i.DateTime},O=E;n.default=O})(nh);function Ore(n,e,t,r){return nh.driver(n,nh.auth.basic(t,r),{disableLosslessIntegers:!0}).session({database:e,defaultAccessMode:nh.session.READ})}async function Tre(n){console.time("loadNeo4JGraph"),console.time("loadNeo4JNodes");const e=await n.run("MATCH (n) RETURN n").then(l=>l.records.map(u=>{const c=u.get("n");return{id:c.identity.toString(),labels:c.labels,properties:c.properties}}));console.timeEnd("loadNeo4JNodes"),console.time("loadNeo4JEdges");const t=await n.run("MATCH ()-[n]->() RETURN n").then(l=>l.records.map(u=>{const c=u.get("n");return{id:c.identity.toString(),source:c.start.toString(),target:c.end.toString(),labels:[c.type],properties:c.properties}}));console.timeEnd("loadNeo4JEdges");const r=await n.run("MATCH (n) RETURN count(labels(n)), labels(n)").then(l=>l.records.map(u=>({label:u.get("labels(n)")[0],occurence:u.get("count(labels(n))")}))),i=await n.run("MATCH ()-[n]->() RETURN count(type(n)), type(n)").then(l=>l.records.map(u=>({label:u.get("type(n)"),occurence:u.get("count(type(n))")})));await n.close();const o=[...r,...i];var s=Math.max(...o.map(l=>l.occurence))/100;const a=o.map(l=>({label:l.label,occurence:Math.round(l.occurence/s)/100}));return console.log(e.length,t.length),console.timeEnd("loadNeo4JGraph"),{data:JSON.stringify({nodes:e,edges:t},null,2),workload:JSON.stringify(a,null,2)}}function QC(n){let e;return{c(){e=ee("div"),e.innerHTML='<span class="font-medium">Unable to connect to database.</span>',T(e,"class","p-4 mb-4 text-sm text-red-700 bg-red-100 rounded-lg dark:bg-red-200 dark:text-red-800"),T(e,"role","alert")},m(t,r){ue(t,e,r)},d(t){t&&le(e)}}}function Pre(n){let e,t,r,i,o,s,a,l,u,c,f,d,g,h,v,m,p,y,b,_,w,S,E,O,R,D,F,B;return{c(){e=ee("form"),t=ee("label"),r=Ue(`Server URL:
      `),i=ee("input"),o=me(),s=ee("br"),a=me(),l=ee("label"),u=Ue(`Username:
      `),c=ee("input"),f=me(),d=ee("br"),g=me(),h=ee("label"),v=Ue(`Password:
      `),m=ee("input"),p=me(),y=ee("br"),b=me(),_=ee("label"),w=Ue(`Database:
      `),S=ee("input"),E=me(),O=ee("button"),O.textContent="Submit",R=me(),D=ee("button"),D.textContent="Cancel",T(i,"type","text"),T(i,"class","bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"),T(i,"placeholder","Server URL"),i.required=!0,T(t,"class","block mb-2 text-sm font-medium"),T(c,"type","text"),T(c,"class","bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"),T(c,"placeholder","Username"),c.required=!0,T(l,"class","block mb-2 text-sm font-medium"),T(m,"type","password"),T(m,"class","bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"),T(m,"placeholder","Password"),m.required=!0,T(h,"class","block mb-2 text-sm font-medium"),T(S,"type","text"),T(S,"class","bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"),T(S,"placeholder","Database"),S.required=!0,T(_,"class","block mb-2 text-sm font-medium"),T(O,"class","text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center"),T(D,"class","text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center"),T(e,"id","surveyForm"),T(e,"class","mt-4"),ze(e,"submitted",n[5])},m(H,L){ue(H,e,L),j(e,t),j(t,r),j(t,i),Nn(i,n[0]),j(t,o),j(e,s),j(e,a),j(e,l),j(l,u),j(l,c),Nn(c,n[1]),j(l,f),j(e,d),j(e,g),j(e,h),j(h,v),j(h,m),Nn(m,n[2]),j(h,p),j(e,y),j(e,b),j(e,_),j(_,w),j(_,S),Nn(S,n[3]),j(e,E),j(e,O),j(e,R),j(e,D),F||(B=[Ce(i,"input",n[9]),Ce(c,"input",n[10]),Ce(m,"input",n[11]),Ce(S,"input",n[12]),Ce(O,"click",n[13]),Ce(D,"click",n[7]),Ce(e,"submit",dk(n[8]))],F=!0)},p(H,L){L&1&&i.value!==H[0]&&Nn(i,H[0]),L&2&&c.value!==H[1]&&Nn(c,H[1]),L&4&&m.value!==H[2]&&Nn(m,H[2]),L&8&&S.value!==H[3]&&Nn(S,H[3]),L&32&&ze(e,"submitted",H[5])},d(H){H&&le(e),F=!1,rn(B)}}}function Ire(n){let e;return{c(){e=ee("span"),e.textContent="Loading data.",T(e,"class","font-medium")},m(t,r){ue(t,e,r)},p:Ne,d(t){t&&le(e)}}}function Are(n){let e,t,r,i,o=n[4]===!0&&QC();function s(u,c){return u[6]===!0?Ire:Pre}let a=s(n),l=a(n);return{c(){e=ee("h2"),e.textContent="Connect to database:",t=me(),o&&o.c(),r=me(),l.c(),i=xt(),T(e,"class","font-semibold text-2xl")},m(u,c){ue(u,e,c),ue(u,t,c),o&&o.m(u,c),ue(u,r,c),l.m(u,c),ue(u,i,c)},p(u,[c]){u[4]===!0?o||(o=QC(),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null),a===(a=s(u))&&l?l.p(u,c):(l.d(1),l=a(u),l&&(l.c(),l.m(i.parentNode,i)))},i:Ne,o:Ne,d(u){u&&le(e),u&&le(t),o&&o.d(u),u&&le(r),l.d(u),u&&le(i)}}}function Rre(n,e,t){const{close:r}=ur("simple-modal");let i="",o="",s="",a="",l=!1,u=!1,c=!1;function f(){r()}async function d(){let y;const b=new Promise(async(w,S)=>{y=setTimeout(()=>{S(new Error("timeout"))},5e4)}),_=new Promise(async()=>{t(6,c=!0);const w=Ore(i,a,o,s),{data:S,workload:E}=await Tre(w);r(),clearTimeout(y),ny.set({text:S}),ad.set({text:E}),oy(),I3()});await Promise.race([b,_]).catch(w=>{t(6,c=!1),t(4,l=!0),console.error(w.message)})}function g(){i=this.value,t(0,i)}function h(){o=this.value,t(1,o)}function v(){s=this.value,t(2,s)}function m(){a=this.value,t(3,a)}return[i,o,s,a,l,u,c,f,d,g,h,v,m,()=>t(5,u=!0)]}class xre extends rt{constructor(e){super(),nt(this,e,Rre,Are,on,{})}}function ZC(n,e,t){const r=n.slice();return r[18]=e[t],r}function XC(n,e,t){const r=n.slice();return r[21]=e[t],r}function $C(n){let e,t,r,i,o,s,a,l,u,c,f,d,g,h,v,m,p,y,b,_,w=Object.values(sd),S=[];for(let E=0;E<w.length;E+=1)S[E]=ek(XC(n,w,E));return{c(){e=ee("li"),t=ee("h4"),r=Ue("Threshold: "),i=Ue(n[2]),o=me(),s=ee("input"),a=me(),l=ee("li"),u=ee("h4"),c=Ue("Distance: "),f=Ue(n[3]),d=me(),g=ee("input"),h=me(),v=ee("li"),m=ee("h4"),m.textContent="Induction type:",p=me(),y=ee("div");for(let E=0;E<S.length;E+=1)S[E].c();T(t,"class","mb-1 font-semibold text-gray-900 dark:text-white"),T(s,"type","range"),T(s,"min","0"),T(s,"max","1"),T(s,"step",".1"),T(s,"class","w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"),T(u,"class","mb-1 font-semibold text-gray-900 dark:text-white"),T(g,"type","range"),T(g,"min","0"),T(g,"max","2"),T(g,"step","1"),T(g,"class","w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"),T(m,"class","mb-1 font-semibold text-gray-900 dark:text-white"),T(y,"class","flex")},m(E,O){ue(E,e,O),j(e,t),j(t,r),j(t,i),j(e,o),j(e,s),Nn(s,n[2]),ue(E,a,O),ue(E,l,O),j(l,u),j(u,c),j(u,f),j(l,d),j(l,g),Nn(g,n[3]),ue(E,h,O),ue(E,v,O),j(v,m),j(v,p),j(v,y);for(let R=0;R<S.length;R+=1)S[R].m(y,null);b||(_=[Ce(s,"change",n[10]),Ce(s,"input",n[10]),Ce(g,"change",n[11]),Ce(g,"input",n[11])],b=!0)},p(E,O){if(O&4&&_t(i,E[2]),O&4&&Nn(s,E[2]),O&8&&_t(f,E[3]),O&8&&Nn(g,E[3]),O&16){w=Object.values(sd);let R;for(R=0;R<w.length;R+=1){const D=XC(E,w,R);S[R]?S[R].p(D,O):(S[R]=ek(D),S[R].c(),S[R].m(y,null))}for(;R<S.length;R+=1)S[R].d(1);S.length=w.length}},d(E){E&&le(e),E&&le(a),E&&le(l),E&&le(h),E&&le(v),xn(S,E),b=!1,rn(_)}}}function ek(n){let e,t,r,i,o=n[21]+"",s,a,l,u;return{c(){e=ee("div"),t=ee("input"),r=me(),i=ee("label"),s=Ue(o),a=me(),T(t,"id","Filtered"),T(t,"type","radio"),t.__value=n[21],t.value=t.__value,T(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"),n[13][0].push(t),T(i,"for","Filtered"),T(i,"class","ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"),T(e,"class","flex items-center mr-4")},m(c,f){ue(c,e,f),j(e,t),t.checked=t.__value===n[4],j(e,r),j(e,i),j(i,s),j(e,a),l||(u=Ce(t,"change",n[12]),l=!0)},p(c,f){f&16&&(t.checked=t.__value===c[4])},d(c){c&&le(e),n[13][0].splice(n[13][0].indexOf(t),1),l=!1,u()}}}function tk(n){let e,t,r,i,o,s,a=m0,l=[];for(let u=0;u<a.length;u+=1)l[u]=nk(ZC(n,a,u));return{c(){e=ee("li"),t=ee("h4"),t.textContent="Selected graph type:",r=me(),i=ee("select");for(let u=0;u<l.length;u+=1)l[u].c();T(t,"class","mb-1 font-semibold text-gray-900 dark:text-white"),T(i,"class","bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"),n[5]===void 0&&Ki(()=>n[14].call(i))},m(u,c){ue(u,e,c),j(e,t),j(e,r),j(e,i);for(let f=0;f<l.length;f+=1)l[f].m(i,null);By(i,n[5]),o||(s=Ce(i,"change",n[14]),o=!0)},p(u,c){if(c&0){a=m0;let f;for(f=0;f<a.length;f+=1){const d=ZC(u,a,f);l[f]?l[f].p(d,c):(l[f]=nk(d),l[f].c(),l[f].m(i,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=a.length}c&32&&By(i,u[5])},d(u){u&&le(e),xn(l,u),o=!1,s()}}}function nk(n){let e,t=n[18].name+"",r,i;return{c(){e=ee("option"),r=Ue(t),i=me(),e.__value=n[18],e.value=e.__value},m(o,s){ue(o,e,s),j(e,r),j(e,i)},p:Ne,d(o){o&&le(e)}}}function rk(n){let e,t,r;return{c(){e=ee("button"),e.textContent="Edit Workload",T(e,"class","py-2.5 px-5 mt-2 mb-2 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700")},m(i,o){ue(i,e,o),t||(r=Ce(e,"click",n[8]),t=!0)},p:Ne,d(i){i&&le(e),t=!1,r()}}}function ik(n){let e,t,r,i,o,s,a,l,u,c,f;return{c(){e=ee("li"),t=ee("h4"),t.textContent="Export schema:",r=me(),i=ee("button"),i.textContent="Export schema",o=me(),s=ee("li"),a=ee("h4"),a.textContent="Import from Neo4J:",l=me(),u=ee("button"),u.textContent="Import from Neo4J",T(t,"class","mb-1 font-semibold text-gray-900 dark:text-white"),T(i,"class","py-2.5 px-5 mt-2 mb-2 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"),T(a,"class","mb-1 font-semibold text-gray-900 dark:text-white"),T(u,"class","py-2.5 px-5 mt-2 mb-2 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700")},m(d,g){ue(d,e,g),j(e,t),j(e,r),j(e,i),ue(d,o,g),ue(d,s,g),j(s,a),j(s,l),j(s,u),c||(f=[Ce(i,"click",n[15]),Ce(u,"click",n[9])],c=!0)},p:Ne,d(d){d&&le(e),d&&le(o),d&&le(s),c=!1,rn(f)}}}function Nre(n){let e,t,r,i,o,s,a,l,u,c,f,d=n[1]?"View Graph JSON":"Edit Graph JSON",g,h,v,m,p=n[0]&&$C(n),y=!n[1]&&tk(n),b=n[0]&&rk(n),_=!n[1]&&ik(n);return{c(){e=ee("div"),t=ee("h2"),t.textContent="Options",r=me(),i=ee("menu"),p&&p.c(),o=me(),y&&y.c(),s=me(),a=ee("li"),l=ee("h4"),l.textContent="Edit data:",u=me(),b&&b.c(),c=me(),f=ee("button"),g=Ue(d),h=me(),_&&_.c(),T(t,"class","font-semibold text-2xl text-gray-900 dark:text-white"),T(l,"class","mb-1 font-semibold text-gray-900 dark:text-white"),T(f,"class","py-2.5 px-5 mt-2 mb-2 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"),T(i,"class","space-y-1 max-w-md list-inside"),T(e,"class","m-2")},m(w,S){ue(w,e,S),j(e,t),j(e,r),j(e,i),p&&p.m(i,null),j(i,o),y&&y.m(i,null),j(i,s),j(i,a),j(a,l),j(a,u),b&&b.m(a,null),j(a,c),j(a,f),j(f,g),j(i,h),_&&_.m(i,null),v||(m=Ce(f,"click",n[7]),v=!0)},p(w,[S]){w[0]?p?p.p(w,S):(p=$C(w),p.c(),p.m(i,o)):p&&(p.d(1),p=null),w[1]?y&&(y.d(1),y=null):y?y.p(w,S):(y=tk(w),y.c(),y.m(i,s)),w[0]?b?b.p(w,S):(b=rk(w),b.c(),b.m(a,c)):b&&(b.d(1),b=null),S&2&&d!==(d=w[1]?"View Graph JSON":"Edit Graph JSON")&&_t(g,d),w[1]?_&&(_.d(1),_=null):_?_.p(w,S):(_=ik(w),_.c(),_.m(i,null))},i:Ne,o:Ne,d(w){w&&le(e),p&&p.d(),y&&y.d(),b&&b.d(),_&&_.d(),v=!1,m()}}}function Mre(n,e,t){let r,i,o,s,a,l;na(n,ad,w=>t(16,r=w)),na(n,d0,w=>t(2,i=w)),na(n,p0,w=>t(3,o=w)),na(n,h0,w=>t(4,s=w)),na(n,US,w=>t(5,a=w)),na(n,x3,w=>t(6,l=w));let{allowInduction:u=!0}=e,{testMode:c=!1}=e;const{open:f}=ur("simple-modal"),d=()=>{f(sS,{content:ny,validator:XQ,testMode:c},{},{onClosed:()=>{oy()}})},g=()=>{f(sS,{content:ad,validator:tZ},{},{onClosed:()=>{try{const w=JSON.parse(r.text);if(!Array.isArray(w))throw new Error("Workload should be array");w.forEach(S=>{if(!("label"in S)||typeof S.label!="string")throw new Error("Workload should have valid labels");if(!("occurence"in S)||typeof S.occurence!="number"||S.occurence<0||S.occurence>1)throw new Error("Workload should have valid occurences")}),ry.set(w)}catch(w){console.error(w.message)}}})},h=()=>{f(xre)},v=[[]];function m(){i=jy(this.value),d0.set(i)}function p(){o=jy(this.value),p0.set(o)}function y(){s=this.__value,h0.set(s)}function b(){a=EA(this),US.set(a)}const _=()=>nZ(l.toJSON());return n.$$set=w=>{"allowInduction"in w&&t(0,u=w.allowInduction),"testMode"in w&&t(1,c=w.testMode)},[u,c,i,o,s,a,l,d,g,h,m,p,y,v,b,_]}class qre extends rt{constructor(e){super(),nt(this,e,Mre,Nre,on,{allowInduction:0,testMode:1})}}const Dre=n=>({}),ok=n=>({}),Lre=n=>({}),sk=n=>({});function jre(n){let e,t,r,i,o,s,a,l,u;const c=n[6].left,f=Yr(c,n,n[5],sk),d=n[6].right,g=Yr(d,n,n[5],ok);return{c(){e=ee("div"),t=ee("div"),f&&f.c(),r=me(),i=ee("div"),o=me(),s=ee("div"),g&&g.c(),T(t,"class","left svelte-4uhoco"),ri(t,"flex-basis",n[0]),T(i,"class","splitter bg-black dark:bg-gray-500 svelte-4uhoco"),T(s,"class","right bg-gray-50 dark:bg-gray-800 svelte-4uhoco"),T(e,"class","split-pane svelte-4uhoco")},m(h,v){ue(h,e,v),j(e,t),f&&f.m(t,null),n[7](t),j(e,r),j(e,i),j(e,o),j(e,s),g&&g.m(s,null),a=!0,l||(u=[Ce(i,"mousedown",n[2]),Ce(e,"mousemove",n[3]),Ce(e,"mouseup",n[4])],l=!0)},p(h,[v]){f&&f.p&&(!a||v&32)&&Zr(f,c,h,h[5],a?Qr(c,h[5],v,Lre):Xr(h[5]),sk),(!a||v&1)&&ri(t,"flex-basis",h[0]),g&&g.p&&(!a||v&32)&&Zr(g,d,h,h[5],a?Qr(d,h[5],v,Dre):Xr(h[5]),ok)},i(h){a||(X(f,h),X(g,h),a=!0)},o(h){te(f,h),te(g,h),a=!1},d(h){h&&le(e),f&&f.d(h),n[7](null),g&&g.d(h),l=!1,rn(u)}}}function Bre(n,e,t){let{$$slots:r={},$$scope:i}=e,{leftInitialSize:o="80%"}=e,s,a=!1;function l(){a=!0}function u(d){if(!a)return;const g=s.getBoundingClientRect().left;t(1,s.style.flexBasis=d.clientX-g+"px",s)}function c(){!a||(a=!1)}function f(d){wt[d?"unshift":"push"](()=>{s=d,t(1,s)})}return n.$$set=d=>{"leftInitialSize"in d&&t(0,o=d.leftInitialSize),"$$scope"in d&&t(5,i=d.$$scope)},[o,s,l,u,c,i,r,f]}class Hre extends rt{constructor(e){super(),nt(this,e,Bre,jre,on,{leftInitialSize:0})}}class zre extends rt{constructor(e){super(),nt(this,e,null,null,on,{})}}export{qA as M,um as P,rt as S,zre as T,Hre as a,me as b,Te as c,T as d,ee as e,ue as f,te as g,Oe as h,nt as i,le as j,na as k,xt as l,ke as m,Ve as n,Ne as o,qe as p,US as q,qre as r,on as s,X as t,iy as u,x3 as v};

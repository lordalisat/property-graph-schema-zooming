var uA=Object.defineProperty;var cA=(n,e,t)=>e in n?uA(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var fA=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Zt=(n,e,t)=>(cA(n,typeof e!="symbol"?e+"":e,t),t);var Bre=fA((Kr,Gr)=>{const hA=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}};hA();function Me(){}const XE=n=>n;function is(n,e){for(const t in e)n[t]=e[t];return n}function $E(n){return n()}function xy(){return Object.create(null)}function on(n){n.forEach($E)}function li(n){return typeof n=="function"}function Xt(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function Nt(n,e){return n!=n?e==e:n!==e}function dA(n){return Object.keys(n).length===0}function O0(n,...e){if(n==null)return Me;const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function fa(n,e,t){n.$$.on_destroy.push(O0(e,t))}function Zr(n,e,t,r){if(n){const i=eO(n,e,t,r);return n[0](i)}}function eO(n,e,t,r){return n[1]&&r?is(t.ctx.slice(),n[1](r(e))):t.ctx}function Xr(n,e,t,r){if(n[2]&&r){const i=n[2](r(t));if(e.dirty===void 0)return i;if(typeof i=="object"){const o=[],s=Math.max(e.dirty.length,i.length);for(let a=0;a<s;a+=1)o[a]=e.dirty[a]|i[a];return o}return e.dirty|i}return e.dirty}function $r(n,e,t,r,i,o){if(i){const s=eO(e,t,r,o);n.p(s,i)}}function ei(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let r=0;r<t;r++)e[r]=-1;return e}return-1}function Yn(n){return n==null?"":n}function xu(n){return n&&li(n.destroy)?n.destroy:Me}const tO=typeof window<"u";let pA=tO?()=>window.performance.now():()=>Date.now(),k0=tO?n=>requestAnimationFrame(n):Me;const ya=new Set;function nO(n){ya.forEach(e=>{e.c(n)||(ya.delete(e),e.f())}),ya.size!==0&&k0(nO)}function mA(n){let e;return ya.size===0&&k0(nO),{promise:new Promise(t=>{ya.add(e={c:n,f:t})}),abort(){ya.delete(e)}}}function B(n,e){n.appendChild(e)}function rO(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function gA(n){const e=ee("style");return vA(rO(n),e),e.sheet}function vA(n,e){B(n.head||n,e)}function fe(n,e,t){n.insertBefore(e,t||null)}function ue(n){n.parentNode.removeChild(n)}function xn(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function ee(n){return document.createElement(n)}function Ft(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function qe(n){return document.createTextNode(n)}function me(){return qe(" ")}function xt(){return qe("")}function Te(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function iO(n){return function(e){return e.preventDefault(),n.call(this,e)}}function oO(n){return function(e){return e.stopPropagation(),n.call(this,e)}}function T(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Ny(n,e){const t=Object.getOwnPropertyDescriptors(n.__proto__);for(const r in e)e[r]==null?n.removeAttribute(r):r==="style"?n.style.cssText=e[r]:r==="__value"?n.value=n[r]=e[r]:t[r]&&t[r].set?n[r]=e[r]:T(n,r,e[r])}function oh(n,e){for(const t in e)T(n,t,e[t])}function jm(n,e,t){e in n?n[e]=typeof n[e]=="boolean"&&t===""?!0:t:T(n,e,t)}function yA(n){return n===""?null:+n}function _A(n){return Array.from(n.childNodes)}function bt(n,e){e=""+e,n.wholeText!==e&&(n.data=e)}function Jn(n,e){n.value=e==null?"":e}function oi(n,e,t,r){t===null?n.style.removeProperty(e):n.style.setProperty(e,t,r?"important":"")}function My(n,e){for(let t=0;t<n.options.length;t+=1){const r=n.options[t];if(r.__value===e){r.selected=!0;return}}n.selectedIndex=-1}function bA(n){const e=n.querySelector(":checked")||n.options[0];return e&&e.__value}let hc;function wA(){if(hc===void 0){hc=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{hc=!0}}return hc}function T0(n,e){getComputedStyle(n).position==="static"&&(n.style.position="relative");const r=ee("iframe");r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.tabIndex=-1;const i=wA();let o;return i?(r.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=Te(window,"message",s=>{s.source===r.contentWindow&&e()})):(r.src="about:blank",r.onload=()=>{o=Te(r.contentWindow,"resize",e)}),B(n,r),()=>{(i||o&&r.contentWindow)&&o(),ue(r)}}function ze(n,e,t){n.classList[t?"add":"remove"](e)}function sO(n,e,{bubbles:t=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t,r,e),i}class SA{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,r=null){this.e||(this.is_svg?this.e=Ft(t.nodeName):this.e=ee(t.nodeName),this.t=t,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)fe(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(ue)}}const sh=new Map;let ah=0;function CA(n){let e=5381,t=n.length;for(;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function EA(n,e){const t={stylesheet:gA(e),rules:{}};return sh.set(n,t),t}function Dy(n,e,t,r,i,o,s,a=0){const l=16.666/r;let u=`{
`;for(let m=0;m<=1;m+=l){const p=e+(t-e)*o(m);u+=m*100+`%{${s(p,1-p)}}
`}const f=u+`100% {${s(t,1-t)}}
}`,c=`__svelte_${CA(f)}_${a}`,d=rO(n),{stylesheet:g,rules:h}=sh.get(d)||EA(d,n);h[c]||(h[c]=!0,g.insertRule(`@keyframes ${c} ${f}`,g.cssRules.length));const v=n.style.animation||"";return n.style.animation=`${v?`${v}, `:""}${c} ${r}ms linear ${i}ms 1 both`,ah+=1,c}function OA(n,e){const t=(n.style.animation||"").split(", "),r=t.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),i=t.length-r.length;i&&(n.style.animation=r.join(", "),ah-=i,ah||kA())}function kA(){k0(()=>{ah||(sh.forEach(n=>{const{stylesheet:e}=n;let t=e.cssRules.length;for(;t--;)e.deleteRule(t);n.rules={}}),sh.clear())})}let nu;function zl(n){nu=n}function Za(){if(!nu)throw new Error("Function called outside component initialization");return nu}function aO(n){Za().$$.before_update.push(n)}function Nr(n){Za().$$.on_mount.push(n)}function ho(n){Za().$$.on_destroy.push(n)}function hd(){const n=Za();return(e,t,{cancelable:r=!1}={})=>{const i=n.$$.callbacks[e];if(i){const o=sO(e,t,{cancelable:r});return i.slice().forEach(s=>{s.call(n,o)}),!o.defaultPrevented}return!0}}function lO(n,e){return Za().$$.context.set(n,e),e}function ur(n){return Za().$$.context.get(n)}const Al=[],wt=[],Bf=[],Lm=[],uO=Promise.resolve();let Bm=!1;function cO(){Bm||(Bm=!0,uO.then(fO))}function Pn(){return cO(),uO}function Yi(n){Bf.push(n)}function qr(n){Lm.push(n)}const hp=new Set;let dc=0;function fO(){const n=nu;do{for(;dc<Al.length;){const e=Al[dc];dc++,zl(e),TA(e.$$)}for(zl(null),Al.length=0,dc=0;wt.length;)wt.pop()();for(let e=0;e<Bf.length;e+=1){const t=Bf[e];hp.has(t)||(hp.add(t),t())}Bf.length=0}while(Al.length);for(;Lm.length;)Lm.pop()();Bm=!1,hp.clear(),zl(n)}function TA(n){if(n.fragment!==null){n.update(),on(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Yi)}}let hl;function PA(){return hl||(hl=Promise.resolve(),hl.then(()=>{hl=null})),hl}function dp(n,e,t){n.dispatchEvent(sO(`${e?"intro":"outro"}${t}`))}const Ff=new Set;let ao;function Fe(){ao={r:0,c:[],p:ao}}function Ue(){ao.r||on(ao.c),ao=ao.p}function $(n,e){n&&n.i&&(Ff.delete(n),n.i(e))}function te(n,e,t,r){if(n&&n.o){if(Ff.has(n))return;Ff.add(n),ao.c.push(()=>{Ff.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}const IA={duration:0};function pc(n,e,t,r){let i=e(n,t),o=r?0:1,s=null,a=null,l=null;function u(){l&&OA(n,l)}function f(d,g){const h=d.b-o;return g*=Math.abs(h),{a:o,b:d.b,d:h,duration:g,start:d.start,end:d.start+g,group:d.group}}function c(d){const{delay:g=0,duration:h=300,easing:v=XE,tick:m=Me,css:p}=i||IA,y={start:pA()+g,b:d};d||(y.group=ao,ao.r+=1),s||a?a=y:(p&&(u(),l=Dy(n,o,d,h,g,v,p)),d&&m(0,1),s=f(y,h),Yi(()=>dp(n,d,"start")),mA(b=>{if(a&&b>a.start&&(s=f(a,h),a=null,dp(n,s.b,"start"),p&&(u(),l=Dy(n,o,s.b,s.duration,0,v,i.css))),s){if(b>=s.end)m(o=s.b,1-o),dp(n,s.b,"end"),a||(s.b?u():--s.group.r||on(s.group.c)),s=null;else if(b>=s.start){const _=b-s.start;o=s.a+s.d*v(_/s.duration),m(o,1-o)}}return!!(s||a)}))}return{run(d){li(i)?PA().then(()=>{i=i(),c(d)}):c(d)},end(){u(),s=a=null}}}const P0=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function AA(n,e){n.d(1),e.delete(n.key)}function dd(n,e){te(n,1,1,()=>{e.delete(n.key)})}function Nu(n,e,t,r,i,o,s,a,l,u,f,c){let d=n.length,g=o.length,h=d;const v={};for(;h--;)v[n[h].key]=h;const m=[],p=new Map,y=new Map;for(h=g;h--;){const S=c(i,o,h),E=t(S);let P=s.get(E);P?r&&P.p(S,e):(P=u(E,S),P.c()),p.set(E,m[h]=P),E in v&&y.set(E,Math.abs(h-v[E]))}const b=new Set,_=new Set;function w(S){$(S,1),S.m(a,f),s.set(S.key,S),f=S.first,g--}for(;d&&g;){const S=m[g-1],E=n[d-1],P=S.key,R=E.key;S===E?(f=S.first,d--,g--):p.has(R)?!s.has(P)||b.has(P)?w(S):_.has(R)?d--:y.get(P)>y.get(R)?(_.add(P),w(S)):(b.add(R),d--):(l(E,s),d--)}for(;d--;){const S=n[d];p.has(S.key)||l(S,s)}for(;g;)w(m[g-1]);return m}function Ws(n,e){const t={},r={},i={$$scope:1};let o=n.length;for(;o--;){const s=n[o],a=e[o];if(a){for(const l in s)l in a||(r[l]=1);for(const l in a)i[l]||(t[l]=a[l],i[l]=1);n[o]=a}else for(const l in s)i[l]=1}for(const s in r)s in t||(t[s]=void 0);return t}function pd(n){return typeof n=="object"&&n!==null?n:{}}function Ir(n,e,t){const r=n.$$.props[e];r!==void 0&&(n.$$.bound[r]=t,t(n.$$.ctx[r]))}function ke(n){n&&n.c()}function Ee(n,e,t,r){const{fragment:i,on_mount:o,on_destroy:s,after_update:a}=n.$$;i&&i.m(e,t),r||Yi(()=>{const l=o.map($E).filter(li);s?s.push(...l):on(l),n.$$.on_mount=[]}),a.forEach(Yi)}function Oe(n,e){const t=n.$$;t.fragment!==null&&(on(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function RA(n,e){n.$$.dirty[0]===-1&&(Al.push(n),cO(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function nt(n,e,t,r,i,o,s,a=[-1]){const l=nu;zl(n);const u=n.$$={fragment:null,ctx:null,props:o,update:Me,not_equal:i,bound:xy(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:xy(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};s&&s(u.root);let f=!1;if(u.ctx=t?t(n,e.props||{},(c,d,...g)=>{const h=g.length?g[0]:d;return u.ctx&&i(u.ctx[c],u.ctx[c]=h)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](h),f&&RA(n,c)),d}):[],u.update(),f=!0,on(u.before_update),u.fragment=r?r(u.ctx):!1,e.target){if(e.hydrate){const c=_A(e.target);u.fragment&&u.fragment.l(c),c.forEach(ue)}else u.fragment&&u.fragment.c();e.intro&&$(n.$$.fragment),Ee(n,e.target,e.anchor,e.customElement),fO()}zl(l)}class rt{$destroy(){Oe(this,1),this.$destroy=Me}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!dA(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function xA(n,{delay:e=0,duration:t=400,easing:r=XE}={}){const i=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:r,css:o=>`opacity: ${o*i}`}}const{window:NA}=P0;function jy(n){let e,t,r,i,o,s,a,l,u,f,c,d,g,h,v,m,p,y=n[1].closeButton&&Ly(n);var b=n[2];function _(w){return{}}return b&&(s=new b(_())),{c(){e=ee("div"),t=ee("div"),r=ee("div"),y&&y.c(),i=me(),o=ee("div"),s&&ke(s.$$.fragment),T(o,"class",a=Yn(n[1].classContent)+" svelte-g4wg3a"),T(o,"style",n[9]),ze(o,"content",!n[0]),T(r,"class",l=Yn(n[1].classWindow)+" svelte-g4wg3a"),T(r,"role","dialog"),T(r,"aria-modal","true"),T(r,"aria-label",u=n[1].ariaLabelledBy?null:n[1].ariaLabel||null),T(r,"aria-labelledby",f=n[1].ariaLabelledBy||null),T(r,"style",n[8]),ze(r,"window",!n[0]),T(t,"class",d=Yn(n[1].classWindowWrap)+" svelte-g4wg3a"),T(t,"style",n[7]),ze(t,"wrap",!n[0]),T(e,"class",g=Yn(n[1].classBg)+" svelte-g4wg3a"),T(e,"style",n[6]),ze(e,"bg",!n[0])},m(w,S){fe(w,e,S),B(e,t),B(t,r),y&&y.m(r,null),B(r,i),B(r,o),s&&Ee(s,o,null),n[49](r),n[50](t),n[51](e),v=!0,m||(p=[Te(r,"introstart",function(){li(n[13])&&n[13].apply(this,arguments)}),Te(r,"outrostart",function(){li(n[14])&&n[14].apply(this,arguments)}),Te(r,"introend",function(){li(n[15])&&n[15].apply(this,arguments)}),Te(r,"outroend",function(){li(n[16])&&n[16].apply(this,arguments)}),Te(e,"mousedown",n[20]),Te(e,"mouseup",n[21])],m=!0)},p(w,S){if(n=w,n[1].closeButton?y?(y.p(n,S),S[0]&2&&$(y,1)):(y=Ly(n),y.c(),$(y,1),y.m(r,i)):y&&(Fe(),te(y,1,1,()=>{y=null}),Ue()),b!==(b=n[2])){if(s){Fe();const E=s;te(E.$$.fragment,1,0,()=>{Oe(E,1)}),Ue()}b?(s=new b(_()),ke(s.$$.fragment),$(s.$$.fragment,1),Ee(s,o,null)):s=null}(!v||S[0]&2&&a!==(a=Yn(n[1].classContent)+" svelte-g4wg3a"))&&T(o,"class",a),(!v||S[0]&512)&&T(o,"style",n[9]),S[0]&3&&ze(o,"content",!n[0]),(!v||S[0]&2&&l!==(l=Yn(n[1].classWindow)+" svelte-g4wg3a"))&&T(r,"class",l),(!v||S[0]&2&&u!==(u=n[1].ariaLabelledBy?null:n[1].ariaLabel||null))&&T(r,"aria-label",u),(!v||S[0]&2&&f!==(f=n[1].ariaLabelledBy||null))&&T(r,"aria-labelledby",f),(!v||S[0]&256)&&T(r,"style",n[8]),S[0]&3&&ze(r,"window",!n[0]),(!v||S[0]&2&&d!==(d=Yn(n[1].classWindowWrap)+" svelte-g4wg3a"))&&T(t,"class",d),(!v||S[0]&128)&&T(t,"style",n[7]),S[0]&3&&ze(t,"wrap",!n[0]),(!v||S[0]&2&&g!==(g=Yn(n[1].classBg)+" svelte-g4wg3a"))&&T(e,"class",g),(!v||S[0]&64)&&T(e,"style",n[6]),S[0]&3&&ze(e,"bg",!n[0])},i(w){v||($(y),s&&$(s.$$.fragment,w),Yi(()=>{c||(c=pc(r,n[12],n[1].transitionWindowProps,!0)),c.run(1)}),Yi(()=>{h||(h=pc(e,n[11],n[1].transitionBgProps,!0)),h.run(1)}),v=!0)},o(w){te(y),s&&te(s.$$.fragment,w),c||(c=pc(r,n[12],n[1].transitionWindowProps,!1)),c.run(0),h||(h=pc(e,n[11],n[1].transitionBgProps,!1)),h.run(0),v=!1},d(w){w&&ue(e),y&&y.d(),s&&Oe(s),n[49](null),w&&c&&c.end(),n[50](null),n[51](null),w&&h&&h.end(),m=!1,on(p)}}}function Ly(n){let e,t,r,i,o;const s=[DA,MA],a=[];function l(u,f){return f[0]&2&&(e=null),e==null&&(e=!!u[17](u[1].closeButton)),e?0:1}return t=l(n,[-1,-1,-1]),r=a[t]=s[t](n),{c(){r.c(),i=xt()},m(u,f){a[t].m(u,f),fe(u,i,f),o=!0},p(u,f){let c=t;t=l(u,f),t===c?a[t].p(u,f):(Fe(),te(a[c],1,1,()=>{a[c]=null}),Ue(),r=a[t],r?r.p(u,f):(r=a[t]=s[t](u),r.c()),$(r,1),r.m(i.parentNode,i))},i(u){o||($(r),o=!0)},o(u){te(r),o=!1},d(u){a[t].d(u),u&&ue(i)}}}function MA(n){let e,t,r,i;return{c(){e=ee("button"),T(e,"class",t=Yn(n[1].classCloseButton)+" svelte-g4wg3a"),T(e,"aria-label","Close modal"),T(e,"style",n[10]),T(e,"type","button"),ze(e,"close",!n[0])},m(o,s){fe(o,e,s),r||(i=Te(e,"click",n[18]),r=!0)},p(o,s){s[0]&2&&t!==(t=Yn(o[1].classCloseButton)+" svelte-g4wg3a")&&T(e,"class",t),s[0]&1024&&T(e,"style",o[10]),s[0]&3&&ze(e,"close",!o[0])},i:Me,o:Me,d(o){o&&ue(e),r=!1,i()}}}function DA(n){let e,t,r;var i=n[1].closeButton;function o(s){return{props:{onClose:s[18]}}}return i&&(e=new i(o(n))),{c(){e&&ke(e.$$.fragment),t=xt()},m(s,a){e&&Ee(e,s,a),fe(s,t,a),r=!0},p(s,a){if(i!==(i=s[1].closeButton)){if(e){Fe();const l=e;te(l.$$.fragment,1,0,()=>{Oe(l,1)}),Ue()}i?(e=new i(o(s)),ke(e.$$.fragment),$(e.$$.fragment,1),Ee(e,t.parentNode,t)):e=null}},i(s){r||(e&&$(e.$$.fragment,s),r=!0)},o(s){e&&te(e.$$.fragment,s),r=!1},d(s){s&&ue(t),e&&Oe(e,s)}}}function jA(n){let e,t,r,i,o=n[2]&&jy(n);const s=n[48].default,a=Zr(s,n,n[47],null);return{c(){o&&o.c(),e=me(),a&&a.c()},m(l,u){o&&o.m(l,u),fe(l,e,u),a&&a.m(l,u),t=!0,r||(i=Te(NA,"keydown",n[19]),r=!0)},p(l,u){l[2]?o?(o.p(l,u),u[0]&4&&$(o,1)):(o=jy(l),o.c(),$(o,1),o.m(e.parentNode,e)):o&&(Fe(),te(o,1,1,()=>{o=null}),Ue()),a&&a.p&&(!t||u[1]&65536)&&$r(a,s,l,l[47],t?Xr(s,l[47],u,null):ei(l[47]),null)},i(l){t||($(o),$(a,l),t=!0)},o(l){te(o),te(a,l),t=!1},d(l){o&&o.d(l),l&&ue(e),a&&a.d(l),r=!1,i()}}}function LA(n,e={}){return function(r){return new n({...r,props:{...e,...r.props}})}}function BA(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=hd(),s=lO,a=J=>J.tabIndex>=0&&!J.hidden&&!J.disabled&&J.style.display!=="none"&&J.type!=="hidden"&&Boolean(J.offsetWidth||J.offsetHeight||J.getClientRects().length);let{isTabbable:l=a}=e,{show:u=null}=e,{key:f="simple-modal"}=e,{ariaLabel:c=null}=e,{ariaLabelledBy:d=null}=e,{closeButton:g=!0}=e,{closeOnEsc:h=!0}=e,{closeOnOuterClick:v=!0}=e,{styleBg:m={}}=e,{styleWindowWrap:p={}}=e,{styleWindow:y={}}=e,{styleContent:b={}}=e,{styleCloseButton:_={}}=e,{classBg:w=null}=e,{classWindowWrap:S=null}=e,{classWindow:E=null}=e,{classContent:P=null}=e,{classCloseButton:R=null}=e,{unstyled:j=!1}=e,{setContext:U=s}=e,{transitionBg:F=xA}=e,{transitionBgProps:z={duration:250}}=e,{transitionWindow:D=F}=e,{transitionWindowProps:N=z}=e,{disableFocusTrap:L=!1}=e;const X={ariaLabel:c,ariaLabelledBy:d,closeButton:g,closeOnEsc:h,closeOnOuterClick:v,styleBg:m,styleWindowWrap:p,styleWindow:y,styleContent:b,styleCloseButton:_,classBg:w,classWindowWrap:S,classWindow:E,classContent:P,classCloseButton:R,transitionBg:F,transitionBgProps:z,transitionWindow:D,transitionWindowProps:N,disableFocusTrap:L,isTabbable:l,unstyled:j};let Q={...X},A=null,k,V,K,H,I,M,G,q,W,ae,le,Pe,Ve,Ae,ye;const Ne=J=>J.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase(),xe=J=>J?Object.keys(J).reduce((se,re)=>`${se}; ${Ne(re)}: ${J[re]}`,""):"",he=J=>!!(J&&J.constructor&&J.call&&J.apply),ve=()=>{t(6,I=xe(Object.assign({},{width:window.innerWidth,height:window.innerHeight},Q.styleBg))),t(7,M=xe(Q.styleWindowWrap)),t(8,G=xe(Q.styleWindow)),t(9,q=xe(Q.styleContent)),t(10,W=xe(Q.styleCloseButton)),t(11,ae=Q.transitionBg),t(12,le=Q.transitionWindow)},de=()=>{};let Ie=de,De=de,He=de,Xe=de;const mt=(J,se={},re={},_e={})=>{t(2,A=LA(J,se)),t(1,Q={...X,...re}),ve(),O(),t(13,Ie=Ce=>{_e.onOpen&&_e.onOpen(Ce),o("open"),o("opening")}),t(14,De=Ce=>{_e.onClose&&_e.onClose(Ce),o("close"),o("closing")}),t(15,He=Ce=>{_e.onOpened&&_e.onOpened(Ce),o("opened")}),t(16,Xe=Ce=>{_e.onClosed&&_e.onClosed(Ce),o("closed")})},be=(J={})=>{!A||(t(14,De=J.onClose||De),t(16,Xe=J.onClosed||Xe),t(2,A=null),Y())},Z=J=>{if(Q.closeOnEsc&&A&&J.key==="Escape"&&(J.preventDefault(),be()),A&&J.key==="Tab"&&!Q.disableFocusTrap){const se=K.querySelectorAll("*"),re=Array.from(se).filter(Q.isTabbable).sort((Ce,We)=>Ce.tabIndex-We.tabIndex);let _e=re.indexOf(document.activeElement);_e===-1&&J.shiftKey&&(_e=0),_e+=re.length+(J.shiftKey?-1:1),_e%=re.length,re[_e].focus(),J.preventDefault()}},x=J=>{Q.closeOnOuterClick&&(J.target===k||J.target===V)&&(ye=J.target)},C=J=>{Q.closeOnOuterClick&&J.target===ye&&(J.preventDefault(),be())},O=()=>{H=window.scrollY,Pe=document.body.style.position,Ve=document.body.style.overflow,Ae=document.body.style.width,document.body.style.position="fixed",document.body.style.top=`-${H}px`,document.body.style.overflow="hidden",document.body.style.width="100%"},Y=()=>{document.body.style.position=Pe||"",document.body.style.top="",document.body.style.overflow=Ve||"",document.body.style.width=Ae||"",window.scrollTo(0,H)};U(f,{open:mt,close:be});let ie=!1;ho(()=>{ie&&be()}),Nr(()=>{t(46,ie=!0)});function pe(J){wt[J?"unshift":"push"](()=>{K=J,t(5,K)})}function ge(J){wt[J?"unshift":"push"](()=>{V=J,t(4,V)})}function Qe(J){wt[J?"unshift":"push"](()=>{k=J,t(3,k)})}return n.$$set=J=>{"isTabbable"in J&&t(22,l=J.isTabbable),"show"in J&&t(23,u=J.show),"key"in J&&t(24,f=J.key),"ariaLabel"in J&&t(25,c=J.ariaLabel),"ariaLabelledBy"in J&&t(26,d=J.ariaLabelledBy),"closeButton"in J&&t(27,g=J.closeButton),"closeOnEsc"in J&&t(28,h=J.closeOnEsc),"closeOnOuterClick"in J&&t(29,v=J.closeOnOuterClick),"styleBg"in J&&t(30,m=J.styleBg),"styleWindowWrap"in J&&t(31,p=J.styleWindowWrap),"styleWindow"in J&&t(32,y=J.styleWindow),"styleContent"in J&&t(33,b=J.styleContent),"styleCloseButton"in J&&t(34,_=J.styleCloseButton),"classBg"in J&&t(35,w=J.classBg),"classWindowWrap"in J&&t(36,S=J.classWindowWrap),"classWindow"in J&&t(37,E=J.classWindow),"classContent"in J&&t(38,P=J.classContent),"classCloseButton"in J&&t(39,R=J.classCloseButton),"unstyled"in J&&t(0,j=J.unstyled),"setContext"in J&&t(40,U=J.setContext),"transitionBg"in J&&t(41,F=J.transitionBg),"transitionBgProps"in J&&t(42,z=J.transitionBgProps),"transitionWindow"in J&&t(43,D=J.transitionWindow),"transitionWindowProps"in J&&t(44,N=J.transitionWindowProps),"disableFocusTrap"in J&&t(45,L=J.disableFocusTrap),"$$scope"in J&&t(47,i=J.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&8388608|n.$$.dirty[1]&32768&&ie&&(he(u)?mt(u):be())},[j,Q,A,k,V,K,I,M,G,q,W,ae,le,Ie,De,He,Xe,he,be,Z,x,C,l,u,f,c,d,g,h,v,m,p,y,b,_,w,S,E,P,R,U,F,z,D,N,L,ie,i,r,pe,ge,Qe]}class hO extends rt{constructor(e){super(),nt(this,e,BA,jA,Xt,{isTabbable:22,show:23,key:24,ariaLabel:25,ariaLabelledBy:26,closeButton:27,closeOnEsc:28,closeOnOuterClick:29,styleBg:30,styleWindowWrap:31,styleWindow:32,styleContent:33,styleCloseButton:34,classBg:35,classWindowWrap:36,classWindow:37,classContent:38,classCloseButton:39,unstyled:0,setContext:40,transitionBg:41,transitionBgProps:42,transitionWindow:43,transitionWindowProps:44,disableFocusTrap:45},null,[-1,-1,-1])}}var ru=(n=>(n.node="Node",n.edge="Edge",n))(ru||{});class dO{constructor(){Zt(this,"x");Zt(this,"y");Zt(this,"width");Zt(this,"height");Zt(this,"stringRepres");Zt(this,"id");Zt(this,"labels");Zt(this,"properties");Zt(this,"type")}setPrintOptions(e=9,t=24){const r=[...this.labels,...this.mapToStrings(this.properties)];r.length===0&&r.push("\xA0*\xA0");const i=r.reduce((o,s)=>o>s.length?o:s.length,0);this.width=i*e,this.height=r.length*t,this.stringRepres=r.join(`
`)}mapToStrings(e){return Array.from(e).map(([t,r])=>`${t}: ${r}`)}}class md extends dO{constructor(t){super();Zt(this,"sourceNode");Zt(this,"targetNode");Zt(this,"isDirected",!0);Zt(this,"type",ru.edge);Object.assign(this,t)}static fromJSON(t){var r;if(!t.id)throw new Error("Edge is missing id");if(!t.source)throw new Error("Edge is missing source");if(!t.target)throw new Error("Edge is missing target");return new md({id:t.id,sourceNode:t.source,targetNode:t.target,isDirected:(r=t.isDirected)!=null?r:!0,labels:t.labels,properties:new Map(Object.entries(t.properties))})}toJSON(){return{id:this.id,source:this.sourceNode,target:this.targetNode,isDirected:this.isDirected,labels:this.labels,properties:Object.fromEntries(this.properties)}}}class gd extends dO{constructor(t){super();Zt(this,"type",ru.node);Object.assign(this,t)}static fromJSON(t){if(!t.id)throw new Error("Node is missing id");return new gd({id:t.id,labels:t.labels,properties:new Map(Object.entries(t.properties))})}toJSON(){return{id:this.id,labels:this.labels,properties:Object.fromEntries(this.properties)}}}class Mu{constructor(){Zt(this,"nodes");Zt(this,"edges");this.emptyGraph()}emptyGraph(){this.nodes=new Map,this.edges=new Map}addNode(e){this.nodes.set(e.id,e)}addEdge(e){this.edges.set(e.id,e)}static fromJSON(e){const t=[],r=new Mu,i=JSON.parse(e);if(r.nodes=new Map(i.nodes.map(o=>{try{const s=gd.fromJSON(o);return[s.id,s]}catch(s){return t.push(s.message),[]}})),r.edges=new Map(i.edges.map(o=>{try{const s=md.fromJSON(o);return r.nodes.has(s.sourceNode)||t.push(`Edge ${s.id} has invalid source ${s.sourceNode}`),r.nodes.has(s.targetNode)||t.push(`Edge ${s.id} has invalid source ${s.targetNode}`),[s.id,s]}catch(s){return t.push(s.message),[]}})),t.length>0)throw new Error(t.join("; "));return r}toJSON(){return JSON.stringify({nodes:[...this.nodes.values()].map(e=>e.toJSON()),edges:[...this.edges.values()].map(e=>e.toJSON())},null,2)}}function Sr(n,e=!!UA("debug")){if(e){const t=VA(n);return function(...i){console.log(`%c${n}`,`color:${t}`,...i)}}else return FA}function FA(){}function UA(n){try{if(typeof window<"u"&&typeof window.localStorage<"u")return window.localStorage[n]}catch{}}function VA(n){let e=0;for(let t=0;t<n.length;t++)e=(e<<5)-e+n.charCodeAt(t),e|=0;return By[Math.abs(e)%By.length]}const By=["#0000CC","#0099FF","#009400","#8dd200","#CCCC00","#CC9933","#ae04e7","#ff35d7","#FF3333","#FF6600","#FF9933","#FFCC33"],qA=300,pO=300,Fy=300,HA=300,Uy=50,zA=200,WA=400,KA=1200,Fm=1e3,iu=100,Vy=2e4,Rs=[{start:0,end:iu}],GA=100*1024*1024,YA=1024*1024,Um=10*1024*1024,qy=10*1024,lh={closeButton:!1,classBg:"jse-modal-bg",classWindow:"jse-modal-window",classWindowWrap:"jse-modal-window-wrap",classContent:"jse-modal-content"},JA={...lh,classWindow:"jse-modal-window jse-modal-window-sort"},QA={...lh,classWindow:"jse-modal-window jse-modal-window-transform"},I0="Insert or paste contents, enter [ insert a new array, enter { to insert a new object, or start typing to insert a new value",mO="Open context menu (Click here, right click on the selection, or use the context menu button or Ctrl+Q)",po="hover-insert-inside",ou="hover-insert-after",Vm="hover-collection",pp="valid",Hy="repairable",ZA="invalid",Rl=(40+2)*8,xl=260,Os={NO:"NO",SELF:"SELF",NEXT_INSIDE:"NEXT_INSIDE"};let zy=0;function uh(){return zy++,zy}function qm(n){return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qm(n)}function XA(n,e){return JSON.stringify(n)===JSON.stringify(e)}function $A(n,e){return n===e}function gO(n){return n.slice(0,n.length-1)}function eR(n){return n[n.length-1]}function tR(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$A;if(n.length<e.length)return!1;for(var r=0;r<e.length;r++)if(!t(n[r],e[r]))return!1;return!0}function vd(n){return qm(n)==="object"&&n!==null}function Wy(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function nR(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wy(Object(t),!0).forEach(function(r){rR(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Wy(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function rR(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Hm(n){return Hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hm(n)}function A0(n){if(Array.isArray(n)){var e=n.slice();return Object.getOwnPropertySymbols(n).forEach(function(r){e[r]=n[r]}),e}else if(Hm(n)==="object"){var t=nR({},n);return Object.getOwnPropertySymbols(n).forEach(function(r){t[r]=n[r]}),t}else return n}function R0(n,e,t){if(n[e]===t)return n;var r=A0(n);return r[e]=t,r}function tt(n,e){for(var t=n,r=0;r<e.length;)vd(t)?t=t[e[r]]:t=void 0,r++;return t}function yi(n,e,t){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.length===0)return t;var i=e[0],o=yi(n?n[i]:void 0,e.slice(1),t,r);if(!vd(n))if(r){var s=typeof i=="number"?[]:{};return s[i]=o,s}else throw new Error("Path does not exist");return R0(n,i,o)}function vO(n,e,t){if(e.length===0)return t(n);if(!vd(n))throw new Error("Path doesn't exist");var r=e[0],i=vO(n[r],e.slice(1),t);return R0(n,r,i)}function x0(n,e){if(e.length===0)return n;if(!vd(n))throw new Error("Path does not exist");if(e.length===1){var t=e[0];if(t in n){var r=A0(n);return Array.isArray(r)?r.splice(t,1):delete r[t],r}else return n}var i=e[0],o=x0(n[i],e.slice(1));return R0(n,i,o)}function N0(n,e,t){var r=e.slice(0,e.length-1),i=e[e.length-1];return vO(n,r,function(o){if(!Array.isArray(o))throw new TypeError("Array expected at path "+JSON.stringify(r));var s=A0(o);return s.splice(i,0,t),s})}function xs(n,e){return n===void 0?!1:e.length===0?!0:xs(n[e[0]],e.slice(1))}function Ko(n){var e=n.split("/");return e.shift(),e.map(function(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")})}function Ge(n){return n.map(yO).join("")}function yO(n){return"/"+String(n).replace(/~/g,"~0").replace(/\//g,"~1")}function zm(n,e){return n+yO(e)}function Pa(n,e){return n.startsWith(e)&&(n.length===e.length||n[e.length]==="/")}function ks(n,e,t){for(var r=n,i=0;i<e.length;i++){fR(e[i]);var o=e[i];if(t&&t.before){var s=t.before(r,o);s!==void 0&&(s.json!==void 0&&(r=s.json),s.operation!==void 0&&(o=s.operation))}var a=r,l=Ei(r,o.path);if(o.op==="add")r=sR(r,l,o.value);else if(o.op==="remove")r=oR(r,l);else if(o.op==="replace")r=iR(r,l,o.value);else if(o.op==="copy")r=aR(r,l,Wm(o.from));else if(o.op==="move")r=lR(r,l,Wm(o.from));else if(o.op==="test")uR(r,l,o.value);else throw new Error("Unknown JSONPatch operation "+JSON.stringify(o.op));if(t&&t.after){var u=t.after(r,o,a);u!==void 0&&(r=u)}}return r}function iR(n,e,t){return yi(n,e,t)}function oR(n,e){return x0(n,e)}function sR(n,e,t){return Du(n,e)?N0(n,e,t):yi(n,e,t)}function aR(n,e,t){var r=tt(n,t);if(Du(n,e))return N0(n,e,r);var i=tt(n,t);return yi(n,e,i)}function lR(n,e,t){var r=tt(n,t),i=x0(n,t);return Du(i,e)?N0(i,e,r):yi(i,e,r)}function uR(n,e,t){if(t===void 0)throw new Error('Test failed: no value provided (path: "'.concat(Ge(e),'")'));if(!xs(n,e))throw new Error('Test failed: path not found (path: "'.concat(Ge(e),'")'));var r=tt(n,e);if(!XA(r,t))throw new Error('Test failed, value differs (path: "'.concat(Ge(e),'")'))}function Du(n,e){if(e.length===0)return!1;var t=tt(n,gO(e));return Array.isArray(t)}function cR(n,e){if(eR(e)!=="-")return e;var t=gO(e),r=tt(n,t);return t.concat(r.length)}function fR(n){var e=["add","remove","replace","copy","move","test"];if(!e.includes(n.op))throw new Error("Unknown JSONPatch op "+JSON.stringify(n.op));if(typeof n.path!="string")throw new Error('Required property "path" missing or not a string in operation '+JSON.stringify(n));if((n.op==="copy"||n.op==="move")&&typeof n.from!="string")throw new Error('Required property "from" missing or not a string in operation '+JSON.stringify(n))}function Ei(n,e){return cR(n,Ko(e))}function Wm(n){return Ko(n)}function _O(n,e,t){var r=[];return ks(n,e,{before:function(o,s){var a,l=Ei(o,s.path);if(s.op==="add")a=SO(o,l,s.value);else if(s.op==="remove")a=wO(o,l);else if(s.op==="replace")a=bO(o,l);else if(s.op==="copy")a=hR(o,l,s.value);else if(s.op==="move")a=dR(o,l,Wm(s.from));else if(s.op==="test")a=[];else throw new Error("Unknown JSONPatch operation "+JSON.stringify(s.op));var u;if(t&&t.before){var f=t.before(o,s,a);f&&f.revertOperations&&(a=f.revertOperations),f&&f.json&&(u=f.json)}if(r=a.concat(r),u!==void 0)return{json:u}}}),r}function bO(n,e){return[{op:"replace",path:Ge(e),value:tt(n,e)}]}function wO(n,e){return[{op:"add",path:Ge(e),value:tt(n,e)}]}function SO(n,e,t){return Du(n,e)||!xs(n,e)?[{op:"remove",path:Ge(e)}]:bO(n,e)}function hR(n,e,t){return SO(n,e)}function dR(n,e,t){if(e.length<t.length&&tR(t,e))return[{op:"replace",path:Ge(e),value:n}];var r=[{op:"move",from:Ge(e),path:Ge(t)}];return!Du(n,e)&&xs(n,e)&&(r=r.concat(wO(n,e))),r}function CO(n){return n?n.op==="add":!1}function EO(n){return n?n.op==="remove":!1}function OO(n){return n?n.op==="replace":!1}function Km(n){return n?n.op==="copy":!1}function Ia(n){return n?n.op==="move":!1}var oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pR(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function kO(n){var e=n.default;if(typeof e=="function"){var t=function(){return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var yd={},Ky={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},mR="a".charCodeAt();yd.parse=function(n,e,t){var r={},i=0,o=0,s=0,a=t&&t.bigint&&typeof BigInt<"u";return{data:l("",!0),pointers:r};function l(R,j){u();var U;b(R,"value");var F=v();switch(F){case"t":h("rue"),U=!0;break;case"f":h("alse"),U=!1;break;case"n":h("ull"),U=null;break;case'"':U=f();break;case"[":U=d(R);break;case"{":U=g(R);break;default:m(),"-0123456789".indexOf(F)>=0?U=c():S()}return b(R,"valueEnd"),u(),j&&s<n.length&&S(),U}function u(){e:for(;s<n.length;){switch(n[s]){case" ":o++;break;case"	":o+=4;break;case"\r":o=0;break;case`
`:o=0,i++;break;default:break e}s++}}function f(){for(var R="",j;j=v(),j!='"';)j=="\\"?(j=v(),j in Ky?R+=Ky[j]:j=="u"?R+=p():E()):R+=j;return R}function c(){var R="",j=!0;n[s]=="-"&&(R+=v()),R+=n[s]=="0"?v():y(),n[s]=="."&&(R+=v()+y(),j=!1),(n[s]=="e"||n[s]=="E")&&(R+=v(),(n[s]=="+"||n[s]=="-")&&(R+=v()),R+=y(),j=!1);var U=+R;return a&&j&&(U>Number.MAX_SAFE_INTEGER||U<Number.MIN_SAFE_INTEGER)?BigInt(R):U}function d(R){u();var j=[],U=0;if(v()=="]")return j;for(m();;){var F=R+"/"+U;j.push(l(F)),u();var z=v();if(z=="]")break;z!=","&&E(),u(),U++}return j}function g(R){u();var j={};if(v()=="}")return j;for(m();;){var U=w();v()!='"'&&E();var F=f(),z=R+"/"+Gm(F);_(z,"key",U),b(z,"keyEnd"),u(),v()!=":"&&E(),u(),j[F]=l(z),u();var D=v();if(D=="}")break;D!=","&&E(),u()}return j}function h(R){for(var j=0;j<R.length;j++)v()!==R[j]&&E()}function v(){P();var R=n[s];return s++,o++,R}function m(){s--,o--}function p(){for(var R=4,j=0;R--;){j<<=4;var U=v().toLowerCase();U>="a"&&U<="f"?j+=U.charCodeAt()-mR+10:U>="0"&&U<="9"?j+=+U:E()}return String.fromCharCode(j)}function y(){for(var R="";n[s]>="0"&&n[s]<="9";)R+=v();if(R.length)return R;P(),S()}function b(R,j){_(R,j,w())}function _(R,j,U){r[R]=r[R]||{},r[R][j]=U}function w(){return{line:i,column:o,pos:s}}function S(){throw new SyntaxError("Unexpected token "+n[s]+" in JSON at position "+s)}function E(){m(),S()}function P(){if(s>=n.length)throw new SyntaxError("Unexpected end of JSON input")}};yd.stringify=function(n,e,t){if(!mc(n))return;var r=0,i,o,s=typeof t=="object"?t.space:t;switch(typeof s){case"number":var a=s>10?10:s<0?0:Math.floor(s);s=a&&_(a," "),i=a,o=a;break;case"string":s=s.slice(0,10),i=0,o=0;for(var l=0;l<s.length;l++){var u=s[l];switch(u){case" ":o++;break;case"	":o+=4;break;case"\r":o=0;break;case`
`:o=0,r++;break;default:throw new Error("whitespace characters not allowed in JSON")}i++}break;default:s=void 0}var f="",c={},d=0,g=0,h=0,v=t&&t.es6&&typeof Map=="function";return m(n,0,""),{json:f,pointers:c};function m(w,S,E){switch(b(E,"value"),typeof w){case"number":case"bigint":case"boolean":p(""+w);break;case"string":p(gc(w));break;case"object":w===null?p("null"):typeof w.toJSON=="function"?p(gc(w.toJSON())):Array.isArray(w)?P():v?w.constructor.BYTES_PER_ELEMENT?P():w instanceof Map?j():w instanceof Set?j(!0):R():R()}b(E,"valueEnd");function P(){if(w.length){p("[");for(var U=S+1,F=0;F<w.length;F++){F&&p(","),y(U);var z=mc(w[F])?w[F]:null,D=E+"/"+F;m(z,U,D)}y(S),p("]")}else p("[]")}function R(){var U=Object.keys(w);if(U.length){p("{");for(var F=S+1,z=0;z<U.length;z++){var D=U[z],N=w[D];if(mc(N)){z&&p(",");var L=E+"/"+Gm(D);y(F),b(L,"key"),p(gc(D)),b(L,"keyEnd"),p(":"),s&&p(" "),m(N,F,L)}}y(S),p("}")}else p("{}")}function j(U){if(w.size){p("{");for(var F=S+1,z=!0,D=w.entries(),N=D.next();!N.done;){var L=N.value,X=L[0],Q=U?!0:L[1];if(mc(Q)){z||p(","),z=!1;var A=E+"/"+Gm(X);y(F),b(A,"key"),p(gc(X)),b(A,"keyEnd"),p(":"),s&&p(" "),m(Q,F,A)}N=D.next()}y(S),p("}")}else p("{}")}}function p(w){g+=w.length,h+=w.length,f+=w}function y(w){if(s){for(f+=`
`+_(w,s),d++,g=0;w--;)r?(d+=r,g=o):g+=o,h+=i;h+=1}}function b(w,S){c[w]=c[w]||{},c[w][S]={line:d,column:g,pos:h}}function _(w,S){return Array(w+1).join(S)}};var gR=["number","bigint","boolean","string","object"];function mc(n){return gR.indexOf(typeof n)>=0}var vR=/"|\\/g,yR=/[\b]/g,_R=/\f/g,bR=/\n/g,wR=/\r/g,SR=/\t/g;function gc(n){return n=n.replace(vR,"\\$&").replace(_R,"\\f").replace(yR,"\\b").replace(bR,"\\n").replace(wR,"\\r").replace(SR,"\\t"),'"'+n+'"'}var CR=/~/g,ER=/\//g;function Gm(n){return n.replace(CR,"~0").replace(ER,"~1")}function vr(n,e){if(!(this instanceof vr))throw new SyntaxError("Constructor must be called with the new operator");this.message=n+" (char "+e+")",this.char=e,this.stack=new Error().stack}vr.prototype=new Error;vr.prototype.constructor=Error;var M0={"'":!0,"\u2018":!0,"\u2019":!0,"`":!0,"\xB4":!0},D0={'"':!0,"\u201C":!0,"\u201D":!0};function Gy(n){return OR.test(n)}var OR=/^[a-zA-Z_]$/;function kR(n){return TR.test(n)}var TR=/^[0-9a-fA-F]$/;function Io(n){return PR.test(n)}var PR=/^[0-9]$/;function ch(n){return n===" "||n==="	"||n===`
`||n==="\r"}function Ym(n){return n==="\xA0"||n>="\u2000"&&n<="\u200A"||n==="\u202F"||n==="\u205F"||n==="\u3000"}function IR(n){for(var e="",t=0;t<n.length;t++){var r=n[t];e+=Ym(r)?" ":r}return e}function AR(n){return M0[n]===!0||D0[n]===!0}function Yy(n){return M0[n]===!0}function RR(n){return D0[n]===!0}function Jy(n){return M0[n]===!0?"'":D0[n]===!0?'"':n}function fh(n,e){var t=n.lastIndexOf(e);return t!==-1?n.substring(0,t)+n.substring(t+1):n}function _a(n,e){var t=n.length;if(!ch(n[t-1]))return n+e;for(;ch(n[t-1]);)t--;return n.substring(0,t)+e+n.substring(t)}function xR(n,e,t){return n.substring(0,t)+e+n.substring(t)}var er=0,Xa=1,Ns=2,Aa=3,TO=4,Jm=5,Ra=6,NR={"":!0,"{":!0,"}":!0,"[":!0,"]":!0,":":!0,",":!0,"(":!0,")":!0,";":!0,"+":!0},MR={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Qy={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},DR={null:"null",true:"true",false:"false"},Zy={None:"null",True:"true",False:"false"},Do="",Ht="",Mn=0,Ze="",Je="",gt=Ra;function Ho(n){Do=n,Ht="",Mn=0,Ze=Do.charAt(0),Je="",gt=Ra,dn();var e=gt;if(su(),Xy(),Je==="")return Ht;if(e===gt&&hh()){for(var t="";e===gt&&hh();)Ht=_a(Ht,","),t+=Ht,Ht="",su(),Xy();return`[
`.concat(t).concat(Ht,`
]`)}throw new vr("Unexpected characters",Mn-Je.length)}function Nn(){Mn++,Ze=Do.charAt(Mn)}function jR(){Nn(),Ze==="\\"&&Nn()}function hh(){return gt===er&&(Je==="["||Je==="{")||gt===Ns||gt===Xa||gt===Aa}function LR(){return gt===Ns||gt===Xa||gt===Aa}function dn(){Ht+=Je,gt=Ra,Je="",BR(),gt===TO&&(Je=IR(Je),dn()),gt===Jm&&(gt=Ra,Je="",dn())}function Xy(){Je===","&&(Je="",gt=Ra,dn())}function BR(){if(NR[Ze]){gt=er,Je=Ze,Nn();return}FR()}function FR(){if(Io(Ze)||Ze==="-"){if(gt=Xa,Ze==="-"){if(Je+=Ze,Nn(),!Io(Ze))throw new vr("Invalid number, digit expected",Mn)}else Ze==="0"&&(Je+=Ze,Nn());for(;Io(Ze);)Je+=Ze,Nn();if(Ze==="."){if(Je+=Ze,Nn(),!Io(Ze))throw new vr("Invalid number, digit expected",Mn);for(;Io(Ze);)Je+=Ze,Nn()}if(Ze==="e"||Ze==="E"){if(Je+=Ze,Nn(),(Ze==="+"||Ze==="-")&&(Je+=Ze,Nn()),!Io(Ze))throw new vr("Invalid number, digit expected",Mn);for(;Io(Ze);)Je+=Ze,Nn()}return}UR()}function UR(){Ze==="\\"&&Do.charAt(Mn+1)==='"'?(Nn(),$y(jR)):$y(Nn)}function $y(n){if(AR(Ze)){var e=Jy(Ze),t=Yy(Ze)?Yy:RR;for(Je+='"',gt=Ns,n();Ze!==""&&!t(Ze);)if(Ze==="\\"){n();var r=MR[Ze];if(r!==void 0)Je+="\\"+Ze,n();else if(Ze==="u"){Je+="\\u",n();for(var i=0;i<4;i++){if(!kR(Ze))throw new vr("Invalid unicode character",Mn-Je.length);Je+=Ze,n()}}else if(Ze==="'")Je+="'",n();else throw new vr('Invalid escape character "\\'+Ze+'"',Mn)}else Qy[Ze]?(Je+=Qy[Ze],n()):Ze==='"'?(Je+='\\"',n()):(Je+=Ze,n());if(Jy(Ze)!==e)throw new vr("End of string expected",Mn-Je.length);Je+='"',n();return}VR()}function VR(){if(Gy(Ze)){for(gt=Aa;Gy(Ze)||Io(Ze)||Ze==="$";)Je+=Ze,Nn();return}qR()}function qR(){if(ch(Ze)||Ym(Ze)){for(gt=TO;ch(Ze)||Ym(Ze);)Je+=Ze,Nn();return}HR()}function HR(){if(Ze==="/"&&Do[Mn+1]==="*"){for(gt=Jm;Ze!==""&&(Ze!=="*"||Ze==="*"&&Do[Mn+1]!=="/");)Je+=Ze,Nn();Ze==="*"&&Do[Mn+1]==="/"&&(Je+=Ze,Nn(),Je+=Ze,Nn());return}if(Ze==="/"&&Do[Mn+1]==="/"){for(gt=Jm;Ze!==""&&Ze!==`
`;)Je+=Ze,Nn();return}zR()}function zR(){for(gt=Ra;Ze!=="";)Je+=Ze,Nn();throw new vr('Syntax error in part "'+Je+'"',Mn-Je.length)}function su(){if(gt===er&&Je==="{"){if(dn(),gt===er&&Je==="}"){dn();return}for(;;){if((gt===Aa||gt===Xa)&&(gt=Ns,Je='"'.concat(Je,'"')),gt!==Ns)throw new vr("Object key expected",Mn-Je.length);if(dn(),gt===er&&Je===":")dn();else if(hh())Ht=_a(Ht,":");else throw new vr("Colon expected",Mn-Je.length);if(su(),gt===er&&Je===","){if(dn(),gt===er&&Je==="}"){Ht=fh(Ht,",");break}if(Je===""){Ht=fh(Ht,",");break}}else if(LR())Ht=_a(Ht,",");else break}gt===er&&Je==="}"?dn():Ht=_a(Ht,"}");return}WR()}function WR(){if(gt===er&&Je==="["){if(dn(),gt===er&&Je==="]"){dn();return}for(;;)if(su(),gt===er&&Je===","){if(dn(),gt===er&&Je==="]"){Ht=fh(Ht,",");break}if(Je===""){Ht=fh(Ht,",");break}}else if(hh())Ht=_a(Ht,",");else break;gt===er&&Je==="]"?dn():Ht=_a(Ht,"]");return}KR()}function KR(){if(gt===Ns){for(dn();gt===er&&Je==="+";)if(Je="",dn(),gt===Ns){var n=Ht.lastIndexOf('"');Ht=Ht.substring(0,n)+Je.substring(1),Je="",dn()}return}GR()}function GR(){if(gt===Xa){dn();return}YR()}function YR(){if(gt===Aa){if(DR[Je]){dn();return}if(Zy[Je]){Je=Zy[Je],dn();return}var n=Je,e=Ht.length;if(Je="",dn(),gt===er&&Je==="("){Je="",dn(),su(),gt===er&&Je===")"&&(Je="",dn(),gt===er&&Je===";"&&(Je="",dn()));return}for(Ht=xR(Ht,'"'.concat(n),e);gt===Aa||gt===Xa;)dn();Ht+='"';return}JR()}function JR(){throw Je===""?new vr("Unexpected end of json string",Mn-Je.length):new vr("Value expected",Mn-Je.length)}function ir(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}function qn(n){return typeof n=="object"&&n!==null}function QR(n){return n===!0||n===!1}function ZR(n){return typeof n=="number"&&n>9466848e5&&isFinite(n)&&Math.floor(n)===n&&!isNaN(new Date(n).valueOf())}function PO(n){const e=window.document.createElement("div");return e.style.color=n,e.style.color.split(/\s+/).join("").toLowerCase()||null}function XR(n){return typeof n=="string"&&!!PO(n)}function j0(n){return n===null?"null":n===void 0?"undefined":typeof n=="number"?"number":typeof n=="string"?"string":typeof n=="boolean"?"boolean":n instanceof RegExp?"regexp":Array.isArray(n)?"array":"object"}const $R=/^https?:\/\/\S+$/;function L0(n){return typeof n=="string"&&$R.test(n)}function ju(n){if(n==="")return"";if(n==="null")return null;if(n==="true")return!0;if(n==="false")return!1;const e=Number(n);return!isNaN(e)&&!isNaN(parseFloat(n))?e:n}function ex(n){return typeof n=="string"&&typeof ju(n)!="string"}var tx=typeof global=="object"&&global&&global.Object===Object&&global;const IO=tx;var nx=typeof self=="object"&&self&&self.Object===Object&&self,rx=IO||nx||Function("return this")();const Ti=rx;var ix=Ti.Symbol;const ci=ix;var AO=Object.prototype,ox=AO.hasOwnProperty,sx=AO.toString,dl=ci?ci.toStringTag:void 0;function ax(n){var e=ox.call(n,dl),t=n[dl];try{n[dl]=void 0;var r=!0}catch{}var i=sx.call(n);return r&&(e?n[dl]=t:delete n[dl]),i}var lx=Object.prototype,ux=lx.toString;function cx(n){return ux.call(n)}var fx="[object Null]",hx="[object Undefined]",e_=ci?ci.toStringTag:void 0;function $a(n){return n==null?n===void 0?hx:fx:e_&&e_ in Object(n)?ax(n):cx(n)}function Go(n){return n!=null&&typeof n=="object"}var dx="[object Symbol]";function Ms(n){return typeof n=="symbol"||Go(n)&&$a(n)==dx}function Wl(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var px=Array.isArray;const cr=px;var mx=1/0,t_=ci?ci.prototype:void 0,n_=t_?t_.toString:void 0;function RO(n){if(typeof n=="string")return n;if(cr(n))return Wl(n,RO)+"";if(Ms(n))return n_?n_.call(n):"";var e=n+"";return e=="0"&&1/n==-mx?"-0":e}var gx=/\s/;function vx(n){for(var e=n.length;e--&&gx.test(n.charAt(e)););return e}var yx=/^\s+/;function _x(n){return n&&n.slice(0,vx(n)+1).replace(yx,"")}function ki(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var r_=0/0,bx=/^[-+]0x[0-9a-f]+$/i,wx=/^0b[01]+$/i,Sx=/^0o[0-7]+$/i,Cx=parseInt;function Qm(n){if(typeof n=="number")return n;if(Ms(n))return r_;if(ki(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=ki(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=_x(n);var t=wx.test(n);return t||Sx.test(n)?Cx(n.slice(2),t?2:8):bx.test(n)?r_:+n}var i_=1/0,Ex=17976931348623157e292;function Uf(n){if(!n)return n===0?n:0;if(n=Qm(n),n===i_||n===-i_){var e=n<0?-1:1;return e*Ex}return n===n?n:0}function Ox(n){var e=Uf(n),t=e%1;return e===e?t?e-t:e:0}function Lu(n){return n}var kx="[object AsyncFunction]",Tx="[object Function]",Px="[object GeneratorFunction]",Ix="[object Proxy]";function xO(n){if(!ki(n))return!1;var e=$a(n);return e==Tx||e==Px||e==kx||e==Ix}var Ax=Ti["__core-js_shared__"];const mp=Ax;var o_=function(){var n=/[^.]+$/.exec(mp&&mp.keys&&mp.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function Rx(n){return!!o_&&o_ in n}var xx=Function.prototype,Nx=xx.toString;function Ks(n){if(n!=null){try{return Nx.call(n)}catch{}try{return n+""}catch{}}return""}var Mx=/[\\^$.*+?()[\]{}|]/g,Dx=/^\[object .+?Constructor\]$/,jx=Function.prototype,Lx=Object.prototype,Bx=jx.toString,Fx=Lx.hasOwnProperty,Ux=RegExp("^"+Bx.call(Fx).replace(Mx,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Vx(n){if(!ki(n)||Rx(n))return!1;var e=xO(n)?Ux:Dx;return e.test(Ks(n))}function qx(n,e){return n==null?void 0:n[e]}function Gs(n,e){var t=qx(n,e);return Vx(t)?t:void 0}var Hx=Gs(Ti,"WeakMap");const Zm=Hx;var s_=Object.create,zx=function(){function n(){}return function(e){if(!ki(e))return{};if(s_)return s_(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const Wx=zx;function Kx(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function Kt(){}function Gx(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var Yx=800,Jx=16,Qx=Date.now;function Zx(n){var e=0,t=0;return function(){var r=Qx(),i=Jx-(r-t);if(t=r,i>0){if(++e>=Yx)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function Xx(n){return function(){return n}}var $x=function(){try{var n=Gs(Object,"defineProperty");return n({},"",{}),n}catch{}}();const dh=$x;var eN=dh?function(n,e){return dh(n,"toString",{configurable:!0,enumerable:!1,value:Xx(e),writable:!0})}:Lu;const tN=eN;var nN=Zx(tN);const rN=nN;function iN(n,e){for(var t=-1,r=n==null?0:n.length;++t<r&&e(n[t],t,n)!==!1;);return n}var oN=9007199254740991,sN=/^(?:0|[1-9]\d*)$/;function B0(n,e){var t=typeof n;return e=e==null?oN:e,!!e&&(t=="number"||t!="symbol"&&sN.test(n))&&n>-1&&n%1==0&&n<e}function F0(n,e,t){e=="__proto__"&&dh?dh(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function _d(n,e){return n===e||n!==n&&e!==e}var aN=Object.prototype,lN=aN.hasOwnProperty;function NO(n,e,t){var r=n[e];(!(lN.call(n,e)&&_d(r,t))||t===void 0&&!(e in n))&&F0(n,e,t)}function bd(n,e,t,r){var i=!t;t||(t={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=r?r(t[a],n[a],a,t,n):void 0;l===void 0&&(l=n[a]),i?F0(t,a,l):NO(t,a,l)}return t}var a_=Math.max;function uN(n,e,t){return e=a_(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,o=a_(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(s),Kx(n,this,a)}}function cN(n,e){return rN(uN(n,e,Lu),n+"")}var fN=9007199254740991;function U0(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=fN}function el(n){return n!=null&&U0(n.length)&&!xO(n)}function Xm(n,e,t){if(!ki(t))return!1;var r=typeof e;return(r=="number"?el(t)&&B0(e,t.length):r=="string"&&e in t)?_d(t[e],n):!1}var hN=Object.prototype;function wd(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||hN;return n===t}function MO(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var dN="[object Arguments]";function l_(n){return Go(n)&&$a(n)==dN}var DO=Object.prototype,pN=DO.hasOwnProperty,mN=DO.propertyIsEnumerable,gN=l_(function(){return arguments}())?l_:function(n){return Go(n)&&pN.call(n,"callee")&&!mN.call(n,"callee")};const Sd=gN;function vN(){return!1}var jO=typeof Kr=="object"&&Kr&&!Kr.nodeType&&Kr,u_=jO&&typeof Gr=="object"&&Gr&&!Gr.nodeType&&Gr,yN=u_&&u_.exports===jO,c_=yN?Ti.Buffer:void 0,_N=c_?c_.isBuffer:void 0,bN=_N||vN;const au=bN;var wN="[object Arguments]",SN="[object Array]",CN="[object Boolean]",EN="[object Date]",ON="[object Error]",kN="[object Function]",TN="[object Map]",PN="[object Number]",IN="[object Object]",AN="[object RegExp]",RN="[object Set]",xN="[object String]",NN="[object WeakMap]",MN="[object ArrayBuffer]",DN="[object DataView]",jN="[object Float32Array]",LN="[object Float64Array]",BN="[object Int8Array]",FN="[object Int16Array]",UN="[object Int32Array]",VN="[object Uint8Array]",qN="[object Uint8ClampedArray]",HN="[object Uint16Array]",zN="[object Uint32Array]",cn={};cn[jN]=cn[LN]=cn[BN]=cn[FN]=cn[UN]=cn[VN]=cn[qN]=cn[HN]=cn[zN]=!0;cn[wN]=cn[SN]=cn[MN]=cn[CN]=cn[DN]=cn[EN]=cn[ON]=cn[kN]=cn[TN]=cn[PN]=cn[IN]=cn[AN]=cn[RN]=cn[xN]=cn[NN]=!1;function WN(n){return Go(n)&&U0(n.length)&&!!cn[$a(n)]}function Cd(n){return function(e){return n(e)}}var LO=typeof Kr=="object"&&Kr&&!Kr.nodeType&&Kr,Kl=LO&&typeof Gr=="object"&&Gr&&!Gr.nodeType&&Gr,KN=Kl&&Kl.exports===LO,gp=KN&&IO.process,GN=function(){try{var n=Kl&&Kl.require&&Kl.require("util").types;return n||gp&&gp.binding&&gp.binding("util")}catch{}}();const xa=GN;var f_=xa&&xa.isTypedArray,YN=f_?Cd(f_):WN;const V0=YN;var JN=Object.prototype,QN=JN.hasOwnProperty;function BO(n,e){var t=cr(n),r=!t&&Sd(n),i=!t&&!r&&au(n),o=!t&&!r&&!i&&V0(n),s=t||r||i||o,a=s?MO(n.length,String):[],l=a.length;for(var u in n)(e||QN.call(n,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||B0(u,l)))&&a.push(u);return a}function FO(n,e){return function(t){return n(e(t))}}var ZN=FO(Object.keys,Object);const XN=ZN;var $N=Object.prototype,eM=$N.hasOwnProperty;function UO(n){if(!wd(n))return XN(n);var e=[];for(var t in Object(n))eM.call(n,t)&&t!="constructor"&&e.push(t);return e}function tl(n){return el(n)?BO(n):UO(n)}function tM(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var nM=Object.prototype,rM=nM.hasOwnProperty;function iM(n){if(!ki(n))return tM(n);var e=wd(n),t=[];for(var r in n)r=="constructor"&&(e||!rM.call(n,r))||t.push(r);return t}function q0(n){return el(n)?BO(n,!0):iM(n)}var oM=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sM=/^\w*$/;function H0(n,e){if(cr(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||Ms(n)?!0:sM.test(n)||!oM.test(n)||e!=null&&n in Object(e)}var aM=Gs(Object,"create");const lu=aM;function lM(){this.__data__=lu?lu(null):{},this.size=0}function uM(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var cM="__lodash_hash_undefined__",fM=Object.prototype,hM=fM.hasOwnProperty;function dM(n){var e=this.__data__;if(lu){var t=e[n];return t===cM?void 0:t}return hM.call(e,n)?e[n]:void 0}var pM=Object.prototype,mM=pM.hasOwnProperty;function gM(n){var e=this.__data__;return lu?e[n]!==void 0:mM.call(e,n)}var vM="__lodash_hash_undefined__";function yM(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=lu&&e===void 0?vM:e,this}function Ds(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ds.prototype.clear=lM;Ds.prototype.delete=uM;Ds.prototype.get=dM;Ds.prototype.has=gM;Ds.prototype.set=yM;function _M(){this.__data__=[],this.size=0}function Ed(n,e){for(var t=n.length;t--;)if(_d(n[t][0],e))return t;return-1}var bM=Array.prototype,wM=bM.splice;function SM(n){var e=this.__data__,t=Ed(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():wM.call(e,t,1),--this.size,!0}function CM(n){var e=this.__data__,t=Ed(e,n);return t<0?void 0:e[t][1]}function EM(n){return Ed(this.__data__,n)>-1}function OM(n,e){var t=this.__data__,r=Ed(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function yo(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}yo.prototype.clear=_M;yo.prototype.delete=SM;yo.prototype.get=CM;yo.prototype.has=EM;yo.prototype.set=OM;var kM=Gs(Ti,"Map");const uu=kM;function TM(){this.size=0,this.__data__={hash:new Ds,map:new(uu||yo),string:new Ds}}function PM(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function Od(n,e){var t=n.__data__;return PM(e)?t[typeof e=="string"?"string":"hash"]:t.map}function IM(n){var e=Od(this,n).delete(n);return this.size-=e?1:0,e}function AM(n){return Od(this,n).get(n)}function RM(n){return Od(this,n).has(n)}function xM(n,e){var t=Od(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function _o(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}_o.prototype.clear=TM;_o.prototype.delete=IM;_o.prototype.get=AM;_o.prototype.has=RM;_o.prototype.set=xM;var NM="Expected a function";function kd(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(NM);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=t.cache;if(o.has(i))return o.get(i);var s=n.apply(this,r);return t.cache=o.set(i,s)||o,s};return t.cache=new(kd.Cache||_o),t}kd.Cache=_o;var MM=500;function DM(n){var e=kd(n,function(r){return t.size===MM&&t.clear(),r}),t=e.cache;return e}var jM=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,LM=/\\(\\)?/g,BM=DM(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(jM,function(t,r,i,o){e.push(i?o.replace(LM,"$1"):r||t)}),e});const FM=BM;function VO(n){return n==null?"":RO(n)}function qO(n,e){return cr(n)?n:H0(n,e)?[n]:FM(VO(n))}var UM=1/0;function Td(n){if(typeof n=="string"||Ms(n))return n;var e=n+"";return e=="0"&&1/n==-UM?"-0":e}function z0(n,e){e=qO(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[Td(e[t++])];return t&&t==r?n:void 0}function VM(n,e,t){var r=n==null?void 0:z0(n,e);return r===void 0?t:r}function W0(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var h_=ci?ci.isConcatSpreadable:void 0;function qM(n){return cr(n)||Sd(n)||!!(h_&&n&&n[h_])}function HO(n,e,t,r,i){var o=-1,s=n.length;for(t||(t=qM),i||(i=[]);++o<s;){var a=n[o];e>0&&t(a)?e>1?HO(a,e-1,t,r,i):W0(i,a):r||(i[i.length]=a)}return i}var HM=FO(Object.getPrototypeOf,Object);const zO=HM;function zM(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=n[r+e];return o}function WM(){this.__data__=new yo,this.size=0}function KM(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function GM(n){return this.__data__.get(n)}function YM(n){return this.__data__.has(n)}var JM=200;function QM(n,e){var t=this.__data__;if(t instanceof yo){var r=t.__data__;if(!uu||r.length<JM-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new _o(r)}return t.set(n,e),this.size=t.size,this}function Wi(n){var e=this.__data__=new yo(n);this.size=e.size}Wi.prototype.clear=WM;Wi.prototype.delete=KM;Wi.prototype.get=GM;Wi.prototype.has=YM;Wi.prototype.set=QM;function ZM(n,e){return n&&bd(e,tl(e),n)}function XM(n,e){return n&&bd(e,q0(e),n)}var WO=typeof Kr=="object"&&Kr&&!Kr.nodeType&&Kr,d_=WO&&typeof Gr=="object"&&Gr&&!Gr.nodeType&&Gr,$M=d_&&d_.exports===WO,p_=$M?Ti.Buffer:void 0,m_=p_?p_.allocUnsafe:void 0;function e6(n,e){if(e)return n.slice();var t=n.length,r=m_?m_(t):new n.constructor(t);return n.copy(r),r}function t6(n,e){for(var t=-1,r=n==null?0:n.length,i=0,o=[];++t<r;){var s=n[t];e(s,t,n)&&(o[i++]=s)}return o}function KO(){return[]}var n6=Object.prototype,r6=n6.propertyIsEnumerable,g_=Object.getOwnPropertySymbols,i6=g_?function(n){return n==null?[]:(n=Object(n),t6(g_(n),function(e){return r6.call(n,e)}))}:KO;const K0=i6;function o6(n,e){return bd(n,K0(n),e)}var s6=Object.getOwnPropertySymbols,a6=s6?function(n){for(var e=[];n;)W0(e,K0(n)),n=zO(n);return e}:KO;const GO=a6;function l6(n,e){return bd(n,GO(n),e)}function YO(n,e,t){var r=e(n);return cr(n)?r:W0(r,t(n))}function $m(n){return YO(n,tl,K0)}function u6(n){return YO(n,q0,GO)}var c6=Gs(Ti,"DataView");const eg=c6;var f6=Gs(Ti,"Promise");const tg=f6;var h6=Gs(Ti,"Set");const ng=h6;var v_="[object Map]",d6="[object Object]",y_="[object Promise]",__="[object Set]",b_="[object WeakMap]",w_="[object DataView]",p6=Ks(eg),m6=Ks(uu),g6=Ks(tg),v6=Ks(ng),y6=Ks(Zm),gs=$a;(eg&&gs(new eg(new ArrayBuffer(1)))!=w_||uu&&gs(new uu)!=v_||tg&&gs(tg.resolve())!=y_||ng&&gs(new ng)!=__||Zm&&gs(new Zm)!=b_)&&(gs=function(n){var e=$a(n),t=e==d6?n.constructor:void 0,r=t?Ks(t):"";if(r)switch(r){case p6:return w_;case m6:return v_;case g6:return y_;case v6:return __;case y6:return b_}return e});const Na=gs;var _6=Object.prototype,b6=_6.hasOwnProperty;function w6(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&b6.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var S6=Ti.Uint8Array;const ph=S6;function G0(n){var e=new n.constructor(n.byteLength);return new ph(e).set(new ph(n)),e}function C6(n,e){var t=e?G0(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var E6=/\w*$/;function O6(n){var e=new n.constructor(n.source,E6.exec(n));return e.lastIndex=n.lastIndex,e}var S_=ci?ci.prototype:void 0,C_=S_?S_.valueOf:void 0;function k6(n){return C_?Object(C_.call(n)):{}}function T6(n,e){var t=e?G0(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var P6="[object Boolean]",I6="[object Date]",A6="[object Map]",R6="[object Number]",x6="[object RegExp]",N6="[object Set]",M6="[object String]",D6="[object Symbol]",j6="[object ArrayBuffer]",L6="[object DataView]",B6="[object Float32Array]",F6="[object Float64Array]",U6="[object Int8Array]",V6="[object Int16Array]",q6="[object Int32Array]",H6="[object Uint8Array]",z6="[object Uint8ClampedArray]",W6="[object Uint16Array]",K6="[object Uint32Array]";function G6(n,e,t){var r=n.constructor;switch(e){case j6:return G0(n);case P6:case I6:return new r(+n);case L6:return C6(n,t);case B6:case F6:case U6:case V6:case q6:case H6:case z6:case W6:case K6:return T6(n,t);case A6:return new r;case R6:case M6:return new r(n);case x6:return O6(n);case N6:return new r;case D6:return k6(n)}}function Y6(n){return typeof n.constructor=="function"&&!wd(n)?Wx(zO(n)):{}}var J6="[object Map]";function Q6(n){return Go(n)&&Na(n)==J6}var E_=xa&&xa.isMap,Z6=E_?Cd(E_):Q6;const X6=Z6;var $6="[object Set]";function e5(n){return Go(n)&&Na(n)==$6}var O_=xa&&xa.isSet,t5=O_?Cd(O_):e5;const n5=t5;var r5=1,i5=2,o5=4,JO="[object Arguments]",s5="[object Array]",a5="[object Boolean]",l5="[object Date]",u5="[object Error]",QO="[object Function]",c5="[object GeneratorFunction]",f5="[object Map]",h5="[object Number]",ZO="[object Object]",d5="[object RegExp]",p5="[object Set]",m5="[object String]",g5="[object Symbol]",v5="[object WeakMap]",y5="[object ArrayBuffer]",_5="[object DataView]",b5="[object Float32Array]",w5="[object Float64Array]",S5="[object Int8Array]",C5="[object Int16Array]",E5="[object Int32Array]",O5="[object Uint8Array]",k5="[object Uint8ClampedArray]",T5="[object Uint16Array]",P5="[object Uint32Array]",ln={};ln[JO]=ln[s5]=ln[y5]=ln[_5]=ln[a5]=ln[l5]=ln[b5]=ln[w5]=ln[S5]=ln[C5]=ln[E5]=ln[f5]=ln[h5]=ln[ZO]=ln[d5]=ln[p5]=ln[m5]=ln[g5]=ln[O5]=ln[k5]=ln[T5]=ln[P5]=!0;ln[u5]=ln[QO]=ln[v5]=!1;function Vf(n,e,t,r,i,o){var s,a=e&r5,l=e&i5,u=e&o5;if(t&&(s=i?t(n,r,i,o):t(n)),s!==void 0)return s;if(!ki(n))return n;var f=cr(n);if(f){if(s=w6(n),!a)return Gx(n,s)}else{var c=Na(n),d=c==QO||c==c5;if(au(n))return e6(n,a);if(c==ZO||c==JO||d&&!i){if(s=l||d?{}:Y6(n),!a)return l?l6(n,XM(s,n)):o6(n,ZM(s,n))}else{if(!ln[c])return i?n:{};s=G6(n,c,a)}}o||(o=new Wi);var g=o.get(n);if(g)return g;o.set(n,s),n5(n)?n.forEach(function(m){s.add(Vf(m,e,t,m,n,o))}):X6(n)&&n.forEach(function(m,p){s.set(p,Vf(m,e,t,p,n,o))});var h=u?l?u6:$m:l?q0:tl,v=f?void 0:h(n);return iN(v||n,function(m,p){v&&(p=m,m=n[p]),NO(s,p,Vf(m,e,t,p,n,o))}),s}var I5=1,A5=4;function R5(n,e){return e=typeof e=="function"?e:void 0,Vf(n,I5|A5,e)}var x5="__lodash_hash_undefined__";function N5(n){return this.__data__.set(n,x5),this}function M5(n){return this.__data__.has(n)}function mh(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new _o;++e<t;)this.add(n[e])}mh.prototype.add=mh.prototype.push=N5;mh.prototype.has=M5;function D5(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function j5(n,e){return n.has(e)}var L5=1,B5=2;function XO(n,e,t,r,i,o){var s=t&L5,a=n.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(n),f=o.get(e);if(u&&f)return u==e&&f==n;var c=-1,d=!0,g=t&B5?new mh:void 0;for(o.set(n,e),o.set(e,n);++c<a;){var h=n[c],v=e[c];if(r)var m=s?r(v,h,c,e,n,o):r(h,v,c,n,e,o);if(m!==void 0){if(m)continue;d=!1;break}if(g){if(!D5(e,function(p,y){if(!j5(g,y)&&(h===p||i(h,p,t,r,o)))return g.push(y)})){d=!1;break}}else if(!(h===v||i(h,v,t,r,o))){d=!1;break}}return o.delete(n),o.delete(e),d}function F5(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}function U5(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var V5=1,q5=2,H5="[object Boolean]",z5="[object Date]",W5="[object Error]",K5="[object Map]",G5="[object Number]",Y5="[object RegExp]",J5="[object Set]",Q5="[object String]",Z5="[object Symbol]",X5="[object ArrayBuffer]",$5="[object DataView]",k_=ci?ci.prototype:void 0,vp=k_?k_.valueOf:void 0;function e8(n,e,t,r,i,o,s){switch(t){case $5:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case X5:return!(n.byteLength!=e.byteLength||!o(new ph(n),new ph(e)));case H5:case z5:case G5:return _d(+n,+e);case W5:return n.name==e.name&&n.message==e.message;case Y5:case Q5:return n==e+"";case K5:var a=F5;case J5:var l=r&V5;if(a||(a=U5),n.size!=e.size&&!l)return!1;var u=s.get(n);if(u)return u==e;r|=q5,s.set(n,e);var f=XO(a(n),a(e),r,i,o,s);return s.delete(n),f;case Z5:if(vp)return vp.call(n)==vp.call(e)}return!1}var t8=1,n8=Object.prototype,r8=n8.hasOwnProperty;function i8(n,e,t,r,i,o){var s=t&t8,a=$m(n),l=a.length,u=$m(e),f=u.length;if(l!=f&&!s)return!1;for(var c=l;c--;){var d=a[c];if(!(s?d in e:r8.call(e,d)))return!1}var g=o.get(n),h=o.get(e);if(g&&h)return g==e&&h==n;var v=!0;o.set(n,e),o.set(e,n);for(var m=s;++c<l;){d=a[c];var p=n[d],y=e[d];if(r)var b=s?r(y,p,d,e,n,o):r(p,y,d,n,e,o);if(!(b===void 0?p===y||i(p,y,t,r,o):b)){v=!1;break}m||(m=d=="constructor")}if(v&&!m){var _=n.constructor,w=e.constructor;_!=w&&"constructor"in n&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof w=="function"&&w instanceof w)&&(v=!1)}return o.delete(n),o.delete(e),v}var o8=1,T_="[object Arguments]",P_="[object Array]",vc="[object Object]",s8=Object.prototype,I_=s8.hasOwnProperty;function a8(n,e,t,r,i,o){var s=cr(n),a=cr(e),l=s?P_:Na(n),u=a?P_:Na(e);l=l==T_?vc:l,u=u==T_?vc:u;var f=l==vc,c=u==vc,d=l==u;if(d&&au(n)){if(!au(e))return!1;s=!0,f=!1}if(d&&!f)return o||(o=new Wi),s||V0(n)?XO(n,e,t,r,i,o):e8(n,e,l,t,r,i,o);if(!(t&o8)){var g=f&&I_.call(n,"__wrapped__"),h=c&&I_.call(e,"__wrapped__");if(g||h){var v=g?n.value():n,m=h?e.value():e;return o||(o=new Wi),i(v,m,t,r,o)}}return d?(o||(o=new Wi),i8(n,e,t,r,i,o)):!1}function Pd(n,e,t,r,i){return n===e?!0:n==null||e==null||!Go(n)&&!Go(e)?n!==n&&e!==e:a8(n,e,t,r,Pd,i)}var l8=1,u8=2;function c8(n,e,t,r){var i=t.length,o=i,s=!r;if(n==null)return!o;for(n=Object(n);i--;){var a=t[i];if(s&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++i<o;){a=t[i];var l=a[0],u=n[l],f=a[1];if(s&&a[2]){if(u===void 0&&!(l in n))return!1}else{var c=new Wi;if(r)var d=r(u,f,l,n,e,c);if(!(d===void 0?Pd(f,u,l8|u8,r,c):d))return!1}}return!0}function $O(n){return n===n&&!ki(n)}function f8(n){for(var e=tl(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,$O(i)]}return e}function ek(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function h8(n){var e=f8(n);return e.length==1&&e[0][2]?ek(e[0][0],e[0][1]):function(t){return t===n||c8(t,n,e)}}function d8(n,e){return n!=null&&e in Object(n)}function p8(n,e,t){e=qO(e,n);for(var r=-1,i=e.length,o=!1;++r<i;){var s=Td(e[r]);if(!(o=n!=null&&t(n,s)))break;n=n[s]}return o||++r!=i?o:(i=n==null?0:n.length,!!i&&U0(i)&&B0(s,i)&&(cr(n)||Sd(n)))}function m8(n,e){return n!=null&&p8(n,e,d8)}var g8=1,v8=2;function y8(n,e){return H0(n)&&$O(e)?ek(Td(n),e):function(t){var r=VM(t,n);return r===void 0&&r===e?m8(t,n):Pd(e,r,g8|v8)}}function _8(n){return function(e){return e==null?void 0:e[n]}}function b8(n){return function(e){return z0(e,n)}}function w8(n){return H0(n)?_8(Td(n)):b8(n)}function Id(n){return typeof n=="function"?n:n==null?Lu:typeof n=="object"?cr(n)?y8(n[0],n[1]):h8(n):w8(n)}function S8(n,e,t,r){for(var i=-1,o=n==null?0:n.length;++i<o;){var s=n[i];e(r,s,t(s),n)}return r}function tk(n){return function(e,t,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var l=s[n?a:++i];if(t(o[l],l,o)===!1)break}return e}}var C8=tk();const E8=C8;function O8(n,e){return n&&E8(n,e,tl)}function nk(n,e){return function(t,r){if(t==null)return t;if(!el(t))return n(t,r);for(var i=t.length,o=e?i:-1,s=Object(t);(e?o--:++o<i)&&r(s[o],o,s)!==!1;);return t}}var k8=nk(O8);const rk=k8;function T8(n,e,t,r){return rk(n,function(i,o,s){e(r,i,t(i),s)}),r}function P8(n,e){return function(t,r){var i=cr(t)?S8:T8,o=e?e():{};return i(t,n,Id(r),o)}}var I8=function(){return Ti.Date.now()};const yp=I8;var A8="Expected a function",R8=Math.max,x8=Math.min;function Ad(n,e,t){var r,i,o,s,a,l,u=0,f=!1,c=!1,d=!0;if(typeof n!="function")throw new TypeError(A8);e=Qm(e)||0,ki(t)&&(f=!!t.leading,c="maxWait"in t,o=c?R8(Qm(t.maxWait)||0,e):o,d="trailing"in t?!!t.trailing:d);function g(S){var E=r,P=i;return r=i=void 0,u=S,s=n.apply(P,E),s}function h(S){return u=S,a=setTimeout(p,e),f?g(S):s}function v(S){var E=S-l,P=S-u,R=e-E;return c?x8(R,o-P):R}function m(S){var E=S-l,P=S-u;return l===void 0||E>=e||E<0||c&&P>=o}function p(){var S=yp();if(m(S))return y(S);a=setTimeout(p,v(S))}function y(S){return a=void 0,d&&r?g(S):(r=i=void 0,s)}function b(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function _(){return a===void 0?s:y(yp())}function w(){var S=yp(),E=m(S);if(r=arguments,i=this,l=S,E){if(a===void 0)return h(l);if(c)return clearTimeout(a),a=setTimeout(p,e),g(l)}return a===void 0&&(a=setTimeout(p,e)),s}return w.cancel=b,w.flush=_,w}function St(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}function ik(n){return typeof n=="function"?n:Lu}function N8(n,e){for(var t=n==null?0:n.length;t--&&e(n[t],t,n)!==!1;);return n}var M8=tk(!0);const D8=M8;function j8(n,e){return n&&D8(n,e,tl)}var L8=nk(j8,!0);const B8=L8;function F8(n,e){var t=cr(n)?N8:B8;return t(n,ik(e))}function yr(n){return n&&n.length?n[0]:void 0}function ok(n,e){var t=-1,r=el(n)?Array(n.length):[];return rk(n,function(i,o,s){r[++t]=e(i,o,s)}),r}function U8(n,e){var t=cr(n)?Wl:ok;return t(n,Id(e))}var V8=Object.prototype,q8=V8.hasOwnProperty,H8=P8(function(n,e,t){q8.call(n,t)?n[t].push(e):F0(n,t,[e])});const Y0=H8;function Vt(n){var e=n==null?0:n.length;return e?zM(n,0,-1):[]}var z8="[object Map]",W8="[object Set]",K8=Object.prototype,G8=K8.hasOwnProperty;function gn(n){if(n==null)return!0;if(el(n)&&(cr(n)||typeof n=="string"||typeof n.splice=="function"||au(n)||V0(n)||Sd(n)))return!n.length;var e=Na(n);if(e==z8||e==W8)return!n.size;if(wd(n))return!UO(n).length;for(var t in n)if(G8.call(n,t))return!1;return!0}function Yt(n,e){return Pd(n,e)}function Y8(n,e){return n<e}function J8(n,e,t){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=e(o);if(s!=null&&(a===void 0?s===s&&!Ms(s):t(s,a)))var a=s,l=o}return l}function yc(n,e){return n&&n.length?J8(n,Id(e),Y8):void 0}function Q8(n,e){var t=n.length;for(n.sort(e);t--;)n[t]=n[t].value;return n}function Z8(n,e){if(n!==e){var t=n!==void 0,r=n===null,i=n===n,o=Ms(n),s=e!==void 0,a=e===null,l=e===e,u=Ms(e);if(!a&&!u&&!o&&n>e||o&&s&&l&&!a&&!u||r&&s&&l||!t&&l||!i)return 1;if(!r&&!o&&!u&&n<e||u&&t&&i&&!r&&!o||a&&t&&i||!s&&i||!l)return-1}return 0}function X8(n,e,t){for(var r=-1,i=n.criteria,o=e.criteria,s=i.length,a=t.length;++r<s;){var l=Z8(i[r],o[r]);if(l){if(r>=a)return l;var u=t[r];return l*(u=="desc"?-1:1)}}return n.index-e.index}function $8(n,e,t){e.length?e=Wl(e,function(o){return cr(o)?function(s){return z0(s,o.length===1?o[0]:o)}:o}):e=[Lu];var r=-1;e=Wl(e,Cd(Id));var i=ok(n,function(o,s,a){var l=Wl(e,function(u){return u(o)});return{criteria:l,index:++r,value:o}});return Q8(i,function(o,s){return X8(o,s,t)})}var eD=Math.ceil,tD=Math.max;function nD(n,e,t,r){for(var i=-1,o=tD(eD((e-n)/(t||1)),0),s=Array(o);o--;)s[r?o:++i]=n,n+=t;return s}function rD(n){return function(e,t,r){return r&&typeof r!="number"&&Xm(e,t,r)&&(t=r=void 0),e=Uf(e),t===void 0?(t=e,e=0):t=Uf(t),r=r===void 0?e<t?1:-1:Uf(r),nD(e,t,r,n)}}var iD=rD();const oD=iD;var sD=cN(function(n,e){if(n==null)return[];var t=e.length;return t>1&&Xm(n,e[0],e[1])?e=[]:t>2&&Xm(e[0],e[1],e[2])&&(e=[e[0]]),$8(n,HO(e,1),[])});const aD=sD;var lD="Expected a function";function uD(n,e,t){var r=!0,i=!0;if(typeof n!="function")throw new TypeError(lD);return ki(t)&&(r="leading"in t?!!t.leading:r,i="trailing"in t?!!t.trailing:i),Ad(n,e,{leading:r,maxWait:e,trailing:i})}var cD=9007199254740991,_p=4294967295,fD=Math.min;function A_(n,e){if(n=Ox(n),n<1||n>cD)return[];var t=_p,r=fD(n,_p);e=ik(e),n-=_p;for(var i=MO(r,e);++t<n;)e(t);return i}var hD=0;function gh(n){var e=++hD;return VO(n)+e}const dD=1e4,pD=[];function rg(n,e=!1){const t={};if(!Array.isArray(n))throw new TypeError("Array expected");function r(s,a){(!Array.isArray(s)&&!ir(s)||e&&a.length>0)&&(t[Ge(a)]=!0),ir(s)&&Object.keys(s).forEach(u=>{r(s[u],a.concat(u))})}const i=Math.min(n.length,dD);for(let s=0;s<i;s++){const a=n[s];r(a,pD)}return Object.keys(t).sort().map(Ko)}function sk(n,e,t){if(!(e<=n))for(let r=n;r<e;r++)t(r)}function R_(n,e){return n.length>e?n.slice(0,e):n}function x_(n){return{...n}}function N_(n){return Object.values(n)}function M_(n,e,t,r){const i=n.slice(0),o=i.splice(e,t);return i.splice.apply(i,[e+r,0,...o]),i}function Dn(n){return parseInt(n,10)}function _r(n){return ir(n)}function sr(n){return Array.isArray(n)}function J0(n){try{return JSON.parse(n)}catch{return JSON.parse(Ho(n))}}function ak(n){try{return J0(n)}catch{return}}function Q0(n,e=JSON.parse){n=n.replace(lk,"");try{return e(n)}catch{}try{return e("["+n+"]")}catch{}try{return e("{"+n+"}")}catch{}throw new Error("Failed to parse partial JSON")}function mD(n){n=n.replace(lk,"");try{return Ho(n)}catch{}try{const e=Ho("["+n+"]");return e.substring(1,e.length-1)}catch{}try{const e=Ho("{"+n+"}");return e.substring(1,e.length-1)}catch{}throw new Error("Failed to repair partial JSON")}const lk=/,\s*$/;function Z0(n,e){const t=j_.exec(e);if(t){const r=Dn(t[2]),i=vD(n,`
`,0,r),o=n.lastIndexOf(`
`,r),s=r-o-1;return{position:r,line:i,column:s,message:e.replace(j_,()=>`line ${i+1} column ${s+1}`)}}else{const r=wD.exec(e),i=r?Dn(r[1]):null,o=i!==null?i-1:null,s=SD.exec(e),a=s?Dn(s[1]):null,l=a!==null?a-1:null;return{position:o!==null&&l!==null?gD(n,o,l):null,line:o,column:l,message:e.replace(/^JSON.parse: /,"").replace(/ of the JSON data$/,"")}}}function gD(n,e,t){let r=n.indexOf(`
`),i=1;for(;i<e&&r!==-1;)r=n.indexOf(`
`,r+1),i++;return r!==-1?r+t+1:null}function vD(n,e,t=0,r=n.length){let i=0;for(let o=t;o<r;o++)n.charAt(o)===e&&i++;return i}function yD(n,e){try{const t=yd.parse(n),r=Ge(e),i=t.pointers[r];if(i)return{path:e,line:i.key?i.key.line:i.value?i.value.line:0,column:i.key?i.key.column:i.value?i.value.column:0,from:i.key?i.key.pos:i.value?i.value.pos:0,to:i.keyEnd?i.keyEnd.pos:i.valueEnd?i.valueEnd.pos:0}}catch(t){console.error(t)}return null}function _D(n,e){if(e==="array"){if(Array.isArray(n))return n;if(ir(n))return N_(n);if(typeof n=="string"){const t=JSON.parse(n);if(Array.isArray(t))return t;if(ir(t))return N_(t)}}if(e==="object"){if(Array.isArray(n))return x_(n);if(ir(n))return n;if(typeof n=="string"){const t=JSON.parse(n);if(ir(t))return t;if(Array.isArray(t))return x_(t)}}if(e==="value")return qn(n)?JSON.stringify(n):n;throw new Error(`Cannot convert ${j0(n)} to ${e}`)}function bp(n){return ir(n)?n.json!==void 0?n.text!==void 0?'Content must contain either a property "json" or a property "text" but not both':null:n.text===void 0?'Content must contain either a property "json" or a property "text"':typeof n.text!="string"?'Content "text" property must be string':null:"Content must be an object"}function ig(n){return typeof n.text=="string"}function D_(n,e){return bD(n,e)>e}function bD(n,e=1/0){if(ig(n))return n.text.length;const t=n.json;let r=0;function i(o){if(Array.isArray(o)){if(r+=2+(o.length-1),r>e)return r;for(let s=0;s<o.length;s++){const a=o[s];if(i(a),r>e)return r}}else if(ir(o)){const s=Object.keys(o);r+=2+s.length+(s.length-1);for(let a=0;a<s.length;a++){const l=s[a],u=o[l];r+=l.length+2,i(u)}}else typeof o=="string"?r+=o.length+2:r+=String(o).length}return i(t),r}const j_=/(position|char) (\d+)/,wD=/line (\d+)/,SD=/column (\d+)/;var Fr;(function(n){n.text="text",n.tree="tree"})(Fr||(Fr={}));var rn;(function(n){n.after="after",n.inside="inside",n.key="key",n.value="value",n.multi="multi"})(rn||(rn={}));var _i;(function(n){n.after="after",n.key="key",n.value="value",n.inside="inside"})(_i||(_i={}));var tn;(function(n){n.info="info",n.warning="warning",n.error="error"})(tn||(tn={}));var Oi;(function(n){n.key="key",n.value="value"})(Oi||(Oi={}));function uk({escapeControlCharacters:n,escapeUnicodeCharacters:e}){return n?e?CD:ED:e?OD:kD}const CD={escapeValue:n=>ck(hk(String(n))),unescapeValue:n=>dk(fk(n))},ED={escapeValue:n=>hk(String(n)),unescapeValue:n=>dk(n)},OD={escapeValue:n=>ck(String(n)),unescapeValue:n=>fk(n)},kD={escapeValue:n=>String(n),unescapeValue:n=>n};function ck(n){return n.replace(/[^\x20-\x7F]/g,e=>e==="\b"||e==="\f"||e===`
`||e==="\r"||e==="	"?e:"\\u"+("000"+e.codePointAt(0).toString(16)).slice(-4))}function fk(n){return n.replace(/\\u[a-fA-F0-9]{4}/g,e=>{try{return JSON.parse('"'+e+'"')}catch{return e}})}const TD={"\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},PD={"\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"};function hk(n){return n.replace(/[\b\f\n\r\t]/g,e=>TD[e]||e)}function dk(n){return n.replace(/\\[bfnrt]/g,e=>PD[e]||e)}function js(n){return typeof n!="string"?String(n):n.endsWith(`
`)?n+`
`:n}function ID(n){return n.replace(/\n$/,"")}function pk(n,e){return Bu(n,t=>t.nodeName.toUpperCase()===e.toUpperCase())}function bs(n,e,t){return Bu(n,r=>RD(r,e,t))}function AD(n){return n.nodeName==="DIV"&&n.contentEditable==="true"}function RD(n,e,t){return typeof n.getAttribute=="function"&&n.getAttribute(e)===t}function Bu(n,e){return!!X0(n,e)}function X0(n,e){let t=n;for(;t&&!e(t);)t=t.parentNode;return t||void 0}function mk(n){if(n.firstChild==null){n.focus();return}const e=document.createRange(),t=window.getSelection();e.setStart(n,1),e.collapse(!0),t.removeAllRanges(),t.addRange(e)}function cu(n){return n&&n.ownerDocument&&n.ownerDocument.defaultView}function og(n){const e=cu(n);return Bu(e.document.activeElement,t=>t===n)}function xD(n,e){return X0(n,t=>t.nodeName===e)}function wp(n){return bs(n,"data-type","selectable-key")?rn.key:bs(n,"data-type","selectable-value")?rn.value:bs(n,"data-type","insert-selection-area-inside")?rn.inside:bs(n,"data-type","insert-selection-area-after")?rn.after:rn.multi}function sg(n){return encodeURIComponent(Ge(n))}function ND(n){return Ko(decodeURIComponent(n))}function MD(n){const e=X0(n,t=>t.hasAttribute("data-path"));return e?ND(e.getAttribute("data-path")):null}function DD({allElements:n,currentElement:e,direction:t,hasPrio:r=()=>!0,margin:i=10}){const o=U8(n.filter(a),l),s=l(e);function a(p){const y=p.getBoundingClientRect();return y.width>0&&y.height>0}function l(p){const y=p.getBoundingClientRect();return{x:y.left+y.width/2,y:y.top+y.height/2,rect:y,element:p}}const u=(p,y)=>Math.abs(p.y-y.y)<i,f=(p,y)=>p.rect.left+i<y.rect.left,c=(p,y)=>p.rect.right>y.rect.right+i,d=(p,y)=>p.y+i<y.y,g=(p,y)=>p.y>y.y+i;function h(p,y,b=1){const _=p.x-y.x,w=(p.y-y.y)*b;return Math.sqrt(_*_+w*w)}const v=p=>h(p,s),m=p=>h(p,s,10);if(t==="Left"||t==="Right"){const p=t==="Left"?o.filter(_=>f(_,s)):o.filter(_=>c(_,s)),y=p.filter(_=>u(_,s)),b=yc(y,v)||yc(p,m);return b==null?void 0:b.element}if(t==="Up"||t==="Down"){const p=t==="Up"?o.filter(_=>d(_,s)):o.filter(_=>g(_,s)),y=p.filter(_=>r(_.element)),b=yc(y,v)||yc(p,v);return b==null?void 0:b.element}}const gk=typeof navigator<"u"?navigator.platform.toUpperCase().indexOf("MAC")>=0:!1;function jD(n){return BD[n]||""}function nl(n){const e=[];n.ctrlKey&&e.push("Ctrl"),n.metaKey&&e.push("Command"),n.altKey&&e.push(gk?"Option":"Alt"),n.shiftKey&&e.push("Shift");const t=jD(n.which);return LD[t]||e.push(t),e.join("+")}const LD={Ctrl:!0,Command:!0,Alt:!0,Option:!0,Shift:!0},BD={8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause_Break",20:"Caps_Lock",27:"Escape",33:"Page_Up",34:"Page_Down",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Left_Window_Key",92:"Right_Window_Key",93:"Select_Key",96:"Numpad_0",97:"Numpad_1",98:"Numpad_2",99:"Numpad_3",100:"Numpad_4",101:"Numpad_5",102:"Numpad_6",103:"Numpad_7",104:"Numpad_8",105:"Numpad_9",106:"Numpad_*",107:"Numpad_+",109:"Numpad_-",110:"Numpad_.",111:"Numpad_/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Num_Lock",145:"Scroll_Lock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},{window:Sp}=P0;function L_(n){let e,t,r,i,o,s;const a=[n[0].props];var l=n[0].component;function u(f){let c={};for(let d=0;d<a.length;d+=1)c=is(c,a[d]);return{props:c}}return l&&(i=new l(u())),{c(){e=ee("div"),t=ee("input"),r=me(),i&&ke(i.$$.fragment),T(t,"class","jse-hidden-input svelte-15awhio"),T(e,"class","jse-absolute-popup-content svelte-15awhio"),T(e,"style",o=B_(n[1],n[0].options))},m(f,c){fe(f,e,c),B(e,t),n[7](t),B(e,r),i&&Ee(i,e,null),s=!0},p(f,c){const d=c&1?Ws(a,[pd(f[0].props)]):{};if(l!==(l=f[0].component)){if(i){Fe();const g=i;te(g.$$.fragment,1,0,()=>{Oe(g,1)}),Ue()}l?(i=new l(u()),ke(i.$$.fragment),$(i.$$.fragment,1),Ee(i,e,null)):i=null}else l&&i.$set(d);(!s||c&3&&o!==(o=B_(f[1],f[0].options)))&&T(e,"style",o)},i(f){s||(i&&$(i.$$.fragment,f),s=!0)},o(f){i&&te(i.$$.fragment,f),s=!1},d(f){f&&ue(e),n[7](null),i&&Oe(i)}}}function FD(n){let e,t,r,i,o=n[1]&&L_(n);return{c(){e=ee("div"),o&&o.c(),T(e,"class","jse-absolute-popup svelte-15awhio")},m(s,a){fe(s,e,a),o&&o.m(e,null),n[8](e),t=!0,r||(i=[Te(Sp,"mousedown",n[3],!0),Te(Sp,"keydown",n[4],!0),Te(Sp,"wheel",n[5],!0),Te(e,"mousedown",UD),Te(e,"keydown",n[4])],r=!0)},p(s,[a]){s[1]?o?(o.p(s,a),a&2&&$(o,1)):(o=L_(s),o.c(),$(o,1),o.m(e,null)):o&&(Fe(),te(o,1,1,()=>{o=null}),Ue())},i(s){t||($(o),t=!0)},o(s){te(o),t=!1},d(s){s&&ue(e),o&&o.d(),n[8](null),r=!1,on(i)}}}function UD(n){n.stopPropagation()}function B_(n,e){function t(){if(e.anchor){const{anchor:f,width:c=0,height:d=0,offsetTop:g=0,offsetLeft:h=0,position:v}=e,{left:m,top:p,bottom:y,right:b}=f.getBoundingClientRect(),_=v==="top"||p+d>window.innerHeight&&p>d,w=v==="left"||m+c>window.innerWidth&&m>c;return{left:w?b-h:m+h,top:_?p-g:y+g,positionAbove:_,positionLeft:w}}else if(typeof e.left=="number"&&typeof e.top=="number"){const{left:f,top:c,width:d=0,height:g=0}=e,h=c+g>window.innerHeight&&c>g,v=f+d>window.innerWidth&&f>d;return{left:f,top:c,positionAbove:h,positionLeft:v}}else throw new Error('Invalid config: pass either "left" and "top", or pass "anchor"')}const r=n.getBoundingClientRect(),{left:i,top:o,positionAbove:s,positionLeft:a}=t(),l=s?`bottom: ${r.top-o}px;`:`top: ${o-r.top}px;`,u=a?`right: ${r.left-i}px;`:`left: ${i-r.left}px;`;return l+u}function VD(n,e,t){let{popup:r}=e,{closeAbsolutePopup:i}=e,o,s;Nr(c);function a(h){r.options&&r.options.closeOnOuterClick&&!Bu(h.target,v=>v===o)&&i(r.id)}function l(h){a(h)}function u(h){nl(h)==="Escape"&&i(r.id)}function f(h){a(h)}function c(){s&&s.focus()}function d(h){wt[h?"unshift":"push"](()=>{s=h,t(2,s)})}function g(h){wt[h?"unshift":"push"](()=>{o=h,t(1,o)})}return n.$$set=h=>{"popup"in h&&t(0,r=h.popup),"closeAbsolutePopup"in h&&t(6,i=h.closeAbsolutePopup)},[r,o,s,l,u,f,i,d,g]}class qD extends rt{constructor(e){super(),nt(this,e,VD,FD,Xt,{popup:0,closeAbsolutePopup:6})}}function F_(n,e,t){const r=n.slice();return r[6]=e[t],r}function U_(n){let e,t;return e=new qD({props:{popup:n[6],closeAbsolutePopup:n[1]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.popup=r[6]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function HD(n){let e,t,r=n[0],i=[];for(let l=0;l<r.length;l+=1)i[l]=U_(F_(n,r,l));const o=l=>te(i[l],1,1,()=>{i[l]=null}),s=n[3].default,a=Zr(s,n,n[2],null);return{c(){for(let l=0;l<i.length;l+=1)i[l].c();e=me(),a&&a.c()},m(l,u){for(let f=0;f<i.length;f+=1)i[f].m(l,u);fe(l,e,u),a&&a.m(l,u),t=!0},p(l,[u]){if(u&3){r=l[0];let f;for(f=0;f<r.length;f+=1){const c=F_(l,r,f);i[f]?(i[f].p(c,u),$(i[f],1)):(i[f]=U_(c),i[f].c(),$(i[f],1),i[f].m(e.parentNode,e))}for(Fe(),f=r.length;f<i.length;f+=1)o(f);Ue()}a&&a.p&&(!t||u&4)&&$r(a,s,l,l[2],t?Xr(s,l[2],u,null):ei(l[2]),null)},i(l){if(!t){for(let u=0;u<r.length;u+=1)$(i[u]);$(a,l),t=!0}},o(l){i=i.filter(Boolean);for(let u=0;u<i.length;u+=1)te(i[u]);te(a,l),t=!1},d(l){xn(i,l),l&&ue(e),a&&a.d(l)}}}function zD(n,e,t){let{$$slots:r={},$$scope:i}=e;const o=Sr("jsoneditor:AbsolutePopup");let s=[];function a(u,f,c){o("open...",f,c);const d={id:uh(),component:u,props:f||{},options:c||{}};return t(0,s=[...s,d]),d.id}function l(u){const f=s.findIndex(c=>c.id===u);if(f!==-1){const c=s[f];c.options.onClose&&c.options.onClose(),t(0,s=s.filter(d=>d.id!==u))}}return lO("absolute-popup",{openAbsolutePopup:a,closeAbsolutePopup:l}),n.$$set=u=>{"$$scope"in u&&t(2,i=u.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&o("popups",s)},[s,l,i,r]}class vk extends rt{constructor(e){super(),nt(this,e,zD,HD,Nt,{})}}/*!
 * Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var WD={prefix:"fas",iconName:"angle-down",icon:[384,512,[8964],"f107","M192 384c-8.188 0-16.38-3.125-22.62-9.375l-160-160c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L192 306.8l137.4-137.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-160 160C208.4 380.9 200.2 384 192 384z"]},yk={prefix:"fas",iconName:"angle-right",icon:[256,512,[8250],"f105","M64 448c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L178.8 256L41.38 118.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l160 160c12.5 12.5 12.5 32.75 0 45.25l-160 160C80.38 444.9 72.19 448 64 448z"]},KD={prefix:"fas",iconName:"arrow-down",icon:[384,512,[8595],"f063","M374.6 310.6l-160 160C208.4 476.9 200.2 480 192 480s-16.38-3.125-22.62-9.375l-160-160c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 370.8V64c0-17.69 14.33-31.1 31.1-31.1S224 46.31 224 64v306.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0S387.1 298.1 374.6 310.6z"]},GD={prefix:"fas",iconName:"arrow-down-short-wide",icon:[576,512,["sort-amount-desc","sort-amount-down-alt"],"f884","M320 224H416c17.67 0 32-14.33 32-32s-14.33-32-32-32h-95.1c-17.67 0-32 14.33-32 32S302.3 224 320 224zM320 352H480c17.67 0 32-14.33 32-32s-14.33-32-32-32h-159.1c-17.67 0-32 14.33-32 32S302.3 352 320 352zM320 96h32c17.67 0 31.1-14.33 31.1-32s-14.33-32-31.1-32h-32c-17.67 0-32 14.33-32 32S302.3 96 320 96zM544 416h-223.1c-17.67 0-32 14.33-32 32s14.33 32 32 32H544c17.67 0 32-14.33 32-32S561.7 416 544 416zM192.4 330.7L160 366.1V64.03C160 46.33 145.7 32 128 32S96 46.33 96 64.03v302L63.6 330.7c-6.312-6.883-14.94-10.38-23.61-10.38c-7.719 0-15.47 2.781-21.61 8.414c-13.03 11.95-13.9 32.22-1.969 45.27l87.1 96.09c12.12 13.26 35.06 13.26 47.19 0l87.1-96.09c11.94-13.05 11.06-33.31-1.969-45.27C224.6 316.8 204.4 317.7 192.4 330.7z"]},$0=GD,YD={prefix:"fas",iconName:"arrow-rotate-left",icon:[512,512,[8634,"arrow-left-rotate","arrow-rotate-back","arrow-rotate-backward","undo"],"f0e2","M480 256c0 123.4-100.5 223.9-223.9 223.9c-48.86 0-95.19-15.58-134.2-44.86c-14.14-10.59-17-30.66-6.391-44.81c10.61-14.09 30.69-16.97 44.8-6.375c27.84 20.91 61 31.94 95.89 31.94C344.3 415.8 416 344.1 416 256s-71.67-159.8-159.8-159.8C205.9 96.22 158.6 120.3 128.6 160H192c17.67 0 32 14.31 32 32S209.7 224 192 224H48c-17.67 0-32-14.31-32-32V48c0-17.69 14.33-32 32-32s32 14.31 32 32v70.23C122.1 64.58 186.1 32.11 256.1 32.11C379.5 32.11 480 132.6 480 256z"]},_k=YD,JD={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M496 48V192c0 17.69-14.31 32-32 32H320c-17.69 0-32-14.31-32-32s14.31-32 32-32h63.39c-29.97-39.7-77.25-63.78-127.6-63.78C167.7 96.22 96 167.9 96 256s71.69 159.8 159.8 159.8c34.88 0 68.03-11.03 95.88-31.94c14.22-10.53 34.22-7.75 44.81 6.375c10.59 14.16 7.75 34.22-6.375 44.81c-39.03 29.28-85.36 44.86-134.2 44.86C132.5 479.9 32 379.4 32 256s100.5-223.9 223.9-223.9c69.15 0 134 32.47 176.1 86.12V48c0-17.69 14.31-32 32-32S496 30.31 496 48z"]},bk=JD,Vi={prefix:"fas",iconName:"caret-down",icon:[320,512,[],"f0d7","M310.6 246.6l-127.1 128C176.4 380.9 168.2 384 160 384s-16.38-3.125-22.63-9.375l-127.1-128C.2244 237.5-2.516 223.7 2.438 211.8S19.07 192 32 192h255.1c12.94 0 24.62 7.781 29.58 19.75S319.8 237.5 310.6 246.6z"]},jo={prefix:"fas",iconName:"caret-right",icon:[256,512,[],"f0da","M118.6 105.4l128 127.1C252.9 239.6 256 247.8 256 255.1s-3.125 16.38-9.375 22.63l-128 127.1c-9.156 9.156-22.91 11.9-34.88 6.943S64 396.9 64 383.1V128c0-12.94 7.781-24.62 19.75-29.58S109.5 96.23 118.6 105.4z"]},ag={prefix:"fas",iconName:"check",icon:[448,512,[10004,10003],"f00c","M438.6 105.4C451.1 117.9 451.1 138.1 438.6 150.6L182.6 406.6C170.1 419.1 149.9 419.1 137.4 406.6L9.372 278.6C-3.124 266.1-3.124 245.9 9.372 233.4C21.87 220.9 42.13 220.9 54.63 233.4L159.1 338.7L393.4 105.4C405.9 92.88 426.1 92.88 438.6 105.4H438.6z"]},QD={prefix:"fas",iconName:"chevron-down",icon:[448,512,[],"f078","M224 416c-8.188 0-16.38-3.125-22.62-9.375l-192-192c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L224 338.8l169.4-169.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-192 192C240.4 412.9 232.2 416 224 416z"]},ZD={prefix:"fas",iconName:"chevron-up",icon:[448,512,[],"f077","M416 352c-8.188 0-16.38-3.125-22.62-9.375L224 173.3l-169.4 169.4c-12.5 12.5-32.75 12.5-45.25 0s-12.5-32.75 0-45.25l192-192c12.5-12.5 32.75-12.5 45.25 0l192 192c12.5 12.5 12.5 32.75 0 45.25C432.4 348.9 424.2 352 416 352z"]},XD={prefix:"fas",iconName:"circle-notch",icon:[512,512,[],"f1ce","M222.7 32.15C227.7 49.08 218.1 66.9 201.1 71.94C121.8 95.55 64 169.1 64 255.1C64 362 149.1 447.1 256 447.1C362 447.1 448 362 448 255.1C448 169.1 390.2 95.55 310.9 71.94C293.9 66.9 284.3 49.08 289.3 32.15C294.4 15.21 312.2 5.562 329.1 10.6C434.9 42.07 512 139.1 512 255.1C512 397.4 397.4 511.1 256 511.1C114.6 511.1 0 397.4 0 255.1C0 139.1 77.15 42.07 182.9 10.6C199.8 5.562 217.6 15.21 222.7 32.15V32.15z"]},$D={prefix:"fas",iconName:"clone",icon:[512,512,[],"f24d","M0 224C0 188.7 28.65 160 64 160H128V288C128 341 170.1 384 224 384H352V448C352 483.3 323.3 512 288 512H64C28.65 512 0 483.3 0 448V224zM224 352C188.7 352 160 323.3 160 288V64C160 28.65 188.7 0 224 0H448C483.3 0 512 28.65 512 64V288C512 323.3 483.3 352 448 352H224z"]},vh={prefix:"fas",iconName:"code",icon:[640,512,[],"f121","M414.8 40.79L286.8 488.8C281.9 505.8 264.2 515.6 247.2 510.8C230.2 505.9 220.4 488.2 225.2 471.2L353.2 23.21C358.1 6.216 375.8-3.624 392.8 1.232C409.8 6.087 419.6 23.8 414.8 40.79H414.8zM518.6 121.4L630.6 233.4C643.1 245.9 643.1 266.1 630.6 278.6L518.6 390.6C506.1 403.1 485.9 403.1 473.4 390.6C460.9 378.1 460.9 357.9 473.4 345.4L562.7 256L473.4 166.6C460.9 154.1 460.9 133.9 473.4 121.4C485.9 108.9 506.1 108.9 518.6 121.4V121.4zM166.6 166.6L77.25 256L166.6 345.4C179.1 357.9 179.1 378.1 166.6 390.6C154.1 403.1 133.9 403.1 121.4 390.6L9.372 278.6C-3.124 266.1-3.124 245.9 9.372 233.4L121.4 121.4C133.9 108.9 154.1 108.9 166.6 121.4C179.1 133.9 179.1 154.1 166.6 166.6V166.6z"]},yh={prefix:"fas",iconName:"copy",icon:[512,512,[],"f0c5","M384 96L384 0h-112c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48H464c26.51 0 48-21.49 48-48V128h-95.1C398.4 128 384 113.6 384 96zM416 0v96h96L416 0zM192 352V128h-144c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h192c26.51 0 48-21.49 48-48L288 416h-32C220.7 416 192 387.3 192 352z"]},ej={prefix:"fas",iconName:"crop-simple",icon:[512,512,["crop-alt"],"f565","M128 384H352V448H128C92.65 448 64 419.3 64 384V128H32C14.33 128 0 113.7 0 96C0 78.33 14.33 64 32 64H64V32C64 14.33 78.33 0 96 0C113.7 0 128 14.33 128 32V384zM384 128H160V64H384C419.3 64 448 92.65 448 128V384H480C497.7 384 512 398.3 512 416C512 433.7 497.7 448 480 448H448V480C448 497.7 433.7 512 416 512C398.3 512 384 497.7 384 480V128z"]},tj=ej,nj={prefix:"fas",iconName:"ellipsis-vertical",icon:[128,512,["ellipsis-v"],"f142","M64 360C94.93 360 120 385.1 120 416C120 446.9 94.93 472 64 472C33.07 472 8 446.9 8 416C8 385.1 33.07 360 64 360zM64 200C94.93 200 120 225.1 120 256C120 286.9 94.93 312 64 312C33.07 312 8 286.9 8 256C8 225.1 33.07 200 64 200zM64 152C33.07 152 8 126.9 8 96C8 65.07 33.07 40 64 40C94.93 40 120 65.07 120 96C120 126.9 94.93 152 64 152z"]},rj=nj,ev={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M3.853 54.87C10.47 40.9 24.54 32 40 32H472C487.5 32 501.5 40.9 508.1 54.87C514.8 68.84 512.7 85.37 502.1 97.33L320 320.9V448C320 460.1 313.2 471.2 302.3 476.6C291.5 482 278.5 480.9 268.8 473.6L204.8 425.6C196.7 419.6 192 410.1 192 400V320.9L9.042 97.33C-.745 85.37-2.765 68.84 3.854 54.87L3.853 54.87z"]},ij={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6C499.2 175.2 496.4 184.9 489.6 191.2L446.3 230.6C447.4 238.9 448 247.4 448 256C448 264.6 447.4 273.1 446.3 281.4L489.6 320.8C496.4 327.1 499.2 336.8 495.9 345.4C491.5 357.3 486.2 368.8 480.2 379.7L475.5 387.8C468.9 398.8 461.5 409.2 453.4 419.1C447.4 426.2 437.7 428.7 428.9 425.9L373.2 408.1C359.8 418.4 344.1 427 329.2 433.6L316.7 490.7C314.7 499.7 307.7 506.1 298.5 508.5C284.7 510.8 270.5 512 255.1 512C241.5 512 227.3 510.8 213.5 508.5C204.3 506.1 197.3 499.7 195.3 490.7L182.8 433.6C167 427 152.2 418.4 138.8 408.1L83.14 425.9C74.3 428.7 64.55 426.2 58.63 419.1C50.52 409.2 43.12 398.8 36.52 387.8L31.84 379.7C25.77 368.8 20.49 357.3 16.06 345.4C12.82 336.8 15.55 327.1 22.41 320.8L65.67 281.4C64.57 273.1 64 264.6 64 256C64 247.4 64.57 238.9 65.67 230.6L22.41 191.2C15.55 184.9 12.82 175.3 16.06 166.6C20.49 154.7 25.78 143.2 31.84 132.3L36.51 124.2C43.12 113.2 50.52 102.8 58.63 92.95C64.55 85.8 74.3 83.32 83.14 86.14L138.8 103.9C152.2 93.56 167 84.96 182.8 78.43L195.3 21.33C197.3 12.25 204.3 5.04 213.5 3.51C227.3 1.201 241.5 0 256 0C270.5 0 284.7 1.201 298.5 3.51C307.7 5.04 314.7 12.25 316.7 21.33L329.2 78.43C344.1 84.96 359.8 93.56 373.2 103.9L428.9 86.14C437.7 83.32 447.4 85.8 453.4 92.95C461.5 102.8 468.9 113.2 475.5 124.2L480.2 132.3C486.2 143.2 491.5 154.7 495.9 166.6V166.6zM256 336C300.2 336 336 300.2 336 255.1C336 211.8 300.2 175.1 256 175.1C211.8 175.1 176 211.8 176 255.1C176 300.2 211.8 336 256 336z"]},oj=ij,sj={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M500.3 443.7l-119.7-119.7c27.22-40.41 40.65-90.9 33.46-144.7C401.8 87.79 326.8 13.32 235.2 1.723C99.01-15.51-15.51 99.01 1.724 235.2c11.6 91.64 86.08 166.7 177.6 178.9c53.8 7.189 104.3-6.236 144.7-33.46l119.7 119.7c15.62 15.62 40.95 15.62 56.57 0C515.9 484.7 515.9 459.3 500.3 443.7zM79.1 208c0-70.58 57.42-128 128-128s128 57.42 128 128c0 70.58-57.42 128-128 128S79.1 278.6 79.1 208z"]},tv=sj,aj={prefix:"fas",iconName:"paste",icon:[512,512,["file-clipboard"],"f0ea","M320 96V80C320 53.49 298.5 32 272 32H215.4C204.3 12.89 183.6 0 160 0S115.7 12.89 104.6 32H48C21.49 32 0 53.49 0 80v320C0 426.5 21.49 448 48 448l144 .0013L192 176C192 131.8 227.8 96 272 96H320zM160 88C146.8 88 136 77.25 136 64S146.8 40 160 40S184 50.75 184 64S173.3 88 160 88zM416 128v96h96L416 128zM384 224L384 128h-112C245.5 128 224 149.5 224 176v288c0 26.51 21.49 48 48 48h192c26.51 0 48-21.49 48-48V256h-95.99C398.4 256 384 241.6 384 224z"]},nv={prefix:"fas",iconName:"pen",icon:[512,512,[128394],"f304","M362.7 19.32C387.7-5.678 428.3-5.678 453.3 19.32L492.7 58.75C517.7 83.74 517.7 124.3 492.7 149.3L444.3 197.7L314.3 67.72L362.7 19.32zM421.7 220.3L188.5 453.4C178.1 463.8 165.2 471.5 151.1 475.6L30.77 511C22.35 513.5 13.24 511.2 7.03 504.1C.8198 498.8-1.502 489.7 .976 481.2L36.37 360.9C40.53 346.8 48.16 333.9 58.57 323.5L291.7 90.34L421.7 220.3z"]},lj={prefix:"fas",iconName:"scissors",icon:[512,512,[9986,9988,9984,"cut"],"f0c4","M396.8 51.2C425.1 22.92 470.9 22.92 499.2 51.2C506.3 58.27 506.3 69.73 499.2 76.8L216.5 359.5C221.3 372.1 224 385.7 224 400C224 461.9 173.9 512 112 512C50.14 512 0 461.9 0 400C0 338.1 50.14 287.1 112 287.1C126.3 287.1 139.9 290.7 152.5 295.5L191.1 255.1L152.5 216.5C139.9 221.3 126.3 224 112 224C50.14 224 0 173.9 0 112C0 50.14 50.14 0 112 0C173.9 0 224 50.14 224 112C224 126.3 221.3 139.9 216.5 152.5L255.1 191.1L396.8 51.2zM160 111.1C160 85.49 138.5 63.1 112 63.1C85.49 63.1 64 85.49 64 111.1C64 138.5 85.49 159.1 112 159.1C138.5 159.1 160 138.5 160 111.1zM112 448C138.5 448 160 426.5 160 400C160 373.5 138.5 352 112 352C85.49 352 64 373.5 64 400C64 426.5 85.49 448 112 448zM278.6 342.6L342.6 278.6L499.2 435.2C506.3 442.3 506.3 453.7 499.2 460.8C470.9 489.1 425.1 489.1 396.8 460.8L278.6 342.6z"]},lg=lj,uj={prefix:"fas",iconName:"square-caret-down",icon:[448,512,["caret-square-down"],"f150","M384 32H64C28.65 32 0 60.65 0 96v320c0 35.34 28.65 64 64 64h320c35.35 0 64-28.66 64-64V96C448 60.65 419.3 32 384 32zM345.6 232.3l-104 112C237 349.2 230.7 352 224 352s-13.03-2.781-17.59-7.656l-104-112c-6.5-7-8.219-17.19-4.407-25.94C101.8 197.7 110.5 192 120 192h208c9.531 0 18.19 5.656 21.1 14.41C353.8 215.2 352.1 225.3 345.6 232.3z"]},cj=uj,fj={prefix:"fas",iconName:"square-caret-up",icon:[448,512,["caret-square-up"],"f151","M384 32H64C28.65 32 0 60.65 0 96v320c0 35.34 28.65 64 64 64h320c35.35 0 64-28.66 64-64V96C448 60.65 419.3 32 384 32zM349.1 305.6C346.2 314.3 337.5 320 328 320h-208c-9.531 0-18.19-5.656-22-14.41C94.19 296.8 95.91 286.7 102.4 279.7l104-112c9.125-9.75 26.06-9.75 35.19 0l104 112C352.1 286.7 353.8 296.8 349.1 305.6z"]},hj=fj,dj={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M506.3 417l-213.3-364c-16.33-28-57.54-28-73.98 0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6C502.1 480 522.6 445 506.3 417zM232 168c0-13.25 10.75-24 24-24S280 154.8 280 168v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zM256 416c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"]},rl=dj,rv={prefix:"fas",iconName:"wrench",icon:[512,512,[128295],"f0ad","M507.6 122.8c-2.904-12.09-18.25-16.13-27.04-7.338l-76.55 76.56l-83.1-.0002l0-83.1l76.55-76.56c8.791-8.789 4.75-24.14-7.336-27.04c-23.69-5.693-49.34-6.111-75.92 .2484c-61.45 14.7-109.4 66.9-119.2 129.3C189.8 160.8 192.3 186.7 200.1 210.1l-178.1 178.1c-28.12 28.12-28.12 73.69 0 101.8C35.16 504.1 53.56 512 71.1 512s36.84-7.031 50.91-21.09l178.1-178.1c23.46 7.736 49.31 10.24 76.17 6.004c62.41-9.84 114.6-57.8 129.3-119.2C513.7 172.1 513.3 146.5 507.6 122.8zM80 456c-13.25 0-24-10.75-24-24c0-13.26 10.75-24 24-24s24 10.74 24 24C104 445.3 93.25 456 80 456z"]},pj={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"]},Fu=pj;function _c(n,e=1e3){if(n<.9*e)return n.toFixed()+" B";const t=n/e;if(t<.9*e)return t.toFixed(1)+" KB";const r=t/e;if(r<.9*e)return r.toFixed(1)+" MB";const i=r/e;return i<.9*e?i.toFixed(1)+" GB":(i/e).toFixed(1)+" TB"}const bc=Sr("jsoneditor:FocusTracker");function wk({onMount:n,onDestroy:e,getWindow:t,hasFocus:r,onFocus:i,onBlur:o}){let s,a=!1;function l(){const f=r();f&&(clearTimeout(s),a||(bc("focus"),i(),a=f))}function u(){a&&(clearTimeout(s),s=setTimeout(()=>{bc("blur"),a=!1,o()}))}n(()=>{bc("mount FocusTracker");const f=t();f&&(f.addEventListener("focusin",l,!0),f.addEventListener("focusout",u,!0))}),e(()=>{bc("destroy FocusTracker");const f=t();f&&(f.removeEventListener("focusin",l,!0),f.removeEventListener("focusout",u,!0))})}function mj(n){let e,t,r=[{id:t="path-"+n[0]},n[1]],i={};for(let o=0;o<r.length;o+=1)i=is(i,r[o]);return{c(){e=Ft("path"),oh(e,i)},m(o,s){fe(o,e,s)},p(o,[s]){oh(e,i=Ws(r,[s&1&&t!==(t="path-"+o[0])&&{id:t},s&2&&o[1]]))},i:Me,o:Me,d(o){o&&ue(e)}}}function gj(n,e,t){let{id:r}=e,{data:i={}}=e;return n.$$set=o=>{"id"in o&&t(0,r=o.id),"data"in o&&t(1,i=o.data)},[r,i]}class vj extends rt{constructor(e){super(),nt(this,e,gj,mj,Xt,{id:0,data:1})}}function yj(n){let e,t,r=[{id:t="polygon-"+n[0]},n[1]],i={};for(let o=0;o<r.length;o+=1)i=is(i,r[o]);return{c(){e=Ft("polygon"),oh(e,i)},m(o,s){fe(o,e,s)},p(o,[s]){oh(e,i=Ws(r,[s&1&&t!==(t="polygon-"+o[0])&&{id:t},s&2&&o[1]]))},i:Me,o:Me,d(o){o&&ue(e)}}}function _j(n,e,t){let{id:r}=e,{data:i={}}=e;return n.$$set=o=>{"id"in o&&t(0,r=o.id),"data"in o&&t(1,i=o.data)},[r,i]}class bj extends rt{constructor(e){super(),nt(this,e,_j,yj,Xt,{id:0,data:1})}}function wj(n){let e;return{c(){e=Ft("g")},m(t,r){fe(t,e,r),e.innerHTML=n[0]},p(t,[r]){r&1&&(e.innerHTML=t[0])},i:Me,o:Me,d(t){t&&ue(e)}}}function Sj(n,e,t){let r=870711;function i(){return r+=1,`fa-${r.toString(16)}`}let o,{data:s}=e;function a(l){if(!l||!l.raw)return null;let u=l.raw;const f={};return u=u.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,(c,d)=>{const g=i();return f[d]=g,` id="${g}"`}),u=u.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(c,d,g,h)=>{const v=d||h;return!v||!f[v]?c:`#${f[v]}`}),u}return n.$$set=l=>{"data"in l&&t(1,s=l.data)},n.$$.update=()=>{n.$$.dirty&2&&t(0,o=a(s))},[o,s]}class Cj extends rt{constructor(e){super(),nt(this,e,Sj,wj,Xt,{data:1})}}function Ej(n){let e,t,r,i;const o=n[13].default,s=Zr(o,n,n[12],null);return{c(){e=Ft("svg"),s&&s.c(),T(e,"version","1.1"),T(e,"class",t="fa-icon "+n[0]+" svelte-1dof0an"),T(e,"x",n[8]),T(e,"y",n[9]),T(e,"width",n[1]),T(e,"height",n[2]),T(e,"aria-label",n[11]),T(e,"role",r=n[11]?"img":"presentation"),T(e,"viewBox",n[3]),T(e,"style",n[10]),ze(e,"fa-spin",n[4]),ze(e,"fa-pulse",n[6]),ze(e,"fa-inverse",n[5]),ze(e,"fa-flip-horizontal",n[7]==="horizontal"),ze(e,"fa-flip-vertical",n[7]==="vertical")},m(a,l){fe(a,e,l),s&&s.m(e,null),i=!0},p(a,[l]){s&&s.p&&(!i||l&4096)&&$r(s,o,a,a[12],i?Xr(o,a[12],l,null):ei(a[12]),null),(!i||l&1&&t!==(t="fa-icon "+a[0]+" svelte-1dof0an"))&&T(e,"class",t),(!i||l&256)&&T(e,"x",a[8]),(!i||l&512)&&T(e,"y",a[9]),(!i||l&2)&&T(e,"width",a[1]),(!i||l&4)&&T(e,"height",a[2]),(!i||l&2048)&&T(e,"aria-label",a[11]),(!i||l&2048&&r!==(r=a[11]?"img":"presentation"))&&T(e,"role",r),(!i||l&8)&&T(e,"viewBox",a[3]),(!i||l&1024)&&T(e,"style",a[10]),l&17&&ze(e,"fa-spin",a[4]),l&65&&ze(e,"fa-pulse",a[6]),l&33&&ze(e,"fa-inverse",a[5]),l&129&&ze(e,"fa-flip-horizontal",a[7]==="horizontal"),l&129&&ze(e,"fa-flip-vertical",a[7]==="vertical")},i(a){i||($(s,a),i=!0)},o(a){te(s,a),i=!1},d(a){a&&ue(e),s&&s.d(a)}}}function Oj(n,e,t){let{$$slots:r={},$$scope:i}=e,{class:o}=e,{width:s}=e,{height:a}=e,{box:l}=e,{spin:u=!1}=e,{inverse:f=!1}=e,{pulse:c=!1}=e,{flip:d=null}=e,{x:g=void 0}=e,{y:h=void 0}=e,{style:v=void 0}=e,{label:m=void 0}=e;return n.$$set=p=>{"class"in p&&t(0,o=p.class),"width"in p&&t(1,s=p.width),"height"in p&&t(2,a=p.height),"box"in p&&t(3,l=p.box),"spin"in p&&t(4,u=p.spin),"inverse"in p&&t(5,f=p.inverse),"pulse"in p&&t(6,c=p.pulse),"flip"in p&&t(7,d=p.flip),"x"in p&&t(8,g=p.x),"y"in p&&t(9,h=p.y),"style"in p&&t(10,v=p.style),"label"in p&&t(11,m=p.label),"$$scope"in p&&t(12,i=p.$$scope)},[o,s,a,l,u,f,c,d,g,h,v,m,i,r]}class kj extends rt{constructor(e){super(),nt(this,e,Oj,Ej,Xt,{class:0,width:1,height:2,box:3,spin:4,inverse:5,pulse:6,flip:7,x:8,y:9,style:10,label:11})}}function V_(n,e,t){const r=n.slice();return r[24]=e[t],r[26]=t,r}function q_(n,e,t){const r=n.slice();return r[27]=e[t],r[26]=t,r}function H_(n){let e,t,r,i,o=n[6].paths&&z_(n),s=n[6].polygons&&K_(n),a=n[6].raw&&Y_(n);return{c(){o&&o.c(),e=me(),s&&s.c(),t=me(),a&&a.c(),r=xt()},m(l,u){o&&o.m(l,u),fe(l,e,u),s&&s.m(l,u),fe(l,t,u),a&&a.m(l,u),fe(l,r,u),i=!0},p(l,u){l[6].paths?o?(o.p(l,u),u&64&&$(o,1)):(o=z_(l),o.c(),$(o,1),o.m(e.parentNode,e)):o&&(Fe(),te(o,1,1,()=>{o=null}),Ue()),l[6].polygons?s?(s.p(l,u),u&64&&$(s,1)):(s=K_(l),s.c(),$(s,1),s.m(t.parentNode,t)):s&&(Fe(),te(s,1,1,()=>{s=null}),Ue()),l[6].raw?a?(a.p(l,u),u&64&&$(a,1)):(a=Y_(l),a.c(),$(a,1),a.m(r.parentNode,r)):a&&(Fe(),te(a,1,1,()=>{a=null}),Ue())},i(l){i||($(o),$(s),$(a),i=!0)},o(l){te(o),te(s),te(a),i=!1},d(l){o&&o.d(l),l&&ue(e),s&&s.d(l),l&&ue(t),a&&a.d(l),l&&ue(r)}}}function z_(n){let e,t,r=n[6].paths,i=[];for(let s=0;s<r.length;s+=1)i[s]=W_(q_(n,r,s));const o=s=>te(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=xt()},m(s,a){for(let l=0;l<i.length;l+=1)i[l].m(s,a);fe(s,e,a),t=!0},p(s,a){if(a&64){r=s[6].paths;let l;for(l=0;l<r.length;l+=1){const u=q_(s,r,l);i[l]?(i[l].p(u,a),$(i[l],1)):(i[l]=W_(u),i[l].c(),$(i[l],1),i[l].m(e.parentNode,e))}for(Fe(),l=r.length;l<i.length;l+=1)o(l);Ue()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)$(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)te(i[a]);t=!1},d(s){xn(i,s),s&&ue(e)}}}function W_(n){let e,t;return e=new vj({props:{id:n[26],data:n[27]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i&64&&(o.data=r[27]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function K_(n){let e,t,r=n[6].polygons,i=[];for(let s=0;s<r.length;s+=1)i[s]=G_(V_(n,r,s));const o=s=>te(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=xt()},m(s,a){for(let l=0;l<i.length;l+=1)i[l].m(s,a);fe(s,e,a),t=!0},p(s,a){if(a&64){r=s[6].polygons;let l;for(l=0;l<r.length;l+=1){const u=V_(s,r,l);i[l]?(i[l].p(u,a),$(i[l],1)):(i[l]=G_(u),i[l].c(),$(i[l],1),i[l].m(e.parentNode,e))}for(Fe(),l=r.length;l<i.length;l+=1)o(l);Ue()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)$(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)te(i[a]);t=!1},d(s){xn(i,s),s&&ue(e)}}}function G_(n){let e,t;return e=new bj({props:{id:n[26],data:n[24]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i&64&&(o.data=r[24]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Y_(n){let e,t,r;function i(s){n[15](s)}let o={};return n[6]!==void 0&&(o.data=n[6]),e=new Cj({props:o}),wt.push(()=>Ir(e,"data",i)),{c(){ke(e.$$.fragment)},m(s,a){Ee(e,s,a),r=!0},p(s,a){const l={};!t&&a&64&&(t=!0,l.data=s[6],qr(()=>t=!1)),e.$set(l)},i(s){r||($(e.$$.fragment,s),r=!0)},o(s){te(e.$$.fragment,s),r=!1},d(s){Oe(e,s)}}}function Tj(n){let e,t,r=n[6]&&H_(n);return{c(){r&&r.c(),e=xt()},m(i,o){r&&r.m(i,o),fe(i,e,o),t=!0},p(i,o){i[6]?r?(r.p(i,o),o&64&&$(r,1)):(r=H_(i),r.c(),$(r,1),r.m(e.parentNode,e)):r&&(Fe(),te(r,1,1,()=>{r=null}),Ue())},i(i){t||($(r),t=!0)},o(i){te(r),t=!1},d(i){r&&r.d(i),i&&ue(e)}}}function Pj(n){let e;const t=n[14].default,r=Zr(t,n,n[16],null),i=r||Tj(n);return{c(){i&&i.c()},m(o,s){i&&i.m(o,s),e=!0},p(o,s){r?r.p&&(!e||s&65536)&&$r(r,t,o,o[16],e?Xr(t,o[16],s,null):ei(o[16]),null):i&&i.p&&(!e||s&64)&&i.p(o,e?s:-1)},i(o){e||($(i,o),e=!0)},o(o){te(i,o),e=!1},d(o){i&&i.d(o)}}}function Ij(n){let e,t;return e=new kj({props:{label:n[5],width:n[7],height:n[8],box:n[10],style:n[9],spin:n[1],flip:n[4],inverse:n[2],pulse:n[3],class:n[0],$$slots:{default:[Pj]},$$scope:{ctx:n}}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,[i]){const o={};i&32&&(o.label=r[5]),i&128&&(o.width=r[7]),i&256&&(o.height=r[8]),i&1024&&(o.box=r[10]),i&512&&(o.style=r[9]),i&2&&(o.spin=r[1]),i&16&&(o.flip=r[4]),i&4&&(o.inverse=r[2]),i&8&&(o.pulse=r[3]),i&1&&(o.class=r[0]),i&65600&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}let J_=1;function Aj(n){if("iconName"in n&&"icon"in n){let e={},t=n.icon,r=n.iconName,i=t[0],o=t[1],s=t[4],a={width:i,height:o,paths:[{d:s}]};return e[r]=a,e}return n}function Rj(n,e,t){let{$$slots:r={},$$scope:i}=e,{class:o=""}=e,{data:s}=e,{scale:a=1}=e,{spin:l=!1}=e,{inverse:u=!1}=e,{pulse:f=!1}=e,{flip:c=null}=e,{label:d=null}=e,g=null,{style:h=null}=e,v,m,p,y;function b(){if(typeof s>"u")return;const U=Aj(s),[F]=Object.keys(U),z=U[F];z.paths||(z.paths=[]),z.d&&z.paths.push({d:z.d}),z.polygons||(z.polygons=[]),z.points&&z.polygons.push({points:z.points}),t(6,g=z)}function _(){let U=1;return typeof a<"u"&&(U=Number(a)),isNaN(U)||U<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),J_):U*J_}function w(){return g?`0 0 ${g.width} ${g.height}`:`0 0 ${v} ${m}`}function S(){return g?Math.max(g.width,g.height)/16:1}function E(){return g?g.width/S()*_():0}function P(){return g?g.height/S()*_():0}function R(){let U="";h!==null&&(U+=h);let F=_();return F===1?U.length===0?void 0:U:(U!==""&&!U.endsWith(";")&&(U+="; "),`${U}font-size: ${F}em`)}function j(U){g=U,t(6,g)}return n.$$set=U=>{"class"in U&&t(0,o=U.class),"data"in U&&t(11,s=U.data),"scale"in U&&t(12,a=U.scale),"spin"in U&&t(1,l=U.spin),"inverse"in U&&t(2,u=U.inverse),"pulse"in U&&t(3,f=U.pulse),"flip"in U&&t(4,c=U.flip),"label"in U&&t(5,d=U.label),"style"in U&&t(13,h=U.style),"$$scope"in U&&t(16,i=U.$$scope)},n.$$.update=()=>{n.$$.dirty&14336&&(b(),t(7,v=E()),t(8,m=P()),t(9,p=R()),t(10,y=w()))},[o,l,u,f,c,d,g,v,m,p,y,s,a,h,r,j,i]}class kt extends rt{constructor(e){super(),nt(this,e,Rj,Ij,Xt,{class:0,data:11,scale:12,spin:1,inverse:2,pulse:3,flip:4,label:5,style:13})}}function Q_(n,e,t){const r=n.slice();return r[8]=e[t],r}function Z_(n){let e,t;return e=new kt({props:{data:n[1]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i&2&&(o.data=r[1]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function X_(n){let e,t;return e=new kt({props:{data:n[8].icon}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i&8&&(o.data=r[8].icon),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function $_(n){let e,t,r=n[8].text+"",i,o,s,a,l,u,f,c=n[8].icon&&X_(n);function d(){return n[6](n[8])}function g(){return n[7](n[8])}return{c(){e=ee("button"),c&&c.c(),t=me(),i=qe(r),o=me(),T(e,"type","button"),T(e,"class","jse-button jse-action jse-primary svelte-c24vac"),T(e,"title",s=n[8].title),e.disabled=a=n[8].disabled},m(h,v){fe(h,e,v),c&&c.m(e,null),B(e,t),B(e,i),B(e,o),l=!0,u||(f=[Te(e,"click",d),Te(e,"mousedown",g)],u=!0)},p(h,v){n=h,n[8].icon?c?(c.p(n,v),v&8&&$(c,1)):(c=X_(n),c.c(),$(c,1),c.m(e,t)):c&&(Fe(),te(c,1,1,()=>{c=null}),Ue()),(!l||v&8)&&r!==(r=n[8].text+"")&&bt(i,r),(!l||v&8&&s!==(s=n[8].title))&&T(e,"title",s),(!l||v&8&&a!==(a=n[8].disabled))&&(e.disabled=a)},i(h){l||($(c),l=!0)},o(h){te(c),l=!1},d(h){h&&ue(e),c&&c.d(),u=!1,on(f)}}}function xj(n){let e,t,r,i,o,s,a,l,u,f,c=n[1]&&Z_(n),d=n[3],g=[];for(let v=0;v<d.length;v+=1)g[v]=$_(Q_(n,d,v));const h=v=>te(g[v],1,1,()=>{g[v]=null});return{c(){e=ee("div"),t=ee("div"),c&&c.c(),r=me(),i=qe(n[2]),o=me(),s=ee("div");for(let v=0;v<g.length;v+=1)g[v].c();T(t,"class","jse-text svelte-c24vac"),ze(t,"jse-clickable",n[4]!==null),T(s,"class","jse-actions svelte-c24vac"),T(e,"class",a="jse-message jse-"+n[0]+" svelte-c24vac")},m(v,m){fe(v,e,m),B(e,t),c&&c.m(t,null),B(t,r),B(t,i),B(e,o),B(e,s);for(let p=0;p<g.length;p+=1)g[p].m(s,null);l=!0,u||(f=Te(t,"click",n[5]),u=!0)},p(v,[m]){if(v[1]?c?(c.p(v,m),m&2&&$(c,1)):(c=Z_(v),c.c(),$(c,1),c.m(t,r)):c&&(Fe(),te(c,1,1,()=>{c=null}),Ue()),(!l||m&4)&&bt(i,v[2]),m&16&&ze(t,"jse-clickable",v[4]!==null),m&8){d=v[3];let p;for(p=0;p<d.length;p+=1){const y=Q_(v,d,p);g[p]?(g[p].p(y,m),$(g[p],1)):(g[p]=$_(y),g[p].c(),$(g[p],1),g[p].m(s,null))}for(Fe(),p=d.length;p<g.length;p+=1)h(p);Ue()}(!l||m&1&&a!==(a="jse-message jse-"+v[0]+" svelte-c24vac"))&&T(e,"class",a)},i(v){if(!l){$(c);for(let m=0;m<d.length;m+=1)$(g[m]);l=!0}},o(v){te(c),g=g.filter(Boolean);for(let m=0;m<g.length;m+=1)te(g[m]);l=!1},d(v){v&&ue(e),c&&c.d(),xn(g,v),u=!1,f()}}}function Nj(n,e,t){let{type:r="success"}=e,{icon:i=void 0}=e,{message:o=void 0}=e,{actions:s=[]}=e,{onClick:a=void 0}=e;function l(){a&&a()}const u=c=>{c.onClick&&c.onClick()},f=c=>{c.onMouseDown&&c.onMouseDown()};return n.$$set=c=>{"type"in c&&t(0,r=c.type),"icon"in c&&t(1,i=c.icon),"message"in c&&t(2,o=c.message),"actions"in c&&t(3,s=c.actions),"onClick"in c&&t(4,a=c.onClick)},[r,i,o,s,a,l,u,f]}class Ys extends rt{constructor(e){super(),nt(this,e,Nj,xj,Nt,{type:0,icon:1,message:2,actions:3,onClick:4})}}function Yo(n){return n.map(Mj).join("")}function Mj(n){return Ck.test(n)?"["+n+"]":Sk.test(n)?"."+n:"["+JSON.stringify(n)+"]"}function ls(n){return n.map(e=>Ck.test(e)?`?.[${e}]`:Sk.test(e)?`?.${e}`:`?.[${JSON.stringify(e)}]`).join("")}const Sk=/^[A-z$_][A-z$_\d]*$/i,Ck=/^\d+$/;function Dj(){return kd(n=>n,Yo)}function e1(n,e,t){const r=n.slice();return r[6]=e[t],r[8]=t,r}function t1(n){let e,t,r,i;const o=[Lj,jj],s=[];function a(l,u){return l[2]||l[0].length===1?0:1}return t=a(n),r=s[t]=o[t](n),{c(){e=ee("div"),r.c(),T(e,"class","jse-validation-errors-overview svelte-1hu2cx3")},m(l,u){fe(l,e,u),s[t].m(e,null),i=!0},p(l,u){let f=t;t=a(l),t===f?s[t].p(l,u):(Fe(),te(s[f],1,1,()=>{s[f]=null}),Ue(),r=s[t],r?r.p(l,u):(r=s[t]=o[t](l),r.c()),$(r,1),r.m(e,null))},i(l){i||($(r),i=!0)},o(l){te(r),i=!1},d(l){l&&ue(e),s[t].d()}}}function jj(n){let e,t,r,i,o,s,a,l=n[0].length+"",u,f,c,d,g,h,v;return o=new kt({props:{data:rl}}),d=new kt({props:{data:yk}}),{c(){e=ee("table"),t=ee("tbody"),r=ee("tr"),i=ee("td"),ke(o.$$.fragment),s=me(),a=ee("td"),u=qe(l),f=qe(` validation errors
              `),c=ee("div"),ke(d.$$.fragment),T(i,"class","jse-validation-error-icon svelte-1hu2cx3"),T(c,"class","jse-validation-errors-expand svelte-1hu2cx3"),T(a,"class","svelte-1hu2cx3"),T(r,"class","jse-validation-error svelte-1hu2cx3"),T(e,"class","svelte-1hu2cx3")},m(m,p){fe(m,e,p),B(e,t),B(t,r),B(r,i),Ee(o,i,null),B(r,s),B(r,a),B(a,u),B(a,f),B(a,c),Ee(d,c,null),g=!0,h||(v=Te(r,"click",n[4]),h=!0)},p(m,p){(!g||p&1)&&l!==(l=m[0].length+"")&&bt(u,l)},i(m){g||($(o.$$.fragment,m),$(d.$$.fragment,m),g=!0)},o(m){te(o.$$.fragment,m),te(d.$$.fragment,m),g=!1},d(m){m&&ue(e),Oe(o),Oe(d),h=!1,v()}}}function Lj(n){let e,t,r,i=n[0],o=[];for(let a=0;a<i.length;a+=1)o[a]=r1(e1(n,i,a));const s=a=>te(o[a],1,1,()=>{o[a]=null});return{c(){e=ee("table"),t=ee("tbody");for(let a=0;a<o.length;a+=1)o[a].c();T(e,"class","svelte-1hu2cx3")},m(a,l){fe(a,e,l),B(e,t);for(let u=0;u<o.length;u+=1)o[u].m(t,null);r=!0},p(a,l){if(l&11){i=a[0];let u;for(u=0;u<i.length;u+=1){const f=e1(a,i,u);o[u]?(o[u].p(f,l),$(o[u],1)):(o[u]=r1(f),o[u].c(),$(o[u],1),o[u].m(t,null))}for(Fe(),u=i.length;u<o.length;u+=1)s(u);Ue()}},i(a){if(!r){for(let l=0;l<i.length;l+=1)$(o[l]);r=!0}},o(a){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)te(o[l]);r=!1},d(a){a&&ue(e),xn(o,a)}}}function n1(n){let e,t,r,i,o;return t=new kt({props:{data:WD}}),{c(){e=ee("button"),ke(t.$$.fragment),T(e,"type","button"),T(e,"class","jse-validation-errors-collapse svelte-1hu2cx3"),T(e,"title","Collapse validation errors")},m(s,a){fe(s,e,a),Ee(t,e,null),r=!0,i||(o=Te(e,"click",oO(n[3])),i=!0)},p:Me,i(s){r||($(t.$$.fragment,s),r=!0)},o(s){te(t.$$.fragment,s),r=!1},d(s){s&&ue(e),Oe(t),i=!1,o()}}}function r1(n){let e,t,r,i,o,s=Yo(n[6].path)+"",a,l,u,f=n[6].message+"",c,d,g,h,v,m,p;r=new kt({props:{data:rl}});let y=n[8]===0&&n[0].length>1&&n1(n);function b(){return n[5](n[6])}return{c(){e=ee("tr"),t=ee("td"),ke(r.$$.fragment),i=me(),o=ee("td"),a=qe(s),l=me(),u=ee("td"),c=qe(f),d=me(),g=ee("td"),y&&y.c(),h=me(),T(t,"class","jse-validation-error-icon svelte-1hu2cx3"),T(o,"class","svelte-1hu2cx3"),T(u,"class","svelte-1hu2cx3"),T(g,"class","jse-validation-error-action svelte-1hu2cx3"),T(e,"class","jse-validation-error svelte-1hu2cx3")},m(_,w){fe(_,e,w),B(e,t),Ee(r,t,null),B(e,i),B(e,o),B(o,a),B(e,l),B(e,u),B(u,c),B(e,d),B(e,g),y&&y.m(g,null),B(e,h),v=!0,m||(p=Te(e,"click",b),m=!0)},p(_,w){n=_,(!v||w&1)&&s!==(s=Yo(n[6].path)+"")&&bt(a,s),(!v||w&1)&&f!==(f=n[6].message+"")&&bt(c,f),n[8]===0&&n[0].length>1?y?(y.p(n,w),w&1&&$(y,1)):(y=n1(n),y.c(),$(y,1),y.m(g,null)):y&&(Fe(),te(y,1,1,()=>{y=null}),Ue())},i(_){v||($(r.$$.fragment,_),$(y),v=!0)},o(_){te(r.$$.fragment,_),te(y),v=!1},d(_){_&&ue(e),Oe(r),y&&y.d(),m=!1,p()}}}function Bj(n){let e=!gn(n[0]),t,r,i=e&&t1(n);return{c(){i&&i.c(),t=xt()},m(o,s){i&&i.m(o,s),fe(o,t,s),r=!0},p(o,[s]){s&1&&(e=!gn(o[0])),e?i?(i.p(o,s),s&1&&$(i,1)):(i=t1(o),i.c(),$(i,1),i.m(t.parentNode,t)):i&&(Fe(),te(i,1,1,()=>{i=null}),Ue())},i(o){r||($(i),r=!0)},o(o){te(i),r=!1},d(o){i&&i.d(o),o&&ue(t)}}}function Fj(n,e,t){let{validationErrors:r}=e,{selectError:i}=e,o=!0;function s(){t(2,o=!1)}function a(){t(2,o=!0)}const l=u=>{setTimeout(()=>i(u))};return n.$$set=u=>{"validationErrors"in u&&t(0,r=u.validationErrors),"selectError"in u&&t(1,i=u.selectError)},[r,i,o,s,a,l]}class Ek extends rt{constructor(e){super(),nt(this,e,Fj,Bj,Nt,{validationErrors:0,selectError:1})}}const Uj={prefix:"fas",iconName:"jsoneditor-expand",icon:[512,512,[],null,"M 0,448 V 512 h 512 v -64 z M 0,0 V 64 H 512 V 0 Z M 256,96 128,224 h 256 z M 256,416 384,288 H 128 Z"]},Vj={prefix:"fas",iconName:"jsoneditor-collapse",icon:[512,512,[],null,"m 0,224 v 64 h 512 v -64 z M 256,192 384,64 H 128 Z M 256,320 128,448 h 256 z"]},qj={prefix:"fas",iconName:"jsoneditor-format",icon:[512,512,[],null,"M 0,32 v 64 h 416 v -64 z M 160,160 v 64 h 352 v -64 z M 160,288 v 64 h 288 v -64 z M 0,416 v 64 h 320 v -64 z"]},Hj={prefix:"fas",iconName:"jsoneditor-compact",icon:[512,512,[],null,"M 0,32 v 64 h 512 v -64 z M 0,160 v 64 h 512 v -64 z M 0,288 v 64 h 352 v -64 z"]},zj=n=>({}),i1=n=>({});function o1(n,e,t){const r=n.slice();return r[3]=e[t],r}const Wj=n=>({}),s1=n=>({});function Kj(n){let e,t,r,i,o,s,a,l,u=n[3].icon&&a1(n),f=n[3].text&&l1(n);return{c(){e=ee("button"),u&&u.c(),t=me(),f&&f.c(),T(e,"type","button"),T(e,"class",r="jse-button "+n[3].className+" svelte-31blda"),T(e,"title",i=n[3].title),e.disabled=o=n[3].disabled||!1},m(c,d){fe(c,e,d),u&&u.m(e,null),B(e,t),f&&f.m(e,null),s=!0,a||(l=Te(e,"click",function(){li(n[3].onClick)&&n[3].onClick.apply(this,arguments)}),a=!0)},p(c,d){n=c,n[3].icon?u?(u.p(n,d),d&1&&$(u,1)):(u=a1(n),u.c(),$(u,1),u.m(e,t)):u&&(Fe(),te(u,1,1,()=>{u=null}),Ue()),n[3].text?f?f.p(n,d):(f=l1(n),f.c(),f.m(e,null)):f&&(f.d(1),f=null),(!s||d&1&&r!==(r="jse-button "+n[3].className+" svelte-31blda"))&&T(e,"class",r),(!s||d&1&&i!==(i=n[3].title))&&T(e,"title",i),(!s||d&1&&o!==(o=n[3].disabled||!1))&&(e.disabled=o)},i(c){s||($(u),s=!0)},o(c){te(u),s=!1},d(c){c&&ue(e),u&&u.d(),f&&f.d(),a=!1,l()}}}function Gj(n){let e;return{c(){e=ee("div"),T(e,"class","jse-space svelte-31blda")},m(t,r){fe(t,e,r)},p:Me,i:Me,o:Me,d(t){t&&ue(e)}}}function Yj(n){let e;return{c(){e=ee("div"),T(e,"class","jse-separator svelte-31blda")},m(t,r){fe(t,e,r)},p:Me,i:Me,o:Me,d(t){t&&ue(e)}}}function a1(n){let e,t;return e=new kt({props:{data:n[3].icon}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.data=r[3].icon),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function l1(n){let e=n[3].text+"",t;return{c(){t=qe(e)},m(r,i){fe(r,t,i)},p(r,i){i&1&&e!==(e=r[3].text+"")&&bt(t,e)},d(r){r&&ue(t)}}}function u1(n){let e,t,r,i;const o=[Yj,Gj,Kj],s=[];function a(l,u){return l[3].separator===!0?0:l[3].space===!0?1:2}return e=a(n),t=s[e]=o[e](n),{c(){t.c(),r=xt()},m(l,u){s[e].m(l,u),fe(l,r,u),i=!0},p(l,u){let f=e;e=a(l),e===f?s[e].p(l,u):(Fe(),te(s[f],1,1,()=>{s[f]=null}),Ue(),t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),$(t,1),t.m(r.parentNode,r))},i(l){i||($(t),i=!0)},o(l){te(t),i=!1},d(l){s[e].d(l),l&&ue(r)}}}function Jj(n){let e,t,r,i;const o=n[2].left,s=Zr(o,n,n[1],s1);let a=n[0],l=[];for(let d=0;d<a.length;d+=1)l[d]=u1(o1(n,a,d));const u=d=>te(l[d],1,1,()=>{l[d]=null}),f=n[2].right,c=Zr(f,n,n[1],i1);return{c(){e=ee("div"),s&&s.c(),t=me();for(let d=0;d<l.length;d+=1)l[d].c();r=me(),c&&c.c(),T(e,"class","jse-menu svelte-31blda")},m(d,g){fe(d,e,g),s&&s.m(e,null),B(e,t);for(let h=0;h<l.length;h+=1)l[h].m(e,null);B(e,r),c&&c.m(e,null),i=!0},p(d,[g]){if(s&&s.p&&(!i||g&2)&&$r(s,o,d,d[1],i?Xr(o,d[1],g,Wj):ei(d[1]),s1),g&1){a=d[0];let h;for(h=0;h<a.length;h+=1){const v=o1(d,a,h);l[h]?(l[h].p(v,g),$(l[h],1)):(l[h]=u1(v),l[h].c(),$(l[h],1),l[h].m(e,r))}for(Fe(),h=a.length;h<l.length;h+=1)u(h);Ue()}c&&c.p&&(!i||g&2)&&$r(c,f,d,d[1],i?Xr(f,d[1],g,zj):ei(d[1]),i1)},i(d){if(!i){$(s,d);for(let g=0;g<a.length;g+=1)$(l[g]);$(c,d),i=!0}},o(d){te(s,d),l=l.filter(Boolean);for(let g=0;g<l.length;g+=1)te(l[g]);te(c,d),i=!1},d(d){d&&ue(e),s&&s.d(d),xn(l,d),c&&c.d(d)}}}function Qj(n,e,t){let{$$slots:r={},$$scope:i}=e,{items:o=[]}=e;return n.$$set=s=>{"items"in s&&t(0,o=s.items),"$$scope"in s&&t(1,i=s.$$scope)},[o,i,r]}class iv extends rt{constructor(e){super(),nt(this,e,Qj,Jj,Nt,{items:0})}}function Zj(n){let e,t;return e=new iv({props:{items:n[0]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,[i]){const o={};i&1&&(o.items=r[0]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Xj(n,e,t){let r,i,{readOnly:o=!1}=e,{onFormat:s}=e,{onCompact:a}=e,{onSort:l}=e,{onTransform:u}=e,{onToggleSearch:f}=e,{onUndo:c}=e,{onRedo:d}=e,{canUndo:g}=e,{canRedo:h}=e,{canFormat:v}=e,{canCompact:m}=e,{canSort:p}=e,{canTransform:y}=e,{onRenderMenu:b=Kt}=e;return n.$$set=_=>{"readOnly"in _&&t(1,o=_.readOnly),"onFormat"in _&&t(2,s=_.onFormat),"onCompact"in _&&t(3,a=_.onCompact),"onSort"in _&&t(4,l=_.onSort),"onTransform"in _&&t(5,u=_.onTransform),"onToggleSearch"in _&&t(6,f=_.onToggleSearch),"onUndo"in _&&t(7,c=_.onUndo),"onRedo"in _&&t(8,d=_.onRedo),"canUndo"in _&&t(9,g=_.canUndo),"canRedo"in _&&t(10,h=_.canRedo),"canFormat"in _&&t(11,v=_.canFormat),"canCompact"in _&&t(12,m=_.canCompact),"canSort"in _&&t(13,p=_.canSort),"canTransform"in _&&t(14,y=_.canTransform),"onRenderMenu"in _&&t(15,b=_.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&32766&&t(16,r=o?[{space:!0}]:[{icon:qj,title:"Format JSON: add proper indentation and new lines (Ctrl+I)",className:"jse-format",onClick:s,disabled:o||!v},{icon:Hj,title:"Compact JSON: remove all white spacing and new lines (Ctrl+Shift+I)",className:"jse-compact",onClick:a,disabled:o||!m},{separator:!0},{icon:$0,title:"Sort",className:"jse-sort",onClick:l,disabled:o||!p},{icon:ev,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:u,disabled:o||!y},{icon:tv,title:"Search (Ctrl+F)",className:"jse-search",onClick:f},{separator:!0},{icon:_k,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:c,disabled:!g},{icon:bk,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:d,disabled:!h},{space:!0}]),n.$$.dirty&98304&&t(0,i=b("text",r)||r)},[i,o,s,a,l,u,f,c,d,g,h,v,m,p,y,b,r]}class $j extends rt{constructor(e){super(),nt(this,e,Xj,Zj,Nt,{readOnly:1,onFormat:2,onCompact:3,onSort:4,onTransform:5,onToggleSearch:6,onUndo:7,onRedo:8,canUndo:9,canRedo:10,canFormat:11,canCompact:12,canSort:13,canTransform:14,onRenderMenu:15})}}class nn{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),Ui.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){let r=[];return this.decompose(e,t,r,0),Ui.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Gl(this),o=new Gl(e);for(let s=t,a=t;;){if(i.next(s),o.next(s),s=0,i.lineBreak!=o.lineBreak||i.done!=o.done||i.value!=o.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new Gl(this,e)}iterRange(e,t=this.length){return new Ok(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new kk(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?nn.empty:e.length<=32?new In(e):Ui.from(In.split(e,[]))}}class In extends nn{constructor(e,t=eL(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let o=0;;o++){let s=this.text[o],a=i+s.length;if((t?r:a)>=e)return new tL(i,a,r,s);i=a+1,r++}}decompose(e,t,r,i){let o=e<=0&&t>=this.length?this:new In(c1(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let s=r.pop(),a=qf(o.text,s.text.slice(),0,o.length);if(a.length<=32)r.push(new In(a,s.length+o.length));else{let l=a.length>>1;r.push(new In(a.slice(0,l)),new In(a.slice(l)))}}else r.push(o)}replace(e,t,r){if(!(r instanceof In))return super.replace(e,t,r);let i=qf(this.text,qf(r.text,c1(this.text,0,e)),t),o=this.length+r.length-(t-e);return i.length<=32?new In(i,o):Ui.from(In.split(i,[]),o)}sliceString(e,t=this.length,r=`
`){let i="";for(let o=0,s=0;o<=t&&s<this.text.length;s++){let a=this.text[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&t>o&&(i+=a.slice(Math.max(0,e-o),t-o)),o=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let o of e)r.push(o),i+=o.length+1,r.length==32&&(t.push(new In(r,i)),r=[],i=-1);return i>-1&&t.push(new In(r,i)),t}}class Ui extends nn{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let o=0;;o++){let s=this.children[o],a=i+s.length,l=r+s.lines-1;if((t?l:a)>=e)return s.lineInner(e,t,r,i);i=a+1,r=l+1}}decompose(e,t,r,i){for(let o=0,s=0;s<=t&&o<this.children.length;o++){let a=this.children[o],l=s+a.length;if(e<=l&&t>=s){let u=i&((s<=e?1:0)|(l>=t?2:0));s>=e&&l<=t&&!u?r.push(a):a.decompose(e-s,t-s,r,u)}s=l+1}}replace(e,t,r){if(r.lines<this.lines)for(let i=0,o=0;i<this.children.length;i++){let s=this.children[i],a=o+s.length;if(e>=o&&t<=a){let l=s.replace(e-o,t-o,r),u=this.lines-s.lines+l.lines;if(l.lines<u>>5-1&&l.lines>u>>5+1){let f=this.children.slice();return f[i]=l,new Ui(f,this.length-(t-e)+r.length)}return super.replace(o,a,l)}o=a+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){let i="";for(let o=0,s=0;o<this.children.length&&s<=t;o++){let a=this.children[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&t>s&&(i+=a.sliceString(e-s,t-s,r)),s=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Ui))return 0;let r=0,[i,o,s,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,o+=t){if(i==s||o==a)return r;let l=this.children[i],u=e.children[o];if(l!=u)return r+l.scanIdentical(u,t);r+=l.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let g of e)r+=g.lines;if(r<32){let g=[];for(let h of e)h.flatten(g);return new In(g,t)}let i=Math.max(32,r>>5),o=i<<1,s=i>>1,a=[],l=0,u=-1,f=[];function c(g){let h;if(g.lines>o&&g instanceof Ui)for(let v of g.children)c(v);else g.lines>s&&(l>s||!l)?(d(),a.push(g)):g instanceof In&&l&&(h=f[f.length-1])instanceof In&&g.lines+h.lines<=32?(l+=g.lines,u+=g.length+1,f[f.length-1]=new In(h.text.concat(g.text),h.length+1+g.length)):(l+g.lines>i&&d(),l+=g.lines,u+=g.length+1,f.push(g))}function d(){l!=0&&(a.push(f.length==1?f[0]:Ui.from(f,u)),u=-1,l=f.length=0)}for(let g of e)c(g);return d(),a.length==1?a[0]:new Ui(a,t)}}nn.empty=new In([""],0);function eL(n){let e=-1;for(let t of n)e+=t.length+1;return e}function qf(n,e,t=0,r=1e9){for(let i=0,o=0,s=!0;o<n.length&&i<=r;o++){let a=n[o],l=i+a.length;l>=t&&(l>r&&(a=a.slice(0,r-i)),i<t&&(a=a.slice(t-i)),s?(e[e.length-1]+=a,s=!1):e.push(a)),i=l+1}return e}function c1(n,e,t){return qf(n,[""],e,t)}class Gl{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof In?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],o=this.offsets[r],s=o>>1,a=i instanceof In?i.text.length:i.children.length;if(s==(t>0?a:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((o&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof In){let l=i.text[s+(t<0?-1:0)];if(this.offsets[r]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[s+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof In?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Ok{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new Gl(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class kk{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(nn.prototype[Symbol.iterator]=function(){return this.iter()},Gl.prototype[Symbol.iterator]=Ok.prototype[Symbol.iterator]=kk.prototype[Symbol.iterator]=function(){return this});class tL{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}}let ba="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(n=>n?parseInt(n,36):1);for(let n=1;n<ba.length;n++)ba[n]+=ba[n-1];function nL(n){for(let e=1;e<ba.length;e+=2)if(ba[e]>n)return ba[e-1]<=n;return!1}function f1(n){return n>=127462&&n<=127487}const h1=8205;function zr(n,e,t=!0,r=!0){return(t?Tk:rL)(n,e,r)}function Tk(n,e,t){if(e==n.length)return e;e&&Pk(n.charCodeAt(e))&&Ik(n.charCodeAt(e-1))&&e--;let r=tr(n,e);for(e+=Vr(r);e<n.length;){let i=tr(n,e);if(r==h1||i==h1||t&&nL(i))e+=Vr(i),r=i;else if(f1(i)){let o=0,s=e-2;for(;s>=0&&f1(tr(n,s));)o++,s-=2;if(o%2==0)break;e+=2}else break}return e}function rL(n,e,t){for(;e>0;){let r=Tk(n,e-2,t);if(r<e)return r;e--}return 0}function Pk(n){return n>=56320&&n<57344}function Ik(n){return n>=55296&&n<56320}function tr(n,e){let t=n.charCodeAt(e);if(!Ik(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return Pk(r)?(t-55296<<10)+(r-56320)+65536:t}function ov(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Vr(n){return n<65536?1:2}const ug=/\r\n?|\n/;var dr=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(dr||(dr={}));class Ki{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let o=this.sections[t++],s=this.sections[t++];s<0?(e(r,i,o),i+=o):i+=s,r+=o}}iterChangedRanges(e,t=!1){cg(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new Ki(e)}composeDesc(e){return this.empty?e:e.empty?this:Ak(this,e)}mapDesc(e,t=!1){return e.empty?this:fg(this,e,t)}mapPos(e,t=-1,r=dr.Simple){let i=0,o=0;for(let s=0;s<this.sections.length;){let a=this.sections[s++],l=this.sections[s++],u=i+a;if(l<0){if(u>e)return o+(e-i);o+=a}else{if(r!=dr.Simple&&u>=e&&(r==dr.TrackDel&&i<e&&u>e||r==dr.TrackBefore&&i<e||r==dr.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!a)return e==i||t<0?o:o+l;o+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return o}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let o=this.sections[r++],s=this.sections[r++],a=i+o;if(s>=0&&i<=t&&a>=e)return i<e&&a>t?"cover":!0;i=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Ki(e)}static create(e){return new Ki(e)}}class Vn extends Ki{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return cg(this,(t,r,i,o,s)=>e=e.replace(i,i+(r-t),s),!1),e}mapDesc(e,t=!1){return fg(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,o=0;i<t.length;i+=2){let s=t[i],a=t[i+1];if(a>=0){t[i]=a,t[i+1]=s;let l=i>>1;for(;r.length<l;)r.push(nn.empty);r.push(s?e.slice(o,o+s):nn.empty)}o+=s}return new Vn(t,r)}compose(e){return this.empty?e:e.empty?this:Ak(this,e,!0)}map(e,t=!1){return e.empty?this:fg(this,e,t,!0)}iterChanges(e,t=!1){cg(this,e,t)}get desc(){return Ki.create(this.sections)}filter(e){let t=[],r=[],i=[],o=new fu(this);e:for(let s=0,a=0;;){let l=s==e.length?1e9:e[s++];for(;a<l||a==l&&o.len==0;){if(o.done)break e;let f=Math.min(o.len,l-a);lr(i,f,-1);let c=o.ins==-1?-1:o.off==0?o.ins:0;lr(t,f,c),c>0&&Lo(r,t,o.text),o.forward(f),a+=f}let u=e[s++];for(;a<u;){if(o.done)break e;let f=Math.min(o.len,u-a);lr(t,f,-1),lr(i,f,o.ins==-1?-1:o.off==0?o.ins:0),o.forward(f),a+=f}}return{changes:new Vn(t,r),filtered:Ki.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],o=[],s=0,a=null;function l(f=!1){if(!f&&!i.length)return;s<t&&lr(i,t-s,-1);let c=new Vn(i,o);a=a?a.compose(c.map(a)):c,i=[],o=[],s=0}function u(f){if(Array.isArray(f))for(let c of f)u(c);else if(f instanceof Vn){if(f.length!=t)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${t})`);l(),a=a?a.compose(f.map(a)):f}else{let{from:c,to:d=c,insert:g}=f;if(c>d||c<0||d>t)throw new RangeError(`Invalid change range ${c} to ${d} (in doc of length ${t})`);let h=g?typeof g=="string"?nn.of(g.split(r||ug)):g:nn.empty,v=h.length;if(c==d&&v==0)return;c<s&&l(),c>s&&lr(i,c-s,-1),lr(i,d-c,v),Lo(o,i,h),s=d}}return u(e),l(!a),a}static empty(e){return new Vn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let o=e[i];if(typeof o=="number")t.push(o,-1);else{if(!Array.isArray(o)||typeof o[0]!="number"||o.some((s,a)=>a&&typeof s!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(o.length==1)t.push(o[0],0);else{for(;r.length<i;)r.push(nn.empty);r[i]=nn.of(o.slice(1)),t.push(o[0],r[i].length)}}}return new Vn(t,r)}static createSet(e,t){return new Vn(e,t)}}function lr(n,e,t,r=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:e==0&&n[i]==0?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function Lo(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(nn.empty);n.push(t)}}function cg(n,e,t){let r=n.inserted;for(let i=0,o=0,s=0;s<n.sections.length;){let a=n.sections[s++],l=n.sections[s++];if(l<0)i+=a,o+=a;else{let u=i,f=o,c=nn.empty;for(;u+=a,f+=l,l&&r&&(c=c.append(r[s-2>>1])),!(t||s==n.sections.length||n.sections[s+1]<0);)a=n.sections[s++],l=n.sections[s++];e(i,u,o,f,c),i=u,o=f}}}function fg(n,e,t,r=!1){let i=[],o=r?[]:null,s=new fu(n),a=new fu(e);for(let l=-1;;)if(s.ins==-1&&a.ins==-1){let u=Math.min(s.len,a.len);lr(i,u,-1),s.forward(u),a.forward(u)}else if(a.ins>=0&&(s.ins<0||l==s.i||s.off==0&&(a.len<s.len||a.len==s.len&&!t))){let u=a.len;for(lr(i,a.ins,-1);u;){let f=Math.min(s.len,u);s.ins>=0&&l<s.i&&s.len<=f&&(lr(i,0,s.ins),o&&Lo(o,i,s.text),l=s.i),s.forward(f),u-=f}a.next()}else if(s.ins>=0){let u=0,f=s.len;for(;f;)if(a.ins==-1){let c=Math.min(f,a.len);u+=c,f-=c,a.forward(c)}else if(a.ins==0&&a.len<f)f-=a.len,a.next();else break;lr(i,u,l<s.i?s.ins:0),o&&l<s.i&&Lo(o,i,s.text),l=s.i,s.forward(s.len-f)}else{if(s.done&&a.done)return o?Vn.createSet(i,o):Ki.create(i);throw new Error("Mismatched change set lengths")}}function Ak(n,e,t=!1){let r=[],i=t?[]:null,o=new fu(n),s=new fu(e);for(let a=!1;;){if(o.done&&s.done)return i?Vn.createSet(r,i):Ki.create(r);if(o.ins==0)lr(r,o.len,0,a),o.next();else if(s.len==0&&!s.done)lr(r,0,s.ins,a),i&&Lo(i,r,s.text),s.next();else{if(o.done||s.done)throw new Error("Mismatched change set lengths");{let l=Math.min(o.len2,s.len),u=r.length;if(o.ins==-1){let f=s.ins==-1?-1:s.off?0:s.ins;lr(r,l,f,a),i&&f&&Lo(i,r,s.text)}else s.ins==-1?(lr(r,o.off?0:o.len,l,a),i&&Lo(i,r,o.textBit(l))):(lr(r,o.off?0:o.len,s.off?0:s.ins,a),i&&!s.off&&Lo(i,r,s.text));a=(o.ins>l||s.ins>=0&&s.len>l)&&(a||r.length>u),o.forward2(l),s.forward(l)}}}}class fu{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?nn.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?nn.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ws{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let e=this.flags&3;return e==3?null:e}get goalColumn(){let e=this.flags>>5;return e==33554431?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new ws(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return je.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return je.range(this.anchor,r)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return je.range(e.anchor,e.head)}static create(e,t,r){return new ws(e,t,r)}}class je{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:je.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new je([this.main],0)}addRange(e,t=!0){return je.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,je.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new je(e.ranges.map(t=>ws.fromJSON(t)),e.main)}static single(e,t=e){return new je([je.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let o=e[i];if(o.empty?o.from<=r:o.from<r)return je.normalized(e.slice(),t);r=o.to}return new je(e,t)}static cursor(e,t=0,r,i){return ws.create(e,e,(t==0?0:t<0?4:8)|(r==null?3:Math.min(2,r))|(i!=null?i:33554431)<<5)}static range(e,t,r){let i=(r!=null?r:33554431)<<5;return t<e?ws.create(t,e,16|i|8):ws.create(e,t,i|(t>e?4:0))}static normalized(e,t=0){let r=e[t];e.sort((i,o)=>i.from-o.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let o=e[i],s=e[i-1];if(o.empty?o.from<=s.to:o.from<s.to){let a=s.from,l=Math.max(o.to,s.to);i<=t&&t--,e.splice(--i,2,o.anchor>o.head?je.range(l,a):je.range(a,l))}}return new je(e,t)}}function Rk(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let sv=0;class at{constructor(e,t,r,i,o){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=sv++,this.default=e([]),this.extensions=typeof o=="function"?o(this):o}static define(e={}){return new at(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:av),!!e.static,e.enables)}of(e){return new Hf([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Hf(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Hf(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function av(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class Hf{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=sv++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,o=this.id,s=e[o]>>1,a=this.type==2,l=!1,u=!1,f=[];for(let c of this.dependencies)c=="doc"?l=!0:c=="selection"?u=!0:(((t=e[c.id])!==null&&t!==void 0?t:1)&1)==0&&f.push(e[c.id]);return{create(c){return c.values[s]=r(c),1},update(c,d){if(l&&d.docChanged||u&&(d.docChanged||d.selection)||hg(c,f)){let g=r(c);if(a?!d1(g,c.values[s],i):!i(g,c.values[s]))return c.values[s]=g,1}return 0},reconfigure:(c,d)=>{let g=r(c),h=d.config.address[o];if(h!=null){let v=bh(d,h);if(this.dependencies.every(m=>m instanceof at?d.facet(m)===c.facet(m):m instanceof zn?d.field(m,!1)==c.field(m,!1):!0)||(a?d1(g,v,i):i(g,v)))return c.values[s]=v,0}return c.values[s]=g,1}}}}function d1(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function hg(n,e){let t=!1;for(let r of e)Yl(n,r)&1&&(t=!0);return t}function iL(n,e,t){let r=t.map(l=>n[l.id]),i=t.map(l=>l.type),o=r.filter(l=>!(l&1)),s=n[e.id]>>1;function a(l){let u=[];for(let f=0;f<r.length;f++){let c=bh(l,r[f]);if(i[f]==2)for(let d of c)u.push(d);else u.push(c)}return e.combine(u)}return{create(l){for(let u of r)Yl(l,u);return l.values[s]=a(l),1},update(l,u){if(!hg(l,o))return 0;let f=a(l);return e.compare(f,l.values[s])?0:(l.values[s]=f,1)},reconfigure(l,u){let f=hg(l,r),c=u.config.facets[e.id],d=u.facet(e);if(c&&!f&&av(t,c))return l.values[s]=d,0;let g=a(l);return e.compare(g,d)?(l.values[s]=d,0):(l.values[s]=g,1)}}}const p1=at.define({static:!0});class zn{constructor(e,t,r,i,o){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=o,this.provides=void 0}static define(e){let t=new zn(sv++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(p1).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let o=r.values[t],s=this.updateF(o,i);return this.compareF(o,s)?0:(r.values[t]=s,1)},reconfigure:(r,i)=>i.config.address[this.id]!=null?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}init(e){return[this,p1.of({field:this,create:e})]}get extension(){return this}}const vs={lowest:4,low:3,default:2,high:1,highest:0};function pl(n){return e=>new xk(e,n)}const il={highest:pl(vs.highest),high:pl(vs.high),default:pl(vs.default),low:pl(vs.low),lowest:pl(vs.lowest)};class xk{constructor(e,t){this.inner=e,this.prec=t}}class Bo{of(e){return new dg(this,e)}reconfigure(e){return Bo.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class dg{constructor(e,t){this.compartment=e,this.inner=t}}class _h{constructor(e,t,r,i,o,s){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=o,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],o=Object.create(null),s=new Map;for(let d of oL(e,t,s))d instanceof zn?i.push(d):(o[d.facet.id]||(o[d.facet.id]=[])).push(d);let a=Object.create(null),l=[],u=[];for(let d of i)a[d.id]=u.length<<1,u.push(g=>d.slot(g));let f=r==null?void 0:r.config.facets;for(let d in o){let g=o[d],h=g[0].facet,v=f&&f[d]||[];if(g.every(m=>m.type==0))if(a[h.id]=l.length<<1|1,av(v,g))l.push(r.facet(h));else{let m=h.combine(g.map(p=>p.value));l.push(r&&h.compare(m,r.facet(h))?r.facet(h):m)}else{for(let m of g)m.type==0?(a[m.id]=l.length<<1|1,l.push(m.value)):(a[m.id]=u.length<<1,u.push(p=>m.dynamicSlot(p)));a[h.id]=u.length<<1,u.push(m=>iL(m,h,g))}}let c=u.map(d=>d(a));return new _h(e,s,c,a,l,o)}}function oL(n,e,t){let r=[[],[],[],[],[]],i=new Map;function o(s,a){let l=i.get(s);if(l!=null){if(l<=a)return;let u=r[l].indexOf(s);u>-1&&r[l].splice(u,1),s instanceof dg&&t.delete(s.compartment)}if(i.set(s,a),Array.isArray(s))for(let u of s)o(u,a);else if(s instanceof dg){if(t.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(s.compartment)||s.inner;t.set(s.compartment,u),o(u,a)}else if(s instanceof xk)o(s.inner,s.prec);else if(s instanceof zn)r[a].push(s),s.provides&&o(s.provides,a);else if(s instanceof Hf)r[a].push(s),s.facet.extensions&&o(s.facet.extensions,vs.default);else{let u=s.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(u,a)}}return o(n,vs.default),r.reduce((s,a)=>s.concat(a))}function Yl(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function bh(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const Nk=at.define(),Mk=at.define({combine:n=>n.some(e=>e),static:!0}),Dk=at.define({combine:n=>n.length?n[0]:void 0,static:!0}),jk=at.define(),Lk=at.define(),Bk=at.define(),Fk=at.define({combine:n=>n.length?n[0]:!1});class Js{constructor(e,t){this.type=e,this.value=t}static define(){return new sL}}class sL{of(e){return new Js(this,e)}}class aL{constructor(e){this.map=e}of(e){return new Pt(this,e)}}class Pt{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new Pt(this.type,t)}is(e){return this.type==e}static define(e={}){return new aL(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let o=i.map(t);o&&r.push(o)}return r}}Pt.reconfigure=Pt.define();Pt.appendConfig=Pt.define();class Hn{constructor(e,t,r,i,o,s){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=o,this.scrollIntoView=s,this._doc=null,this._state=null,r&&Rk(r,t.newLength),o.some(a=>a.type==Hn.time)||(this.annotations=o.concat(Hn.time.of(Date.now())))}static create(e,t,r,i,o,s){return new Hn(e,t,r,i,o,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Hn.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Hn.time=Js.define();Hn.userEvent=Js.define();Hn.addToHistory=Js.define();Hn.remote=Js.define();function lL(n,e){let t=[];for(let r=0,i=0;;){let o,s;if(r<n.length&&(i==e.length||e[i]>=n[r]))o=n[r++],s=n[r++];else if(i<e.length)o=e[i++],s=e[i++];else return t;!t.length||t[t.length-1]<o?t.push(o,s):t[t.length-1]<s&&(t[t.length-1]=s)}}function Uk(n,e,t){var r;let i,o,s;return t?(i=e.changes,o=Vn.empty(e.changes.length),s=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),o=n.changes.mapDesc(e.changes,!0),s=n.changes.compose(i)),{changes:s,selection:e.selection?e.selection.map(o):(r=n.selection)===null||r===void 0?void 0:r.map(i),effects:Pt.mapEffects(n.effects,i).concat(Pt.mapEffects(e.effects,o)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function pg(n,e,t){let r=e.selection,i=wa(e.annotations);return e.userEvent&&(i=i.concat(Hn.userEvent.of(e.userEvent))),{changes:e.changes instanceof Vn?e.changes:Vn.of(e.changes||[],t,n.facet(Dk)),selection:r&&(r instanceof je?r:je.single(r.anchor,r.head)),effects:wa(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function Vk(n,e,t){let r=pg(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let o=1;o<e.length;o++){e[o].filter===!1&&(t=!1);let s=!!e[o].sequential;r=Uk(r,pg(n,e[o],s?r.changes.newLength:n.doc.length),s)}let i=Hn.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return cL(t?uL(i):i)}function uL(n){let e=n.startState,t=!0;for(let i of e.facet(jk)){let o=i(n);if(o===!1){t=!1;break}Array.isArray(o)&&(t=t===!0?o:lL(t,o))}if(t!==!0){let i,o;if(t===!1)o=n.changes.invertedDesc,i=Vn.empty(e.doc.length);else{let s=n.changes.filter(t);i=s.changes,o=s.filtered.mapDesc(s.changes).invertedDesc}n=Hn.create(e,i,n.selection&&n.selection.map(o),Pt.mapEffects(n.effects,o),n.annotations,n.scrollIntoView)}let r=e.facet(Lk);for(let i=r.length-1;i>=0;i--){let o=r[i](n);o instanceof Hn?n=o:Array.isArray(o)&&o.length==1&&o[0]instanceof Hn?n=o[0]:n=Vk(e,wa(o),!1)}return n}function cL(n){let e=n.startState,t=e.facet(Bk),r=n;for(let i=t.length-1;i>=0;i--){let o=t[i](n);o&&Object.keys(o).length&&(r=Uk(n,pg(e,o,n.changes.newLength),!0))}return r==n?n:Hn.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const fL=[];function wa(n){return n==null?fL:Array.isArray(n)?n:[n]}var mr=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(mr||(mr={}));const hL=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let mg;try{mg=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function dL(n){if(mg)return mg.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||hL.test(t)))return!0}return!1}function pL(n){return e=>{if(!/\S/.test(e))return mr.Space;if(dL(e))return mr.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return mr.Word;return mr.Other}}class Lt{constructor(e,t,r,i,o,s){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=o,s&&(s._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Yl(this,a<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return Yl(this,r),bh(this,r)}update(...e){return Vk(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:i}=t;for(let s of e.effects)s.is(Bo.reconfigure)?(t&&(i=new Map,t.compartments.forEach((a,l)=>i.set(l,a)),t=null),i.set(s.value.compartment,s.value.extension)):s.is(Pt.reconfigure)?(t=null,r=s.value):s.is(Pt.appendConfig)&&(t=null,r=wa(r).concat(s.value));let o;t?o=e.startState.values.slice():(t=_h.resolve(r,i,this),o=new Lt(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(a,l)=>l.reconfigure(a,this),null).values),new Lt(t,e.newDoc,e.newSelection,o,(s,a)=>a.update(s,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:je.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),o=[r.range],s=wa(r.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),u=this.changes(l.changes),f=u.map(i);for(let d=0;d<a;d++)o[d]=o[d].map(f);let c=i.mapDesc(u,!0);o.push(l.range.map(c)),i=i.compose(f),s=Pt.mapEffects(s,f).concat(Pt.mapEffects(wa(l.effects),c))}return{changes:i,selection:je.create(o,t.mainIndex),effects:s}}changes(e=[]){return e instanceof Vn?e:Vn.of(e,this.doc.length,this.facet(Lt.lineSeparator))}toText(e){return nn.of(e.split(this.facet(Lt.lineSeparator)||ug))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Yl(this,t),bh(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof zn&&this.config.address[i.id]!=null&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let o in r)if(Object.prototype.hasOwnProperty.call(e,o)){let s=r[o],a=e[o];i.push(s.init(l=>s.spec.fromJSON(a,l)))}}return Lt.create({doc:e.doc,selection:je.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=_h.resolve(e.extensions||[],new Map),r=e.doc instanceof nn?e.doc:nn.of((e.doc||"").split(t.staticFacet(Lt.lineSeparator)||ug)),i=e.selection?e.selection instanceof je?e.selection:je.single(e.selection.anchor,e.selection.head):je.single(0);return Rk(i,r.length),t.staticFacet(Mk)||(i=i.asSingle()),new Lt(t,r,i,t.dynamicSlots.map(()=>null),(o,s)=>s.create(o),null)}get tabSize(){return this.facet(Lt.tabSize)}get lineBreak(){return this.facet(Lt.lineSeparator)||`
`}get readOnly(){return this.facet(Fk)}phrase(e,...t){for(let r of this.facet(Lt.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let o=+(i||1);return!o||o>t.length?r:t[o-1]})),e}languageDataAt(e,t,r=-1){let i=[];for(let o of this.facet(Nk))for(let s of o(this,t,r))Object.prototype.hasOwnProperty.call(s,e)&&i.push(s[e]);return i}charCategorizer(e){return pL(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),o=this.charCategorizer(e),s=e-r,a=e-r;for(;s>0;){let l=zr(t,s,!1);if(o(t.slice(l,s))!=mr.Word)break;s=l}for(;a<i;){let l=zr(t,a);if(o(t.slice(a,l))!=mr.Word)break;a=l}return s==a?null:je.range(s+r,a+r)}}Lt.allowMultipleSelections=Mk;Lt.tabSize=at.define({combine:n=>n.length?n[0]:4});Lt.lineSeparator=Dk;Lt.readOnly=Fk;Lt.phrases=at.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(i=>n[i]==e[i])}});Lt.languageData=Nk;Lt.changeFilter=jk;Lt.transactionFilter=Lk;Lt.transactionExtender=Bk;Bo.reconfigure=Pt.define();function Xi(n,e,t={}){let r={};for(let i of n)for(let o of Object.keys(i)){let s=i[o],a=r[o];if(a===void 0)r[o]=s;else if(!(a===s||s===void 0))if(Object.hasOwnProperty.call(t,o))r[o]=t[o](a,s);else throw new Error("Config merge conflict for field "+o)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}class Ls{eq(e){return this==e}range(e,t=e){return hu.create(e,t,this)}}Ls.prototype.startSide=Ls.prototype.endSide=0;Ls.prototype.point=!1;Ls.prototype.mapMode=dr.TrackDel;class hu{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new hu(e,t,r)}}function gg(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class lv{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let o=r?this.to:this.from;for(let s=i,a=o.length;;){if(s==a)return s;let l=s+a>>1,u=o[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-t;if(l==s)return u>=0?s:a;u>=0?a=l:s=l+1}}between(e,t,r,i){for(let o=this.findIndex(t,-1e9,!0),s=this.findIndex(r,1e9,!1,o);o<s;o++)if(i(this.from[o]+e,this.to[o]+e,this.value[o])===!1)return!1}map(e,t){let r=[],i=[],o=[],s=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],f=this.from[l]+e,c=this.to[l]+e,d,g;if(f==c){let h=t.mapPos(f,u.startSide,u.mapMode);if(h==null||(d=g=h,u.startSide!=u.endSide&&(g=t.mapPos(f,u.endSide),g<d)))continue}else if(d=t.mapPos(f,u.startSide),g=t.mapPos(c,u.endSide),d>g||d==g&&u.startSide>0&&u.endSide<=0)continue;(g-d||u.endSide-u.startSide)<0||(s<0&&(s=d),u.point&&(a=Math.max(a,g-d)),r.push(u),i.push(d-s),o.push(g-s))}return{mapped:r.length?new lv(i,o,r,a):null,pos:s}}}class Jt{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new Jt(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:o=this.length}=e,s=e.filter;if(t.length==0&&!s)return this;if(r&&(t=t.slice().sort(gg)),this.isEmpty)return t.length?Jt.of(t):this;let a=new qk(this,null,-1).goto(0),l=0,u=[],f=new Jo;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let c=t[l++];f.addInner(c.from,c.to,c.value)||u.push(c)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!s||i>this.chunkEnd(a.chunkIndex)||o<this.chunkPos[a.chunkIndex])&&f.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!s||i>a.to||o<a.from||s(a.from,a.to,a.value))&&(f.addInner(a.from,a.to,a.value)||u.push(hu.create(a.from,a.to,a.value))),a.next());return f.finishInner(this.nextLayer.isEmpty&&!u.length?Jt.empty:this.nextLayer.update({add:u,filter:s,filterFrom:i,filterTo:o}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],l=this.chunk[s],u=e.touchesRange(a,a+l.length);if(u===!1)i=Math.max(i,l.maxPoint),t.push(l),r.push(e.mapPos(a));else if(u===!0){let{mapped:f,pos:c}=l.map(a,e);f&&(i=Math.max(i,f.maxPoint),t.push(f),r.push(c))}}let o=this.nextLayer.map(e);return t.length==0?o:new Jt(r,t,o||Jt.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let o=this.chunkPos[i],s=this.chunk[i];if(t>=o&&e<=o+s.length&&s.between(o,e-o,t-o,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return du.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return du.from(e).goto(t)}static compare(e,t,r,i,o=-1){let s=e.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=o),a=t.filter(c=>c.maxPoint>0||!c.isEmpty&&c.maxPoint>=o),l=m1(s,a,r),u=new ml(s,l,o),f=new ml(a,l,o);r.iterGaps((c,d,g)=>g1(u,c,f,d,g,i)),r.empty&&r.length==0&&g1(u,0,f,0,0,i)}static eq(e,t,r=0,i){i==null&&(i=1e9);let o=e.filter(f=>!f.isEmpty&&t.indexOf(f)<0),s=t.filter(f=>!f.isEmpty&&e.indexOf(f)<0);if(o.length!=s.length)return!1;if(!o.length)return!0;let a=m1(o,s),l=new ml(o,a,0).goto(r),u=new ml(s,a,0).goto(r);for(;;){if(l.to!=u.to||!vg(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,t,r,i,o=-1){let s=new ml(e,null,o).goto(t),a=t,l=s.openStart;for(;;){let u=Math.min(s.to,r);if(s.point?(i.point(a,u,s.point,s.activeForPoint(s.to),l,s.pointRank),l=s.openEnd(u)+(s.to>u?1:0)):u>a&&(i.span(a,u,s.active,l),l=s.openEnd(u)),s.to>r)break;a=s.to,s.next()}return l}static of(e,t=!1){let r=new Jo;for(let i of e instanceof hu?[e]:t?mL(e):e)r.add(i.from,i.to,i.value);return r.finish()}}Jt.empty=new Jt([],[],null,-1);function mL(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(gg(e,r)>0)return n.slice().sort(gg);e=r}return n}Jt.empty.nextLayer=Jt.empty;class Jo{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new lv(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new Jo)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Jt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Jt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function m1(n,e,t){let r=new Map;for(let o of n)for(let s=0;s<o.chunk.length;s++)o.chunk[s].maxPoint<=0&&r.set(o.chunk[s],o.chunkPos[s]);let i=new Set;for(let o of e)for(let s=0;s<o.chunk.length;s++){let a=r.get(o.chunk[s]);a!=null&&(t?t.mapPos(a):a)==o.chunkPos[s]&&!(t!=null&&t.touchesRange(a,a+o.chunk[s].length))&&i.add(o.chunk[s])}return i}class qk{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class du{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let o=0;o<e.length;o++)for(let s=e[o];!s.isEmpty;s=s.nextLayer)s.maxPoint>=r&&i.push(new qk(s,t,r,o));return i.length==1?i[0]:new du(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)Cp(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)Cp(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Cp(this.heap,0)}}}function Cp(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}class ml{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=du.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){wc(this.active,e),wc(this.activeTo,e),wc(this.activeRank,e),this.minActive=v1(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:o}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=o;)t++;Sc(this.active,t,r),Sc(this.activeTo,t,i),Sc(this.activeRank,t,o),e&&Sc(e,t,this.cursor.from),this.minActive=v1(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null,i=0;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>e){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),r&&wc(r,o)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.from<e&&this.cursor.to>e&&i++,this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.from<e&&(i=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){let o=0;for(;o<r.length&&r[o]<e;)o++;this.openStart=o+i}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function g1(n,e,t,r,i,o){n.goto(e),t.goto(r);let s=r+i,a=r,l=r-e;for(;;){let u=n.to+l-t.to||n.endSide-t.endSide,f=u<0?n.to+l:t.to,c=Math.min(f,s);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&vg(n.activeForPoint(n.to+l),t.activeForPoint(t.to))||o.comparePoint(a,c,n.point,t.point):c>a&&!vg(n.active,t.active)&&o.compareRange(a,c,n.active,t.active),f>s)break;a=f,u<=0&&n.next(),u>=0&&t.next()}}function vg(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function wc(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function Sc(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function v1(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function Uu(n,e,t=n.length){let r=0;for(let i=0;i<t;)n.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=zr(n,i));return r}function yg(n,e,t,r){for(let i=0,o=0;;){if(o>=e)return i;if(i==n.length)break;o+=n.charCodeAt(i)==9?t-o%t:1,i=zr(n,i)}return r===!0?-1:n.length}const _g="\u037C",y1=typeof Symbol>"u"?"__"+_g:Symbol.for(_g),bg=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),_1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Qo{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(s){return/^@/.test(s)?[s]:s.split(/,\s*/)}function o(s,a,l,u){let f=[],c=/^@(\w+)\b/.exec(s[0]),d=c&&c[1]=="keyframes";if(c&&a==null)return l.push(s[0]+";");for(let g in a){let h=a[g];if(/&/.test(g))o(g.split(/,\s*/).map(v=>s.map(m=>v.replace(/&/,m))).reduce((v,m)=>v.concat(m)),h,l);else if(h&&typeof h=="object"){if(!c)throw new RangeError("The value of a property ("+g+") should be a primitive value.");o(i(g),h,f,d)}else h!=null&&f.push(g.replace(/_.*/,"").replace(/[A-Z]/g,v=>"-"+v.toLowerCase())+": "+h+";")}(f.length||d)&&l.push((r&&!c&&!u?s.map(r):s).join(", ")+" {"+f.join(" ")+"}")}for(let s in e)o(i(s),e[s],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=_1[y1]||1;return _1[y1]=e+1,_g+e.toString(36)}static mount(e,t){(e[bg]||new gL(e)).mount(Array.isArray(t)?t:[t])}}let Cc=null;class gL{constructor(e){if(!e.head&&e.adoptedStyleSheets&&typeof CSSStyleSheet<"u"){if(Cc)return e.adoptedStyleSheets=[Cc.sheet].concat(e.adoptedStyleSheets),e[bg]=Cc;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),Cc=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[bg]=this}mount(e){let t=this.sheet,r=0,i=0;for(let o=0;o<e.length;o++){let s=e[o],a=this.modules.indexOf(s);if(a<i&&a>-1&&(this.modules.splice(a,1),i--,a=-1),a==-1){if(this.modules.splice(i++,0,s),t)for(let l=0;l<s.rules.length;l++)t.insertRule(s.rules[l],r++)}else{for(;i<a;)r+=this.modules[i++].rules.length;r+=s.rules.length,i++}}if(!t){let o="";for(let s=0;s<this.modules.length;s++)o+=this.modules[s].getRules()+`
`;this.styleTag.textContent=o}}}var Zo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ma={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},b1=typeof navigator<"u"&&/Chrome\/(\d+)/.exec(navigator.userAgent);typeof navigator<"u"&&/Gecko\/\d+/.test(navigator.userAgent);var vL=typeof navigator<"u"&&/Mac/.test(navigator.platform),yL=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),_L=vL||b1&&+b1[1]<57;for(var nr=0;nr<10;nr++)Zo[48+nr]=Zo[96+nr]=String(nr);for(var nr=1;nr<=24;nr++)Zo[nr+111]="F"+nr;for(var nr=65;nr<=90;nr++)Zo[nr]=String.fromCharCode(nr+32),Ma[nr]=String.fromCharCode(nr);for(var Ep in Zo)Ma.hasOwnProperty(Ep)||(Ma[Ep]=Zo[Ep]);function bL(n){var e=_L&&(n.ctrlKey||n.altKey||n.metaKey)||yL&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Ma:Zo)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function wh(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Da(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function wL(){let n=document.activeElement;for(;n&&n.shadowRoot;)n=n.shadowRoot.activeElement;return n}function zf(n,e){if(!e.anchorNode)return!1;try{return Da(n,e.anchorNode)}catch{return!1}}function pu(n){return n.nodeType==3?ja(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Sh(n,e,t,r){return t?w1(n,e,t,r,-1)||w1(n,e,t,r,1):!1}function Ch(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function w1(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:mu(n))){if(n.nodeName=="DIV")return!1;let o=n.parentNode;if(!o||o.nodeType!=1)return!1;e=Ch(n)+(i<0?0:1),n=o}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?mu(n):0}else return!1}}function mu(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}const Hk={left:0,right:0,top:0,bottom:0};function Rd(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function SL(n){return{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function CL(n,e,t,r,i,o,s,a){let l=n.ownerDocument,u=l.defaultView;for(let f=n;f;)if(f.nodeType==1){let c,d=f==l.body;if(d)c=SL(u);else{if(f.scrollHeight<=f.clientHeight&&f.scrollWidth<=f.clientWidth){f=f.parentNode;continue}let v=f.getBoundingClientRect();c={left:v.left,right:v.left+f.clientWidth,top:v.top,bottom:v.top+f.clientHeight}}let g=0,h=0;if(i=="nearest")e.top<c.top?(h=-(c.top-e.top+s),t>0&&e.bottom>c.bottom+h&&(h=e.bottom-c.bottom+h+s)):e.bottom>c.bottom&&(h=e.bottom-c.bottom+s,t<0&&e.top-h<c.top&&(h=-(c.top+h-e.top+s)));else{let v=e.bottom-e.top,m=c.bottom-c.top;h=(i=="center"&&v<=m?e.top+v/2-m/2:i=="start"||i=="center"&&t<0?e.top-s:e.bottom-m+s)-c.top}if(r=="nearest"?e.left<c.left?(g=-(c.left-e.left+o),t>0&&e.right>c.right+g&&(g=e.right-c.right+g+o)):e.right>c.right&&(g=e.right-c.right+o,t<0&&e.left<c.left+g&&(g=-(c.left+g-e.left+o))):g=(r=="center"?e.left+(e.right-e.left)/2-(c.right-c.left)/2:r=="start"==a?e.left-o:e.right-(c.right-c.left)+o)-c.left,g||h)if(d)u.scrollBy(g,h);else{if(h){let v=f.scrollTop;f.scrollTop+=h,h=f.scrollTop-v}if(g){let v=f.scrollLeft;f.scrollLeft+=g,g=f.scrollLeft-v}e={left:e.left-g,top:e.top-h,right:e.right-g,bottom:e.bottom-h}}if(d)break;f=f.assignedSlot||f.parentNode,r=i="nearest"}else if(f.nodeType==11)f=f.host;else break}class EL{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}}let ra=null;function zk(n){if(n.setActive)return n.setActive();if(ra)return n.focus(ra);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(ra==null?{get preventScroll(){return ra={preventScroll:!0},!0}}:void 0),!ra){ra=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],o=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=o&&(r.scrollLeft=o)}}}let S1;function ja(n,e,t=e){let r=S1||(S1=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function Jl(n,e,t){let r={key:e,code:e,keyCode:t,which:t,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,n.dispatchEvent(i);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,n.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function OL(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function Wk(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function kL(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(;;)if(r){if(t.nodeType!=1)return!1;let i=t.childNodes[r-1];i.contentEditable=="false"?r--:(t=i,r=mu(t))}else{if(t==n)return!0;r=Ch(t),t=t.parentNode}}class or{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new or(e.parentNode,Ch(e),t)}static after(e,t){return new or(e.parentNode,Ch(e)+1,t)}}const uv=[];class vn{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,r=null,i;for(let o of this.children){if(o.dirty){if(!o.dom&&(i=r?r.nextSibling:t.firstChild)){let s=vn.get(i);(!s||!s.parent&&s.constructor==o.constructor)&&o.reuseDOM(i)}o.sync(e),o.dirty=0}if(i=r?r.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&i!=o.dom&&(e.written=!0),o.dom.parentNode==t)for(;i&&i!=o.dom;)i=C1(i);else t.insertBefore(o.dom,i);r=o.dom}for(i=r?r.nextSibling:t.firstChild,i&&e&&e.node==t&&(e.written=!0);i;)i=C1(i)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=mu(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;i==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?i=-1:i=1),e=o}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!vn.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,o=0;;i++){let s=this.children[i];if(s.dom==r)return o;o+=s.length+s.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,o=-1,s=-1,a=-1;for(let l=0,u=r,f=r;l<this.children.length;l++){let c=this.children[l],d=u+c.length;if(u<e&&d>t)return c.domBoundsAround(e,t,u);if(d>=e&&i==-1&&(i=l,o=u),u>t&&c.dom.parentNode==this.dom){s=l,a=f;break}f=d,u=d+c.breakAfter}return{from:o,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=uv){this.markDirty();for(let i=e;i<t;i++){let o=this.children[i];o.parent==this&&o.destroy()}this.children.splice(e,t-e,...r);for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Kk(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,r,i,o,s){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}vn.prototype.breakAfter=0;function C1(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Kk{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function Gk(n,e,t,r,i,o,s,a,l){let{children:u}=n,f=u.length?u[e]:null,c=o.length?o[o.length-1]:null,d=c?c.breakAfter:s;if(!(e==r&&f&&!s&&!d&&o.length<2&&f.merge(t,i,o.length?c:null,t==0,a,l))){if(r<u.length){let g=u[r];g&&i<g.length?(e==r&&(g=g.split(i),i=0),!d&&c&&g.merge(0,i,c,!0,0,l)?o[o.length-1]=g:(i&&g.merge(0,i,null,!1,0,l),o.push(g))):g!=null&&g.breakAfter&&(c?c.breakAfter=1:s=1),r++}for(f&&(f.breakAfter=s,t>0&&(!s&&o.length&&f.merge(t,f.length,o[0],!1,a,0)?f.breakAfter=o.shift().breakAfter:(t<f.length||f.children.length&&f.children[f.children.length-1].length==0)&&f.merge(t,f.length,null,!1,a,0),e++));e<r&&o.length;)if(u[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:a;else if(u[e].become(o[0]))e++,o.shift(),a=o.length?0:l;else break;!o.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,a,l)&&e--,(e<r||o.length)&&n.replaceChildren(e,r,o)}}function Yk(n,e,t,r,i,o){let s=n.childCursor(),{i:a,off:l}=s.findPos(t,1),{i:u,off:f}=s.findPos(e,-1),c=e-t;for(let d of r)c+=d.length;n.length+=c,Gk(n,u,f,a,l,r,0,i,o)}let Hr=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},wg=typeof document<"u"?document:{documentElement:{style:{}}};const Sg=/Edge\/(\d+)/.exec(Hr.userAgent),Jk=/MSIE \d/.test(Hr.userAgent),Cg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Hr.userAgent),xd=!!(Jk||Cg||Sg),E1=!xd&&/gecko\/(\d+)/i.test(Hr.userAgent),Op=!xd&&/Chrome\/(\d+)/.exec(Hr.userAgent),O1="webkitFontSmoothing"in wg.documentElement.style,Qk=!xd&&/Apple Computer/.test(Hr.vendor),k1=Qk&&(/Mobile\/\w+/.test(Hr.userAgent)||Hr.maxTouchPoints>2);var st={mac:k1||/Mac/.test(Hr.platform),windows:/Win/.test(Hr.platform),linux:/Linux|X11/.test(Hr.platform),ie:xd,ie_version:Jk?wg.documentMode||6:Cg?+Cg[1]:Sg?+Sg[1]:0,gecko:E1,gecko_version:E1?+(/Firefox\/(\d+)/.exec(Hr.userAgent)||[0,0])[1]:0,chrome:!!Op,chrome_version:Op?+Op[1]:0,ios:k1,android:/Android\b/.test(Hr.userAgent),webkit:O1,safari:Qk,webkit_version:O1?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:wg.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const TL=256;class Xo extends vn{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return r&&(!(r instanceof Xo)||this.length-(t-e)+r.length>TL)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Xo(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new or(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Eg(this.dom,e,t)}}class Ji extends vn{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(Wk(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,r,i,o,s){return r&&(!(r instanceof Ji&&r.mark.eq(this.mark))||e&&o<=0||t<this.length&&s<=0)?!1:(Yk(this,e,t,r?r.children:[],o-1,s-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,o=0;for(let a of this.children){let l=r+a.length;l>e&&t.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=o),r=l,o++}let s=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new Ji(this.mark,t,s)}domAtPos(e){return $k(this.dom,this.children,e)}coordsAt(e,t){return tT(this,e,t)}}function Eg(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,o=e,s=0;e==0&&t<0||e==r&&t>=0?st.chrome||st.gecko||(e?(i--,s=1):o<r&&(o++,s=-1)):t<0?i--:o<r&&o++;let a=ja(n,i,o).getClientRects();if(!a.length)return Hk;let l=a[(s?s<0:t>=0)?0:a.length-1];return st.safari&&!s&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),s?Rd(l,s<0):l||null}class Fo extends vn{constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}static create(e,t,r){return new(e.customView||Fo)(e,t,r)}split(e){let t=Fo.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,r,i,o,s){return r&&(!(r instanceof Fo)||!this.widget.compare(r.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof Fo&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return nn.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):nn.empty}domAtPos(e){return e==0?or.before(this.dom):or.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.dom.getClientRects(),i=null;if(!r.length)return Hk;for(let o=e>0?r.length-1:0;i=r[o],!(e>0?o==0:o==r.length-1||i.top<i.bottom);o+=e>0?-1:1);return e==0&&t>0||e==this.length&&t<=0?i:Rd(i,e==0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Zk extends Fo{domAtPos(e){let{topView:t,text:r}=this.widget;return t?Og(e,0,t,r,(i,o)=>i.domAtPos(o),i=>new or(r,Math.min(i,r.nodeValue.length))):new or(r,Math.min(e,r.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:r,text:i}=this.widget;return r?Xk(e,t,r,i):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:r,text:i}=this.widget;return r?Og(e,t,r,i,(o,s,a)=>o.coordsAt(s,a),(o,s)=>Eg(i,o,s)):Eg(i,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}}function Og(n,e,t,r,i,o){if(t instanceof Ji){for(let s of t.children){let a=Da(s.dom,r),l=a?r.nodeValue.length:s.length;if(n<l||n==l&&s.getSide()<=0)return a?Og(n,e,s,r,i,o):i(s,n,e);n-=l}return i(t,t.length,-1)}else return t.dom==r?o(n,e):i(t,n,e)}function Xk(n,e,t,r){if(t instanceof Ji)for(let i of t.children){let o=0,s=Da(i.dom,r);if(Da(i.dom,n))return o+(s?Xk(n,e,i,r):i.localPosFromDOM(n,e));o+=s?r.nodeValue.length:i.length}else if(t.dom==r)return Math.min(e,r.nodeValue.length);return t.localPosFromDOM(n,e)}class La extends vn{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof La&&e.side==this.side}split(){return new La(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return or.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),r=PL(this,this.side>0?-1:1);return r&&r.top<t.bottom&&r.bottom>t.top?{left:t.left,right:t.right,top:r.top,bottom:r.bottom}:t}get overrideDOMText(){return nn.empty}}Xo.prototype.children=Fo.prototype.children=La.prototype.children=uv;function PL(n,e){let t=n.parent,r=t?t.children.indexOf(n):-1;for(;t&&r>=0;)if(e<0?r>0:r<t.children.length){let i=t.children[r+e];if(i instanceof Xo){let o=i.coordsAt(e<0?i.length:0,e);if(o)return o}r+=e}else if(t instanceof Ji&&t.parent)r=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let i=t.dom.lastChild;if(i&&i.nodeName=="BR")return i.getClientRects()[0];break}}function $k(n,e,t){let r=0;for(let i=0;r<e.length;r++){let o=e[r],s=i+o.length;if(!(s==i&&o.getSide()<=0)){if(t>i&&t<s&&o.dom.parentNode==n)return o.domAtPos(t-i);if(t<=i)break;i=s}}for(;r>0;r--){let i=e[r-1].dom;if(i.parentNode==n)return or.after(i)}return new or(n,0)}function eT(n,e,t){let r,{children:i}=n;t>0&&e instanceof Ji&&i.length&&(r=i[i.length-1])instanceof Ji&&r.mark.eq(e.mark)?eT(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function tT(n,e,t){for(let o=0,s=0;s<n.children.length;s++){let a=n.children[s],l=o+a.length,u;if((t<=0||l==n.length||a.getSide()>0?l>=e:l>e)&&(e<l||s+1==n.children.length||(u=n.children[s+1]).length||u.getSide()>0)){let f=0;if(l==o){if(a.getSide()<=0)continue;f=t=-a.getSide()}let c=a.coordsAt(Math.max(0,e-o),t);return f&&c?Rd(c,t<0):c}o=l}let r=n.dom.lastChild;if(!r)return n.dom.getBoundingClientRect();let i=pu(r);return i[i.length-1]||null}function kg(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}function cv(n,e){if(n==e)return!0;if(!n||!e)return!1;let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i of t)if(r.indexOf(i)==-1||n[i]!==e[i])return!1;return!0}function Tg(n,e,t){let r=null;if(e)for(let i in e)t&&i in t||n.removeAttribute(r=i);if(t)for(let i in t)e&&e[i]==t[i]||n.setAttribute(r=i,t[i]);return!!r}class os{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}var un=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(un||(un={}));class pt extends Ls{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Nd(e)}static widget(e){let t=e.side||0,r=!!e.block;return t+=r?t>0?3e8:-4e8:t>0?1e8:-1e8,new Bs(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:o,end:s}=nT(e,t);r=(o?t?-3e8:-1:5e8)-1,i=(s?t?2e8:1:-6e8)+1}return new Bs(e,r,i,t,e.widget||null,!0)}static line(e){return new Vu(e)}static set(e,t=!1){return Jt.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}pt.none=Jt.empty;class Nd extends pt{constructor(e){let{start:t,end:r}=nT(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof Nd&&this.tagName==e.tagName&&this.class==e.class&&cv(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Nd.prototype.point=!1;class Vu extends pt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Vu&&cv(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Vu.prototype.mapMode=dr.TrackBefore;Vu.prototype.point=!0;class Bs extends pt{constructor(e,t,r,i,o,s){super(t,r,o,e),this.block=i,this.isReplace=s,this.mapMode=i?t<=0?dr.TrackBefore:dr.TrackAfter:dr.TrackDel}get type(){return this.startSide<this.endSide?un.WidgetRange:this.startSide<=0?un.WidgetBefore:un.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof Bs&&IL(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Bs.prototype.point=!0;function nT(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t!=null?t:e,end:r!=null?r:e}}function IL(n,e){return n==e||!!(n&&e&&n.compare(e))}function Pg(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}class gr extends vn{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,o,s){if(r){if(!(r instanceof gr))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),Yk(this,e,t,r?r.children:[],o,s),!0}split(e){let t=new gr;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let o=r;o<this.children.length;o++)t.append(this.children[o],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){!this.dom||(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){cv(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){eT(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=kg(t,this.attrs||{})),r&&(this.attrs=kg({class:r},this.attrs||{}))}domAtPos(e){return $k(this.dom,this.children,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?this.dirty&4&&(Wk(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Tg(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let r=this.dom.lastChild;for(;r&&vn.get(r)instanceof Ji;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((t=vn.get(r))===null||t===void 0?void 0:t.isEditable)==!1&&(!st.ios||!this.children.some(i=>i instanceof Xo))){let i=document.createElement("BR");i.cmIgnore=!0,this.dom.appendChild(i)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof Xo)||/[^ -~]/.test(t.text))return null;let r=pu(t.dom);if(r.length!=1)return null;e+=r[0].width}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}:null}coordsAt(e,t){return tT(this,e,t)}become(e){return!1}get type(){return un.Text}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let o=e.children[r],s=i+o.length;if(s>=t){if(o instanceof gr)return o;if(s>t)break}i=s+o.breakAfter}return null}}class Ts extends vn{constructor(e,t,r){super(),this.widget=e,this.length=t,this.type=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,o,s){return r&&(!(r instanceof Ts)||!this.widget.compare(r.widget)||e>0&&o<=0||t<this.length&&s<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?or.before(this.dom):or.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new Ts(this.widget,t,this.type);return r.breakAfter=this.breakAfter,r}get children(){return uv}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):nn.empty}domBoundsAround(){return null}become(e){return e instanceof Ts&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class fv{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof Ts&&e.type==un.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new gr),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(Ec(new La(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:s,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(s){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=o,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,r)),this.getLine().append(Ec(new Xo(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,o,s){if(this.disallowBlockEffectsFor[s]&&r instanceof Bs){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(r instanceof Bs)if(r.block){let{type:l}=r;l==un.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Ts(r.widget||new T1("div"),a,l))}else{let l=Fo.create(r.widget||new T1("span"),a,r.startSide),u=this.atCursorPos&&!l.isEditable&&o<=i.length&&(e<t||r.startSide>0),f=!l.isEditable&&(e<t||r.startSide<=0),c=this.getLine();this.pendingBuffer==2&&!u&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(c.append(Ec(new La(1),i),o),o=i.length+Math.max(0,o-i.length)),c.append(Ec(l,i),o),this.atCursorPos=f,this.pendingBuffer=f?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}static build(e,t,r,i,o){let s=new fv(e,t,r,o);return s.openEnd=Jt.spans(i,t,r,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function Ec(n,e){for(let t of e)n=new Ji(t,[n],n.length);return n}class T1 extends os{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const rT=at.define(),iT=at.define(),oT=at.define(),sT=at.define(),Ig=at.define(),aT=at.define(),lT=at.define({combine:n=>n.some(e=>e)});class Eh{constructor(e,t="nearest",r="nearest",i=5,o=5){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=o}map(e){return e.empty?this:new Eh(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const P1=Pt.define({map:(n,e)=>n.map(e)});function Yr(n,e,t){let r=n.facet(sT);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const Md=at.define({combine:n=>n.length?n[0]:!0});let AL=0;const Nl=at.define();class Bn{constructor(e,t,r,i){this.id=e,this.create=t,this.domEventHandlers=r,this.extension=i(this)}static define(e,t){const{eventHandlers:r,provide:i,decorations:o}=t||{};return new Bn(AL++,e,r,s=>{let a=[Nl.of(s)];return o&&a.push(gu.of(l=>{let u=l.plugin(s);return u?o(u):pt.none})),i&&a.push(i(s)),a})}static fromClass(e,t){return Bn.define(r=>new e(r),t)}}class kp{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(Yr(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Yr(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){Yr(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const uT=at.define(),cT=at.define(),gu=at.define(),fT=at.define(),hT=at.define(),Ml=at.define();class uo{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new uo(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let i=0,o=0,s=0,a=0;;i++){let l=i==e.length?null:e[i],u=s-a,f=l?l.fromB:1e9;for(;o<t.length&&t[o]<f;){let c=t[o],d=t[o+1],g=Math.max(a,c),h=Math.min(f,d);if(g<=h&&new uo(g+u,h+u,g,h).addToSet(r),d>f)break;o+=2}if(!l)return r;new uo(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),s=l.toA,a=l.toB}}}class Oh{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Vn.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,a,l,u)=>i.push(new uo(s,a,l,u))),this.changedRanges=i;let o=e.hasFocus;o!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=o,this.flags|=1)}static create(e,t,r){return new Oh(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}var wn=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(wn||(wn={}));const Ag=wn.LTR,RL=wn.RTL;function dT(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const xL=dT("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),NL=dT("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Rg=Object.create(null),Ri=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Rg[e]=t,Rg[t]=-e}function ML(n){return n<=247?xL[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?NL[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8203||n==8204?256:1}const DL=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class Sa{constructor(e,t,r){this.from=e,this.to=t,this.level=r}get dir(){return this.level%2?RL:Ag}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,r,i){let o=-1;for(let s=0;s<e.length;s++){let a=e[s];if(a.from<=t&&a.to>=t){if(a.level==r)return s;(o<0||(i!=0?i<0?a.from<t:a.to>t:e[o].level>a.level))&&(o=s)}}if(o<0)throw new RangeError("Index out of range");return o}}const _n=[];function jL(n,e){let t=n.length,r=e==Ag?1:2,i=e==Ag?2:1;if(!n||r==1&&!DL.test(n))return pT(t);for(let s=0,a=r,l=r;s<t;s++){let u=ML(n.charCodeAt(s));u==512?u=a:u==8&&l==4&&(u=16),_n[s]=u==4?2:u,u&7&&(l=u),a=u}for(let s=0,a=r,l=r;s<t;s++){let u=_n[s];if(u==128)s<t-1&&a==_n[s+1]&&a&24?u=_n[s]=a:_n[s]=256;else if(u==64){let f=s+1;for(;f<t&&_n[f]==64;)f++;let c=s&&a==8||f<t&&_n[f]==8?l==1?1:8:256;for(let d=s;d<f;d++)_n[d]=c;s=f-1}else u==8&&l==1&&(_n[s]=1);a=u,u&7&&(l=u)}for(let s=0,a=0,l=0,u,f,c;s<t;s++)if(f=Rg[u=n.charCodeAt(s)])if(f<0){for(let d=a-3;d>=0;d-=3)if(Ri[d+1]==-f){let g=Ri[d+2],h=g&2?r:g&4?g&1?i:r:0;h&&(_n[s]=_n[Ri[d]]=h),a=d;break}}else{if(Ri.length==189)break;Ri[a++]=s,Ri[a++]=u,Ri[a++]=l}else if((c=_n[s])==2||c==1){let d=c==r;l=d?0:1;for(let g=a-3;g>=0;g-=3){let h=Ri[g+2];if(h&2)break;if(d)Ri[g+2]|=2;else{if(h&4)break;Ri[g+2]|=4}}}for(let s=0;s<t;s++)if(_n[s]==256){let a=s+1;for(;a<t&&_n[a]==256;)a++;let l=(s?_n[s-1]:r)==1,u=(a<t?_n[a]:r)==1,f=l==u?l?1:2:r;for(let c=s;c<a;c++)_n[c]=f;s=a-1}let o=[];if(r==1)for(let s=0;s<t;){let a=s,l=_n[s++]!=1;for(;s<t&&l==(_n[s]!=1);)s++;if(l)for(let u=s;u>a;){let f=u,c=_n[--u]!=2;for(;u>a&&c==(_n[u-1]!=2);)u--;o.push(new Sa(u,f,c?2:1))}else o.push(new Sa(a,s,0))}else for(let s=0;s<t;){let a=s,l=_n[s++]==2;for(;s<t&&l==(_n[s]==2);)s++;o.push(new Sa(a,s,l?1:2))}return o}function pT(n){return[new Sa(0,n,0)]}let mT="";function LL(n,e,t,r,i){var o;let s=r.head-n.from,a=-1;if(s==0){if(!i||!n.length)return null;e[0].level!=t&&(s=e[0].side(!1,t),a=0)}else if(s==n.length){if(i)return null;let d=e[e.length-1];d.level!=t&&(s=d.side(!0,t),a=e.length-1)}a<0&&(a=Sa.find(e,s,(o=r.bidiLevel)!==null&&o!==void 0?o:-1,r.assoc));let l=e[a];s==l.side(i,t)&&(l=e[a+=i?1:-1],s=l.side(!i,t));let u=i==(l.dir==t),f=zr(n.text,s,u);if(mT=n.text.slice(Math.min(s,f),Math.max(s,f)),f!=l.side(i,t))return je.cursor(f+n.from,u?-1:1,l.level);let c=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return!c&&l.level!=t?je.cursor(i?n.to:n.from,i?-1:1,t):c&&c.level<l.level?je.cursor(c.side(!i,t)+n.from,i?1:-1,c.level):je.cursor(f+n.from,i?-1:1,l.level)}const Uo="\uFFFF";class gT{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Lt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Uo}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i),this.readNode(i);let o=i.nextSibling;if(o==t)break;let s=vn.get(i),a=vn.get(o);(s&&a?s.breakAfter:(s?s.breakAfter:I1(i))||I1(o)&&(i.nodeName!="BR"||i.cmIgnore))&&this.lineBreak(),i=o}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,s=1,a;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,r),s=this.lineSeparator.length):(a=i.exec(t))&&(o=a.index,s=a[0].length),this.append(t.slice(r,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=s-1);r=o+s}}readNode(e){if(e.cmIgnore)return;let t=vn.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+Math.min(t,r.offset))}}function I1(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}class A1{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class R1 extends vn{constructor(e){super(),this.view=e,this.compositionDeco=pt.none,this.decorations=[],this.dynamicDecorationMap=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new gr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new uo(0,0,0,e.state.doc.length)],0)}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:s,toA:a})=>a<this.minWidthFrom||s>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=pt.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=FL(this.view,e.changes)),(st.ie||st.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,i=this.updateDeco(),o=HL(r,i,e.changes);return t=uo.extendWithRanges(t,o),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=st.chrome||st.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(o),this.dirty=0,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""});let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Ts&&o.widget instanceof x1&&i.push(o.dom);r.updateGaps(i)}updateChildren(e,t){let r=this.childCursor(t);for(let i=e.length-1;;i--){let o=i>=0?e[i]:null;if(!o)break;let{fromA:s,toA:a,fromB:l,toB:u}=o,{content:f,breakAtStart:c,openStart:d,openEnd:g}=fv.build(this.view.state.doc,l,u,this.decorations,this.dynamicDecorationMap),{i:h,off:v}=r.findPos(a,1),{i:m,off:p}=r.findPos(s,-1);Gk(this,m,p,h,v,f,c,d,g)}}updateSelection(e=!1,t=!1){if((e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection())||st.ios&&this.view.inputState.rapidCompositionStart)return;let r=this.forceSelection;this.forceSelection=!1;let i=this.view.state.selection.main,o=this.domAtPos(i.anchor),s=i.empty?o:this.domAtPos(i.head);if(st.gecko&&i.empty&&BL(o)){let l=document.createTextNode("");this.view.observer.ignore(()=>o.node.insertBefore(l,o.node.childNodes[o.offset]||null)),o=s=new or(l,0),r=!0}let a=this.view.observer.selectionRange;(r||!a.focusNode||!Sh(o.node,o.offset,a.anchorNode,a.anchorOffset)||!Sh(s.node,s.offset,a.focusNode,a.focusOffset))&&(this.view.observer.ignore(()=>{st.android&&st.chrome&&this.dom.contains(a.focusNode)&&zL(a.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let l=wh(this.view.root);if(l)if(i.empty){if(st.gecko){let u=VL(o.node,o.offset);if(u&&u!=3){let f=yT(o.node,o.offset,u==1?1:-1);f&&(o=new or(f,u==1?0:f.nodeValue.length))}}l.collapse(o.node,o.offset),i.bidiLevel!=null&&a.cursorBidiLevel!=null&&(a.cursorBidiLevel=i.bidiLevel)}else if(l.extend)l.collapse(o.node,o.offset),l.extend(s.node,s.offset);else{let u=document.createRange();i.anchor>i.head&&([o,s]=[s,o]),u.setEnd(s.node,s.offset),u.setStart(o.node,o.offset),l.removeAllRanges(),l.addRange(u)}}),this.view.observer.setSelectionRange(o,s)),this.impreciseAnchor=o.precise?null:new or(a.anchorNode,a.anchorOffset),this.impreciseHead=s.precise?null:new or(a.focusNode,a.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=wh(this.view.root);if(!t||!e.empty||!e.assoc||!t.modify)return;let r=gr.find(this,e.head);if(!r)return;let i=r.posAtStart;if(e.head==i||e.head==i+r.length)return;let o=this.coordsAt(e.head,-1),s=this.coordsAt(e.head,1);if(!o||!s||o.bottom>s.top)return;let a=this.domAtPos(e.head+e.assoc);t.collapse(a.node,a.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){let e=this.view.root.activeElement;return e==this.dom||zf(this.dom,this.view.observer.selectionRange)&&!(e&&this.dom.contains(e))}nearest(e){for(let t=e;t;){let r=vn.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof gr)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){for(let r=this.length,i=this.children.length-1;;i--){let o=this.children[i],s=r-o.breakAfter-o.length;if(e>s||e==s&&o.type!=un.WidgetBefore&&o.type!=un.WidgetAfter&&(!i||t==2||this.children[i-1].breakAfter||this.children[i-1].type==un.WidgetBefore&&t>-2))return o.coordsAt(e-s,t);r=s}}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,o=this.view.contentDOM.clientWidth,s=o>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==wn.LTR;for(let u=0,f=0;f<this.children.length;f++){let c=this.children[f],d=u+c.length;if(d>i)break;if(u>=r){let g=c.dom.getBoundingClientRect();if(t.push(g.height),s){let h=c.dom.lastChild,v=h?pu(h):[];if(v.length){let m=v[v.length-1],p=l?m.right-g.left:g.right-m.left;p>a&&(a=p,this.minWidth=o,this.minWidthFrom=u,this.minWidthTo=d)}}}u=d+c.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?wn.RTL:wn.LTR}measureTextSize(){for(let i of this.children)if(i instanceof gr){let o=i.measureTextSize();if(o)return o}let e=document.createElement("div"),t,r;return e.className="cm-line",e.style.width="99999px",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let i=pu(e.firstChild)[0];t=e.getBoundingClientRect().height,r=i?i.width/27:7,e.remove()}),{lineHeight:t,charWidth:r}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Kk(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let o=i==t.viewports.length?null:t.viewports[i],s=o?o.from-1:this.length;if(s>r){let a=t.lineBlockAt(s).bottom-t.lineBlockAt(r).top;e.push(pt.replace({widget:new x1(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,s))}if(!o)break;r=o.to+1}return pt.set(e)}updateDeco(){let e=this.view.state.facet(gu).map((t,r)=>(this.dynamicDecorationMap[r]=typeof t=="function")?t(this.view):t);for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let o=0,s=0,a=0,l=0;for(let f of this.view.state.facet(hT).map(c=>c(this.view)))if(f){let{left:c,right:d,top:g,bottom:h}=f;c!=null&&(o=Math.max(o,c)),d!=null&&(s=Math.max(s,d)),g!=null&&(a=Math.max(a,g)),h!=null&&(l=Math.max(l,h))}let u={left:r.left-o,top:r.top-a,right:r.right+s,bottom:r.bottom+l};CL(this.view.scrollDOM,u,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==wn.LTR)}}function BL(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}class x1 extends os{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function vT(n){let e=n.observer.selectionRange,t=e.focusNode&&yT(e.focusNode,e.focusOffset,0);if(!t)return null;let r=n.docView.nearest(t);if(!r)return null;if(r instanceof gr){let i=t;for(;i.parentNode!=r.dom;)i=i.parentNode;let o=i.previousSibling;for(;o&&!vn.get(o);)o=o.previousSibling;let s=o?vn.get(o).posAtEnd:r.posAtStart;return{from:s,to:s,node:i,text:t}}else{for(;;){let{parent:o}=r;if(!o)return null;if(o instanceof gr)break;r=o}let i=r.posAtStart;return{from:i,to:i+r.length,node:r.dom,text:t}}}function FL(n,e){let t=vT(n);if(!t)return pt.none;let{from:r,to:i,node:o,text:s}=t,a=e.mapPos(r,1),l=Math.max(a,e.mapPos(i,-1)),{state:u}=n,f=o.nodeType==3?o.nodeValue:new gT([],u).readRange(o.firstChild,null).text;if(l-a<f.length)if(u.doc.sliceString(a,Math.min(u.doc.length,a+f.length),Uo)==f)l=a+f.length;else if(u.doc.sliceString(Math.max(0,l-f.length),l,Uo)==f)a=l-f.length;else return pt.none;else if(u.doc.sliceString(a,l,Uo)!=f)return pt.none;let c=vn.get(o);return c instanceof Zk?c=c.widget.topView:c&&(c.parent=null),pt.set(pt.replace({widget:new UL(o,s,c),inclusive:!0}).range(a,l))}class UL extends os{constructor(e,t,r){super(),this.top=e,this.text=t,this.topView=r}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Zk}}function yT(n,e,t){for(;;){if(n.nodeType==3)return n;if(n.nodeType==1&&e>0&&t<=0)n=n.childNodes[e-1],e=mu(n);else if(n.nodeType==1&&e<n.childNodes.length&&t>=0)n=n.childNodes[e],e=0;else return null}}function VL(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}class qL{constructor(){this.changes=[]}compareRange(e,t){Pg(e,t,this.changes)}comparePoint(e,t){Pg(e,t,this.changes)}}function HL(n,e,t){let r=new qL;return Jt.compare(n,e,t,r),r.changes}function zL(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function WL(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),o=e-i.from;if(i.length==0)return je.cursor(e);o==0?t=1:o==i.length&&(t=-1);let s=o,a=o;t<0?s=zr(i.text,o,!1):a=zr(i.text,o);let l=r(i.text.slice(s,a));for(;s>0;){let u=zr(i.text,s,!1);if(r(i.text.slice(u,s))!=l)break;s=u}for(;a<i.length;){let u=zr(i.text,a);if(r(i.text.slice(a,u))!=l)break;a=u}return je.range(s+i.from,a+i.from)}function KL(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function GL(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function Tp(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function N1(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function M1(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function xg(n,e,t){let r,i,o,s,a=!1,l,u,f,c;for(let h=n.firstChild;h;h=h.nextSibling){let v=pu(h);for(let m=0;m<v.length;m++){let p=v[m];i&&Tp(i,p)&&(p=N1(M1(p,i.bottom),i.top));let y=KL(e,p),b=GL(t,p);if(y==0&&b==0)return h.nodeType==3?D1(h,e,t):xg(h,e,t);(!r||s>b||s==b&&o>y)&&(r=h,i=p,o=y,s=b,a=!y||(y>0?m<v.length-1:m>0)),y==0?t>p.bottom&&(!f||f.bottom<p.bottom)?(l=h,f=p):t<p.top&&(!c||c.top>p.top)&&(u=h,c=p):f&&Tp(f,p)?f=M1(f,p.bottom):c&&Tp(c,p)&&(c=N1(c,p.top))}}if(f&&f.bottom>=t?(r=l,i=f):c&&c.top<=t&&(r=u,i=c),!r)return{node:n,offset:0};let d=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return D1(r,d,t);if(a&&r.contentEditable!="false")return xg(r,d,t);let g=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:g}}function D1(n,e,t){let r=n.nodeValue.length,i=-1,o=1e9,s=0;for(let a=0;a<r;a++){let l=ja(n,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let f=l[u];if(f.top==f.bottom)continue;s||(s=e-f.left);let c=(f.top>t?f.top-t:t-f.bottom)-1;if(f.left-1<=e&&f.right+1>=e&&c<o){let d=e>=(f.left+f.right)/2,g=d;if((st.chrome||st.gecko)&&ja(n,a).getBoundingClientRect().left==f.right&&(g=!d),c<=0)return{node:n,offset:a+(g?1:0)};i=a+(g?1:0),o=c}}}return{node:n,offset:i>-1?i:s>0?n.nodeValue.length:0}}function _T(n,{x:e,y:t},r,i=-1){var o;let s=n.contentDOM.getBoundingClientRect(),a=s.top+n.viewState.paddingTop,l,{docHeight:u}=n.viewState,f=t-a;if(f<0)return 0;if(f>u)return n.state.doc.length;for(let p=n.defaultLineHeight/2,y=!1;l=n.elementAtHeight(f),l.type!=un.Text;)for(;f=i>0?l.bottom+p:l.top-p,!(f>=0&&f<=u);){if(y)return r?null:0;y=!0,i=-i}t=a+f;let c=l.from;if(c<n.viewport.from)return n.viewport.from==0?0:r?null:j1(n,s,l,e,t);if(c>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:r?null:j1(n,s,l,e,t);let d=n.dom.ownerDocument,g=n.root.elementFromPoint?n.root:d,h=g.elementFromPoint(e,t);h&&!n.contentDOM.contains(h)&&(h=null),h||(e=Math.max(s.left+1,Math.min(s.right-1,e)),h=g.elementFromPoint(e,t),h&&!n.contentDOM.contains(h)&&(h=null));let v,m=-1;if(h&&((o=n.docView.nearest(h))===null||o===void 0?void 0:o.isEditable)!=!1){if(d.caretPositionFromPoint){let p=d.caretPositionFromPoint(e,t);p&&({offsetNode:v,offset:m}=p)}else if(d.caretRangeFromPoint){let p=d.caretRangeFromPoint(e,t);p&&({startContainer:v,startOffset:m}=p,(!n.contentDOM.contains(v)||st.safari&&YL(v,m,e)||st.chrome&&JL(v,m,e))&&(v=void 0))}}if(!v||!n.docView.dom.contains(v)){let p=gr.find(n.docView,c);if(!p)return f>l.top+l.height/2?l.to:l.from;({node:v,offset:m}=xg(p.dom,e,t))}return n.docView.posFromDOM(v,m)}function j1(n,e,t,r,i){let o=Math.round((r-e.left)*n.defaultCharacterWidth);n.lineWrapping&&t.height>n.defaultLineHeight*1.5&&(o+=Math.floor((i-t.top)/n.defaultLineHeight)*n.viewState.heightOracle.lineLength);let s=n.state.sliceDoc(t.from,t.to);return t.from+yg(s,o,n.state.tabSize)}function YL(n,e,t){let r;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(let i=n.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return ja(n,r-1,r).getBoundingClientRect().left>t}function JL(n,e,t){if(e!=0)return!1;for(let i=n;;){let o=i.parentNode;if(!o||o.nodeType!=1||o.firstChild!=i)return!1;if(o.classList.contains("cm-line"))break;i=o}let r=n.nodeType==1?n.getBoundingClientRect():ja(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function QL(n,e,t,r){let i=n.state.doc.lineAt(e.head),o=!r||!n.lineWrapping?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(o){let l=n.dom.getBoundingClientRect(),u=n.textDirectionAt(i.from),f=n.posAtCoords({x:t==(u==wn.LTR)?l.right-1:l.left+1,y:(o.top+o.bottom)/2});if(f!=null)return je.cursor(f,t?-1:1)}let s=gr.find(n.docView,e.head),a=s?t?s.posAtEnd:s.posAtStart:t?i.to:i.from;return je.cursor(a,t?-1:1)}function L1(n,e,t,r){let i=n.state.doc.lineAt(e.head),o=n.bidiSpans(i),s=n.textDirectionAt(i.from);for(let a=e,l=null;;){let u=LL(i,o,s,a,t),f=mT;if(!u){if(i.number==(t?n.state.doc.lines:1))return a;f=`
`,i=n.state.doc.line(i.number+(t?1:-1)),o=n.bidiSpans(i),u=je.cursor(t?i.from:i.to)}if(l){if(!l(f))return a}else{if(!r)return u;l=r(f)}a=u}}function ZL(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return o=>{let s=r(o);return i==mr.Space&&(i=s),i==s}}function XL(n,e,t,r){let i=e.head,o=t?1:-1;if(i==(t?n.state.doc.length:0))return je.cursor(i,e.assoc);let s=e.goalColumn,a,l=n.contentDOM.getBoundingClientRect(),u=n.coordsAtPos(i),f=n.documentTop;if(u)s==null&&(s=u.left-l.left),a=o<0?u.top:u.bottom;else{let g=n.viewState.lineBlockAt(i);s==null&&(s=Math.min(l.right-l.left,n.defaultCharacterWidth*(i-g.from))),a=(o<0?g.top:g.bottom)+f}let c=l.left+s,d=r!=null?r:n.defaultLineHeight>>1;for(let g=0;;g+=10){let h=a+(d+g)*o,v=_T(n,{x:c,y:h},!1,o);if(h<l.top||h>l.bottom||(o<0?v<i:v>i))return je.cursor(v,e.assoc,void 0,s)}}function Pp(n,e,t){let r=n.state.facet(fT).map(i=>i(n));for(;;){let i=!1;for(let o of r)o.between(t.from-1,t.from+1,(s,a,l)=>{t.from>s&&t.from<a&&(t=e.from>t.from?je.cursor(s,1):je.cursor(a,-1),i=!0)});if(!i)return t}}class $L{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.chromeScrollHack=-1,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in Qn){let r=Qn[t];e.contentDOM.addEventListener(t,i=>{!B1(e,i)||this.ignoreDuringComposition(i)||t=="keydown"&&this.keydown(e,i)||(this.mustFlushObserver(i)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,i)?i.preventDefault():r(e,i))},Ng[t]),this.registeredEvents.push(t)}st.chrome&&st.chrome_version==102&&e.scrollDOM.addEventListener("wheel",()=>{this.chromeScrollHack<0?e.contentDOM.style.pointerEvents="none":window.clearTimeout(this.chromeScrollHack),this.chromeScrollHack=setTimeout(()=>{this.chromeScrollHack=-1,e.contentDOM.style.pointerEvents=""},100)},{passive:!0}),this.notifiedFocused=e.hasFocus,st.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e,t){var r;let i;this.customHandlers=[];for(let o of t)if(i=(r=o.update(e).spec)===null||r===void 0?void 0:r.domEventHandlers){this.customHandlers.push({plugin:o.value,handlers:i});for(let s in i)this.registeredEvents.indexOf(s)<0&&s!="scroll"&&(this.registeredEvents.push(s),e.contentDOM.addEventListener(s,a=>{!B1(e,a)||this.runCustomHandlers(s,e,a)&&a.preventDefault()}))}}runCustomHandlers(e,t,r){for(let i of this.customHandlers){let o=i.handlers[e];if(o)try{if(o.call(i.plugin,r,t)||r.defaultPrevented)return!0}catch(s){Yr(t.state,s)}}return!1}runScrollHandlers(e,t){this.lastScrollTop=e.scrollDOM.scrollTop,this.lastScrollLeft=e.scrollDOM.scrollLeft;for(let r of this.customHandlers){let i=r.handlers.scroll;if(i)try{i.call(r.plugin,t,e)}catch(o){Yr(e.state,o)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(st.android&&st.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let r;return st.ios&&(r=bT.find(i=>i.keyCode==t.keyCode))&&!(t.ctrlKey||t.altKey||t.metaKey)&&!t.synthetic?(this.pendingIOSKey=r,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,Jl(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:st.safari&&!st.ios&&Date.now()-this.compositionEndedAt<100?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229||e.type=="compositionend"&&!st.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const bT=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],wT=[16,17,18,20,91,92,224,225];class eB{constructor(e,t,r,i){this.view=e,this.style=r,this.mustSelect=i,this.lastEvent=t;let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Lt.allowMultipleSelections)&&tB(e,t),this.dragMove=nB(e,t),this.dragging=rB(e,t)&&hv(t)==1?null:!1,this.dragging===!1&&(t.preventDefault(),this.select(t))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function tB(n,e){let t=n.state.facet(rT);return t.length?t[0](e):st.mac?e.metaKey:e.ctrlKey}function nB(n,e){let t=n.state.facet(iT);return t.length?t[0](e):st.mac?!e.altKey:!e.ctrlKey}function rB(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=wh(n.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let s=i[o];if(s.left<=e.clientX&&s.right>=e.clientX&&s.top<=e.clientY&&s.bottom>=e.clientY)return!0}return!1}function B1(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=vn.get(t))&&r.ignoreEvent(e))return!1;return!0}const Qn=Object.create(null),Ng=Object.create(null),ST=st.ie&&st.ie_version<15||st.ios&&st.webkit_version<604;function iB(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),CT(n,t.value)},50)}function CT(n,e){let{state:t}=n,r,i=1,o=t.toText(e),s=o.lines==t.selection.ranges.length;if(Mg!=null&&t.selection.ranges.every(l=>l.empty)&&Mg==o.toString()){let l=-1;r=t.changeByRange(u=>{let f=t.doc.lineAt(u.from);if(f.from==l)return{range:u};l=f.from;let c=t.toText((s?o.line(i++).text:e)+t.lineBreak);return{changes:{from:f.from,insert:c},range:je.cursor(u.from+c.length)}})}else s?r=t.changeByRange(l=>{let u=o.line(i++);return{changes:{from:l.from,to:l.to,insert:u.text},range:je.cursor(l.from+u.length)}}):r=t.replaceSelection(o);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Qn.keydown=(n,e)=>{n.inputState.setSelectionOrigin("select"),e.keyCode==27?n.inputState.lastEscPress=Date.now():wT.indexOf(e.keyCode)<0&&(n.inputState.lastEscPress=0)};Qn.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Qn.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Ng.touchstart=Ng.touchmove={passive:!0};Qn.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3&&hv(e)==1)return;let t=null;for(let r of n.state.facet(oT))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=aB(n,e)),t){let r=n.root.activeElement!=n.contentDOM;r&&n.observer.ignore(()=>zk(n.contentDOM)),n.inputState.startMouseSelection(new eB(n,e,t,r))}};function F1(n,e,t,r){if(r==1)return je.cursor(e,t);if(r==2)return WL(n.state,e,t);{let i=gr.find(n.docView,e),o=n.state.doc.lineAt(i?i.posAtEnd:e),s=i?i.posAtStart:o.from,a=i?i.posAtEnd:o.to;return a<n.state.doc.length&&a==o.to&&a++,je.range(s,a)}}let ET=(n,e)=>n>=e.top&&n<=e.bottom,U1=(n,e,t)=>ET(e,t)&&n>=t.left&&n<=t.right;function oB(n,e,t,r){let i=gr.find(n.docView,e);if(!i)return 1;let o=e-i.posAtStart;if(o==0)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&U1(t,r,s))return-1;let a=i.coordsAt(o,1);return a&&U1(t,r,a)?1:s&&ET(r,s)?-1:1}function V1(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:oB(n,t,e.clientX,e.clientY)}}const sB=st.ie&&st.ie_version<=11;let q1=null,H1=0,z1=0;function hv(n){if(!sB)return n.detail;let e=q1,t=z1;return q1=n,z1=Date.now(),H1=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(H1+1)%3:1}function aB(n,e){let t=V1(n,e),r=hv(e),i=n.state.selection,o=t,s=e;return{update(a){a.docChanged&&(t&&(t.pos=a.changes.mapPos(t.pos)),i=i.map(a.changes),s=null)},get(a,l,u){let f;if(s&&a.clientX==s.clientX&&a.clientY==s.clientY?f=o:(f=o=V1(n,a),s=a),!f||!t)return i;let c=F1(n,f.pos,f.bias,r);if(t.pos!=f.pos&&!l){let d=F1(n,t.pos,t.bias,r),g=Math.min(d.from,c.from),h=Math.max(d.to,c.to);c=g<c.from?je.range(g,h):je.range(h,g)}return l?i.replaceRange(i.main.extend(c.from,c.to)):u&&i.ranges.length>1&&i.ranges.some(d=>d.eq(c))?lB(i,c):u?i.addRange(c):je.create([c])}}}function lB(n,e){for(let t=0;;t++)if(n.ranges[t].eq(e))return je.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}Qn.dragstart=(n,e)=>{let{selection:{main:t}}=n.state,{mouseSelection:r}=n.inputState;r&&(r.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",n.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function W1(n,e,t,r){if(!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:o}=n.inputState,s=r&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,a={from:i,insert:t},l=n.state.changes(s?[s,a]:a);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"})}Qn.drop=(n,e)=>{if(!e.dataTransfer)return;if(n.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let r=Array(t.length),i=0,o=()=>{++i==t.length&&W1(n,e,r.filter(s=>s!=null).join(n.state.lineBreak),!1)};for(let s=0;s<t.length;s++){let a=new FileReader;a.onerror=o,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[s]=a.result),o()},a.readAsText(t[s])}}else W1(n,e,e.dataTransfer.getData("Text"),!0)};Qn.paste=(n,e)=>{if(n.state.readOnly)return e.preventDefault();n.observer.flush();let t=ST?null:e.clipboardData;t?(CT(n,t.getData("text/plain")),e.preventDefault()):iB(n)};function uB(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function cB(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:o}of n.selection.ranges){let s=n.doc.lineAt(o);s.number>i&&(e.push(s.text),t.push({from:s.from,to:Math.min(n.doc.length,s.to+1)})),i=s.number}r=!0}return{text:e.join(n.lineBreak),ranges:t,linewise:r}}let Mg=null;Qn.copy=Qn.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=cB(n.state);if(!t&&!i)return;Mg=i?t:null;let o=ST?null:e.clipboardData;o?(e.preventDefault(),o.clearData(),o.setData("text/plain",t)):uB(n,t),e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})};function OT(n){setTimeout(()=>{n.hasFocus!=n.inputState.notifiedFocused&&n.update([])},10)}Qn.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),OT(n)};Qn.blur=n=>{n.observer.clearSelectionRange(),OT(n)};function kT(n,e){if(n.docView.compositionDeco.size){n.inputState.rapidCompositionStart=e;try{n.update([])}finally{n.inputState.rapidCompositionStart=!1}}}Qn.compositionstart=Qn.compositionupdate=n=>{n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0,n.docView.compositionDeco.size&&(n.observer.flush(),kT(n,!0)))};Qn.compositionend=n=>{n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionFirstChange=null,setTimeout(()=>{n.inputState.composing<0&&kT(n,!1)},50)};Qn.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Qn.beforeinput=(n,e)=>{var t;let r;if(st.chrome&&st.android&&(r=bT.find(i=>i.inputType==e.inputType))&&(n.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let i=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>i+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}};const K1=["pre-wrap","normal","pre-line","break-spaces"];class fB{constructor(){this.doc=nn.empty,this.lineWrapping=!1,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength)),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return K1.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,r,i,o){let s=K1.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=t,this.charWidth=r,this.lineLength=i,a){this.heightSamples={};for(let l=0;l<o.length;l++){let u=o[l];u<0?l++:this.heightSamples[Math.floor(u*10)]=!0}}return a}}class hB{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Vo{constructor(e,t,r,i,o){this.from=e,this.length=t,this.top=r,this.height=i,this.type=o}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new Vo(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var fn=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(fn||(fn={}));const Wf=.001;class xr{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Wf&&(e.heightChanged=!0),this.height=t)}replace(e,t,r){return xr.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let o=this;for(let s=i.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:u,toB:f}=i[s],c=o.lineAt(a,fn.ByPosNoHeight,t,0,0),d=c.to>=l?c:o.lineAt(l,fn.ByPosNoHeight,t,0,0);for(f+=d.to-l,l=d.to;s>0&&c.from<=i[s-1].toA;)a=i[s-1].fromA,u=i[s-1].fromB,s--,a<c.from&&(c=o.lineAt(a,fn.ByPosNoHeight,t,0,0));u+=c.from-a,a=c.from;let g=dv.build(r,e,u,f);o=o.replace(a,l,g)}return o.updateHeight(r,0)}static empty(){return new Ur(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,i=0,o=0;for(;;)if(t==r)if(i>o*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(o>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,o-=a.size}else break;else if(i<o){let a=e[t++];a&&(i+=a.size)}else{let a=e[--r];a&&(o+=a.size)}let s=0;return e[t-1]==null?(s=1,t--):e[t]==null&&(s=1,r++),new dB(xr.of(e.slice(0,t)),s,xr.of(e.slice(r)))}}xr.prototype.size=1;class TT extends xr{constructor(e,t,r){super(e,t),this.type=r}blockAt(e,t,r,i){return new Vo(i,this.length,r,this.height,this.type)}lineAt(e,t,r,i,o){return this.blockAt(0,r,i,o)}forEachLine(e,t,r,i,o,s){e<=o+this.length&&t>=o&&s(this.blockAt(0,r,i,o))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(e,i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ur extends TT{constructor(e,t){super(e,t,un.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,r){let i=r[0];return r.length==1&&(i instanceof Ur||i instanceof $n&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof $n?i=new Ur(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):xr.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(e,i.heights[i.index++]):(r||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class $n extends xr{constructor(e){super(e,0)}lines(e,t){let r=e.lineAt(t).number,i=e.lineAt(t+this.length).number;return{firstLine:r,lastLine:i,lineHeight:this.height/(i-r+1)}}blockAt(e,t,r,i){let{firstLine:o,lastLine:s,lineHeight:a}=this.lines(t,i),l=Math.max(0,Math.min(s-o,Math.floor((e-r)/a))),{from:u,length:f}=t.line(o+l);return new Vo(u,f,r+a*l,a,un.Text)}lineAt(e,t,r,i,o){if(t==fn.ByHeight)return this.blockAt(e,r,i,o);if(t==fn.ByPosNoHeight){let{from:c,to:d}=r.lineAt(e);return new Vo(c,d-c,0,0,un.Text)}let{firstLine:s,lineHeight:a}=this.lines(r,o),{from:l,length:u,number:f}=r.lineAt(e);return new Vo(l,u,i+a*(f-s),a,un.Text)}forEachLine(e,t,r,i,o,s){let{firstLine:a,lineHeight:l}=this.lines(r,o);for(let u=Math.max(e,o),f=Math.min(o+this.length,t);u<=f;){let c=r.lineAt(u);u==e&&(i+=l*(c.number-a)),s(new Vo(c.from,c.length,i,l,un.Text)),i+=l,u=c.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let o=r[r.length-1];o instanceof $n?r[r.length-1]=new $n(o.length+i):r.push(null,new $n(i-1))}if(e>0){let o=r[0];o instanceof $n?r[0]=new $n(e+o.length):r.unshift(new $n(e-1),null)}return xr.of(r)}decomposeLeft(e,t){t.push(new $n(e-1),null)}decomposeRight(e,t){t.push(null,new $n(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let o=t+this.length;if(i&&i.from<=t+this.length&&i.more){let s=[],a=Math.max(t,i.from),l=-1,u=e.heightChanged;for(i.from>t&&s.push(new $n(i.from-t-1).updateHeight(e,t));a<=o&&i.more;){let c=e.doc.lineAt(a).length;s.length&&s.push(null);let d=i.heights[i.index++];l==-1?l=d:Math.abs(d-l)>=Wf&&(l=-2);let g=new Ur(c,d);g.outdated=!1,s.push(g),a+=c+1}a<=o&&s.push(null,new $n(o-a).updateHeight(e,a));let f=xr.of(s);return e.heightChanged=u||l<0||Math.abs(f.height-this.height)>=Wf||Math.abs(l-this.lines(e.doc,t).lineHeight)>=Wf,f}else(r||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class dB extends xr{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,i){let o=r+this.left.height;return e<o?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,o,i+this.left.length+this.break)}lineAt(e,t,r,i,o){let s=i+this.left.height,a=o+this.left.length+this.break,l=t==fn.ByHeight?e<s:e<a,u=l?this.left.lineAt(e,t,r,i,o):this.right.lineAt(e,t,r,s,a);if(this.break||(l?u.to<a:u.from>a))return u;let f=t==fn.ByPosNoHeight?fn.ByPosNoHeight:fn.ByPos;return l?u.join(this.right.lineAt(a,f,r,s,a)):this.left.lineAt(a,f,r,i,o).join(u)}forEachLine(e,t,r,i,o,s){let a=i+this.left.height,l=o+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,r,i,o,s),t>=l&&this.right.forEachLine(e,t,r,a,l,s);else{let u=this.lineAt(l,fn.ByPos,r,i,o);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,o,s),u.to>=e&&u.from<=t&&s(u),t>u.to&&this.right.forEachLine(u.to+1,t,r,a,l,s)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let o=[];e>0&&this.decomposeLeft(e,o);let s=o.length;for(let a of r)o.push(a);if(e>0&&G1(o,s-1),t<this.length){let a=o.length;this.decomposeRight(t,o),G1(o,a)}return xr.of(o)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?xr.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:o,right:s}=this,a=t+o.length+this.break,l=null;return i&&i.from<=t+o.length&&i.more?l=o=o.updateHeight(e,t,r,i):o.updateHeight(e,t,r),i&&i.from<=a+s.length&&i.more?l=s=s.updateHeight(e,a,r,i):s.updateHeight(e,a,r),l?this.balanced(o,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function G1(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof $n&&(r=n[e+1])instanceof $n&&n.splice(e-1,3,new $n(t.length+1+r.length))}const pB=5;class dv{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Ur?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new Ur(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;r.block?this.addBlock(new TT(o,i,r.type)):(o||i>=pB)&&this.addLineDeco(i,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ur(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new $n(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ur)return e;let t=new Ur(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==un.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=un.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let r=this.ensureLine();r.length+=t,r.collapsed+=t,r.widgetHeight=Math.max(r.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Ur)&&!this.isCovered?this.nodes.push(new Ur(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof Ur&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let o=new dv(r,e);return Jt.spans(t,r,i,o,0),o.finish(r)}}function mB(n,e,t){let r=new gB;return Jt.compare(n,e,t,r,0),r.changes}class gB{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&Pg(e,t,this.changes,5)}}function vB(n,e){let t=n.getBoundingClientRect(),r=Math.max(0,t.left),i=Math.min(innerWidth,t.right),o=Math.max(0,t.top),s=Math.min(innerHeight,t.bottom),a=n.ownerDocument.body;for(let l=n.parentNode;l&&l!=a;)if(l.nodeType==1){let u=l,f=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&f.overflow!="visible"){let c=u.getBoundingClientRect();r=Math.max(r,c.left),i=Math.min(i,c.right),o=Math.max(o,c.top),s=l==n.parentNode?c.bottom:Math.min(s,c.bottom)}l=f.position=="absolute"||f.position=="fixed"?u.offsetParent:u.parentNode}else if(l.nodeType==11)l=l.host;else break;return{left:r-t.left,right:Math.max(r,i)-t.left,top:o-(t.top+e),bottom:Math.max(o,s)-(t.top+e)}}function yB(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Ip{constructor(e,t,r){this.from=e,this.to=t,this.size=r}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(i.from!=o.from||i.to!=o.to||i.size!=o.size)return!1}return!0}draw(e){return pt.replace({widget:new _B(this.size,e)}).range(this.from,this.to)}}class _B extends os{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Y1{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new fB,this.scaler=Z1,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=wn.RTL,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.stateDeco=e.facet(gu).filter(t=>typeof t!="function"),this.heightMap=xr.empty().applyChanges(this.stateDeco,nn.empty,this.heightOracle.setDoc(e.doc),[new uo(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=pt.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:o,to:s})=>i>=o&&i<=s)){let{from:o,to:s}=this.lineBlockAt(i);e.push(new Oc(o,s))}}this.viewports=e.sort((r,i)=>r.from-i.from),this.scaler=this.heightMap.height<=7e6?Z1:new SB(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Dl(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(gu).filter(u=>typeof u!="function");let i=e.changedRanges,o=uo.extendWithRanges(i,mB(r,this.stateDeco,e?e.changes:Vn.empty(this.state.doc.length))),s=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),o),this.heightMap.height!=s&&(e.flags|=2);let a=o.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let l=!e.changes.empty||e.flags&2||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,o=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?wn.RTL:wn.LTR;let s=this.heightOracle.mustRefreshForWrapping(o),a=s||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight;this.contentDOMHeight=t.clientHeight,this.mustMeasureContent=!1;let l=0,u=0,f=parseInt(r.paddingTop)||0,c=parseInt(r.paddingBottom)||0;(this.paddingTop!=f||this.paddingBottom!=c)&&(this.paddingTop=f,this.paddingBottom=c,l|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=8);let d=(this.printing?yB:vB)(t,this.paddingTop),g=d.top-this.pixelViewport.top,h=d.bottom-this.pixelViewport.bottom;this.pixelViewport=d;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(a=!0)),!this.inView)return 0;let m=t.clientWidth;if((this.contentDOMWidth!=m||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=m,this.editorHeight=e.scrollDOM.clientHeight,l|=8),a){let y=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(y)&&(s=!0),s||i.lineWrapping&&Math.abs(m-this.contentDOMWidth)>i.charWidth){let{lineHeight:b,charWidth:_}=e.docView.measureTextSize();s=i.refresh(o,b,_,m/_,y),s&&(e.docView.minWidth=0,l|=8)}g>0&&h>0?u=Math.max(g,h):g<0&&h<0&&(u=Math.min(g,h)),i.heightChanged=!1;for(let b of this.viewports){let _=b.from==this.viewport.from?y:e.docView.measureVisibleLineHeights(b);this.heightMap=this.heightMap.updateHeight(i,0,s,new hB(b.from,_))}i.heightChanged&&(l|=2)}let p=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return p&&(this.viewport=this.getViewport(u,this.scrollTarget)),this.updateForViewport(),(l&2||p)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,o=this.state.doc,{visibleTop:s,visibleBottom:a}=this,l=new Oc(i.lineAt(s-r*1e3,fn.ByHeight,o,0,0).from,i.lineAt(a+(1-r)*1e3,fn.ByHeight,o,0,0).to);if(t){let{head:u}=t.range;if(u<l.from||u>l.to){let f=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),c=i.lineAt(u,fn.ByPos,o,0,0),d;t.y=="center"?d=(c.top+c.bottom)/2-f/2:t.y=="start"||t.y=="nearest"&&u<l.from?d=c.top:d=c.bottom-f,l=new Oc(i.lineAt(d-1e3/2,fn.ByHeight,o,0,0).from,i.lineAt(d+f+1e3/2,fn.ByHeight,o,0,0).to)}}return l}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new Oc(this.heightMap.lineAt(r,fn.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(i,fn.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,fn.ByPos,this.state.doc,0,0),{bottom:o}=this.heightMap.lineAt(t,fn.ByPos,this.state.doc,0,0),{visibleTop:s,visibleBottom:a}=this;return(e==0||i<=s-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||o>=a+Math.max(10,Math.min(r,250)))&&i>s-2*1e3&&o<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new Ip(t.mapPos(i.from),t.mapPos(i.to),i.size));return r}ensureLineGaps(e){let t=[];if(this.defaultTextDirection!=wn.LTR)return t;for(let r of this.viewportLines){if(r.length<4e3)continue;let i=bB(r.from,r.to,this.stateDeco);if(i.total<4e3)continue;let o,s;if(this.heightOracle.lineWrapping){let u=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;o=kc(i,(this.visibleTop-r.top-u)/r.height),s=kc(i,(this.visibleBottom-r.top+u)/r.height)}else{let u=i.total*this.heightOracle.charWidth,f=2e3*this.heightOracle.charWidth;o=kc(i,(this.pixelViewport.left-f)/u),s=kc(i,(this.pixelViewport.right+f)/u)}let a=[];o>r.from&&a.push({from:r.from,to:o}),s<r.to&&a.push({from:s,to:r.to});let l=this.state.selection.main;l.from>=r.from&&l.from<=r.to&&Q1(a,l.from-10,l.from+10),!l.empty&&l.to>=r.from&&l.to<=r.to&&Q1(a,l.to-10,l.to+10);for(let{from:u,to:f}of a)f-u>1e3&&t.push(wB(e,c=>c.from>=r.from&&c.to<=r.to&&Math.abs(c.from-u)<1e3&&Math.abs(c.to-f)<1e3)||new Ip(u,f,this.gapSize(r,u,f,i)))}return t}gapSize(e,t,r,i){let o=J1(i,r)-J1(i,t);return this.heightOracle.lineWrapping?e.height*o:i.total*this.heightOracle.charWidth*o}updateLineGaps(e){Ip.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=pt.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Jt.spans(e,this.viewport.from,this.viewport.to,{span(i,o){t.push({from:i,to:o})},point(){}},20);let r=t.length!=this.visibleRanges.length||this.visibleRanges.some((i,o)=>i.from!=t[o].from||i.to!=t[o].to);return this.visibleRanges=t,r?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Dl(this.heightMap.lineAt(e,fn.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return Dl(this.heightMap.lineAt(this.scaler.fromDOM(e),fn.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return Dl(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Oc{constructor(e,t){this.from=e,this.to=t}}function bB(n,e,t){let r=[],i=n,o=0;return Jt.spans(t,n,e,{span(){},point(s,a){s>i&&(r.push({from:i,to:s}),o+=s-i),i=a}},20),i<e&&(r.push({from:i,to:e}),o+=e-i),{total:o,ranges:r}}function kc({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:o,to:s}=e[i],a=s-o;if(r<=a)return o+r;r-=a}}function J1(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}function Q1(n,e,t){for(let r=0;r<n.length;r++){let i=n[r];if(i.from<t&&i.to>e){let o=[];i.from<e&&o.push({from:i.from,to:e}),i.to>t&&o.push({from:t,to:i.to}),n.splice(r,1,...o),r+=o.length-1}}}function wB(n,e){for(let t of n)if(e(t))return t}const Z1={toDOM(n){return n},fromDOM(n){return n},scale:1};class SB{constructor(e,t,r){let i=0,o=0,s=0;this.viewports=r.map(({from:a,to:l})=>{let u=t.lineAt(a,fn.ByPos,e,0,0).top,f=t.lineAt(l,fn.ByPos,e,0,0).bottom;return i+=f-u,{from:a,to:l,top:u,bottom:f,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let a of this.viewports)a.domTop=s+(a.top-o)*this.scale,s=a.domBottom=a.domTop+(a.bottom-a.top),o=a.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return i+(e-r)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);r=o.bottom,i=o.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return r+(e-i)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);r=o.bottom,i=o.domBottom}}}function Dl(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new Vo(n.from,n.length,t,r-t,Array.isArray(n.type)?n.type.map(i=>Dl(i,e)):n.type)}const Tc=at.define({combine:n=>n.join(" ")}),Dg=at.define({combine:n=>n.indexOf(!0)>-1}),jg=Qo.newName(),PT=Qo.newName(),IT=Qo.newName(),AT={"&light":"."+PT,"&dark":"."+IT};function Lg(n,e,t){return new Qo(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r}})}const CB=Lg("."+jg,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},AT),EB={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Ap=st.ie&&st.ie_version<=11;class OB{constructor(e,t,r){this.view=e,this.onChange=t,this.onScrollChanged=r,this.active=!1,this.selectionRange=new EL,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(i=>{for(let o of i)this.queue.push(o);(st.ie&&st.ie_version<=11||st.ios&&e.composing)&&i.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),Ap&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),this.win=e.dom.ownerDocument.defaultView,this.addWindowListeners(this.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(i=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),i.length>0&&i[i.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(i=>{i.length>0&&i[i.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,r=this.selectionRange;if(t.state.facet(Md)?t.root.activeElement!=this.dom:!zf(t.dom,r))return;let i=r.anchorNode&&t.docView.nearest(r.anchorNode);i&&i.ignoreEvent(e)||((st.ie&&st.ie_version<=11||st.android&&st.chrome)&&!t.state.selection.main.empty&&r.focusNode&&Sh(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{view:e}=this,t=st.safari&&e.root.nodeType==11&&wL()==this.dom&&kB(this.view)||wh(e.root);if(!t||this.selectionRange.eq(t))return!1;let r=zf(this.dom,t);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&kL(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,EB),Ap&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){!this.active||(this.active=!1,this.observer.disconnect(),Ap&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame(()=>{let r=this.delayedAndroidKey;this.delayedAndroidKey=null,this.delayedFlush=-1,this.flush()||Jl(this.dom,r.key,r.keyCode)}),(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout(()=>{this.delayedFlush=-1,this.flush()},20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1),this.flush()}processRecords(){let e=this.queue;for(let o of this.observer.takeRecords())e.push(o);e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let o of e){let s=this.readMutation(o);!s||(s.typeOver&&(i=!0),t==-1?{from:t,to:r}=s:(t=Math.min(s.from,t),r=Math.max(s.to,r)))}return{from:t,to:r,typeOver:i}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:r,typeOver:i}=this.processRecords(),o=this.selectionChanged&&zf(this.dom,this.selectionRange);if(t<0&&!o)return;this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=this.view.state,a=this.onChange(t,r,i);return this.view.state==s&&this.view.update([]),a}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let r=X1(t,e.previousSibling||e.target.previousSibling,-1),i=X1(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resize)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function X1(n,e,t){for(;e;){let r=vn.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function kB(n){let e=null;function t(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(n.contentDOM.addEventListener("beforeinput",t,!0),document.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let r=e.startContainer,i=e.startOffset,o=e.endContainer,s=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor);return Sh(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]),{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}function TB(n,e,t,r){let i,o,s=n.state.selection.main;if(e>-1){let a=n.docView.domBoundsAround(e,t,0);if(!a||n.state.readOnly)return!1;let{from:l,to:u}=a,f=n.docView.impreciseHead||n.docView.impreciseAnchor?[]:IB(n),c=new gT(f,n.state);c.readRange(a.startDOM,a.endDOM);let d=s.from,g=null;(n.inputState.lastKeyCode===8&&n.inputState.lastKeyTime>Date.now()-100||st.android&&c.text.length<u-l)&&(d=s.to,g="end");let h=PB(n.state.doc.sliceString(l,u,Uo),c.text,d-l,g);h&&(st.chrome&&n.inputState.lastKeyCode==13&&h.toB==h.from+2&&c.text.slice(h.from,h.toB)==Uo+Uo&&h.toB--,i={from:l+h.from,to:l+h.toA,insert:nn.of(c.text.slice(h.from,h.toB).split(Uo))}),o=AB(f,l)}else if(n.hasFocus||!n.state.facet(Md)){let a=n.observer.selectionRange,{impreciseHead:l,impreciseAnchor:u}=n.docView,f=l&&l.node==a.focusNode&&l.offset==a.focusOffset||!Da(n.contentDOM,a.focusNode)?n.state.selection.main.head:n.docView.posFromDOM(a.focusNode,a.focusOffset),c=u&&u.node==a.anchorNode&&u.offset==a.anchorOffset||!Da(n.contentDOM,a.anchorNode)?n.state.selection.main.anchor:n.docView.posFromDOM(a.anchorNode,a.anchorOffset);(f!=s.head||c!=s.anchor)&&(o=je.single(c,f))}if(!i&&!o)return!1;if(!i&&r&&!s.empty&&o&&o.main.empty?i={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:i&&i.from>=s.from&&i.to<=s.to&&(i.from!=s.from||i.to!=s.to)&&s.to-s.from-(i.to-i.from)<=4?i={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,i.from).append(i.insert).append(n.state.doc.slice(i.to,s.to))}:(st.mac||st.android)&&i&&i.from==i.to&&i.from==s.head-1&&i.insert.toString()=="."&&(i={from:s.from,to:s.to,insert:nn.of([" "])}),i){let a=n.state;if(st.ios&&n.inputState.flushIOSKey(n)||st.android&&(i.from==s.from&&i.to==s.to&&i.insert.length==1&&i.insert.lines==2&&Jl(n.contentDOM,"Enter",13)||i.from==s.from-1&&i.to==s.to&&i.insert.length==0&&Jl(n.contentDOM,"Backspace",8)||i.from==s.from&&i.to==s.to+1&&i.insert.length==0&&Jl(n.contentDOM,"Delete",46)))return!0;let l=i.insert.toString();if(n.state.facet(aT).some(c=>c(n,i.from,i.to,l)))return!0;n.inputState.composing>=0&&n.inputState.composing++;let u;if(i.from>=s.from&&i.to<=s.to&&i.to-i.from>=(s.to-s.from)/3&&(!o||o.main.empty&&o.main.from==i.from+i.insert.length)&&n.inputState.composing<0){let c=s.from<i.from?a.sliceDoc(s.from,i.from):"",d=s.to>i.to?a.sliceDoc(i.to,s.to):"";u=a.replaceSelection(n.state.toText(c+i.insert.sliceString(0,void 0,n.state.lineBreak)+d))}else{let c=a.changes(i),d=o&&!a.selection.main.eq(o.main)&&o.main.to<=c.newLength?o.main:void 0;if(a.selection.ranges.length>1&&n.inputState.composing>=0&&i.to<=s.to&&i.to>=s.to-10){let g=n.state.sliceDoc(i.from,i.to),h=vT(n)||n.state.doc.lineAt(s.head),v=s.to-i.to,m=s.to-s.from;u=a.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:c,range:d||p.map(c)};let y=p.to-v,b=y-g.length;if(p.to-p.from!=m||n.state.sliceDoc(b,y)!=g||h&&p.to>=h.from&&p.from<=h.to)return{range:p};let _=a.changes({from:b,to:y,insert:i.insert}),w=p.to-s.to;return{changes:_,range:d?je.range(Math.max(0,d.anchor+w),Math.max(0,d.head+w)):p.map(_)}})}else u={changes:c,selection:d&&a.selection.replaceRange(d)}}let f="input.type";return n.composing&&(f+=".compose",n.inputState.compositionFirstChange&&(f+=".start",n.inputState.compositionFirstChange=!1)),n.dispatch(u,{scrollIntoView:!0,userEvent:f}),!0}else if(o&&!o.main.eq(s)){let a=!1,l="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),l=n.inputState.lastSelectionOrigin),n.dispatch({selection:o,scrollIntoView:a,userEvent:l}),!0}else return!1}function PB(n,e,t,r){let i=Math.min(n.length,e.length),o=0;for(;o<i&&n.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==i&&n.length==e.length)return null;let s=n.length,a=e.length;for(;s>0&&a>0&&n.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;if(r=="end"){let l=Math.max(0,o-Math.min(s,a));t-=s+l-o}return s<o&&n.length<e.length?(o-=t<=o&&t>=s?o-t:0,a=o+(a-s),s=o):a<o&&(o-=t<=o&&t>=a?o-t:0,s=o+(s-a),a=o),{from:o,toA:s,toB:a}}function IB(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:o}=n.observer.selectionRange;return t&&(e.push(new A1(t,r)),(i!=t||o!=r)&&e.push(new A1(i,o))),e}function AB(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?je.single(t+e,r+e):null}class ut{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this._root=e.root||OL(e.parent)||document,this.viewState=new Y1(e.state||Lt.create(e)),this.plugins=this.state.facet(Nl).map(t=>new kp(t));for(let t of this.plugins)t.update(this);this.observer=new OB(this,(t,r,i)=>TB(this,t,r,i),t=>{this.inputState.runScrollHandlers(this,t),this.observer.intersecting&&this.measure()}),this.inputState=new $L(this),this.inputState.ensureHandlers(this,this.plugins),this.docView=new R1(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof Hn?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,i,o=this.state;for(let a of e){if(a.startState!=o)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");o=a.state}if(this.destroyed){this.viewState.state=o;return}if(this.observer.clear(),o.facet(Lt.phrases)!=this.state.facet(Lt.phrases))return this.setState(o);i=Oh.create(this,o,e);let s=this.viewState.scrollTarget;try{this.updateState=2;for(let a of e){if(s&&(s=s.map(a.changes)),a.scrollIntoView){let{main:l}=a.state.selection;s=new Eh(l.empty?l:je.cursor(l.head,l.head>l.anchor?-1:1))}for(let l of a.effects)l.is(P1)&&(s=l.value)}this.viewState.update(i,s),this.bidiCache=kh.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(Ml)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(a=>a.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Tc)!=i.state.facet(Tc)&&(this.viewState.mustMeasureContent=!0),(t||r||s||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let a of this.state.facet(Ig))a(i)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new Y1(e),this.plugins=e.facet(Nl).map(r=>new kp(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView=new R1(this),this.inputState.ensureHandlers(this,this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Nl),r=e.state.facet(Nl);if(t!=r){let i=[];for(let o of r){let s=t.indexOf(o);if(s<0)i.push(new kp(o));else{let a=this.plugins[s];a.mustUpdate=e,i.push(a)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=i,this.pluginMap.clear(),this.inputState.ensureHandlers(this,this.plugins)}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,{scrollHeight:r,scrollTop:i,clientHeight:o}=this.scrollDOM,s=i>r-o-4?r:i;try{for(let a=0;;a++){this.updateState=1;let l=this.viewport,u=this.viewState.lineBlockAtHeight(s),f=this.viewState.measure(this);if(!f&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];f&4||([this.measureRequests,c]=[c,this.measureRequests]);let d=c.map(m=>{try{return m.read(this)}catch(p){return Yr(this.state,p),$1}}),g=Oh.create(this,this.state,[]),h=!1,v=!1;g.flags|=f,t?t.flags|=f:t=g,this.updateState=2,g.empty||(this.updatePlugins(g),this.inputState.update(g),this.updateAttrs(),h=this.docView.update(g));for(let m=0;m<c.length;m++)if(d[m]!=$1)try{let p=c[m];p.write&&p.write(d[m],this)}catch(p){Yr(this.state,p)}if(this.viewState.scrollTarget)this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,v=!0;else{let m=this.viewState.lineBlockAt(u.from).top-u.top;(m>1||m<-1)&&(this.scrollDOM.scrollTop+=m,v=!0)}if(h&&this.docView.updateSelection(!0),this.viewport.from==l.from&&this.viewport.to==l.to&&!v&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(Ig))a(t)}get themeClasses(){return jg+" "+(this.state.facet(Dg)?IT:PT)+" "+this.state.facet(Tc)}updateAttrs(){let e=eb(this,uT,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Md)?"true":"false",class:"cm-content",style:`${st.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),eb(this,cT,t);let r=this.observer.ignore(()=>{let i=Tg(this.contentDOM,this.contentAttrs,t),o=Tg(this.dom,this.editorAttrs,e);return i||o});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let i of r.effects)if(i.is(ut.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Ml),Qo.mount(this.root,this.styleModules.concat(CB).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return Pp(this,e,L1(this,e,t,r))}moveByGroup(e,t){return Pp(this,e,L1(this,e,t,r=>ZL(this,e.head,r)))}moveToLineBoundary(e,t,r=!0){return QL(this,e,t,r)}moveVertically(e,t,r){return Pp(this,e,XL(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),_T(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),o=this.bidiSpans(i),s=o[Sa.find(o,e-i.from,-1,t)];return Rd(r,s.dir==wn.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(lT)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>RB)return pT(e.length);let t=this.textDirectionAt(e.from);for(let i of this.bidiCache)if(i.from==e.from&&i.dir==t)return i.order;let r=jL(e.text,t);return this.bidiCache.push(new kh(e.from,e.to,t,r)),r}get hasFocus(){var e;return(document.hasFocus()||st.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{zk(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return P1.of(new Eh(typeof e=="number"?je.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Bn.define(()=>({}),{eventHandlers:e})}static theme(e,t){let r=Qo.newName(),i=[Tc.of(r),Ml.of(Lg(`.${r}`,e))];return t&&t.dark&&i.push(Dg.of(!0)),i}static baseTheme(e){return il.lowest(Ml.of(Lg("."+jg,e,AT)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&vn.get(r)||vn.get(e);return((t=i==null?void 0:i.rootView)===null||t===void 0?void 0:t.view)||null}}ut.styleModule=Ml;ut.inputHandler=aT;ut.perLineTextDirection=lT;ut.exceptionSink=sT;ut.updateListener=Ig;ut.editable=Md;ut.mouseSelectionStyle=oT;ut.dragMovesSelection=iT;ut.clickAddsSelectionRange=rT;ut.decorations=gu;ut.atomicRanges=fT;ut.scrollMargins=hT;ut.darkTheme=Dg;ut.contentAttributes=cT;ut.editorAttributes=uT;ut.lineWrapping=ut.contentAttributes.of({class:"cm-lineWrapping"});ut.announce=Pt.define();const RB=4096,$1={};class kh{constructor(e,t,r,i){this.from=e,this.to=t,this.dir=r,this.order=i}static update(e,t){if(t.empty)return e;let r=[],i=e.length?e[e.length-1].dir:wn.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let s=e[o];s.dir==i&&!t.touchesRange(s.from,s.to)&&r.push(new kh(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.order))}return r}}function eb(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let o=r[i],s=typeof o=="function"?o(n):o;s&&kg(s,t)}return t}const xB=st.mac?"mac":st.windows?"win":st.linux?"linux":"key";function NB(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let i,o,s,a;for(let l=0;l<t.length-1;++l){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))o=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:o=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),o&&(r="Ctrl-"+r),a&&(r="Meta-"+r),s&&(r="Shift-"+r),r}function Pc(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const MB=il.default(ut.domEventHandlers({keydown(n,e){return xT(RT(e.state),n,e,"editor")}})),Dd=at.define({enables:MB}),tb=new WeakMap;function RT(n){let e=n.facet(Dd),t=tb.get(e);return t||tb.set(e,t=LB(e.reduce((r,i)=>r.concat(i),[]))),t}function DB(n,e,t){return xT(RT(n.state),e,n,t)}let No=null;const jB=4e3;function LB(n,e=xB){let t=Object.create(null),r=Object.create(null),i=(s,a)=>{let l=r[s];if(l==null)r[s]=a;else if(l!=a)throw new Error("Key binding "+s+" is used both as a regular binding and as a multi-stroke prefix")},o=(s,a,l,u)=>{let f=t[s]||(t[s]=Object.create(null)),c=a.split(/ (?!$)/).map(h=>NB(h,e));for(let h=1;h<c.length;h++){let v=c.slice(0,h).join(" ");i(v,!0),f[v]||(f[v]={preventDefault:!0,commands:[m=>{let p=No={view:m,prefix:v,scope:s};return setTimeout(()=>{No==p&&(No=null)},jB),!0}]})}let d=c.join(" ");i(d,!1);let g=f[d]||(f[d]={preventDefault:!1,commands:[]});g.commands.push(l),u&&(g.preventDefault=!0)};for(let s of n){let a=s[e]||s.key;if(!!a)for(let l of s.scope?s.scope.split(" "):["editor"])o(l,a,s.run,s.preventDefault),s.shift&&o(l,"Shift-"+a,s.shift,s.preventDefault)}return t}function xT(n,e,t,r){let i=bL(e),o=tr(i,0),s=Vr(o)==i.length&&i!=" ",a="",l=!1;No&&No.view==t&&No.scope==r&&(a=No.prefix+" ",(l=wT.indexOf(e.keyCode)<0)&&(No=null));let u=d=>{if(d){for(let g of d.commands)if(g(t))return!0;d.preventDefault&&(l=!0)}return!1},f=n[r],c;if(f){if(u(f[a+Pc(i,e,!s)]))return!0;if(s&&(e.shiftKey||e.altKey||e.metaKey||o>127)&&(c=Zo[e.keyCode])&&c!=i){if(u(f[a+Pc(c,e,!0)]))return!0;if(e.shiftKey&&Ma[e.keyCode]!=c&&u(f[a+Pc(Ma[e.keyCode],e,!1)]))return!0}else if(s&&e.shiftKey&&u(f[a+Pc(i,e,!0)]))return!0}return l}const NT=!st.ios,jl=at.define({combine(n){return Xi(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function BB(n={}){return[jl.of(n),FB,UB]}class MT{constructor(e,t,r,i,o){this.left=e,this.top=t,this.width=r,this.height=i,this.className=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const FB=Bn.fromClass(class{constructor(n){this.view=n,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=n.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=n.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),n.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(jl).cursorBlinkRate+"ms"}update(n){let e=n.startState.facet(jl)!=n.state.facet(jl);(e||n.selectionSet||n.geometryChanged||n.viewportChanged)&&this.view.requestMeasure(this.measureReq),n.transactions.some(t=>t.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),e&&this.setBlinkRate()}readPos(){let{state:n}=this.view,e=n.facet(jl),t=n.selection.ranges.map(i=>i.empty?[]:VB(this.view,i)).reduce((i,o)=>i.concat(o)),r=[];for(let i of n.selection.ranges){let o=i==n.selection.main;if(i.empty?!o||NT:e.drawRangeCursor){let s=qB(this.view,i,o);s&&r.push(s)}}return{rangePieces:t,cursors:r}}drawSel({rangePieces:n,cursors:e}){if(n.length!=this.rangePieces.length||n.some((t,r)=>!t.eq(this.rangePieces[r]))){this.selectionLayer.textContent="";for(let t of n)this.selectionLayer.appendChild(t.draw());this.rangePieces=n}if(e.length!=this.cursors.length||e.some((t,r)=>!t.eq(this.cursors[r]))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(const r of e)this.cursorLayer.appendChild(r.draw())}else e.forEach((r,i)=>r.adjust(t[i]));this.cursors=e}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),DT={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};NT&&(DT[".cm-line"].caretColor="transparent !important");const UB=il.highest(ut.theme(DT));function jT(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==wn.LTR?e.left:e.right-n.scrollDOM.clientWidth)-n.scrollDOM.scrollLeft,top:e.top-n.scrollDOM.scrollTop}}function nb(n,e,t){let r=je.cursor(e);return{from:Math.max(t.from,n.moveToLineBoundary(r,!1,!0).from),to:Math.min(t.to,n.moveToLineBoundary(r,!0,!0).from),type:un.Text}}function rb(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let r of t.type)if(r.to>e||r.to==e&&(r.to==t.to||r.type==un.Text))return r}return t}function VB(n,e){if(e.to<=n.viewport.from||e.from>=n.viewport.to)return[];let t=Math.max(e.from,n.viewport.from),r=Math.min(e.to,n.viewport.to),i=n.textDirection==wn.LTR,o=n.contentDOM,s=o.getBoundingClientRect(),a=jT(n),l=window.getComputedStyle(o.firstChild),u=s.left+parseInt(l.paddingLeft)+Math.min(0,parseInt(l.textIndent)),f=s.right-parseInt(l.paddingRight),c=rb(n,t),d=rb(n,r),g=c.type==un.Text?c:null,h=d.type==un.Text?d:null;if(n.lineWrapping&&(g&&(g=nb(n,t,g)),h&&(h=nb(n,r,h))),g&&h&&g.from==h.from)return m(p(e.from,e.to,g));{let b=g?p(e.from,null,g):y(c,!1),_=h?p(null,e.to,h):y(d,!0),w=[];return(g||c).to<(h||d).from-1?w.push(v(u,b.bottom,f,_.top)):b.bottom<_.top&&n.elementAtHeight((b.bottom+_.top)/2).type==un.Text&&(b.bottom=_.top=(b.bottom+_.top)/2),m(b).concat(w).concat(m(_))}function v(b,_,w,S){return new MT(b-a.left,_-a.top-.01,w-b,S-_+.01,"cm-selectionBackground")}function m({top:b,bottom:_,horizontal:w}){let S=[];for(let E=0;E<w.length;E+=2)S.push(v(w[E],b,w[E+1],_));return S}function p(b,_,w){let S=1e9,E=-1e9,P=[];function R(F,z,D,N,L){let X=n.coordsAtPos(F,F==w.to?-2:2),Q=n.coordsAtPos(D,D==w.from?2:-2);S=Math.min(X.top,Q.top,S),E=Math.max(X.bottom,Q.bottom,E),L==wn.LTR?P.push(i&&z?u:X.left,i&&N?f:Q.right):P.push(!i&&N?u:Q.left,!i&&z?f:X.right)}let j=b!=null?b:w.from,U=_!=null?_:w.to;for(let F of n.visibleRanges)if(F.to>j&&F.from<U)for(let z=Math.max(F.from,j),D=Math.min(F.to,U);;){let N=n.state.doc.lineAt(z);for(let L of n.bidiSpans(N)){let X=L.from+N.from,Q=L.to+N.from;if(X>=D)break;Q>z&&R(Math.max(X,z),b==null&&X<=j,Math.min(Q,D),_==null&&Q>=U,L.dir)}if(z=N.to+1,z>=D)break}return P.length==0&&R(j,b==null,U,_==null,n.textDirection),{top:S,bottom:E,horizontal:P}}function y(b,_){let w=s.top+(_?b.top:b.bottom);return{top:w,bottom:w,horizontal:[]}}}function qB(n,e,t){let r=n.coordsAtPos(e.head,e.assoc||1);if(!r)return null;let i=jT(n);return new MT(r.left-i.left,r.top-i.top,-1,r.bottom-r.top,t?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const LT=Pt.define({map(n,e){return n==null?null:e.mapPos(n)}}),Ll=zn.define({create(){return null},update(n,e){return n!=null&&(n=e.changes.mapPos(n)),e.effects.reduce((t,r)=>r.is(LT)?r.value:t,n)}}),HB=Bn.fromClass(class{constructor(n){this.view=n,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(n){var e;let t=n.state.field(Ll);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(n.startState.field(Ll)!=t||n.docChanged||n.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let n=this.view.state.field(Ll),e=n!=null&&this.view.coordsAtPos(n);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(n){this.cursor&&(n?(this.cursor.style.left=n.left+"px",this.cursor.style.top=n.top+"px",this.cursor.style.height=n.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(n){this.view.state.field(Ll)!=n&&this.view.dispatch({effects:LT.of(n)})}},{eventHandlers:{dragover(n){this.setDropPos(this.view.posAtCoords({x:n.clientX,y:n.clientY}))},dragleave(n){(n.target==this.view.contentDOM||!this.view.contentDOM.contains(n.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function zB(){return[Ll,HB]}function ib(n,e,t,r,i){e.lastIndex=0;for(let o=n.iterRange(t,r),s=t,a;!o.next().done;s+=o.value.length)if(!o.lineBreak)for(;a=e.exec(o.value);)i(s+a.index,a)}function WB(n,e){let t=n.visibleRanges;if(t.length==1&&t[0].from==n.viewport.from&&t[0].to==n.viewport.to)return t;let r=[];for(let{from:i,to:o}of t)i=Math.max(n.state.doc.lineAt(i).from,i-e),o=Math.min(n.state.doc.lineAt(o).to,o+e),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}class KB{constructor(e){const{regexp:t,decoration:r,decorate:i,boundary:o,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(a,l,u,f)=>i(f,u,u+a[0].length,a,l);else if(r){let a=typeof r=="function"?r:()=>r;this.addMatch=(l,u,f,c)=>c(f,f+l[0].length,a(l,u,f))}else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=o,this.maxLength=s}createDeco(e){let t=new Jo,r=t.add.bind(t);for(let{from:i,to:o}of WB(e,this.maxLength))ib(e.state.doc,this.regexp,i,o,(s,a)=>this.addMatch(a,e,s,r));return t.finish()}updateDeco(e,t){let r=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((o,s,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(r=Math.min(a,r),i=Math.max(l,i))}),e.viewportChanged||i-r>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),r,i):t}updateRange(e,t,r,i){for(let o of e.visibleRanges){let s=Math.max(o.from,r),a=Math.min(o.to,i);if(a>s){let l=e.state.doc.lineAt(s),u=l.to<a?e.state.doc.lineAt(a):l,f=Math.max(o.from,l.from),c=Math.min(o.to,u.to);if(this.boundary){for(;s>l.from;s--)if(this.boundary.test(l.text[s-1-l.from])){f=s;break}for(;a<u.to;a++)if(this.boundary.test(u.text[a-u.from])){c=a;break}}let d=[],g,h=(v,m,p)=>d.push(p.range(v,m));if(l==u)for(this.regexp.lastIndex=f-l.from;(g=this.regexp.exec(l.text))&&g.index<c-l.from;)this.addMatch(g,e,g.index+l.from,h);else ib(e.state.doc,this.regexp,f,c,(v,m)=>this.addMatch(m,e,v,h));t=t.update({filterFrom:f,filterTo:c,filter:(v,m)=>v<f||m>c,add:d})}}return t}}const Bg=/x/.unicode!=null?"gu":"g",GB=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,Bg),YB={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Rp=null;function JB(){var n;if(Rp==null&&typeof document<"u"&&document.body){let e=document.body.style;Rp=((n=e.tabSize)!==null&&n!==void 0?n:e.MozTabSize)!=null}return Rp||!1}const Kf=at.define({combine(n){let e=Xi(n,{render:null,specialChars:GB,addSpecialChars:null});return(e.replaceTabs=!JB())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Bg)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Bg)),e}});function QB(n={}){return[Kf.of(n),ZB()]}let ob=null;function ZB(){return ob||(ob=Bn.fromClass(class{constructor(n){this.view=n,this.decorations=pt.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(n.state.facet(Kf)),this.decorations=this.decorator.createDeco(n)}makeDecorator(n){return new KB({regexp:n.specialChars,decoration:(e,t,r)=>{let{doc:i}=t.state,o=tr(e[0],0);if(o==9){let s=i.lineAt(r),a=t.state.tabSize,l=Uu(s.text,a,r-s.from);return pt.replace({widget:new t7((a-l%a)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=pt.replace({widget:new e7(n,o)}))},boundary:n.replaceTabs?void 0:/[^]/})}update(n){let e=n.state.facet(Kf);n.startState.facet(Kf)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(n.view)):this.decorations=this.decorator.updateDeco(n,this.decorations)}},{decorations:n=>n.decorations}))}const XB="\u2022";function $B(n){return n>=32?XB:n==10?"\u2424":String.fromCharCode(9216+n)}class e7 extends os{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=$B(this.code),r=e.state.phrase("Control character")+" "+(YB[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,r,t);if(i)return i;let o=document.createElement("span");return o.textContent=t,o.title=r,o.setAttribute("aria-label",r),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class t7 extends os{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function n7(){return i7}const r7=pt.line({class:"cm-activeLine"}),i7=Bn.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){if(!r.empty)return pt.none;let i=n.lineBlockAt(r.head);i.from>e&&(t.push(r7.range(i.from)),e=i.from)}return pt.set(t)}},{decorations:n=>n.decorations}),Fg=2e3;function o7(n,e,t){let r=Math.min(e.line,t.line),i=Math.max(e.line,t.line),o=[];if(e.off>Fg||t.off>Fg||e.col<0||t.col<0){let s=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let l=r;l<=i;l++){let u=n.doc.line(l);u.length<=a&&o.push(je.range(u.from+s,u.to+a))}}else{let s=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let l=r;l<=i;l++){let u=n.doc.line(l),f=yg(u.text,s,n.tabSize,!0);if(f>-1){let c=yg(u.text,a,n.tabSize);o.push(je.range(u.from+f,u.from+c))}}}return o}function s7(n,e){let t=n.coordsAtPos(n.viewport.from);return t?Math.round(Math.abs((t.left-e)/n.defaultCharacterWidth)):-1}function sb(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1),r=n.state.doc.lineAt(t),i=t-r.from,o=i>Fg?-1:i==r.length?s7(n,e.clientX):Uu(r.text,n.state.tabSize,t-r.from);return{line:r.number,col:o,off:i}}function a7(n,e){let t=sb(n,e),r=n.state.selection;return t?{update(i){if(i.docChanged){let o=i.changes.mapPos(i.startState.doc.line(t.line).from),s=i.state.doc.lineAt(o);t={line:s.number,col:t.col,off:Math.min(t.off,s.length)},r=r.map(i.changes)}},get(i,o,s){let a=sb(n,i);if(!a)return r;let l=o7(n.state,t,a);return l.length?s?je.create(l.concat(r.ranges)):je.create(l):r}}:null}function l7(n){let e=(n==null?void 0:n.eventFilter)||(t=>t.altKey&&t.button==0);return ut.mouseSelectionStyle.of((t,r)=>e(r)?a7(t,r):null)}const u7={Alt:[18,n=>n.altKey],Control:[17,n=>n.ctrlKey],Shift:[16,n=>n.shiftKey],Meta:[91,n=>n.metaKey]},c7={style:"cursor: crosshair"};function f7(n={}){let[e,t]=u7[n.key||"Alt"],r=Bn.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventHandlers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)}}});return[r,ut.contentAttributes.of(i=>{var o;return!((o=i.plugin(r))===null||o===void 0)&&o.isDown?c7:null})]}const xp="-10000px";class BT{constructor(e,t,r){this.facet=t,this.createTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter(i=>i),this.tooltipViews=this.tooltips.map(r)}update(e){let t=e.state.facet(this.facet),r=t.filter(o=>o);if(t===this.input){for(let o of this.tooltipViews)o.update&&o.update(e);return!1}let i=[];for(let o=0;o<r.length;o++){let s=r[o],a=-1;if(!!s){for(let l=0;l<this.tooltips.length;l++){let u=this.tooltips[l];u&&u.create==s.create&&(a=l)}if(a<0)i[o]=this.createTooltipView(s);else{let l=i[o]=this.tooltipViews[a];l.update&&l.update(e)}}}for(let o of this.tooltipViews)i.indexOf(o)<0&&o.dom.remove();return this.input=t,this.tooltips=r,this.tooltipViews=i,!0}}function h7(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}const Np=at.define({combine:n=>{var e,t,r;return{position:st.ios?"absolute":((e=n.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((r=n.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||h7}}}),FT=Bn.fromClass(class{constructor(n){var e;this.view=n,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let t=n.state.facet(Np);this.position=t.position,this.parent=t.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new BT(n,jd,r=>this.createTooltip(r)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(r=>{Date.now()>this.lastTransaction-50&&r.length>0&&r[r.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),(e=n.dom.ownerDocument.defaultView)===null||e===void 0||e.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(Np);if(r.position!=this.position){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n){let e=n.create(this.view);if(e.dom.classList.add("cm-tooltip"),n.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=xp,this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var n,e;(n=this.view.dom.ownerDocument.defaultView)===null||n===void 0||n.removeEventListener("resize",this.measureSoon);for(let{dom:t}of this.manager.tooltipViews)t.remove();(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=this.view.dom.getBoundingClientRect();return{editor:n,parent:this.parent?this.container.getBoundingClientRect():n,pos:this.manager.tooltips.map((e,t)=>{let r=this.manager.tooltipViews[t];return r.getCoords?r.getCoords(e.pos):this.view.coordsAtPos(e.pos)}),size:this.manager.tooltipViews.map(({dom:e})=>e.getBoundingClientRect()),space:this.view.state.facet(Np).tooltipSpace(this.view)}}writeMeasure(n){let{editor:e,space:t}=n,r=[];for(let i=0;i<this.manager.tooltips.length;i++){let o=this.manager.tooltips[i],s=this.manager.tooltipViews[i],{dom:a}=s,l=n.pos[i],u=n.size[i];if(!l||l.bottom<=Math.max(e.top,t.top)||l.top>=Math.min(e.bottom,t.bottom)||l.right<Math.max(e.left,t.left)-.1||l.left>Math.min(e.right,t.right)+.1){a.style.top=xp;continue}let f=o.arrow?s.dom.querySelector(".cm-tooltip-arrow"):null,c=f?7:0,d=u.right-u.left,g=u.bottom-u.top,h=s.offset||p7,v=this.view.textDirection==wn.LTR,m=u.width>t.right-t.left?v?t.left:t.right-u.width:v?Math.min(l.left-(f?14:0)+h.x,t.right-d):Math.max(t.left,l.left-d+(f?14:0)-h.x),p=!!o.above;!o.strictSide&&(p?l.top-(u.bottom-u.top)-h.y<t.top:l.bottom+(u.bottom-u.top)+h.y>t.bottom)&&p==t.bottom-l.bottom>l.top-t.top&&(p=!p);let y=p?l.top-g-c-h.y:l.bottom+c+h.y,b=m+d;if(s.overlap!==!0)for(let _ of r)_.left<b&&_.right>m&&_.top<y+g&&_.bottom>y&&(y=p?_.top-g-2-c:_.bottom+c+2);this.position=="absolute"?(a.style.top=y-n.parent.top+"px",a.style.left=m-n.parent.left+"px"):(a.style.top=y+"px",a.style.left=m+"px"),f&&(f.style.left=`${l.left+(v?h.x:-h.x)-(m+14-7)}px`),s.overlap!==!0&&r.push({left:m,top:y,right:b,bottom:y+g}),a.classList.toggle("cm-tooltip-above",p),a.classList.toggle("cm-tooltip-below",!p),s.positioned&&s.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=xp}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),d7=ut.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),p7={x:0,y:0},jd=at.define({enables:[FT,d7]}),Th=at.define();class pv{constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new BT(e,Th,t=>this.createHostedView(t))}static create(e){return new pv(e)}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned()}update(e){this.manager.update(e)}}const m7=jd.compute([Th],n=>{let e=n.facet(Th).filter(t=>t);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.filter(t=>t.end!=null).map(t=>t.end)),create:pv.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class g7{constructor(e,t,r,i,o){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=o,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{lastMove:e}=this,t=this.view.contentDOM.contains(e.target)?this.view.posAtCoords(e):null;if(t==null)return;let r=this.view.coordsAtPos(t);if(r==null||e.y<r.top||e.y>r.bottom||e.x<r.left-this.view.defaultCharacterWidth||e.x>r.right+this.view.defaultCharacterWidth)return;let i=this.view.bidiSpans(this.view.state.doc.lineAt(t)).find(a=>a.from<=t&&a.to>=t),o=i&&i.dir==wn.RTL?-1:1,s=this.source(this.view,t,e.x<r.left?-o:o);if(s!=null&&s.then){let a=this.pending={pos:t};s.then(l=>{this.pending==a&&(this.pending=null,l&&this.view.dispatch({effects:this.setHover.of(l)}))},l=>Yr(this.view.state,l,"hover tooltip"))}else s&&this.view.dispatch({effects:this.setHover.of(s)})}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let r=this.active;if(r&&!v7(this.lastMove.target)||this.pending){let{pos:i}=r||this.pending,o=(t=r==null?void 0:r.end)!==null&&t!==void 0?t:i;(i==o?this.view.posAtCoords(this.lastMove)!=i:!y7(this.view,i,o,e.clientX,e.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function v7(n){for(let e=n;e;e=e.parentNode)if(e.nodeType==1&&e.classList.contains("cm-tooltip"))return!0;return!1}function y7(n,e,t,r,i,o){let s=document.createRange(),a=n.domAtPos(e),l=n.domAtPos(t);s.setEnd(l.node,l.offset),s.setStart(a.node,a.offset);let u=s.getClientRects();s.detach();for(let f=0;f<u.length;f++){let c=u[f];if(Math.max(c.top-i,i-c.bottom,c.left-r,r-c.right)<=o)return!0}return!1}function _7(n,e={}){let t=Pt.define(),r=zn.define({create(){return null},update(i,o){if(i&&(e.hideOnChange&&(o.docChanged||o.selection)||e.hideOn&&e.hideOn(o,i)))return null;if(i&&o.docChanged){let s=o.changes.mapPos(i.pos,-1,dr.TrackDel);if(s==null)return null;let a=Object.assign(Object.create(null),i);a.pos=s,i.end!=null&&(a.end=o.changes.mapPos(i.end)),i=a}for(let s of o.effects)s.is(t)&&(i=s.value),s.is(w7)&&(i=null);return i},provide:i=>Th.from(i)});return[r,Bn.define(i=>new g7(i,n,r,t,e.hoverTime||300)),m7]}function b7(n,e){let t=n.plugin(FT);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}const w7=Pt.define(),ab=at.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});function vu(n,e){let t=n.plugin(UT),r=t?t.specs.indexOf(e):-1;return r>-1?t.panels[r]:null}const UT=Bn.fromClass(class{constructor(n){this.input=n.state.facet(yu),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(ab);this.top=new Ic(n,!0,e.topContainer),this.bottom=new Ic(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(ab);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Ic(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ic(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(yu);if(t!=this.input){let r=t.filter(l=>l),i=[],o=[],s=[],a=[];for(let l of r){let u=this.specs.indexOf(l),f;u<0?(f=l(n.view),a.push(f)):(f=this.panels[u],f.update&&f.update(n)),i.push(f),(f.top?o:s).push(f)}this.specs=r,this.panels=i,this.top.sync(o),this.bottom.sync(s);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>ut.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Ic{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=lb(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=lb(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function lb(n){let e=n.nextSibling;return n.remove(),e}const yu=at.define({enables:UT});class Qi extends Ls{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Qi.prototype.elementClass="";Qi.prototype.toDOM=void 0;Qi.prototype.mapMode=dr.TrackBefore;Qi.prototype.startSide=Qi.prototype.endSide=-1;Qi.prototype.point=!0;const Gf=at.define(),S7={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Jt.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Ql=at.define();function VT(n){return[qT(),Ql.of(Object.assign(Object.assign({},S7),n))]}const Ug=at.define({combine:n=>n.some(e=>e)});function qT(n){let e=[C7];return n&&n.fixed===!1&&e.push(Ug.of(!0)),e}const C7=Bn.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=n.state.facet(Ql).map(e=>new cb(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(Ug),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Ug)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=Jt.iter(this.view.state.facet(Gf),this.view.viewport.from),r=[],i=this.gutters.map(o=>new E7(o,this.view.viewport,-this.view.documentPadding.top));for(let o of this.view.viewportLineBlocks){let s;if(Array.isArray(o.type)){for(let a of o.type)if(a.type==un.Text){s=a;break}}else s=o.type==un.Text?o:void 0;if(!!s){r.length&&(r=[]),HT(t,r,o.from);for(let a of i)a.line(this.view,s,r)}}for(let o of i)o.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(Ql),t=n.state.facet(Ql),r=n.docChanged||n.heightChanged||n.viewportChanged||!Jt.eq(n.startState.facet(Gf),n.state.facet(Gf),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let o of t){let s=e.indexOf(o);s<0?i.push(new cb(this.view,o)):(this.gutters[s].update(n),i.push(this.gutters[s]))}for(let o of this.gutters)o.dom.remove(),i.indexOf(o)<0&&o.destroy();for(let o of i)this.dom.appendChild(o.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>ut.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==wn.LTR?{left:t.dom.offsetWidth}:{right:t.dom.offsetWidth}})});function ub(n){return Array.isArray(n)?n:[n]}function HT(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class E7{constructor(e,t,r){this.gutter=e,this.height=r,this.localMarkers=[],this.i=0,this.cursor=Jt.iter(e.markers,t.from)}line(e,t,r){this.localMarkers.length&&(this.localMarkers=[]),HT(this.cursor,this.localMarkers,t.from);let i=r.length?this.localMarkers.concat(r):this.localMarkers,o=this.gutter.config.lineMarker(e,t,i);o&&i.unshift(o);let s=this.gutter;if(i.length==0&&!s.config.renderEmptyElements)return;let a=t.top-this.height;if(this.i==s.elements.length){let l=new zT(e,t.height,a,i);s.elements.push(l),s.dom.appendChild(l.dom)}else s.elements[this.i].update(e,t.height,a,i);this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class cb{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let o=e.lineBlockAtHeight(i.clientY-e.documentTop);t.domEventHandlers[r](e,o,i)&&i.preventDefault()});this.markers=ub(t.markers(e)),t.initialSpacer&&(this.spacer=new zT(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=ub(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!Jt.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class zT{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),O7(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let o=0,s=0;;){let a=s,l=o<t.length?t[o++]:null,u=!1;if(l){let f=l.elementClass;f&&(r+=" "+f);for(let c=s;c<this.markers.length;c++)if(this.markers[c].compare(l)){a=c,u=!0;break}}else a=this.markers.length;for(;s<a;){let f=this.markers[s++];if(f.toDOM){f.destroy(i);let c=i.nextSibling;i.remove(),i=c}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&s++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function O7(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const k7=at.define(),ma=at.define({combine(n){return Xi(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let o=r[i],s=t[i];r[i]=o?(a,l,u)=>o(a,l,u)||s(a,l,u):s}return r}})}});class Mp extends Qi{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Dp(n,e){return n.state.facet(ma).formatNumber(e,n.state)}const T7=Ql.compute([ma],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(k7)},lineMarker(e,t,r){return r.some(i=>i.toDOM)?null:new Mp(Dp(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:e=>e.startState.facet(ma)!=e.state.facet(ma),initialSpacer(e){return new Mp(Dp(e,fb(e.state.doc.lines)))},updateSpacer(e,t){let r=Dp(t.view,fb(t.view.state.doc.lines));return r==e.number?e:new Mp(r)},domEventHandlers:n.facet(ma).domEventHandlers}));function P7(n={}){return[ma.of(n),qT(),T7]}function fb(n){let e=9;for(;e<n;)e=e*10+9;return e}const I7=new class extends Qi{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},A7=Gf.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges)if(r.empty){let i=n.doc.lineAt(r.head).from;i>t&&(t=i,e.push(I7.range(i)))}return Jt.of(e)});function R7(){return A7}const WT=1024;let x7=0;class jp{constructor(e,t){this.from=e,this.to=t}}class Bt{constructor(e={}){this.id=x7++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Mr.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}Bt.closedBy=new Bt({deserialize:n=>n.split(" ")});Bt.openedBy=new Bt({deserialize:n=>n.split(" ")});Bt.group=new Bt({deserialize:n=>n.split(" ")});Bt.contextHash=new Bt({perNode:!0});Bt.lookAhead=new Bt({perNode:!0});Bt.mounted=new Bt({perNode:!0});const N7=Object.create(null);class Mr{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):N7,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Mr(e.name||"",t,e.id,r);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(i)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Bt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(Bt.group),o=-1;o<(i?i.length:0);o++){let s=t[o<0?r.name:i[o]];if(s)return s}}}}Mr.none=new Mr("",Object.create(null),0,8);class mv{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let o of e){let s=o(r);s&&(i||(i=Object.assign({},r.props)),i[s[0].id]=s[1])}t.push(i?new Mr(r.name,i,r.id,r.flags):r)}return new mv(t)}}const Ac=new WeakMap,hb=new WeakMap;var rr;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(rr||(rr={}));class jn{constructor(e,t,r,i,o){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,a]of o)this.props[typeof s=="number"?s:s.id]=a}}toString(){let e=this.prop(Bt.mounted);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Ah(this.topNode,e)}cursorAt(e,t=0,r=0){let i=Ac.get(this)||this.topNode,o=new Ah(i);return o.moveTo(e,t),Ac.set(this,o._tree),o}get topNode(){return new co(this,0,0,null)}resolve(e,t=0){let r=Ba(Ac.get(this)||this.topNode,e,t,!1);return Ac.set(this,r),r}resolveInner(e,t=0){let r=Ba(hb.get(this)||this.topNode,e,t,!0);return hb.set(this,r),r}iterate(e){let{enter:t,leave:r,from:i=0,to:o=this.length}=e;for(let s=this.cursor((e.mode||0)|rr.IncludeAnonymous);;){let a=!1;if(s.from<=o&&s.to>=i&&(s.type.isAnonymous||t(s)!==!1)){if(s.firstChild())continue;a=!0}for(;a&&r&&!s.type.isAnonymous&&r(s),!s.nextSibling();){if(!s.parent())return;a=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:yv(Mr.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new jn(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new jn(Mr.none,t,r,i)))}static build(e){return D7(e)}}jn.empty=new jn(Mr.none,[],[],0);class gv{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new gv(this.buffer,this.index)}}class Qs{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return Mr.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],o=i.name;if(/\W/.test(o)&&!i.isError&&(o=JSON.stringify(o)),e+=4,r==e)return o;let s=[];for(;e<r;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,t,r,i,o){let{buffer:s}=this,a=-1;for(let l=e;l!=t&&!(KT(o,i,s[l+1],s[l+2])&&(a=l,r>0));l=s[l+3]);return a}slice(e,t,r,i){let o=this.buffer,s=new Uint16Array(t-e);for(let a=e,l=0;a<t;)s[l++]=o[a++],s[l++]=o[a++]-r,s[l++]=o[a++]-r,s[l++]=o[a++]-e;return new Qs(s,i-r,this.set)}}function KT(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function GT(n,e){let t=n.childBefore(e);for(;t;){let r=t.lastChild;if(!r||r.to!=t.to)break;r.type.isError&&r.from==r.to?(n=t,t=r.prevSibling):t=r}return n}function Ba(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let s=!r&&n instanceof co&&n.index<0?null:n.parent;if(!s)return n;n=s}let o=r?0:rr.IgnoreOverlays;if(r)for(let s=n,a=s.parent;a;s=a,a=s.parent)s instanceof co&&s.index<0&&((i=a.enter(e,t,o))===null||i===void 0?void 0:i.from)!=s.from&&(n=a);for(;;){let s=n.enter(e,t,o);if(!s)return n;n=s}}class co{constructor(e,t,r,i){this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,o=0){for(let s=this;;){for(let{children:a,positions:l}=s._tree,u=t>0?a.length:-1;e!=u;e+=t){let f=a[e],c=l[e]+s.from;if(!!KT(i,r,c,c+f.length)){if(f instanceof Qs){if(o&rr.ExcludeBuffers)continue;let d=f.findChild(0,f.buffer.length,t,r-c,i);if(d>-1)return new qo(new M7(s,f,e,c),null,d)}else if(o&rr.IncludeAnonymous||!f.type.isAnonymous||vv(f)){let d;if(!(o&rr.IgnoreMounts)&&f.props&&(d=f.prop(Bt.mounted))&&!d.overlay)return new co(d.tree,c,e,s);let g=new co(f,c,e,s);return o&rr.IncludeAnonymous||!g.type.isAnonymous?g:g.nextChild(t<0?f.children.length-1:0,t,r,i)}}}if(o&rr.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&rr.IgnoreOverlays)&&(i=this._tree.prop(Bt.mounted))&&i.overlay){let o=e-this.from;for(let{from:s,to:a}of i.overlay)if((t>0?s<=o:s<o)&&(t<0?a>=o:a>o))return new co(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}cursor(e=0){return new Ah(this,e)}get tree(){return this._tree}toTree(){return this._tree}resolve(e,t=0){return Ba(this,e,t,!1)}resolveInner(e,t=0){return Ba(this,e,t,!0)}enterUnfinishedNodesBefore(e){return GT(this,e)}getChild(e,t=null,r=null){let i=Ph(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return Ph(this,e,t,r)}toString(){return this._tree.toString()}get node(){return this}matchContext(e){return Ih(this,e)}}function Ph(n,e,t,r){let i=n.cursor(),o=[];if(!i.firstChild())return o;if(t!=null){for(;!i.type.is(t);)if(!i.nextSibling())return o}for(;;){if(r!=null&&i.type.is(r))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return r==null?o:[]}}function Ih(n,e,t=e.length-1){for(let r=n.parent;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class M7{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class qo{constructor(e,t,r){this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t,r){let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return o<0?null:new qo(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&rr.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new qo(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new qo(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new qo(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}cursor(e=0){return new Ah(this,e)}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,o=r.buffer[this.index+3];if(o>i){let s=r.buffer[this.index+1],a=r.buffer[this.index+2];e.push(r.slice(i,o,s,a)),t.push(0)}return new jn(this.type,e,t,this.to-this.from)}resolve(e,t=0){return Ba(this,e,t,!1)}resolveInner(e,t=0){return Ba(this,e,t,!0)}enterUnfinishedNodesBefore(e){return GT(this,e)}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,r=null){let i=Ph(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return Ph(this,e,t,r)}get node(){return this}matchContext(e){return Ih(this,e)}}class Ah{constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof co)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof co?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,o=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&rr.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&rr.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&rr.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(i.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let o=t+e,s=e<0?-1:r._tree.children.length;o!=s;o+=e){let a=r._tree.children[o];if(this.mode&rr.IncludeAnonymous||a instanceof Qs||!a.type.isAnonymous||vv(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer){e:for(let i=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,r=o+1;break e}i=this.stack[--o]}}for(let i=r;i<this.stack.length;i++)t=new qo(this.buffer,t,this.stack[i]);return this.bufferNode=new qo(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Ih(this.node,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,o=this.stack.length-1;i>=0;o--){if(o<0)return Ih(this.node,e,i);let s=r[t.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function vv(n){return n.children.some(e=>e instanceof Qs||!e.type.isAnonymous||vv(e))}function D7(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=WT,reused:o=[],minRepeatType:s=r.types.length}=n,a=Array.isArray(t)?new gv(t,t.length):t,l=r.types,u=0,f=0;function c(_,w,S,E,P){let{id:R,start:j,end:U,size:F}=a,z=f;for(;F<0;)if(a.next(),F==-1){let Q=o[R];S.push(Q),E.push(j-_);return}else if(F==-3){u=R;return}else if(F==-4){f=R;return}else throw new RangeError(`Unrecognized record size: ${F}`);let D=l[R],N,L,X=j-_;if(U-j<=i&&(L=v(a.pos-w,P))){let Q=new Uint16Array(L.size-L.skip),A=a.pos-L.size,k=Q.length;for(;a.pos>A;)k=m(L.start,Q,k);N=new Qs(Q,U-L.start,r),X=L.start-_}else{let Q=a.pos-F;a.next();let A=[],k=[],V=R>=s?R:-1,K=0,H=U;for(;a.pos>Q;)V>=0&&a.id==V&&a.size>=0?(a.end<=H-i&&(g(A,k,j,K,a.end,H,V,z),K=A.length,H=a.end),a.next()):c(j,Q,A,k,V);if(V>=0&&K>0&&K<A.length&&g(A,k,j,K,j,H,V,z),A.reverse(),k.reverse(),V>-1&&K>0){let I=d(D);N=yv(D,A,k,0,A.length,0,U-j,I,I)}else N=h(D,A,k,U-j,z-U)}S.push(N),E.push(X)}function d(_){return(w,S,E)=>{let P=0,R=w.length-1,j,U;if(R>=0&&(j=w[R])instanceof jn){if(!R&&j.type==_&&j.length==E)return j;(U=j.prop(Bt.lookAhead))&&(P=S[R]+j.length+U)}return h(_,w,S,E,P)}}function g(_,w,S,E,P,R,j,U){let F=[],z=[];for(;_.length>E;)F.push(_.pop()),z.push(w.pop()+S-P);_.push(h(r.types[j],F,z,R-P,U-R)),w.push(P-S)}function h(_,w,S,E,P=0,R){if(u){let j=[Bt.contextHash,u];R=R?[j].concat(R):[j]}if(P>25){let j=[Bt.lookAhead,P];R=R?[j].concat(R):[j]}return new jn(_,w,S,E,R)}function v(_,w){let S=a.fork(),E=0,P=0,R=0,j=S.end-i,U={size:0,start:0,skip:0};e:for(let F=S.pos-_;S.pos>F;){let z=S.size;if(S.id==w&&z>=0){U.size=E,U.start=P,U.skip=R,R+=4,E+=4,S.next();continue}let D=S.pos-z;if(z<0||D<F||S.start<j)break;let N=S.id>=s?4:0,L=S.start;for(S.next();S.pos>D;){if(S.size<0)if(S.size==-3)N+=4;else break e;else S.id>=s&&(N+=4);S.next()}P=L,E+=z,R+=N}return(w<0||E==_)&&(U.size=E,U.start=P,U.skip=R),U.size>4?U:void 0}function m(_,w,S){let{id:E,start:P,end:R,size:j}=a;if(a.next(),j>=0&&E<s){let U=S;if(j>4){let F=a.pos-(j-4);for(;a.pos>F;)S=m(_,w,S)}w[--S]=U,w[--S]=R-_,w[--S]=P-_,w[--S]=E}else j==-3?u=E:j==-4&&(f=E);return S}let p=[],y=[];for(;a.pos>0;)c(n.start||0,n.bufferStart||0,p,y,-1);let b=(e=n.length)!==null&&e!==void 0?e:p.length?y[0]+p[0].length:0;return new jn(l[n.topID],p.reverse(),y.reverse(),b)}const db=new WeakMap;function Yf(n,e){if(!n.isAnonymous||e instanceof Qs||e.type!=n)return 1;let t=db.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof jn)){t=1;break}t+=Yf(n,r)}db.set(e,t)}return t}function yv(n,e,t,r,i,o,s,a,l){let u=0;for(let h=r;h<i;h++)u+=Yf(n,e[h]);let f=Math.ceil(u*1.5/8),c=[],d=[];function g(h,v,m,p,y){for(let b=m;b<p;){let _=b,w=v[b],S=Yf(n,h[b]);for(b++;b<p;b++){let E=Yf(n,h[b]);if(S+E>=f)break;S+=E}if(b==_+1){if(S>f){let E=h[_];g(E.children,E.positions,0,E.children.length,v[_]+y);continue}c.push(h[_])}else{let E=v[b-1]+h[b-1].length-w;c.push(yv(n,h,v,_,b,w,E,null,l))}d.push(w+y-o)}}return g(e,t,r,i,0),(a||l)(c,d,s)}class Ps{constructor(e,t,r,i,o=!1,s=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new Ps(0,e.length,e,0,!1,r)];for(let o of t)o.to>e.length&&i.push(o);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],o=1,s=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let f=a<t.length?t[a]:null,c=f?f.fromA:1e9;if(c-l>=r)for(;s&&s.from<c;){let d=s;if(l>=d.from||c<=d.to||u){let g=Math.max(d.from,l)-u,h=Math.min(d.to,c)-u;d=g>=h?null:new Ps(g,h,d.tree,d.offset+u,a>0,!!f)}if(d&&i.push(d),s.to>c)break;s=o<e.length?e[o++]:null}if(!f)break;l=f.toA,u=f.toA-f.toB}return i}}class YT{startParse(e,t,r){return typeof e=="string"&&(e=new j7(e)),r=r?r.length?r.map(i=>new jp(i.from,i.to)):[new jp(0,0)]:[new jp(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let o=i.advance();if(o)return o}}}class j7{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Bt({perNode:!0});let L7=0;class Fi{constructor(e,t,r){this.set=e,this.base=t,this.modified=r,this.id=L7++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new Fi([],null,[]);if(t.set.push(t),e)for(let r of e.set)t.set.push(r);return t}static defineModifier(){let e=new Rh;return t=>t.modified.indexOf(e)>-1?t:Rh.get(t.base||t,t.modified.concat(e).sort((r,i)=>r.id-i.id))}}let B7=0;class Rh{constructor(){this.instances=[],this.id=B7++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(a=>a.base==e&&F7(t,a.modified));if(r)return r;let i=[],o=new Fi(i,e,t);for(let a of t)a.instances.push(o);let s=JT(t);for(let a of e.set)for(let l of s)i.push(Rh.get(a,l));return o}}function F7(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function JT(n){let e=[n];for(let t=0;t<n.length;t++)for(let r of JT(n.slice(0,t).concat(n.slice(t+1))))e.push(r);return e}function QT(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let o=[],s=2,a=i;for(let c=0;;){if(a=="..."&&c>0&&c+3==i.length){s=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!d)throw new RangeError("Invalid path: "+i);if(o.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),c+=d[0].length,c==i.length)break;let g=i[c++];if(c==i.length&&g=="!"){s=0;break}if(g!="/")throw new RangeError("Invalid path: "+i);a=i.slice(c)}let l=o.length-1,u=o[l];if(!u)throw new RangeError("Invalid path: "+i);let f=new U7(r,s,l>0?o.slice(0,l):null);e[u]=f.sort(e[u])}}return ZT.add(e)}const ZT=new Bt;class U7{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function XT(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let s of o.tag)t[s.id]=o.class;let{scope:r,all:i=null}=e||{};return{style:o=>{let s=i;for(let a of o)for(let l of a.set){let u=t[l.id];if(u){s=s?s+" "+u:u;break}}return s},scope:r}}function V7(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function q7(n,e,t,r=0,i=n.length){let o=new H7(r,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),r,i,"",o.highlighters),o.flush(i)}class H7{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,o){let{type:s,from:a,to:l}=e;if(a>=r||l<=t)return;s.isTop&&(o=this.highlighters.filter(g=>!g.scope||g.scope(s)));let u=i,f=s.prop(ZT),c=!1;for(;f;){if(!f.context||e.matchContext(f.context)){let g=V7(o,f.tags);g&&(u&&(u+=" "),u+=g,f.mode==1?i+=(i?" ":"")+g:f.mode==0&&(c=!0));break}f=f.next}if(this.startSpan(e.from,u),c)return;let d=e.tree&&e.tree.prop(Bt.mounted);if(d&&d.overlay){let g=e.node.enter(d.overlay[0].from+a,1),h=this.highlighters.filter(m=>!m.scope||m.scope(d.tree.type)),v=e.firstChild();for(let m=0,p=a;;m++){let y=m<d.overlay.length?d.overlay[m]:null,b=y?y.from+a:l,_=Math.max(t,p),w=Math.min(r,b);if(_<w&&v)for(;e.from<w&&(this.highlightRange(e,_,w,i,o),this.startSpan(Math.min(r,e.to),u),!(e.to>=b||!e.nextSibling())););if(!y||b>r)break;p=y.to+a,p>t&&(this.highlightRange(g.cursor(),Math.max(t,y.from+a),Math.min(r,p),i,h),this.startSpan(p,u))}v&&e.parent()}else if(e.firstChild()){do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,o),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}}const Ye=Fi.define,Rc=Ye(),Ao=Ye(),pb=Ye(Ao),mb=Ye(Ao),Ro=Ye(),xc=Ye(Ro),Lp=Ye(Ro),Li=Ye(),us=Ye(Li),xi=Ye(),Ni=Ye(),Vg=Ye(),gl=Ye(Vg),Nc=Ye(),Ke={comment:Rc,lineComment:Ye(Rc),blockComment:Ye(Rc),docComment:Ye(Rc),name:Ao,variableName:Ye(Ao),typeName:pb,tagName:Ye(pb),propertyName:mb,attributeName:Ye(mb),className:Ye(Ao),labelName:Ye(Ao),namespace:Ye(Ao),macroName:Ye(Ao),literal:Ro,string:xc,docString:Ye(xc),character:Ye(xc),attributeValue:Ye(xc),number:Lp,integer:Ye(Lp),float:Ye(Lp),bool:Ye(Ro),regexp:Ye(Ro),escape:Ye(Ro),color:Ye(Ro),url:Ye(Ro),keyword:xi,self:Ye(xi),null:Ye(xi),atom:Ye(xi),unit:Ye(xi),modifier:Ye(xi),operatorKeyword:Ye(xi),controlKeyword:Ye(xi),definitionKeyword:Ye(xi),moduleKeyword:Ye(xi),operator:Ni,derefOperator:Ye(Ni),arithmeticOperator:Ye(Ni),logicOperator:Ye(Ni),bitwiseOperator:Ye(Ni),compareOperator:Ye(Ni),updateOperator:Ye(Ni),definitionOperator:Ye(Ni),typeOperator:Ye(Ni),controlOperator:Ye(Ni),punctuation:Vg,separator:Ye(Vg),bracket:gl,angleBracket:Ye(gl),squareBracket:Ye(gl),paren:Ye(gl),brace:Ye(gl),content:Li,heading:us,heading1:Ye(us),heading2:Ye(us),heading3:Ye(us),heading4:Ye(us),heading5:Ye(us),heading6:Ye(us),contentSeparator:Ye(Li),list:Ye(Li),quote:Ye(Li),emphasis:Ye(Li),strong:Ye(Li),link:Ye(Li),monospace:Ye(Li),strikethrough:Ye(Li),inserted:Ye(),deleted:Ye(),changed:Ye(),invalid:Ye(),meta:Nc,documentMeta:Ye(Nc),annotation:Ye(Nc),processingInstruction:Ye(Nc),definition:Fi.defineModifier(),constant:Fi.defineModifier(),function:Fi.defineModifier(),standard:Fi.defineModifier(),local:Fi.defineModifier(),special:Fi.defineModifier()};XT([{tag:Ke.link,class:"tok-link"},{tag:Ke.heading,class:"tok-heading"},{tag:Ke.emphasis,class:"tok-emphasis"},{tag:Ke.strong,class:"tok-strong"},{tag:Ke.keyword,class:"tok-keyword"},{tag:Ke.atom,class:"tok-atom"},{tag:Ke.bool,class:"tok-bool"},{tag:Ke.url,class:"tok-url"},{tag:Ke.labelName,class:"tok-labelName"},{tag:Ke.inserted,class:"tok-inserted"},{tag:Ke.deleted,class:"tok-deleted"},{tag:Ke.literal,class:"tok-literal"},{tag:Ke.string,class:"tok-string"},{tag:Ke.number,class:"tok-number"},{tag:[Ke.regexp,Ke.escape,Ke.special(Ke.string)],class:"tok-string2"},{tag:Ke.variableName,class:"tok-variableName"},{tag:Ke.local(Ke.variableName),class:"tok-variableName tok-local"},{tag:Ke.definition(Ke.variableName),class:"tok-variableName tok-definition"},{tag:Ke.special(Ke.variableName),class:"tok-variableName2"},{tag:Ke.definition(Ke.propertyName),class:"tok-propertyName tok-definition"},{tag:Ke.typeName,class:"tok-typeName"},{tag:Ke.namespace,class:"tok-namespace"},{tag:Ke.className,class:"tok-className"},{tag:Ke.macroName,class:"tok-macroName"},{tag:Ke.propertyName,class:"tok-propertyName"},{tag:Ke.operator,class:"tok-operator"},{tag:Ke.comment,class:"tok-comment"},{tag:Ke.meta,class:"tok-meta"},{tag:Ke.invalid,class:"tok-invalid"},{tag:Ke.punctuation,class:"tok-punctuation"}]);var Bp;const _u=new Bt;function z7(n){return at.define({combine:n?e=>e.concat(n):void 0})}class Si{constructor(e,t,r=[]){this.data=e,Lt.prototype.hasOwnProperty("tree")||Object.defineProperty(Lt.prototype,"tree",{get(){return fr(this)}}),this.parser=t,this.extension=[$o.of(this),Lt.languageData.of((i,o,s)=>i.facet(gb(i,o,s)))].concat(r)}isActiveAt(e,t,r=-1){return gb(e,t,r)==this.data}findRegions(e){let t=e.facet($o);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(o,s)=>{if(o.prop(_u)==this.data){r.push({from:s,to:s+o.length});return}let a=o.prop(Bt.mounted);if(a){if(a.tree.prop(_u)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+s,to:l.to+s});else r.push({from:s,to:s+o.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+s),r.length>l)return}}for(let l=0;l<o.children.length;l++){let u=o.children[l];u instanceof jn&&i(u,o.positions[l]+s)}};return i(fr(e),0),r}get allowsNesting(){return!0}}Si.setState=Pt.define();function gb(n,e,t){let r=n.facet($o);if(!r)return null;let i=r.data;if(r.allowsNesting)for(let o=fr(n).topNode;o;o=o.enter(e,t,rr.ExcludeBuffers))i=o.type.prop(_u)||i;return i}class xh extends Si{constructor(e,t){super(e,t),this.parser=t}static define(e){let t=z7(e.languageData);return new xh(t,e.parser.configure({props:[_u.add(r=>r.isTop?t:void 0)]}))}configure(e){return new xh(this.data,this.parser.configure(e))}get allowsNesting(){return this.parser.hasWrappers()}}function fr(n){let e=n.field(Si.state,!1);return e?e.tree:jn.empty}class W7{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.cursor=e.iter()}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let vl=null;class Nh{constructor(e,t,r=[],i,o,s,a,l){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=o,this.viewport=s,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new Nh(e,t,[],jn.empty,0,r,[],null)}startParse(){return this.parser.startParse(new W7(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=jn.empty&&this.isDone(t!=null?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Ps.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t!=null?t:this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Ps.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=vl;vl=this;try{return e()}finally{vl=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=vb(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:o,viewport:s,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,f,c,d)=>l.push({fromA:u,toA:f,fromB:c,toB:d})),r=Ps.applyChanges(r,l),i=jn.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let f=e.mapPos(u.from,1),c=e.mapPos(u.to,-1);f<c&&a.push({from:f,to:c})}}}return new Nh(this.parser,t,r,i,o,s,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:o}=this.skipped[r];i<e.to&&o>e.from&&(this.fragments=vb(this.fragments,i,o),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends YT{createParse(t,r,i){let o=i[0].from,s=i[i.length-1].to;return{parsedPos:o,advance(){let l=vl;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=s,new jn(Mr.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return vl}}function vb(n,e,t){return Ps.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Fa{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new Fa(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=Nh.create(e.facet($o).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new Fa(r)}}Si.state=zn.define({create:Fa.init,update(n,e){for(let t of e.effects)if(t.is(Si.setState))return t.value;return e.startState.facet($o)!=e.state.facet($o)?Fa.init(e.state):n.apply(e)}});let $T=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&($T=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:500-100})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Fp=typeof navigator<"u"&&((Bp=navigator.scheduling)===null||Bp===void 0?void 0:Bp.isInputPending)?()=>navigator.scheduling.isInputPending():null,K7=Bn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Si.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),e.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Si.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=$T(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,o=r.field(Si.state);if(o.tree==o.context.tree&&o.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!Fp?Math.max(25,e.timeRemaining()-5):1e9),a=o.context.treeLen<i&&r.doc.length>i+1e3,l=o.context.work(()=>Fp&&Fp()||Date.now()>s,i+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Si.setState.of(new Fa(o.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Yr(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),$o=at.define({combine(n){return n.length?n[0]:null},enables:[Si.state,K7]});class G7{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const Y7=at.define(),Ld=at.define({combine:n=>{if(!n.length)return"  ";if(!/^(?: +|\t+)$/.test(n[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return n[0]}});function Mh(n){let e=n.facet(Ld);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function bu(n,e){let t="",r=n.tabSize;if(n.facet(Ld).charCodeAt(0)==9)for(;e>=r;)t+="	",e-=r;for(let i=0;i<e;i++)t+=" ";return t}function _v(n,e){n instanceof Lt&&(n=new Bd(n));for(let r of n.state.facet(Y7)){let i=r(n,e);if(i!=null)return i}let t=fr(n.state);return t?J7(n,t,e):null}class Bd{constructor(e,t={}){this.state=e,this.options=t,this.unit=Mh(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:o}=this.options;return i!=null&&i>=r.from&&i<=r.to?o&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),o=this.countColumn(r,e-i),s=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return s>-1&&(o+=s-this.countColumn(r,r.search(/\S|$/))),o}countColumn(e,t=e.length){return Uu(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let s=o(i);if(s>-1)return s}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const e4=new Bt;function J7(n,e,t){return t4(e.resolveInner(t).enterUnfinishedNodesBefore(t),t,n)}function Q7(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function Z7(n){let e=n.type.prop(e4);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(Bt.closedBy))){let i=n.lastChild,o=i&&r.indexOf(i.name)>-1;return s=>t9(s,!0,1,void 0,o&&!Q7(s)?i.from:void 0)}return n.parent==null?X7:null}function t4(n,e,t){for(;n;n=n.parent){let r=Z7(n);if(r)return r(bv.create(t,e,n))}return null}function X7(){return 0}class bv extends Bd{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.node=r}static create(e,t,r){return new bv(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if($7(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e.from)}continue(){let e=this.node.parent;return e?t4(e,this.pos,this.base):0}}function $7(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function e9(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),s=i==null||i<=o.from?o.to:Math.min(o.to,i);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped)return l.from<s?t:null;a=l.to}}function t9(n,e,t,r,i){let o=n.textAfter,s=o.match(/^\s*/)[0].length,a=r&&o.slice(s,s+r.length)==r||i==n.pos+s,l=e?e9(n):null;return l?a?n.column(l.from):n.column(l.to):n.baseIndent+(a?0:n.unit*t)}function yb({except:n,units:e=1}={}){return t=>{let r=n&&n.test(t.textAfter);return t.baseIndent+(r?0:e*t.unit)}}const n9=200;function r9(){return Lt.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+n9)return n;let o=t.sliceString(i.from,r);if(!e.some(u=>u.test(o)))return n;let{state:s}=n,a=-1,l=[];for(let{head:u}of s.selection.ranges){let f=s.doc.lineAt(u);if(f.from==a)continue;a=f.from;let c=_v(s,f.from);if(c==null)continue;let d=/^\s*/.exec(f.text)[0],g=bu(s,c);d!=g&&l.push({from:f.from,to:f.from+d.length,insert:g})}return l.length?[n,{changes:l,sequential:!0}]:n})}const i9=at.define(),n4=new Bt;function o9(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function s9(n,e,t){let r=fr(n);if(r.length<t)return null;let i=r.resolveInner(t),o=null;for(let s=i;s;s=s.parent){if(s.to<=t||s.from>t)continue;if(o&&s.from<e)break;let a=s.type.prop(n4);if(a&&(s.to<r.length-50||r.length==n.doc.length||!a9(s))){let l=a(s,n);l&&l.from<=t&&l.from>=e&&l.to>t&&(o=l)}}return o}function a9(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function Dh(n,e,t){for(let r of n.facet(i9)){let i=r(n,e,t);if(i)return i}return s9(n,e,t)}function r4(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const Fd=Pt.define({map:r4}),qu=Pt.define({map:r4});function i4(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const Fs=zn.define({create(){return pt.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)t.is(Fd)&&!l9(n,t.value.from,t.value.to)?n=n.update({add:[_b.range(t.value.from,t.value.to)]}):t.is(qu)&&(n=n.update({filter:(r,i)=>t.value.from!=r||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:r}=e.selection.main;n.between(r,r,(i,o)=>{i<r&&o>r&&(t=!0)}),t&&(n=n.update({filterFrom:r,filterTo:r,filter:(i,o)=>o<=r||i>=r}))}return n},provide:n=>ut.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(r,i)=>{t.push(r,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let r=n[t++],i=n[t++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(_b.range(r,i))}return pt.set(e,!0)}});function jh(n,e,t){var r;let i=null;return(r=n.field(Fs,!1))===null||r===void 0||r.between(e,t,(o,s)=>{(!i||i.from>o)&&(i={from:o,to:s})}),i}function l9(n,e,t){let r=!1;return n.between(e,e,(i,o)=>{i==e&&o==t&&(r=!0)}),r}function o4(n,e){return n.field(Fs,!1)?e:e.concat(Pt.appendConfig.of(l4()))}const u9=n=>{for(let e of i4(n)){let t=Dh(n.state,e.from,e.to);if(t)return n.dispatch({effects:o4(n.state,[Fd.of(t),s4(n,t)])}),!0}return!1},c9=n=>{if(!n.state.field(Fs,!1))return!1;let e=[];for(let t of i4(n)){let r=jh(n.state,t.from,t.to);r&&e.push(qu.of(r),s4(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function s4(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return ut.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${i}.`)}const f9=n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let i=n.lineBlockAt(r),o=Dh(e,i.from,i.to);o&&t.push(Fd.of(o)),r=(o?n.lineBlockAt(o.to):i).to+1}return t.length&&n.dispatch({effects:o4(n.state,t)}),!!t.length},h9=n=>{let e=n.state.field(Fs,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,i)=>{t.push(qu.of({from:r,to:i}))}),n.dispatch({effects:t}),!0},d9=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:u9},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:c9},{key:"Ctrl-Alt-[",run:f9},{key:"Ctrl-Alt-]",run:h9}],p9={placeholderDOM:null,placeholderText:"\u2026"},a4=at.define({combine(n){return Xi(n,p9)}});function l4(n){let e=[Fs,v9];return n&&e.push(a4.of(n)),e}const _b=pt.replace({widget:new class extends os{toDOM(n){let{state:e}=n,t=e.facet(a4),r=o=>{let s=n.lineBlockAt(n.posAtDOM(o.target)),a=jh(n.state,s.from,s.to);a&&n.dispatch({effects:qu.of(a)}),o.preventDefault()};if(t.placeholderDOM)return t.placeholderDOM(n,r);let i=document.createElement("span");return i.textContent=t.placeholderText,i.setAttribute("aria-label",e.phrase("folded code")),i.title=e.phrase("unfold"),i.className="cm-foldPlaceholder",i.onclick=r,i}}}),m9={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Up extends Qi{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function g9(n={}){let e=Object.assign(Object.assign({},m9),n),t=new Up(e,!0),r=new Up(e,!1),i=Bn.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet($o)!=s.state.facet($o)||s.startState.field(Fs,!1)!=s.state.field(Fs,!1)||fr(s.startState)!=fr(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let a=new Jo;for(let l of s.viewportLineBlocks){let u=jh(s.state,l.from,l.to)?r:Dh(s.state,l.from,l.to)?t:null;u&&a.add(l.from,l.from,u)}return a.finish()}}),{domEventHandlers:o}=e;return[i,VT({class:"cm-foldGutter",markers(s){var a;return((a=s.plugin(i))===null||a===void 0?void 0:a.markers)||Jt.empty},initialSpacer(){return new Up(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(s,a,l)=>{if(o.click&&o.click(s,a,l))return!0;let u=jh(s.state,a.from,a.to);if(u)return s.dispatch({effects:qu.of(u)}),!0;let f=Dh(s.state,a.from,a.to);return f?(s.dispatch({effects:Fd.of(f)}),!0):!1}})}),l4()]}const v9=ut.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Hu{constructor(e,t){let r;function i(a){let l=Qo.newName();return(r||(r=Object.create(null)))["."+l]=a,l}const o=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,s=t.scope;this.scope=s instanceof Si?a=>a.prop(_u)==s.data:s?a=>a==s:void 0,this.style=XT(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:o}).style,this.module=r?new Qo(r):null,this.themeType=t.themeType}static define(e,t){return new Hu(e,t||{})}}const qg=at.define(),u4=at.define({combine(n){return n.length?[n[0]]:null}});function Vp(n){let e=n.facet(qg);return e.length?e:n.facet(u4)}function c4(n,e){let t=[_9],r;return n instanceof Hu&&(n.module&&t.push(ut.styleModule.of(n.module)),r=n.themeType),e!=null&&e.fallback?t.push(u4.of(n)):r?t.push(qg.computeN([ut.darkTheme],i=>i.facet(ut.darkTheme)==(r=="dark")?[n]:[])):t.push(qg.of(n)),t}class y9{constructor(e){this.markCache=Object.create(null),this.tree=fr(e.state),this.decorations=this.buildDeco(e,Vp(e.state))}update(e){let t=fr(e.state),r=Vp(e.state),i=r!=Vp(e.startState);t.length<e.view.viewport.to&&!i&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r))}buildDeco(e,t){if(!t||!this.tree.length)return pt.none;let r=new Jo;for(let{from:i,to:o}of e.visibleRanges)q7(this.tree,t,(s,a,l)=>{r.add(s,a,this.markCache[l]||(this.markCache[l]=pt.mark({class:l})))},i,o);return r.finish()}}const _9=il.high(Bn.fromClass(y9,{decorations:n=>n.decorations})),b9=Hu.define([{tag:Ke.meta,color:"#7a757a"},{tag:Ke.link,textDecoration:"underline"},{tag:Ke.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Ke.emphasis,fontStyle:"italic"},{tag:Ke.strong,fontWeight:"bold"},{tag:Ke.strikethrough,textDecoration:"line-through"},{tag:Ke.keyword,color:"#708"},{tag:[Ke.atom,Ke.bool,Ke.url,Ke.contentSeparator,Ke.labelName],color:"#219"},{tag:[Ke.literal,Ke.inserted],color:"#164"},{tag:[Ke.string,Ke.deleted],color:"#a11"},{tag:[Ke.regexp,Ke.escape,Ke.special(Ke.string)],color:"#e40"},{tag:Ke.definition(Ke.variableName),color:"#00f"},{tag:Ke.local(Ke.variableName),color:"#30a"},{tag:[Ke.typeName,Ke.namespace],color:"#085"},{tag:Ke.className,color:"#167"},{tag:[Ke.special(Ke.variableName),Ke.macroName],color:"#256"},{tag:Ke.definition(Ke.propertyName),color:"#00c"},{tag:Ke.comment,color:"#940"},{tag:Ke.invalid,color:"#f00"}]),w9=ut.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),f4=1e4,h4="()[]{}",d4=at.define({combine(n){return Xi(n,{afterCursor:!0,brackets:h4,maxScanDistance:f4,renderMatch:E9})}}),S9=pt.mark({class:"cm-matchingBracket"}),C9=pt.mark({class:"cm-nonmatchingBracket"});function E9(n){let e=[],t=n.matched?S9:C9;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const O9=zn.define({create(){return pt.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(d4);for(let i of e.state.selection.ranges){if(!i.empty)continue;let o=qi(e.state,i.head,-1,r)||i.head>0&&qi(e.state,i.head-1,1,r)||r.afterCursor&&(qi(e.state,i.head,1,r)||i.head<e.state.doc.length&&qi(e.state,i.head+1,-1,r));o&&(t=t.concat(r.renderMatch(o,e.state)))}return pt.set(t,!0)},provide:n=>ut.decorations.from(n)}),k9=[O9,w9];function T9(n={}){return[d4.of(n),k9]}function Hg(n,e,t){let r=n.prop(e<0?Bt.openedBy:Bt.closedBy);if(r)return r;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function qi(n,e,t,r={}){let i=r.maxScanDistance||f4,o=r.brackets||h4,s=fr(n),a=s.resolveInner(e,t);for(let l=a;l;l=l.parent){let u=Hg(l.type,t,o);if(u&&l.from<l.to)return P9(n,e,t,l,u,o)}return I9(n,e,t,s,a.type,i,o)}function P9(n,e,t,r,i,o){let s=r.parent,a={from:r.from,to:r.to},l=0,u=s==null?void 0:s.cursor();if(u&&(t<0?u.childBefore(r.from):u.childAfter(r.to)))do if(t<0?u.to<=r.from:u.from>=r.to){if(l==0&&i.indexOf(u.type.name)>-1&&u.from<u.to)return{start:a,end:{from:u.from,to:u.to},matched:!0};if(Hg(u.type,t,o))l++;else if(Hg(u.type,-t,o)){if(l==0)return{start:a,end:u.from==u.to?void 0:{from:u.from,to:u.to},matched:!1};l--}}while(t<0?u.prevSibling():u.nextSibling());return{start:a,matched:!1}}function I9(n,e,t,r,i,o,s){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),l=s.indexOf(a);if(l<0||l%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},f=n.doc.iterRange(e,t>0?n.doc.length:0),c=0;for(let d=0;!f.next().done&&d<=o;){let g=f.value;t<0&&(d+=g.length);let h=e+d*t;for(let v=t>0?0:g.length-1,m=t>0?g.length:-1;v!=m;v+=t){let p=s.indexOf(g[v]);if(!(p<0||r.resolveInner(h+v,1).type!=i))if(p%2==0==t>0)c++;else{if(c==1)return{start:u,end:{from:h+v,to:h+v+1},matched:p>>1==l>>1};c--}}t>0&&(d+=g.length)}return f.done?{start:u,matched:!1}:null}const A9=Object.create(null),bb=[Mr.none],wb=[],R9=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])R9[n]=x9(A9,e);function qp(n,e){wb.indexOf(n)>-1||(wb.push(n),console.warn(e))}function x9(n,e){let t=null;for(let o of e.split(".")){let s=n[o]||Ke[o];s?typeof s=="function"?t?t=s(t):qp(o,`Modifier ${o} used at start of tag`):t?qp(o,`Tag ${o} used as modifier`):t=s:qp(o,`Unknown highlighting tag ${o}`)}if(!t)return 0;let r=e.replace(/ /g,"_"),i=Mr.define({id:bb.length,name:r,props:[QT({[r]:t})]});return bb.push(i),i.id}const N9=n=>{let e=Sv(n.state);return e.line?M9(n):e.block?j9(n):!1};function wv(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(r(t.update(i)),!0):!1}}const M9=wv(F9,0),D9=wv(p4,0),j9=wv((n,e)=>p4(n,e,B9(e)),0);function Sv(n,e=n.selection.main.head){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const yl=50;function L9(n,{open:e,close:t},r,i){let o=n.sliceDoc(r-yl,r),s=n.sliceDoc(i,i+yl),a=/\s*$/.exec(o)[0].length,l=/^\s*/.exec(s)[0].length,u=o.length-a;if(o.slice(u-e.length,u)==e&&s.slice(l,l+t.length)==t)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let f,c;i-r<=2*yl?f=c=n.sliceDoc(r,i):(f=n.sliceDoc(r,r+yl),c=n.sliceDoc(i-yl,i));let d=/^\s*/.exec(f)[0].length,g=/\s*$/.exec(c)[0].length,h=c.length-g-t.length;return f.slice(d,d+e.length)==e&&c.slice(h,h+t.length)==t?{open:{pos:r+d+e.length,margin:/\s/.test(f.charAt(d+e.length))?1:0},close:{pos:i-g-t.length,margin:/\s/.test(c.charAt(h-1))?1:0}}:null}function B9(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to),o=e.length-1;o>=0&&e[o].to>r.from?e[o].to=i.to:e.push({from:r.from,to:i.to})}return e}function p4(n,e,t=e.selection.ranges){let r=t.map(o=>Sv(e,o.from).block);if(!r.every(o=>o))return null;let i=t.map((o,s)=>L9(e,r[s],o.from,o.to));if(n!=2&&!i.every(o=>o))return{changes:e.changes(t.map((o,s)=>i[s]?[]:[{from:o.from,insert:r[s].open+" "},{from:o.to,insert:" "+r[s].close}]))};if(n!=1&&i.some(o=>o)){let o=[];for(let s=0,a;s<i.length;s++)if(a=i[s]){let l=r[s],{open:u,close:f}=a;o.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:f.pos-f.margin,to:f.pos+l.close.length})}return{changes:o}}return null}function F9(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:o,to:s}of t){let a=r.length,l=1e9;for(let u=o;u<=s;){let f=e.doc.lineAt(u);if(f.from>i&&(o==s||s>f.from)){i=f.from;let c=Sv(e,u).line;if(!c)continue;let d=/^\s*/.exec(f.text)[0].length,g=d==f.length,h=f.text.slice(d,d+c.length)==c?d:-1;d<f.text.length&&d<l&&(l=d),r.push({line:f,comment:h,token:c,indent:d,empty:g,single:!1})}u=f.to+1}if(l<1e9)for(let u=a;u<r.length;u++)r[u].indent<r[u].line.text.length&&(r[u].indent=l);r.length==a+1&&(r[a].single=!0)}if(n!=2&&r.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:a,token:l,indent:u,empty:f,single:c}of r)(c||!f)&&o.push({from:a.from+u,insert:l+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(n!=1&&r.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:a,token:l}of r)if(a>=0){let u=s.from+a,f=u+l.length;s.text[f-s.from]==" "&&f++,o.push({from:u,to:f})}return{changes:o}}return null}const zg=Js.define(),U9=Js.define(),V9=at.define(),m4=at.define({combine(n){return Xi(n,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function q9(n){let e=0;return n.iterChangedRanges((t,r)=>e=r),e}const Cv=zn.define({create(){return Hi.empty},update(n,e){let t=e.state.facet(m4),r=e.annotation(zg);if(r){let l=e.docChanged?je.single(q9(e.changes)):void 0,u=Ar.fromTransaction(e,l),f=r.side,c=f==0?n.undone:n.done;return u?c=Bh(c,c.length,t.minDepth,u):c=y4(c,e.startState.selection),new Hi(f==0?r.rest:c,f==0?c:r.rest)}let i=e.annotation(U9);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(Hn.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=Ar.fromTransaction(e),s=e.annotation(Hn.time),a=e.annotation(Hn.userEvent);return o?n=n.addChanges(o,s,a,t.newGroupDelay,t.minDepth):e.selection&&(n=n.addSelection(e.startState.selection,s,a,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new Hi(n.done.map(Ar.fromJSON),n.undone.map(Ar.fromJSON))}});function H9(n={}){return[Cv,m4.of(n),ut.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?Ev:e.inputType=="historyRedo"?Lh:null;return r?(e.preventDefault(),r(t)):!1}})]}function Ud(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(Cv,!1);if(!i)return!1;let o=i.pop(n,t,e);return o?(r(o),!0):!1}}const Ev=Ud(0,!1),Lh=Ud(1,!1),z9=Ud(0,!0),W9=Ud(1,!0);function g4(n){return function(e){let t=e.field(Cv,!1);if(!t)return 0;let r=n==0?t.done:t.undone;return r.length-(r.length&&!r[0].changes?1:0)}}const K9=g4(0),G9=g4(1);class Ar{constructor(e,t,r,i,o){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=o}setSelAfter(e){return new Ar(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Ar(e.changes&&Vn.fromJSON(e.changes),[],e.mapped&&Ki.fromJSON(e.mapped),e.startSelection&&je.fromJSON(e.startSelection),e.selectionsAfter.map(je.fromJSON))}static fromTransaction(e,t){let r=ui;for(let i of e.startState.facet(V9)){let o=i(e);o.length&&(r=r.concat(o))}return!r.length&&e.changes.empty?null:new Ar(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,ui)}static selection(e){return new Ar(void 0,ui,void 0,void 0,e)}}function Bh(n,e,t,r){let i=e+1>t+20?e-t-1:0,o=n.slice(i,e);return o.push(r),o}function Y9(n,e){let t=[],r=!1;return n.iterChangedRanges((i,o)=>t.push(i,o)),e.iterChangedRanges((i,o,s,a)=>{for(let l=0;l<t.length;){let u=t[l++],f=t[l++];a>=u&&s<=f&&(r=!0)}}),r}function J9(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function v4(n,e){return n.length?e.length?n.concat(e):n:e}const ui=[],Q9=200;function y4(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-Q9));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),Bh(n,n.length-1,1e9,t.setSelAfter(r)))}else return[Ar.selection([e])]}function Z9(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Hp(n,e){if(!n.length)return n;let t=n.length,r=ui;for(;t;){let i=X9(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let o=n.slice(0,t);return o[t-1]=i,o}else e=i.mapped,t--,r=i.selectionsAfter}return r.length?[Ar.selection(r)]:ui}function X9(n,e,t){let r=v4(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):ui,t);if(!n.changes)return Ar.selection(r);let i=n.changes.map(e),o=e.mapDesc(n.changes,!0),s=n.mapped?n.mapped.composeDesc(o):o;return new Ar(i,Pt.mapEffects(n.effects,e),s,n.startSelection.map(o),r)}const $9=/^(input\.type|delete)($|\.)/;class Hi{constructor(e,t,r=0,i=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new Hi(this.done,this.undone):this}addChanges(e,t,r,i,o){let s=this.done,a=s[s.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||$9.test(r))&&(!a.selectionsAfter.length&&t-this.prevTime<i&&Y9(a.changes,e.changes)||r=="input.type.compose")?s=Bh(s,s.length-1,o,new Ar(e.changes.compose(a.changes),v4(e.effects,a.effects),a.mapped,a.startSelection,ui)):s=Bh(s,s.length,o,e),new Hi(s,ui,t,r)}addSelection(e,t,r,i){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:ui;return o.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&J9(o[o.length-1],e)?this:new Hi(y4(this.done,e),this.undone,t,r)}addMapping(e){return new Hi(Hp(this.done,e),Hp(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let o=i[i.length-1];if(r&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:zg.of({side:e,rest:Z9(i)}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let s=i.length==1?ui:i.slice(0,i.length-1);return o.mapped&&(s=Hp(s,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:zg.of({side:e,rest:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Hi.empty=new Hi(ui,ui);const eF=[{key:"Mod-z",run:Ev,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Lh,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Lh,preventDefault:!0},{key:"Mod-u",run:z9,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:W9,preventDefault:!0}];function ol(n,e){return je.create(n.ranges.map(e),n.mainIndex)}function $i(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Pi({state:n,dispatch:e},t){let r=ol(n.selection,t);return r.eq(n.selection)?!1:(e($i(n,r)),!0)}function Vd(n,e){return je.cursor(e?n.to:n.from)}function _4(n,e){return Pi(n,t=>t.empty?n.moveByChar(t,e):Vd(t,e))}function hr(n){return n.textDirectionAt(n.state.selection.main.head)==wn.LTR}const b4=n=>_4(n,!hr(n)),w4=n=>_4(n,hr(n));function S4(n,e){return Pi(n,t=>t.empty?n.moveByGroup(t,e):Vd(t,e))}const tF=n=>S4(n,!hr(n)),nF=n=>S4(n,hr(n));function rF(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function qd(n,e,t){let r=fr(n).resolveInner(e.head),i=t?Bt.closedBy:Bt.openedBy;for(let l=e.head;;){let u=t?r.childAfter(l):r.childBefore(l);if(!u)break;rF(n,u,i)?r=u:l=t?u.to:u.from}let o=r.type.prop(i),s,a;return o&&(s=t?qi(n,r.from,1):qi(n,r.to,-1))&&s.matched?a=t?s.end.to:s.end.from:a=t?r.to:r.from,je.cursor(a,t?-1:1)}const iF=n=>Pi(n,e=>qd(n.state,e,!hr(n))),oF=n=>Pi(n,e=>qd(n.state,e,hr(n)));function C4(n,e){return Pi(n,t=>{if(!t.empty)return Vd(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const E4=n=>C4(n,!1),O4=n=>C4(n,!0);function k4(n){return Math.max(n.defaultLineHeight,Math.min(n.dom.clientHeight,innerHeight)-5)}function T4(n,e){let{state:t}=n,r=ol(t.selection,a=>a.empty?n.moveVertically(a,e,k4(n)):Vd(a,e));if(r.eq(t.selection))return!1;let i=n.coordsAtPos(t.selection.main.head),o=n.scrollDOM.getBoundingClientRect(),s;return i&&i.top>o.top&&i.bottom<o.bottom&&i.top-o.top<=n.scrollDOM.scrollHeight-n.scrollDOM.scrollTop-n.scrollDOM.clientHeight&&(s=ut.scrollIntoView(r.main.head,{y:"start",yMargin:i.top-o.top})),n.dispatch($i(t,r),{effects:s}),!0}const Sb=n=>T4(n,!1),Wg=n=>T4(n,!0);function ss(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let o=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;o&&e.head!=r.from+o&&(i=je.cursor(r.from+o))}return i}const sF=n=>Pi(n,e=>ss(n,e,!0)),aF=n=>Pi(n,e=>ss(n,e,!1)),lF=n=>Pi(n,e=>ss(n,e,!hr(n))),uF=n=>Pi(n,e=>ss(n,e,hr(n))),cF=n=>Pi(n,e=>je.cursor(n.lineBlockAt(e.head).from,1)),fF=n=>Pi(n,e=>je.cursor(n.lineBlockAt(e.head).to,-1));function hF(n,e,t){let r=!1,i=ol(n.selection,o=>{let s=qi(n,o.head,-1)||qi(n,o.head,1)||o.head>0&&qi(n,o.head-1,1)||o.head<n.doc.length&&qi(n,o.head+1,-1);if(!s||!s.end)return o;r=!0;let a=s.start.from==o.head?s.end.to:s.end.from;return t?je.range(o.anchor,a):je.cursor(a)});return r?(e($i(n,i)),!0):!1}const dF=({state:n,dispatch:e})=>hF(n,e,!1);function fi(n,e){let t=ol(n.state.selection,r=>{let i=e(r);return je.range(r.anchor,i.head,i.goalColumn)});return t.eq(n.state.selection)?!1:(n.dispatch($i(n.state,t)),!0)}function P4(n,e){return fi(n,t=>n.moveByChar(t,e))}const I4=n=>P4(n,!hr(n)),A4=n=>P4(n,hr(n));function R4(n,e){return fi(n,t=>n.moveByGroup(t,e))}const pF=n=>R4(n,!hr(n)),mF=n=>R4(n,hr(n)),gF=n=>fi(n,e=>qd(n.state,e,!hr(n))),vF=n=>fi(n,e=>qd(n.state,e,hr(n)));function x4(n,e){return fi(n,t=>n.moveVertically(t,e))}const N4=n=>x4(n,!1),M4=n=>x4(n,!0);function D4(n,e){return fi(n,t=>n.moveVertically(t,e,k4(n)))}const Cb=n=>D4(n,!1),Eb=n=>D4(n,!0),yF=n=>fi(n,e=>ss(n,e,!0)),_F=n=>fi(n,e=>ss(n,e,!1)),bF=n=>fi(n,e=>ss(n,e,!hr(n))),wF=n=>fi(n,e=>ss(n,e,hr(n))),SF=n=>fi(n,e=>je.cursor(n.lineBlockAt(e.head).from)),CF=n=>fi(n,e=>je.cursor(n.lineBlockAt(e.head).to)),Ob=({state:n,dispatch:e})=>(e($i(n,{anchor:0})),!0),kb=({state:n,dispatch:e})=>(e($i(n,{anchor:n.doc.length})),!0),Tb=({state:n,dispatch:e})=>(e($i(n,{anchor:n.selection.main.anchor,head:0})),!0),Pb=({state:n,dispatch:e})=>(e($i(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),EF=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),OF=({state:n,dispatch:e})=>{let t=Wd(n).map(({from:r,to:i})=>je.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:je.create(t),userEvent:"select"})),!0},kF=({state:n,dispatch:e})=>{let t=ol(n.selection,r=>{var i;let o=fr(n).resolveInner(r.head,1);for(;!(o.from<r.from&&o.to>=r.to||o.to>r.to&&o.from<=r.from||!(!((i=o.parent)===null||i===void 0)&&i.parent));)o=o.parent;return je.range(o.to,o.from)});return e($i(n,t)),!0},TF=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=je.create([t.main]):t.main.empty||(r=je.create([je.cursor(t.main.head)])),r?(e($i(n,r)),!0):!1};function Hd({state:n,dispatch:e},t){if(n.readOnly)return!1;let r="delete.selection",i=n.changeByRange(o=>{let{from:s,to:a}=o;if(s==a){let l=t(s);l<s?r="delete.backward":l>s&&(r="delete.forward"),s=Math.min(s,l),a=Math.max(a,l)}return s==a?{range:o}:{changes:{from:s,to:a},range:je.cursor(s)}});return i.changes.empty?!1:(e(n.update(i,{scrollIntoView:!0,userEvent:r,effects:r=="delete.selection"?ut.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function zd(n,e,t){if(n instanceof ut)for(let r of n.state.facet(ut.atomicRanges).map(i=>i(n)))r.between(e,e,(i,o)=>{i<e&&o>e&&(e=t?o:i)});return e}const j4=(n,e)=>Hd(n,t=>{let{state:r}=n,i=r.doc.lineAt(t),o,s;if(!e&&t>i.from&&t<i.from+200&&!/[^ \t]/.test(o=i.text.slice(0,t-i.from))){if(o[o.length-1]=="	")return t-1;let a=Uu(o,r.tabSize),l=a%Mh(r)||Mh(r);for(let u=0;u<l&&o[o.length-1-u]==" ";u++)t--;s=t}else s=zr(i.text,t-i.from,e,e)+i.from,s==t&&i.number!=(e?r.doc.lines:1)&&(s+=e?1:-1);return zd(n,s,e)}),Kg=n=>j4(n,!1),L4=n=>j4(n,!0),B4=(n,e)=>Hd(n,t=>{let r=t,{state:i}=n,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let a=null;;){if(r==(e?o.to:o.from)){r==t&&o.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=zr(o.text,r-o.from,e)+o.from,u=o.text.slice(Math.min(r,l)-o.from,Math.max(r,l)-o.from),f=s(u);if(a!=null&&f!=a)break;(u!=" "||r!=t)&&(a=f),r=l}return zd(n,r,e)}),F4=n=>B4(n,!1),PF=n=>B4(n,!0),U4=n=>Hd(n,e=>{let t=n.lineBlockAt(e).to;return zd(n,e<t?t:Math.min(n.state.doc.length,e+1),!0)}),IF=n=>Hd(n,e=>{let t=n.lineBlockAt(e).from;return zd(n,e>t?t:Math.max(0,e-1),!1)}),AF=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:nn.of(["",""])},range:je.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},RF=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let i=r.from,o=n.doc.lineAt(i),s=i==o.from?i-1:zr(o.text,i-o.from,!1)+o.from,a=i==o.to?i+1:zr(o.text,i-o.from,!0)+o.from;return{changes:{from:s,to:a,insert:n.doc.slice(i,a).append(n.doc.slice(s,i))},range:je.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Wd(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),o=n.doc.lineAt(r.to);if(!r.empty&&r.to==o.from&&(o=n.doc.lineAt(r.to-1)),t>=i.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(r)}else e.push({from:i.from,to:o.to,ranges:[r]});t=o.number+1}return e}function V4(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let o of Wd(n)){if(t?o.to==n.doc.length:o.from==0)continue;let s=n.doc.lineAt(t?o.to+1:o.from-1),a=s.length+1;if(t){r.push({from:o.to,to:s.to},{from:o.from,insert:s.text+n.lineBreak});for(let l of o.ranges)i.push(je.range(Math.min(n.doc.length,l.anchor+a),Math.min(n.doc.length,l.head+a)))}else{r.push({from:s.from,to:o.from},{from:o.to,insert:n.lineBreak+s.text});for(let l of o.ranges)i.push(je.range(l.anchor-a,l.head-a))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:je.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const xF=({state:n,dispatch:e})=>V4(n,e,!1),NF=({state:n,dispatch:e})=>V4(n,e,!0);function q4(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of Wd(n))t?r.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):r.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const MF=({state:n,dispatch:e})=>q4(n,e,!1),DF=({state:n,dispatch:e})=>q4(n,e,!0),jF=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Wd(e).map(({from:i,to:o})=>(i>0?i--:o<e.doc.length&&o++,{from:i,to:o}))),r=ol(e.selection,i=>n.moveVertically(i,!0)).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function LF(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=fr(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e),o;return r&&i&&r.to<=e&&i.from>=e&&(o=r.type.prop(Bt.closedBy))&&o.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from?{from:r.to,to:i.from}:null}const BF=H4(!1),FF=H4(!0);function H4(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:o,to:s}=i,a=e.doc.lineAt(o),l=!n&&o==s&&LF(e,o);n&&(o=s=(s<=a.to?a:e.doc.lineAt(s)).to);let u=new Bd(e,{simulateBreak:o,simulateDoubleBreak:!!l}),f=_v(u,o);for(f==null&&(f=/^\s*/.exec(e.doc.lineAt(o).text)[0].length);s<a.to&&/\s/.test(a.text[s-a.from]);)s++;l?{from:o,to:s}=l:o>a.from&&o<a.from+100&&!/\S/.test(a.text.slice(0,o))&&(o=a.from);let c=["",bu(e,f)];return l&&c.push(bu(e,u.lineIndent(a.from,-1))),{changes:{from:o,to:s,insert:nn.of(c)},range:je.cursor(o+1+c[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Ov(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let s=r.from;s<=r.to;){let a=n.doc.lineAt(s);a.number>t&&(r.empty||r.to>a.from)&&(e(a,i,r),t=a.number),s=a.to+1}let o=n.changes(i);return{changes:i,range:je.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}const UF=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new Bd(n,{overrideIndentation:o=>{let s=t[o];return s==null?-1:s}}),i=Ov(n,(o,s,a)=>{let l=_v(r,o.from);if(l==null)return;/\S/.test(o.text)||(l=0);let u=/^\s*/.exec(o.text)[0],f=bu(n,l);(u!=f||a.from<o.from+u.length)&&(t[o.from]=l,s.push({from:o.from,to:o.from+u.length,insert:f}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},z4=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Ov(n,(t,r)=>{r.push({from:t.from,insert:n.facet(Ld)})}),{userEvent:"input.indent"})),!0),W4=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Ov(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let o=Uu(i,n.tabSize),s=0,a=bu(n,Math.max(0,o-Mh(n)));for(;s<i.length&&s<a.length&&i.charCodeAt(s)==a.charCodeAt(s);)s++;r.push({from:t.from+s,to:t.from+i.length,insert:a.slice(s)})}),{userEvent:"delete.dedent"})),!0),VF=[{key:"Ctrl-b",run:b4,shift:I4,preventDefault:!0},{key:"Ctrl-f",run:w4,shift:A4},{key:"Ctrl-p",run:E4,shift:N4},{key:"Ctrl-n",run:O4,shift:M4},{key:"Ctrl-a",run:cF,shift:SF},{key:"Ctrl-e",run:fF,shift:CF},{key:"Ctrl-d",run:L4},{key:"Ctrl-h",run:Kg},{key:"Ctrl-k",run:U4},{key:"Ctrl-Alt-h",run:F4},{key:"Ctrl-o",run:AF},{key:"Ctrl-t",run:RF},{key:"Ctrl-v",run:Wg}],qF=[{key:"ArrowLeft",run:b4,shift:I4,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:tF,shift:pF,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:lF,shift:bF,preventDefault:!0},{key:"ArrowRight",run:w4,shift:A4,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:nF,shift:mF,preventDefault:!0},{mac:"Cmd-ArrowRight",run:uF,shift:wF,preventDefault:!0},{key:"ArrowUp",run:E4,shift:N4,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Ob,shift:Tb},{mac:"Ctrl-ArrowUp",run:Sb,shift:Cb},{key:"ArrowDown",run:O4,shift:M4,preventDefault:!0},{mac:"Cmd-ArrowDown",run:kb,shift:Pb},{mac:"Ctrl-ArrowDown",run:Wg,shift:Eb},{key:"PageUp",run:Sb,shift:Cb},{key:"PageDown",run:Wg,shift:Eb},{key:"Home",run:aF,shift:_F,preventDefault:!0},{key:"Mod-Home",run:Ob,shift:Tb},{key:"End",run:sF,shift:yF,preventDefault:!0},{key:"Mod-End",run:kb,shift:Pb},{key:"Enter",run:BF},{key:"Mod-a",run:EF},{key:"Backspace",run:Kg,shift:Kg},{key:"Delete",run:L4},{key:"Mod-Backspace",mac:"Alt-Backspace",run:F4},{key:"Mod-Delete",mac:"Alt-Delete",run:PF},{mac:"Mod-Backspace",run:IF},{mac:"Mod-Delete",run:U4}].concat(VF.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),HF=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:iF,shift:gF},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:oF,shift:vF},{key:"Alt-ArrowUp",run:xF},{key:"Shift-Alt-ArrowUp",run:MF},{key:"Alt-ArrowDown",run:NF},{key:"Shift-Alt-ArrowDown",run:DF},{key:"Escape",run:TF},{key:"Mod-Enter",run:FF},{key:"Alt-l",mac:"Ctrl-l",run:OF},{key:"Mod-i",run:kF,preventDefault:!0},{key:"Mod-[",run:W4},{key:"Mod-]",run:z4},{key:"Mod-Alt-\\",run:UF},{key:"Shift-Mod-k",run:jF},{key:"Shift-Mod-\\",run:dF},{key:"Mod-/",run:N9},{key:"Alt-A",run:D9}].concat(qF),zF={key:"Tab",run:z4,shift:W4};function mn(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];typeof i=="string"?n.setAttribute(r,i):i!=null&&(n[r]=i)}e++}for(;e<arguments.length;e++)K4(n,arguments[e]);return n}function K4(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)K4(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}const Ib=typeof String.prototype.normalize=="function"?n=>n.normalize("NFKD"):n=>n;class Ua{constructor(e,t,r=0,i=e.length,o){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(r,i),this.bufferStart=r,this.normalize=o?s=>o(Ib(s)):Ib,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return tr(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=ov(e),r=this.bufferStart+this.bufferPos;this.bufferPos+=Vr(e);let i=this.normalize(t);for(let o=0,s=r;;o++){let a=i.charCodeAt(o),l=this.match(a,s);if(l)return this.value=l,this;if(o==i.length-1)break;s==r&&o<t.length&&t.charCodeAt(o)==a&&s++}}}match(e,t){let r=null;for(let i=0;i<this.matches.length;i+=2){let o=this.matches[i],s=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[i+1],to:t+1}:(this.matches[i]++,s=!0)),s||(this.matches.splice(i,2),i-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:t,to:t+1}:this.matches.push(1,t)),r}}typeof Symbol<"u"&&(Ua.prototype[Symbol.iterator]=function(){return this});const G4={from:-1,to:-1,match:/.*/.exec("")},kv="gm"+(/x/.unicode==null?"":"u");class Y4{constructor(e,t,r,i=0,o=e.length){if(this.text=e,this.to=o,this.curLine="",this.done=!1,this.value=G4,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new J4(e,t,r,i,o);this.re=new RegExp(t,kv+(r!=null&&r.ignoreCase?"i":"")),this.iter=e.iter();let s=e.lineAt(i);this.curLineStart=s.from,this.matchPos=Fh(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let r=this.curLineStart+t.index,i=r+t[0].length;if(this.matchPos=Fh(this.text,i+(r==i?1:0)),r==this.curLine.length&&this.nextLine(),r<i||r>this.value.to)return this.value={from:r,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const zp=new WeakMap;class Ca{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,r){let i=zp.get(e);if(!i||i.from>=r||i.to<=t){let a=new Ca(t,e.sliceString(t,r));return zp.set(e,a),a}if(i.from==t&&i.to==r)return i;let{text:o,from:s}=i;return s>t&&(o=e.sliceString(t,s)+o,s=t),i.to<r&&(o+=e.sliceString(i.to,r)),zp.set(e,new Ca(s,o)),new Ca(t,o.slice(t-s,r-s))}}class J4{constructor(e,t,r,i,o){this.text=e,this.to=o,this.done=!1,this.value=G4,this.matchPos=Fh(e,i),this.re=new RegExp(t,kv+(r!=null&&r.ignoreCase?"i":"")),this.flat=Ca.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t&&this.flat.to<this.to&&t.index+t[0].length>this.flat.text.length-10&&(t=null),t){let r=this.flat.from+t.index,i=r+t[0].length;return this.value={from:r,to:i,match:t},this.matchPos=Fh(this.text,i+(r==i?1:0)),this}else{if(this.flat.to==this.to)return this.done=!0,this;this.flat=Ca.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}}typeof Symbol<"u"&&(Y4.prototype[Symbol.iterator]=J4.prototype[Symbol.iterator]=function(){return this});function WF(n){try{return new RegExp(n,kv),!0}catch{return!1}}function Fh(n,e){if(e>=n.length)return e;let t=n.lineAt(e),r;for(;e<t.to&&(r=t.text.charCodeAt(e-t.from))>=56320&&r<57344;)e++;return e}function Gg(n){let e=mn("input",{class:"cm-textfield",name:"line"}),t=mn("form",{class:"cm-gotoLine",onkeydown:i=>{i.keyCode==27?(i.preventDefault(),n.dispatch({effects:Uh.of(!1)}),n.focus()):i.keyCode==13&&(i.preventDefault(),r())},onsubmit:i=>{i.preventDefault(),r()}},mn("label",n.state.phrase("Go to line"),": ",e)," ",mn("button",{class:"cm-button",type:"submit"},n.state.phrase("go")));function r(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!i)return;let{state:o}=n,s=o.doc.lineAt(o.selection.main.head),[,a,l,u,f]=i,c=u?+u.slice(1):0,d=l?+l:s.number;if(l&&f){let h=d/100;a&&(h=h*(a=="-"?-1:1)+s.number/o.doc.lines),d=Math.round(o.doc.lines*h)}else l&&a&&(d=d*(a=="-"?-1:1)+s.number);let g=o.doc.line(Math.max(1,Math.min(o.doc.lines,d)));n.dispatch({effects:Uh.of(!1),selection:je.cursor(g.from+Math.max(0,Math.min(c,g.length))),scrollIntoView:!0}),n.focus()}return{dom:t}}const Uh=Pt.define(),Ab=zn.define({create(){return!0},update(n,e){for(let t of e.effects)t.is(Uh)&&(n=t.value);return n},provide:n=>yu.from(n,e=>e?Gg:null)}),KF=n=>{let e=vu(n,Gg);if(!e){let t=[Uh.of(!0)];n.state.field(Ab,!1)==null&&t.push(Pt.appendConfig.of([Ab,GF])),n.dispatch({effects:t}),e=vu(n,Gg)}return e&&e.dom.querySelector("input").focus(),!0},GF=ut.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),YF={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Q4=at.define({combine(n){return Xi(n,YF,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function JF(n){let e=[eU,$F];return n&&e.push(Q4.of(n)),e}const QF=pt.mark({class:"cm-selectionMatch"}),ZF=pt.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Rb(n,e,t,r){return(t==0||n(e.sliceDoc(t-1,t))!=mr.Word)&&(r==e.doc.length||n(e.sliceDoc(r,r+1))!=mr.Word)}function XF(n,e,t,r){return n(e.sliceDoc(t,t+1))==mr.Word&&n(e.sliceDoc(r-1,r))==mr.Word}const $F=Bn.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.selectionSet||n.docChanged||n.viewportChanged)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=n.state.facet(Q4),{state:t}=n,r=t.selection;if(r.ranges.length>1)return pt.none;let i=r.main,o,s=null;if(i.empty){if(!e.highlightWordAroundCursor)return pt.none;let l=t.wordAt(i.head);if(!l)return pt.none;s=t.charCategorizer(i.head),o=t.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return pt.none;if(e.wholeWords){if(o=t.sliceDoc(i.from,i.to),s=t.charCategorizer(i.head),!(Rb(s,t,i.from,i.to)&&XF(s,t,i.from,i.to)))return pt.none}else if(o=t.sliceDoc(i.from,i.to).trim(),!o)return pt.none}let a=[];for(let l of n.visibleRanges){let u=new Ua(t.doc,o,l.from,l.to);for(;!u.next().done;){let{from:f,to:c}=u.value;if((!s||Rb(s,t,f,c))&&(i.empty&&f<=i.from&&c>=i.to?a.push(ZF.range(f,c)):(f>=i.to||c<=i.from)&&a.push(QF.range(f,c)),a.length>e.maxMatches))return pt.none}}return pt.set(a)}},{decorations:n=>n.decorations}),eU=ut.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),tU=({state:n,dispatch:e})=>{let{selection:t}=n,r=je.create(t.ranges.map(i=>n.wordAt(i.head)||je.cursor(i.head)),t.mainIndex);return r.eq(t)?!1:(e(n.update({selection:r})),!0)};function nU(n,e){let{main:t,ranges:r}=n.selection,i=n.wordAt(t.head),o=i&&i.from==t.from&&i.to==t.to;for(let s=!1,a=new Ua(n.doc,e,r[r.length-1].to);;)if(a.next(),a.done){if(s)return null;a=new Ua(n.doc,e,0,Math.max(0,r[r.length-1].from-1)),s=!0}else{if(s&&r.some(l=>l.from==a.value.from))continue;if(o){let l=n.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const rU=({state:n,dispatch:e})=>{let{ranges:t}=n.selection;if(t.some(o=>o.from===o.to))return tU({state:n,dispatch:e});let r=n.sliceDoc(t[0].from,t[0].to);if(n.selection.ranges.some(o=>n.sliceDoc(o.from,o.to)!=r))return!1;let i=nU(n,r);return i?(e(n.update({selection:n.selection.addRange(je.range(i.from,i.to),!1),effects:ut.scrollIntoView(i.to)})),!0):!1},Kd=at.define({combine(n){var e;return{top:n.reduce((t,r)=>t!=null?t:r.top,void 0)||!1,caseSensitive:n.reduce((t,r)=>t!=null?t:r.caseSensitive,void 0)||!1,literal:n.reduce((t,r)=>t!=null?t:r.literal,void 0)||!1,createPanel:((e=n.find(t=>t.createPanel))===null||e===void 0?void 0:e.createPanel)||(t=>new pU(t))}}});function iU(n){return n?[Kd.of(n),Jg]:Jg}class Z4{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||WF(this.search)),this.unquoted=this.literal?this.search:this.search.replace(/\\([nrt\\])/g,(t,r)=>r=="n"?`
`:r=="r"?"\r":r=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp}create(){return this.regexp?new sU(this):new oU(this)}getCursor(e,t=0,r=e.length){return this.regexp?da(this,e,t,r):ha(this,e,t,r)}}class X4{constructor(e){this.spec=e}}function ha(n,e,t,r){return new Ua(e,n.unquoted,t,r,n.caseSensitive?void 0:i=>i.toLowerCase())}class oU extends X4{constructor(e){super(e)}nextMatch(e,t,r){let i=ha(this.spec,e,r,e.length).nextOverlapping();return i.done&&(i=ha(this.spec,e,0,t).nextOverlapping()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=r;;){let o=Math.max(t,i-1e4-this.spec.unquoted.length),s=ha(this.spec,e,o,i),a=null;for(;!s.nextOverlapping().done;)a=s.value;if(a)return a;if(o==t)return null;i-=1e4}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.length)}getReplacement(e){return this.spec.replace}matchAll(e,t){let r=ha(this.spec,e,0,e.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let o=ha(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(r+this.spec.unquoted.length,e.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}function da(n,e,t,r){return new Y4(e,n.search,n.caseSensitive?void 0:{ignoreCase:!0},t,r)}class sU extends X4{nextMatch(e,t,r){let i=da(this.spec,e,r,e.length).next();return i.done&&(i=da(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,r){for(let i=1;;i++){let o=Math.max(t,r-i*1e4),s=da(this.spec,e,o,r),a=null;for(;!s.next().done;)a=s.value;if(a&&(o==t||a.from>o+10))return a;if(o==t)return null}}prevMatch(e,t,r){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,r,e.length)}getReplacement(e){return this.spec.replace.replace(/\$([$&\d+])/g,(t,r)=>r=="$"?"$":r=="&"?e.match[0]:r!="0"&&+r<e.match.length?e.match[r]:t)}matchAll(e,t){let r=da(this.spec,e,0,e.length),i=[];for(;!r.next().done;){if(i.length>=t)return null;i.push(r.value)}return i}highlight(e,t,r,i){let o=da(this.spec,e,Math.max(0,t-250),Math.min(r+250,e.length));for(;!o.next().done;)i(o.value.from,o.value.to)}}const wu=Pt.define(),Tv=Pt.define(),zo=zn.define({create(n){return new Wp(Yg(n).create(),null)},update(n,e){for(let t of e.effects)t.is(wu)?n=new Wp(t.value.create(),n.panel):t.is(Tv)&&(n=new Wp(n.query,t.value?Pv:null));return n},provide:n=>yu.from(n,e=>e.panel)});class Wp{constructor(e,t){this.query=e,this.panel=t}}const aU=pt.mark({class:"cm-searchMatch"}),lU=pt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),uU=Bn.fromClass(class{constructor(n){this.view=n,this.decorations=this.highlight(n.state.field(zo))}update(n){let e=n.state.field(zo);(e!=n.startState.field(zo)||n.docChanged||n.selectionSet||n.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:n,panel:e}){if(!e||!n.spec.valid)return pt.none;let{view:t}=this,r=new Jo;for(let i=0,o=t.visibleRanges,s=o.length;i<s;i++){let{from:a,to:l}=o[i];for(;i<s-1&&l>o[i+1].from-2*250;)l=o[++i].to;n.highlight(t.state.doc,a,l,(u,f)=>{let c=t.state.selection.ranges.some(d=>d.from==u&&d.to==f);r.add(u,f,c?lU:aU)})}return r.finish()}},{decorations:n=>n.decorations});function zu(n){return e=>{let t=e.state.field(zo,!1);return t&&t.query.spec.valid?n(e,t):Iv(e)}}const Vh=zu((n,{query:e})=>{let{to:t}=n.state.selection.main,r=e.nextMatch(n.state.doc,t,t);return r?(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:Rv(n,r),userEvent:"select.search"}),!0):!1}),qh=zu((n,{query:e})=>{let{state:t}=n,{from:r}=t.selection.main,i=e.prevMatch(t.doc,r,r);return i?(n.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Rv(n,i),userEvent:"select.search"}),!0):!1}),cU=zu((n,{query:e})=>{let t=e.matchAll(n.state.doc,1e3);return!t||!t.length?!1:(n.dispatch({selection:je.create(t.map(r=>je.range(r.from,r.to))),userEvent:"select.search.matches"}),!0)}),fU=({state:n,dispatch:e})=>{let t=n.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:r,to:i}=t.main,o=[],s=0;for(let a=new Ua(n.doc,n.sliceDoc(r,i));!a.next().done;){if(o.length>1e3)return!1;a.value.from==r&&(s=o.length),o.push(je.range(a.value.from,a.value.to))}return e(n.update({selection:je.create(o,s),userEvent:"select.search.matches"})),!0},xb=zu((n,{query:e})=>{let{state:t}=n,{from:r,to:i}=t.selection.main;if(t.readOnly)return!1;let o=e.nextMatch(t.doc,r,r);if(!o)return!1;let s=[],a,l,u=[];if(o.from==r&&o.to==i&&(l=t.toText(e.getReplacement(o)),s.push({from:o.from,to:o.to,insert:l}),o=e.nextMatch(t.doc,o.from,o.to),u.push(ut.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(r).number)+"."))),o){let f=s.length==0||s[0].from>=o.to?0:o.to-o.from-l.length;a={anchor:o.from-f,head:o.to-f},u.push(Rv(n,o))}return n.dispatch({changes:s,selection:a,scrollIntoView:!!a,effects:u,userEvent:"input.replace"}),!0}),hU=zu((n,{query:e})=>{if(n.state.readOnly)return!1;let t=e.matchAll(n.state.doc,1e9).map(i=>{let{from:o,to:s}=i;return{from:o,to:s,insert:e.getReplacement(i)}});if(!t.length)return!1;let r=n.state.phrase("replaced $ matches",t.length)+".";return n.dispatch({changes:t,effects:ut.announce.of(r),userEvent:"input.replace.all"}),!0});function Pv(n){return n.state.facet(Kd).createPanel(n)}function Yg(n,e){var t,r,i;let o=n.selection.main,s=o.empty||o.to>o.from+100?"":n.sliceDoc(o.from,o.to);if(e&&!s)return e;let a=n.facet(Kd);return new Z4({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:a.literal)?s:s.replace(/\n/g,"\\n"),caseSensitive:(r=e==null?void 0:e.caseSensitive)!==null&&r!==void 0?r:a.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:a.literal})}const Iv=n=>{let e=n.state.field(zo,!1);if(e&&e.panel){let t=vu(n,Pv);if(!t)return!1;let r=t.dom.querySelector("[main-field]");if(r&&r!=n.root.activeElement){let i=Yg(n.state,e.query.spec);i.valid&&n.dispatch({effects:wu.of(i)}),r.focus(),r.select()}}else n.dispatch({effects:[Tv.of(!0),e?wu.of(Yg(n.state,e.query.spec)):Pt.appendConfig.of(Jg)]});return!0},Av=n=>{let e=n.state.field(zo,!1);if(!e||!e.panel)return!1;let t=vu(n,Pv);return t&&t.dom.contains(n.root.activeElement)&&n.focus(),n.dispatch({effects:Tv.of(!1)}),!0},dU=[{key:"Mod-f",run:Iv,scope:"editor search-panel"},{key:"F3",run:Vh,shift:qh,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Vh,shift:qh,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Av,scope:"editor search-panel"},{key:"Mod-Shift-l",run:fU},{key:"Alt-g",run:KF},{key:"Mod-d",run:rU,preventDefault:!0}];class pU{constructor(e){this.view=e;let t=this.query=e.state.field(zo).query.spec;this.commit=this.commit.bind(this),this.searchField=mn("input",{value:t.search,placeholder:ii(e,"Find"),"aria-label":ii(e,"Find"),class:"cm-textfield",name:"search","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=mn("input",{value:t.replace,placeholder:ii(e,"Replace"),"aria-label":ii(e,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=mn("input",{type:"checkbox",name:"case",checked:t.caseSensitive,onchange:this.commit}),this.reField=mn("input",{type:"checkbox",name:"re",checked:t.regexp,onchange:this.commit});function r(i,o,s){return mn("button",{class:"cm-button",name:i,onclick:o,type:"button"},s)}this.dom=mn("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,r("next",()=>Vh(e),[ii(e,"next")]),r("prev",()=>qh(e),[ii(e,"previous")]),r("select",()=>cU(e),[ii(e,"all")]),mn("label",null,[this.caseField,ii(e,"match case")]),mn("label",null,[this.reField,ii(e,"regexp")]),...e.state.readOnly?[]:[mn("br"),this.replaceField,r("replace",()=>xb(e),[ii(e,"replace")]),r("replaceAll",()=>hU(e),[ii(e,"replace all")]),mn("button",{name:"close",onclick:()=>Av(e),"aria-label":ii(e,"close"),type:"button"},["\xD7"])]])}commit(){let e=new Z4({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:wu.of(e)}))}keydown(e){DB(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?qh:Vh)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),xb(this.view))}update(e){for(let t of e.transactions)for(let r of t.effects)r.is(wu)&&!r.value.eq(this.query)&&this.setQuery(r.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Kd).top}}function ii(n,e){return n.state.phrase(e)}const Mc=30,Dc=/[\s\.,:;?!]/;function Rv(n,{from:e,to:t}){let r=n.state.doc.lineAt(e),i=n.state.doc.lineAt(t).to,o=Math.max(r.from,e-Mc),s=Math.min(i,t+Mc),a=n.state.sliceDoc(o,s);if(o!=r.from){for(let l=0;l<Mc;l++)if(!Dc.test(a[l+1])&&Dc.test(a[l])){a=a.slice(l);break}}if(s!=i){for(let l=a.length-1;l>a.length-Mc;l--)if(!Dc.test(a[l-1])&&Dc.test(a[l])){a=a.slice(0,l);break}}return ut.announce.of(`${n.state.phrase("current match")}. ${a} ${n.state.phrase("on line")} ${r.number}.`)}const mU=ut.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Jg=[zo,il.lowest(uU),mU];class $4{constructor(e,t,r){this.state=e,this.pos=t,this.explicit=r,this.abortListeners=[]}tokenBefore(e){let t=fr(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),o=i.search(eP(e,!1));return o<0?null:{from:r+o,to:this.pos,text:i.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function Nb(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function gU(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let o=1;o<i.length;o++)t[i[o]]=!0}let r=Nb(e)+Nb(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function vU(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:gU(e);return i=>{let o=i.matchBefore(r);return o||i.explicit?{from:o?o.from:i.pos,options:e,validFor:t}:null}}class Mb{constructor(e,t,r){this.completion=e,this.source=t,this.match=r}}function Wo(n){return n.selection.main.head}function eP(n,e){var t;let{source:r}=n,i=e&&r[0]!="^",o=r[r.length-1]!="$";return!i&&!o?n:new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}function yU(n,e,t,r){return Object.assign(Object.assign({},n.changeByRange(i=>{if(i==n.selection.main)return{changes:{from:t,to:r,insert:e},range:je.cursor(t+e.length)};let o=r-t;return!i.empty||o&&n.sliceDoc(i.from-o,i.from)!=n.sliceDoc(t,r)?{range:i}:{changes:{from:i.from-o,to:i.from,insert:e},range:je.cursor(i.from-o+e.length)}})),{userEvent:"input.complete"})}function tP(n,e){const t=e.completion.apply||e.completion.label;let r=e.source;typeof t=="string"?n.dispatch(yU(n.state,t,r.from,r.to)):t(n,e.completion,r.from,r.to)}const Db=new WeakMap;function _U(n){if(!Array.isArray(n))return n;let e=Db.get(n);return e||Db.set(n,e=vU(n)),e}class bU{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let r=tr(e,t),i=Vr(r);this.chars.push(r);let o=e.slice(t,t+i),s=o.toUpperCase();this.folded.push(tr(s==o?o.toLowerCase():s,0)),t+=i}this.astral=e.length!=this.chars.length}match(e){if(this.pattern.length==0)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:o,byWord:s}=this;if(t.length==1){let y=tr(e,0);return y==t[0]?[0,0,Vr(y)]:y==r[0]?[-200,0,Vr(y)]:null}let a=e.indexOf(this.pattern);if(a==0)return[0,0,this.pattern.length];let l=t.length,u=0;if(a<0){for(let y=0,b=Math.min(e.length,200);y<b&&u<l;){let _=tr(e,y);(_==t[u]||_==r[u])&&(i[u++]=y),y+=Vr(_)}if(u<l)return null}let f=0,c=0,d=!1,g=0,h=-1,v=-1,m=/[a-z]/.test(e),p=!0;for(let y=0,b=Math.min(e.length,200),_=0;y<b&&c<l;){let w=tr(e,y);a<0&&(f<l&&w==t[f]&&(o[f++]=y),g<l&&(w==t[g]||w==r[g]?(g==0&&(h=y),v=y+1,g++):g=0));let S,E=w<255?w>=48&&w<=57||w>=97&&w<=122?2:w>=65&&w<=90?1:0:(S=ov(w))!=S.toLowerCase()?1:S!=S.toUpperCase()?2:0;(!y||E==1&&m||_==0&&E!=0)&&(t[c]==w||r[c]==w&&(d=!0)?s[c++]=y:s.length&&(p=!1)),_=E,y+=Vr(w)}return c==l&&s[0]==0&&p?this.result(-100+(d?-200:0),s,e):g==l&&h==0?[-200-e.length,0,v]:a>-1?[-700-e.length,a,a+this.pattern.length]:g==l?[-200+-700-e.length,h,v]:c==l?this.result(-100+(d?-200:0)+-700+(p?0:-1100),s,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,r){let i=[e-r.length],o=1;for(let s of t){let a=s+(this.astral?Vr(tr(r,s)):1);o>1&&i[o-1]==s?i[o-1]=a:(i[o++]=s,i[o++]=a)}return i}}const Zi=at.define({combine(n){return Xi(n,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],compareCompletions:(e,t)=>e.label.localeCompare(t.label)},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,optionClass:(e,t)=>r=>wU(e(r),t(r)),addToOptions:(e,t)=>e.concat(t)})}});function wU(n,e){return n?e?n+" "+e:n:e}function SU(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i){let o=document.createElement("span");o.className="cm-completionLabel";let{label:s}=t,a=0;for(let l=1;l<i.length;){let u=i[l++],f=i[l++];u>a&&o.appendChild(document.createTextNode(s.slice(a,u)));let c=o.appendChild(document.createElement("span"));c.appendChild(document.createTextNode(s.slice(u,f))),c.className="cm-completionMatchedText",a=f}return a<s.length&&o.appendChild(document.createTextNode(s.slice(a))),o},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function jb(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class CU{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:a=>this.positionInfo(a),key:this};let r=e.state.field(t),{options:i,selected:o}=r.open,s=e.state.facet(Zi);this.optionContent=SU(s),this.optionClass=s.optionClass,this.range=jb(i.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",a=>{for(let l=a.target,u;l&&l!=this.dom;l=l.parentNode)if(l.nodeName=="LI"&&(u=/-(\d+)$/.exec(l.id))&&+u[1]<i.length){tP(e,i[+u[1]]),a.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(i,r.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=jb(t.options.length,t.selected,this.view.state.facet(Zi).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t.options,e.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let o=typeof i=="string"?document.createTextNode(i):i(r);if(!o)return;"then"in o?o.then(s=>{s&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(s)}).catch(s=>Yr(this.view.state,s,"completion info")):this.addInfoPane(o)}}addInfoPane(e){let t=this.info=document.createElement("div");t.className="cm-tooltip cm-completionInfo",t.appendChild(e),this.dom.appendChild(t),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&OU(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect();if(i.top>Math.min(innerHeight,t.bottom)-10||i.bottom<Math.max(0,t.top)+10)return null;let o=Math.max(0,Math.min(i.top,innerHeight-r.height))-t.top,s=this.view.textDirection==wn.RTL,a=t.left,l=innerWidth-t.right;return s&&a<Math.min(r.width,l)?s=!1:!s&&l<Math.min(r.width,a)&&(s=!0),{top:o,left:s}}positionInfo(e){this.info&&(this.info.style.top=(e?e.top:-1e6)+"px",e&&(this.info.classList.toggle("cm-completionInfo-left",e.left),this.info.classList.toggle("cm-completionInfo-right",!e.left)))}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));for(let o=r.from;o<r.to;o++){let{completion:s,match:a}=e[o];const l=i.appendChild(document.createElement("li"));l.id=t+"-"+o,l.setAttribute("role","option");let u=this.optionClass(s);u&&(l.className=u);for(let f of this.optionContent){let c=f(s,this.view.state,a);c&&l.appendChild(c)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}}function EU(n){return e=>new CU(e,n)}function OU(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect();r.top<t.top?n.scrollTop-=t.top-r.top:r.bottom>t.bottom&&(n.scrollTop+=r.bottom-t.bottom)}function Lb(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function kU(n,e){let t=[],r=0;for(let a of n)if(a.hasResult())if(a.result.filter===!1){let l=a.result.getMatch;for(let u of a.result.options){let f=[1e9-r++];if(l)for(let c of l(u))f.push(c);t.push(new Mb(u,a,f))}}else{let l=new bU(e.sliceDoc(a.from,a.to)),u;for(let f of a.result.options)(u=l.match(f.label))&&(f.boost!=null&&(u[0]+=f.boost),t.push(new Mb(f,a,u)))}let i=[],o=null,s=e.facet(Zi).compareCompletions;for(let a of t.sort((l,u)=>u.match[0]-l.match[0]||s(l.completion,u.completion)))!o||o.label!=a.completion.label||o.detail!=a.completion.detail||o.type!=null&&a.completion.type!=null&&o.type!=a.completion.type||o.apply!=a.completion.apply?i.push(a):Lb(a.completion)>Lb(o)&&(i[i.length-1]=a),o=a.completion;return i}class Zl{constructor(e,t,r,i,o){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Zl(this.options,Bb(t,e),this.tooltip,this.timestamp,e)}static build(e,t,r,i,o){let s=kU(e,t);if(!s.length)return null;let a=t.facet(Zi).selectOnOpen?0:-1;if(i&&i.selected!=a&&i.selected!=-1){let l=i.options[i.selected].completion;for(let u=0;u<s.length;u++)if(s[u].completion==l){a=u;break}}return new Zl(s,Bb(r,a),{pos:e.reduce((l,u)=>u.hasResult()?Math.min(l,u.from):l,1e8),create:EU(si),above:o.aboveCursor},i?i.timestamp:Date.now(),a)}map(e){return new Zl(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class Hh{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new Hh(IU,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(Zi),o=(r.override||t.languageDataAt("autocomplete",Wo(t)).map(_U)).map(a=>(this.active.find(u=>u.source==a)||new Pr(a,this.active.some(u=>u.state!=0)?1:0)).update(e,r));o.length==this.active.length&&o.every((a,l)=>a==this.active[l])&&(o=this.active);let s=e.selection||o.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!TU(o,this.active)?Zl.build(o,t,this.id,this.open,r):this.open&&e.docChanged?this.open.map(e.changes):this.open;!s&&o.every(a=>a.state!=1)&&o.some(a=>a.hasResult())&&(o=o.map(a=>a.hasResult()?new Pr(a.source,0):a));for(let a of e.effects)a.is(rP)&&(s=s&&s.setSelected(a.value,this.id));return o==this.active&&s==this.open?this:new Hh(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:PU}}function TU(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;r<e.length&&!e[r].hasResult;)r++;let i=t==n.length,o=r==e.length;if(i||o)return i==o;if(n[t++].result!=e[r++].result)return!1}}const PU={"aria-autocomplete":"list"};function Bb(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const IU=[];function Qg(n){return n.isUserEvent("input.type")?"input":n.isUserEvent("delete.backward")?"delete":null}class Pr{constructor(e,t,r=-1){this.source=e,this.state=t,this.explicitPos=r}hasResult(){return!1}update(e,t){let r=Qg(e),i=this;r?i=i.handleUserEvent(e,r,t):e.docChanged?i=i.handleChange(e):e.selection&&i.state!=0&&(i=new Pr(i.source,0));for(let o of e.effects)if(o.is(xv))i=new Pr(i.source,1,o.value?Wo(e.state):-1);else if(o.is(zh))i=new Pr(i.source,0);else if(o.is(nP))for(let s of o.value)s.source==i.source&&(i=s);return i}handleUserEvent(e,t,r){return t=="delete"||!r.activateOnTyping?this.map(e.changes):new Pr(this.source,1)}handleChange(e){return e.changes.touchesRange(Wo(e.startState))?new Pr(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new Pr(this.source,this.state,e.mapPos(this.explicitPos))}}class Xl extends Pr{constructor(e,t,r,i,o){super(e,2,t),this.result=r,this.from=i,this.to=o}hasResult(){return!0}handleUserEvent(e,t,r){var i;let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),a=Wo(e.state);if((this.explicitPos<0?a<=o:a<this.from)||a>s||t=="delete"&&Wo(e.startState)==this.from)return new Pr(this.source,t=="input"&&r.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),u;return AU(this.result.validFor,e.state,o,s)?new Xl(this.source,l,this.result,o,s):this.result.update&&(u=this.result.update(this.result,o,s,new $4(e.state,a,l>=0)))?new Xl(this.source,l,u,u.from,(i=u.to)!==null&&i!==void 0?i:Wo(e.state)):new Pr(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Pr(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Xl(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function AU(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return typeof n=="function"?n(i,t,r,e):eP(n,!0).test(i)}const xv=Pt.define(),zh=Pt.define(),nP=Pt.define({map(n,e){return n.map(t=>t.map(e))}}),rP=Pt.define(),si=zn.define({create(){return Hh.start()},update(n,e){return n.update(e)},provide:n=>[jd.from(n,e=>e.tooltip),ut.contentAttributes.from(n,e=>e.attrs)]}),iP=75;function jc(n,e="option"){return t=>{let r=t.state.field(si,!1);if(!r||!r.open||Date.now()-r.open.timestamp<iP)return!1;let i=1,o;e=="page"&&(o=b7(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:s-1;return a<0?a=e=="page"?0:s-1:a>=s&&(a=e=="page"?s-1:0),t.dispatch({effects:rP.of(a)}),!0}}const RU=n=>{let e=n.state.field(si,!1);return n.state.readOnly||!e||!e.open||Date.now()-e.open.timestamp<iP||e.open.selected<0?!1:(tP(n,e.open.options[e.open.selected]),!0)},xU=n=>n.state.field(si,!1)?(n.dispatch({effects:xv.of(!0)}),!0):!1,NU=n=>{let e=n.state.field(si,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:zh.of(null)}),!0)};class MU{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const Fb=50,DU=50,jU=1e3,LU=Bn.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of n.state.field(si).active)e.state==1&&this.startQuery(e)}update(n){let e=n.state.field(si);if(!n.selectionSet&&!n.docChanged&&n.startState.field(si)==e)return;let t=n.transactions.some(r=>(r.selection||r.docChanged)&&!Qg(r));for(let r=0;r<this.running.length;r++){let i=this.running[r];if(t||i.updates.length+n.transactions.length>DU&&Date.now()-i.time>jU){for(let o of i.context.abortListeners)try{o()}catch(s){Yr(this.view.state,s)}i.context.abortListeners=null,this.running.splice(r--,1)}else i.updates.push(...n.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some(r=>r.state==1&&!this.running.some(i=>i.active.source==r.source))?setTimeout(()=>this.startUpdate(),Fb):-1,this.composing!=0)for(let r of n.transactions)Qg(r)=="input"?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:n}=this.view,e=n.field(si);for(let t of e.active)t.state==1&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t)}startQuery(n){let{state:e}=this.view,t=Wo(e),r=new $4(e,t,n.explicitPos==t),i=new MU(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(o=>{i.context.aborted||(i.done=o||null,this.scheduleAccept())},o=>{this.view.dispatch({effects:zh.of(null)}),Yr(this.view.state,o)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),Fb))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Zi);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(i.done===void 0)continue;if(this.running.splice(r--,1),i.done){let s=new Xl(i.active.source,i.active.explicitPos,i.done,i.done.from,(n=i.done.to)!==null&&n!==void 0?n:Wo(i.updates.length?i.updates[0].startState:this.view.state));for(let a of i.updates)s=s.update(a,t);if(s.hasResult()){e.push(s);continue}}let o=this.view.state.field(si).active.find(s=>s.source==i.active.source);if(o&&o.state==1)if(i.done==null){let s=new Pr(i.active.source,0);for(let a of i.updates)s=s.update(a,t);s.state!=1&&e.push(s)}else this.startQuery(o)}e.length&&this.view.dispatch({effects:nP.of(e)})}},{eventHandlers:{blur(){let n=this.view.state.field(si,!1);n&&n.tooltip&&this.view.state.facet(Zi).closeOnBlur&&this.view.dispatch({effects:zh.of(null)})},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:xv.of(!1)}),20),this.composing=0}}}),BU=ut.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Wh={brackets:["(","[","{","'",'"'],before:")]}:;>"},Ss=Pt.define({map(n,e){let t=e.mapPos(n,-1,dr.TrackAfter);return t==null?void 0:t}}),Nv=Pt.define({map(n,e){return e.mapPos(n)}}),Mv=new class extends Ls{};Mv.startSide=1;Mv.endSide=-1;const oP=zn.define({create(){return Jt.empty},update(n,e){if(e.selection){let t=e.state.doc.lineAt(e.selection.main.head).from,r=e.startState.doc.lineAt(e.startState.selection.main.head).from;t!=e.changes.mapPos(r,-1)&&(n=Jt.empty)}n=n.map(e.changes);for(let t of e.effects)t.is(Ss)?n=n.update({add:[Mv.range(t.value,t.value+1)]}):t.is(Nv)&&(n=n.update({filter:r=>r!=t.value}));return n}});function FU(){return[VU,oP]}const Kp="()[]{}<>";function sP(n){for(let e=0;e<Kp.length;e+=2)if(Kp.charCodeAt(e)==n)return Kp.charAt(e+1);return ov(n<128?n:n+1)}function aP(n,e){return n.languageDataAt("closeBrackets",e)[0]||Wh}const UU=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),VU=ut.inputHandler.of((n,e,t,r)=>{if((UU?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||r.length==2&&Vr(tr(r,0))==1||e!=i.from||t!=i.to)return!1;let o=zU(n.state,r);return o?(n.dispatch(o),!0):!1}),qU=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=aP(n,n.selection.main.head).brackets||Wh.brackets,i=null,o=n.changeByRange(s=>{if(s.empty){let a=WU(n.doc,s.head);for(let l of r)if(l==a&&Gd(n.doc,s.head)==sP(tr(l,0)))return{changes:{from:s.head-l.length,to:s.head+l.length},range:je.cursor(s.head-l.length),userEvent:"delete.backward"}}return{range:i=s}});return i||e(n.update(o,{scrollIntoView:!0})),!i},HU=[{key:"Backspace",run:qU}];function zU(n,e){let t=aP(n,n.selection.main.head),r=t.brackets||Wh.brackets;for(let i of r){let o=sP(tr(i,0));if(e==i)return o==i?YU(n,i,r.indexOf(i+i+i)>-1):KU(n,i,o,t.before||Wh.before);if(e==o&&lP(n,n.selection.main.from))return GU(n,i,o)}return null}function lP(n,e){let t=!1;return n.field(oP).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function Gd(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Vr(tr(t,0)))}function WU(n,e){let t=n.sliceString(e-2,e);return Vr(tr(t,0))==t.length?t:t.slice(1)}function KU(n,e,t,r){let i=null,o=n.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:t,from:s.to}],effects:Ss.of(s.to+e.length),range:je.range(s.anchor+e.length,s.head+e.length)};let a=Gd(n.doc,s.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+t,from:s.head},effects:Ss.of(s.head+e.length),range:je.cursor(s.head+e.length)}:{range:i=s}});return i?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function GU(n,e,t){let r=null,i=n.selection.ranges.map(o=>o.empty&&Gd(n.doc,o.head)==t?je.cursor(o.head+t.length):r=o);return r?null:n.update({selection:je.create(i,n.selection.mainIndex),scrollIntoView:!0,effects:n.selection.ranges.map(({from:o})=>Nv.of(o))})}function YU(n,e,t){let r=null,i=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:e,from:o.to}],effects:Ss.of(o.to+e.length),range:je.range(o.anchor+e.length,o.head+e.length)};let s=o.head,a=Gd(n.doc,s);if(a==e){if(Ub(n,s))return{changes:{insert:e+e,from:s},effects:Ss.of(s+e.length),range:je.cursor(s+e.length)};if(lP(n,s)){let l=t&&n.sliceDoc(s,s+e.length*3)==e+e+e;return{range:je.cursor(s+e.length*(l?3:1)),effects:Nv.of(s)}}}else{if(t&&n.sliceDoc(s-2*e.length,s)==e+e&&Ub(n,s-2*e.length))return{changes:{insert:e+e+e+e,from:s},effects:Ss.of(s+e.length),range:je.cursor(s+e.length)};if(n.charCategorizer(s)(a)!=mr.Word){let l=n.sliceDoc(s-1,s);if(l!=e&&n.charCategorizer(s)(l)!=mr.Word&&!JU(n,s,e))return{changes:{insert:e+e,from:s},effects:Ss.of(s+e.length),range:je.cursor(s+e.length)}}}return{range:r=o}});return r?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function Ub(n,e){let t=fr(n).resolveInner(e+1);return t.parent&&t.from==e}function JU(n,e,t){let r=fr(n).resolveInner(e,-1);for(let i=0;i<5;i++){if(n.sliceDoc(r.from,r.from+t.length)==t){let s=r.firstChild;for(;s&&s.from==r.from&&s.to-s.from>t.length;){if(n.sliceDoc(s.to-t.length,s.to)==t)return!1;s=s.firstChild}return!0}let o=r.to==e&&r.parent;if(!o)break;r=o}return!1}function QU(n={}){return[si,Zi.of(n),LU,ZU,BU]}const uP=[{key:"Ctrl-Space",run:xU},{key:"Escape",run:NU},{key:"ArrowDown",run:jc(!0)},{key:"ArrowUp",run:jc(!1)},{key:"PageDown",run:jc(!0,"page")},{key:"PageUp",run:jc(!1,"page")},{key:"Enter",run:RU}],ZU=il.highest(Dd.computeN([Zi],n=>n.facet(Zi).defaultKeymap?[uP]:[]));class XU{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class ys{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=e,o=r.facet(Cs).markerFilter;o&&(i=o(i));let s=pt.set(i.map(a=>a.from==a.to||a.from==a.to-1&&r.doc.lineAt(a.from).to==a.from?pt.widget({widget:new aV(a),diagnostic:a}).range(a.from):pt.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity},diagnostic:a}).range(a.from,a.to)),!0);return new ys(s,t,Va(s))}}function Va(n,e=null,t=0){let r=null;return n.between(t,1e9,(i,o,{spec:s})=>{if(!(e&&s.diagnostic!=e))return r=new XU(i,o,s.diagnostic),!1}),r}function cP(n,e){return!!(n.effects.some(t=>t.is(Yd))||n.changes.touchesRange(e.pos))}function fP(n,e){return n.field(Wr,!1)?e:e.concat(Pt.appendConfig.of([Wr,ut.decorations.compute([Wr],t=>{let{selected:r,panel:i}=t.field(Wr);return!r||!i||r.from==r.to?pt.none:pt.set([eV.range(r.from,r.to)])}),_7(tV,{hideOn:cP}),lV]))}function $U(n,e){return{effects:fP(n,[Yd.of(e)])}}const Yd=Pt.define(),Dv=Pt.define(),hP=Pt.define(),Wr=zn.define({create(){return new ys(pt.none,null,null)},update(n,e){if(e.docChanged){let t=n.diagnostics.map(e.changes),r=null;if(n.selected){let i=e.changes.mapPos(n.selected.from,1);r=Va(t,n.selected.diagnostic,i)||Va(t,null,i)}n=new ys(t,n.panel,r)}for(let t of e.effects)t.is(Yd)?n=ys.init(t.value,n.panel,e.state):t.is(Dv)?n=new ys(n.diagnostics,t.value?Jd.open:null,n.selected):t.is(hP)&&(n=new ys(n.diagnostics,n.panel,t.value));return n},provide:n=>[yu.from(n,e=>e.panel),ut.decorations.from(n,e=>e.diagnostics)]}),eV=pt.mark({class:"cm-lintRange cm-lintRange-active"});function tV(n,e,t){let{diagnostics:r}=n.state.field(Wr),i=[],o=2e8,s=0;r.between(e-(t<0?1:0),e+(t>0?1:0),(l,u,{spec:f})=>{e>=l&&e<=u&&(l==u||(e>l||t>0)&&(e<u||t<0))&&(i.push(f.diagnostic),o=Math.min(l,o),s=Math.max(u,s))});let a=n.state.facet(Cs).tooltipFilter;return a&&(i=a(i)),i.length?{pos:o,end:s,above:n.state.doc.lineAt(o).to<s,create(){return{dom:dP(n,i)}}}:null}function dP(n,e){return mn("ul",{class:"cm-tooltip-lint"},e.map(t=>mP(n,t,!1)))}const nV=n=>{let e=n.state.field(Wr,!1);(!e||!e.panel)&&n.dispatch({effects:fP(n.state,[Dv.of(!0)])});let t=vu(n,Jd.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Vb=n=>{let e=n.state.field(Wr,!1);return!e||!e.panel?!1:(n.dispatch({effects:Dv.of(!1)}),!0)},rV=n=>{let e=n.state.field(Wr,!1);if(!e)return!1;let t=n.state.selection.main,r=e.diagnostics.iter(t.to+1);return!r.value&&(r=e.diagnostics.iter(0),!r.value||r.from==t.from&&r.to==t.to)?!1:(n.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)},iV=[{key:"Mod-Shift-m",run:nV},{key:"F8",run:rV}],oV=Bn.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(Cs);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let n=Date.now();if(n<this.lintTime-10)setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Cs);Promise.all(t.map(r=>Promise.resolve(r(this.view)))).then(r=>{let i=r.reduce((o,s)=>o.concat(s));this.view.state.doc==e.doc&&this.view.dispatch($U(this.view.state,i))},r=>{Yr(this.view.state,r)})}}update(n){let e=n.state.facet(Cs);(n.docChanged||e!=n.startState.facet(Cs))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Cs=at.define({combine(n){return Object.assign({sources:n.map(e=>e.source)},Xi(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null}))},enables:oV});function sV(n,e={}){return Cs.of({source:n,config:e})}function pP(n){let e=[];if(n)e:for(let{name:t}of n){for(let r=0;r<t.length;r++){let i=t[r];if(/[a-zA-Z]/.test(i)&&!e.some(o=>o.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function mP(n,e,t){var r;let i=t?pP(e.actions):[];return mn("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},mn("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(r=e.actions)===null||r===void 0?void 0:r.map((o,s)=>{let a=c=>{c.preventDefault();let d=Va(n.state.field(Wr).diagnostics,e);d&&o.apply(n,d.from,d.to)},{name:l}=o,u=i[s]?l.indexOf(i[s]):-1,f=u<0?l:[l.slice(0,u),mn("u",l.slice(u,u+1)),l.slice(u+1)];return mn("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${l}${u<0?"":` (access key "${i[s]})"`}.`},f)}),e.source&&mn("div",{class:"cm-diagnosticSource"},e.source))}class aV extends os{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return mn("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class qb{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=mP(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Jd{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)Vb(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:o}=this.items[this.selectedIndex],s=pP(o.actions);for(let a=0;a<s.length;a++)if(s[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=Va(this.view.state.field(Wr).diagnostics,o);l&&o.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let o=0;o<this.items.length;o++)this.items[o].dom.contains(i.target)&&this.moveSelection(o)};this.list=mn("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:r}),this.dom=mn("div",{class:"cm-panel-lint"},this.list,mn("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Vb(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(Wr).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Wr),r=0,i=!1,o=null;for(e.between(0,this.view.state.doc.length,(s,a,{spec:l})=>{let u=-1,f;for(let c=r;c<this.items.length;c++)if(this.items[c].diagnostic==l.diagnostic){u=c;break}u<0?(f=new qb(this.view,l.diagnostic),this.items.splice(r,0,f),i=!0):(f=this.items[u],u>r&&(this.items.splice(r,u-r),i=!0)),t&&f.diagnostic==t.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),o=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),r++});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new qb(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),o?(this.list.setAttribute("aria-activedescendant",o.id),this.view.requestMeasure({key:this,read:()=>({sel:o.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:s,panel:a})=>{s.top<a.top?this.list.scrollTop-=a.top-s.top:s.bottom>a.bottom&&(this.list.scrollTop+=s.bottom-a.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Wr),r=Va(t.diagnostics,this.items[e].diagnostic);!r||this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:hP.of(r)})}static open(e){return new Jd(e)}}function Jf(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function Gp(n){return Jf(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const lV=ut.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Gp("#d11")},".cm-lintRange-warning":{backgroundImage:Gp("orange")},".cm-lintRange-info":{backgroundImage:Gp("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});class uV extends Qi{constructor(e){super(),this.diagnostics=e,this.severity=e.reduce((t,r)=>{let i=r.severity;return i=="error"||i=="warning"&&t=="info"?i:t},"info")}toDOM(e){let t=document.createElement("div");t.className="cm-lint-marker cm-lint-marker-"+this.severity;let r=this.diagnostics,i=e.state.facet(Qd).tooltipFilter;return i&&(r=i(r)),r.length&&(t.onmouseover=()=>fV(e,t,r)),t}}function cV(n,e){let t=r=>{let i=e.getBoundingClientRect();if(!(r.clientX>i.left-10&&r.clientX<i.right+10&&r.clientY>i.top-10&&r.clientY<i.bottom+10)){for(let o=r.target;o;o=o.parentNode)if(o.nodeType==1&&o.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",t),n.state.field(vP)&&n.dispatch({effects:jv.of(null)})}};window.addEventListener("mousemove",t)}function fV(n,e,t){function r(){let s=n.elementAtHeight(e.getBoundingClientRect().top+5-n.documentTop);n.coordsAtPos(s.from)&&n.dispatch({effects:jv.of({pos:s.from,above:!1,create(){return{dom:dP(n,t),getCoords:()=>e.getBoundingClientRect()}}})}),e.onmouseout=e.onmousemove=null,cV(n,e)}let{hoverTime:i}=n.state.facet(Qd),o=setTimeout(r,i);e.onmouseout=()=>{clearTimeout(o),e.onmouseout=e.onmousemove=null},e.onmousemove=()=>{clearTimeout(o),o=setTimeout(r,i)}}function hV(n,e){let t=Object.create(null);for(let i of e){let o=n.lineAt(i.from);(t[o.from]||(t[o.from]=[])).push(i)}let r=[];for(let i in t)r.push(new uV(t[i]).range(+i));return Jt.of(r,!0)}const dV=VT({class:"cm-gutter-lint",markers:n=>n.state.field(gP)}),gP=zn.define({create(){return Jt.empty},update(n,e){n=n.map(e.changes);let t=e.state.facet(Qd).markerFilter;for(let r of e.effects)if(r.is(Yd)){let i=r.value;t&&(i=t(i||[])),n=hV(e.state.doc,i.slice(0))}return n}}),jv=Pt.define(),vP=zn.define({create(){return null},update(n,e){return n&&e.docChanged&&(n=cP(e,n)?null:Object.assign(Object.assign({},n),{pos:e.changes.mapPos(n.pos)})),e.effects.reduce((t,r)=>r.is(jv)?r.value:t,n)},provide:n=>jd.from(n)}),pV=ut.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:Jf('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:Jf('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error:before":{content:Jf('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),Qd=at.define({combine(n){return Xi(n,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function mV(n={}){return[Qd.of(n),gP,dV,pV,vP]}const gV=(()=>[P7(),R7(),QB(),H9(),g9(),BB(),zB(),Lt.allowMultipleSelections.of(!0),r9(),c4(b9,{fallback:!0}),T9(),FU(),QU(),l7(),f7(),n7(),JF(),Dd.of([...HU,...HF,...dU,...eF,...d9,...uP,...iV])])();class Kh{constructor(e,t,r,i,o,s,a,l,u,f=0,c){this.p=e,this.stack=t,this.state=r,this.reducePos=i,this.pos=o,this.score=s,this.buffer=a,this.bufferBase=l,this.curContext=u,this.lookAhead=f,this.parent=c}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let i=e.parser.context;return new Kh(e,[],t,r,r,0,[],0,i?new Hb(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,r=e&65535,{parser:i}=this.p,o=i.dynamicPrecedence(r);if(o&&(this.score+=o),t==0){this.pushState(i.getGoto(this.state,r,!0),this.reducePos),r<i.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,4,!0),this.reduceContext(r,this.reducePos);return}let s=this.stack.length-(t-1)*3-(e&262144?6:0),a=this.stack[s-2],l=this.stack[s-1],u=this.bufferBase+this.buffer.length-l;if(r<i.minRepeatTerm||e&131072){let f=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,a,f,u+4,!0)}if(e&262144)this.state=this.stack[s];else{let f=this.stack[s-3];this.state=i.getGoto(f,r,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(r,a)}storeNode(e,t,r,i=4,o=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let s=this,a=this.buffer.length;if(a==0&&s.parent&&(a=s.bufferBase-s.parent.bufferBase,s=s.parent),a>0&&s.buffer[a-4]==0&&s.buffer[a-1]>-1){if(t==r)return;if(s.buffer[a-2]>=t){s.buffer[a-2]=r;return}}}if(!o||this.pos==r)this.buffer.push(e,t,r,i);else{let s=this.buffer.length;if(s>0&&this.buffer[s-4]!=0)for(;s>0&&this.buffer[s-2]>r;)this.buffer[s]=this.buffer[s-4],this.buffer[s+1]=this.buffer[s-3],this.buffer[s+2]=this.buffer[s-2],this.buffer[s+3]=this.buffer[s-1],s-=4,i>4&&(i-=4);this.buffer[s]=e,this.buffer[s+1]=t,this.buffer[s+2]=r,this.buffer[s+3]=i}}shift(e,t,r){let i=this.pos;if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let o=e,{parser:s}=this.p;(r>this.pos||t<=s.maxNode)&&(this.pos=r,s.stateFlag(o,1)||(this.reducePos=r)),this.pushState(o,i),this.shiftContext(t,i),t<=s.maxNode&&this.buffer.push(t,i,r,4)}else this.pos=r,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,r,4)}apply(e,t,r){e&65536?this.reduce(e):this.shift(e,t,r)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new Kh(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new vV(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if((r&65536)==0)return!0;if(r==0)return!1;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>4<<1||this.stack.length>=120){let i=[];for(let o=0,s;o<t.length;o+=2)(s=t[o+1])!=this.state&&this.p.parser.hasAction(s,e)&&i.push(t[o],s);if(this.stack.length<120)for(let o=0;i.length<4<<1&&o<t.length;o+=2){let s=t[o+1];i.some((a,l)=>l&1&&a==s)||i.push(t[o],s)}t=i}let r=[];for(let i=0;i<t.length&&r.length<4;i+=2){let o=t[i+1];if(o==this.state)continue;let s=this.split();s.pushState(o,this.pos),s.storeNode(0,s.pos,s.pos,4,!0),s.shiftContext(t[i],this.pos),s.score-=200,r.push(s)}return r}forceReduce(){let e=this.p.parser.stateSlot(this.state,5);if((e&65536)==0)return!1;let{parser:t}=this.p;if(!t.validAction(this.state,e)){let r=e>>19,i=e&65535,o=this.stack.length-r*3;if(o<0||t.getGoto(this.stack[o],i,!1)<0)return!1;this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.reducePos,this.reducePos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.reducePos,this.reducePos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Hb(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Hb{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}var zb;(function(n){n[n.Insert=200]="Insert",n[n.Delete=190]="Delete",n[n.Reduce=100]="Reduce",n[n.MaxNext=4]="MaxNext",n[n.MaxInsertStackDepth=300]="MaxInsertStackDepth",n[n.DampenInsertStackDepth=120]="DampenInsertStackDepth"})(zb||(zb={}));class vV{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class Gh{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Gh(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Gh(this.stack,this.pos,this.index)}}class Qf{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Wb=new Qf;class yV{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Wb,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,i=this.rangeIndex,o=this.pos+e;for(;o<r.from;){if(!i)return null;let s=this.ranges[--i];o-=r.from-s.to,r=s}for(;t<0?o>r.to:o>=r.to;){if(i==this.ranges.length-1)return null;let s=this.ranges[++i];o+=s.from-r.to,r=s}return o}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,r,i;if(t>=0&&t<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(t);else{let o=this.resolveOffset(e,1);if(o==null)return-1;if(r=o,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let s=this.rangeIndex,a=this.range;for(;a.to<=r;)a=this.ranges[++s];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Wb,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return r}}class Zf{constructor(e,t){this.data=e,this.id=t}token(e,t){_V(this.data,e,t,this.id)}}Zf.prototype.contextual=Zf.prototype.fallback=Zf.prototype.extend=!1;function _V(n,e,t,r){let i=0,o=1<<r,{parser:s}=t.p,{dialect:a}=s;e:for(;(o&n[i])!=0;){let l=n[i+1];for(let d=i+3;d<l;d+=2)if((n[d+1]&o)>0){let g=n[d];if(a.allows(g)&&(e.token.value==-1||e.token.value==g||s.overrides(g,e.token.value))){e.acceptToken(g);break}}let u=e.next,f=0,c=n[i+2];if(e.next<0&&c>f&&n[l+c*3-3]==65535){i=n[l+c*3-1];continue e}for(;f<c;){let d=f+c>>1,g=l+d+(d<<1),h=n[g],v=n[g+1];if(u<h)c=d;else if(u>=v)f=d+1;else{i=n[g+2],e.advance();continue e}}break}}function Lc(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let r=0,i=0;r<n.length;){let o=0;for(;;){let s=n.charCodeAt(r++),a=!1;if(s==126){o=65535;break}s>=92&&s--,s>=34&&s--;let l=s-32;if(l>=46&&(l-=46,a=!0),o+=l,a)break;o*=46}t?t[i++]=o:t=new e(o)}return t}const mi=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG);let Yp=null;var Kb;(function(n){n[n.Margin=25]="Margin"})(Kb||(Kb={}));function Gb(n,e,t){let r=n.cursor(rr.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}class bV{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?Gb(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Gb(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],i=this.index[t];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let o=r.children[i],s=this.start[t]+r.positions[i];if(s>e)return this.nextStart=s,null;if(o instanceof jn){if(s==e){if(s<this.safeFrom)return null;let a=s+o.length;if(a<=this.safeTo){let l=o.prop(Bt.lookAhead);if(!l||a+l<this.fragment.to)return o}}this.index[t]++,s+o.length>=Math.max(this.safeFrom,e)&&(this.trees.push(o),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+o.length}}}class wV{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new Qf)}getActions(e){let t=0,r=null,{parser:i}=e.p,{tokenizers:o}=i,s=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let u=0;u<o.length;u++){if((1<<u&s)==0)continue;let f=o[u],c=this.tokens[u];if(!(r&&!f.fallback)&&((f.contextual||c.start!=e.pos||c.mask!=s||c.context!=a)&&(this.updateCachedToken(c,f,e),c.mask=s,c.context=a),c.lookAhead>c.end+25&&(l=Math.max(c.lookAhead,l)),c.value!=0)){let d=t;if(c.extended>-1&&(t=this.addActions(e,c.extended,c.end,t)),t=this.addActions(e,c.value,c.end,t),!f.extend&&(r=c,t>d))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!r&&e.pos==this.stream.end&&(r=new Qf,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Qf,{pos:r,p:i}=e;return t.start=r,t.end=Math.min(r+1,i.stream.end),t.value=r==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,r){let i=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(i,e),r),e.value>-1){let{parser:o}=r.p;for(let s=0;s<o.specialized.length;s++)if(o.specialized[s]==e.value){let a=o.specializers[s](this.stream.read(e.start,e.end),r);if(a>=0&&r.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,r,i){for(let o=0;o<i;o+=3)if(this.actions[o]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=r,i}addActions(e,t,r,i){let{state:o}=e,{parser:s}=e.p,{data:a}=s;for(let l=0;l<2;l++)for(let u=s.stateSlot(o,l?2:1);;u+=3){if(a[u]==65535)if(a[u+1]==1)u=so(a,u+2);else{i==0&&a[u+1]==2&&(i=this.putAction(so(a,u+2),t,r,i));break}a[u]==t&&(i=this.putAction(so(a,u+1),t,r,i))}return i}}var Yb;(function(n){n[n.Distance=5]="Distance",n[n.MaxRemainingPerStep=3]="MaxRemainingPerStep",n[n.MinBufferLengthPrune=500]="MinBufferLengthPrune",n[n.ForceReduceLimit=10]="ForceReduceLimit",n[n.CutDepth=15e3]="CutDepth",n[n.CutTo=9e3]="CutTo"})(Yb||(Yb={}));class SV{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.stream=new yV(t,i),this.tokens=new wV(e,this.stream),this.topTerm=e.top[1];let{from:o}=i[0];this.stacks=[Kh.start(this,e.top[0],o)],this.fragments=r.length&&this.stream.end-o>e.bufferLength*4?new bV(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],i,o;for(let s=0;s<e.length;s++){let a=e[s];for(;;){if(this.tokens.mainToken=null,a.pos>t)r.push(a);else{if(this.advanceStack(a,r,e))continue;{i||(i=[],o=[]),i.push(a);let l=this.tokens.getMainToken(a);o.push(l.value,l.end)}}break}}if(!r.length){let s=i&&EV(i);if(s)return this.stackToTree(s);if(this.parser.strict)throw mi&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let s=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,o,r);if(s)return this.stackToTree(s.forceAll())}if(this.recovering){let s=this.recovering==1?1:this.recovering*3;if(r.length>s)for(r.sort((a,l)=>l.score-a.score);r.length>s;)r.pop();r.some(a=>a.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let s=0;s<r.length-1;s++){let a=r[s];for(let l=s+1;l<r.length;l++){let u=r[l];if(a.sameState(u)||a.buffer.length>500&&u.buffer.length>500)if((a.score-u.score||a.buffer.length-u.buffer.length)>0)r.splice(l--,1);else{r.splice(s--,1);continue e}}}}this.minStackPos=r[0].pos;for(let s=1;s<r.length;s++)r[s].pos<this.minStackPos&&(this.minStackPos=r[s].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let i=e.pos,{parser:o}=this,s=mi?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,f=u?e.curContext.hash:0;for(let c=this.fragments.nodeAt(i);c;){let d=this.parser.nodeSet.types[c.type.id]==c.type?o.getGoto(e.state,c.type.id):-1;if(d>-1&&c.length&&(!u||(c.prop(Bt.contextHash)||0)==f))return e.useNode(c,d),mi&&console.log(s+this.stackID(e)+` (via reuse of ${o.getName(c.type.id)})`),!0;if(!(c instanceof jn)||c.children.length==0||c.positions[0]>0)break;let g=c.children[0];if(g instanceof jn&&c.positions[0]==0)c=g;else break}}let a=o.stateSlot(e.state,4);if(a>0)return e.reduce(a),mi&&console.log(s+this.stackID(e)+` (via always-reduce ${o.getName(a&65535)})`),!0;if(e.stack.length>=15e3)for(;e.stack.length>9e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let u=0;u<l.length;){let f=l[u++],c=l[u++],d=l[u++],g=u==l.length||!r,h=g?e:e.split();if(h.apply(f,c,d),mi&&console.log(s+this.stackID(h)+` (via ${(f&65536)==0?"shift":`reduce of ${o.getName(f&65535)}`} for ${o.getName(c)} @ ${i}${h==e?"":", split"})`),g)return!0;h.pos>i?t.push(h):r.push(h)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return Jb(e,t),!0}}runRecovery(e,t,r){let i=null,o=!1;for(let s=0;s<e.length;s++){let a=e[s],l=t[s<<1],u=t[(s<<1)+1],f=mi?this.stackID(a)+" -> ":"";if(a.deadEnd&&(o||(o=!0,a.restart(),mi&&console.log(f+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))))continue;let c=a.split(),d=f;for(let g=0;c.forceReduce()&&g<10&&(mi&&console.log(d+this.stackID(c)+" (via force-reduce)"),!this.advanceFully(c,r));g++)mi&&(d=this.stackID(c)+" -> ");for(let g of a.recoverByInsert(l))mi&&console.log(f+this.stackID(g)+" (via recover-insert)"),this.advanceFully(g,r);this.stream.end>a.pos?(u==a.pos&&(u++,l=0),a.recoverByDelete(l,u),mi&&console.log(f+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),Jb(a,r)):(!i||i.score<a.score)&&(i=a)}return i}stackToTree(e){return e.close(),jn.build({buffer:Gh.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Yp||(Yp=new WeakMap)).get(e);return t||Yp.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Jb(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class CV{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}class Yh extends YT{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (${14})`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let r=Object.keys(e.topRules).map(a=>e.topRules[a][1]),i=[];for(let a=0;a<t.length;a++)i.push([]);function o(a,l,u){i[a].push([l,l.deserialize(String(u))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=Bt[l]);for(let u=1;u<a.length;){let f=a[u++];if(f>=0)o(f,l,a[u++]);else{let c=a[u+-f];for(let d=-f;d>0;d--)o(a[u++],l,c);u++}}}this.nodeSet=new mv(t.map((a,l)=>Mr.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:i[l],top:r.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=WT;let s=Lc(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(Zb),this.states=Lc(e.states,Uint32Array),this.data=Lc(e.stateData),this.goto=Lc(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new Zf(s,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let i=new SV(this,e,t,r);for(let o of this.wrappers)i=o(i,e,t,r);return i}getGoto(e,t,r=!1){let i=this.goto;if(t>=i[0])return-1;for(let o=i[t+1];;){let s=i[o++],a=s&1,l=i[o++];if(a&&r)return l;for(let u=o+(s>>1);o<u;o++)if(i[o]==e)return l;if(a)return-1}}hasAction(e,t){let r=this.data;for(let i=0;i<2;i++)for(let o=this.stateSlot(e,i?2:1),s;;o+=3){if((s=r[o])==65535)if(r[o+1]==1)s=r[o=so(r,o+2)];else{if(r[o+1]==2)return so(r,o+2);break}if(s==t||s==0)return so(r,o+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=so(this.data,r+2);else return!1;if(t==so(this.data,r+1))return!0}}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=so(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];t.some((o,s)=>s&1&&o==i)||t.push(this.data[r],i)}}return t}overrides(e,t){let r=Qb(this.data,this.tokenPrecTable,t);return r<0||Qb(this.data,this.tokenPrecTable,e)<r}configure(e){let t=Object.assign(Object.create(Yh.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(o=>o.from==r);return i?i.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,i)=>{let o=e.specializers.find(a=>a.from==r.external);if(!o)return r;let s=Object.assign(Object.assign({},r),{external:o.to});return t.specializers[i]=Zb(s),s})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let o of e.split(" ")){let s=t.indexOf(o);s>=0&&(r[s]=!0)}let i=null;for(let o=0;o<t.length;o++)if(!r[o])for(let s=this.dialects[t[o]],a;(a=this.data[s++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[a]=1;return new CV(e,r,i)}static deserialize(e){return new Yh(e)}}function so(n,e){return n[e]|n[e+1]<<16}function Qb(n,e,t){for(let r=e,i;(i=n[r])!=65535;r++)if(i==t)return r-e;return-1}function EV(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function Zb(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}const OV=QT({String:Ke.string,Number:Ke.number,"True False":Ke.bool,PropertyName:Ke.propertyName,Null:Ke.null,",":Ke.separator,"[ ]":Ke.squareBracket,"{ }":Ke.brace}),kV=Yh.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#CjOOQO'#Cp'#CpQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CrOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59U,59UO!iQPO,59UOVQPO,59QOqQPO'#CkO!nQPO,59^OOQO1G.k1G.kOVQPO'#ClO!vQPO,59aOOQO1G.p1G.pOOQO1G.l1G.lOOQO,59V,59VOOQO-E6i-E6iOOQO,59W,59WOOQO-E6j-E6j",stateData:"#O~OcOS~OQSORSOSSOTSOWQO]ROePO~OVXOeUO~O[[O~PVOg^O~Oh_OVfX~OVaO~OhbO[iX~O[dO~Oh_OVfa~OhbO[ia~O",goto:"!kjPPPPPPkPPkqwPPk{!RPPP!XP!ePP!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"\u26A0 JsonText True False Null Number String } { Object Property PropertyName ] [ Array",maxTerm:25,nodeProps:[["openedBy",7,"{",12,"["],["closedBy",8,"}",13,"]"]],propSources:[OV],skippedNodes:[0],repeatNodeCount:2,tokenData:"(p~RaXY!WYZ!W]^!Wpq!Wrs!]|}$i}!O$n!Q!R$w!R![&V![!]&h!}#O&m#P#Q&r#Y#Z&w#b#c'f#h#i'}#o#p(f#q#r(k~!]Oc~~!`Upq!]qr!]rs!rs#O!]#O#P!w#P~!]~!wOe~~!zXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#g~#jR!Q![#s!c!i#s#T#Z#s~#vR!Q![$P!c!i$P#T#Z$P~$SR!Q![$]!c!i$]#T#Z$]~$`R!Q![!]!c!i!]#T#Z!]~$nOh~~$qQ!Q!R$w!R![&V~$|RT~!O!P%V!g!h%k#X#Y%k~%YP!Q![%]~%bRT~!Q![%]!g!h%k#X#Y%k~%nR{|%w}!O%w!Q![%}~%zP!Q![%}~&SPT~!Q![%}~&[ST~!O!P%V!Q![&V!g!h%k#X#Y%k~&mOg~~&rO]~~&wO[~~&zP#T#U&}~'QP#`#a'T~'WP#g#h'Z~'^P#X#Y'a~'fOR~~'iP#i#j'l~'oP#`#a'r~'uP#`#a'x~'}OS~~(QP#f#g(T~(WP#i#j(Z~(^P#X#Y(a~(fOQ~~(kOW~~(pOV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0}),TV=xh.define({parser:kV.configure({props:[e4.add({Object:yb({except:/^\s*\}/}),Array:yb({except:/^\s*\]/})}),n4.add({"Object Array":o9})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function PV(){return new G7(TV)}function Xb(n){let e,t,r;return{c(){e=ee("div"),t=qe("Line: "),r=qe(n[0]),T(e,"class","jse-status-bar-info svelte-outk3w")},m(i,o){fe(i,e,o),B(e,t),B(e,r)},p(i,o){o&1&&bt(r,i[0])},d(i){i&&ue(e)}}}function $b(n){let e,t,r;return{c(){e=ee("div"),t=qe("Column: "),r=qe(n[1]),T(e,"class","jse-status-bar-info svelte-outk3w")},m(i,o){fe(i,e,o),B(e,t),B(e,r)},p(i,o){o&2&&bt(r,i[1])},d(i){i&&ue(e)}}}function ew(n){let e,t,r,i;return{c(){e=ee("div"),t=qe("Selection: "),r=qe(n[2]),i=qe(" characters"),T(e,"class","jse-status-bar-info svelte-outk3w")},m(o,s){fe(o,e,s),B(e,t),B(e,r),B(e,i)},p(o,s){s&4&&bt(r,o[2])},d(o){o&&ue(e)}}}function IV(n){let e,t,r,i=n[0]!==void 0&&Xb(n),o=n[1]!==void 0&&$b(n),s=n[2]!==void 0&&n[2]>0&&ew(n);return{c(){e=ee("div"),i&&i.c(),t=me(),o&&o.c(),r=me(),s&&s.c(),T(e,"class","jse-status-bar svelte-outk3w")},m(a,l){fe(a,e,l),i&&i.m(e,null),B(e,t),o&&o.m(e,null),B(e,r),s&&s.m(e,null)},p(a,[l]){a[0]!==void 0?i?i.p(a,l):(i=Xb(a),i.c(),i.m(e,t)):i&&(i.d(1),i=null),a[1]!==void 0?o?o.p(a,l):(o=$b(a),o.c(),o.m(e,r)):o&&(o.d(1),o=null),a[2]!==void 0&&a[2]>0?s?s.p(a,l):(s=ew(a),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:Me,o:Me,d(a){a&&ue(e),i&&i.d(),o&&o.d(),s&&s.d()}}}function AV(n,e,t){var r,i,o,s,a;let{editorState:l}=e,u,f,c,d,g;return n.$$set=h=>{"editorState"in h&&t(3,l=h.editorState)},n.$$.update=()=>{n.$$.dirty&56&&t(9,u=t(5,i=t(4,r=l==null?void 0:l.selection)===null||r===void 0?void 0:r.main)===null||i===void 0?void 0:i.head),n.$$.dirty&584&&t(10,f=t(6,o=l==null?void 0:l.doc)===null||o===void 0?void 0:o.lineAt(u)),n.$$.dirty&1024&&t(0,c=f?f.number:void 0),n.$$.dirty&1536&&t(1,d=f?u-f.from+1:void 0),n.$$.dirty&392&&t(2,g=t(8,a=t(7,s=l==null?void 0:l.selection)===null||s===void 0?void 0:s.ranges)===null||a===void 0?void 0:a.reduce((h,v)=>h+v.to-v.from,0))},[c,d,g,l,r,i,o,s,a,u,f]}class RV extends rt{constructor(e){super(),nt(this,e,AV,IV,Xt,{editorState:3})}}const Lv=Hu.define([{tag:Ke.propertyName,color:"var(--jse-key-color)"},{tag:Ke.number,color:"var(--jse-value-color-number)"},{tag:Ke.bool,color:"var(--jse-value-color-boolean)"},{tag:Ke.string,color:"var(--jse-value-color-string)"},{tag:Ke.keyword,color:"var(--jse-value-color-null)"}]),xV=c4(Lv),NV=Lv.style;Lv.style=n=>NV(n||[]);function MV(n){return n&&n.space===!0&&Object.keys(n).length===1}function tw(n){return typeof n.parseError=="object"&&n.parseError!==null}function DV(n){return Array.isArray(n.validationErrors)}var nw=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function jV(n,e){return!!(n===e||nw(n)&&nw(e))}function LV(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!jV(n[t],e[t]))return!1;return!0}function yP(n,e){e===void 0&&(e=LV);var t=null;function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(t&&t.lastThis===this&&e(i,t.lastArgs))return t.lastResult;var s=n.apply(this,i);return t={lastResult:s,lastArgs:i,lastThis:this},s}return r.clear=function(){t=null},r}function Jp(n,e){const t=Date.now(),r=n(),i=Date.now();return e(i-t),r}const Bl=Sr("validation");function BV(n){const e={};return n.forEach(t=>{e[Ge(t.path)]=t}),n.forEach(t=>{let r=t.path;for(;r.length>0;){r=Vt(r);const i=Ge(r);i in e||(e[i]={isChildError:!0,path:r,message:"Contains invalid data"})}}),e}function FV(n,e){return Bl("validateJSON"),e(n)}function UV(n,e){if(Bl("validateText"),n.length>GA)return{validationErrors:[{path:[],message:"Validation turned off: the document is too large",severity:tn.info}]};if(n.length===0)return{validationErrors:[]};try{const t=Jp(()=>JSON.parse(n),i=>Bl(`validate: parsed json in ${i} ms`));return e?{validationErrors:Jp(()=>e(t),i=>Bl(`validate: validated json in ${i} ms`))}:{validationErrors:[]}}catch(t){const r=Jp(()=>VV(n),o=>Bl(`validate: checked whether repairable in ${o} ms`));return{parseError:Z0(n,t.message||t.toString()),isRepairable:r}}}function VV(n){if(n.length>YA)return!1;try{return JSON.parse(Ho(n)),!0}catch{return!1}}function rw(n){let e,t;return e=new $j({props:{readOnly:n[1],onFormat:n[17],onCompact:n[18],onSort:n[19],onTransform:n[20],onToggleSearch:n[21],onUndo:n[22],onRedo:n[23],canFormat:!n[15],canCompact:!n[15],canSort:!n[15],canTransform:!n[15],canUndo:n[10],canRedo:n[11],onRenderMenu:n[5]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i[0]&2&&(o.readOnly=r[1]),i[0]&32768&&(o.canFormat=!r[15]),i[0]&32768&&(o.canCompact=!r[15]),i[0]&32768&&(o.canSort=!r[15]),i[0]&32768&&(o.canTransform=!r[15]),i[0]&1024&&(o.canUndo=r[10]),i[0]&2048&&(o.canRedo=r[11]),i[0]&32&&(o.onRenderMenu=r[5]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function qV(n){let e;return{c(){e=ee("div"),e.innerHTML=`<div class="jse-loading-space svelte-7prtn5"></div> 
      <div class="jse-loading svelte-7prtn5">loading...</div>`,T(e,"class","jse-contents svelte-7prtn5")},m(t,r){fe(t,e,r)},p:Me,i:Me,o:Me,d(t){t&&ue(e)}}}function HV(n){let e,t,r,i,o,s,a,l=n[14]&&iw(n),u=n[3]&&ow(n),f=n[12]&&sw(n);return s=new Ek({props:{validationErrors:n[9],selectError:n[26]}}),{c(){l&&l.c(),e=me(),t=ee("div"),r=me(),u&&u.c(),i=me(),f&&f.c(),o=me(),ke(s.$$.fragment),T(t,"class","jse-contents svelte-7prtn5"),ze(t,"jse-hidden",n[14])},m(c,d){l&&l.m(c,d),fe(c,e,d),fe(c,t,d),n[47](t),fe(c,r,d),u&&u.m(c,d),fe(c,i,d),f&&f.m(c,d),fe(c,o,d),Ee(s,c,d),a=!0},p(c,d){c[14]?l?(l.p(c,d),d[0]&16384&&$(l,1)):(l=iw(c),l.c(),$(l,1),l.m(e.parentNode,e)):l&&(Fe(),te(l,1,1,()=>{l=null}),Ue()),d[0]&16384&&ze(t,"jse-hidden",c[14]),c[3]?u?(u.p(c,d),d[0]&8&&$(u,1)):(u=ow(c),u.c(),$(u,1),u.m(i.parentNode,i)):u&&(Fe(),te(u,1,1,()=>{u=null}),Ue()),c[12]?f?(f.p(c,d),d[0]&4096&&$(f,1)):(f=sw(c),f.c(),$(f,1),f.m(o.parentNode,o)):f&&(Fe(),te(f,1,1,()=>{f=null}),Ue());const g={};d[0]&512&&(g.validationErrors=c[9]),s.$set(g)},i(c){a||($(l),$(u),$(f),$(s.$$.fragment,c),a=!0)},o(c){te(l),te(u),te(f),te(s.$$.fragment,c),a=!1},d(c){l&&l.d(c),c&&ue(e),c&&ue(t),n[47](null),c&&ue(r),u&&u.d(c),c&&ue(i),f&&f.d(c),c&&ue(o),Oe(s,c)}}}function iw(n){let e,t;return e=new Ys({props:{icon:rl,type:"error",message:`The JSON document is larger than ${_c(Um,1024)}, and may crash your browser when loading it in text mode. Actual size: ${_c(n[0].length,1024)}.`,actions:[{text:"Open anyway",title:"Open the document in text mode. This may freeze or crash your browser.",onClick:n[24]},{text:"Open in tree mode",title:"Open the document in tree mode. Tree mode can handle large documents.",onClick:n[4]},{text:"Cancel",title:"Cancel opening this large document.",onClick:n[25]}]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i[0]&1&&(o.message=`The JSON document is larger than ${_c(Um,1024)}, and may crash your browser when loading it in text mode. Actual size: ${_c(r[0].length,1024)}.`),i[0]&16&&(o.actions=[{text:"Open anyway",title:"Open the document in text mode. This may freeze or crash your browser.",onClick:r[24]},{text:"Open in tree mode",title:"Open the document in tree mode. Tree mode can handle large documents.",onClick:r[4]},{text:"Cancel",title:"Cancel opening this large document.",onClick:r[25]}]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function ow(n){let e,t;return e=new RV({props:{editorState:n[8]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i[0]&256&&(o.editorState=r[8]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function sw(n){let e,t;return e=new Ys({props:{type:"error",icon:rl,message:n[12].message,actions:n[13],onClick:n[48]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i[0]&4096&&(o.message=r[12].message),i[0]&8192&&(o.actions=r[13]),i[0]&4096&&(o.onClick=r[48]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function zV(n){let e,t,r,i,o,s=n[2]&&rw(n);const a=[HV,qV],l=[];function u(f,c){return f[16]?1:0}return r=u(n),i=l[r]=a[r](n),{c(){e=ee("div"),s&&s.c(),t=me(),i.c(),T(e,"class","jse-text-mode svelte-7prtn5"),ze(e,"no-main-menu",!n[2])},m(f,c){fe(f,e,c),s&&s.m(e,null),B(e,t),l[r].m(e,null),n[49](e),o=!0},p(f,c){f[2]?s?(s.p(f,c),c[0]&4&&$(s,1)):(s=rw(f),s.c(),$(s,1),s.m(e,t)):s&&(Fe(),te(s,1,1,()=>{s=null}),Ue()),i.p(f,c),c[0]&4&&ze(e,"no-main-menu",!f[2])},i(f){o||($(s),$(i),o=!0)},o(f){te(s),te(i),o=!1},d(f){f&&ue(e),s&&s.d(),l[r].d(),n[49](null)}}}function aw(n){return{from:n.from,to:n.to,message:n.message,actions:n.actions,severity:n.severity,source:void 0}}function WV(n,e,t){let r,i,o,s,a,{readOnly:l=!1}=e,{mainMenuBar:u=!0}=e,{statusBar:f=!0}=e,{text:c=""}=e,{indentation:d=2}=e,{tabSize:g=4}=e,{escapeUnicodeCharacters:h=!1}=e,{validator:v=null}=e,{onChange:m=null}=e,{onSwitchToTreeMode:p=Kt}=e,{onError:y}=e,{onFocus:b=Kt}=e,{onBlur:_=Kt}=e,{onRenderMenu:w=Kt}=e,{onSortModal:S}=e,{onTransformModal:E}=e;const P=Sr("jsoneditor:TextMode"),R={key:"Mod-i",run:le,shift:Pe,preventDefault:!0},j=typeof window>"u";P("isSSR:",j);let U,F,z,D,N,L=!1,X=[];const Q=new Bo,A=new Bo,k=new Bo,V=new Bo;let K=h;Nr(async()=>{if(!j)try{F=Z({target:U,initialText:o?"":c,readOnly:l,indentation:d}),q()}catch(we){console.error(we)}}),ho(()=>{F&&(P("Destroy CodeMirror editor"),F.destroy())});let H=!1,I=!1;const M=gh(),G=gh();function q(){F&&(P("focus"),F.focus())}let W=!1;wk({onMount:Nr,onDestroy:ho,getWindow:()=>cu(D),hasFocus:()=>W&&document.hasFocus()||og(D),onFocus:b,onBlur:_});function ae(we){P("patch",we);const $e=c,Tt=JSON.parse(c),Et=ks(Tt,we),At=_O(Tt,we);return t(0,c=JSON.stringify(Et,null,d)),c!==$e&&it(c,$e),{json:Et,previousJson:Tt,undo:At,redo:we}}function le(){if(P("format"),!l)try{const we=c,$e=JSON.parse(c);t(0,c=JSON.stringify($e,null,d)),c!==we&&it(c,we)}catch(we){y(we)}}function Pe(){if(P("compact"),!l)try{const we=c,$e=JSON.parse(c);t(0,c=JSON.stringify($e)),c!==we&&it(c,we)}catch(we){y(we)}}function Ve(){if(P("repair"),!l)try{const we=c;t(0,c=Ho(c)),t(45,ct=pp),t(12,ft=void 0),c!==we&&it(c,we)}catch(we){y(we)}}function Ae(){if(!l)try{const we=JSON.parse(c);W=!0,S({id:M,json:we,selectedPath:[],onSort:async $e=>{P("onSort",$e),ae($e)},onClose:()=>{W=!1,q()}})}catch(we){y(we)}}function ye({id:we,selectedPath:$e,onTransform:Tt,onClose:Et}){try{const At=JSON.parse(c);W=!0,E({id:we||G,json:At,selectedPath:$e,onTransform:Tt?jt=>{Tt({operations:jt,json:At,transformedJson:ks(At,jt)})}:jt=>{P("onTransform",jt),ae(jt)},onClose:()=>{W=!1,q(),Et&&Et()}})}catch(At){y(At)}}function Ne(){l||ye({selectedPath:[]})}function xe(){F&&(U&&U.querySelector(".cm-search")?Av(F):Iv(F))}function he(){l||F&&(Ev(F),q())}function ve(){l||F&&(Lh(F),q())}function de(){t(43,L=!0),Y(c,!0)}function Ie(){ge()}function De(we){P("select validation error",we);const $e=C(we);Xe($e.from,$e.to),q()}function He(we){P("select parse error",we);const $e=O(we,!1);Xe($e.from,$e.to),q()}function Xe(we,$e){P("setSelection",{anchor:we,head:$e}),F&&F.dispatch(F.state.update({selection:{anchor:we,head:$e},scrollIntoView:!0}))}function mt(we,$e){if($e.state.selection.ranges.length===1){const Tt=$e.state.selection.ranges[0],Et=c.slice(Tt.from,Tt.to);if(Et==="{"||Et==="["){const At=yd.parse(c),jt=Object.keys(At.pointers).find(kn=>{var It;return((It=At.pointers[kn].value)===null||It===void 0?void 0:It.pos)===Tt.from}),Qt=At.pointers[jt];if(jt&&Qt&&Qt.value&&Qt.valueEnd){P("pointer found, selecting inner contents of path:",jt,Qt);const kn=Qt.value.pos+1,It=Qt.valueEnd.pos-1;Xe(kn,It)}}}}function be(){return sV(vt,{delay:Fy})}function Z({target:we,initialText:$e,readOnly:Tt,indentation:Et}){P("Create CodeMirror editor",{readOnly:Tt,indentation:Et});const At=Lt.create({doc:$e,extensions:[Dd.of([zF,R]),Q.of(be()),mV(),gV,xV,ut.domEventHandlers({dblclick:mt}),ut.updateListener.of(jt=>{t(8,N=jt.state),jt.docChanged&&We()}),PV(),iU({top:!0}),A.of(Lt.readOnly.of(Tt)),V.of(Lt.tabSize.of(g)),k.of(_e(Et)),ut.lineWrapping]});return F=new ut({state:At,parent:we}),F}function x(){return F?s.unescapeValue(F.state.doc.toString()):""}function C(we){const{path:$e,message:Tt}=we,{line:Et,column:At,from:jt,to:Qt}=yD(c,$e);return{path:$e,line:Et,column:At,from:jt,to:Qt,message:Tt,severity:tn.warning,actions:[]}}function O(we,$e){const{line:Tt,column:Et,position:At,message:jt}=we;return{path:null,line:Tt,column:Et,from:At||0,to:At||0,severity:tn.error,message:jt,actions:$e&&!l?[{name:"Auto repair",apply:()=>Ve()}]:null}}function Y(we,$e=!1){if(o&&!$e){P("not applying text: editor is disabled");return}F&&we!==z&&(P("setCodeMirrorValue length=",we.length),z=we,F.dispatch({changes:{from:0,to:F.state.doc.length,insert:s.escapeValue(we)}}),Ce())}function ie(){P("refresh");const we=F.state.doc.length;F.dispatch({changes:{from:we,to:we,insert:" "}}),F.dispatch({changes:{from:we,to:we+1,insert:""}})}function pe(){P("forceUpdateText",{escapeUnicodeCharacters:h}),F&&F.dispatch({changes:{from:0,to:F.state.doc.length,insert:s.escapeValue(c)}})}function ge(){if(!!F&&(z=x(),z!==c)){const we=z;P("text changed"),t(0,c=z),Ce(),it(c,we)}}function Qe(we){P("updateLinter",we),F&&F.dispatch({effects:Q.reconfigure(be())})}function J(we){F&&(P("updateIndentation",we),F.dispatch({effects:k.reconfigure(_e(we))}))}function se(we){F&&(P("updateTabSize",we),F.dispatch({effects:V.reconfigure(Lt.tabSize.of(we))}))}function re(we){F&&(P("updateReadOnly",we),F.dispatch({effects:A.reconfigure(Lt.readOnly.of(we))}))}function _e(we){return Ld.of(typeof we=="number"?" ".repeat(we):we)}function Ce(){t(10,H=K9(F.state)>0),t(11,I=G9(F.state)>0),P({canUndo:H,canRedo:I})}const We=Ad(ge,Fy);function it(we,$e){m&&m({text:we},{text:$e},{contentErrors:Dt(),patchResult:null})}let ct=pp,ft=null;function vt(){const we=Dt();if(tw(we)){const{parseError:$e,isRepairable:Tt}=we;return[aw(O($e,Tt))]}return DV(we)?we.validationErrors.map(C).map(aw):[]}function Dt(){P("validate"),We.flush();const we=ot(c,v);return tw(we)?(t(45,ct=we.isRepairable?Hy:ZA),t(12,ft=we.parseError),t(9,X=[])):(t(45,ct=pp),t(12,ft=null),t(9,X=we.validationErrors)),we}const ot=yP(UV);function Ct(we){wt[we?"unshift":"push"](()=>{U=we,t(6,U)})}const yt=()=>He(ft);function Ut(we){wt[we?"unshift":"push"](()=>{D=we,t(7,D)})}return n.$$set=we=>{"readOnly"in we&&t(1,l=we.readOnly),"mainMenuBar"in we&&t(2,u=we.mainMenuBar),"statusBar"in we&&t(3,f=we.statusBar),"text"in we&&t(0,c=we.text),"indentation"in we&&t(28,d=we.indentation),"tabSize"in we&&t(29,g=we.tabSize),"escapeUnicodeCharacters"in we&&t(30,h=we.escapeUnicodeCharacters),"validator"in we&&t(31,v=we.validator),"onChange"in we&&t(32,m=we.onChange),"onSwitchToTreeMode"in we&&t(4,p=we.onSwitchToTreeMode),"onError"in we&&t(33,y=we.onError),"onFocus"in we&&t(34,b=we.onFocus),"onBlur"in we&&t(35,_=we.onBlur),"onRenderMenu"in we&&t(5,w=we.onRenderMenu),"onSortModal"in we&&t(36,S=we.onSortModal),"onTransformModal"in we&&t(37,E=we.onTransformModal)},n.$$.update=()=>{n.$$.dirty[0]&1&&t(15,r=c.length===0),n.$$.dirty[0]&1&&t(46,i=c&&c.length>Um),n.$$.dirty[1]&36864&&t(14,o=i&&!L),n.$$.dirty[0]&1073741824&&(s=uk({escapeControlCharacters:!1,escapeUnicodeCharacters:h})),n.$$.dirty[0]&1&&Y(c),n.$$.dirty[1]&1&&Qe(v),n.$$.dirty[0]&268435456&&J(d),n.$$.dirty[0]&536870912&&se(g),n.$$.dirty[0]&2&&re(l),n.$$.dirty[0]&1073741824|n.$$.dirty[1]&8192&&K!==h&&(t(44,K=h),pe()),n.$$.dirty[0]&2|n.$$.dirty[1]&16384&&t(13,a=ct===Hy&&!l?[{icon:rv,text:"Auto repair",title:"Automatically repair JSON",onClick:Ve}]:[])},[c,l,u,f,p,w,U,D,N,X,H,I,ft,a,o,r,j,le,Pe,Ae,Ne,xe,he,ve,de,Ie,De,He,d,g,h,v,m,y,b,_,S,E,q,ae,ye,ie,Dt,L,K,ct,i,Ct,yt,Ut]}class KV extends rt{constructor(e){super(),nt(this,e,WV,zV,Nt,{readOnly:1,mainMenuBar:2,statusBar:3,text:0,indentation:28,tabSize:29,escapeUnicodeCharacters:30,validator:31,onChange:32,onSwitchToTreeMode:4,onError:33,onFocus:34,onBlur:35,onRenderMenu:5,onSortModal:36,onTransformModal:37,focus:38,patch:39,openTransformModal:40,refresh:41,validate:42},null,[-1,-1,-1])}get focus(){return this.$$.ctx[38]}get patch(){return this.$$.ctx[39]}get openTransformModal(){return this.$$.ctx[40]}get refresh(){return this.$$.ctx[41]}get validate(){return this.$$.ctx[42]}}const Qp=Sr("jsoneditor:AutoScrollHandler");function GV(n){Qp("createAutoScrollHandler",n);let e,t;function r(u){return u<20?zA:u<50?WA:KA}function i(){if(n){const u=e*(Uy/1e3);n.scrollTop+=u}}function o(u){(!t||u!==e)&&(s(),Qp("startAutoScroll",u),e=u,t=setInterval(i,Uy))}function s(){t&&(Qp("stopAutoScroll"),clearInterval(t),t=void 0,e=void 0)}function a(u){if(n){const f=u.clientY,{top:c,bottom:d}=n.getBoundingClientRect();if(f<c){const g=r(c-f);o(-g)}else if(f>d){const g=r(f-d);o(g)}else s()}}function l(){s()}return{onDrag:a,onDragEnd:l}}const YV=(n,e,t,r)=>(n/=r/2,n<1?t/2*n*n+e:(n--,-t/2*(n*(n-2)-1)+e)),JV=()=>{let n,e,t,r,i,o,s,a,l,u,f,c,d,g;function h(){return n.scrollY||n.pageYOffset||n.scrollTop}function v(_){const w=_.getBoundingClientRect().top,S=n.getBoundingClientRect?n.getBoundingClientRect().top:0;return w-S+t}function m(_){n.scrollTo?n.scrollTo(0,_):n.scrollTop=_}function p(_){u||(u=_),f=_-u,c=o(f,t,a,l),m(c),g=!0,f<l?requestAnimationFrame(p):y()}function y(){m(t+a),e&&s&&(e.setAttribute("tabindex","-1"),e.focus()),typeof d=="function"&&d(),u=!1,g=!1}function b(_,w={}){switch(l=w.duration||1e3,i=w.offset||0,d=w.callback,o=w.easing||YV,s=w.a11y||!1,typeof w.container){case"object":n=w.container;break;case"string":n=document.querySelector(w.container);break;default:n=window}switch(t=h(),typeof _){case"number":e=void 0,s=!1,r=t+_;break;case"object":e=_,r=v(e);break;case"string":e=document.querySelector(_),r=v(e);break}switch(a=r-t+i,typeof w.duration){case"number":l=w.duration;break;case"function":l=w.duration(a);break}g?u=!1:requestAnimationFrame(p)}return b};function QV(n,e){const t={start:n,end:Math.min(Zg(n),e)},r=Math.max(Jh((n+e)/2),n),i={start:r,end:Math.min(Zg(r),e)},o=Jh(e),s=o===e?o-iu:o,a={start:Math.max(s,n),end:e},l=[t],u=i.start>=t.end&&i.end<=a.start;return u&&l.push(i),a.start>=(u?i.end:t.end)&&l.push(a),l}function _P(n){const e=aD(n,r=>r.start),t=[e[0]];for(let r=0;r<e.length;r++){const i=t.length-1,o=t[i],s=e[r];s.start<=o.end?t[i]={start:Math.min(o.start,s.start),end:Math.max(o.end,s.end)}:t.push(s)}return t}function ZV(n,e){return n.some(t=>e>=t.start&&e<t.end)}function Zg(n){return Jh(n)+iu}function Jh(n){return Math.floor(n/iu)*iu}function lw(n){let e={expandedMap:{},enforceStringMap:{},visibleSectionsMap:{},selection:void 0};return n!=null&&n.select&&(e={...e,selection:n.select(n.json,e)}),n!=null&&n.expand&&(e=vi(n.json,e,[],n.expand)),e}function Zd(n,e){return n.visibleSectionsMap[e]||Rs}function Bv(n,e,t){e.forEach(({start:r,end:i})=>{sk(r,Math.min(n.length,i),t)})}function Zp(n,e,t){const r={...e.expandedMap},i={...e.visibleSectionsMap};for(let o=0;o<=t.length;o++){const s=t.slice(0,o),a=Ge(s),l=tt(n,s);if(qn(l)&&(r[a]=!0),Array.isArray(l)&&o<t.length){const u=i[a]||Rs,f=Dn(t[o]);if(!ZV(u,f)){const c=Jh(f),d=Zg(c),g={start:c,end:d};i[a]=_P(u.concat(g))}}}return{...e,expandedMap:r,visibleSectionsMap:i}}function vi(n,e,t,r){const i={...e.expandedMap};function o(a){const l=s.length;if(Array.isArray(a)){if(r(s)){const u=Ge(s);if(i[u]=!0,a.length>0){const f=Zd(e,u);Bv(a,f,c=>{s[l]=String(c),o(a[c])}),s.pop()}}}else if(ir(a)&&r(s)){i[Ge(s)]=!0;const u=Object.keys(a);if(u.length>0){for(const f of u)s[l]=f,o(a[f]);s.pop()}}}const s=t.slice();return o(tt(n,t)),{...e,expandedMap:i}}function XV(n,e){return{...n,expandedMap:{...n.expandedMap,[Ge(e)]:!0}}}function bP(n,e){const t=Ea(n.expandedMap,e),r=Ea(n.enforceStringMap,e),i=Ea(n.visibleSectionsMap,e);return{...n,expandedMap:t,enforceStringMap:r,visibleSectionsMap:i}}function $V(n,e,t){if(t){const r={...n.enforceStringMap};return r[e]=t,{...n,enforceStringMap:r}}else if(typeof n.enforceStringMap[e]=="boolean"){const r={...n.enforceStringMap};return delete r[e],{...n,enforceStringMap:r}}else return n}function eq(n,e,t,r){return{...e,visibleSectionsMap:{...e.visibleSectionsMap,[t]:_P(Zd(e,t).concat(r))}}}function tq(n,e,t){const r=ks(n,t),i=t.reduce((o,s)=>CO(s)?wP(r,o,s):EO(s)?SP(r,o,s):OO(s)?nq(r,o,s):Km(s)||Ia(s)?rq(r,o,s):o,e);return{json:r,documentState:i}}function wP(n,e,t){const r=Ei(n,t.path),i=Vt(r),o=Ge(i),s=tt(n,i);if(sr(s)){const a=Dn(St(r)),l=Oa(e.expandedMap,i,a,1),u=Oa(e.enforceStringMap,i,a,1);let f=Oa(e.visibleSectionsMap,i,a,1);return f=CP(f,o,c=>EP(c,a,1)),{...e,expandedMap:l,enforceStringMap:u,visibleSectionsMap:f}}return e}function SP(n,e,t){const r=Ei(n,t.path),i=Vt(r),o=Ge(i),s=tt(n,i);let{expandedMap:a,enforceStringMap:l,visibleSectionsMap:u}=e;if(a=Ea(a,r),l=Ea(l,r),u=Ea(u,r),sr(s)){const f=Dn(St(r));a=Oa(a,i,f,-1),l=Oa(l,i,f,-1),u=Oa(u,i,f,-1),u=CP(u,o,c=>EP(c,f,-1))}return{...e,expandedMap:a,enforceStringMap:l,visibleSectionsMap:u}}function nq(n,e,t){const r=t.path,i=tm(n,e.expandedMap),o=tm(n,e.enforceStringMap),s=tm(n,e.visibleSectionsMap);return!_r(t.value)&&!sr(t.value)&&delete i[r],sr(t.value)||delete s[r],(_r(t.value)||sr(t.value))&&delete o[r],{...e,expandedMap:i,enforceStringMap:o,visibleSectionsMap:s}}function rq(n,e,t){if(Ia(t)&&t.from===t.path)return e;const r=c=>t.path+c.substring(t.from.length),i=em(Xp(e.expandedMap,t.from),r),o=em(Xp(e.enforceStringMap,t.from),r),s=em(Xp(e.visibleSectionsMap,t.from),r);let a=e;Ia(t)&&(a=SP(n,a,{op:"remove",path:t.from})),a=wP(n,a,{op:"add",path:t.path,value:null});const l=$p(a.expandedMap,i),u=$p(a.enforceStringMap,o),f=$p(a.visibleSectionsMap,s);return{...e,expandedMap:l,enforceStringMap:u,visibleSectionsMap:f}}function Ea(n,e){const t={},r=Ge(e);return Object.keys(n).forEach(i=>{Pa(i,r)||(t[i]=n[i])}),t}function Xp(n,e){const t={};return Object.keys(n).forEach(r=>{Pa(r,e)&&(t[r]=n[r])}),t}function $p(n,e){return{...n,...e}}function em(n,e){const t={};return Object.keys(n).forEach(r=>{const i=e(r);t[i]=n[r]}),t}function Oa(n,e,t,r){const i=e.length,o=Ge(e),s=[];for(const l of Object.keys(n))if(Pa(l,o)){const u=Ko(l),f=Dn(u[i]);f>=t&&(u[i]=String(f+r),s.push({oldPointer:l,newPointer:Ge(u),value:n[l]}))}if(s.length===0)return n;const a={...n};return s.forEach(l=>{delete a[l.oldPointer]}),s.forEach(l=>{a[l.newPointer]=l.value}),a}function tm(n,e){const t={};return Object.keys(e).filter(r=>xs(n,Ei(n,r))).forEach(r=>{t[r]=e[r]}),t}function CP(n,e,t){const r=n[e];if(e in n){const i=t(r);if(!Yt(r,i)){const o={...n};return i===void 0?delete o[e]:o[e]=i,o}}return n}function EP(n,e,t){return n.map(r=>({start:r.start>e?r.start+t:r.start,end:r.end>=e?r.end+t:r.end}))}function Wu(n,e,t){const r=e?e[t]:void 0;return typeof r=="boolean"?r:ex(n)}function Ku(n,e,t=!1){const r=n.indexOf(e);return r!==-1?t?n.slice(r):n.slice(r+1):[]}function Fv(n,e){const t=[];function r(i,o){t.push(o);const s=Ge(o);if(i&&e.expandedMap[s]===!0){if(sr(i)){const a=Zd(e,s);Bv(i,a,l=>{r(i[l],o.concat(String(l)))})}_r(i)&&Object.keys(i).forEach(a=>{r(i[a],o.concat(a))})}}return r(n,[]),t}function OP(n,e,t=!0){const r=[];function i(o,s){r.push({path:s,type:_i.value});const a=Ge(s);if(o&&e.expandedMap[a]===!0){if(t&&r.push({path:s,type:_i.inside}),sr(o)){const l=Zd(e,a);Bv(o,l,u=>{const f=s.concat(String(u));i(o[u],f),t&&r.push({path:f,type:_i.after})})}_r(o)&&Object.keys(o).forEach(u=>{const f=s.concat(u);r.push({path:f,type:_i.key}),i(o[u],f),t&&r.push({path:f,type:_i.after})})}}return i(n,[]),r}function iq(n,e,t){const r=Fv(n,e),i=r.map(Ge),o=Ge(t),s=i.indexOf(o);return s!==-1&&s>0?r[s-1]:null}function Xg(n,e,t){const r=Fv(n,e),o=r.map(Ge).indexOf(Ge(t));return o!==-1&&o<r.length-1?r[o+1]:null}const oq=1e3,Bc=Sr("jsoneditor:History");function sq(n={}){const e=n.maxItems||oq;let t=[],r=0;function i(){return r<t.length}function o(){return r>0}function s(){return{canUndo:i(),canRedo:o(),length:t.length}}function a(){n.onChange&&n.onChange(s())}function l(d){Bc("add",d),t=[d].concat(t.slice(r)).slice(0,e),r=0,a()}function u(){Bc("clear"),t=[],r=0,a()}function f(){if(i()){const d=t[r];return r+=1,Bc("undo",d),a(),d}}function c(){if(o())return r-=1,Bc("redo",t[r]),a(),t[r]}return{add:l,clear:u,getState:s,undo:f,redo:c}}function Gu(n,e){const t=new Set(e),r=n.replace(/ \(copy( \d+)?\)$/,"");let i=n,o=1;for(;t.has(i);){const s="copy"+(o>1?" "+o:"");i=`${r} (${s})`,o++}return i}function Qh(n,e){const t="...",r=e-t.length;return n.length>e?n.substring(0,r)+t:n}function aq(n){if(n==="")return"";const e=n.toLowerCase();if(e==="null")return null;if(e==="true")return!0;if(e==="false")return!1;if(e==="undefined")return;const t=Number(n),r=parseFloat(n);return!isNaN(t)&&!isNaN(r)?t:n}function Ci(n){return n&&n.type===rn.after}function Ln(n){return n&&n.type===rn.inside}function An(n){return n&&n.type===rn.key}function zt(n){return n&&n.type===rn.value}function Wt(n){return n&&n.type===rn.multi}function lq(n,e,t){if(Yt(e,t))return[e];{const r=mq(e,t);if(e.length===r.length||t.length===r.length)return[r];const i=e[r.length],o=t[r.length],s=tt(n,r);if(_r(s)){const a=Object.keys(s),l=a.indexOf(i),u=a.indexOf(o);if(l!==-1&&u!==-1){const f=Math.min(l,u),c=Math.max(l,u),d=[];for(let g=f;g<=c;g++)d.push(r.concat(a[g]));return d}}if(sr(s)){const a=Math.min(Dn(i),Dn(o)),l=Math.max(Dn(i),Dn(o)),u=[];for(let f=a;f<=l;f++)u.push(r.concat(String(f)));return u}}throw new Error("Failed to create selection")}function kP(n){return Ln(n)?n.focusPath:Vt(n.focusPath)}function qa(n){return Wt(n)?yr(n.paths):n.focusPath}function Xd(n){return Wt(n)?St(n.paths):n.focusPath}function uq(n,e){return Su(n.focusPath,e)&&(n.focusPath.length>e.length||Ln(n))}function cq(n,e,t){if(!n)return!1;const r=e.slice(0);if(Wt(n))for(;r.length>0;){if(n.pointersMap[Ge(r)]===!0)return!0;r.pop()}return An(n)?t===rn.key&&Yt(n.focusPath,e):!!(zt(n)&&(t===rn.value&&Yt(n.focusPath,e)||Su(e,n.focusPath)&&e.length>n.focusPath.length&&(t===rn.key||t===rn.value||t===rn.multi)))}function uw(n,e,t=!1,r=!1){const i=e.selection,o=!r&&Wt(i)?yr(i.paths):i.focusPath,s=iq(n,e,o);if(s===null)return null;const a=s,l=s;if(t)return Ci(i)||Ln(i)?Rn(n,i.anchorPath,i.anchorPath):Rn(n,i.anchorPath,l);if(An(i)){const u=Vt(s),f=tt(n,u);return Array.isArray(f)||gn(s)?hn(s,!1):Jr(s,!1)}return zt(i)?hn(s,!1):Ci(i)||Ln(i)?Rn(n,o,o):Rn(n,a,l)}function fq(n,e,t=!1,r=!1){const i=e.selection,o=!r&&Wt(i)?St(i.paths):i.focusPath,s=Xg(n,e,o),a=s,l=s;if(s===null)return null;if(t){const u=qn(tt(n,o))?bP(e,o):e,f=Xg(n,u,o);return f===null?null:Ci(i)?Rn(n,f,f):Ln(i)?Rn(n,a,l):Rn(n,i.anchorPath,f)}if(An(i)){const u=Vt(s),f=tt(n,u);return Array.isArray(f)?hn(l,!1):Jr(l,!1)}return zt(i)?hn(l,!1):Ln(i)?Rn(n,a,l):Rn(n,s,s)}function hq(n,e,t){const r=Vt(t),i=[St(t)],o=Xg(tt(n,r),e,i);return o?hn(r.concat(o),!1):mo(t)}function TP(n,e,t){const r=e.selection,i=OP(n,e,t),o=i.findIndex(s=>Yt(s.path,r.focusPath)&&String(s.type)===String(r.type));return{caret:o!==-1?i[o]:null,previous:o!==-1&&o>0?i[o-1]:null,next:o!==-1&&o<i.length-1?i[o+1]:null}}function dq(n,e,t=!1,r=!0){const i=e.selection,{caret:o,previous:s}=TP(n,e,r);if(t)return Wt(i)?null:Rn(n,i.anchorPath,i.focusPath);if(o&&s)return Uv(s);const a=Vt(i.focusPath),l=tt(n,a);return zt(i)&&Array.isArray(l)?Rn(n,i.focusPath,i.focusPath):Wt(i)&&!Array.isArray(l)?Jr(i.focusPath,!1):null}function pq(n,e,t=!1,r=!0){const i=e.selection,{caret:o,next:s}=TP(n,e,r);return t?Wt(i)?null:Rn(n,i.anchorPath,i.focusPath):o&&s?Uv(s):Wt(i)?hn(i.focusPath,!1):null}function Fc(n,e){const t=Fv(n,e);let r=0;for(;r<t.length-1&&t[r+1].length>t[r].length;)r++;const i=t[r];return i.length===0||Array.isArray(tt(n,Vt(i)))?hn(i,!1):Jr(i,!1)}function Ha(n,e){if(e.length===1){const r=yr(e);if(r.op==="replace"||r.op==="move"){const i=Ei(n,r.path);return hn(i,!1)}}if(!gn(e)&&e.every(r=>r.op==="move")){const r=yr(e),i=e.slice(1);if((Km(r)||Ia(r))&&r.from!==r.path&&i.every(o=>(Km(o)||Ia(o))&&o.from===o.path)){const o=Ei(n,r.path);return Jr(o,!1)}}const t=e.filter(r=>r.op!=="test"&&r.op!=="remove"&&(r.op!=="move"||r.from!==r.path)&&typeof r.path=="string").map(r=>Ei(n,r.path));return gn(t)?null:{type:rn.multi,paths:t,anchorPath:yr(t),focusPath:St(t),pointersMap:PP(t)}}function PP(n){const e={};return n.forEach(t=>{e[Ge(t)]=!0}),e}function $d(n){return{[Ge(n)]:!0}}function mq(n,e){let t=0;for(;t<n.length&&t<e.length&&n[t]===e[t];)t++;return n.slice(0,t)}function $g(n){return n&&(An(n)||zt(n)||Wt(n)&&n.paths.length===1)}function cw(n,e){return $g(e)&&qn(tt(n,e.focusPath))?e.focusPath:Vt(e.focusPath)}function Su(n,e){if(n.length<e.length)return!1;for(let t=0;t<e.length;t++)if(n[t]!==e[t])return!1;return!0}function So(n){const e=n.selection;return(An(e)||zt(e))&&e.edit?{...n,selection:{...e,edit:!1}}:n}function Jr(n,e){return{type:rn.key,anchorPath:n,focusPath:n,pointersMap:$d(n),edit:e}}function hn(n,e){return{type:rn.value,anchorPath:n,focusPath:n,pointersMap:$d(n),edit:e}}function zi(n){return{type:rn.inside,anchorPath:n,focusPath:n,pointersMap:$d(n)}}function mo(n){return{type:rn.after,anchorPath:n,focusPath:n,pointersMap:$d(n)}}function Rn(n,e,t){const r=lq(n,e,t),i=Su(t,St(r))||Su(e,yr(r));return{type:rn.multi,anchorPath:i?yr(r):St(r),focusPath:i?St(r):yr(r),paths:r,pointersMap:PP(r)}}function fw(n,e,t=2){if(An(e))return String(St(e.focusPath));if(zt(e)){const r=tt(n,e.focusPath);return typeof r=="string"?r:JSON.stringify(r,null,t)}if(Wt(e)){if(gn(e.focusPath))return JSON.stringify(n,null,t);const r=kP(e),i=tt(n,r);if(Array.isArray(i))if(e.paths.length===1){const o=tt(n,yr(e.paths));return JSON.stringify(o,null,t)}else return e.paths.map(o=>{const s=tt(n,o);return`${JSON.stringify(s,null,t)},`}).join(`
`);else return e.paths.map(o=>{const s=St(o),a=tt(n,o);return`${JSON.stringify(s)}: ${JSON.stringify(a,null,t)},`}).join(`
`)}return null}function IP(n){return Wt(n)?n.paths:[n.focusPath]}function $l(n){return(An(n)||zt(n))&&n.edit}function gq(n,e,t=!0){return e===void 0&&!t?n:{...n,selection:e}}function vq(){return hn([],!1)}function Xf(n){if(!n)return!1;if(An(n)||zt(n)||Wt(n)&&n.paths.length===1)return!0}function Uv(n){switch(n.type){case _i.key:return Jr(n.path,!1);case _i.value:return hn(n.path,!1);case _i.after:return mo(n.path);case _i.inside:return zi(n.path)}}function hw(n,e,t){switch(e){case rn.key:return Jr(t,!1);case rn.value:return hn(t,!1);case rn.after:return mo(t);case rn.inside:return zi(t);case rn.multi:return Rn(n,t,t)}}function dw(n,e){if(!!n)return Object.keys(n.pointersMap).some(t=>Pa(t,e)||Pa(e,t))?n:void 0}function Uc(n,e,t){const r=Vt(e),i=tt(n,r);if(sr(i)){const o=Dn(St(e));return t.map((s,a)=>({op:"add",path:Ge(r.concat(String(o+a))),value:s.value}))}else if(_r(i)){const o=St(e),s=Object.keys(i),a=Ku(s,o,!0);return[...t.map(l=>{const u=Gu(l.key,s);return{op:"add",path:Ge(r.concat(u)),value:l.value}}),...a.map(l=>Us(r,l))]}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}function pw(n,e,t){const r=tt(n,e);if(Array.isArray(r)){const i=r.length;return t.map((o,s)=>({op:"add",path:Ge(e.concat(String(i+s))),value:o.value}))}else return t.map(i=>{const o=Gu(i.key,Object.keys(r));return{op:"add",path:Ge(e.concat(o)),value:i.value}})}function Yu(n,e,t,r){const i=e.filter(a=>a!==t),o=Gu(r,i),s=Ku(e,t,!1);return[{op:"move",from:Ge(n.concat(t)),path:Ge(n.concat(o))},...s.map(a=>Us(n,a))]}function yq(n,e,t){const r=yr(e),i=Vt(r),o=tt(n,i);if(sr(o)){const s=yr(e),a=s?Dn(St(s)):0;return[...e0(e),...t.map((l,u)=>({op:"add",path:Ge(i.concat(String(u+a))),value:l.value}))]}else if(_r(o)){const s=St(e),a=Vt(s),l=St(s),u=Object.keys(o),f=Ku(u,l,!1),c=new Set(e.map(g=>St(g))),d=u.filter(g=>!c.has(g));return[...e0(e),...t.map(g=>{const h=Gu(g.key,d);return{op:"add",path:Ge(a.concat(h)),value:g.value}}),...f.map(g=>Us(a,g))]}else throw new Error("Cannot create replace operations: parent must be an Object or Array")}function _q(n,e){const t=St(e);if(gn(t))throw new Error("Cannot duplicate root object");const r=Vt(t),i=St(t),o=tt(n,r);if(sr(o)){const s=St(e),a=s?Dn(St(s))+1:0;return[...e.map((l,u)=>({op:"copy",from:Ge(l),path:Ge(r.concat(String(u+a)))}))]}else if(_r(o)){const s=Object.keys(o),a=Ku(s,i,!1);return[...e.map(l=>{const u=St(l),f=Gu(u,s);return{op:"copy",from:Ge(l),path:Ge(r.concat(f))}}),...a.map(l=>Us(r,l))]}else throw new Error("Cannot create duplicate operations: parent must be an Object or Array")}function bq(n,e){if(zt(e))return[{op:"move",from:Ge(e.focusPath),path:""}];if(Wt(e)){const t=Vt(e.focusPath),r=tt(n,t);if(sr(r)){const i=e.paths.map(o=>{const s=Dn(St(o));return r[s]});return[{op:"replace",path:"",value:i}]}else if(_r(r)){const i={};return e.paths.forEach(o=>{const s=String(St(o));i[s]=r[s]}),[{op:"replace",path:"",value:i}]}}else throw new Error("Cannot create extract operations: parent must be an Object or Array");throw new Error("Cannot extract: unsupported type of selection "+JSON.stringify(e))}function mw(n,e,t){if(An(e)){const r=ak(t),i=Vt(e.focusPath),o=tt(n,i),s=Object.keys(o),a=St(e.focusPath);return Yu(i,s,a,typeof r=="string"?r:t)}if(zt(e)||Wt(e)&&gn(e.focusPath))try{return[{op:"replace",path:Ge(e.focusPath),value:Q0(t,J0)}]}catch{return[{op:"replace",path:Ge(e.focusPath),value:t}]}if(Wt(e)){const r=nm(t);return yq(n,e.paths,r)}if(Ci(e)){const r=nm(t),i=e.focusPath,o=Vt(i),s=tt(n,o);if(sr(s)){const a=Dn(St(i)),l=o.concat(String(a+1));return Uc(n,l,r)}else if(_r(s)){const a=String(St(i)),l=Object.keys(s);if(gn(l)||St(l)===a)return pw(n,o,r);{const u=l.indexOf(a),f=l[u+1],c=o.concat(f);return Uc(n,c,r)}}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}if(Ln(e)){const r=nm(t),i=e.focusPath,o=tt(n,i);if(sr(o)){const s=i.concat("0");return Uc(n,s,r)}else if(_r(o)){const s=Object.keys(o);if(gn(s))return pw(n,i,r);{const a=yr(s),l=i.concat(a);return Uc(n,l,r)}}else throw new Error("Cannot create insert operations: parent must be an Object or Array")}throw new Error("Cannot insert: unsupported type of selection "+JSON.stringify(e))}function wq(n,e,t){const r=t.beforePath,i=t.append,o=Vt(e.focusPath),s=tt(n,o);if(!i&&!(r&&Su(r,o)&&r.length>o.length))return[];const a=qa(e),l=Xd(e),u=St(a),f=St(l),c=r?r[o.length]:void 0;if(_r(s)){const d=Object.keys(s),g=d.indexOf(u),h=d.indexOf(f),v=i?d.length:d.indexOf(c);if(g!==-1&&h!==-1&&v!==-1)return v>g?[...d.slice(g,h+1),...d.slice(v,d.length)].map(m=>Us(o,m)):[...d.slice(v,g),...d.slice(h+1,d.length)].map(m=>Us(o,m))}else if(sr(s)){const d=Dn(u),g=Dn(f),h=c!==void 0?Dn(c):s.length,v=g-d+1;return h<d?A_(v,m=>({op:"move",from:Ge(o.concat(String(d+m))),path:Ge(o.concat(String(h+m)))})):A_(v,()=>({op:"move",from:Ge(o.concat(String(d))),path:Ge(o.concat(String(h)))}))}else throw new Error("Cannot create move operations: parent must be an Object or Array")}function Sq(n,e,t){if(t==="object")return{};if(t==="array")return[];if(t==="structure"){const r=kP(e),i=tt(n,r);if(Array.isArray(i)&&!gn(i)){const o=yr(i);return qn(o)?R5(o,s=>Array.isArray(s)?[]:ir(s)?void 0:""):""}}return""}function e0(n){return n.map(e=>({op:"remove",path:Ge(e)})).reverse()}function Us(n,e){return{op:"move",from:Ge(n.concat(e)),path:Ge(n.concat(e))}}function nm(n){const e=/^\s*{/.test(n),t=/^\s*\[/.test(n),r=ak(n),i=r!==void 0?r:Q0(n,J0);return e&&ir(i)||t&&Array.isArray(i)?[{key:"New item",value:i}]:Array.isArray(i)?i.map((o,s)=>({key:"New item "+s,value:o})):ir(i)?Object.keys(i).map(o=>({key:o,value:i[o]})):[{key:"New item",value:i}]}function gw(n,e){if(An(e)){const t=Vt(e.focusPath),r=tt(n,t),i=Object.keys(r),o=St(e.focusPath),a=Yu(t,i,o,""),l=Ha(n,a);return{operations:a,newSelection:l}}if(zt(e))return{operations:[{op:"replace",path:Ge(e.focusPath),value:""}],newSelection:e};if(Wt(e)){const t=e0(e.paths),r=St(e.paths);if(gn(r)){const s=[{op:"replace",path:"",value:""}],a=hn([],!1);return{operations:s,newSelection:a}}const i=Vt(r),o=tt(n,i);if(sr(o)){const s=yr(e.paths),a=Dn(St(s)),l=a===0?zi(i):mo(i.concat(String(a-1)));return{operations:t,newSelection:l}}else if(_r(o)){const s=Object.keys(o),a=yr(e.paths),l=St(a),u=s.indexOf(l),f=s[u-1],c=u===0?zi(i):mo(i.concat(f));return{operations:t,newSelection:c}}else throw new Error("Cannot create remove operations: parent must be an Object or Array")}throw new Error("Cannot remove: unsupported type of selection "+JSON.stringify(e))}function Cq(n,e){return _O(n,e,{before:(t,r,i)=>{if(EO(r)){const o=Ko(r.path);return{revertOperations:[...i,...vw(t,o)]}}if(Ia(r)){const o=Ko(r.from);return{revertOperations:[...i,...vw(t,o)]}}return{revertOperations:i}}})}function vw(n,e){const t=Vt(e),r=St(e),i=tt(n,t);if(_r(i)){const o=Object.keys(i);return Ku(o,r,!1).map(a=>Us(t,a))}return[]}function Eq(n,e,t){const r=t!=null&&t.activeItem?bw(t.activeItem):void 0,i=e.findIndex(l=>Yt(r,bw(l))),o=i!==-1?i:(t==null?void 0:t.activeIndex)<e.length?t==null?void 0:t.activeIndex:e.length>0?0:-1,s=e.map((l,u)=>({...l,active:u===o})),a=s[o];return{items:s,itemsMap:Y0(s,l=>Ge(l.path)),activeItem:a,activeIndex:o}}function Oq(n){const e=n.activeIndex<n.items.length-1?n.activeIndex+1:n.items.length>0?0:-1,t=n.items[e],r=n.items.map((i,o)=>({...i,active:o===e}));return{...n,items:r,itemsMap:Y0(r,i=>Ge(i.path)),activeItem:t,activeIndex:e}}function kq(n){const e=n.activeIndex>0?n.activeIndex-1:n.items.length-1,t=n.items[e],r=n.items.map((i,o)=>({...i,active:o===e}));return{...n,items:r,itemsMap:Y0(r,i=>Ge(i.path)),activeItem:t,activeIndex:e}}function AP(n,e,t,r=1/0){const i=[],o=[];function s(l){i.length<r&&i.push(l)}function a(l,u){if(sr(u)){const f=o.length;o.push("0");for(let c=0;c<u.length;c++)if(o[f]=String(c),a(l,u[c]),i.length>=r)return;o.pop()}else if(_r(u)){const f=Object.keys(u),c=o.length;o.push("");for(const d of f)if(o[c]=d,yw(d,l,o,Oi.key,s),a(l,u[d]),i.length>=r)return;o.pop()}else yw(String(u),l,o,Oi.value,s)}if(typeof n=="string"&&n!==""){const l=n.toLowerCase();a(l,e)}return i}function yw(n,e,t,r,i){const o=n.toLowerCase();let s=0,a=-1,l=-1;do l=o.indexOf(e,a),l!==-1&&(a=l+e.length,i({path:t.slice(0),field:r,fieldIndex:s,start:l,end:a}),s++);while(l!==-1)}function t0(n,e,t,r){return n.substring(0,t)+e+n.substring(r)}function _w(n,e,t){let r=n;return F8(t,i=>{r=t0(r,e,i.start,i.end)}),r}function Tq(n,e,t,r){const{field:i,path:o,start:s,end:a}=r;if(i===Oi.key){const l=Vt(o),u=tt(n,l),f=St(o),c=Object.keys(u),d=t0(f,t,s,a),g=Yu(l,c,f,d);return{newSelection:Ha(n,g),operations:g}}else if(i===Oi.value){const l=tt(n,o);if(l===void 0)throw new Error(`Cannot replace: path not found ${Ge(o)}`);const u=typeof l=="string"?l:String(l),f=Ge(o),c=Wu(l,e.enforceStringMap,f),d=t0(u,t,s,a),g=[{op:"replace",path:Ge(o),value:c?d:ju(d)}];return{newSelection:Ha(n,g),operations:g}}else throw new Error(`Cannot replace: unknown type of search result field ${i}`)}function Pq(n,e,t,r){const i=AP(t,n,e,1/0),o=[];for(let l=0;l<i.length;l++){const u=i[l-1],f=i[l];l===0||f.field!==u.field||!Yt(f.path,u.path)?o.push({path:f.path,field:f.field,items:[f]}):St(o).items.push(f)}o.sort((l,u)=>l.field!==u.field?l.field===Oi.key?1:-1:u.path.length-l.path.length);let s=[],a;return o.forEach(l=>{const{field:u,path:f,items:c}=l;if(u===Oi.key){const d=Vt(f),g=tt(n,d),h=St(f),v=Object.keys(g),m=_w(h,r,c),p=Yu(d,v,h,m);s=s.concat(p),a=Ha(n,p)}else if(u===Oi.value){const d=tt(n,f);if(d===void 0)throw new Error(`Cannot replace: path not found ${Ge(f)}`);const g=typeof d=="string"?d:String(d),h=Ge(f),v=Wu(d,e.enforceStringMap,h),m=_w(g,r,c),p=[{op:"replace",path:Ge(f),value:v?m:ju(m)}];s=s.concat(p),a=Ha(n,p)}else throw new Error(`Cannot replace: unknown type of search result field ${u}`)}),{operations:s,newSelection:a}}function Iq(n,e){const t=[];let r=0;for(const o of e){const s=n.slice(r,o.start);s!==""&&t.push({type:"normal",text:s,active:!1});const a=n.slice(o.start,o.end);t.push({type:"highlight",text:a,active:o.active}),r=o.end}const i=St(e);return i.end<n.length&&t.push({type:"normal",text:n.slice(i.end),active:!1}),t}function bw(n){return n.path.concat(n.field,String(n.fieldIndex))}function Aq(n,e){var t;const r=(t=n==null?void 0:n[e])===null||t===void 0?void 0:t.filter(i=>i.field===Oi.key);if(!(!r||r.length===0))return r}function ww(n,e){var t;const r=(t=n==null?void 0:n[e])===null||t===void 0?void 0:t.filter(i=>i.field===Oi.value);if(!(!r||r.length===0))return r}function Rq(n){let e,t,r,i,o,s,a,l,u;return s=new kt({props:{data:Fu}}),{c(){e=ee("div"),t=ee("div"),r=qe(n[0]),i=me(),o=ee("button"),ke(s.$$.fragment),T(t,"class","jse-title svelte-1djqugc"),T(o,"type","button"),T(o,"class","jse-close svelte-1djqugc"),T(e,"class","jse-header svelte-1djqugc")},m(f,c){fe(f,e,c),B(e,t),B(t,r),B(e,i),B(e,o),Ee(s,o,null),a=!0,l||(u=Te(o,"click",n[1]),l=!0)},p(f,[c]){(!a||c&1)&&bt(r,f[0])},i(f){a||($(s.$$.fragment,f),a=!0)},o(f){te(s.$$.fragment,f),a=!1},d(f){f&&ue(e),Oe(s),l=!1,u()}}}function xq(n,e,t){let{title:r="Modal"}=e;const{close:i}=ur("simple-modal");return n.$$set=o=>{"title"in o&&t(0,r=o.title)},[r,i]}class RP extends rt{constructor(e){super(),nt(this,e,xq,Rq,Nt,{title:0})}}function Nq(n){let e,t,r,i,o,s,a,l,u,f,c,d,g,h,v,m,p,y,b,_,w,S,E,P;return t=new RP({props:{title:"Copying and pasting"}}),{c(){e=ee("div"),ke(t.$$.fragment),r=me(),i=ee("div"),o=ee("div"),o.textContent="These actions are unavailable via the menu. Please use:",s=me(),a=ee("div"),l=ee("div"),u=ee("div"),u.textContent=`${n[1]}+C`,f=qe(`
        for copy`),c=me(),d=ee("div"),g=ee("div"),g.textContent=`${n[1]}+X`,h=qe(`
        for cut`),v=me(),m=ee("div"),p=ee("div"),p.textContent=`${n[1]}+V`,y=qe(`
        for paste`),b=me(),_=ee("div"),w=ee("button"),w.textContent="Close",T(u,"class","jse-key svelte-wp98us"),T(l,"class","jse-shortcut"),T(g,"class","jse-key svelte-wp98us"),T(d,"class","jse-shortcut"),T(p,"class","jse-key svelte-wp98us"),T(m,"class","jse-shortcut"),T(a,"class","jse-shortcuts svelte-wp98us"),T(w,"type","button"),T(w,"class","jse-primary svelte-wp98us"),T(_,"class","jse-actions svelte-wp98us"),T(i,"class","jse-contents svelte-wp98us"),T(e,"class","jse-modal jse-copy-paste svelte-wp98us")},m(R,j){fe(R,e,j),Ee(t,e,null),B(e,r),B(e,i),B(i,o),B(i,s),B(i,a),B(a,l),B(l,u),B(l,f),B(a,c),B(a,d),B(d,g),B(d,h),B(a,v),B(a,m),B(m,p),B(m,y),B(i,b),B(i,_),B(_,w),S=!0,E||(P=Te(w,"click",n[0]),E=!0)},p:Me,i(R){S||($(t.$$.fragment,R),S=!0)},o(R){te(t.$$.fragment,R),S=!1},d(R){R&&ue(e),Oe(t),E=!1,P()}}}function Mq(n){const{close:e}=ur("simple-modal");return[e,gk?"\u2318":"Ctrl"]}class Dq extends rt{constructor(e){super(),nt(this,e,Mq,Nq,Nt,{})}}function jq(n){let e;return{c(){e=ee("div"),e.textContent="Repair invalid JSON, then click apply",T(e,"slot","left"),T(e,"class","jse-info svelte-1puchbn")},m(t,r){fe(t,e,r)},p:Me,d(t){t&&ue(e)}}}function Lq(n){let e,t;return e=new Ys({props:{type:"success",message:"JSON is valid now and can be parsed.",actions:n[5]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i&32&&(o.actions=r[5]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Bq(n){let e,t;return e=new Ys({props:{type:"error",icon:rl,message:`Cannot parse JSON: ${n[2].message}`,actions:n[6]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i&4&&(o.message=`Cannot parse JSON: ${r[2].message}`),i&64&&(o.actions=r[6]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Fq(n){let e,t,r,i,o,s,a,l,u,f;t=new iv({props:{items:n[7],$$slots:{left:[jq]},$$scope:{ctx:n}}});const c=[Bq,Lq],d=[];function g(h,v){return h[2]?0:1}return i=g(n),o=d[i]=c[i](n),{c(){e=ee("div"),ke(t.$$.fragment),r=me(),o.c(),s=me(),a=ee("textarea"),a.value=n[0],a.readOnly=n[1],T(a,"class","jse-json-text svelte-1puchbn"),T(a,"autocomplete","off"),T(a,"autocapitalize","off"),T(a,"spellcheck","false"),T(e,"class","jse-json-repair-component svelte-1puchbn")},m(h,v){fe(h,e,v),Ee(t,e,null),B(e,r),d[i].m(e,null),B(e,s),B(e,a),n[19](a),n[20](e),l=!0,u||(f=Te(a,"input",n[8]),u=!0)},p(h,[v]){const m={};v&128&&(m.items=h[7]),v&134217728&&(m.$$scope={dirty:v,ctx:h}),t.$set(m);let p=i;i=g(h),i===p?d[i].p(h,v):(Fe(),te(d[p],1,1,()=>{d[p]=null}),Ue(),o=d[i],o?o.p(h,v):(o=d[i]=c[i](h),o.c()),$(o,1),o.m(e,s)),(!l||v&1)&&(a.value=h[0]),(!l||v&2)&&(a.readOnly=h[1])},i(h){l||($(t.$$.fragment,h),$(o),l=!0)},o(h){te(t.$$.fragment,h),te(o),l=!1},d(h){h&&ue(e),Oe(t),d[i].d(),n[19](null),n[20](null),u=!1,f()}}}function Uq(n,e,t){let r,i,o,s,a,l,u,f,{text:c=""}=e,{readOnly:d=!1}=e,{onParse:g}=e,{onRepair:h}=e,{onChange:v=null}=e,{onApply:m}=e,{onCancel:p}=e,{onRenderMenu:y=Kt}=e;const b=Sr("jsoneditor:JSONRepair");let _,w;function S(D){try{return g(D),null}catch(N){return Z0(D,N.message)}}function E(D){try{return h(D),!0}catch{return!1}}function P(){w&&r&&r.position!=null&&(w.setSelectionRange(r.position,r.position),setTimeout(()=>{w.focus()}))}function R(D){b("handleChange");const N=D.target.value;c!==N&&(t(0,c=N),v&&v(c))}function j(){m(c)}function U(){try{t(0,c=h(c)),v&&v(c)}catch{}}function F(D){wt[D?"unshift":"push"](()=>{w=D,t(4,w)})}function z(D){wt[D?"unshift":"push"](()=>{_=D,t(3,_)})}return n.$$set=D=>{"text"in D&&t(0,c=D.text),"readOnly"in D&&t(1,d=D.readOnly),"onParse"in D&&t(9,g=D.onParse),"onRepair"in D&&t(10,h=D.onRepair),"onChange"in D&&t(11,v=D.onChange),"onApply"in D&&t(12,m=D.onApply),"onCancel"in D&&t(13,p=D.onCancel),"onRenderMenu"in D&&t(14,y=D.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&1&&t(2,r=S(c)),n.$$.dirty&1&&t(17,i=E(c)),n.$$.dirty&4&&b("error",r),n.$$.dirty&8192&&t(18,o=[{space:!0},{icon:Fu,title:"Cancel repair",className:"jse-cancel",onClick:p}]),n.$$.dirty&278528&&t(7,s=y("repair",o)||o),n.$$.dirty&229376&&t(6,u=i?[a,l]:[a]),n.$$.dirty&2&&t(5,f=[{icon:ag,text:"Apply",title:"Apply fixed JSON",disabled:d,onClick:j}])},t(15,a={icon:KD,text:"Show me",title:"Scroll to the error location",onClick:P}),t(16,l={icon:rv,text:"Auto repair",title:"Automatically repair JSON",onClick:U}),[c,d,r,_,w,f,u,s,R,g,h,v,m,p,y,a,l,i,o,F,z]}class Vq extends rt{constructor(e){super(),nt(this,e,Uq,Fq,Nt,{text:0,readOnly:1,onParse:9,onRepair:10,onChange:11,onApply:12,onCancel:13,onRenderMenu:14})}}function qq(n){let e,t,r,i;function o(a){n[7](a)}let s={onParse:n[1],onRepair:n[2],onApply:n[4],onCancel:n[5],onRenderMenu:n[3]};return n[0]!==void 0&&(s.text=n[0]),t=new Vq({props:s}),wt.push(()=>Ir(t,"text",o)),{c(){e=ee("div"),ke(t.$$.fragment),T(e,"class","jse-modal jse-repair svelte-1ffm3pm")},m(a,l){fe(a,e,l),Ee(t,e,null),i=!0},p(a,[l]){const u={};l&2&&(u.onParse=a[1]),l&4&&(u.onRepair=a[2]),l&8&&(u.onRenderMenu=a[3]),!r&&l&1&&(r=!0,u.text=a[0],qr(()=>r=!1)),t.$set(u)},i(a){i||($(t.$$.fragment,a),i=!0)},o(a){te(t.$$.fragment,a),i=!1},d(a){a&&ue(e),Oe(t)}}}function Hq(n,e,t){let{text:r}=e,{onParse:i}=e,{onRepair:o}=e,{onApply:s}=e,{onRenderMenu:a}=e;const{close:l}=ur("simple-modal");function u(d){l(),s(d)}function f(){l()}function c(d){r=d,t(0,r)}return n.$$set=d=>{"text"in d&&t(0,r=d.text),"onParse"in d&&t(1,i=d.onParse),"onRepair"in d&&t(2,o=d.onRepair),"onApply"in d&&t(6,s=d.onApply),"onRenderMenu"in d&&t(3,a=d.onRenderMenu)},[r,i,o,a,u,f,s,c]}class zq extends rt{constructor(e){super(),nt(this,e,Hq,qq,Nt,{text:0,onParse:1,onRepair:2,onApply:6,onRenderMenu:3})}}function Sw(n,e,t){const r=n.slice();return r[11]=e[t],r}const Wq=n=>({}),Cw=n=>({});function Ew(n){let e,t;return e=new kt({props:{data:n[11].icon}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i&1&&(o.data=r[11].icon),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Ow(n){let e,t,r,i=n[11].text+"",o,s,a,l,u,f,c,d=n[11].icon&&Ew(n);function g(){return n[9](n[11])}return{c(){e=ee("li"),t=ee("button"),d&&d.c(),r=me(),o=qe(i),l=me(),T(t,"type","button"),T(t,"title",s=n[11].title),t.disabled=a=n[11].disabled,T(t,"class","svelte-kae4bx"),T(e,"class","svelte-kae4bx")},m(h,v){fe(h,e,v),B(e,t),d&&d.m(t,null),B(t,r),B(t,o),B(e,l),u=!0,f||(c=Te(t,"click",g),f=!0)},p(h,v){n=h,n[11].icon?d?(d.p(n,v),v&1&&$(d,1)):(d=Ew(n),d.c(),$(d,1),d.m(t,r)):d&&(Fe(),te(d,1,1,()=>{d=null}),Ue()),(!u||v&1)&&i!==(i=n[11].text+"")&&bt(o,i),(!u||v&1&&s!==(s=n[11].title))&&T(t,"title",s),(!u||v&1&&a!==(a=n[11].disabled))&&(t.disabled=a)},i(h){u||($(d),u=!0)},o(h){te(d),u=!1},d(h){h&&ue(e),d&&d.d(),f=!1,c()}}}function Kq(n){let e,t,r,i,o,s,a,l,u,f;const c=n[8].defaultItem,d=Zr(c,n,n[7],Cw);i=new kt({props:{data:Vi}});let g=n[0],h=[];for(let m=0;m<g.length;m+=1)h[m]=Ow(Sw(n,g,m));const v=m=>te(h[m],1,1,()=>{h[m]=null});return{c(){e=ee("div"),d&&d.c(),t=me(),r=ee("button"),ke(i.$$.fragment),o=me(),s=ee("div"),a=ee("ul");for(let m=0;m<h.length;m+=1)h[m].c();T(r,"type","button"),T(r,"class","jse-open-dropdown svelte-kae4bx"),T(r,"data-type","jse-open-dropdown"),r.disabled=n[4],ze(r,"jse-visible",n[3]),T(a,"class","svelte-kae4bx"),T(s,"class","jse-dropdown-items svelte-kae4bx"),oi(s,"width",n[2]),ze(s,"jse-visible",n[3]),T(e,"class","jse-dropdown-button svelte-kae4bx"),T(e,"title",n[1])},m(m,p){fe(m,e,p),d&&d.m(e,null),B(e,t),B(e,r),Ee(i,r,null),B(e,o),B(e,s),B(s,a);for(let y=0;y<h.length;y+=1)h[y].m(a,null);l=!0,u||(f=[Te(r,"click",n[5]),Te(e,"click",n[6])],u=!0)},p(m,[p]){if(d&&d.p&&(!l||p&128)&&$r(d,c,m,m[7],l?Xr(c,m[7],p,Wq):ei(m[7]),Cw),(!l||p&16)&&(r.disabled=m[4]),p&8&&ze(r,"jse-visible",m[3]),p&1){g=m[0];let y;for(y=0;y<g.length;y+=1){const b=Sw(m,g,y);h[y]?(h[y].p(b,p),$(h[y],1)):(h[y]=Ow(b),h[y].c(),$(h[y],1),h[y].m(a,null))}for(Fe(),y=g.length;y<h.length;y+=1)v(y);Ue()}(!l||p&4)&&oi(s,"width",m[2]),p&8&&ze(s,"jse-visible",m[3]),(!l||p&2)&&T(e,"title",m[1])},i(m){if(!l){$(d,m),$(i.$$.fragment,m);for(let p=0;p<g.length;p+=1)$(h[p]);l=!0}},o(m){te(d,m),te(i.$$.fragment,m),h=h.filter(Boolean);for(let p=0;p<h.length;p+=1)te(h[p]);l=!1},d(m){m&&ue(e),d&&d.d(m),Oe(i),xn(h,m),u=!1,on(f)}}}function Gq(n,e,t){let r,{$$slots:i={},$$scope:o}=e,{items:s=[]}=e,{title:a=void 0}=e,{width:l="120px"}=e,u=!1;function f(){const h=u;setTimeout(()=>t(3,u=!h))}function c(){t(3,u=!1)}function d(h){nl(h)==="Escape"&&(h.preventDefault(),t(3,u=!1))}Nr(()=>{document.addEventListener("click",c),document.addEventListener("keydown",d)}),ho(()=>{document.removeEventListener("click",c),document.removeEventListener("keydown",d)});const g=h=>h.onClick();return n.$$set=h=>{"items"in h&&t(0,s=h.items),"title"in h&&t(1,a=h.title),"width"in h&&t(2,l=h.width),"$$scope"in h&&t(7,o=h.$$scope)},n.$$.update=()=>{n.$$.dirty&1&&t(4,r=s.every(h=>h.disabled===!0))},[s,a,l,u,r,f,c,o,i,g]}class rm extends rt{constructor(e){super(),nt(this,e,Gq,Kq,Nt,{items:0,title:1,width:2})}}/*!
 * Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */var Yq={prefix:"far",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M232 120C232 106.7 242.7 96 256 96C269.3 96 280 106.7 280 120V243.2L365.3 300C376.3 307.4 379.3 322.3 371.1 333.3C364.6 344.3 349.7 347.3 338.7 339.1L242.7 275.1C236 271.5 232 264 232 255.1L232 120zM256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0zM48 256C48 370.9 141.1 464 256 464C370.9 464 464 370.9 464 256C464 141.1 370.9 48 256 48C141.1 48 48 141.1 48 256z"]},Jq={prefix:"far",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM192 0C90.02 .3203 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.8 289.2 .0039 192 0zM288.4 260.1c-15.66 17.85-35.04 46.3-49.05 75.89h-94.61c-14.01-29.59-33.39-58.04-49.04-75.88C75.24 236.8 64 206.1 64 175.1C64 113.3 112.1 48.25 191.1 48C262.6 48 320 105.4 320 175.1C320 206.1 308.8 236.8 288.4 260.1zM176 80C131.9 80 96 115.9 96 160c0 8.844 7.156 16 16 16S128 168.8 128 160c0-26.47 21.53-48 48-48c8.844 0 16-7.148 16-15.99S184.8 80 176 80z"]},Zh={prefix:"far",iconName:"square",icon:[448,512,[9723,9724,61590,9632],"f0c8","M384 32C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96C0 60.65 28.65 32 64 32H384zM384 80H64C55.16 80 48 87.16 48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80z"]},Qq={prefix:"far",iconName:"square-check",icon:[448,512,[9989,61510,9745,"check-square"],"f14a","M211.8 339.8C200.9 350.7 183.1 350.7 172.2 339.8L108.2 275.8C97.27 264.9 97.27 247.1 108.2 236.2C119.1 225.3 136.9 225.3 147.8 236.2L192 280.4L300.2 172.2C311.1 161.3 328.9 161.3 339.8 172.2C350.7 183.1 350.7 200.9 339.8 211.8L211.8 339.8zM0 96C0 60.65 28.65 32 64 32H384C419.3 32 448 60.65 448 96V416C448 451.3 419.3 480 384 480H64C28.65 480 0 451.3 0 416V96zM48 96V416C48 424.8 55.16 432 64 432H384C392.8 432 400 424.8 400 416V96C400 87.16 392.8 80 384 80H64C55.16 80 48 87.16 48 96z"]},Xh=Qq;function Zq(n){let e,t,r,i,o,s,a;return t=new kt({props:{data:nv}}),{c(){e=ee("button"),ke(t.$$.fragment),r=qe(" Edit value"),T(e,"type","button"),T(e,"slot","defaultItem"),T(e,"title","Edit the value (Double-click on the value)"),e.disabled=i=!n[2],T(e,"class","svelte-1jwirqu")},m(l,u){fe(l,e,u),Ee(t,e,null),B(e,r),o=!0,s||(a=Te(e,"click",n[18]),s=!0)},p(l,u){(!o||u[0]&4&&i!==(i=!l[2]))&&(e.disabled=i)},i(l){o||($(t.$$.fragment,l),o=!0)},o(l){te(t.$$.fragment,l),o=!1},d(l){l&&ue(e),Oe(t),s=!1,a()}}}function Xq(n){let e,t,r,i,o,s,a;return t=new kt({props:{data:lg}}),{c(){e=ee("button"),ke(t.$$.fragment),r=qe(" Cut"),T(e,"type","button"),T(e,"slot","defaultItem"),T(e,"title","Cut selected contents, formatted with indentation (Ctrl+X)"),e.disabled=i=!n[1],T(e,"class","svelte-1jwirqu")},m(l,u){fe(l,e,u),Ee(t,e,null),B(e,r),o=!0,s||(a=Te(e,"click",n[19]),s=!0)},p(l,u){(!o||u[0]&2&&i!==(i=!l[1]))&&(e.disabled=i)},i(l){o||($(t.$$.fragment,l),o=!0)},o(l){te(t.$$.fragment,l),o=!1},d(l){l&&ue(e),Oe(t),s=!1,a()}}}function $q(n){let e,t,r,i,o,s,a;return t=new kt({props:{data:yh}}),{c(){e=ee("button"),ke(t.$$.fragment),r=qe(" Copy"),T(e,"type","button"),T(e,"slot","defaultItem"),T(e,"title","Copy selected contents, formatted with indentation (Ctrl+C)"),e.disabled=i=!n[1],T(e,"class","svelte-1jwirqu")},m(l,u){fe(l,e,u),Ee(t,e,null),B(e,r),o=!0,s||(a=Te(e,"click",n[20]),s=!0)},p(l,u){(!o||u[0]&2&&i!==(i=!l[1]))&&(e.disabled=i)},i(l){o||($(t.$$.fragment,l),o=!0)},o(l){te(t.$$.fragment,l),o=!1},d(l){l&&ue(e),Oe(t),s=!1,a()}}}function kw(n){let e,t,r,i,o,s,a;return i=new kt({props:{data:Jq}}),{c(){e=ee("div"),t=ee("div"),r=ee("div"),ke(i.$$.fragment),o=me(),s=ee("div"),s.textContent="Tip: you can open this context menu via right-click or with Ctrl+Q",T(r,"class","svelte-1jwirqu"),T(s,"class","svelte-1jwirqu"),T(t,"class","jse-tip svelte-1jwirqu"),T(e,"class","jse-row svelte-1jwirqu")},m(l,u){fe(l,e,u),B(e,t),B(t,r),Ee(i,r,null),B(t,o),B(t,s),a=!0},p:Me,i(l){a||($(i.$$.fragment,l),a=!0)},o(l){te(i.$$.fragment,l),a=!1},d(l){l&&ue(e),Oe(i)}}}function eH(n){let e,t,r,i,o,s,a,l,u,f,c,d,g,h,v,m,p,y,b,_,w,S,E,P,R,j,U,F,z,D,N,L,X,Q,A,k,V,K,H,I,M,G,q,W,ae,le,Pe,Ve,Ae,ye,Ne,xe,he,ve,de,Ie,De,He,Xe,mt,be,Z,x,C,O,Y,ie,pe,ge,Qe,J,se,re,_e,Ce,We,it,ct,ft,vt,Dt,ot,Ct,yt,Ut,we,$e,Tt,Et,At,jt,Qt,kn,It,Wn,ri;i=new kt({props:{data:nv}}),l=new rm({props:{width:"11em",items:n[8],$$slots:{defaultItem:[Zq]},$$scope:{ctx:n}}}),g=new rm({props:{width:"10em",items:n[7],$$slots:{defaultItem:[Xq]},$$scope:{ctx:n}}}),v=new rm({props:{width:"12em",items:n[6],$$slots:{defaultItem:[$q]},$$scope:{ctx:n}}}),y=new kt({props:{data:aj}}),U=new kt({props:{data:Fu}}),L=new kt({props:{data:$D}}),V=new kt({props:{data:tj}}),G=new kt({props:{data:$0}}),Pe=new kt({props:{data:ev}}),Ut=new kt({props:{data:hj}}),At=new kt({props:{data:cj}});let $t=n[0]&&kw();return{c(){e=ee("div"),t=ee("div"),r=ee("button"),ke(i.$$.fragment),o=qe(" Edit key"),a=me(),ke(l.$$.fragment),u=me(),f=ee("div"),c=me(),d=ee("div"),ke(g.$$.fragment),h=me(),ke(v.$$.fragment),m=me(),p=ee("button"),ke(y.$$.fragment),b=qe(" Paste"),w=me(),S=ee("div"),E=me(),P=ee("div"),R=ee("div"),j=ee("button"),ke(U.$$.fragment),F=qe(" Remove"),D=me(),N=ee("button"),ke(L.$$.fragment),X=qe(" Duplicate"),A=me(),k=ee("button"),ke(V.$$.fragment),K=qe(" Extract"),I=me(),M=ee("button"),ke(G.$$.fragment),q=qe(" Sort"),ae=me(),le=ee("button"),ke(Pe.$$.fragment),Ve=qe(" Transform"),ye=me(),Ne=ee("div"),xe=ee("div"),he=qe(n[13]),ve=qe(":"),de=me(),Ie=ee("button"),De=ee("span"),He=ee("span"),He.textContent="+",Xe=qe(" Structure"),Z=me(),x=ee("button"),C=ee("span"),C.textContent="{}",O=qe(" Object"),pe=me(),ge=ee("button"),Qe=ee("span"),Qe.textContent="[]",J=qe(" Array"),_e=me(),Ce=ee("button"),We=ee("span"),We.innerHTML='<span class="jse-quote svelte-1jwirqu">&quot;</span>',it=qe(" Value"),vt=me(),Dt=ee("div"),ot=me(),Ct=ee("div"),yt=ee("button"),ke(Ut.$$.fragment),we=qe(" Insert before"),Tt=me(),Et=ee("button"),ke(At.$$.fragment),jt=qe(" Insert after"),kn=me(),$t&&$t.c(),T(r,"type","button"),T(r,"title","Edit the key (Double-click on the key)"),r.disabled=s=!n[14],T(r,"class","svelte-1jwirqu"),T(t,"class","jse-row svelte-1jwirqu"),T(f,"class","jse-separator svelte-1jwirqu"),T(p,"type","button"),T(p,"title","Paste clipboard contents (Ctrl+V)"),p.disabled=_=!n[3],T(p,"class","svelte-1jwirqu"),T(d,"class","jse-row svelte-1jwirqu"),T(S,"class","jse-separator svelte-1jwirqu"),T(j,"type","button"),T(j,"title","Remove selected contents (Delete)"),j.disabled=z=!n[1],T(j,"class","svelte-1jwirqu"),T(N,"type","button"),T(N,"title","Duplicate selected contents (Ctrl+D)"),N.disabled=Q=!n[16],T(N,"class","svelte-1jwirqu"),T(k,"type","button"),T(k,"title","Extract selected contents"),k.disabled=H=!n[15],T(k,"class","svelte-1jwirqu"),T(M,"type","button"),T(M,"title","Sort array or object contents"),M.disabled=W=!n[1],T(M,"class","svelte-1jwirqu"),T(le,"type","button"),T(le,"title","Transform array or object contents (filter, sort, project)"),le.disabled=Ae=!n[1],T(le,"class","svelte-1jwirqu"),T(R,"class","jse-column svelte-1jwirqu"),T(xe,"class","jse-label svelte-1jwirqu"),T(He,"class","jse-plus svelte-1jwirqu"),T(De,"class","jse-insert svelte-1jwirqu"),T(Ie,"type","button"),T(Ie,"title",mt=n[13]+" structure"),Ie.disabled=be=!n[12],T(Ie,"class","svelte-1jwirqu"),T(C,"class","jse-insert svelte-1jwirqu"),T(x,"type","button"),T(x,"title",Y=n[13]+" object"),x.disabled=ie=!n[11],T(x,"class","svelte-1jwirqu"),T(Qe,"class","jse-insert svelte-1jwirqu"),T(ge,"type","button"),T(ge,"title",se=n[13]+" array"),ge.disabled=re=!n[10],T(ge,"class","svelte-1jwirqu"),T(We,"class","jse-insert svelte-1jwirqu"),T(Ce,"type","button"),T(Ce,"title",ct=n[13]+" value"),Ce.disabled=ft=!n[9],T(Ce,"class","svelte-1jwirqu"),T(Ne,"class","jse-column svelte-1jwirqu"),T(P,"class","jse-row svelte-1jwirqu"),T(Dt,"class","jse-separator svelte-1jwirqu"),T(yt,"type","button"),T(yt,"title","Select area before current entry to insert or paste contents"),yt.disabled=$e=!n[1]||n[4],T(yt,"class","svelte-1jwirqu"),T(Et,"type","button"),T(Et,"title","Select area after current entry to insert or paste contents"),Et.disabled=Qt=!n[1]||n[4],T(Et,"class","svelte-1jwirqu"),T(Ct,"class","jse-row svelte-1jwirqu"),T(e,"class","jse-contextmenu svelte-1jwirqu")},m(et,_t){fe(et,e,_t),B(e,t),B(t,r),Ee(i,r,null),B(r,o),B(t,a),Ee(l,t,null),B(e,u),B(e,f),B(e,c),B(e,d),Ee(g,d,null),B(d,h),Ee(v,d,null),B(d,m),B(d,p),Ee(y,p,null),B(p,b),B(e,w),B(e,S),B(e,E),B(e,P),B(P,R),B(R,j),Ee(U,j,null),B(j,F),B(R,D),B(R,N),Ee(L,N,null),B(N,X),B(R,A),B(R,k),Ee(V,k,null),B(k,K),B(R,I),B(R,M),Ee(G,M,null),B(M,q),B(R,ae),B(R,le),Ee(Pe,le,null),B(le,Ve),B(P,ye),B(P,Ne),B(Ne,xe),B(xe,he),B(xe,ve),B(Ne,de),B(Ne,Ie),B(Ie,De),B(De,He),B(Ie,Xe),B(Ne,Z),B(Ne,x),B(x,C),B(x,O),B(Ne,pe),B(Ne,ge),B(ge,Qe),B(ge,J),B(Ne,_e),B(Ne,Ce),B(Ce,We),B(Ce,it),B(e,vt),B(e,Dt),B(e,ot),B(e,Ct),B(Ct,yt),Ee(Ut,yt,null),B(yt,we),B(Ct,Tt),B(Ct,Et),Ee(At,Et,null),B(Et,jt),B(e,kn),$t&&$t.m(e,null),n[58](e),It=!0,Wn||(ri=[Te(r,"click",n[17]),Te(p,"click",n[21]),Te(j,"click",n[22]),Te(N,"click",n[23]),Te(k,"click",n[24]),Te(M,"click",n[26]),Te(le,"click",n[27]),Te(Ie,"click",n[54]),Te(x,"click",n[55]),Te(ge,"click",n[56]),Te(Ce,"click",n[57]),Te(yt,"click",n[28]),Te(Et,"click",n[29]),Te(e,"keydown",n[30])],Wn=!0)},p(et,_t){(!It||_t[0]&16384&&s!==(s=!et[14]))&&(r.disabled=s);const Er={};_t[0]&256&&(Er.items=et[8]),_t[0]&4|_t[2]&1&&(Er.$$scope={dirty:_t,ctx:et}),l.$set(Er);const Dr={};_t[0]&128&&(Dr.items=et[7]),_t[0]&2|_t[2]&1&&(Dr.$$scope={dirty:_t,ctx:et}),g.$set(Dr);const Ai={};_t[0]&64&&(Ai.items=et[6]),_t[0]&2|_t[2]&1&&(Ai.$$scope={dirty:_t,ctx:et}),v.$set(Ai),(!It||_t[0]&8&&_!==(_=!et[3]))&&(p.disabled=_),(!It||_t[0]&2&&z!==(z=!et[1]))&&(j.disabled=z),(!It||_t[0]&65536&&Q!==(Q=!et[16]))&&(N.disabled=Q),(!It||_t[0]&32768&&H!==(H=!et[15]))&&(k.disabled=H),(!It||_t[0]&2&&W!==(W=!et[1]))&&(M.disabled=W),(!It||_t[0]&2&&Ae!==(Ae=!et[1]))&&(le.disabled=Ae),(!It||_t[0]&8192)&&bt(he,et[13]),(!It||_t[0]&8192&&mt!==(mt=et[13]+" structure"))&&T(Ie,"title",mt),(!It||_t[0]&4096&&be!==(be=!et[12]))&&(Ie.disabled=be),(!It||_t[0]&8192&&Y!==(Y=et[13]+" object"))&&T(x,"title",Y),(!It||_t[0]&2048&&ie!==(ie=!et[11]))&&(x.disabled=ie),(!It||_t[0]&8192&&se!==(se=et[13]+" array"))&&T(ge,"title",se),(!It||_t[0]&1024&&re!==(re=!et[10]))&&(ge.disabled=re),(!It||_t[0]&8192&&ct!==(ct=et[13]+" value"))&&T(Ce,"title",ct),(!It||_t[0]&512&&ft!==(ft=!et[9]))&&(Ce.disabled=ft),(!It||_t[0]&18&&$e!==($e=!et[1]||et[4]))&&(yt.disabled=$e),(!It||_t[0]&18&&Qt!==(Qt=!et[1]||et[4]))&&(Et.disabled=Qt),et[0]?$t?($t.p(et,_t),_t[0]&1&&$($t,1)):($t=kw(),$t.c(),$($t,1),$t.m(e,null)):$t&&(Fe(),te($t,1,1,()=>{$t=null}),Ue())},i(et){It||($(i.$$.fragment,et),$(l.$$.fragment,et),$(g.$$.fragment,et),$(v.$$.fragment,et),$(y.$$.fragment,et),$(U.$$.fragment,et),$(L.$$.fragment,et),$(V.$$.fragment,et),$(G.$$.fragment,et),$(Pe.$$.fragment,et),$(Ut.$$.fragment,et),$(At.$$.fragment,et),$($t),It=!0)},o(et){te(i.$$.fragment,et),te(l.$$.fragment,et),te(g.$$.fragment,et),te(v.$$.fragment,et),te(y.$$.fragment,et),te(U.$$.fragment,et),te(L.$$.fragment,et),te(V.$$.fragment,et),te(G.$$.fragment,et),te(Pe.$$.fragment,et),te(Ut.$$.fragment,et),te(At.$$.fragment,et),te($t),It=!1},d(et){et&&ue(e),Oe(i),Oe(l),Oe(g),Oe(v),Oe(y),Oe(U),Oe(L),Oe(V),Oe(G),Oe(Pe),Oe(Ut),Oe(At),$t&&$t.d(),n[58](null),Wn=!1,on(ri)}}}function tH(n,e,t){let r,i,o,s,a,l,u,f,c,d,g,h,v,m,p,y,b,_,w,S,{json:E}=e,{documentState:P}=e,{showTip:R}=e,{onCloseContextMenu:j}=e,{onEditKey:U}=e,{onEditValue:F}=e,{onToggleEnforceString:z}=e,{onCut:D}=e,{onCopy:N}=e,{onPaste:L}=e,{onRemove:X}=e,{onDuplicate:Q}=e,{onExtract:A}=e,{onInsertBefore:k}=e,{onInsert:V}=e,{onConvert:K}=e,{onInsertAfter:H}=e,{onSort:I}=e,{onTransform:M}=e,G;Nr(()=>{setTimeout(()=>{const O=[...G.querySelectorAll("button")].find(Y=>!Y.disabled);O&&O.focus()})});function q(){j(),U()}function W(){j(),F()}function ae(){j(),z()}function le(){j(),D(!0)}function Pe(){j(),D(!1)}function Ve(){j(),N(!0)}function Ae(){j(),N(!1)}function ye(){j(),L()}function Ne(){j(),X()}function xe(){j(),Q()}function he(){j(),A()}function ve(O){j(),l?K(O):V(O)}function de(){j(),I()}function Ie(){j(),M()}function De(){j(),k()}function He(){j(),H()}function Xe(O){const Y=nl(O).replace(/^Command\+/,"Ctrl+");if(Y==="Up"||Y==="Down"||Y==="Left"||Y==="Right"){O.preventDefault();const ie=Array.from(G.querySelectorAll("button:not([disabled])")),pe=DD({allElements:ie,currentElement:O.target,direction:Y,hasPrio:ge=>ge.getAttribute("data-type")!=="jse-open-dropdown"});pe&&pe.focus()}}const mt=()=>ve("structure"),be=()=>ve("object"),Z=()=>ve("array"),x=()=>ve("value");function C(O){wt[O?"unshift":"push"](()=>{G=O,t(5,G)})}return n.$$set=O=>{"json"in O&&t(31,E=O.json),"documentState"in O&&t(32,P=O.documentState),"showTip"in O&&t(0,R=O.showTip),"onCloseContextMenu"in O&&t(33,j=O.onCloseContextMenu),"onEditKey"in O&&t(34,U=O.onEditKey),"onEditValue"in O&&t(35,F=O.onEditValue),"onToggleEnforceString"in O&&t(36,z=O.onToggleEnforceString),"onCut"in O&&t(37,D=O.onCut),"onCopy"in O&&t(38,N=O.onCopy),"onPaste"in O&&t(39,L=O.onPaste),"onRemove"in O&&t(40,X=O.onRemove),"onDuplicate"in O&&t(41,Q=O.onDuplicate),"onExtract"in O&&t(42,A=O.onExtract),"onInsertBefore"in O&&t(43,k=O.onInsertBefore),"onInsert"in O&&t(44,V=O.onInsert),"onConvert"in O&&t(45,K=O.onConvert),"onInsertAfter"in O&&t(46,H=O.onInsertAfter),"onSort"in O&&t(47,I=O.onSort),"onTransform"in O&&t(48,M=O.onTransform)},n.$$.update=()=>{n.$$.dirty[1]&2&&t(50,r=P.selection),n.$$.dirty[1]&1&&t(53,i=E!==void 0),n.$$.dirty[1]&524288&&t(3,o=r!=null),n.$$.dirty[0]&8|n.$$.dirty[1]&524288&&t(4,s=o&&gn(r.focusPath)),n.$$.dirty[0]&8|n.$$.dirty[1]&524289&&t(51,a=o?tt(E,r.focusPath):void 0),n.$$.dirty[1]&4718592&&t(1,l=i&&(Wt(r)||An(r)||zt(r))),n.$$.dirty[0]&18|n.$$.dirty[1]&4194304&&t(16,u=i&&l&&!s),n.$$.dirty[0]&16|n.$$.dirty[1]&4718592&&t(15,f=i&&r!=null&&(Wt(r)||zt(r))&&!s),n.$$.dirty[0]&16|n.$$.dirty[1]&4718593&&t(14,c=i&&r!=null&&$g(r)&&!s&&!Array.isArray(tt(E,Vt(r.focusPath)))),n.$$.dirty[1]&5767168&&t(2,d=i&&r!=null&&$g(r)&&!qn(a)),n.$$.dirty[0]&2&&t(52,g=l),n.$$.dirty[1]&2097152&&t(13,h=g?"Convert to":"Insert"),n.$$.dirty[0]&8|n.$$.dirty[1]&2097152&&t(12,v=g?!1:o),n.$$.dirty[0]&8|n.$$.dirty[1]&3670016&&t(11,m=g?Xf(r)&&!ir(a):o),n.$$.dirty[0]&8|n.$$.dirty[1]&3670016&&t(10,p=g?Xf(r)&&!Array.isArray(a):o),n.$$.dirty[0]&8|n.$$.dirty[1]&3670016&&t(9,y=g?Xf(r)&&qn(a):o),n.$$.dirty[1]&1572866&&t(49,b=r!=null?Wu(a,P.enforceStringMap,Ge(r.focusPath)):!1),n.$$.dirty[0]&4|n.$$.dirty[1]&262144&&t(8,_=[{icon:nv,text:"Edit value",title:"Edit the value (Double-click on the value)",onClick:W,disabled:!d},{icon:b?Xh:Zh,text:"Enforce string",title:"Enforce keeping the value as string when it contains a numeric value",onClick:ae,disabled:!d}]),n.$$.dirty[0]&2&&t(7,w=[{icon:lg,text:"Cut formatted",title:"Cut selected contents, formatted with indentation (Ctrl+X)",onClick:le,disabled:!l},{icon:lg,text:"Cut compacted",title:"Cut selected contents, without indentation (Ctrl+Shift+X)",onClick:Pe,disabled:!l}]),n.$$.dirty[0]&2&&t(6,S=[{icon:yh,text:"Copy formatted",title:"Copy selected contents, formatted with indentation (Ctrl+C)",onClick:Ve,disabled:!l},{icon:yh,text:"Copy compacted",title:"Copy selected contents, without indentation (Ctrl+Shift+C)",onClick:Ae,disabled:!l}])},[R,l,d,o,s,G,S,w,_,y,p,m,v,h,c,f,u,q,W,le,Ve,ye,Ne,xe,he,ve,de,Ie,De,He,Xe,E,P,j,U,F,z,D,N,L,X,Q,A,k,V,K,H,I,M,b,r,a,g,i,mt,be,Z,x,C]}class nH extends rt{constructor(e){super(),nt(this,e,tH,eH,Nt,{json:31,documentState:32,showTip:0,onCloseContextMenu:33,onEditKey:34,onEditValue:35,onToggleEnforceString:36,onCut:37,onCopy:38,onPaste:39,onRemove:40,onDuplicate:41,onExtract:42,onInsertBefore:43,onInsert:44,onConvert:45,onInsertAfter:46,onSort:47,onTransform:48},null,[-1,-1,-1])}}var xP={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var r=[],i=0;i<arguments.length;i++){var o=arguments[i];if(!!o){var s=typeof o;if(s==="string"||s==="number")r.push(o);else if(Array.isArray(o)){if(o.length){var a=t.apply(null,o);a&&r.push(a)}}else if(s==="object")if(o.toString===Object.prototype.toString)for(var l in o)e.call(o,l)&&o[l]&&r.push(l);else r.push(o.toString())}}return r.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(xP);const za=xP.exports;function Tw(n,e,t){const r=n.slice();return r[13]=e[t],r}function Pw(n){let e,t,r=n[13].start+"",i,o,s=n[13].end+"",a,l,u,f;function c(){return n[12](n[13])}return{c(){e=ee("button"),t=qe("show "),i=qe(r),o=qe("-"),a=qe(s),l=me(),T(e,"type","button"),T(e,"class","jse-expand-items svelte-a94vy2")},m(d,g){fe(d,e,g),B(e,t),B(e,i),B(e,o),B(e,a),B(e,l),u||(f=Te(e,"click",c),u=!0)},p(d,g){n=d,g&16&&r!==(r=n[13].start+"")&&bt(i,r),g&16&&s!==(s=n[13].end+"")&&bt(a,s)},d(d){d&&ue(e),u=!1,f()}}}function rH(n){let e,t,r,i,o,s,a,l,u,f,c,d=n[4],g=[];for(let h=0;h<d.length;h+=1)g[h]=Pw(Tw(n,d,h));return{c(){e=ee("div"),t=ee("div"),r=ee("div"),i=qe("Items "),o=qe(n[3]),s=qe("-"),a=qe(n[2]),l=me();for(let h=0;h<g.length;h+=1)g[h].c();T(r,"class","jse-text svelte-a94vy2"),T(e,"class","jse-collapsed-items svelte-a94vy2"),T(e,"style",u=Iw(n[0].length+2)),ze(e,"jse-selected",n[5])},m(h,v){fe(h,e,v),B(e,t),B(t,r),B(r,i),B(r,o),B(r,s),B(r,a),B(t,l);for(let m=0;m<g.length;m+=1)g[m].m(t,null);f||(c=Te(e,"mousemove",iH),f=!0)},p(h,[v]){if(v&8&&bt(o,h[3]),v&4&&bt(a,h[2]),v&19){d=h[4];let m;for(m=0;m<d.length;m+=1){const p=Tw(h,d,m);g[m]?g[m].p(p,v):(g[m]=Pw(p),g[m].c(),g[m].m(t,null))}for(;m<g.length;m+=1)g[m].d(1);g.length=d.length}v&1&&u!==(u=Iw(h[0].length+2))&&T(e,"style",u),v&32&&ze(e,"jse-selected",h[5])},i:Me,o:Me,d(h){h&&ue(e),xn(g,h),f=!1,c()}}}function Iw(n){return`margin-left: calc(${n} * var(--jse-indent-size))`}function iH(n){n.stopPropagation()}function oH(n,e,t){let r,i,o,s,a,{visibleSections:l}=e,{sectionIndex:u}=e,{total:f}=e,{path:c}=e,{pointer:d}=e,{selection:g}=e,{onExpandSection:h}=e;const v=m=>h(c,m);return n.$$set=m=>{"visibleSections"in m&&t(6,l=m.visibleSections),"sectionIndex"in m&&t(7,u=m.sectionIndex),"total"in m&&t(8,f=m.total),"path"in m&&t(0,c=m.path),"pointer"in m&&t(9,d=m.pointer),"selection"in m&&t(10,g=m.selection),"onExpandSection"in m&&t(1,h=m.onExpandSection)},n.$$.update=()=>{n.$$.dirty&192&&t(11,r=l[u]),n.$$.dirty&2048&&t(3,i=r.end),n.$$.dirty&448&&t(2,o=l[u+1]?l[u+1].start:f),n.$$.dirty&1544&&t(5,s=Wt(g)?g.pointersMap[zm(d,i)]===!0:!1),n.$$.dirty&12&&t(4,a=QV(i,o))},[c,h,o,i,a,s,l,u,f,d,g,r,v]}class sH extends rt{constructor(e){super(),nt(this,e,oH,rH,Nt,{visibleSections:6,sectionIndex:7,total:8,path:0,pointer:9,selection:10,onExpandSection:1})}}function aH(n){let e,t,r,i,o;return t=new kt({props:{data:Vi}}),{c(){e=ee("button"),ke(t.$$.fragment),T(e,"type","button"),T(e,"class","jse-context-menu-button svelte-1lm9yxm"),T(e,"title",mO),ze(e,"jse-selected",n[0])},m(s,a){fe(s,e,a),Ee(t,e,null),r=!0,i||(o=Te(e,"click",n[1]),i=!0)},p(s,[a]){a&1&&ze(e,"jse-selected",s[0])},i(s){r||($(t.$$.fragment,s),r=!0)},o(s){te(t.$$.fragment,s),r=!1},d(s){s&&ue(e),Oe(t),i=!1,o()}}}function lH(n,e,t){let{selected:r}=e,{onContextMenu:i}=e;function o(s){let a=s.target;for(;a&&a.nodeName!=="BUTTON";)a=a.parentNode;a&&i({anchor:a,left:0,top:0,width:xl,height:Rl,offsetTop:2,offsetLeft:0,showTip:!0})}return n.$$set=s=>{"selected"in s&&t(0,r=s.selected),"onContextMenu"in s&&t(2,i=s.onContextMenu)},[r,o,i]}class Zs extends rt{constructor(e){super(),nt(this,e,lH,aH,Nt,{selected:0,onContextMenu:2})}}function Aw(n,e,t){const r=n.slice();return r[3]=e[t],r}function uH(n){let e,t=js(n[3].text)+"",r;return{c(){e=ee("span"),r=qe(t),T(e,"class","jse-highlight svelte-mtessu"),ze(e,"jse-active",n[3].active)},m(i,o){fe(i,e,o),B(e,r)},p(i,o){o&1&&t!==(t=js(i[3].text)+"")&&bt(r,t),o&1&&ze(e,"jse-active",i[3].active)},d(i){i&&ue(e)}}}function cH(n){let e=n[3].text+"",t;return{c(){t=qe(e)},m(r,i){fe(r,t,i)},p(r,i){i&1&&e!==(e=r[3].text+"")&&bt(t,e)},d(r){r&&ue(t)}}}function Rw(n){let e;function t(o,s){return o[3].type==="normal"?cH:uH}let r=t(n),i=r(n);return{c(){i.c(),e=xt()},m(o,s){i.m(o,s),fe(o,e,s)},p(o,s){r===(r=t(o))&&i?i.p(o,s):(i.d(1),i=r(o),i&&(i.c(),i.m(e.parentNode,e)))},d(o){i.d(o),o&&ue(e)}}}function fH(n){let e,t=n[0],r=[];for(let i=0;i<t.length;i+=1)r[i]=Rw(Aw(n,t,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=xt()},m(i,o){for(let s=0;s<r.length;s+=1)r[s].m(i,o);fe(i,e,o)},p(i,[o]){if(o&1){t=i[0];let s;for(s=0;s<t.length;s+=1){const a=Aw(i,t,s);r[s]?r[s].p(a,o):(r[s]=Rw(a),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=t.length}},i:Me,o:Me,d(i){xn(r,i),i&&ue(e)}}}function hH(n,e,t){let r,{text:i}=e,{searchResultItems:o}=e;return n.$$set=s=>{"text"in s&&t(1,i=s.text),"searchResultItems"in s&&t(2,o=s.searchResultItems)},n.$$.update=()=>{n.$$.dirty&6&&t(0,r=Iq(String(i),o))},[r,i,o]}class NP extends rt{constructor(e){super(),nt(this,e,hH,fH,Xt,{text:1,searchResultItems:2})}}function dH(n){let e,t,r,i;return{c(){e=ee("div"),T(e,"class",t=Yn(za("jse-editable-div",n[2],{"jse-short-text":n[0]}))+" svelte-1rwbo30"),T(e,"contenteditable","true"),T(e,"spellcheck","false")},m(o,s){fe(o,e,s),n[13](e),r||(i=[Te(e,"input",n[3]),Te(e,"keydown",n[4]),Te(e,"paste",n[5]),Te(e,"blur",n[6])],r=!0)},p(o,[s]){s&5&&t!==(t=Yn(za("jse-editable-div",o[2],{"jse-short-text":o[0]}))+" svelte-1rwbo30")&&T(e,"class",t)},i:Me,o:Me,d(o){o&&ue(e),n[13](null),r=!1,on(i)}}}function pH(n,e,t){const r=Sr("jsoneditor:EditableDiv");let{value:i}=e,{shortText:o=!1}=e,{onChange:s}=e,{onCancel:a}=e,{onFind:l}=e,{onPaste:u=Kt}=e,{onValueClass:f=()=>""}=e,c,d=f(i),g=!1;Nr(()=>{r("onMount",{value:i}),v(i),setTimeout(()=>mk(c))}),ho(()=>{const w=h();r("onDestroy",{closed:g,value:i,newValue:w}),!g&&w!==i&&s(w,Os.NO)});function h(){return ID(c.innerText)}function v(w){t(1,c.innerText=js(w),c)}function m(){const w=h();w===""&&v(""),t(2,d=f(w))}function p(w){w.stopPropagation();const S=nl(w).replace(/^Command\+/,"Ctrl+");if(S==="Escape"&&(g=!0,a()),S==="Enter"||S==="Tab"){g=!0;const E=h();s(E,Os.NEXT_INSIDE)}S==="Ctrl+F"&&(w.preventDefault(),l(!1)),S==="Ctrl+H"&&(w.preventDefault(),l(!0))}function y(w){if(!u)return;const S=w.clipboardData.getData("text/plain");u(S)}function b(){const w=document.hasFocus(),S=h();r("handleBlur",{hasFocus:w,closed:g,value:i,newValue:S}),document.hasFocus()&&!g&&(g=!0,S!==i?s(S,Os.SELF):a())}function _(w){wt[w?"unshift":"push"](()=>{c=w,t(1,c)})}return n.$$set=w=>{"value"in w&&t(7,i=w.value),"shortText"in w&&t(0,o=w.shortText),"onChange"in w&&t(8,s=w.onChange),"onCancel"in w&&t(9,a=w.onCancel),"onFind"in w&&t(10,l=w.onFind),"onPaste"in w&&t(11,u=w.onPaste),"onValueClass"in w&&t(12,f=w.onValueClass)},[o,c,d,m,p,y,b,i,s,a,l,u,f,_]}class MP extends rt{constructor(e){super(),nt(this,e,pH,dH,Nt,{value:7,shortText:0,onChange:8,onCancel:9,onFind:10,onPaste:11,onValueClass:12})}}function mH(n){let e,t,r,i,o,s,a;const l=[yH,vH],u=[];function f(c,d){return c[1]?0:1}return t=f(n),r=u[t]=l[t](n),{c(){e=ee("div"),r.c(),T(e,"data-type","selectable-key"),T(e,"class",i=Yn(n[6](n[0]))+" svelte-1cm0o9n")},m(c,d){fe(c,e,d),u[t].m(e,null),o=!0,s||(a=Te(e,"dblclick",n[5]),s=!0)},p(c,d){let g=t;t=f(c),t===g?u[t].p(c,d):(Fe(),te(u[g],1,1,()=>{u[g]=null}),Ue(),r=u[t],r?r.p(c,d):(r=u[t]=l[t](c),r.c()),$(r,1),r.m(e,null)),(!o||d&1&&i!==(i=Yn(c[6](c[0]))+" svelte-1cm0o9n"))&&T(e,"class",i)},i(c){o||($(r),o=!0)},o(c){te(r),o=!1},d(c){c&&ue(e),u[t].d(),s=!1,a()}}}function gH(n){let e,t;return e=new MP({props:{value:n[2].normalization.escapeValue(n[0]),shortText:!0,onChange:n[7],onCancel:n[8],onFind:n[2].onFind}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i&5&&(o.value=r[2].normalization.escapeValue(r[0])),i&4&&(o.onFind=r[2].onFind),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function vH(n){let e=js(n[2].normalization.escapeValue(n[0]))+"",t;return{c(){t=qe(e)},m(r,i){fe(r,t,i)},p(r,i){i&5&&e!==(e=js(r[2].normalization.escapeValue(r[0]))+"")&&bt(t,e)},i:Me,o:Me,d(r){r&&ue(t)}}}function yH(n){let e,t;return e=new NP({props:{text:n[2].normalization.escapeValue(n[0]),searchResultItems:n[1]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i&5&&(o.text=r[2].normalization.escapeValue(r[0])),i&2&&(o.searchResultItems=r[1]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function xw(n){let e,t;return e=new Zs({props:{selected:!0,onContextMenu:n[2].onContextMenu}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i&4&&(o.onContextMenu=r[2].onContextMenu),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function _H(n){let e,t,r,i,o;const s=[gH,mH],a=[];function l(f,c){return f[4]?0:1}e=l(n),t=a[e]=s[e](n);let u=!n[2].readOnly&&n[3]&&!n[4]&&xw(n);return{c(){t.c(),r=me(),u&&u.c(),i=xt()},m(f,c){a[e].m(f,c),fe(f,r,c),u&&u.m(f,c),fe(f,i,c),o=!0},p(f,[c]){let d=e;e=l(f),e===d?a[e].p(f,c):(Fe(),te(a[d],1,1,()=>{a[d]=null}),Ue(),t=a[e],t?t.p(f,c):(t=a[e]=s[e](f),t.c()),$(t,1),t.m(r.parentNode,r)),!f[2].readOnly&&f[3]&&!f[4]?u?(u.p(f,c),c&28&&$(u,1)):(u=xw(f),u.c(),$(u,1),u.m(i.parentNode,i)):u&&(Fe(),te(u,1,1,()=>{u=null}),Ue())},i(f){o||($(t),$(u),o=!0)},o(f){te(t),te(u),o=!1},d(f){a[e].d(f),f&&ue(r),u&&u.d(f),f&&ue(i)}}}function bH(n,e,t){let r,i,{path:o}=e,{pointer:s}=e,{key:a}=e,{selection:l}=e,{searchResultItems:u}=e,{onUpdateKey:f}=e,{context:c}=e;function d(m){!i&&!c.readOnly&&(m.preventDefault(),c.onSelect(Jr(o,!0)))}function g(m){return za("jse-key",{"jse-empty":m===""})}function h(m,p){const y=f(a,c.normalization.unescapeValue(m)),b=Vt(o).concat(y);c.onSelect(p===Os.NEXT_INSIDE?hn(b,!1):Jr(b,!1)),p!==Os.SELF&&c.focus()}function v(){c.onSelect(Jr(o,!1)),c.focus()}return n.$$set=m=>{"path"in m&&t(9,o=m.path),"pointer"in m&&t(10,s=m.pointer),"key"in m&&t(0,a=m.key),"selection"in m&&t(11,l=m.selection),"searchResultItems"in m&&t(1,u=m.searchResultItems),"onUpdateKey"in m&&t(12,f=m.onUpdateKey),"context"in m&&t(2,c=m.context)},n.$$.update=()=>{n.$$.dirty&3072&&t(3,r=l?l.pointersMap[s]===!0&&An(l):void 0),n.$$.dirty&2056&&t(4,i=r&&$l(l))},[a,u,c,r,i,d,g,h,v,o,s,l,f]}class wH extends rt{constructor(e){super(),nt(this,e,bH,_H,Nt,{path:9,pointer:10,key:0,selection:11,searchResultItems:1,onUpdateKey:12,context:2})}}function Nw(n,e,t){const r=n.slice();return r[9]=e[t],r}function Mw(n){let e,t,r;const i=[n[9].props];var o=n[9].component;function s(a){let l={};for(let u=0;u<i.length;u+=1)l=is(l,i[u]);return{props:l}}return o&&(e=new o(s())),{c(){e&&ke(e.$$.fragment),t=xt()},m(a,l){e&&Ee(e,a,l),fe(a,t,l),r=!0},p(a,l){const u=l&1?Ws(i,[pd(a[9].props)]):{};if(o!==(o=a[9].component)){if(e){Fe();const f=e;te(f.$$.fragment,1,0,()=>{Oe(f,1)}),Ue()}o?(e=new o(s()),ke(e.$$.fragment),$(e.$$.fragment,1),Ee(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(a){r||(e&&$(e.$$.fragment,a),r=!0)},o(a){e&&te(e.$$.fragment,a),r=!1},d(a){a&&ue(t),e&&Oe(e,a)}}}function SH(n){let e,t,r=n[0],i=[];for(let s=0;s<r.length;s+=1)i[s]=Mw(Nw(n,r,s));const o=s=>te(i[s],1,1,()=>{i[s]=null});return{c(){for(let s=0;s<i.length;s+=1)i[s].c();e=xt()},m(s,a){for(let l=0;l<i.length;l+=1)i[l].m(s,a);fe(s,e,a),t=!0},p(s,[a]){if(a&1){r=s[0];let l;for(l=0;l<r.length;l+=1){const u=Nw(s,r,l);i[l]?(i[l].p(u,a),$(i[l],1)):(i[l]=Mw(u),i[l].c(),$(i[l],1),i[l].m(e.parentNode,e))}for(Fe(),l=r.length;l<i.length;l+=1)o(l);Ue()}},i(s){if(!t){for(let a=0;a<r.length;a+=1)$(i[a]);t=!0}},o(s){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)te(i[a]);t=!1},d(s){xn(i,s),s&&ue(e)}}}function CH(n,e,t){let r,i,{path:o}=e,{value:s}=e,{context:a}=e,{isSelected:l}=e,{enforceString:u}=e,{selection:f}=e,{searchResultItems:c}=e;return n.$$set=d=>{"path"in d&&t(1,o=d.path),"value"in d&&t(2,s=d.value),"context"in d&&t(3,a=d.context),"isSelected"in d&&t(4,l=d.isSelected),"enforceString"in d&&t(5,u=d.enforceString),"selection"in d&&t(6,f=d.selection),"searchResultItems"in d&&t(7,c=d.searchResultItems)},n.$$.update=()=>{n.$$.dirty&72&&t(8,r=!a.readOnly&&zt(f)&&$l(f)),n.$$.dirty&510&&t(0,i=a.onRenderValue({path:o,value:s,readOnly:a.readOnly,enforceString:u,isSelected:l,isEditing:r,normalization:a.normalization,selection:f,searchResultItems:c,onPatch:a.onPatch,onPasteJson:a.onPasteJson,onSelect:a.onSelect,onFind:a.onFind,focus:a.focus}))},[i,o,s,a,l,u,f,c,r]}class EH extends rt{constructor(e){super(),nt(this,e,CH,SH,Nt,{path:1,value:2,context:3,isSelected:4,enforceString:5,selection:6,searchResultItems:7})}}const Kn={selecting:!1,selectionAnchor:null,selectionAnchorType:null,selectionFocus:null,dragging:!1};function im({json:n,documentState:e,deltaY:t,items:r}){const i=e.selection,o=t<0?OH({json:n,selection:i,deltaY:t,items:r}):kH({json:n,selection:i,deltaY:t,items:r});if(!o||o.offset===0)return{operations:void 0,updatedSelection:void 0,offset:0};const s=wq(n,e.selection,o),a=Vt(qa(i)),l=tt(n,a);if(Array.isArray(l)){const u=TH({items:r,json:n,selection:i,offset:o.offset});return{operations:s,updatedSelection:u,offset:o.offset}}else return{operations:s,updatedSelection:void 0,offset:o.offset}}function OH({items:n,selection:e,deltaY:t}){const r=qa(e),i=n.findIndex(f=>Yt(f.path,r)),o=()=>{var f;return(f=n[s-1])===null||f===void 0?void 0:f.height};let s=i,a=0;for(;o()!==void 0&&Math.abs(t)>a+o()/2;)a+=o(),s-=1;const l=n[s].path,u=s-i;return s!==i&&n[s]!==void 0?{beforePath:l,offset:u}:void 0}function kH({json:n,items:e,selection:t,deltaY:r}){var i;const o=Xd(t),s=e.findIndex(m=>Yt(m.path,o));let a=0,l=s;const u=()=>{var m;return(m=e[l+1])===null||m===void 0?void 0:m.height};for(;u()!==void 0&&Math.abs(r)>a+u()/2;)a+=u(),l+=1;const f=Vt(o),c=tt(n,f),g=Array.isArray(c)?l:l+1,h=(i=e[g])===null||i===void 0?void 0:i.path,v=l-s;return h?{beforePath:h,offset:v}:{append:!0,offset:v}}function TH({items:n,json:e,selection:t,offset:r}){var i,o;const s=qa(t),a=Xd(t),l=n.findIndex(d=>Yt(d.path,s)),u=n.findIndex(d=>Yt(d.path,a)),f=(i=n[l+r])===null||i===void 0?void 0:i.path,c=(o=n[u+r])===null||o===void 0?void 0:o.path;return Rn(e,f,c)}function PH(n,e){if(!n)return;const t={};for(const r of Object.keys(n))e(r,n[r])&&(t[r]=n[r]);return Object.keys(t).length>0?t:void 0}function Mi(n,e){return PH(n,t=>Pa(t,e))}function IH(n){let e,t;return{c(){e=ee("div"),t=qe(n[0]),T(e,"class","jse-tooltip svelte-r4omvg")},m(r,i){fe(r,e,i),B(e,t)},p(r,[i]){i&1&&bt(t,r[0])},i:Me,o:Me,d(r){r&&ue(e)}}}function AH(n,e,t){let{text:r}=e;return n.$$set=i=>{"text"in i&&t(0,r=i.text)},[r]}class RH extends rt{constructor(e){super(),nt(this,e,AH,IH,Xt,{text:0})}}function DP(n,{text:e,openAbsolutePopup:t,closeAbsolutePopup:r}){let i;function o(){i=t(RH,{text:e},{position:"top",width:10*e.length,offsetTop:3,anchor:n,closeOnOuterClick:!0})}function s(){r(i)}return n.addEventListener("mouseenter",o),n.addEventListener("mouseleave",s),{destroy(){n.removeEventListener("mouseenter",o),n.removeEventListener("mouseleave",s)}}}function xH(n){let e,t,r,i,o,s;return t=new kt({props:{data:rl}}),{c(){e=ee("button"),ke(t.$$.fragment),T(e,"type","button"),T(e,"class","jse-validation-error svelte-1q62mys")},m(a,l){fe(a,e,l),Ee(t,e,null),i=!0,o||(s=[Te(e,"click",function(){li(n[0])&&n[0].apply(this,arguments)}),xu(r=DP.call(null,e,{text:n[1],...n[2]}))],o=!0)},p(a,[l]){n=a,r&&li(r.update)&&l&2&&r.update.call(null,{text:n[1],...n[2]})},i(a){i||($(t.$$.fragment,a),i=!0)},o(a){te(t.$$.fragment,a),i=!1},d(a){a&&ue(e),Oe(t),o=!1,on(s)}}}function NH(n,e,t){let r;const i=ur("absolute-popup");let{validationError:o}=e,{onExpand:s}=e;return n.$$set=a=>{"validationError"in a&&t(3,o=a.validationError),"onExpand"in a&&t(0,s=a.onExpand)},n.$$.update=()=>{n.$$.dirty&8&&t(1,r=o.isChildError?"Contains invalid data":o.message)},[s,r,i,o]}class Vv extends rt{constructor(e){super(),nt(this,e,NH,xH,Xt,{validationError:3,onExpand:0})}}const MH=n=>({}),Dw=n=>({});function jw(n,e,t){const r=n.slice();return r[54]=e[t],r}const DH=n=>({}),Lw=n=>({});function Bw(n,e,t){const r=n.slice();return r[48]=e[t],r[50]=t,r}function Fw(n,e,t){const r=n.slice();return r[51]=e[t],r}const jH=n=>({}),Uw=n=>({});function LH(n){let e,t,r,i,o,s,a=!n[8].readOnly&&n[16]&&n[7]&&(zt(n[7])||Wt(n[7]))&&!n[7].edit&&Yt(n[7].focusPath,n[1]),l,u,f;const c=n[35].identifier,d=Zr(c,n,n[36],Dw);let g=!n[17]&&Vw();o=new EH({props:{path:n[1],value:n[0],enforceString:n[13],isSelected:n[16],selection:n[16]?n[7]:void 0,searchResultItems:ww(n[6],n[9]),context:n[8]}});let h=a&&qw(n),v=n[15]&&Hw(n),m=!n[17]&&zw(n);return{c(){e=ee("div"),t=ee("div"),d&&d.c(),r=me(),g&&g.c(),i=me(),ke(o.$$.fragment),s=me(),h&&h.c(),l=me(),v&&v.c(),u=me(),m&&m.c(),T(t,"class","jse-contents svelte-1dkd71f"),T(e,"class","jse-contents-outer svelte-1dkd71f"),T(e,"style",n[18])},m(p,y){fe(p,e,y),B(e,t),d&&d.m(t,null),B(t,r),g&&g.m(t,null),B(t,i),Ee(o,t,null),B(t,s),h&&h.m(t,null),B(e,l),v&&v.m(e,null),B(e,u),m&&m.m(e,null),f=!0},p(p,y){d&&d.p&&(!f||y[1]&32)&&$r(d,c,p,p[36],f?Xr(c,p[36],y,MH):ei(p[36]),Dw),p[17]?g&&(g.d(1),g=null):g||(g=Vw(),g.c(),g.m(t,i));const b={};y[0]&2&&(b.path=p[1]),y[0]&1&&(b.value=p[0]),y[0]&8192&&(b.enforceString=p[13]),y[0]&65536&&(b.isSelected=p[16]),y[0]&65664&&(b.selection=p[16]?p[7]:void 0),y[0]&576&&(b.searchResultItems=ww(p[6],p[9])),y[0]&256&&(b.context=p[8]),o.$set(b),y[0]&65922&&(a=!p[8].readOnly&&p[16]&&p[7]&&(zt(p[7])||Wt(p[7]))&&!p[7].edit&&Yt(p[7].focusPath,p[1])),a?h?(h.p(p,y),y[0]&65922&&$(h,1)):(h=qw(p),h.c(),$(h,1),h.m(t,null)):h&&(Fe(),te(h,1,1,()=>{h=null}),Ue()),p[15]?v?(v.p(p,y),y[0]&32768&&$(v,1)):(v=Hw(p),v.c(),$(v,1),v.m(e,u)):v&&(Fe(),te(v,1,1,()=>{v=null}),Ue()),p[17]?m&&(m.d(1),m=null):m?m.p(p,y):(m=zw(p),m.c(),m.m(e,null)),(!f||y[0]&262144)&&T(e,"style",p[18])},i(p){f||($(d,p),$(o.$$.fragment,p),$(h),$(v),f=!0)},o(p){te(d,p),te(o.$$.fragment,p),te(h),te(v),f=!1},d(p){p&&ue(e),d&&d.d(p),g&&g.d(),Oe(o),h&&h.d(),v&&v.d(),m&&m.d()}}}function BH(n){let e,t,r,i,o,s,a,l,u,f,c,d=!n[8].readOnly&&n[16]&&n[7]&&(zt(n[7])||Wt(n[7]))&&!n[7].edit&&Yt(n[7].focusPath,n[1]),g,h,v,m,p,y,b;const _=[VH,UH],w=[];function S(A,k){return A[12]?0:1}i=S(n),o=w[i]=_[i](n);const E=n[35].identifier,P=Zr(E,n,n[36],Lw);let R=!n[17]&&Ww();function j(A,k){return A[12]?HH:qH}let U=j(n),F=U(n),z=d&&Kw(n),D=n[15]&&(!n[12]||!n[15].isChildError)&&Gw(n);function N(A,k){if(A[12])return WH;if(!A[17])return zH}let L=N(n),X=L&&L(n),Q=n[12]&&Yw(n);return{c(){e=ee("div"),t=ee("div"),r=ee("button"),o.c(),s=me(),P&&P.c(),a=me(),R&&R.c(),l=me(),u=ee("div"),f=ee("div"),F.c(),c=me(),z&&z.c(),g=me(),D&&D.c(),h=me(),X&&X.c(),v=me(),Q&&Q.c(),m=xt(),T(r,"type","button"),T(r,"class","jse-expand svelte-1dkd71f"),T(r,"title","Expand or collapse this object (Ctrl+Click to expand/collapse recursively)"),T(f,"class","jse-meta-inner svelte-1dkd71f"),T(u,"class","jse-meta svelte-1dkd71f"),T(u,"data-type","selectable-value"),T(t,"class","jse-header svelte-1dkd71f"),T(e,"class","jse-header-outer svelte-1dkd71f"),T(e,"style",n[18])},m(A,k){fe(A,e,k),B(e,t),B(t,r),w[i].m(r,null),B(t,s),P&&P.m(t,null),B(t,a),R&&R.m(t,null),B(t,l),B(t,u),B(u,f),F.m(f,null),B(t,c),z&&z.m(t,null),B(e,g),D&&D.m(e,null),B(e,h),X&&X.m(e,null),fe(A,v,k),Q&&Q.m(A,k),fe(A,m,k),p=!0,y||(b=Te(r,"click",n[22]),y=!0)},p(A,k){let V=i;i=S(A),i===V?w[i].p(A,k):(Fe(),te(w[V],1,1,()=>{w[V]=null}),Ue(),o=w[i],o?o.p(A,k):(o=w[i]=_[i](A),o.c()),$(o,1),o.m(r,null)),P&&P.p&&(!p||k[1]&32)&&$r(P,E,A,A[36],p?Xr(E,A[36],k,DH):ei(A[36]),Lw),A[17]?R&&(R.d(1),R=null):R||(R=Ww(),R.c(),R.m(t,l)),U===(U=j(A))&&F?F.p(A,k):(F.d(1),F=U(A),F&&(F.c(),F.m(f,null))),k[0]&65922&&(d=!A[8].readOnly&&A[16]&&A[7]&&(zt(A[7])||Wt(A[7]))&&!A[7].edit&&Yt(A[7].focusPath,A[1])),d?z?(z.p(A,k),k[0]&65922&&$(z,1)):(z=Kw(A),z.c(),$(z,1),z.m(t,null)):z&&(Fe(),te(z,1,1,()=>{z=null}),Ue()),A[15]&&(!A[12]||!A[15].isChildError)?D?(D.p(A,k),k[0]&36864&&$(D,1)):(D=Gw(A),D.c(),$(D,1),D.m(e,h)):D&&(Fe(),te(D,1,1,()=>{D=null}),Ue()),L===(L=N(A))&&X?X.p(A,k):(X&&X.d(1),X=L&&L(A),X&&(X.c(),X.m(e,null))),(!p||k[0]&262144)&&T(e,"style",A[18]),A[12]?Q?(Q.p(A,k),k[0]&4096&&$(Q,1)):(Q=Yw(A),Q.c(),$(Q,1),Q.m(m.parentNode,m)):Q&&(Fe(),te(Q,1,1,()=>{Q=null}),Ue())},i(A){p||($(o),$(P,A),$(z),$(D),$(Q),p=!0)},o(A){te(o),te(P,A),te(z),te(D),te(Q),p=!1},d(A){A&&ue(e),w[i].d(),P&&P.d(A),R&&R.d(),F.d(),z&&z.d(),D&&D.d(),X&&X.d(),A&&ue(v),Q&&Q.d(A),A&&ue(m),y=!1,b()}}}function FH(n){let e,t,r,i,o,s,a,l,u,f,c,d=!n[8].readOnly&&n[16]&&n[7]&&(zt(n[7])||Wt(n[7]))&&!n[7].edit&&Yt(n[7].focusPath,n[1]),g,h,v,m,p,y,b;const _=[YH,GH],w=[];function S(A,k){return A[12]?0:1}i=S(n),o=w[i]=_[i](n);const E=n[35].identifier,P=Zr(E,n,n[36],Uw);let R=!n[17]&&Xw();function j(A,k){return A[12]?QH:JH}let U=j(n),F=U(n),z=d&&$w(n),D=n[15]&&(!n[12]||!n[15].isChildError)&&eS(n);function N(A,k){return A[12]?XH:ZH}let L=N(n),X=L(n),Q=n[12]&&tS(n);return{c(){e=ee("div"),t=ee("div"),r=ee("button"),o.c(),s=me(),P&&P.c(),a=me(),R&&R.c(),l=me(),u=ee("div"),f=ee("div"),F.c(),c=me(),z&&z.c(),g=me(),D&&D.c(),h=me(),X.c(),v=me(),Q&&Q.c(),m=xt(),T(r,"type","button"),T(r,"class","jse-expand svelte-1dkd71f"),T(r,"title","Expand or collapse this array (Ctrl+Click to expand/collapse recursively)"),T(f,"class","jse-meta-inner svelte-1dkd71f"),T(f,"data-type","selectable-value"),T(u,"class","jse-meta svelte-1dkd71f"),T(t,"class","jse-header svelte-1dkd71f"),T(e,"class","jse-header-outer svelte-1dkd71f"),T(e,"style",n[18])},m(A,k){fe(A,e,k),B(e,t),B(t,r),w[i].m(r,null),B(t,s),P&&P.m(t,null),B(t,a),R&&R.m(t,null),B(t,l),B(t,u),B(u,f),F.m(f,null),B(t,c),z&&z.m(t,null),B(e,g),D&&D.m(e,null),B(e,h),X.m(e,null),fe(A,v,k),Q&&Q.m(A,k),fe(A,m,k),p=!0,y||(b=Te(r,"click",n[22]),y=!0)},p(A,k){let V=i;i=S(A),i===V?w[i].p(A,k):(Fe(),te(w[V],1,1,()=>{w[V]=null}),Ue(),o=w[i],o?o.p(A,k):(o=w[i]=_[i](A),o.c()),$(o,1),o.m(r,null)),P&&P.p&&(!p||k[1]&32)&&$r(P,E,A,A[36],p?Xr(E,A[36],k,jH):ei(A[36]),Uw),A[17]?R&&(R.d(1),R=null):R||(R=Xw(),R.c(),R.m(t,l)),U===(U=j(A))&&F?F.p(A,k):(F.d(1),F=U(A),F&&(F.c(),F.m(f,null))),k[0]&65922&&(d=!A[8].readOnly&&A[16]&&A[7]&&(zt(A[7])||Wt(A[7]))&&!A[7].edit&&Yt(A[7].focusPath,A[1])),d?z?(z.p(A,k),k[0]&65922&&$(z,1)):(z=$w(A),z.c(),$(z,1),z.m(t,null)):z&&(Fe(),te(z,1,1,()=>{z=null}),Ue()),A[15]&&(!A[12]||!A[15].isChildError)?D?(D.p(A,k),k[0]&36864&&$(D,1)):(D=eS(A),D.c(),$(D,1),D.m(e,h)):D&&(Fe(),te(D,1,1,()=>{D=null}),Ue()),L===(L=N(A))&&X?X.p(A,k):(X.d(1),X=L(A),X&&(X.c(),X.m(e,null))),(!p||k[0]&262144)&&T(e,"style",A[18]),A[12]?Q?(Q.p(A,k),k[0]&4096&&$(Q,1)):(Q=tS(A),Q.c(),$(Q,1),Q.m(m.parentNode,m)):Q&&(Fe(),te(Q,1,1,()=>{Q=null}),Ue())},i(A){p||($(o),$(P,A),$(z),$(D),$(Q),p=!0)},o(A){te(o),te(P,A),te(z),te(D),te(Q),p=!1},d(A){A&&ue(e),w[i].d(),P&&P.d(A),R&&R.d(),F.d(),z&&z.d(),D&&D.d(),X.d(),A&&ue(v),Q&&Q.d(A),A&&ue(m),y=!1,b()}}}function Vw(n){let e;return{c(){e=ee("div"),e.textContent=":",T(e,"class","jse-separator svelte-1dkd71f")},m(t,r){fe(t,e,r)},d(t){t&&ue(e)}}}function qw(n){let e,t,r;return t=new Zs({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=ee("div"),ke(t.$$.fragment),T(e,"class","jse-context-menu-button-anchor svelte-1dkd71f")},m(i,o){fe(i,e,o),Ee(t,e,null),r=!0},p(i,o){const s={};o[0]&256&&(s.onContextMenu=i[8].onContextMenu),t.$set(s)},i(i){r||($(t.$$.fragment,i),r=!0)},o(i){te(t.$$.fragment,i),r=!1},d(i){i&&ue(e),Oe(t)}}}function Hw(n){let e,t;return e=new Vv({props:{validationError:n[15],onExpand:n[23]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i[0]&32768&&(o.validationError=r[15]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function zw(n){let e,t,r;return{c(){e=ee("div"),T(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),T(e,"data-type","insert-selection-area-after")},m(i,o){fe(i,e,o),t||(r=Te(e,"click",n[31]),t=!0)},p:Me,d(i){i&&ue(e),t=!1,r()}}}function UH(n){let e,t;return e=new kt({props:{data:jo}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p:Me,i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function VH(n){let e,t;return e=new kt({props:{data:Vi}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p:Me,i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Ww(n){let e;return{c(){e=ee("div"),e.textContent=":",T(e,"class","jse-separator svelte-1dkd71f")},m(t,r){fe(t,e,r)},d(t){t&&ue(e)}}}function qH(n){let e,t,r,i=Object.keys(n[0]).length+"",o,s,a=Object.keys(n[0]).length===1?"prop":"props",l,u,f,c,d;return{c(){e=ee("div"),e.textContent="{",t=me(),r=ee("button"),o=qe(i),s=me(),l=qe(a),u=me(),f=ee("div"),f.textContent="}",T(e,"class","jse-bracket svelte-1dkd71f"),T(r,"type","button"),T(r,"class","jse-tag svelte-1dkd71f"),T(f,"class","jse-bracket svelte-1dkd71f")},m(g,h){fe(g,e,h),fe(g,t,h),fe(g,r,h),B(r,o),B(r,s),B(r,l),fe(g,u,h),fe(g,f,h),c||(d=Te(r,"click",n[23]),c=!0)},p(g,h){h[0]&1&&i!==(i=Object.keys(g[0]).length+"")&&bt(o,i),h[0]&1&&a!==(a=Object.keys(g[0]).length===1?"prop":"props")&&bt(l,a)},d(g){g&&ue(e),g&&ue(t),g&&ue(r),g&&ue(u),g&&ue(f),c=!1,d()}}}function HH(n){let e;return{c(){e=ee("div"),e.textContent="{",T(e,"class","jse-bracket jse-expanded svelte-1dkd71f")},m(t,r){fe(t,e,r)},p:Me,d(t){t&&ue(e)}}}function Kw(n){let e,t,r;return t=new Zs({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=ee("div"),ke(t.$$.fragment),T(e,"class","jse-context-menu-button-anchor svelte-1dkd71f")},m(i,o){fe(i,e,o),Ee(t,e,null),r=!0},p(i,o){const s={};o[0]&256&&(s.onContextMenu=i[8].onContextMenu),t.$set(s)},i(i){r||($(t.$$.fragment,i),r=!0)},o(i){te(t.$$.fragment,i),r=!1},d(i){i&&ue(e),Oe(t)}}}function Gw(n){let e,t;return e=new Vv({props:{validationError:n[15],onExpand:n[23]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i[0]&32768&&(o.validationError=r[15]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function zH(n){let e,t,r;return{c(){e=ee("div"),T(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),T(e,"data-type","insert-selection-area-after")},m(i,o){fe(i,e,o),t||(r=Te(e,"click",n[31]),t=!0)},p:Me,d(i){i&&ue(e),t=!1,r()}}}function WH(n){let e,t,r;return{c(){e=ee("div"),T(e,"class","jse-insert-selection-area jse-inside svelte-1dkd71f"),T(e,"data-type","insert-selection-area-inside")},m(i,o){fe(i,e,o),t||(r=Te(e,"click",n[30]),t=!0)},p:Me,d(i){i&&ue(e),t=!1,r()}}}function Yw(n){let e,t=!n[8].readOnly&&(n[10]===po||n[16]&&Ln(n[7])),r,i,o,s,a,l,u=t&&Jw(n),f=n[20](n[1],n[0],n[2],n[3],n[4],n[5],n[6],n[7],n[11]),c=[];for(let h=0;h<f.length;h+=1)c[h]=Qw(jw(n,f,h));const d=h=>te(c[h],1,1,()=>{c[h]=null});let g=!n[17]&&Zw(n);return{c(){e=ee("div"),u&&u.c(),r=me();for(let h=0;h<c.length;h+=1)c[h].c();i=me(),o=ee("div"),s=ee("div"),s.innerHTML='<div class="jse-bracket svelte-1dkd71f">}</div>',a=me(),g&&g.c(),T(e,"class","jse-props svelte-1dkd71f"),T(s,"data-type","selectable-value"),T(s,"class","jse-footer svelte-1dkd71f"),T(o,"class","jse-footer-outer svelte-1dkd71f"),T(o,"style",n[18])},m(h,v){fe(h,e,v),u&&u.m(e,null),B(e,r);for(let m=0;m<c.length;m+=1)c[m].m(e,null);fe(h,i,v),fe(h,o,v),B(o,s),B(o,a),g&&g.m(o,null),l=!0},p(h,v){if(v[0]&66944&&(t=!h[8].readOnly&&(h[10]===po||h[16]&&Ln(h[7]))),t?u?(u.p(h,v),v[0]&66944&&$(u,1)):(u=Jw(h),u.c(),$(u,1),u.m(e,r)):u&&(Fe(),te(u,1,1,()=>{u=null}),Ue()),v[0]&152046079){f=h[20](h[1],h[0],h[2],h[3],h[4],h[5],h[6],h[7],h[11]);let m;for(m=0;m<f.length;m+=1){const p=jw(h,f,m);c[m]?(c[m].p(p,v),$(c[m],1)):(c[m]=Qw(p),c[m].c(),$(c[m],1),c[m].m(e,null))}for(Fe(),m=f.length;m<c.length;m+=1)d(m);Ue()}h[17]?g&&(g.d(1),g=null):g?g.p(h,v):(g=Zw(h),g.c(),g.m(o,null)),(!l||v[0]&262144)&&T(o,"style",h[18])},i(h){if(!l){$(u);for(let v=0;v<f.length;v+=1)$(c[v]);l=!0}},o(h){te(u),c=c.filter(Boolean);for(let v=0;v<c.length;v+=1)te(c[v]);l=!1},d(h){h&&ue(e),u&&u.d(),xn(c,h),h&&ue(i),h&&ue(o),g&&g.d()}}}function Jw(n){let e,t,r,i;return t=new Zs({props:{selected:n[16]&&Ln(n[7]),onContextMenu:n[32]}}),{c(){e=ee("div"),ke(t.$$.fragment),T(e,"class","jse-insert-area jse-inside svelte-1dkd71f"),T(e,"data-type","insert-selection-area-inside"),T(e,"style",r=Cu(n[1].length+1)),T(e,"title",I0),ze(e,"jse-hovered",n[10]===po),ze(e,"jse-selected",n[16]&&Ln(n[7]))},m(o,s){fe(o,e,s),Ee(t,e,null),i=!0},p(o,s){const a={};s[0]&65664&&(a.selected=o[16]&&Ln(o[7])),t.$set(a),(!i||s[0]&2&&r!==(r=Cu(o[1].length+1)))&&T(e,"style",r),s[0]&1024&&ze(e,"jse-hovered",o[10]===po),s[0]&65664&&ze(e,"jse-selected",o[16]&&Ln(o[7]))},i(o){i||($(t.$$.fragment,o),i=!0)},o(o){te(t.$$.fragment,o),i=!1},d(o){o&&ue(e),Oe(t)}}}function KH(n){let e,t,r,i;return t=new wH({props:{path:n[54].path,pointer:n[54].pointer,key:n[54].key,selection:n[54].selection,searchResultItems:n[54].keySearchResultItemsMap,context:n[8],onUpdateKey:n[24]}}),{c(){e=ee("div"),ke(t.$$.fragment),r=me(),T(e,"slot","identifier"),T(e,"class","jse-identifier svelte-1dkd71f")},m(o,s){fe(o,e,s),Ee(t,e,null),B(e,r),i=!0},p(o,s){const a={};s[0]&2303&&(a.path=o[54].path),s[0]&2303&&(a.pointer=o[54].pointer),s[0]&2303&&(a.key=o[54].key),s[0]&2303&&(a.selection=o[54].selection),s[0]&2303&&(a.searchResultItems=o[54].keySearchResultItemsMap),s[0]&256&&(a.context=o[8]),t.$set(a)},i(o){i||($(t.$$.fragment,o),i=!0)},o(o){te(t.$$.fragment,o),i=!1},d(o){o&&ue(e),Oe(t)}}}function Qw(n){let e,t;return e=new qv({props:{value:n[54].value,path:n[54].path,expandedMap:n[54].expandedMap,enforceStringMap:n[54].enforceStringMap,visibleSectionsMap:n[54].visibleSectionsMap,validationErrorsMap:n[54].validationErrorsMap,searchResultItemsMap:n[54].valueSearchResultItemsMap,selection:n[54].selection,context:n[8],onDragSelectionStart:n[27],$$slots:{identifier:[KH]},$$scope:{ctx:n}}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i[0]&2303&&(o.value=r[54].value),i[0]&2303&&(o.path=r[54].path),i[0]&2303&&(o.expandedMap=r[54].expandedMap),i[0]&2303&&(o.enforceStringMap=r[54].enforceStringMap),i[0]&2303&&(o.visibleSectionsMap=r[54].visibleSectionsMap),i[0]&2303&&(o.validationErrorsMap=r[54].validationErrorsMap),i[0]&2303&&(o.searchResultItemsMap=r[54].valueSearchResultItemsMap),i[0]&2303&&(o.selection=r[54].selection),i[0]&256&&(o.context=r[8]),i[0]&2559|i[1]&32&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Zw(n){let e,t,r;return{c(){e=ee("div"),T(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),T(e,"data-type","insert-selection-area-after")},m(i,o){fe(i,e,o),t||(r=Te(e,"click",n[31]),t=!0)},p:Me,d(i){i&&ue(e),t=!1,r()}}}function GH(n){let e,t;return e=new kt({props:{data:jo}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p:Me,i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function YH(n){let e,t;return e=new kt({props:{data:Vi}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p:Me,i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Xw(n){let e;return{c(){e=ee("div"),e.textContent=":",T(e,"class","jse-separator svelte-1dkd71f")},m(t,r){fe(t,e,r)},d(t){t&&ue(e)}}}function JH(n){let e,t,r,i=n[0].length+"",o,s,a=n[0].length===1?"item":"items",l,u,f,c,d;return{c(){e=ee("div"),e.textContent="[",t=me(),r=ee("button"),o=qe(i),s=me(),l=qe(a),u=me(),f=ee("div"),f.textContent="]",T(e,"class","jse-bracket svelte-1dkd71f"),T(r,"type","button"),T(r,"class","jse-tag svelte-1dkd71f"),T(f,"class","jse-bracket svelte-1dkd71f")},m(g,h){fe(g,e,h),fe(g,t,h),fe(g,r,h),B(r,o),B(r,s),B(r,l),fe(g,u,h),fe(g,f,h),c||(d=Te(r,"click",n[23]),c=!0)},p(g,h){h[0]&1&&i!==(i=g[0].length+"")&&bt(o,i),h[0]&1&&a!==(a=g[0].length===1?"item":"items")&&bt(l,a)},d(g){g&&ue(e),g&&ue(t),g&&ue(r),g&&ue(u),g&&ue(f),c=!1,d()}}}function QH(n){let e,t,r,i=n[0].length+"",o,s,a=n[0].length===1?"item":"items",l;return{c(){e=ee("div"),e.textContent="[",t=me(),r=ee("span"),o=qe(i),s=me(),l=qe(a),T(e,"class","jse-bracket svelte-1dkd71f"),T(r,"class","jse-tag jse-expanded svelte-1dkd71f")},m(u,f){fe(u,e,f),fe(u,t,f),fe(u,r,f),B(r,o),B(r,s),B(r,l)},p(u,f){f[0]&1&&i!==(i=u[0].length+"")&&bt(o,i),f[0]&1&&a!==(a=u[0].length===1?"item":"items")&&bt(l,a)},d(u){u&&ue(e),u&&ue(t),u&&ue(r)}}}function $w(n){let e,t,r;return t=new Zs({props:{selected:!0,onContextMenu:n[8].onContextMenu}}),{c(){e=ee("div"),ke(t.$$.fragment),T(e,"class","jse-context-menu-button-anchor svelte-1dkd71f")},m(i,o){fe(i,e,o),Ee(t,e,null),r=!0},p(i,o){const s={};o[0]&256&&(s.onContextMenu=i[8].onContextMenu),t.$set(s)},i(i){r||($(t.$$.fragment,i),r=!0)},o(i){te(t.$$.fragment,i),r=!1},d(i){i&&ue(e),Oe(t)}}}function eS(n){let e,t;return e=new Vv({props:{validationError:n[15],onExpand:n[23]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i[0]&32768&&(o.validationError=r[15]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function ZH(n){let e,t,r;return{c(){e=ee("div"),T(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),T(e,"data-type","insert-selection-area-after")},m(i,o){fe(i,e,o),t||(r=Te(e,"click",n[31]),t=!0)},p:Me,d(i){i&&ue(e),t=!1,r()}}}function XH(n){let e,t,r;return{c(){e=ee("div"),T(e,"class","jse-insert-selection-area jse-inside svelte-1dkd71f"),T(e,"data-type","insert-selection-area-inside")},m(i,o){fe(i,e,o),t||(r=Te(e,"click",n[30]),t=!0)},p:Me,d(i){i&&ue(e),t=!1,r()}}}function tS(n){let e,t=!n[8].readOnly&&(n[10]===po||n[16]&&Ln(n[7])),r,i=[],o=new Map,s,a,l,u,f,c=t&&nS(n),d=n[14]||Rs;const g=v=>v[50];for(let v=0;v<d.length;v+=1){let m=Bw(n,d,v),p=g(m);o.set(p,i[v]=oS(p,m))}let h=!n[17]&&sS(n);return{c(){e=ee("div"),c&&c.c(),r=me();for(let v=0;v<i.length;v+=1)i[v].c();s=me(),a=ee("div"),l=ee("div"),l.innerHTML='<span class="jse-bracket svelte-1dkd71f">]</span>',u=me(),h&&h.c(),T(e,"class","jse-items svelte-1dkd71f"),T(l,"data-type","selectable-value"),T(l,"class","jse-footer svelte-1dkd71f"),T(a,"class","jse-footer-outer svelte-1dkd71f"),T(a,"style",n[18])},m(v,m){fe(v,e,m),c&&c.m(e,null),B(e,r);for(let p=0;p<i.length;p+=1)i[p].m(e,null);fe(v,s,m),fe(v,a,m),B(a,l),B(a,u),h&&h.m(a,null),f=!0},p(v,m){m[0]&66944&&(t=!v[8].readOnly&&(v[10]===po||v[16]&&Ln(v[7]))),t?c?(c.p(v,m),m[0]&66944&&$(c,1)):(c=nS(v),c.c(),$(c,1),c.m(e,r)):c&&(Fe(),te(c,1,1,()=>{c=null}),Ue()),m[0]&136334335&&(d=v[14]||Rs,Fe(),i=Nu(i,m,g,1,v,d,o,e,dd,oS,null,Bw),Ue()),v[17]?h&&(h.d(1),h=null):h?h.p(v,m):(h=sS(v),h.c(),h.m(a,null)),(!f||m[0]&262144)&&T(a,"style",v[18])},i(v){if(!f){$(c);for(let m=0;m<d.length;m+=1)$(i[m]);f=!0}},o(v){te(c);for(let m=0;m<i.length;m+=1)te(i[m]);f=!1},d(v){v&&ue(e),c&&c.d();for(let m=0;m<i.length;m+=1)i[m].d();v&&ue(s),v&&ue(a),h&&h.d()}}}function nS(n){let e,t,r,i;return t=new Zs({props:{selected:n[16]&&Ln(n[7]),onContextMenu:n[32]}}),{c(){e=ee("div"),ke(t.$$.fragment),T(e,"class","jse-insert-area jse-inside svelte-1dkd71f"),T(e,"data-type","insert-selection-area-inside"),T(e,"style",r=Cu(n[1].length+1)),T(e,"title",I0),ze(e,"jse-hovered",n[10]===po),ze(e,"jse-selected",n[16]&&Ln(n[7]))},m(o,s){fe(o,e,s),Ee(t,e,null),i=!0},p(o,s){const a={};s[0]&65664&&(a.selected=o[16]&&Ln(o[7])),t.$set(a),(!i||s[0]&2&&r!==(r=Cu(o[1].length+1)))&&T(e,"style",r),s[0]&1024&&ze(e,"jse-hovered",o[10]===po),s[0]&65664&&ze(e,"jse-selected",o[16]&&Ln(o[7]))},i(o){i||($(t.$$.fragment,o),i=!0)},o(o){te(t.$$.fragment,o),i=!1},d(o){o&&ue(e),Oe(t)}}}function $H(n){let e,t,r=n[51].index+"",i;return{c(){e=ee("div"),t=ee("div"),i=qe(r),T(t,"class","jse-index svelte-1dkd71f"),T(e,"slot","identifier"),T(e,"class","jse-identifier svelte-1dkd71f")},m(o,s){fe(o,e,s),B(e,t),B(t,i)},p(o,s){s[0]&18687&&r!==(r=o[51].index+"")&&bt(i,r)},d(o){o&&ue(e)}}}function rS(n,e){let t,r,i;return r=new qv({props:{value:e[51].value,path:e[51].path,expandedMap:e[51].expandedMap,enforceStringMap:e[51].enforceStringMap,visibleSectionsMap:e[51].visibleSectionsMap,validationErrorsMap:e[51].validationErrorsMap,searchResultItemsMap:e[51].searchResultItemsMap,selection:e[51].selection,context:e[8],onDragSelectionStart:e[27],$$slots:{identifier:[$H]},$$scope:{ctx:e}}}),{key:n,first:null,c(){t=xt(),ke(r.$$.fragment),this.first=t},m(o,s){fe(o,t,s),Ee(r,o,s),i=!0},p(o,s){e=o;const a={};s[0]&18687&&(a.value=e[51].value),s[0]&18687&&(a.path=e[51].path),s[0]&18687&&(a.expandedMap=e[51].expandedMap),s[0]&18687&&(a.enforceStringMap=e[51].enforceStringMap),s[0]&18687&&(a.visibleSectionsMap=e[51].visibleSectionsMap),s[0]&18687&&(a.validationErrorsMap=e[51].validationErrorsMap),s[0]&18687&&(a.searchResultItemsMap=e[51].searchResultItemsMap),s[0]&18687&&(a.selection=e[51].selection),s[0]&256&&(a.context=e[8]),s[0]&18687|s[1]&32&&(a.$$scope={dirty:s,ctx:e}),r.$set(a)},i(o){i||($(r.$$.fragment,o),i=!0)},o(o){te(r.$$.fragment,o),i=!1},d(o){o&&ue(t),Oe(r,o)}}}function iS(n){let e,t;return e=new sH({props:{visibleSections:n[14]||Rs,sectionIndex:n[50],total:n[0].length,path:n[1],pointer:n[9],onExpandSection:n[8].onExpandSection,selection:n[7]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i[0]&16384&&(o.visibleSections=r[14]||Rs),i[0]&16384&&(o.sectionIndex=r[50]),i[0]&1&&(o.total=r[0].length),i[0]&2&&(o.path=r[1]),i[0]&512&&(o.pointer=r[9]),i[0]&256&&(o.onExpandSection=r[8].onExpandSection),i[0]&128&&(o.selection=r[7]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function oS(n,e){let t,r=[],i=new Map,o,s,a,l=e[21](e[1],e[0],e[48],e[2],e[3],e[4],e[5],e[6],e[7],e[11]);const u=c=>c[51].index;for(let c=0;c<l.length;c+=1){let d=Fw(e,l,c),g=u(d);i.set(g,r[c]=rS(g,d))}let f=e[48].end<e[0].length&&iS(e);return{key:n,first:null,c(){t=xt();for(let c=0;c<r.length;c+=1)r[c].c();o=me(),f&&f.c(),s=xt(),this.first=t},m(c,d){fe(c,t,d);for(let g=0;g<r.length;g+=1)r[g].m(c,d);fe(c,o,d),f&&f.m(c,d),fe(c,s,d),a=!0},p(c,d){e=c,d[0]&136333823&&(l=e[21](e[1],e[0],e[48],e[2],e[3],e[4],e[5],e[6],e[7],e[11]),Fe(),r=Nu(r,d,u,1,e,l,i,o.parentNode,dd,rS,o,Fw),Ue()),e[48].end<e[0].length?f?(f.p(e,d),d[0]&16385&&$(f,1)):(f=iS(e),f.c(),$(f,1),f.m(s.parentNode,s)):f&&(Fe(),te(f,1,1,()=>{f=null}),Ue())},i(c){if(!a){for(let d=0;d<l.length;d+=1)$(r[d]);$(f),a=!0}},o(c){for(let d=0;d<r.length;d+=1)te(r[d]);te(f),a=!1},d(c){c&&ue(t);for(let d=0;d<r.length;d+=1)r[d].d(c);c&&ue(o),f&&f.d(c),c&&ue(s)}}}function sS(n){let e,t,r;return{c(){e=ee("div"),T(e,"class","jse-insert-selection-area jse-after svelte-1dkd71f"),T(e,"data-type","insert-selection-area-after")},m(i,o){fe(i,e,o),t||(r=Te(e,"click",n[31]),t=!0)},p:Me,d(i){i&&ue(e),t=!1,r()}}}function aS(n){let e,t,r;return t=new Zs({props:{selected:n[16]&&Ci(n[7]),onContextMenu:n[33]}}),{c(){e=ee("div"),ke(t.$$.fragment),T(e,"class","jse-insert-area jse-after svelte-1dkd71f"),T(e,"data-type","insert-selection-area-after"),T(e,"style",n[18]),T(e,"title",I0),ze(e,"jse-hovered",n[10]===ou),ze(e,"jse-selected",n[16]&&Ci(n[7]))},m(i,o){fe(i,e,o),Ee(t,e,null),r=!0},p(i,o){const s={};o[0]&65664&&(s.selected=i[16]&&Ci(i[7])),t.$set(s),(!r||o[0]&262144)&&T(e,"style",i[18]),o[0]&1024&&ze(e,"jse-hovered",i[10]===ou),o[0]&65664&&ze(e,"jse-selected",i[16]&&Ci(i[7]))},i(i){r||($(t.$$.fragment,i),r=!0)},o(i){te(t.$$.fragment,i),r=!1},d(i){i&&ue(e),Oe(t)}}}function ez(n){let e,t,r,i,o=!n[8].readOnly&&(n[10]===ou||n[16]&&Ci(n[7])),s,a,l,u,f;const c=[FH,BH,LH],d=[];function g(v,m){return v[19]==="array"?0:v[19]==="object"?1:2}t=g(n),r=d[t]=c[t](n);let h=o&&aS(n);return{c(){e=ee("div"),r.c(),i=me(),h&&h.c(),T(e,"class",s=Yn(za("jse-json-node",{"jse-expanded":n[12]},n[8].onClassName(n[1],n[0])))+" svelte-1dkd71f"),T(e,"data-path",a=sg(n[1])),ze(e,"jse-root",n[17]),ze(e,"jse-selected",n[16]&&Wt(n[7])),ze(e,"jse-selected-key",n[16]&&An(n[7])),ze(e,"jse-selected-value",n[16]&&zt(n[7])),ze(e,"jse-hovered",n[10]===Vm)},m(v,m){fe(v,e,m),d[t].m(e,null),B(e,i),h&&h.m(e,null),l=!0,u||(f=[Te(e,"mousedown",n[25]),Te(e,"mousemove",n[26]),Te(e,"mouseover",n[28]),Te(e,"mouseout",n[29]),Te(e,"focus",void 0),Te(e,"blur",void 0)],u=!0)},p(v,m){let p=t;t=g(v),t===p?d[t].p(v,m):(Fe(),te(d[p],1,1,()=>{d[p]=null}),Ue(),r=d[t],r?r.p(v,m):(r=d[t]=c[t](v),r.c()),$(r,1),r.m(e,i)),m[0]&66944&&(o=!v[8].readOnly&&(v[10]===ou||v[16]&&Ci(v[7]))),o?h?(h.p(v,m),m[0]&66944&&$(h,1)):(h=aS(v),h.c(),$(h,1),h.m(e,null)):h&&(Fe(),te(h,1,1,()=>{h=null}),Ue()),(!l||m[0]&4355&&s!==(s=Yn(za("jse-json-node",{"jse-expanded":v[12]},v[8].onClassName(v[1],v[0])))+" svelte-1dkd71f"))&&T(e,"class",s),(!l||m[0]&2&&a!==(a=sg(v[1])))&&T(e,"data-path",a),m[0]&135427&&ze(e,"jse-root",v[17]),m[0]&70019&&ze(e,"jse-selected",v[16]&&Wt(v[7])),m[0]&70019&&ze(e,"jse-selected-key",v[16]&&An(v[7])),m[0]&70019&&ze(e,"jse-selected-value",v[16]&&zt(v[7])),m[0]&5379&&ze(e,"jse-hovered",v[10]===Vm)},i(v){l||($(r),$(h),l=!0)},o(v){te(r),te(h),l=!1},d(v){v&&ue(e),d[t].d(),h&&h.d(),u=!1,on(f)}}}function Cu(n){return`margin-left: calc(${n} * var(--jse-indent-size))`}function tz(n,e,t){let r,i,o,{$$slots:s={},$$scope:a}=e,{value:l}=e,{path:u}=e,{expandedMap:f}=e,{enforceStringMap:c}=e,{visibleSectionsMap:d}=e,{validationErrorsMap:g}=e,{searchResultItemsMap:h}=e,{selection:v}=e,{context:m}=e,{onDragSelectionStart:p}=e;const y=Sr("jsoneditor:JSONNode");let b,_,w;const S=Dj();let E,P,R,j,U,F;function z(ye,Ne,xe,he,ve,de,Ie,De,He){let Xe=Object.keys(Ne).map(mt=>{const be=zm(E,mt);return{key:mt,value:Ne[mt],path:S(ye.concat(mt)),pointer:be,expandedMap:Mi(xe,be),enforceStringMap:Mi(he,be),visibleSectionsMap:Mi(ve,be),validationErrorsMap:Mi(de,be),keySearchResultItemsMap:Aq(Ie,be),valueSearchResultItemsMap:Mi(Ie,be),selection:dw(De,be)}});return He&&He.offset!==0&&(Xe=M_(Xe,He.selectionStartIndex,He.selectionItemsCount,He.offset)),Xe}function D(ye,Ne,xe,he,ve,de,Ie,De,He,Xe){const mt=xe.start,be=Math.min(xe.end,Ne.length);let Z=[];for(let x=mt;x<be;x++){const C=zm(E,x);Z.push({index:x,value:Ne[x],path:S(ye.concat(String(x))),pointer:C,expandedMap:Mi(he,C),enforceStringMap:Mi(ve,C),visibleSectionsMap:Mi(de,C),validationErrorsMap:Mi(Ie,C),searchResultItemsMap:Mi(De,C),selection:dw(He,C)})}if(Xe&&Xe.offset!==0){const x=Z.map(C=>C.index);Z=M_(Z,Xe.selectionStartIndex,Xe.selectionItemsCount,Xe.offset);for(let C=0;C<Z.length;C++)Z[C].index=x[C]}return Z}function N(ye){ye.stopPropagation();const Ne=ye.ctrlKey;m.onExpand(u,!P,Ne)}function L(ye){ye.stopPropagation(),m.onExpand(u,!0)}function X(ye,Ne){const xe=Yu(u,Object.keys(l),ye,Ne);return m.onPatch(xe),St(Ko(xe[0].path))}function Q(ye){if(AD(ye.target)||ye.which===1&&pk(ye.target,"BUTTON"))return;ye.stopPropagation(),ye.preventDefault(),document.addEventListener("mousemove",k,!0),document.addEventListener("mouseup",V);const Ne=wp(ye.target),xe=m.getJson(),he=m.getDocumentState();if(cq(v,u,Ne)){ye.button===0&&p(ye);return}if(Kn.selecting=!0,Kn.selectionAnchor=u,Kn.selectionAnchorType=Ne,Kn.selectionFocus=u,ye.shiftKey)v&&m.onSelect(Rn(xe,v.anchorPath,u));else if(Ne===rn.multi)if(r&&ye.target.hasAttribute("data-path")){const ve=St(OP(l,he));m.onSelect(Uv(ve))}else m.onSelect(Rn(xe,u,u));else m.onSelect(hw(xe,Ne,u));m.focus()}function A(ye){if(Kn.selecting){ye.preventDefault(),ye.stopPropagation(),Kn.selectionFocus==null&&window.getSelection&&window.getSelection().empty();const Ne=wp(ye.target);if(!Yt(u,Kn.selectionFocus)||Ne!==Kn.selectionAnchorType){Kn.selectionFocus=u,Kn.selectionAnchorType=Ne;const xe=m.getJson();m.onSelect(Rn(xe,Kn.selectionAnchor,Kn.selectionFocus))}}}function k(ye){m.onDrag(ye)}function V(ye){Kn.selecting&&(Kn.selecting=!1,ye.stopPropagation()),m.onDragEnd(),document.removeEventListener("mousemove",k,!0),document.removeEventListener("mouseup",V)}function K(){var ye,Ne;return((Ne=(ye=m.findElement([]))===null||ye===void 0?void 0:ye.getBoundingClientRect())===null||Ne===void 0?void 0:Ne.top)||0}function H(ye,Ne){const he=K()-ye.initialContentTop;return Ne.clientY-ye.initialClientY-he}function I(ye){if(m.readOnly)return;const Ne=Vt(v.focusPath);if(!Yt(u,Ne)){p(ye);return}const xe=q(v,j||Rs);if(y("dragSelectionStart",{selection:v,items:xe}),!xe){y("Cannot drag the current selection (probably spread over multiple sections)");return}const he=qa(v),ve=xe.findIndex(He=>Yt(He.path,he)),de=m.getJson(),Ie=m.getDocumentState(),{offset:De}=im({json:de,documentState:Ie,deltaY:0,items:xe});t(11,w={initialTarget:ye.target,initialClientY:ye.clientY,initialContentTop:K(),selectionStartIndex:ve,selectionItemsCount:IP(v).length,items:xe,offset:De,didMoveItems:!1}),Kn.dragging=!0,document.addEventListener("mousemove",M,!0),document.addEventListener("mouseup",G)}function M(ye){if(w){const Ne=m.getJson(),xe=m.getDocumentState(),he=H(w,ye),{offset:ve}=im({json:Ne,documentState:xe,deltaY:he,items:w.items});ve!==w.offset&&(y("drag selection",ve,he),t(11,w={...w,offset:ve,didMoveItems:!0}))}}function G(ye){if(w){const Ne=m.getJson(),xe=m.getDocumentState(),he=H(w,ye),{operations:ve,updatedSelection:de}=im({json:Ne,documentState:xe,deltaY:he,items:w.items});if(ve)m.onPatch(ve,(Ie,De)=>({state:{...De,selection:de||v}}));else if(ye.target===w.initialTarget&&!w.didMoveItems){const Ie=wp(ye.target),De=MD(ye.target);De&&m.onSelect(hw(Ne,Ie,De))}t(11,w=void 0),Kn.dragging=!1,document.removeEventListener("mousemove",M,!0),document.removeEventListener("mouseup",G)}}function q(ye,Ne){const xe=[];function he(ve){const de=u.concat(ve),Ie=m.findElement(de);Ie!=null&&xe.push({path:de,height:Ie.clientHeight})}if(Array.isArray(l)){const ve=qa(ye),de=Xd(ye),Ie=St(ve),De=St(de),He=Ne.find(be=>Ie>=be.start&&De<=be.end);if(!He)return null;const{start:Xe,end:mt}=He;sk(Xe,Math.min(l.length,mt),be=>he(String(be)))}else Object.keys(l).forEach(he);return xe}function W(ye){Kn.selecting||Kn.dragging||(ye.stopPropagation(),bs(ye.target,"data-type","selectable-value")?t(10,b=Vm):bs(ye.target,"data-type","insert-selection-area-inside")?t(10,b=po):bs(ye.target,"data-type","insert-selection-area-after")&&t(10,b=ou),clearTimeout(_))}function ae(ye){ye.stopPropagation(),_=setTimeout(()=>t(10,b=void 0))}function le(ye){ye.shiftKey||(ye.stopPropagation(),ye.preventDefault(),m.onSelect(zi(u)))}function Pe(ye){ye.shiftKey||(ye.stopPropagation(),ye.preventDefault(),m.onSelect(mo(u)))}function Ve(ye){m.onSelect(zi(u)),m.onContextMenu(ye)}function Ae(ye){m.onSelect(mo(u)),m.onContextMenu(ye)}return n.$$set=ye=>{"value"in ye&&t(0,l=ye.value),"path"in ye&&t(1,u=ye.path),"expandedMap"in ye&&t(2,f=ye.expandedMap),"enforceStringMap"in ye&&t(3,c=ye.enforceStringMap),"visibleSectionsMap"in ye&&t(4,d=ye.visibleSectionsMap),"validationErrorsMap"in ye&&t(5,g=ye.validationErrorsMap),"searchResultItemsMap"in ye&&t(6,h=ye.searchResultItemsMap),"selection"in ye&&t(7,v=ye.selection),"context"in ye&&t(8,m=ye.context),"onDragSelectionStart"in ye&&t(34,p=ye.onDragSelectionStart),"$$scope"in ye&&t(36,a=ye.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&2&&t(9,E=Ge(u)),n.$$.dirty[0]&516&&t(12,P=f?f[E]===!0:!1),n.$$.dirty[0]&521&&t(13,R=Wu(l,c,E)),n.$$.dirty[0]&528&&t(14,j=d?d[E]:void 0),n.$$.dirty[0]&544&&t(15,U=g?g[E]:void 0),n.$$.dirty[0]&640&&t(16,F=v?v.pointersMap[E]===!0:!1),n.$$.dirty[0]&2&&t(17,r=u.length===0),n.$$.dirty[0]&1&&t(19,i=j0(l)),n.$$.dirty[0]&2&&t(18,o=Cu(u.length))},[l,u,f,c,d,g,h,v,m,E,b,w,P,R,j,U,F,r,o,i,z,D,N,L,X,Q,A,I,W,ae,le,Pe,Ve,Ae,p,s,a]}class qv extends rt{constructor(e){super(),nt(this,e,tz,ez,Nt,{value:0,path:1,expandedMap:2,enforceStringMap:3,visibleSectionsMap:4,validationErrorsMap:5,searchResultItemsMap:6,selection:7,context:8,onDragSelectionStart:34},null,[-1,-1])}}function nz(n){let e,t;return e=new iv({props:{items:n[0]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,[i]){const o={};i&1&&(o.items=r[0]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function rz(n,e,t){let r,i,o,s,a,l,u,{json:f}=e,{selection:c}=e,{readOnly:d}=e,{showSearch:g=!1}=e,{historyState:h}=e,{onExpandAll:v}=e,{onCollapseAll:m}=e,{onUndo:p}=e,{onRedo:y}=e,{onSort:b}=e,{onTransform:_}=e,{onContextMenu:w}=e,{onCopy:S}=e,{onRenderMenu:E=Kt}=e;function P(){t(1,g=!g)}return n.$$set=R=>{"json"in R&&t(2,f=R.json),"selection"in R&&t(3,c=R.selection),"readOnly"in R&&t(4,d=R.readOnly),"showSearch"in R&&t(1,g=R.showSearch),"historyState"in R&&t(5,h=R.historyState),"onExpandAll"in R&&t(6,v=R.onExpandAll),"onCollapseAll"in R&&t(7,m=R.onCollapseAll),"onUndo"in R&&t(8,p=R.onUndo),"onRedo"in R&&t(9,y=R.onRedo),"onSort"in R&&t(10,b=R.onSort),"onTransform"in R&&t(11,_=R.onTransform),"onContextMenu"in R&&t(12,w=R.onContextMenu),"onCopy"in R&&t(13,S=R.onCopy),"onRenderMenu"in R&&t(14,E=R.onRenderMenu)},n.$$.update=()=>{n.$$.dirty&4&&t(20,r=f!==void 0),n.$$.dirty&8,n.$$.dirty&1048584&&t(17,i=r&&(Wt(c)||An(c)||zt(c))),n.$$.dirty&68&&t(19,o={icon:Uj,title:"Expand all",className:"jse-expand-all",onClick:v,disabled:!qn(f)}),n.$$.dirty&132&&t(18,s={icon:Vj,title:"Collapse all",className:"jse-collapse-all",onClick:m,disabled:!qn(f)}),n.$$.dirty&4&&t(16,a={icon:tv,title:"Search (Ctrl+F)",className:"jse-search",onClick:P,disabled:f===void 0}),n.$$.dirty&999220&&t(15,l=d?[o,s,{separator:!0},{icon:yh,title:"Copy (Ctrl+C)",className:"jse-copy",onClick:S,disabled:!i},{separator:!0},a,{space:!0}]:[o,s,{separator:!0},{icon:$0,title:"Sort",className:"jse-sort",onClick:b,disabled:d||f===void 0},{icon:ev,title:"Transform contents (filter, sort, project)",className:"jse-transform",onClick:_,disabled:d||f===void 0},a,{icon:rj,title:mO,className:"jse-contextmenu",onClick:w},{separator:!0},{icon:_k,title:"Undo (Ctrl+Z)",className:"jse-undo",onClick:p,disabled:!h.canUndo},{icon:bk,title:"Redo (Ctrl+Shift+Z)",className:"jse-redo",onClick:y,disabled:!h.canRedo},{space:!0}]),n.$$.dirty&49152&&t(0,u=E("tree",l)||l)},[u,g,f,c,d,h,v,m,p,y,b,_,w,S,E,l,a,i,s,o,r]}class iz extends rt{constructor(e){super(),nt(this,e,rz,nz,Nt,{json:2,selection:3,readOnly:4,showSearch:1,historyState:5,onExpandAll:6,onCollapseAll:7,onUndo:8,onRedo:9,onSort:10,onTransform:11,onContextMenu:12,onCopy:13,onRenderMenu:14})}}function lS(n){let e;return{c(){e=ee("ul"),e.innerHTML=`<li class="svelte-17jij2m">Click inside the editor</li> 
        <li class="svelte-17jij2m">Paste clipboard data using <span class="jse-bold svelte-17jij2m">Ctrl+V</span></li> 
        <li class="svelte-17jij2m">Create a new object by typing <span class="jse-bold svelte-17jij2m">{</span></li> 
        <li class="svelte-17jij2m">Create a new array by typing <span class="jse-bold svelte-17jij2m">[</span></li>`,T(e,"class","svelte-17jij2m")},m(t,r){fe(t,e,r)},d(t){t&&ue(e)}}}function oz(n){let e,t,r,i,o,s,a,l=!n[0]&&lS();return{c(){e=ee("div"),t=ee("div"),r=me(),i=ee("div"),o=qe(`Empty document
    `),l&&l.c(),s=me(),a=ee("div"),T(t,"class","jse-space jse-before svelte-17jij2m"),T(i,"class","jse-contents svelte-17jij2m"),T(a,"class","jse-space jse-after svelte-17jij2m"),T(e,"class","jse-welcome svelte-17jij2m")},m(u,f){fe(u,e,f),B(e,t),B(e,r),B(e,i),B(i,o),l&&l.m(i,null),B(e,s),B(e,a)},p(u,[f]){u[0]?l&&(l.d(1),l=null):l||(l=lS(),l.c(),l.m(i,null))},i:Me,o:Me,d(u){u&&ue(e),l&&l.d()}}}function sz(n,e,t){let{readOnly:r}=e;return n.$$set=i=>{"readOnly"in i&&t(0,r=i.readOnly)},[r]}class az extends rt{constructor(e){super(),nt(this,e,sz,oz,Nt,{readOnly:0})}}function uS(n,e,t){const r=n.slice();return r[4]=e[t],r}function cS(n,e){let t,r=Qh(e[4],hS)+"",i,o,s,a;function l(){return e[3](e[4])}return{key:n,first:null,c(){t=ee("button"),i=qe(r),T(t,"type","button"),T(t,"class","jse-navigation-bar-dropdown-item svelte-1rtf8mz"),T(t,"title",o=e[4]),ze(t,"jse-selected",e[4]===e[1]),this.first=t},m(u,f){fe(u,t,f),B(t,i),s||(a=Te(t,"click",oO(l)),s=!0)},p(u,f){e=u,f&1&&r!==(r=Qh(e[4],hS)+"")&&bt(i,r),f&1&&o!==(o=e[4])&&T(t,"title",o),f&3&&ze(t,"jse-selected",e[4]===e[1])},d(u){u&&ue(t),s=!1,a()}}}function fS(n){let e,t;return{c(){e=ee("button"),t=qe("..."),T(e,"type","button"),T(e,"class","jse-navigation-bar-dropdown-item svelte-1rtf8mz"),T(e,"title","Limited to "+Fl+" items")},m(r,i){fe(r,e,i),B(e,t)},p:Me,d(r){r&&ue(e)}}}function lz(n){let e,t=[],r=new Map,i,o=R_(n[0],Fl);const s=l=>l[4];for(let l=0;l<o.length;l+=1){let u=uS(n,o,l),f=s(u);r.set(f,t[l]=cS(f,u))}let a=n[0].length>Fl&&fS();return{c(){e=ee("div");for(let l=0;l<t.length;l+=1)t[l].c();i=me(),a&&a.c(),T(e,"class","jse-navigation-bar-dropdown svelte-1rtf8mz")},m(l,u){fe(l,e,u);for(let f=0;f<t.length;f+=1)t[f].m(e,null);B(e,i),a&&a.m(e,null)},p(l,[u]){u&7&&(o=R_(l[0],Fl),t=Nu(t,u,s,1,l,o,r,e,AA,cS,i,uS)),l[0].length>Fl?a?a.p(l,u):(a=fS(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i:Me,o:Me,d(l){l&&ue(e);for(let u=0;u<t.length;u+=1)t[u].d();a&&a.d()}}}const Fl=100,hS=30;function uz(n,e,t){let{items:r}=e,{selectedItem:i}=e,{onSelect:o}=e;const s=a=>o(a);return n.$$set=a=>{"items"in a&&t(0,r=a.items),"selectedItem"in a&&t(1,i=a.selectedItem),"onSelect"in a&&t(2,o=a.onSelect)},[r,i,o,s]}class cz extends rt{constructor(e){super(),nt(this,e,uz,lz,Nt,{items:0,selectedItem:1,onSelect:2})}}function dS(n){let e,t,r,i;return{c(){e=ee("button"),t=qe(n[2]),T(e,"type","button"),T(e,"class","jse-navigation-bar-button svelte-4ttwnh")},m(o,s){fe(o,e,s),B(e,t),r||(i=Te(e,"click",n[9]),r=!0)},p(o,s){s&4&&bt(t,o[2])},d(o){o&&ue(e),r=!1,i()}}}function fz(n){let e,t,r,i,o,s,a;r=new kt({props:{data:yk}});let l=n[2]!==void 0&&dS(n);return{c(){e=ee("div"),t=ee("button"),ke(r.$$.fragment),i=me(),l&&l.c(),T(t,"type","button"),T(t,"class","jse-navigation-bar-button jse-navigation-bar-arrow svelte-4ttwnh"),ze(t,"jse-open",n[1]),T(e,"class","jse-navigation-bar-item svelte-4ttwnh")},m(u,f){fe(u,e,f),B(e,t),Ee(r,t,null),B(e,i),l&&l.m(e,null),n[10](e),o=!0,s||(a=Te(t,"click",n[4]),s=!0)},p(u,[f]){f&2&&ze(t,"jse-open",u[1]),u[2]!==void 0?l?l.p(u,f):(l=dS(u),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(u){o||($(r.$$.fragment,u),o=!0)},o(u){te(r.$$.fragment,u),o=!1},d(u){u&&ue(e),Oe(r),l&&l.d(),n[10](null),s=!1,a()}}}function hz(n,e,t){let r,i;const{openAbsolutePopup:o,closeAbsolutePopup:s}=ur("absolute-popup");let{path:a}=e,{index:l}=e,{onSelect:u}=e,{getItems:f}=e,c,d=!1,g;function h(y){s(g),u(r.concat(y))}function v(){if(c){t(1,d=!0);const y={items:f(r),selectedItem:i,onSelect:h};g=o(cz,y,{anchor:c,closeOnOuterClick:!0,onClose:()=>{t(1,d=!1)}})}}const m=()=>h(i);function p(y){wt[y?"unshift":"push"](()=>{c=y,t(0,c)})}return n.$$set=y=>{"path"in y&&t(5,a=y.path),"index"in y&&t(6,l=y.index),"onSelect"in y&&t(7,u=y.onSelect),"getItems"in y&&t(8,f=y.getItems)},n.$$.update=()=>{n.$$.dirty&96&&(r=a.slice(0,l)),n.$$.dirty&96&&t(2,i=a[l])},[c,d,i,h,v,a,l,u,f,m,p]}class jP extends rt{constructor(e){super(),nt(this,e,hz,fz,Nt,{path:5,index:6,onSelect:7,getItems:8})}}var LP={exports:{}};/*
 * @version    1.4.0
 * @date       2015-10-26
 * @stability  3 - Stable
 * @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)
 * @license    MIT License
 */var pS=function(n,e){var t,r,i=1,o=0,s=0,a=String.alphabet;function l(u,f,c){if(c){for(t=f;c=l(u,t),c<76&&c>65;)++t;return+u.slice(f-1,t)}return c=a&&a.indexOf(u.charAt(f)),c>-1?c+76:(c=u.charCodeAt(f)||0,c<45||c>127?c:c<46?65:c<48?c-1:c<58?c+18:c<65?c-11:c<91?c+11:c<97?c-37:c<123?c+5:c-63)}if((n+="")!=(e+="")){for(;i;)if(r=l(n,o++),i=l(e,s++),r<76&&i<76&&r>66&&i>66&&(r=l(n,o,o),i=l(e,s,o=t),s=t),r!=i)return r<i?-1:1}return 0};try{LP.exports=pS}catch{String.naturalCompare=pS}function Hv(n,e){const t=typeof n=="string"?n.toLowerCase():n,r=typeof e=="string"?e.toLowerCase():e;return LP.exports(t,r)}function dz(n,e=[],t=1){const r=tt(n,e),o=Object.keys(r).slice();o.sort((a,l)=>t*Hv(a,l));const s=[];for(let a=0;a<o.length;a++){const l=o[a],u=Ge(e.concat(l));s.push({op:"move",from:u,path:u})}return s}function pz(n,e=[],t=[],r=1){const i=mz(t,r),o=tt(n,e);return[{op:"replace",path:Ge(e),value:o.slice(0).sort(i)}]}function mz(n,e){return function(r,i){const o=tt(r,n),s=tt(i,n);return o===void 0?e:s===void 0?-e:typeof o!="string"&&typeof s!="string"?o>s?e:o<s?-e:0:e*Hv(o,s)}}function mS(n,e,t){const r=n.slice();return r[11]=e[t],r[13]=t,r}function gS(n,e){let t,r,i;return r=new jP({props:{getItems:e[4],path:e[1],index:e[13],onSelect:e[5]}}),{key:n,first:null,c(){t=xt(),ke(r.$$.fragment),this.first=t},m(o,s){fe(o,t,s),Ee(r,o,s),i=!0},p(o,s){e=o;const a={};s&2&&(a.path=e[1]),s&2&&(a.index=e[13]),r.$set(a)},i(o){i||($(r.$$.fragment,o),i=!0)},o(o){te(r.$$.fragment,o),i=!1},d(o){o&&ue(t),Oe(r,o)}}}function vS(n){let e,t;return e=new jP({props:{getItems:n[4],path:n[1],index:void 0,onSelect:n[5]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i&2&&(o.path=r[1]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function gz(n){let e,t=[],r=new Map,i,o,s,a=qn(n[0])?"\xA0":"Navigation bar",l,u,f=n[1];const c=g=>g[13];for(let g=0;g<f.length;g+=1){let h=mS(n,f,g),v=c(h);r.set(v,t[g]=gS(v,h))}let d=n[3]&&vS(n);return{c(){e=ee("div");for(let g=0;g<t.length;g+=1)t[g].c();i=me(),d&&d.c(),o=me(),s=ee("div"),l=qe(a),T(s,"class","jse-navigation-bar-space svelte-1blb1xo"),T(e,"class","jse-navigation-bar svelte-1blb1xo")},m(g,h){fe(g,e,h);for(let v=0;v<t.length;v+=1)t[v].m(e,null);B(e,i),d&&d.m(e,null),B(e,o),B(e,s),B(s,l),n[8](e),u=!0},p(g,[h]){h&50&&(f=g[1],Fe(),t=Nu(t,h,c,1,g,f,r,e,dd,gS,i,mS),Ue()),g[3]?d?(d.p(g,h),h&8&&$(d,1)):(d=vS(g),d.c(),$(d,1),d.m(e,o)):d&&(Fe(),te(d,1,1,()=>{d=null}),Ue()),(!u||h&1)&&a!==(a=qn(g[0])?"\xA0":"Navigation bar")&&bt(l,a)},i(g){if(!u){for(let h=0;h<f.length;h+=1)$(t[h]);$(d),u=!0}},o(g){for(let h=0;h<t.length;h+=1)te(t[h]);te(d),u=!1},d(g){g&&ue(e);for(let h=0;h<t.length;h+=1)t[h].d();d&&d.d(),n[8](null)}}}function vz(n,e,t){let r,i;const o=Sr("jsoneditor:NavigationBar");let{json:s}=e,{documentState:a}=e,{onSelect:l}=e,u;function f(){setTimeout(()=>{if(u&&u.scrollTo){const h=u.scrollWidth-u.clientWidth;h>0&&(o("scrollTo ",h),u.scrollTo({left:h,behavior:"smooth"}))}})}function c(h){o("get items for path",h);const v=tt(s,h);if(Array.isArray(v))return oD(0,v.length).map(String);if(ir(v)){const p=Object.keys(v).slice(0);return p.sort(Hv),p}else return[]}function d(h){o("select path",JSON.stringify(h)),l(Rn(s,h,h))}function g(h){wt[h?"unshift":"push"](()=>{u=h,t(2,u)})}return n.$$set=h=>{"json"in h&&t(0,s=h.json),"documentState"in h&&t(6,a=h.documentState),"onSelect"in h&&t(7,l=h.onSelect)},n.$$.update=()=>{n.$$.dirty&64&&t(1,r=a.selection?a.selection.focusPath:[]),n.$$.dirty&3&&t(3,i=qn(tt(s,r))),n.$$.dirty&2&&f()},[s,r,u,i,c,d,a,l,g]}class yz extends rt{constructor(e){super(),nt(this,e,vz,gz,Nt,{json:0,documentState:6,onSelect:7})}}function yS(n){let e,t,r,i,o,s,a,l,u,f,c,d,g,h=n[3]!==-1?`${n[3]+1}/`:"",v,m,p,y,b,_,w,S,E,P,R,j,U,F,z,D=!n[4]&&_S(n);const N=[bz,_z],L=[];function X(A,k){return A[2]?0:1}a=X(n),l=L[a]=N[a](n),b=new kt({props:{data:QD}}),S=new kt({props:{data:ZD}}),R=new kt({props:{data:Fu}});let Q=n[0]&&!n[4]&&bS(n);return{c(){e=ee("div"),t=ee("form"),D&&D.c(),r=me(),i=ee("div"),o=ee("div"),s=ee("div"),l.c(),u=me(),f=ee("label"),c=ee("input"),d=me(),g=ee("div"),v=qe(h),m=qe(n[10]),p=me(),y=ee("button"),ke(b.$$.fragment),_=me(),w=ee("button"),ke(S.$$.fragment),E=me(),P=ee("button"),ke(R.$$.fragment),j=me(),Q&&Q.c(),T(s,"class","jse-search-icon svelte-10nesp9"),T(c,"class","jse-search-input svelte-10nesp9"),T(c,"title","Enter text to search"),T(c,"type","text"),T(c,"placeholder","Find"),T(f,"class","jse-search-input-label svelte-10nesp9"),T(f,"about","jse-search input"),T(g,"class","jse-search-count svelte-10nesp9"),ze(g,"jse-visible",n[8]!==""),T(y,"type","button"),T(y,"class","jse-search-next svelte-10nesp9"),T(y,"title","Go to next search result (Enter)"),T(w,"type","button"),T(w,"class","jse-search-previous svelte-10nesp9"),T(w,"title","Go to previous search result (Shift+Enter)"),T(P,"type","button"),T(P,"class","jse-search-clear svelte-10nesp9"),T(P,"title","Close search box (Esc)"),T(o,"class","jse-search-section svelte-10nesp9"),T(i,"class","jse-search-contents svelte-10nesp9"),T(t,"class","jse-search-form svelte-10nesp9"),T(e,"class","jse-search-box svelte-10nesp9")},m(A,k){fe(A,e,k),B(e,t),D&&D.m(t,null),B(t,r),B(t,i),B(i,o),B(o,s),L[a].m(s,null),B(o,u),B(o,f),B(f,c),Jn(c,n[8]),B(o,d),B(o,g),B(g,v),B(g,m),B(o,p),B(o,y),Ee(b,y,null),B(o,_),B(o,w),Ee(S,w,null),B(o,E),B(o,P),Ee(R,P,null),B(i,j),Q&&Q.m(i,null),U=!0,F||(z=[Te(c,"input",n[21]),xu(Sz.call(null,c)),Te(y,"click",n[22]),Te(w,"click",n[23]),Te(P,"click",n[24]),Te(t,"submit",n[12]),Te(t,"keydown",n[13])],F=!0)},p(A,k){A[4]?D&&(Fe(),te(D,1,1,()=>{D=null}),Ue()):D?(D.p(A,k),k&16&&$(D,1)):(D=_S(A),D.c(),$(D,1),D.m(t,r));let V=a;a=X(A),a===V?L[a].p(A,k):(Fe(),te(L[V],1,1,()=>{L[V]=null}),Ue(),l=L[a],l?l.p(A,k):(l=L[a]=N[a](A),l.c()),$(l,1),l.m(s,null)),k&256&&c.value!==A[8]&&Jn(c,A[8]),(!U||k&8)&&h!==(h=A[3]!==-1?`${A[3]+1}/`:"")&&bt(v,h),(!U||k&1024)&&bt(m,A[10]),k&256&&ze(g,"jse-visible",A[8]!==""),A[0]&&!A[4]?Q?Q.p(A,k):(Q=bS(A),Q.c(),Q.m(i,null)):Q&&(Q.d(1),Q=null)},i(A){U||($(D),$(l),$(b.$$.fragment,A),$(S.$$.fragment,A),$(R.$$.fragment,A),U=!0)},o(A){te(D),te(l),te(b.$$.fragment,A),te(S.$$.fragment,A),te(R.$$.fragment,A),U=!1},d(A){A&&ue(e),D&&D.d(),L[a].d(),Oe(b),Oe(S),Oe(R),Q&&Q.d(),F=!1,on(z)}}}function _S(n){let e,t,r,i,o;return t=new kt({props:{data:n[0]?Vi:jo}}),{c(){e=ee("button"),ke(t.$$.fragment),T(e,"type","button"),T(e,"class","jse-replace-toggle svelte-10nesp9"),T(e,"title","Toggle visibility of replace options (Ctrl+H)")},m(s,a){fe(s,e,a),Ee(t,e,null),r=!0,i||(o=Te(e,"click",n[11]),i=!0)},p(s,a){const l={};a&1&&(l.data=s[0]?Vi:jo),t.$set(l)},i(s){r||($(t.$$.fragment,s),r=!0)},o(s){te(t.$$.fragment,s),r=!1},d(s){s&&ue(e),Oe(t),i=!1,o()}}}function _z(n){let e,t;return e=new kt({props:{data:tv}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p:Me,i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function bz(n){let e,t;return e=new kt({props:{data:XD,spin:!0}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p:Me,i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function bS(n){let e,t,r,i,o,s,a,l;return{c(){e=ee("div"),t=ee("input"),r=me(),i=ee("button"),i.textContent="Replace",o=me(),s=ee("button"),s.textContent="All",T(t,"class","jse-replace-input svelte-10nesp9"),T(t,"title","Enter replacement text"),T(t,"type","text"),T(t,"placeholder","Replace"),T(i,"type","button"),T(i,"title","Replace current occurrence (Ctrl+Enter)"),T(i,"class","svelte-10nesp9"),T(s,"type","button"),T(s,"title","Replace all occurrences"),T(s,"class","svelte-10nesp9"),T(e,"class","jse-replace-section svelte-10nesp9")},m(u,f){fe(u,e,f),B(e,t),Jn(t,n[9]),B(e,r),B(e,i),B(e,o),B(e,s),a||(l=[Te(t,"input",n[25]),Te(i,"click",n[14]),Te(s,"click",n[15])],a=!0)},p(u,f){f&512&&t.value!==u[9]&&Jn(t,u[9])},d(u){u&&ue(e),a=!1,on(l)}}}function wz(n){let e,t,r=n[1]&&yS(n);return{c(){r&&r.c(),e=xt()},m(i,o){r&&r.m(i,o),fe(i,e,o),t=!0},p(i,[o]){i[1]?r?(r.p(i,o),o&2&&$(r,1)):(r=yS(i),r.c(),$(r,1),r.m(e.parentNode,e)):r&&(Fe(),te(r,1,1,()=>{r=null}),Ue())},i(i){t||($(r),t=!0)},o(i){te(r),t=!1},d(i){r&&r.d(i),i&&ue(e)}}}function Sz(n){n.select()}function Cz(n,e,t){let r,i,{show:o=!1}=e,{searching:s}=e,{resultCount:a=0}=e,{activeIndex:l=0}=e,{showReplace:u=!1}=e,{readOnly:f=!1}=e,{onChange:c=Kt}=e,{onPrevious:d=Kt}=e,{onNext:g=Kt}=e,{onReplace:h=Kt}=e,{onReplaceAll:v=Kt}=e,{onClose:m=Kt}=e,p="",y="",b="";function _(){p!==""&&c(p)}function w(){t(0,u=!u&&!f)}function S(N){N.preventDefault(),p!==y?(y=p,i.cancel(),c(p)):g()}function E(N){N.stopPropagation();const L=nl(N);L==="Enter"&&(N.preventDefault(),g()),L==="Shift+Enter"&&(N.preventDefault(),d()),(L==="Ctrl+Enter"||L==="Command+Enter")&&(N.preventDefault(),u?P():g()),L==="Ctrl+H"&&(N.preventDefault(),w()),L==="Escape"&&(N.preventDefault(),m())}function P(){f||h(p,b)}function R(){f||v(p,b)}function j(){p=this.value,t(8,p)}const U=()=>g(),F=()=>d(),z=()=>m();function D(){b=this.value,t(9,b)}return n.$$set=N=>{"show"in N&&t(1,o=N.show),"searching"in N&&t(2,s=N.searching),"resultCount"in N&&t(16,a=N.resultCount),"activeIndex"in N&&t(3,l=N.activeIndex),"showReplace"in N&&t(0,u=N.showReplace),"readOnly"in N&&t(4,f=N.readOnly),"onChange"in N&&t(17,c=N.onChange),"onPrevious"in N&&t(5,d=N.onPrevious),"onNext"in N&&t(6,g=N.onNext),"onReplace"in N&&t(18,h=N.onReplace),"onReplaceAll"in N&&t(19,v=N.onReplaceAll),"onClose"in N&&t(7,m=N.onClose)},n.$$.update=()=>{n.$$.dirty&65536&&t(10,r=a>=Fm?`${Fm-1}+`:String(a)),n.$$.dirty&131072&&t(20,i=Ad(c,pO)),n.$$.dirty&1048832&&i(p),n.$$.dirty&2&&o&&_()},[u,o,s,l,f,d,g,m,p,b,r,w,S,E,P,R,a,c,h,v,i,j,U,F,z,D]}class Ez extends rt{constructor(e){super(),nt(this,e,Cz,wz,Nt,{show:1,searching:2,resultCount:16,activeIndex:3,showReplace:0,readOnly:4,onChange:17,onPrevious:5,onNext:6,onReplace:18,onReplaceAll:19,onClose:7})}}const{window:Oz}=P0;function wS(n){let e,t,r;function i(s){n[70](s)}let o={json:n[7],selection:n[13].selection,readOnly:n[0],historyState:n[19],onExpandAll:n[37],onCollapseAll:n[38],onUndo:n[33],onRedo:n[34],onSort:n[35],onTransform:n[36],onContextMenu:n[42],onCopy:n[31],onRenderMenu:n[4]};return n[16]!==void 0&&(o.showSearch=n[16]),e=new iz({props:o}),wt.push(()=>Ir(e,"showSearch",i)),{c(){ke(e.$$.fragment)},m(s,a){Ee(e,s,a),r=!0},p(s,a){const l={};a[0]&128&&(l.json=s[7]),a[0]&8192&&(l.selection=s[13].selection),a[0]&1&&(l.readOnly=s[0]),a[0]&524288&&(l.historyState=s[19]),a[0]&16&&(l.onRenderMenu=s[4]),!t&&a[0]&65536&&(t=!0,l.showSearch=s[16],qr(()=>t=!1)),e.$set(l)},i(s){r||($(e.$$.fragment,s),r=!0)},o(s){te(e.$$.fragment,s),r=!1},d(s){Oe(e,s)}}}function SS(n){let e,t;return e=new yz({props:{json:n[7],documentState:n[13],onSelect:n[45]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i[0]&128&&(o.json=r[7]),i[0]&8192&&(o.documentState=r[13]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function kz(n){let e;return{c(){e=ee("div"),e.innerHTML=`<div class="jse-loading-space svelte-15tyejh"></div> 
      <div class="jse-loading svelte-15tyejh">loading...</div>`,T(e,"class","jse-contents svelte-15tyejh")},m(t,r){fe(t,e,r)},p:Me,i:Me,o:Me,d(t){t&&ue(e)}}}function Tz(n){let e,t,r,i,o,s,a,l,u;const f=[Iz,Pz],c=[];function d(g,h){return g[7]===void 0?0:1}return i=d(n),o=c[i]=f[i](n),{c(){e=ee("label"),t=ee("input"),r=me(),o.c(),s=xt(),T(t,"class","jse-hidden-input svelte-15tyejh"),T(t,"tabindex","-1"),T(e,"class","jse-hidden-input-label svelte-15tyejh")},m(g,h){fe(g,e,h),B(e,t),n[71](t),fe(g,r,h),c[i].m(g,h),fe(g,s,h),a=!0,l||(u=Te(t,"paste",n[32]),l=!0)},p(g,h){let v=i;i=d(g),i===v?c[i].p(g,h):(Fe(),te(c[v],1,1,()=>{c[v]=null}),Ue(),o=c[i],o?o.p(g,h):(o=c[i]=f[i](g),o.c()),$(o,1),o.m(s.parentNode,s))},i(g){a||($(o),a=!0)},o(g){te(o),a=!1},d(g){g&&ue(e),n[71](null),g&&ue(r),c[i].d(g),g&&ue(s),l=!1,u()}}}function Pz(n){var g,h,v,m;let e,t,r,i,o,s,a,l,u,f;t=new Ez({props:{show:n[16],resultCount:((h=(g=n[14])==null?void 0:g.items)==null?void 0:h.length)||0,activeIndex:((v=n[14])==null?void 0:v.activeIndex)||0,showReplace:n[17],searching:n[18],readOnly:n[0],onChange:n[24],onNext:n[25],onPrevious:n[26],onReplace:n[27],onReplaceAll:n[28],onClose:n[29]}}),o=new qv({props:{value:n[7],path:n[23],expandedMap:n[13].expandedMap,enforceStringMap:n[13].enforceStringMap,visibleSectionsMap:n[13].visibleSectionsMap,validationErrorsMap:n[21],searchResultItemsMap:(m=n[14])==null?void 0:m.itemsMap,selection:n[13].selection,context:n[10],onDragSelectionStart:Kt}});let c=n[15]&&CS(n),d=n[20]&&ES(n);return u=new Ek({props:{validationErrors:n[9],selectError:n[30]}}),{c(){e=ee("div"),ke(t.$$.fragment),r=me(),i=ee("div"),ke(o.$$.fragment),s=me(),c&&c.c(),a=me(),d&&d.c(),l=me(),ke(u.$$.fragment),T(e,"class","jse-search-box-container svelte-15tyejh"),T(i,"class","jse-contents svelte-15tyejh"),T(i,"data-jsoneditor-scrollable-contents",!0)},m(p,y){fe(p,e,y),Ee(t,e,null),fe(p,r,y),fe(p,i,y),Ee(o,i,null),n[72](i),fe(p,s,y),c&&c.m(p,y),fe(p,a,y),d&&d.m(p,y),fe(p,l,y),Ee(u,p,y),f=!0},p(p,y){var S,E,P,R;const b={};y[0]&65536&&(b.show=p[16]),y[0]&16384&&(b.resultCount=((E=(S=p[14])==null?void 0:S.items)==null?void 0:E.length)||0),y[0]&16384&&(b.activeIndex=((P=p[14])==null?void 0:P.activeIndex)||0),y[0]&131072&&(b.showReplace=p[17]),y[0]&262144&&(b.searching=p[18]),y[0]&1&&(b.readOnly=p[0]),t.$set(b);const _={};y[0]&128&&(_.value=p[7]),y[0]&8192&&(_.expandedMap=p[13].expandedMap),y[0]&8192&&(_.enforceStringMap=p[13].enforceStringMap),y[0]&8192&&(_.visibleSectionsMap=p[13].visibleSectionsMap),y[0]&2097152&&(_.validationErrorsMap=p[21]),y[0]&16384&&(_.searchResultItemsMap=(R=p[14])==null?void 0:R.itemsMap),y[0]&8192&&(_.selection=p[13].selection),y[0]&1024&&(_.context=p[10]),o.$set(_),p[15]?c?(c.p(p,y),y[0]&32768&&$(c,1)):(c=CS(p),c.c(),$(c,1),c.m(a.parentNode,a)):c&&(Fe(),te(c,1,1,()=>{c=null}),Ue()),p[20]?d?(d.p(p,y),y[0]&1048576&&$(d,1)):(d=ES(p),d.c(),$(d,1),d.m(l.parentNode,l)):d&&(Fe(),te(d,1,1,()=>{d=null}),Ue());const w={};y[0]&512&&(w.validationErrors=p[9]),u.$set(w)},i(p){f||($(t.$$.fragment,p),$(o.$$.fragment,p),$(c),$(d),$(u.$$.fragment,p),f=!0)},o(p){te(t.$$.fragment,p),te(o.$$.fragment,p),te(c),te(d),te(u.$$.fragment,p),f=!1},d(p){p&&ue(e),Oe(t),p&&ue(r),p&&ue(i),Oe(o),n[72](null),p&&ue(s),c&&c.d(p),p&&ue(a),d&&d.d(p),p&&ue(l),Oe(u,p)}}}function Iz(n){let e,t,r,i;const o=[Rz,Az],s=[];function a(l,u){return l[8]===""||l[8]===void 0?0:1}return e=a(n),t=s[e]=o[e](n),{c(){t.c(),r=xt()},m(l,u){s[e].m(l,u),fe(l,r,u),i=!0},p(l,u){let f=e;e=a(l),e===f?s[e].p(l,u):(Fe(),te(s[f],1,1,()=>{s[f]=null}),Ue(),t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),$(t,1),t.m(r.parentNode,r))},i(l){i||($(t),i=!0)},o(l){te(t),i=!1},d(l){s[e].d(l),l&&ue(r)}}}function CS(n){let e,t;return e=new Ys({props:{type:"info",message:`You pasted a JSON ${Array.isArray(n[15].contents)?"array":"object"} as text`,actions:[{icon:rv,text:"Paste as JSON instead",onMouseDown:n[43]},{text:"Leave as is",onClick:n[44]}]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i[0]&32768&&(o.message=`You pasted a JSON ${Array.isArray(r[15].contents)?"array":"object"} as text`),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function ES(n){let e,t;return e=new Ys({props:{type:"success",message:"The loaded JSON document was invalid but is successfully repaired.",actions:n[0]?[]:[{icon:ag,text:"Ok",onClick:n[5]},{icon:vh,text:"Repair manually instead",onClick:n[3]}]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i[0]&9&&(o.actions=r[0]?[]:[{icon:ag,text:"Ok",onClick:r[5]},{icon:vh,text:"Repair manually instead",onClick:r[3]}]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Az(n){let e,t,r,i=Qh(n[8],Vy)+"",o,s;return e=new Ys({props:{type:"error",message:"The loaded JSON document is invalid and could not be repaired automatically.",actions:n[0]?[]:[{icon:vh,text:"Repair manually",onClick:n[3]}]}}),{c(){ke(e.$$.fragment),t=me(),r=ee("div"),o=qe(i),T(r,"class","jse-preview svelte-15tyejh")},m(a,l){Ee(e,a,l),fe(a,t,l),fe(a,r,l),B(r,o),s=!0},p(a,l){const u={};l[0]&9&&(u.actions=a[0]?[]:[{icon:vh,text:"Repair manually",onClick:a[3]}]),e.$set(u),(!s||l[0]&256)&&i!==(i=Qh(a[8],Vy)+"")&&bt(o,i)},i(a){s||($(e.$$.fragment,a),s=!0)},o(a){te(e.$$.fragment,a),s=!1},d(a){Oe(e,a),a&&ue(t),a&&ue(r)}}}function Rz(n){let e,t;return e=new az({props:{readOnly:n[0]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i[0]&1&&(o.readOnly=r[0]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function xz(n){let e,t,r,i,o,s,a,l,u=n[1]&&wS(n),f=n[2]&&SS(n);const c=[Tz,kz],d=[];function g(h,v){return h[22]?1:0}return i=g(n),o=d[i]=c[i](n),{c(){e=ee("div"),u&&u.c(),t=me(),f&&f.c(),r=me(),o.c(),T(e,"class","jse-tree-mode svelte-15tyejh"),ze(e,"no-main-menu",!n[1])},m(h,v){fe(h,e,v),u&&u.m(e,null),B(e,t),f&&f.m(e,null),B(e,r),d[i].m(e,null),n[73](e),s=!0,a||(l=[Te(Oz,"mousedown",n[46]),Te(e,"keydown",n[39]),Te(e,"mousedown",n[40]),Te(e,"contextmenu",n[41])],a=!0)},p(h,v){h[1]?u?(u.p(h,v),v[0]&2&&$(u,1)):(u=wS(h),u.c(),$(u,1),u.m(e,t)):u&&(Fe(),te(u,1,1,()=>{u=null}),Ue()),h[2]?f?(f.p(h,v),v[0]&4&&$(f,1)):(f=SS(h),f.c(),$(f,1),f.m(e,r)):f&&(Fe(),te(f,1,1,()=>{f=null}),Ue()),o.p(h,v),v[0]&2&&ze(e,"no-main-menu",!h[1])},i(h){s||($(u),$(f),$(o),s=!0)},o(h){te(u),te(f),te(o),s=!1},d(h){h&&ue(e),u&&u.d(),f&&f.d(),d[i].d(),n[73](null),a=!1,on(l)}}}function ia(n){return n.length===0?!0:n.length===1&&n[0]==="0"}function Vc(){return!0}function Nz(n,e,t){let r;const i=Sr("jsoneditor:TreeMode"),o=typeof window>"u";i("isSSR:",o);const{open:s}=ur("simple-modal"),a=gh(),l=gh(),{openAbsolutePopup:u,closeAbsolutePopup:f}=ur("absolute-popup");let c,d,g,h=!1;const v=JV();let{readOnly:m=!1}=e,{externalContent:p}=e,{mainMenuBar:y=!0}=e,{navigationBar:b=!0}=e,{escapeControlCharacters:_=!1}=e,{escapeUnicodeCharacters:w=!1}=e,{validator:S=null}=e,{indentation:E=2}=e,{onError:P}=e,{onChange:R}=e,{onRenderValue:j}=e,{onRequestRepair:U=Kt}=e,{onRenderMenu:F=Kt}=e,{onClassName:z}=e,{onFocus:D}=e,{onBlur:N}=e,{onSortModal:L}=e,{onTransformModal:X}=e,Q=!1;wk({onMount:Nr,onDestroy:ho,getWindow:()=>cu(g),hasFocus:()=>Q&&document.hasFocus()||og(g),onFocus:()=>{h=!0,D&&D()},onBlur:()=>{h=!1,N&&N()}});let A,k;const V=[];let K;function H(ne){i("updateSelection",ne);const Se=typeof ne=="function"?ne(I.selection):ne;Yt(Se,I.selection)||t(13,I={...I,selection:Se})}let I=lw({json:A,expand:W(A)}),M,G,q;function W(ne){return D_({json:ne},qy)?ia:Vc}let ae=!1,le=!1,Pe=!1,Ve="";async function Ae(ne){i("search text updated",ne),t(69,Ve=ne),await Pn(),await de()}async function ye(){t(14,M=M?Oq(M):void 0),await de()}async function Ne(){t(14,M=M?kq(M):void 0),await de()}async function xe(ne,Se){const Re=M==null?void 0:M.activeItem;if(i("handleReplace",{replacementText:Se,activeItem:Re}),!Re)return;const{operations:Be,newSelection:dt}=Tq(A,I,Se,Re);pn(Be,(Ot,yn)=>({state:{...yn,selection:dt}})),await Pn(),await de()}async function he(ne,Se){i("handleReplaceAll",{text:ne,replacementText:Se});const{operations:Re,newSelection:Be}=Pq(A,I,ne,Se);pn(Re,(dt,Ot)=>({state:{...Ot,selection:Be}})),await Pn(),await de()}function ve(){t(16,ae=!1),t(17,le=!1),Ae(""),Or()}async function de(){const ne=M==null?void 0:M.activeItem;if(i("focusActiveSearchResult",M),ne){const Se=ne.path;t(13,I={...Zp(A,I,Se),selection:void 0}),await Pn(),await lt(Se)}}function Ie(){if(Ve===""){i("clearing search result"),M!==void 0&&t(14,M=void 0);return}t(18,Pe=!0),setTimeout(()=>{i("searching...",Ve);const ne=AP(Ve,A,I,Fm);t(14,M=Eq(A,ne,M)),t(18,Pe=!1)})}function De(ne){i("select validation error",ne),H(hn(ne.path,!1)),lt(ne.path)}const He=sq({onChange:ne=>{t(19,Xe=ne)}});let Xe=He.getState();function mt(ne=()=>!0){i("expand");const Se={...I,expandedMap:{},visibleSectionsMap:{}};t(13,I=vi(A,Se,V,ne))}const be=uD(Ie,HA);let Z=!1,x=[],C;const O=yP(FV);function Y(ne,Se){const Re=Se?O(ne,Se):[];Yt(Re,x)||(i("validationErrors changed:",Re),t(9,x=Re))}function ie(){return i("validate"),K?{parseError:K,isRepairable:!1}:(Y(A,S),{validationErrors:x})}function pe(){return A}function ge(){return I}function Qe(ne){ne.json!==void 0&&J(ne.json),ne.text!==void 0&&se(ne.text)}function J(ne){if(ne===void 0)return;const Se=!Yt(A,ne);if(i("update external json",{isChanged:Se,currentlyText:A===void 0}),!Se)return;const Re=I,Be=A,dt=k,Ot=Z;t(7,A=ne),t(13,I=vi(A,I,V,W(A))),t(8,k=void 0),t(20,Z=!1),re(A),_e({previousJson:Be,previousState:Re,previousText:dt,previousTextIsRepaired:Ot})}function se(ne){if(ne===void 0||p.json!==void 0||ne===k)return;i("update external text");const Se=A,Re=I,Be=k,dt=Z;try{t(7,A=JSON.parse(ne)),t(13,I=vi(A,I,V,W(A))),t(8,k=ne),t(20,Z=!1),K=void 0,re(A)}catch(Ot){try{t(7,A=JSON.parse(Ho(ne))),t(13,I=vi(A,I,V,W(A))),t(8,k=ne),t(20,Z=!0),K=void 0,re(A)}catch{t(7,A=void 0),t(8,k=p.text),t(20,Z=!1),K=Z0(k,Ot.message||Ot.toString()),re(A)}}_e({previousJson:Se,previousState:Re,previousText:Be,previousTextIsRepaired:dt})}function re(ne){I.selection!==void 0&&(I.selection&&xs(ne,I.selection.anchorPath)&&xs(ne,I.selection.focusPath)||(i("clearing selection: path does not exist anymore",I.selection),t(13,I={...I,selection:void 0})))}function _e({previousJson:ne,previousState:Se,previousText:Re,previousTextIsRepaired:Be}){ne===void 0&&Re===void 0||(A!==void 0?ne!==void 0?He.add({undo:{patch:[{op:"replace",path:"",value:ne}],state:So(Se),json:void 0,text:Re,textIsRepaired:Be},redo:{patch:[{op:"replace",path:"",value:A}],state:So(I),json:void 0,text:k,textIsRepaired:Z}}):He.add({undo:{patch:void 0,json:void 0,text:Re,state:So(Se),textIsRepaired:Be},redo:{patch:void 0,json:A,state:So(I),text:k,textIsRepaired:Z}}):ne!==void 0&&He.add({undo:{patch:void 0,json:ne,state:So(Se),text:Re,textIsRepaired:Be},redo:{patch:void 0,json:void 0,text:k,textIsRepaired:Z,state:So(I)}}))}function Ce(){i("createDefaultSelection"),t(13,I={...I,selection:Rn(A||{},[],[])})}function We(ne,Se){if(i("patch",ne,Se),A===void 0)throw new Error("Cannot apply patch: no JSON");const Re=A,Be=I,dt=k,Ot=Z,yn=Cq(A,ne),Fn=tq(A,I,ne),Tn=Ha(A,ne),ta=gq(Fn.documentState,Tn,!1);i("patch updatedSelection",Tn);const na=typeof Se=="function"?Se(Fn.json,ta):void 0;t(7,A=na&&na.json!==void 0?na.json:Fn.json);const Ry=na&&na.state!==void 0?na.state:ta;return t(13,I=Ry),t(8,k=void 0),t(20,Z=!1),re(A),He.add({undo:{patch:yn,json:void 0,text:dt,state:So(Be),textIsRepaired:Ot},redo:{patch:ne,json:void 0,state:So(Ry),text:k,textIsRepaired:Z}}),{json:A,previousJson:Re,undo:yn,redo:ne}}function it(ne){return Wt(ne)||An(ne)||zt(ne)}function ct(){m||!I.selection||H(Jr(I.selection.focusPath,!0))}function ft(){m||!I.selection||H(hn(I.selection.focusPath,!0))}function vt(){if(m||!zt(I.selection))return;const ne=I.selection.focusPath,Se=Ge(ne),Re=tt(A,ne),Be=!Wu(Re,I.enforceStringMap,Se),dt=Be?String(Re):ju(String(Re));i("handleToggleEnforceString",{enforceString:Be,value:Re,updatedValue:dt}),pn([{op:"replace",path:Ge(ne),value:dt}],(Ot,yn)=>({state:$V(yn,Se,Be)}))}function Dt(){return Z&&A!==void 0&&Ay(A),{json:A,text:k}}async function ot(ne=!0){if(m||!it(I.selection))return;const Se=ne?E:null,Re=fw(A,I.selection,Se);if(Re==null)return;i("cut",{selection:I.selection,clipboard:Re,indent:ne});try{await navigator.clipboard.writeText(Re)}catch(Ot){P(Ot)}const{operations:Be,newSelection:dt}=gw(A,I.selection);pn(Be,(Ot,yn)=>({state:{...yn,selection:dt}}))}async function Ct(ne=!0){const Se=ne?E:null,Re=fw(A,I.selection,Se);if(Re!=null){i("copy",{clipboard:Re,indent:ne});try{await navigator.clipboard.writeText(Re)}catch(Be){P(Be)}}}function yt(ne){if(ne.preventDefault(),m)return;const Se=ne.clipboardData.getData("text/plain");try{we(Se)}catch{$e(Se,Be=>{i("repaired pasted text: ",Be),we(Be)})}}function Ut(){s(Dq,{},{...lh,styleWindow:{width:"450px"}},{onClose:()=>Or()})}function we(ne){if(A!==void 0){I.selection||Ce();const Se=mw(A,I.selection,ne);i("paste",{clipboardText:ne,operations:Se,selection:I.selection}),pn(Se,(Re,Be)=>{let dt=Be;return Se.filter(Ot=>(CO(Ot)||OO(Ot))&&qn(Ot.value)).forEach(Ot=>{const yn=Ei(A,Ot.path);dt=wo(Re,dt,yn)}),{state:dt}})}else i("paste text",{clipboardText:ne}),WI(ne,(Se,Re)=>{if(Se)return{state:wo(Se,Re,[])}})}function $e(ne,Se){s(zq,{text:ne,onParse:Q0,onRepair:mD,onApply:Se,onRenderMenu:F},{...lh,styleWindow:{width:"600px",height:"500px"},styleContent:{padding:0,height:"100%"}},{onClose:()=>Or()})}function Tt(){if(m||!I.selection)return;const ne=An(I.selection)||zt(I.selection)?Rn(A,I.selection.anchorPath,I.selection.focusPath):I.selection;if(gn(I.selection.focusPath))i("remove root",{selection:I.selection}),R({text:"",json:void 0},{text:k,json:A},{contentErrors:ie(),patchResult:null});else{const{operations:Se,newSelection:Re}=gw(A,ne);i("remove",{operations:Se,selection:I.selection,newSelection:Re}),pn(Se,(Be,dt)=>({state:{...dt,selection:Re}}))}}function Et(){if(m||!it(I.selection)||gn(I.selection.focusPath))return;i("duplicate",{selection:I.selection});const ne=_q(A,IP(I.selection));pn(ne)}function At(){if(m||!I.selection||!Wt(I.selection)&&!zt(I.selection)||gn(I.selection.focusPath))return;i("extract",{selection:I.selection});const ne=bq(A,I.selection);pn(ne,(Se,Re)=>{if(qn(Se))return{state:wo(Se,Re,[])}})}function jt(ne){if(m||!I.selection)return;const Se=Sq(A,I.selection,ne);if(A!==void 0){const Re=JSON.stringify(Se),Be=mw(A,I.selection,Re);i("handleInsert",{type:ne,operations:Be,newValue:Se,data:Re});const dt=St(Be.filter(Ot=>Ot.op==="add"||Ot.op==="replace"));pn(Be,(Ot,yn)=>{if(dt){const Fn=Ei(Ot,dt.path);if(qn(Se))return{state:{...vi(Ot,yn,Fn,Vc),selection:zi(Fn)}};if(Se===""){const Tn=gn(Fn)?null:tt(Ot,Vt(Fn));return i("test A",Fn,zi(Fn)),{state:Zp(Ot,{...I,selection:ir(Tn)?Jr(Fn,!0):hn(Fn,!0)},Fn)}}return}}),i("after patch"),dt&&Se===""&&Pn().then(()=>{setTimeout(()=>ri("",!0))})}else{i("handleInsert",{type:ne,newValue:Se});const Re=[];Ay(Se,(Be,dt)=>({state:{...wo(Be,dt,Re),selection:zi(Re)}}))}}function Qt(ne){An(I.selection)&&H(hn(I.selection.focusPath,!1)),jt(ne)}function kn(ne){if(!(m||!I.selection)){if(!Xf(I.selection)){P(new Error(`Cannot convert current selection to ${ne}`));return}try{const Se=I.selection.anchorPath,Re=tt(A,Se),Be=_D(Re,ne);if(Be===Re)return;const dt=[{op:"replace",path:Ge(Se),value:Be}];i("handleConvert",{selection:I.selection,path:Se,type:ne,operations:dt}),pn(dt,(Ot,yn)=>({state:wo(Ot,yn,I.selection.focusPath)}))}catch(Se){P(Se)}}}function It(){const ne=uw(A,I,!1),Se=Vt(I.selection.focusPath);!gn(ne.focusPath)&&Yt(Se,Vt(ne.focusPath))?H(mo(ne.focusPath)):H(zi(Se)),i("insert before",{selection:I.selection,selectionBefore:ne,parentPath:Se}),Pn().then(fc)}function Wn(){const ne=Wt(I.selection)?St(I.selection.paths):I.selection.focusPath;i("insert after",ne),H(mo(ne)),Pn().then(fc)}function ri(ne,Se){const Re=cu(g).document.activeElement;Re.isContentEditable&&(Re.textContent=Se?ne:Re.textContent+ne,mk(Re))}async function $t(ne){if(!(m||!I.selection)){if(An(I.selection)){const Se=!I.selection.edit;H({...I.selection,edit:!0}),await Pn(),setTimeout(()=>ri(ne,Se));return}if(ne==="{")jt("object");else if(ne==="[")jt("array");else if(zt(I.selection)){if(!qn(tt(A,I.selection.focusPath))){const Se=!I.selection.edit;H({...I.selection,edit:!0}),await Pn(),setTimeout(()=>ri(ne,Se))}}else await et(ne)}}async function et(ne){if(m||!I.selection)return;jt("value");const Se=!$l(I.selection),Re=I.selection.focusPath,Be=tt(A,Vt(Re));Array.isArray(Be)||!Be||zt(I.selection)?H(hn(Re,!0)):H(Jr(Re,!0)),await Pn(),setTimeout(()=>ri(ne,Se))}function _t(){if(m||!He.getState().canUndo)return;const ne=He.undo();if(!ne)return;const Se={json:A,text:k};t(7,A=ne.undo.patch?ks(A,ne.undo.patch):ne.undo.json),t(13,I=ne.undo.state),t(8,k=ne.undo.text),t(20,Z=ne.undo.textIsRepaired),i("undo",{item:ne,json:A,documentState:I});const Re={json:A,previousJson:Se.json,redo:ne.undo.patch,undo:ne.redo.patch};jr(Se,Re),Or(),I.selection&&lt(I.selection.focusPath,!1)}function Er(){if(m||!He.getState().canRedo)return;const ne=He.redo();if(!ne)return;const Se={json:A,text:k};t(7,A=ne.redo.patch?ks(A,ne.redo.patch):ne.redo.json),t(13,I=ne.redo.state),t(8,k=ne.redo.text),t(20,Z=ne.redo.textIsRepaired),i("redo",{item:ne,json:A,documentState:I});const Re={json:A,previousJson:Se.json,redo:ne.redo.patch,undo:ne.undo.patch};jr(Se,Re),Or(),I.selection&&lt(I.selection.focusPath,!1)}function Dr(ne){m||(Q=!0,L({id:a,json:A,selectedPath:ne,onSort:async Se=>{i("onSort",ne,Se),pn(Se,(Re,Be)=>({state:{...wo(Re,Be,ne),selection:hn(ne,!1)}}))},onClose:()=>{Q=!1,Or()}}))}function Ai(){if(!I.selection)return;const ne=cw(A,I.selection);Dr(ne)}function ea(){Dr([])}function pi({id:ne,selectedPath:Se,onTransform:Re,onClose:Be}){Q=!0,X({id:ne||l,json:A,selectedPath:Se,onTransform:Re?dt=>{Re({operations:dt,json:A,transformedJson:ks(A,dt)})}:dt=>{i("onTransform",Se,dt),pn(dt,(Ot,yn)=>({state:{...wo(Ot,yn,Se),selection:hn(Se,!1)}}))},onClose:()=>{Q=!1,Or(),Be&&Be()}})}function up(){if(!I.selection)return;const ne=cw(A,I.selection);pi({selectedPath:ne})}function ce(){pi({selectedPath:[]})}async function lt(ne,Se=!0){t(13,I=Zp(A,I,Vt(ne))),await Pn();const Re=qt(ne);if(Re){i("scrollTo",{path:ne,elem:Re,refContents:c});const Be=c.getBoundingClientRect(),dt=Re.getBoundingClientRect();if(!Se&&dt.bottom>Be.top&&dt.top<Be.bottom)return;const Ot=-(Be.height/4);v(Re,{container:c,offset:Ot,duration:qA})}}function qt(ne){return c?c.querySelector(`div[data-path="${sg(ne)}"]`):null}function Xn(ne){const Se=qt(ne);if(!Se||!c)return;const Re=c.getBoundingClientRect(),Be=Se.getBoundingClientRect(),dt=20,Ot=qn(tt(A,ne))?dt:Be.height;Be.top<Re.top+dt?v(Se,{container:c,offset:-dt,duration:0}):Be.top+Ot>Re.bottom-dt&&v(Se,{container:c,offset:-(Re.height-Ot-dt),duration:0})}function jr(ne,Se){k!==void 0?R({text:k,json:void 0},ne,{contentErrors:ie(),patchResult:Se}):A!==void 0&&R({text:void 0,json:A},ne,{contentErrors:ie(),patchResult:Se})}function pn(ne,Se){if(m)return;i("handlePatch",ne,Se);const Re={json:A,text:k},Be=We(ne,Se);return t(15,q=void 0),jr(Re,Be),Be}function Ay(ne,Se){const Re=I,Be=A,dt=k,Ot={json:A,text:k},yn=Z,Fn=vi(A,I,V,ia),Tn=typeof Se=="function"?Se(ne,Fn):void 0;t(7,A=Tn&&Tn.json!==void 0?Tn.json:ne),t(13,I=Tn&&Tn.state!==void 0?Tn.state:Fn),t(8,k=void 0),t(20,Z=!1),re(A),_e({previousJson:Be,previousState:Re,previousText:dt,previousTextIsRepaired:yn}),jr(Ot,null)}function WI(ne,Se){i("handleChangeText");const Re=I,Be=A,dt=k,Ot={json:A,text:k},yn=Z;try{t(7,A=JSON.parse(ne)),t(13,I=vi(A,I,V,ia)),t(8,k=void 0),t(20,Z=!1)}catch{try{t(7,A=JSON.parse(Ho(ne))),t(13,I=vi(A,I,V,ia)),t(8,k=ne),t(20,Z=!0)}catch{t(7,A=void 0),t(13,I=lw({json:A,expand:ia})),t(8,k=ne),t(20,Z=!1)}}if(typeof Se=="function"){const Tn=Se(A,I);t(7,A=Tn&&Tn.json?Tn.json:A),t(13,I=Tn&&Tn.state?Tn.state:I)}re(A),_e({previousJson:Be,previousState:Re,previousText:dt,previousTextIsRepaired:yn}),jr(Ot,null)}function wo(ne,Se,Re){const Be=tt(ne,Re),Ot=!D_({json:Be},qy)?Vc:ia;return vi(ne,Se,Re,Ot)}function cc(ne,Se,Re=!1){i("expand",{path:ne,expanded:Se,recursive:Re}),Se?Re?t(13,I=vi(A,I,ne,Vc)):t(13,I=XV(I,ne)):t(13,I=bP(I,ne)),I.selection&&!Se&&uq(I.selection,ne)&&H(void 0),setTimeout(()=>{og(g)||Or()})}function KI(){cc([],!0,!0)}function GI(){cc([],!1,!0)}function cp(ne){i("openFind",{findAndReplace:ne}),t(16,ae=!1),t(17,le=!1),Pn().then(()=>{t(16,ae=!0),t(17,le=ne)})}function YI(ne,Se){i("handleExpandSection",ne,Se);const Re=Ge(ne);t(13,I=eq(A,I,Re,Se))}function JI(ne){i("pasted json as text",ne),t(15,q=ne)}function QI(ne){const Se=nl(ne).replace(/^Command\+/,"Ctrl+"),Re=ne.shiftKey;if(Se==="Ctrl+X"&&(ne.preventDefault(),ot(!0)),Se==="Ctrl+Shift+X"&&(ne.preventDefault(),ot(!1)),Se==="Ctrl+C"&&(ne.preventDefault(),Ct(!0)),Se==="Ctrl+Shift+C"&&(ne.preventDefault(),Ct(!1)),Se==="Ctrl+D"&&(ne.preventDefault(),Et()),(Se==="Delete"||Se==="Backspace")&&(ne.preventDefault(),Tt()),Se==="Insert"&&(ne.preventDefault(),jt("structure")),Se==="Ctrl+A"&&(ne.preventDefault(),H(vq())),Se==="Ctrl+Q"&&fc(ne),Se==="Up"||Se==="Shift+Up"){ne.preventDefault();const Be=I.selection?uw(A,I,Re,!0)||I.selection:Fc(A,I);H(Be),Xn(Be.focusPath)}if(Se==="Down"||Se==="Shift+Down"){ne.preventDefault();const Be=I.selection?fq(A,I,Re,!0)||I.selection:Fc(A,I);H(Be),Xn(Be.focusPath)}if(Se==="Left"||Se==="Shift+Left"){ne.preventDefault();const Be=I.selection?dq(A,I,Re,!m)||I.selection:Fc(A,I);H(Be),Xn(Be.focusPath)}if(Se==="Right"||Se==="Shift+Right"){ne.preventDefault();const Be=I.selection?pq(A,I,Re,!m)||I.selection:Fc(A,I);H(Be),Xn(Be.focusPath)}if(Se==="Enter"&&I.selection){if(!m&&Wt(I.selection)&&I.selection.paths.length===1){const Be=I.selection.focusPath,dt=tt(A,Vt(Be));Array.isArray(dt)&&H(hn(Be,!1))}if(!m&&An(I.selection)&&(ne.preventDefault(),H({...I.selection,edit:!0})),zt(I.selection)){ne.preventDefault();const Be=tt(A,I.selection.focusPath);qn(Be)?cc(I.selection.focusPath,!0):m||H({...I.selection,edit:!0})}}if(Se.length===(Se.startsWith("Shift+")?7:1)&&I.selection){ne.preventDefault(),$t(ne.key);return}if(Se==="Enter"&&(Ci(I.selection)||Ln(I.selection))){ne.preventDefault(),$t("");return}if(Se==="Ctrl+Enter"&&zt(I.selection)){const Be=tt(A,I.selection.focusPath);L0(Be)&&window.open(String(Be),"_blank")}if(Se==="Escape"&&I.selection&&(ne.preventDefault(),H(void 0)),Se==="Ctrl+F"&&(ne.preventDefault(),cp(!1)),Se==="Ctrl+H"&&(ne.preventDefault(),cp(!0)),Se==="Ctrl+Z"){ne.preventDefault();const Be=document.activeElement;Be&&Be.blur&&Be.focus?(Be.blur(),setTimeout(()=>{_t(),setTimeout(()=>Be.select())})):_t()}if(Se==="Ctrl+Shift+Z"){ne.preventDefault();const Be=document.activeElement;Be&&Be.blur&&Be.focus?(Be.blur(),setTimeout(()=>{Er(),setTimeout(()=>Be.select())})):Er()}}function ZI(ne){i("handleMouseDown",ne),setTimeout(()=>{setTimeout(()=>{!h&&!pk(ne.target,"BUTTON")&&(Or(),!I.selection&&A===void 0&&(k===""||k===void 0)&&Ce())})})}function fl({anchor:ne,left:Se,top:Re,width:Be,height:dt,offsetTop:Ot,offsetLeft:yn,showTip:Fn}){const Tn={json:A,documentState:I,showTip:Fn,onEditKey:ct,onEditValue:ft,onToggleEnforceString:vt,onCut:ot,onCopy:Ct,onPaste:Ut,onRemove:Tt,onDuplicate:Et,onExtract:At,onInsertBefore:It,onInsert:Qt,onConvert:kn,onInsertAfter:Wn,onSort:Ai,onTransform:up,onCloseContextMenu(){f(ta),Or()}};Q=!0;const ta=u(nH,Tn,{left:Se,top:Re,offsetTop:Ot,offsetLeft:yn,width:Be,height:dt,anchor:ne,closeOnOuterClick:!0,onClose:()=>{Q=!1,Or()}})}function fc(ne){if(!(m||$l(I.selection))){if(ne&&(ne.stopPropagation(),ne.preventDefault()),ne&&ne.type==="contextmenu"&&ne.target!==d)fl({left:ne.clientX,top:ne.clientY,width:xl,height:Rl,showTip:!1});else{const Se=c==null?void 0:c.querySelector(".jse-context-menu-button.jse-selected");if(Se)fl({anchor:Se,offsetTop:2,width:xl,height:Rl,showTip:!1});else{const Re=c==null?void 0:c.getBoundingClientRect();Re&&fl({top:Re.top+2,left:Re.left+2,width:xl,height:Rl,showTip:!1})}}return!1}}function XI(ne){m||fl({anchor:xD(ne.target,"BUTTON"),offsetTop:0,width:xl,height:Rl,showTip:!0})}async function $I(){i("apply pasted json",q);const{path:ne,contents:Se}=q;H(hn(ne,!1)),await Pn();const Re=[{op:"replace",path:Ge(ne),value:Se}];pn(Re,(Be,dt)=>({state:wo(Be,dt,ne)}))}function eA(){i("clear pasted json"),t(15,q=void 0)}function tA(ne){H(ne),Or(),lt(ne.focusPath)}function Or(){i("focus"),d&&(d.focus(),d.select())}function nA(ne){!Bu(ne.target,Re=>Re===g)&&$l(I.selection)&&(i("click outside the editor, stop edit mode"),H(Re=>An(Re)?{...Re,edit:!1}:zt(Re)?{...Re,edit:!1}:Re),h&&d&&(d.focus(),d.blur()),Pn().then(()=>{setTimeout(()=>{d&&d.blur()})}))}function rA(ne){r&&r.onDrag(ne)}function iA(){r&&r.onDragEnd()}let fp;function oA(ne){ae=ne,t(16,ae)}function sA(ne){wt[ne?"unshift":"push"](()=>{d=ne,t(11,d)})}function aA(ne){wt[ne?"unshift":"push"](()=>{c=ne,t(6,c)})}function lA(ne){wt[ne?"unshift":"push"](()=>{g=ne,t(12,g)})}return n.$$set=ne=>{"readOnly"in ne&&t(0,m=ne.readOnly),"externalContent"in ne&&t(47,p=ne.externalContent),"mainMenuBar"in ne&&t(1,y=ne.mainMenuBar),"navigationBar"in ne&&t(2,b=ne.navigationBar),"escapeControlCharacters"in ne&&t(48,_=ne.escapeControlCharacters),"escapeUnicodeCharacters"in ne&&t(49,w=ne.escapeUnicodeCharacters),"validator"in ne&&t(50,S=ne.validator),"indentation"in ne&&t(51,E=ne.indentation),"onError"in ne&&t(52,P=ne.onError),"onChange"in ne&&t(53,R=ne.onChange),"onRenderValue"in ne&&t(54,j=ne.onRenderValue),"onRequestRepair"in ne&&t(3,U=ne.onRequestRepair),"onRenderMenu"in ne&&t(4,F=ne.onRenderMenu),"onClassName"in ne&&t(55,z=ne.onClassName),"onFocus"in ne&&t(56,D=ne.onFocus),"onBlur"in ne&&t(57,N=ne.onBlur),"onSortModal"in ne&&t(58,L=ne.onSortModal),"onTransformModal"in ne&&t(59,X=ne.onTransformModal)},n.$$.update=()=>{n.$$.dirty[1]&393216&&t(68,G=uk({escapeControlCharacters:_,escapeUnicodeCharacters:w})),n.$$.dirty[1]&65536&&Qe(p),n.$$.dirty[0]&128|n.$$.dirty[2]&128&&be(Ve,A),n.$$.dirty[0]&384,n.$$.dirty[0]&128|n.$$.dirty[1]&524288&&Y(A,S),n.$$.dirty[0]&512&&t(21,C=BV(x)),n.$$.dirty[0]&64&&(r=c?GV(c):void 0),n.$$.dirty[0]&1|n.$$.dirty[1]&25165824|n.$$.dirty[2]&64&&t(10,fp={readOnly:m,normalization:G,getJson:pe,getDocumentState:ge,findElement:qt,focus:Or,onPatch:pn,onInsert:jt,onExpand:cc,onSelect:H,onFind:cp,onExpandSection:YI,onPasteJson:JI,onRenderValue:j,onContextMenu:fl,onClassName:z||(()=>{}),onDrag:rA,onDragEnd:iA}),n.$$.dirty[0]&1024&&i("context changed",fp)},[m,y,b,U,F,Dt,c,A,k,x,fp,d,g,I,M,q,ae,le,Pe,Xe,Z,C,o,V,Ae,ye,Ne,xe,he,ve,De,Ct,yt,_t,Er,ea,ce,KI,GI,QI,ZI,fc,XI,$I,eA,tA,nA,p,_,w,S,E,P,R,j,z,D,N,L,X,mt,ie,pe,We,pi,lt,qt,Or,G,Ve,oA,sA,aA,lA]}class zv extends rt{constructor(e){super(),nt(this,e,Nz,xz,Nt,{readOnly:0,externalContent:47,mainMenuBar:1,navigationBar:2,escapeControlCharacters:48,escapeUnicodeCharacters:49,validator:50,indentation:51,onError:52,onChange:53,onRenderValue:54,onRequestRepair:3,onRenderMenu:4,onClassName:55,onFocus:56,onBlur:57,onSortModal:58,onTransformModal:59,expand:60,validate:61,getJson:62,patch:63,acceptAutoRepair:5,openTransformModal:64,scrollTo:65,findElement:66,focus:67},null,[-1,-1,-1,-1,-1])}get expand(){return this.$$.ctx[60]}get validate(){return this.$$.ctx[61]}get getJson(){return this.$$.ctx[62]}get patch(){return this.$$.ctx[63]}get acceptAutoRepair(){return this.$$.ctx[5]}get openTransformModal(){return this.$$.ctx[64]}get scrollTo(){return this.$$.ctx[65]}get findElement(){return this.$$.ctx[66]}get focus(){return this.$$.ctx[67]}}const Mz=`
<p>
  Enter a JavaScript function to filter, sort, or transform the data.
</p>
`,Dz={id:"javascript",name:"JavaScript",description:Mz,createQuery:jz,executeQuery:Lz};function jz(n,e){const{filter:t,sort:r,projection:i}=e,o=[];if(t&&t.path&&t.relation&&t.value){const s=`item => item${ls(t.path)}`,a=typeof aq(t.value)=="string"?`'${t.value}'`:t.value;o.push(`  data = data.filter(${s} ${t.relation} ${a})
`)}if(r&&r.path&&r.direction&&(r.direction==="desc"?o.push(`  data = data.slice().sort((a, b) => {
    // sort descending
    const valueA = a${ls(r.path)}
    const valueB = b${ls(r.path)}
    return valueA > valueB ? -1 : valueA < valueB ? 1 : 0
  })
`):o.push(`  data = data.slice().sort((a, b) => {
    // sort ascending
    const valueA = a${ls(r.path)}
    const valueB = b${ls(r.path)}
    return valueA > valueB ? 1 : valueA < valueB ? -1 : 0
  })
`)),i&&i.paths)if(i.paths.length>1){const s=i.paths.map(a=>{const l=a[a.length-1]||"item",u=`item${ls(a)}`;return`    ${JSON.stringify(l)}: ${u}`});o.push(`  data = data.map(item => ({
${s.join(`,
`)}})
  )
`)}else{const s=`item${ls(i.paths[0])}`;o.push(`  data = data.map(item => ${s})
`)}return o.push(`  return data
`),`function query (data) {
${o.join("")}}`}function Lz(n,e){const r=new Function(`"use strict";

`+e+`

if (typeof query !== "function") {
  throw new Error("Cannot execute query: expecting a function named 'query' but is undefined")
}

return query;
`)()(n);return r!==void 0?r:null}function Bz(n){let e,t,r,i,o,s;return t=new kt({props:{data:n[0]===!0?Xh:Zh}}),{c(){e=ee("div"),ke(t.$$.fragment),T(e,"class","jse-boolean-toggle svelte-zs5o25"),T(e,"title",r=n[1]?`Boolean value ${n[0]}`:"Click to toggle this boolean value")},m(a,l){fe(a,e,l),Ee(t,e,null),i=!0,o||(s=Te(e,"mousedown",n[2]),o=!0)},p(a,[l]){const u={};l&1&&(u.data=a[0]===!0?Xh:Zh),t.$set(u),(!i||l&3&&r!==(r=a[1]?`Boolean value ${a[0]}`:"Click to toggle this boolean value"))&&T(e,"title",r)},i(a){i||($(t.$$.fragment,a),i=!0)},o(a){te(t.$$.fragment,a),i=!1},d(a){a&&ue(e),Oe(t),o=!1,s()}}}function Fz(n,e,t){let{path:r}=e,{value:i}=e,{readOnly:o}=e,{onPatch:s}=e,{focus:a}=e;function l(u){u.stopPropagation(),!o&&(s([{op:"replace",path:Ge(r),value:!i}]),setTimeout(a))}return n.$$set=u=>{"path"in u&&t(3,r=u.path),"value"in u&&t(0,i=u.value),"readOnly"in u&&t(1,o=u.readOnly),"onPatch"in u&&t(4,s=u.onPatch),"focus"in u&&t(5,a=u.focus)},[i,o,l,r,s,a]}class Uz extends rt{constructor(e){super(),nt(this,e,Fz,Bz,Nt,{path:3,value:0,readOnly:1,onPatch:4,focus:5})}}const Vz="modulepreload",qz=function(n){return"/"+n},OS={},Hz=function(e,t,r){return!t||t.length===0?e():Promise.all(t.map(i=>{if(i=qz(i),i in OS)return;OS[i]=!0;const o=i.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":Vz,o||(a.as="script",a.crossOrigin=""),a.href=i,document.head.appendChild(a),o)return new Promise((l,u)=>{a.addEventListener("load",l),a.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e())};function zz(n){let e;return{c(){e=ee("div"),T(e,"class","jse-color-picker-popup svelte-1las40j")},m(t,r){fe(t,e,r),n[4](e)},p:Me,i:Me,o:Me,d(t){t&&ue(e),n[4](null)}}}function Wz(n,e,t){let{color:r}=e,{onChange:i}=e,{showOnTop:o}=e,s,a;Nr(async()=>{const u=(await Hz(()=>import("./vanilla-picker.bc2093b3.js"),[])).default;a=new u({parent:s,color:r,popup:o?"top":"bottom",onDone(f){const d=f.rgba[3]===1?f.hex.substring(0,7):f.hex;i(d)}}),a.show()}),ho(()=>{a&&a.destroy()});function l(u){wt[u?"unshift":"push"](()=>{s=u,t(0,s)})}return n.$$set=u=>{"color"in u&&t(1,r=u.color),"onChange"in u&&t(2,i=u.onChange),"showOnTop"in u&&t(3,o=u.showOnTop)},[s,r,i,o,l]}class Kz extends rt{constructor(e){super(),nt(this,e,Wz,zz,Xt,{color:1,onChange:2,showOnTop:3})}}function Gz(n){let e,t,r,i;return{c(){e=ee("button"),T(e,"class","jse-color-picker-button svelte-fk1u9y"),oi(e,"background",n[2]),T(e,"title",t=n[1]?`Color ${n[0]}`:"Click to open a color picker")},m(o,s){fe(o,e,s),r||(i=Te(e,"click",n[3]),r=!0)},p(o,[s]){s&4&&oi(e,"background",o[2]),s&3&&t!==(t=o[1]?`Color ${o[0]}`:"Click to open a color picker")&&T(e,"title",t)},i:Me,o:Me,d(o){o&&ue(e),r=!1,i()}}}function Yz(n,e,t){let r;const{openAbsolutePopup:i}=ur("absolute-popup");let{path:o}=e,{value:s}=e,{readOnly:a}=e,{onPatch:l}=e,{focus:u}=e;function f(g){l([{op:"replace",path:Ge(o),value:g}]),c()}function c(){u()}function d(g){if(a)return;const h=300,v=g.target.getBoundingClientRect().top,p=cu(g.target).innerHeight-v<h&&v>h;i(Kz,{color:s,onChange:f,showOnTop:p},{anchor:g.target,closeOnOuterClick:!0,onClose:c,offsetTop:18,offsetLeft:-8,height:h})}return n.$$set=g=>{"path"in g&&t(4,o=g.path),"value"in g&&t(0,s=g.value),"readOnly"in g&&t(1,a=g.readOnly),"onPatch"in g&&t(5,l=g.onPatch),"focus"in g&&t(6,u=g.focus)},n.$$.update=()=>{n.$$.dirty&1&&t(2,r=PO(s))},[s,a,r,d,o,l,u]}class Jz extends rt{constructor(e){super(),nt(this,e,Yz,Gz,Nt,{path:4,value:0,readOnly:1,onPatch:5,focus:6})}}function n0(n){const e=j0(n);return za("jse-value","jse-"+e,{"jse-url":L0(n),"jse-empty":typeof n=="string"&&n.length===0})}function Qz(n){let e,t;return e=new MP({props:{value:n[1].escapeValue(n[0]),onChange:n[3],onCancel:n[4],onPaste:n[5],onFind:n[2],onValueClass:n[6]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,[i]){const o={};i&3&&(o.value=r[1].escapeValue(r[0])),i&4&&(o.onFind=r[2]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Zz(n,e,t){let{path:r}=e,{value:i}=e,{normalization:o}=e,{enforceString:s}=e,{onPatch:a}=e,{onPasteJson:l}=e,{onSelect:u}=e,{onFind:f}=e,{focus:c}=e;function d(p){return s?p:ju(p)}function g(p,y){a([{op:"replace",path:Ge(r),value:d(o.unescapeValue(p))}],(b,_)=>{const w=y===Os.NEXT_INSIDE?hq(b,_,r)||_.selection:hn(r,!1);return{state:{..._,selection:w}}}),y!==Os.SELF&&c()}function h(){u(hn(r,!1)),c()}function v(p){try{const y=JSON.parse(p);qn(y)&&l({path:r,contents:y})}catch{}}function m(p){return n0(d(o.unescapeValue(p)))}return n.$$set=p=>{"path"in p&&t(7,r=p.path),"value"in p&&t(0,i=p.value),"normalization"in p&&t(1,o=p.normalization),"enforceString"in p&&t(8,s=p.enforceString),"onPatch"in p&&t(9,a=p.onPatch),"onPasteJson"in p&&t(10,l=p.onPasteJson),"onSelect"in p&&t(11,u=p.onSelect),"onFind"in p&&t(2,f=p.onFind),"focus"in p&&t(12,c=p.focus)},[i,o,f,g,h,v,m,r,s,a,l,u,c]}class Xz extends rt{constructor(e){super(),nt(this,e,Zz,Qz,Nt,{path:7,value:0,normalization:1,enforceString:8,onPatch:9,onPasteJson:10,onSelect:11,onFind:2,focus:12})}}function $z(n){let e=js(n[1].escapeValue(n[0]))+"",t;return{c(){t=qe(e)},m(r,i){fe(r,t,i)},p(r,i){i&3&&e!==(e=js(r[1].escapeValue(r[0]))+"")&&bt(t,e)},i:Me,o:Me,d(r){r&&ue(t)}}}function eW(n){let e,t;return e=new NP({props:{text:n[1].escapeValue(n[0]),searchResultItems:n[2]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i&3&&(o.text=r[1].escapeValue(r[0])),i&4&&(o.searchResultItems=r[2]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function tW(n){let e,t,r,i,o,s,a,l;const u=[eW,$z],f=[];function c(d,g){return d[2]?0:1}return t=c(n),r=f[t]=u[t](n),{c(){e=ee("div"),r.c(),T(e,"data-type","selectable-value"),T(e,"class",i=Yn(n0(n[0]))+" svelte-wuf5jd"),T(e,"title",o=n[3]?"Ctrl+Click or Ctrl+Enter to open url in new window":null)},m(d,g){fe(d,e,g),f[t].m(e,null),s=!0,a||(l=[Te(e,"click",n[4]),Te(e,"dblclick",n[5])],a=!0)},p(d,[g]){let h=t;t=c(d),t===h?f[t].p(d,g):(Fe(),te(f[h],1,1,()=>{f[h]=null}),Ue(),r=f[t],r?r.p(d,g):(r=f[t]=u[t](d),r.c()),$(r,1),r.m(e,null)),(!s||g&1&&i!==(i=Yn(n0(d[0]))+" svelte-wuf5jd"))&&T(e,"class",i),(!s||g&8&&o!==(o=d[3]?"Ctrl+Click or Ctrl+Enter to open url in new window":null))&&T(e,"title",o)},i(d){s||($(r),s=!0)},o(d){te(r),s=!1},d(d){d&&ue(e),f[t].d(),a=!1,on(l)}}}function nW(n,e,t){let r,{path:i}=e,{value:o}=e,{readOnly:s}=e,{normalization:a}=e,{onSelect:l}=e,{searchResultItems:u}=e;function f(d){typeof o=="string"&&r&&d.ctrlKey&&(d.preventDefault(),d.stopPropagation(),window.open(o,"_blank"))}function c(d){s||(d.preventDefault(),l(hn(i,!0)))}return n.$$set=d=>{"path"in d&&t(6,i=d.path),"value"in d&&t(0,o=d.value),"readOnly"in d&&t(7,s=d.readOnly),"normalization"in d&&t(1,a=d.normalization),"onSelect"in d&&t(8,l=d.onSelect),"searchResultItems"in d&&t(2,u=d.searchResultItems)},n.$$.update=()=>{n.$$.dirty&1&&t(3,r=L0(o))},[o,a,u,r,f,c,i,s,l]}class rW extends rt{constructor(e){super(),nt(this,e,nW,tW,Nt,{path:6,value:0,readOnly:7,normalization:1,onSelect:8,searchResultItems:2})}}function iW(n){let e,t,r,i,o,s;return t=new kt({props:{data:Yq}}),{c(){e=ee("div"),ke(t.$$.fragment),T(e,"class","jse-timestamp svelte-1u00zub")},m(a,l){fe(a,e,l),Ee(t,e,null),i=!0,o||(s=xu(r=DP.call(null,e,{text:n[0],...n[1]})),o=!0)},p(a,[l]){r&&li(r.update)&&l&1&&r.update.call(null,{text:a[0],...a[1]})},i(a){i||($(t.$$.fragment,a),i=!0)},o(a){te(t.$$.fragment,a),i=!1},d(a){a&&ue(e),Oe(t),o=!1,s()}}}function oW(n,e,t){let r;const i=ur("absolute-popup");let{value:o}=e;return n.$$set=s=>{"value"in s&&t(2,o=s.value)},n.$$.update=()=>{n.$$.dirty&4&&t(0,r=`Time: ${new Date(o).toString()}`)},[r,i,o]}class sW extends rt{constructor(e){super(),nt(this,e,oW,iW,Nt,{value:2})}}function aW({path:n,value:e,readOnly:t,enforceString:r,searchResultItems:i,isEditing:o,normalization:s,onPatch:a,onPasteJson:l,onSelect:u,onFind:f,focus:c}){const d=[];return!o&&QR(e)&&d.push({component:Uz,props:{path:n,value:e,readOnly:t,onPatch:a,focus:c}}),!o&&XR(e)&&d.push({component:Jz,props:{path:n,value:e,readOnly:t,onPatch:a,focus:c}}),o&&d.push({component:Xz,props:{path:n,value:e,enforceString:r,normalization:s,onPatch:a,onPasteJson:l,onSelect:u,onFind:f,focus:c}}),o||d.push({component:rW,props:{path:n,value:e,readOnly:t,normalization:s,searchResultItems:i,onSelect:u}}),!o&&ZR(e)&&d.push({component:sW,props:{value:e}}),d}const gi={};function lW(n,e){const t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i={};return i.top=t.top<0,i.left=t.left<0,i.bottom=t.bottom+r.height>(window.innerHeight||document.documentElement.clientHeight),i.right=t.right>(window.innerWidth||document.documentElement.clientWidth),i.any=i.top||i.left||i.bottom||i.right,i}function uW(n){let e,t=n[0](n[1],n[2])+"",r;return{c(){e=ee("div"),T(e,"class",r="item "+n[3]+" svelte-3e0qet")},m(i,o){fe(i,e,o),e.innerHTML=t},p(i,[o]){o&7&&t!==(t=i[0](i[1],i[2])+"")&&(e.innerHTML=t),o&8&&r!==(r="item "+i[3]+" svelte-3e0qet")&&T(e,"class",r)},i:Me,o:Me,d(i){i&&ue(e)}}}function cW(n,e,t){let{isActive:r=!1}=e,{isFirst:i=!1}=e,{isHover:o=!1}=e,{isSelectable:s=!1}=e,{getOptionLabel:a=void 0}=e,{item:l=void 0}=e,{filterText:u=""}=e,f="";return n.$$set=c=>{"isActive"in c&&t(4,r=c.isActive),"isFirst"in c&&t(5,i=c.isFirst),"isHover"in c&&t(6,o=c.isHover),"isSelectable"in c&&t(7,s=c.isSelectable),"getOptionLabel"in c&&t(0,a=c.getOptionLabel),"item"in c&&t(1,l=c.item),"filterText"in c&&t(2,u=c.filterText)},n.$$.update=()=>{if(n.$$.dirty&242){const c=[];r&&c.push("active"),i&&c.push("first"),o&&c.push("hover"),l.isGroupHeader&&c.push("groupHeader"),l.isGroupItem&&c.push("groupItem"),s||c.push("notSelectable"),t(3,f=c.join(" "))}},[a,l,u,f,r,i,o,s]}class BP extends rt{constructor(e){super(),nt(this,e,cW,uW,Xt,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}function kS(n,e,t){const r=n.slice();return r[41]=e[t],r[42]=t,r}function fW(n){let e,t,r=n[1],i=[];for(let a=0;a<r.length;a+=1)i[a]=IS(kS(n,r,a));const o=a=>te(i[a],1,1,()=>{i[a]=null});let s=null;return r.length||(s=TS(n)),{c(){for(let a=0;a<i.length;a+=1)i[a].c();e=xt(),s&&s.c()},m(a,l){for(let u=0;u<i.length;u+=1)i[u].m(a,l);fe(a,e,l),s&&s.m(a,l),t=!0},p(a,l){if(l[0]&114390){r=a[1];let u;for(u=0;u<r.length;u+=1){const f=kS(a,r,u);i[u]?(i[u].p(f,l),$(i[u],1)):(i[u]=IS(f),i[u].c(),$(i[u],1),i[u].m(e.parentNode,e))}for(Fe(),u=r.length;u<i.length;u+=1)o(u);Ue(),!r.length&&s?s.p(a,l):r.length?s&&(s.d(1),s=null):(s=TS(a),s.c(),s.m(e.parentNode,e))}},i(a){if(!t){for(let l=0;l<r.length;l+=1)$(i[l]);t=!0}},o(a){i=i.filter(Boolean);for(let l=0;l<i.length;l+=1)te(i[l]);t=!1},d(a){xn(i,a),a&&ue(e),s&&s.d(a)}}}function hW(n){let e,t,r;var i=n[3];function o(s){return{props:{items:s[1],itemHeight:s[8],$$slots:{default:[mW,({item:a,i:l})=>({41:a,42:l}),({item:a,i:l})=>[0,(a?1024:0)|(l?2048:0)]]},$$scope:{ctx:s}}}}return i&&(e=new i(o(n))),{c(){e&&ke(e.$$.fragment),t=xt()},m(s,a){e&&Ee(e,s,a),fe(s,t,a),r=!0},p(s,a){const l={};if(a[0]&2&&(l.items=s[1]),a[0]&256&&(l.itemHeight=s[8]),a[0]&9814|a[1]&11264&&(l.$$scope={dirty:a,ctx:s}),i!==(i=s[3])){if(e){Fe();const u=e;te(u.$$.fragment,1,0,()=>{Oe(u,1)}),Ue()}i?(e=new i(o(s)),ke(e.$$.fragment),$(e.$$.fragment,1),Ee(e,t.parentNode,t)):e=null}else i&&e.$set(l)},i(s){r||(e&&$(e.$$.fragment,s),r=!0)},o(s){e&&te(e.$$.fragment,s),r=!1},d(s){s&&ue(t),e&&Oe(e,s)}}}function TS(n){let e,t=!n[11]&&PS(n);return{c(){t&&t.c(),e=xt()},m(r,i){t&&t.m(r,i),fe(r,e,i)},p(r,i){r[11]?t&&(t.d(1),t=null):t?t.p(r,i):(t=PS(r),t.c(),t.m(e.parentNode,e))},d(r){t&&t.d(r),r&&ue(e)}}}function PS(n){let e,t;return{c(){e=ee("div"),t=qe(n[12]),T(e,"class","empty svelte-1uyqfml")},m(r,i){fe(r,e,i),B(e,t)},p(r,i){i[0]&4096&&bt(t,r[12])},d(r){r&&ue(e)}}}function dW(n){let e,t,r,i,o,s;var a=n[4];function l(d){return{props:{item:d[41],filterText:d[13],getOptionLabel:d[6],isFirst:r0(d[42]),isActive:$h(d[41],d[9],d[10]),isHover:ed(d[2],d[41],d[42],d[1]),isSelectable:Vs(d[41])}}}a&&(t=new a(l(n)));function u(){return n[29](n[42])}function f(){return n[30](n[42])}function c(...d){return n[31](n[41],n[42],...d)}return{c(){e=ee("div"),t&&ke(t.$$.fragment),r=me(),T(e,"class","listItem"),T(e,"tabindex","-1")},m(d,g){fe(d,e,g),t&&Ee(t,e,null),B(e,r),i=!0,o||(s=[Te(e,"mouseover",u),Te(e,"focus",f),Te(e,"click",c)],o=!0)},p(d,g){n=d;const h={};if(g[0]&2&&(h.item=n[41]),g[0]&8192&&(h.filterText=n[13]),g[0]&64&&(h.getOptionLabel=n[6]),g[0]&1538&&(h.isActive=$h(n[41],n[9],n[10])),g[0]&6&&(h.isHover=ed(n[2],n[41],n[42],n[1])),g[0]&2&&(h.isSelectable=Vs(n[41])),a!==(a=n[4])){if(t){Fe();const v=t;te(v.$$.fragment,1,0,()=>{Oe(v,1)}),Ue()}a?(t=new a(l(n)),ke(t.$$.fragment),$(t.$$.fragment,1),Ee(t,e,r)):t=null}else a&&t.$set(h)},i(d){i||(t&&$(t.$$.fragment,d),i=!0)},o(d){t&&te(t.$$.fragment,d),i=!1},d(d){d&&ue(e),t&&Oe(t),o=!1,on(s)}}}function pW(n){let e,t=n[7](n[41])+"",r;return{c(){e=ee("div"),r=qe(t),T(e,"class","listGroupTitle svelte-1uyqfml")},m(i,o){fe(i,e,o),B(e,r)},p(i,o){o[0]&130&&t!==(t=i[7](i[41])+"")&&bt(r,t)},i:Me,o:Me,d(i){i&&ue(e)}}}function IS(n){let e,t,r,i;const o=[pW,dW],s=[];function a(l,u){return l[41].isGroupHeader&&!l[41].isSelectable?0:1}return e=a(n),t=s[e]=o[e](n),{c(){t.c(),r=xt()},m(l,u){s[e].m(l,u),fe(l,r,u),i=!0},p(l,u){let f=e;e=a(l),e===f?s[e].p(l,u):(Fe(),te(s[f],1,1,()=>{s[f]=null}),Ue(),t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),$(t,1),t.m(r.parentNode,r))},i(l){i||($(t),i=!0)},o(l){te(t),i=!1},d(l){s[e].d(l),l&&ue(r)}}}function mW(n){let e,t,r,i,o;var s=n[4];function a(c){return{props:{item:c[41],filterText:c[13],getOptionLabel:c[6],isFirst:r0(c[42]),isActive:$h(c[41],c[9],c[10]),isHover:ed(c[2],c[41],c[42],c[1]),isSelectable:Vs(c[41])}}}s&&(t=new s(a(n)));function l(){return n[26](n[42])}function u(){return n[27](n[42])}function f(...c){return n[28](n[41],n[42],...c)}return{c(){e=ee("div"),t&&ke(t.$$.fragment),T(e,"class","listItem")},m(c,d){fe(c,e,d),t&&Ee(t,e,null),r=!0,i||(o=[Te(e,"mouseover",l),Te(e,"focus",u),Te(e,"click",f)],i=!0)},p(c,d){n=c;const g={};if(d[1]&1024&&(g.item=n[41]),d[0]&8192&&(g.filterText=n[13]),d[0]&64&&(g.getOptionLabel=n[6]),d[1]&2048&&(g.isFirst=r0(n[42])),d[0]&1536|d[1]&1024&&(g.isActive=$h(n[41],n[9],n[10])),d[0]&6|d[1]&3072&&(g.isHover=ed(n[2],n[41],n[42],n[1])),d[1]&1024&&(g.isSelectable=Vs(n[41])),s!==(s=n[4])){if(t){Fe();const h=t;te(h.$$.fragment,1,0,()=>{Oe(h,1)}),Ue()}s?(t=new s(a(n)),ke(t.$$.fragment),$(t.$$.fragment,1),Ee(t,e,null)):t=null}else s&&t.$set(g)},i(c){r||(t&&$(t.$$.fragment,c),r=!0)},o(c){t&&te(t.$$.fragment,c),r=!1},d(c){c&&ue(e),t&&Oe(t),i=!1,on(o)}}}function gW(n){let e,t,r,i,o,s;const a=[hW,fW],l=[];function u(f,c){return f[5]?0:1}return t=u(n),r=l[t]=a[t](n),{c(){e=ee("div"),r.c(),T(e,"class","listContainer svelte-1uyqfml"),T(e,"style",n[14]),ze(e,"virtualList",n[5])},m(f,c){fe(f,e,c),l[t].m(e,null),n[32](e),i=!0,o||(s=[Te(window,"keydown",n[17]),Te(window,"resize",n[18])],o=!0)},p(f,c){let d=t;t=u(f),t===d?l[t].p(f,c):(Fe(),te(l[d],1,1,()=>{l[d]=null}),Ue(),r=l[t],r?r.p(f,c):(r=l[t]=a[t](f),r.c()),$(r,1),r.m(e,null)),(!i||c[0]&16384)&&T(e,"style",f[14]),c[0]&32&&ze(e,"virtualList",f[5])},i(f){i||($(r),i=!0)},o(f){te(r),i=!1},d(f){f&&ue(e),l[t].d(),n[32](null),o=!1,on(s)}}}function $h(n,e,t){return e&&e[t]===n[t]}function r0(n){return n===0}function ed(n,e,t,r){return Vs(e)&&(n===t||r.length===1)}function Vs(n){return n.isGroupHeader&&n.isSelectable||n.selectable||!n.hasOwnProperty("selectable")}function vW(n,e,t){const r=hd();let{container:i=void 0}=e,{VirtualList:o=null}=e,{Item:s=BP}=e,{isVirtualList:a=!1}=e,{items:l=[]}=e,{labelIdentifier:u="label"}=e,{getOptionLabel:f=(W,ae)=>{if(W)return W.isCreator?`Create "${ae}"`:W[u]}}=e,{getGroupHeaderLabel:c=null}=e,{itemHeight:d=40}=e,{hoverItemIndex:g=0}=e,{value:h=void 0}=e,{optionIdentifier:v="value"}=e,{hideEmptyState:m=!1}=e,{noOptionsMessage:p="No options"}=e,{isMulti:y=!1}=e,{activeItemIndex:b=0}=e,{filterText:_=""}=e,{parent:w=null}=e,{listPlacement:S=null}=e,{listAutoWidth:E=null}=e,{listOffset:P=5}=e,R=0,j=!1,U;Nr(()=>{if(l.length>0&&!y&&h){const W=l.findIndex(ae=>ae[v]===h[v]);W&&t(2,g=W)}Q("active"),i.addEventListener("scroll",()=>{clearTimeout(R),R=setTimeout(()=>{j=!1},100)},!1)}),aO(()=>{l||t(1,l=[]),l!==U&&l.length>0&&t(2,g=0),U=l});function F(W){W.isCreator||r("itemSelected",W)}function z(W){j||t(2,g=W)}function D(W){const{item:ae,i:le,event:Pe}=W;if(Pe.stopPropagation(),h&&!y&&h[v]===ae[v])return N();ae.isCreator?r("itemCreated",_):Vs(ae)&&(t(19,b=le),t(2,g=le),F(ae))}function N(){r("closeList")}async function L(W){if(a)return;let ae=!0;for(;ae;)W>0&&g===l.length-1?t(2,g=0):W<0&&g===0?t(2,g=l.length-1):t(2,g=g+W),ae=!Vs(l[g]);await Pn(),Q("hover")}function X(W){switch(W.key){case"Escape":W.preventDefault(),N();break;case"ArrowDown":W.preventDefault(),l.length&&L(1);break;case"ArrowUp":W.preventDefault(),l.length&&L(-1);break;case"Enter":if(W.preventDefault(),l.length===0)break;const ae=l[g];if(h&&!y&&h[v]===ae[v]){N();break}ae.isCreator?r("itemCreated",_):(t(19,b=g),F(l[g]));break;case"Tab":if(W.preventDefault(),l.length===0||h&&h[v]===l[g][v])return N();t(19,b=g),F(l[g]);break}}function Q(W){if(a||!i)return;let ae;const le=i.querySelector(`.listItem .${W}`);le&&(ae=i.getBoundingClientRect().bottom-le.getBoundingClientRect().bottom),t(0,i.scrollTop-=ae,i)}let A;function k(){const{height:W,width:ae}=w.getBoundingClientRect();t(14,A=""),t(14,A+=`min-width:${ae}px;width:${E?"auto":"100%"};`),S==="top"||S==="auto"&&lW(w,i).bottom?t(14,A+=`bottom:${W+P}px;`):t(14,A+=`top:${W+P}px;`)}const V=W=>z(W),K=W=>z(W),H=(W,ae,le)=>D({item:W,i:ae,event:le}),I=W=>z(W),M=W=>z(W),G=(W,ae,le)=>D({item:W,i:ae,event:le});function q(W){wt[W?"unshift":"push"](()=>{i=W,t(0,i)})}return n.$$set=W=>{"container"in W&&t(0,i=W.container),"VirtualList"in W&&t(3,o=W.VirtualList),"Item"in W&&t(4,s=W.Item),"isVirtualList"in W&&t(5,a=W.isVirtualList),"items"in W&&t(1,l=W.items),"labelIdentifier"in W&&t(20,u=W.labelIdentifier),"getOptionLabel"in W&&t(6,f=W.getOptionLabel),"getGroupHeaderLabel"in W&&t(7,c=W.getGroupHeaderLabel),"itemHeight"in W&&t(8,d=W.itemHeight),"hoverItemIndex"in W&&t(2,g=W.hoverItemIndex),"value"in W&&t(9,h=W.value),"optionIdentifier"in W&&t(10,v=W.optionIdentifier),"hideEmptyState"in W&&t(11,m=W.hideEmptyState),"noOptionsMessage"in W&&t(12,p=W.noOptionsMessage),"isMulti"in W&&t(21,y=W.isMulti),"activeItemIndex"in W&&t(19,b=W.activeItemIndex),"filterText"in W&&t(13,_=W.filterText),"parent"in W&&t(22,w=W.parent),"listPlacement"in W&&t(23,S=W.listPlacement),"listAutoWidth"in W&&t(24,E=W.listAutoWidth),"listOffset"in W&&t(25,P=W.listOffset)},n.$$.update=()=>{n.$$.dirty[0]&4194305&&w&&i&&k()},[i,l,g,o,s,a,f,c,d,h,v,m,p,_,A,z,D,X,k,b,u,y,w,S,E,P,V,K,H,I,M,G,q]}class yW extends rt{constructor(e){super(),nt(this,e,vW,gW,Xt,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}}function _W(n){let e,t=n[0](n[1])+"";return{c(){e=ee("div"),T(e,"class","selection svelte-pu1q1n")},m(r,i){fe(r,e,i),e.innerHTML=t},p(r,[i]){i&3&&t!==(t=r[0](r[1])+"")&&(e.innerHTML=t)},i:Me,o:Me,d(r){r&&ue(e)}}}function bW(n,e,t){let{getSelectionLabel:r=void 0}=e,{item:i=void 0}=e;return n.$$set=o=>{"getSelectionLabel"in o&&t(0,r=o.getSelectionLabel),"item"in o&&t(1,i=o.item)},[r,i]}class wW extends rt{constructor(e){super(),nt(this,e,bW,_W,Xt,{getSelectionLabel:0,item:1})}}function AS(n,e,t){const r=n.slice();return r[9]=e[t],r[11]=t,r}function RS(n){let e,t,r;function i(...o){return n[6](n[11],...o)}return{c(){e=ee("div"),e.innerHTML='<svg width="100%" height="100%" viewBox="-2 -2 50 50" focusable="false" aria-hidden="true" role="presentation" class="svelte-liu9pa"><path d="M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"></path></svg>',T(e,"class","multiSelectItem_clear svelte-liu9pa")},m(o,s){fe(o,e,s),t||(r=Te(e,"click",i),t=!0)},p(o,s){n=o},d(o){o&&ue(e),t=!1,r()}}}function xS(n){let e,t,r=n[4](n[9])+"",i,o,s,a,l,u=!n[2]&&!n[3]&&RS(n);function f(...c){return n[7](n[11],...c)}return{c(){e=ee("div"),t=ee("div"),i=me(),u&&u.c(),o=me(),T(t,"class","multiSelectItem_label svelte-liu9pa"),T(e,"class",s="multiSelectItem "+(n[1]===n[11]?"active":"")+" "+(n[2]?"disabled":"")+" svelte-liu9pa")},m(c,d){fe(c,e,d),B(e,t),t.innerHTML=r,B(e,i),u&&u.m(e,null),B(e,o),a||(l=Te(e,"click",f),a=!0)},p(c,d){n=c,d&17&&r!==(r=n[4](n[9])+"")&&(t.innerHTML=r),!n[2]&&!n[3]?u?u.p(n,d):(u=RS(n),u.c(),u.m(e,o)):u&&(u.d(1),u=null),d&6&&s!==(s="multiSelectItem "+(n[1]===n[11]?"active":"")+" "+(n[2]?"disabled":"")+" svelte-liu9pa")&&T(e,"class",s)},d(c){c&&ue(e),u&&u.d(),a=!1,l()}}}function SW(n){let e,t=n[0],r=[];for(let i=0;i<t.length;i+=1)r[i]=xS(AS(n,t,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=xt()},m(i,o){for(let s=0;s<r.length;s+=1)r[s].m(i,o);fe(i,e,o)},p(i,[o]){if(o&63){t=i[0];let s;for(s=0;s<t.length;s+=1){const a=AS(i,t,s);r[s]?r[s].p(a,o):(r[s]=xS(a),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=t.length}},i:Me,o:Me,d(i){xn(r,i),i&&ue(e)}}}function CW(n,e,t){const r=hd();let{value:i=[]}=e,{activeValue:o=void 0}=e,{isDisabled:s=!1}=e,{multiFullItemClearable:a=!1}=e,{getSelectionLabel:l=void 0}=e;function u(d,g){g.stopPropagation(),r("multiItemClear",{i:d})}const f=(d,g)=>u(d,g),c=(d,g)=>a?u(d,g):{};return n.$$set=d=>{"value"in d&&t(0,i=d.value),"activeValue"in d&&t(1,o=d.activeValue),"isDisabled"in d&&t(2,s=d.isDisabled),"multiFullItemClearable"in d&&t(3,a=d.multiFullItemClearable),"getSelectionLabel"in d&&t(4,l=d.getSelectionLabel)},[i,o,s,a,l,u,f,c]}class EW extends rt{constructor(e){super(),nt(this,e,CW,SW,Xt,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}function NS(n,e,t){const r=n.slice();return r[23]=e[t],r}const OW=n=>({item:n&32,i:n&32,hoverItemIndex:n&2}),MS=n=>({item:n[23].data,i:n[23].index,hoverItemIndex:n[1]});function kW(n){let e;return{c(){e=qe("Missing template")},m(t,r){fe(t,e,r)},d(t){t&&ue(e)}}}function DS(n,e){let t,r,i;const o=e[15].default,s=Zr(o,e,e[14],MS),a=s||kW();return{key:n,first:null,c(){t=ee("svelte-virtual-list-row"),a&&a.c(),r=me(),jm(t,"class","svelte-g2cagw"),this.first=t},m(l,u){fe(l,t,u),a&&a.m(t,null),B(t,r),i=!0},p(l,u){e=l,s&&s.p&&(!i||u&16418)&&$r(s,o,e,e[14],i?Xr(o,e[14],u,OW):ei(e[14]),MS)},i(l){i||($(a,l),i=!0)},o(l){te(a,l),i=!1},d(l){l&&ue(t),a&&a.d(l)}}}function TW(n){let e,t,r=[],i=new Map,o,s,a,l,u=n[5];const f=c=>c[23].index;for(let c=0;c<u.length;c+=1){let d=NS(n,u,c),g=f(d);i.set(g,r[c]=DS(g,d))}return{c(){e=ee("svelte-virtual-list-viewport"),t=ee("svelte-virtual-list-contents");for(let c=0;c<r.length;c+=1)r[c].c();oi(t,"padding-top",n[6]+"px"),oi(t,"padding-bottom",n[7]+"px"),jm(t,"class","svelte-g2cagw"),oi(e,"height",n[0]),jm(e,"class","svelte-g2cagw"),Yi(()=>n[18].call(e))},m(c,d){fe(c,e,d),B(e,t);for(let g=0;g<r.length;g+=1)r[g].m(t,null);n[16](t),n[17](e),o=T0(e,n[18].bind(e)),s=!0,a||(l=Te(e,"scroll",n[8]),a=!0)},p(c,[d]){d&16418&&(u=c[5],Fe(),r=Nu(r,d,f,1,c,u,i,t,dd,DS,null,NS),Ue()),(!s||d&64)&&oi(t,"padding-top",c[6]+"px"),(!s||d&128)&&oi(t,"padding-bottom",c[7]+"px"),(!s||d&1)&&oi(e,"height",c[0])},i(c){if(!s){for(let d=0;d<u.length;d+=1)$(r[d]);s=!0}},o(c){for(let d=0;d<r.length;d+=1)te(r[d]);s=!1},d(c){c&&ue(e);for(let d=0;d<r.length;d+=1)r[d].d();n[16](null),n[17](null),o(),a=!1,l()}}}function PW(n,e,t){let{$$slots:r={},$$scope:i}=e,{items:o=void 0}=e,{height:s="100%"}=e,{itemHeight:a=40}=e,{hoverItemIndex:l=0}=e,{start:u=0}=e,{end:f=0}=e,c=[],d,g,h,v=0,m,p,y=0,b=0,_;async function w(j,U,F){const{scrollTop:z}=g;await Pn();let D=y-z,N=u;for(;D<U&&N<j.length;){let X=d[N-u];X||(t(10,f=N+1),await Pn(),X=d[N-u]),D+=c[N]=F||X.offsetHeight,N+=1}t(10,f=N);const L=j.length-f;_=(y+D)/f,t(7,b=L*_),c.length=j.length,g&&t(3,g.scrollTop=0,g)}async function S(){const{scrollTop:j}=g,U=u;for(let N=0;N<d.length;N+=1)c[u+N]=a||d[N].offsetHeight;let F=0,z=0;for(;F<o.length;){const N=c[F]||_;if(z+N>j){t(9,u=F),t(6,y=z);break}z+=N,F+=1}for(;F<o.length&&(z+=c[F]||_,F+=1,!(z>j+v)););t(10,f=F);const D=o.length-f;for(_=z/f;F<o.length;)c[F++]=_;if(t(7,b=D*_),u<U){await Pn();let N=0,L=0;for(let Q=u;Q<U;Q+=1)d[Q-u]&&(N+=c[Q],L+=a||d[Q-u].offsetHeight);const X=L-N;g.scrollTo(0,j+X)}}Nr(()=>{d=h.getElementsByTagName("svelte-virtual-list-row"),t(13,p=!0)});function E(j){wt[j?"unshift":"push"](()=>{h=j,t(4,h)})}function P(j){wt[j?"unshift":"push"](()=>{g=j,t(3,g)})}function R(){v=this.offsetHeight,t(2,v)}return n.$$set=j=>{"items"in j&&t(11,o=j.items),"height"in j&&t(0,s=j.height),"itemHeight"in j&&t(12,a=j.itemHeight),"hoverItemIndex"in j&&t(1,l=j.hoverItemIndex),"start"in j&&t(9,u=j.start),"end"in j&&t(10,f=j.end),"$$scope"in j&&t(14,i=j.$$scope)},n.$$.update=()=>{n.$$.dirty&3584&&t(5,m=o.slice(u,f).map((j,U)=>({index:U+u,data:j}))),n.$$.dirty&14340&&p&&w(o,v,a)},[s,l,v,g,h,m,y,b,S,u,f,o,a,p,i,r,E,P,R]}class IW extends rt{constructor(e){super(),nt(this,e,PW,TW,Xt,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function AW(n){let e,t;return{c(){e=Ft("svg"),t=Ft("path"),T(t,"fill","currentColor"),T(t,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),T(e,"width","100%"),T(e,"height","100%"),T(e,"viewBox","-2 -2 50 50"),T(e,"focusable","false"),T(e,"aria-hidden","true"),T(e,"role","presentation")},m(r,i){fe(r,e,i),B(e,t)},p:Me,i:Me,o:Me,d(r){r&&ue(e)}}}class RW extends rt{constructor(e){super(),nt(this,e,null,AW,Xt,{})}}function xW(n,e,t){let r;return function(){let o=this,s=arguments,a=function(){r=null,t||n.apply(o,s)},l=t&&!r;clearTimeout(r),r=setTimeout(a,e),l&&n.apply(o,s)}}function jS(n,e,t){const r=n.slice();return r[103]=e[t],r}function LS(n){let e,t,r,i,o;return{c(){e=ee("span"),t=qe(n[33]),r=me(),i=ee("span"),o=qe(n[32]),T(e,"id","aria-selection"),T(i,"id","aria-context")},m(s,a){fe(s,e,a),B(e,t),fe(s,r,a),fe(s,i,a),B(i,o)},p(s,a){a[1]&4&&bt(t,s[33]),a[1]&2&&bt(o,s[32])},d(s){s&&ue(e),s&&ue(r),s&&ue(i)}}}function BS(n){let e,t,r;const i=[n[18]];var o=n[17];function s(a){let l={};for(let u=0;u<i.length;u+=1)l=is(l,i[u]);return{props:l}}return o&&(e=new o(s())),{c(){e&&ke(e.$$.fragment),t=xt()},m(a,l){e&&Ee(e,a,l),fe(a,t,l),r=!0},p(a,l){const u=l[0]&262144?Ws(i,[pd(a[18])]):{};if(o!==(o=a[17])){if(e){Fe();const f=e;te(f.$$.fragment,1,0,()=>{Oe(f,1)}),Ue()}o?(e=new o(s()),ke(e.$$.fragment),$(e.$$.fragment,1),Ee(e,t.parentNode,t)):e=null}else o&&e.$set(u)},i(a){r||(e&&$(e.$$.fragment,a),r=!0)},o(a){e&&te(e.$$.fragment,a),r=!1},d(a){a&&ue(t),e&&Oe(e,a)}}}function FS(n){let e,t,r;var i=n[26];function o(s){return{props:{value:s[2],getSelectionLabel:s[12],activeValue:s[30],isDisabled:s[9],multiFullItemClearable:s[8]}}}return i&&(e=new i(o(n)),e.$on("multiItemClear",n[38]),e.$on("focus",n[40])),{c(){e&&ke(e.$$.fragment),t=xt()},m(s,a){e&&Ee(e,s,a),fe(s,t,a),r=!0},p(s,a){const l={};if(a[0]&4&&(l.value=s[2]),a[0]&4096&&(l.getSelectionLabel=s[12]),a[0]&1073741824&&(l.activeValue=s[30]),a[0]&512&&(l.isDisabled=s[9]),a[0]&256&&(l.multiFullItemClearable=s[8]),i!==(i=s[26])){if(e){Fe();const u=e;te(u.$$.fragment,1,0,()=>{Oe(u,1)}),Ue()}i?(e=new i(o(s)),e.$on("multiItemClear",s[38]),e.$on("focus",s[40]),ke(e.$$.fragment),$(e.$$.fragment,1),Ee(e,t.parentNode,t)):e=null}else i&&e.$set(l)},i(s){r||(e&&$(e.$$.fragment,s),r=!0)},o(s){e&&te(e.$$.fragment,s),r=!1},d(s){s&&ue(t),e&&Oe(e,s)}}}function US(n){let e,t,r,i,o;var s=n[25];function a(l){return{props:{item:l[2],getSelectionLabel:l[12]}}}return s&&(t=new s(a(n))),{c(){e=ee("div"),t&&ke(t.$$.fragment),T(e,"class","selectedItem svelte-17l1npl")},m(l,u){fe(l,e,u),t&&Ee(t,e,null),r=!0,i||(o=Te(e,"focus",n[40]),i=!0)},p(l,u){const f={};if(u[0]&4&&(f.item=l[2]),u[0]&4096&&(f.getSelectionLabel=l[12]),s!==(s=l[25])){if(t){Fe();const c=t;te(c.$$.fragment,1,0,()=>{Oe(c,1)}),Ue()}s?(t=new s(a(l)),ke(t.$$.fragment),$(t.$$.fragment,1),Ee(t,e,null)):t=null}else s&&t.$set(f)},i(l){r||(t&&$(t.$$.fragment,l),r=!0)},o(l){t&&te(t.$$.fragment,l),r=!1},d(l){l&&ue(e),t&&Oe(t),i=!1,o()}}}function VS(n){let e,t,r,i,o;var s=n[23];function a(l){return{}}return s&&(t=new s(a())),{c(){e=ee("div"),t&&ke(t.$$.fragment),T(e,"class","clearSelect svelte-17l1npl"),T(e,"aria-hidden","true")},m(l,u){fe(l,e,u),t&&Ee(t,e,null),r=!0,i||(o=Te(e,"click",iO(n[27])),i=!0)},p(l,u){if(s!==(s=l[23])){if(t){Fe();const f=t;te(f.$$.fragment,1,0,()=>{Oe(f,1)}),Ue()}s?(t=new s(a()),ke(t.$$.fragment),$(t.$$.fragment,1),Ee(t,e,null)):t=null}},i(l){r||(t&&$(t.$$.fragment,l),r=!0)},o(l){t&&te(t.$$.fragment,l),r=!1},d(l){l&&ue(e),t&&Oe(t),i=!1,o()}}}function qS(n){let e;function t(o,s){return o[22]?MW:NW}let r=t(n),i=r(n);return{c(){e=ee("div"),i.c(),T(e,"class","indicator svelte-17l1npl"),T(e,"aria-hidden","true")},m(o,s){fe(o,e,s),i.m(e,null)},p(o,s){r===(r=t(o))&&i?i.p(o,s):(i.d(1),i=r(o),i&&(i.c(),i.m(e,null)))},d(o){o&&ue(e),i.d()}}}function NW(n){let e,t;return{c(){e=Ft("svg"),t=Ft("path"),T(t,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),T(e,"width","100%"),T(e,"height","100%"),T(e,"viewBox","0 0 20 20"),T(e,"focusable","false"),T(e,"aria-hidden","true"),T(e,"class","svelte-17l1npl")},m(r,i){fe(r,e,i),B(e,t)},p:Me,d(r){r&&ue(e)}}}function MW(n){let e,t;return{c(){e=new SA(!1),t=xt(),e.a=t},m(r,i){e.m(n[22],r,i),fe(r,t,i)},p(r,i){i[0]&4194304&&e.p(r[22])},d(r){r&&ue(t),r&&e.d()}}}function HS(n){let e;return{c(){e=ee("div"),e.innerHTML='<svg class="spinner_icon svelte-17l1npl" viewBox="25 25 50 50"><circle class="spinner_path svelte-17l1npl" cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="5" stroke-miterlimit="10"></circle></svg>',T(e,"class","spinner svelte-17l1npl")},m(t,r){fe(t,e,r)},d(t){t&&ue(e)}}}function zS(n){let e,t,r,i;const o=[n[34]];function s(u){n[84](u)}var a=n[24];function l(u){let f={};for(let c=0;c<o.length;c+=1)f=is(f,o[c]);return u[28]!==void 0&&(f.hoverItemIndex=u[28]),{props:f}}return a&&(e=new a(l(n)),wt.push(()=>Ir(e,"hoverItemIndex",s)),e.$on("itemSelected",n[43]),e.$on("itemCreated",n[44]),e.$on("closeList",n[45])),{c(){e&&ke(e.$$.fragment),r=xt()},m(u,f){e&&Ee(e,u,f),fe(u,r,f),i=!0},p(u,f){const c=f[1]&8?Ws(o,[pd(u[34])]):{};if(!t&&f[0]&268435456&&(t=!0,c.hoverItemIndex=u[28],qr(()=>t=!1)),a!==(a=u[24])){if(e){Fe();const d=e;te(d.$$.fragment,1,0,()=>{Oe(d,1)}),Ue()}a?(e=new a(l(u)),wt.push(()=>Ir(e,"hoverItemIndex",s)),e.$on("itemSelected",u[43]),e.$on("itemCreated",u[44]),e.$on("closeList",u[45]),ke(e.$$.fragment),$(e.$$.fragment,1),Ee(e,r.parentNode,r)):e=null}else a&&e.$set(c)},i(u){i||(e&&$(e.$$.fragment,u),i=!0)},o(u){e&&te(e.$$.fragment,u),i=!1},d(u){u&&ue(r),e&&Oe(e,u)}}}function WS(n){let e,t,r;return{c(){e=ee("input"),T(e,"name",t=n[16].name),T(e,"type","hidden"),e.value=r=n[2]?n[12](n[2]):null,T(e,"class","svelte-17l1npl")},m(i,o){fe(i,e,o)},p(i,o){o[0]&65536&&t!==(t=i[16].name)&&T(e,"name",t),o[0]&4100&&r!==(r=i[2]?i[12](i[2]):null)&&(e.value=r)},d(i){i&&ue(e)}}}function KS(n){let e,t=n[2],r=[];for(let i=0;i<t.length;i+=1)r[i]=GS(jS(n,t,i));return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=xt()},m(i,o){for(let s=0;s<r.length;s+=1)r[s].m(i,o);fe(i,e,o)},p(i,o){if(o[0]&69636){t=i[2];let s;for(s=0;s<t.length;s+=1){const a=jS(i,t,s);r[s]?r[s].p(a,o):(r[s]=GS(a),r[s].c(),r[s].m(e.parentNode,e))}for(;s<r.length;s+=1)r[s].d(1);r.length=t.length}},d(i){xn(r,i),i&&ue(e)}}}function GS(n){let e,t,r;return{c(){e=ee("input"),T(e,"name",t=n[16].name),T(e,"type","hidden"),e.value=r=n[103]?n[12](n[103]):null,T(e,"class","svelte-17l1npl")},m(i,o){fe(i,e,o)},p(i,o){o[0]&65536&&t!==(t=i[16].name)&&T(e,"name",t),o[0]&4100&&r!==(r=i[103]?i[12](i[103]):null)&&(e.value=r)},d(i){i&&ue(e)}}}function DW(n){let e,t,r,i,o,s,a,l,u,f,c,d,g,h,v,m,p,y,b=n[1]&&LS(n),_=n[17]&&BS(n),w=n[35]&&FS(n),S=[{readOnly:a=!n[13]},n[31],{placeholder:n[36]},{style:n[14]},{disabled:n[9]}],E={};for(let N=0;N<S.length;N+=1)E=is(E,S[N]);let P=!n[7]&&n[29]&&US(n),R=n[37]&&VS(n),j=!n[37]&&(n[20]||n[19]&&!n[2]||!n[13]&&!n[9]&&!n[4]&&(n[29]&&!n[15]||!n[29]))&&qS(n),U=n[4]&&HS(),F=n[5]&&zS(n),z=(!n[7]||n[7]&&!n[35])&&WS(n),D=n[7]&&n[35]&&KS(n);return{c(){e=ee("div"),t=ee("span"),b&&b.c(),r=me(),_&&_.c(),i=me(),w&&w.c(),o=me(),s=ee("input"),l=me(),P&&P.c(),u=me(),R&&R.c(),f=me(),j&&j.c(),c=me(),U&&U.c(),d=me(),F&&F.c(),g=me(),z&&z.c(),h=me(),D&&D.c(),T(t,"aria-live","polite"),T(t,"aria-atomic","false"),T(t,"aria-relevant","additions text"),T(t,"class","a11yText svelte-17l1npl"),Ny(s,E),ze(s,"svelte-17l1npl",!0),T(e,"class",v="selectContainer "+n[21]+" svelte-17l1npl"),T(e,"style",n[11]),ze(e,"hasError",n[10]),ze(e,"multiSelect",n[7]),ze(e,"disabled",n[9]),ze(e,"focused",n[1])},m(N,L){fe(N,e,L),B(e,t),b&&b.m(t,null),B(e,r),_&&_.m(e,null),B(e,i),w&&w.m(e,null),B(e,o),B(e,s),s.autofocus&&s.focus(),n[82](s),Jn(s,n[3]),B(e,l),P&&P.m(e,null),B(e,u),R&&R.m(e,null),B(e,f),j&&j.m(e,null),B(e,c),U&&U.m(e,null),B(e,d),F&&F.m(e,null),B(e,g),z&&z.m(e,null),B(e,h),D&&D.m(e,null),n[85](e),m=!0,p||(y=[Te(window,"click",n[41]),Te(window,"focusin",n[41]),Te(window,"keydown",n[39]),Te(s,"focus",n[40]),Te(s,"input",n[83]),Te(e,"click",n[42])],p=!0)},p(N,L){N[1]?b?b.p(N,L):(b=LS(N),b.c(),b.m(t,null)):b&&(b.d(1),b=null),N[17]?_?(_.p(N,L),L[0]&131072&&$(_,1)):(_=BS(N),_.c(),$(_,1),_.m(e,i)):_&&(Fe(),te(_,1,1,()=>{_=null}),Ue()),N[35]?w?(w.p(N,L),L[1]&16&&$(w,1)):(w=FS(N),w.c(),$(w,1),w.m(e,o)):w&&(Fe(),te(w,1,1,()=>{w=null}),Ue()),Ny(s,E=Ws(S,[(!m||L[0]&8192&&a!==(a=!N[13]))&&{readOnly:a},L[1]&1&&N[31],(!m||L[1]&32)&&{placeholder:N[36]},(!m||L[0]&16384)&&{style:N[14]},(!m||L[0]&512)&&{disabled:N[9]}])),L[0]&8&&s.value!==N[3]&&Jn(s,N[3]),ze(s,"svelte-17l1npl",!0),!N[7]&&N[29]?P?(P.p(N,L),L[0]&536871040&&$(P,1)):(P=US(N),P.c(),$(P,1),P.m(e,u)):P&&(Fe(),te(P,1,1,()=>{P=null}),Ue()),N[37]?R?(R.p(N,L),L[1]&64&&$(R,1)):(R=VS(N),R.c(),$(R,1),R.m(e,f)):R&&(Fe(),te(R,1,1,()=>{R=null}),Ue()),!N[37]&&(N[20]||N[19]&&!N[2]||!N[13]&&!N[9]&&!N[4]&&(N[29]&&!N[15]||!N[29]))?j?j.p(N,L):(j=qS(N),j.c(),j.m(e,c)):j&&(j.d(1),j=null),N[4]?U||(U=HS(),U.c(),U.m(e,d)):U&&(U.d(1),U=null),N[5]?F?(F.p(N,L),L[0]&32&&$(F,1)):(F=zS(N),F.c(),$(F,1),F.m(e,g)):F&&(Fe(),te(F,1,1,()=>{F=null}),Ue()),!N[7]||N[7]&&!N[35]?z?z.p(N,L):(z=WS(N),z.c(),z.m(e,h)):z&&(z.d(1),z=null),N[7]&&N[35]?D?D.p(N,L):(D=KS(N),D.c(),D.m(e,null)):D&&(D.d(1),D=null),(!m||L[0]&2097152&&v!==(v="selectContainer "+N[21]+" svelte-17l1npl"))&&T(e,"class",v),(!m||L[0]&2048)&&T(e,"style",N[11]),L[0]&2098176&&ze(e,"hasError",N[10]),L[0]&2097280&&ze(e,"multiSelect",N[7]),L[0]&2097664&&ze(e,"disabled",N[9]),L[0]&2097154&&ze(e,"focused",N[1])},i(N){m||($(_),$(w),$(P),$(R),$(F),m=!0)},o(N){te(_),te(w),te(P),te(R),te(F),m=!1},d(N){N&&ue(e),b&&b.d(),_&&_.d(),w&&w.d(),n[82](null),P&&P.d(),R&&R.d(),j&&j.d(),U&&U.d(),F&&F.d(),z&&z.d(),D&&D.d(),n[85](null),p=!1,on(y)}}}function YS(n){return n.map((e,t)=>({index:t,value:e,label:`${e}`}))}function jW(n,e,t){let r,i,o,s,a,l,u,f;const c=hd();let{id:d=null}=e,{container:g=void 0}=e,{input:h=void 0}=e,{isMulti:v=!1}=e,{multiFullItemClearable:m=!1}=e,{isDisabled:p=!1}=e,{isCreatable:y=!1}=e,{isFocused:b=!1}=e,{value:_=null}=e,{filterText:w=""}=e,{placeholder:S="Select..."}=e,{placeholderAlwaysShow:E=!1}=e,{items:P=null}=e,{itemFilter:R=(ce,lt,qt)=>`${ce}`.toLowerCase().includes(lt.toLowerCase())}=e,{groupBy:j=void 0}=e,{groupFilter:U=ce=>ce}=e,{isGroupHeaderSelectable:F=!1}=e,{getGroupHeaderLabel:z=ce=>ce[D]||ce.id}=e,{labelIdentifier:D="label"}=e,{getOptionLabel:N=(ce,lt)=>ce.isCreator?`Create "${lt}"`:ce[D]}=e,{optionIdentifier:L="value"}=e,{loadOptions:X=void 0}=e,{hasError:Q=!1}=e,{containerStyles:A=""}=e,{getSelectionLabel:k=ce=>ce?ce[D]:null}=e,{createGroupHeaderItem:V=ce=>({value:ce,label:ce})}=e,{createItem:K=ce=>({value:ce,label:ce})}=e;const H=()=>r;let{isSearchable:I=!0}=e,{inputStyles:M=""}=e,{isClearable:G=!0}=e,{isWaiting:q=!1}=e,{listPlacement:W="auto"}=e,{listOpen:ae=!1}=e,{isVirtualList:le=!1}=e,{loadOptionsInterval:Pe=300}=e,{noOptionsMessage:Ve="No options"}=e,{hideEmptyState:Ae=!1}=e,{inputAttributes:ye={}}=e,{listAutoWidth:Ne=!0}=e,{itemHeight:xe=40}=e,{Icon:he=void 0}=e,{iconProps:ve={}}=e,{showChevron:de=!1}=e,{showIndicator:Ie=!1}=e,{containerClasses:De=""}=e,{indicatorSvg:He=void 0}=e,{listOffset:Xe=5}=e,{ClearIcon:mt=RW}=e,{Item:be=BP}=e,{List:Z=yW}=e,{Selection:x=wW}=e,{MultiSelection:C=EW}=e,{VirtualList:O=IW}=e;function Y(ce){if(ce.loadOptions&&ce.filterText.length>0)return;if(!ce.items)return[];ce.items&&ce.items.length>0&&typeof ce.items[0]!="object"&&(ce.items=YS(ce.items));let lt=ce.items.filter(qt=>{let Xn=R(N(qt,ce.filterText),ce.filterText,qt);return Xn&&ce.isMulti&&ce.value&&Array.isArray(ce.value)&&(Xn=!ce.value.some(jr=>jr[ce.optionIdentifier]===qt[ce.optionIdentifier])),Xn});return ce.groupBy&&(lt=ft(lt)),ce.isCreatable&&(lt=ie(lt,ce.filterText)),lt}function ie(ce,lt){if(lt.length===0)return ce;const qt=K(lt);return ce[0]&&lt===ce[0][D]?ce:(qt.isCreator=!0,[...ce,qt])}let{selectedValue:pe=null}=e,ge,Qe,J,se,re,_e;const Ce=xW(async()=>{t(4,q=!0);let ce=await X(w).catch(lt=>{console.warn("svelte-select loadOptions error :>> ",lt),c("error",{type:"loadOptions",details:lt})});ce&&!ce.cancelled&&(ce?(ce&&ce.length>0&&typeof ce[0]!="object"&&(ce=YS(ce)),t(81,r=[...ce]),c("loaded",{items:r})):t(81,r=[]),y&&t(81,r=ie(r,w)),t(4,q=!1),t(1,b=!0),t(5,ae=!0))},Pe);function We(){typeof _=="string"?t(2,_={[L]:_,label:_}):v&&Array.isArray(_)&&_.length>0&&t(2,_=_.map(ce=>typeof ce=="string"?{value:ce,label:ce}:ce))}let it;function ct(){t(31,it=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},ye)),d&&t(31,it.id=d,it),I||t(31,it.readonly=!0,it)}function ft(ce){const lt=[],qt={};ce.forEach(jr=>{const pn=j(jr);lt.includes(pn)||(lt.push(pn),qt[pn]=[],pn&&qt[pn].push(Object.assign(V(pn,jr),{id:pn,isGroupHeader:!0,isSelectable:F}))),qt[pn].push(Object.assign({isGroupItem:!!pn},jr))});const Xn=[];return U(lt).forEach(jr=>{Xn.push(...qt[jr])}),Xn}function vt(){if(v){JSON.stringify(_)!==JSON.stringify(Qe)&&Ut()&&c("select",_);return}(!Qe||JSON.stringify(_[L])!==JSON.stringify(Qe[L]))&&c("select",_)}function Dt(){b||ae?At():h&&h.blur()}function ot(){_&&(Array.isArray(_)?t(2,_=[..._]):t(2,_=[_]))}function Ct(){_&&t(2,_=null)}function yt(){w.length!==0&&(t(1,b=!0),t(5,ae=!0),X?Ce():(t(5,ae=!0),v&&t(30,ge=void 0)))}aO(async()=>{t(77,Qe=_),t(78,J=w),t(79,se=b),t(80,re=v)});function Ut(){let ce=!0;if(_){const lt=[],qt=[];_.forEach(Xn=>{lt.includes(Xn[L])?ce=!1:(lt.push(Xn[L]),qt.push(Xn))}),ce||t(2,_=qt)}return ce}function we(ce){let lt=ce?ce[L]:_[L];return P.find(qt=>qt[L]===lt)}function $e(ce){!ce||ce.length===0||ce.some(lt=>typeof lt!="object")||!_||(v?_.some(lt=>!lt||!lt[L]):!_[L])||(Array.isArray(_)?t(2,_=_.map(lt=>we(lt)||lt)):t(2,_=we()||_))}function Tt(ce){const{detail:lt}=ce,qt=_[lt?lt.i:_.length-1];_.length===1?t(2,_=void 0):t(2,_=_.filter(Xn=>Xn!==qt)),c("clear",qt)}function Et(ce){if(!!b)switch(ce.key){case"ArrowDown":ce.preventDefault(),t(5,ae=!0),t(30,ge=void 0);break;case"ArrowUp":ce.preventDefault(),t(5,ae=!0),t(30,ge=void 0);break;case"Tab":ae||t(1,b=!1);break;case"Backspace":if(!v||w.length>0)return;if(v&&_&&_.length>0){if(Tt(ge!==void 0?ge:_.length-1),ge===0||ge===void 0)break;t(30,ge=_.length>ge?ge-1:void 0)}break;case"ArrowLeft":if(!v||w.length>0)return;ge===void 0?t(30,ge=_.length-1):_.length>ge&&ge!==0&&t(30,ge-=1);break;case"ArrowRight":if(!v||w.length>0||ge===void 0)return;ge===_.length-1?t(30,ge=void 0):ge<_.length-1&&t(30,ge+=1);break}}function At(){t(1,b=!0),h&&h.focus()}function jt(ce){if(!g)return;const lt=ce.path&&ce.path.length>0?ce.path[0]:ce.target;g.contains(lt)||g.contains(ce.relatedTarget)||(t(1,b=!1),t(5,ae=!1),t(30,ge=void 0),h&&h.blur())}function Qt(){p||(t(1,b=!0),t(5,ae=!ae))}function kn(){t(2,_=void 0),t(5,ae=!1),c("clear",_),At()}Nr(()=>{b&&h&&h.focus()});function It(ce){const{detail:lt}=ce;if(lt){t(3,w="");const qt=Object.assign({},lt);(!qt.isGroupHeader||qt.isSelectable)&&(v?t(2,_=_?_.concat([qt]):[qt]):t(2,_=qt),t(2,_),setTimeout(()=>{t(5,ae=!1),t(30,ge=void 0)}))}}function Wn(ce){const{detail:lt}=ce;v?(t(2,_=_||[]),t(2,_=[..._,K(lt)])):t(2,_=K(lt)),c("itemCreated",lt),t(3,w=""),t(5,ae=!1),t(30,ge=void 0)}function ri(){t(3,w=""),t(5,ae=!1)}let{ariaValues:$t=ce=>`Option ${ce}, selected.`}=e,{ariaListOpen:et=(ce,lt)=>`You are currently focused on option ${ce}. There are ${lt} results available.`}=e,{ariaFocused:_t=()=>"Select is focused, type to refine list, press down to open the menu."}=e;function Er(){let ce;return v&&_.length>0?ce=_.map(lt=>k(lt)).join(", "):ce=k(_),$t(ce)}function Dr(){if(!b||!r||r.length===0)return"";let ce=r[_e];if(ae&&ce){let lt=k(ce),qt=r?r.length:0;return et(lt,qt)}else return _t()}function Ai(ce){wt[ce?"unshift":"push"](()=>{h=ce,t(6,h)})}function ea(){w=this.value,t(3,w)}function pi(ce){_e=ce,t(28,_e)}function up(ce){wt[ce?"unshift":"push"](()=>{g=ce,t(0,g)})}return n.$$set=ce=>{"id"in ce&&t(46,d=ce.id),"container"in ce&&t(0,g=ce.container),"input"in ce&&t(6,h=ce.input),"isMulti"in ce&&t(7,v=ce.isMulti),"multiFullItemClearable"in ce&&t(8,m=ce.multiFullItemClearable),"isDisabled"in ce&&t(9,p=ce.isDisabled),"isCreatable"in ce&&t(47,y=ce.isCreatable),"isFocused"in ce&&t(1,b=ce.isFocused),"value"in ce&&t(2,_=ce.value),"filterText"in ce&&t(3,w=ce.filterText),"placeholder"in ce&&t(48,S=ce.placeholder),"placeholderAlwaysShow"in ce&&t(49,E=ce.placeholderAlwaysShow),"items"in ce&&t(50,P=ce.items),"itemFilter"in ce&&t(51,R=ce.itemFilter),"groupBy"in ce&&t(52,j=ce.groupBy),"groupFilter"in ce&&t(53,U=ce.groupFilter),"isGroupHeaderSelectable"in ce&&t(54,F=ce.isGroupHeaderSelectable),"getGroupHeaderLabel"in ce&&t(55,z=ce.getGroupHeaderLabel),"labelIdentifier"in ce&&t(56,D=ce.labelIdentifier),"getOptionLabel"in ce&&t(57,N=ce.getOptionLabel),"optionIdentifier"in ce&&t(58,L=ce.optionIdentifier),"loadOptions"in ce&&t(59,X=ce.loadOptions),"hasError"in ce&&t(10,Q=ce.hasError),"containerStyles"in ce&&t(11,A=ce.containerStyles),"getSelectionLabel"in ce&&t(12,k=ce.getSelectionLabel),"createGroupHeaderItem"in ce&&t(60,V=ce.createGroupHeaderItem),"createItem"in ce&&t(61,K=ce.createItem),"isSearchable"in ce&&t(13,I=ce.isSearchable),"inputStyles"in ce&&t(14,M=ce.inputStyles),"isClearable"in ce&&t(15,G=ce.isClearable),"isWaiting"in ce&&t(4,q=ce.isWaiting),"listPlacement"in ce&&t(63,W=ce.listPlacement),"listOpen"in ce&&t(5,ae=ce.listOpen),"isVirtualList"in ce&&t(64,le=ce.isVirtualList),"loadOptionsInterval"in ce&&t(65,Pe=ce.loadOptionsInterval),"noOptionsMessage"in ce&&t(66,Ve=ce.noOptionsMessage),"hideEmptyState"in ce&&t(67,Ae=ce.hideEmptyState),"inputAttributes"in ce&&t(16,ye=ce.inputAttributes),"listAutoWidth"in ce&&t(68,Ne=ce.listAutoWidth),"itemHeight"in ce&&t(69,xe=ce.itemHeight),"Icon"in ce&&t(17,he=ce.Icon),"iconProps"in ce&&t(18,ve=ce.iconProps),"showChevron"in ce&&t(19,de=ce.showChevron),"showIndicator"in ce&&t(20,Ie=ce.showIndicator),"containerClasses"in ce&&t(21,De=ce.containerClasses),"indicatorSvg"in ce&&t(22,He=ce.indicatorSvg),"listOffset"in ce&&t(70,Xe=ce.listOffset),"ClearIcon"in ce&&t(23,mt=ce.ClearIcon),"Item"in ce&&t(71,be=ce.Item),"List"in ce&&t(24,Z=ce.List),"Selection"in ce&&t(25,x=ce.Selection),"MultiSelection"in ce&&t(26,C=ce.MultiSelection),"VirtualList"in ce&&t(72,O=ce.VirtualList),"selectedValue"in ce&&t(73,pe=ce.selectedValue),"ariaValues"in ce&&t(74,$t=ce.ariaValues),"ariaListOpen"in ce&&t(75,et=ce.ariaListOpen),"ariaFocused"in ce&&t(76,_t=ce.ariaFocused)},n.$$.update=()=>{n.$$.dirty[0]&140|n.$$.dirty[1]&405340160&&t(81,r=Y({loadOptions:X,filterText:w,items:P,value:_,isMulti:v,optionIdentifier:L,groupBy:j,isCreatable:y})),n.$$.dirty[2]&2048&&pe&&console.warn("selectedValue is no longer used. Please use value instead."),n.$$.dirty[1]&524288&&$e(P),n.$$.dirty[0]&4&&_&&We(),n.$$.dirty[0]&73728&&(ye||!I)&&ct(),n.$$.dirty[0]&128|n.$$.dirty[2]&262144&&(v&&ot(),re&&!v&&Ct()),n.$$.dirty[0]&132&&v&&_&&_.length>1&&Ut(),n.$$.dirty[0]&4&&_&&vt(),n.$$.dirty[0]&132|n.$$.dirty[2]&32768&&!_&&v&&Qe&&c("select",_),n.$$.dirty[0]&2|n.$$.dirty[2]&131072&&b!==se&&Dt(),n.$$.dirty[0]&8|n.$$.dirty[2]&65536&&w!==J&&yt(),n.$$.dirty[0]&12&&t(29,i=_&&w.length===0),n.$$.dirty[0]&536904208&&t(37,o=i&&G&&!p&&!q),n.$$.dirty[0]&132|n.$$.dirty[1]&393216&&t(36,s=E&&v?S:_?"":S),n.$$.dirty[0]&132&&t(35,a=v&&_&&_.length>0),n.$$.dirty[0]&141|n.$$.dirty[1]&218103808|n.$$.dirty[2]&526326&&t(34,l={Item:be,filterText:w,optionIdentifier:L,noOptionsMessage:Ve,hideEmptyState:Ae,isVirtualList:le,VirtualList:O,value:_,isMulti:v,getGroupHeaderLabel:z,items:r,itemHeight:xe,getOptionLabel:N,listPlacement:W,parent:g,listAutoWidth:Ne,listOffset:Xe}),n.$$.dirty[0]&132&&t(33,u=_?Er():""),n.$$.dirty[0]&268435490|n.$$.dirty[2]&524288&&t(32,f=Dr())},[g,b,_,w,q,ae,h,v,m,p,Q,A,k,I,M,G,ye,he,ve,de,Ie,De,He,mt,Z,x,C,kn,_e,i,ge,it,f,u,l,a,s,o,Tt,Et,At,jt,Qt,It,Wn,ri,d,y,S,E,P,R,j,U,F,z,D,N,L,X,V,K,H,W,le,Pe,Ve,Ae,Ne,xe,Xe,be,O,pe,$t,et,_t,Qe,J,se,re,r,Ai,ea,pi,up]}class _s extends rt{constructor(e){super(),nt(this,e,jW,DW,Xt,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}function LW(n){let e,t,r,i,o,s,a,l,u,f,c,d,g,h,v,m,p,y,b,_,w,S,E,P,R,j,U,F,z,D,N,L,X,Q,A;function k(le){n[18](le)}let V={containerClasses:"jse-filter-path",showIndicator:!0,items:n[6]};n[0]!==void 0&&(V.value=n[0]),a=new _s({props:V}),wt.push(()=>Ir(a,"value",k));function K(le){n[19](le)}let H={containerClasses:"jse-filter-relation",showIndicator:!0,items:n[8]};n[1]!==void 0&&(H.value=n[1]),f=new _s({props:H}),wt.push(()=>Ir(f,"value",K));function I(le){n[21](le)}let M={containerClasses:"jse-sort-path",showIndicator:!0,items:n[6]};n[3]!==void 0&&(M.value=n[3]),_=new _s({props:M}),wt.push(()=>Ir(_,"value",I));function G(le){n[22](le)}let q={containerClasses:"jse-sort-direction",showIndicator:!0,items:n[9]};n[4]!==void 0&&(q.value=n[4]),E=new _s({props:q}),wt.push(()=>Ir(E,"value",G));function W(le){n[23](le)}let ae={containerClasses:"jse-projection-paths",isMulti:!0,showIndicator:!0,items:n[7]};return n[5]!==void 0&&(ae.value=n[5]),N=new _s({props:ae}),wt.push(()=>Ir(N,"value",W)),{c(){e=ee("table"),t=ee("tr"),r=ee("th"),r.textContent="Filter",i=me(),o=ee("td"),s=ee("div"),ke(a.$$.fragment),u=me(),ke(f.$$.fragment),d=me(),g=ee("input"),h=me(),v=ee("tr"),m=ee("th"),m.textContent="Sort",p=me(),y=ee("td"),b=ee("div"),ke(_.$$.fragment),S=me(),ke(E.$$.fragment),R=me(),j=ee("tr"),U=ee("th"),U.textContent="Pick",F=me(),z=ee("td"),D=ee("div"),ke(N.$$.fragment),T(r,"class","svelte-1pbg0mn"),T(g,"class","jse-filter-value svelte-1pbg0mn"),T(s,"class","jse-horizontal svelte-1pbg0mn"),T(m,"class","svelte-1pbg0mn"),T(b,"class","jse-horizontal svelte-1pbg0mn"),T(U,"class","svelte-1pbg0mn"),T(D,"class","jse-horizontal svelte-1pbg0mn"),T(e,"class","jse-transform-wizard svelte-1pbg0mn")},m(le,Pe){fe(le,e,Pe),B(e,t),B(t,r),B(t,i),B(t,o),B(o,s),Ee(a,s,null),B(s,u),Ee(f,s,null),B(s,d),B(s,g),Jn(g,n[2]),B(e,h),B(e,v),B(v,m),B(v,p),B(v,y),B(y,b),Ee(_,b,null),B(b,S),Ee(E,b,null),B(e,R),B(e,j),B(j,U),B(j,F),B(j,z),B(z,D),Ee(N,D,null),X=!0,Q||(A=Te(g,"input",n[20]),Q=!0)},p(le,Pe){const Ve={};Pe[0]&64&&(Ve.items=le[6]),!l&&Pe[0]&1&&(l=!0,Ve.value=le[0],qr(()=>l=!1)),a.$set(Ve);const Ae={};!c&&Pe[0]&2&&(c=!0,Ae.value=le[1],qr(()=>c=!1)),f.$set(Ae),Pe[0]&4&&g.value!==le[2]&&Jn(g,le[2]);const ye={};Pe[0]&64&&(ye.items=le[6]),!w&&Pe[0]&8&&(w=!0,ye.value=le[3],qr(()=>w=!1)),_.$set(ye);const Ne={};!P&&Pe[0]&16&&(P=!0,Ne.value=le[4],qr(()=>P=!1)),E.$set(Ne);const xe={};Pe[0]&128&&(xe.items=le[7]),!L&&Pe[0]&32&&(L=!0,xe.value=le[5],qr(()=>L=!1)),N.$set(xe)},i(le){X||($(a.$$.fragment,le),$(f.$$.fragment,le),$(_.$$.fragment,le),$(E.$$.fragment,le),$(N.$$.fragment,le),X=!0)},o(le){te(a.$$.fragment,le),te(f.$$.fragment,le),te(_.$$.fragment,le),te(E.$$.fragment,le),te(N.$$.fragment,le),X=!1},d(le){le&&ue(e),Oe(a),Oe(f),Oe(_),Oe(E),Oe(N),Q=!1,A()}}}function BW(n,e,t){let r,i,o,s,a;var l,u,f,c,d,g,h;const v=Sr("jsoneditor:TransformWizard");let{json:m}=e,{queryOptions:p={}}=e,{onChange:y}=e;const b=["==","!=","<","<=",">",">="].map(I=>({value:I,label:I})),_=[{value:"asc",label:"ascending"},{value:"desc",label:"descending"}];let w=!((l=p==null?void 0:p.filter)===null||l===void 0)&&l.path?U(p.filter.path):null,S=!((u=p==null?void 0:p.filter)===null||u===void 0)&&u.relation?b.find(I=>I.value===p.filter.relation):null,E=((f=p==null?void 0:p.filter)===null||f===void 0?void 0:f.value)||"",P=!((c=p==null?void 0:p.sort)===null||c===void 0)&&c.path?U(p.sort.path):null,R=!((d=p==null?void 0:p.sort)===null||d===void 0)&&d.direction?_.find(I=>I.value===p.sort.direction):null,j=!((g=p==null?void 0:p.projection)===null||g===void 0)&&g.paths?p.projection.paths.map(U):null;function U(I){return{value:I,label:gn(I)?"(whole item)":Yo(I)}}function F(I){var M;Yt((M=p==null?void 0:p.filter)===null||M===void 0?void 0:M.path,I)||(v("changeFilterPath",I),t(10,p=yi(p,["filter","path"],I,!0)),y(p))}function z(I){var M;Yt((M=p==null?void 0:p.filter)===null||M===void 0?void 0:M.relation,I)||(v("changeFilterRelation",I),t(10,p=yi(p,["filter","relation"],I,!0)),y(p))}function D(I){var M;Yt((M=p==null?void 0:p.filter)===null||M===void 0?void 0:M.value,I)||(v("changeFilterValue",I),t(10,p=yi(p,["filter","value"],I,!0)),y(p))}function N(I){var M;Yt((M=p==null?void 0:p.sort)===null||M===void 0?void 0:M.path,I)||(v("changeSortPath",I),t(10,p=yi(p,["sort","path"],I,!0)),y(p))}function L(I){var M;Yt((M=p==null?void 0:p.sort)===null||M===void 0?void 0:M.direction,I)||(v("changeSortDirection",I),t(10,p=yi(p,["sort","direction"],I,!0)),y(p))}function X(I){var M;Yt((M=p==null?void 0:p.projection)===null||M===void 0?void 0:M.paths,I)||(v("changeProjectionPaths",I),t(10,p=yi(p,["projection","paths"],I,!0)),y(p))}function Q(I){w=I,t(0,w)}function A(I){S=I,t(1,S)}function k(){E=this.value,t(2,E)}function V(I){P=I,t(3,P)}function K(I){R=I,t(4,R)}function H(I){j=I,t(5,j)}return n.$$set=I=>{"json"in I&&t(11,m=I.json),"queryOptions"in I&&t(10,p=I.queryOptions),"onChange"in I&&t(12,y=I.onChange)},n.$$.update=()=>{n.$$.dirty[0]&2048&&t(17,r=Array.isArray(m)),n.$$.dirty[0]&133120&&t(16,i=r?rg(m):[]),n.$$.dirty[0]&133120&&t(15,o=r?rg(m,!0):[]),n.$$.dirty[0]&65536&&t(6,s=i.map(U)),n.$$.dirty[0]&32768&&t(7,a=o?o.map(U):[]),n.$$.dirty[0]&17472&&!(t(14,h=p==null?void 0:p.filter)===null||h===void 0)&&h.path&&s.find(I=>{var M;return Yt(I.value,(M=p==null?void 0:p.filter)===null||M===void 0?void 0:M.path)}),n.$$.dirty[0]&1&&F((w==null?void 0:w.value)||null),n.$$.dirty[0]&2&&z((S==null?void 0:S.value)||null),n.$$.dirty[0]&4&&D(E||null),n.$$.dirty[0]&8&&N((P==null?void 0:P.value)||null),n.$$.dirty[0]&16&&L((R==null?void 0:R.value)||null),n.$$.dirty[0]&32&&X(j?j.map(I=>I.value):null)},[w,S,E,P,R,j,s,a,b,_,p,m,y,l,h,o,i,r,Q,A,k,V,K,H]}class FW extends rt{constructor(e){super(),nt(this,e,BW,LW,Nt,{json:11,queryOptions:10,onChange:12},null,[-1,-1])}}function JS(n,e,t){const r=n.slice();return r[5]=e[t],r}function UW(n){let e,t;return e=new kt({props:{data:Zh}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p:Me,i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function VW(n){let e,t;return e=new kt({props:{data:Xh}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p:Me,i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function QS(n){let e,t,r,i,o=n[5].name+"",s,a,l,u,f,c;const d=[VW,UW],g=[];function h(m,p){return m[5].id===m[0]?0:1}t=h(n),r=g[t]=d[t](n);function v(){return n[4](n[5])}return{c(){e=ee("button"),r.c(),i=me(),s=qe(o),a=me(),T(e,"type","button"),T(e,"class","jse-query-language svelte-ifjr8a"),T(e,"title",l=`Select ${n[5].name} as query language`),ze(e,"selected",n[5].id===n[0])},m(m,p){fe(m,e,p),g[t].m(e,null),B(e,i),B(e,s),B(e,a),u=!0,f||(c=Te(e,"click",v),f=!0)},p(m,p){n=m;let y=t;t=h(n),t===y?g[t].p(n,p):(Fe(),te(g[y],1,1,()=>{g[y]=null}),Ue(),r=g[t],r?r.p(n,p):(r=g[t]=d[t](n),r.c()),$(r,1),r.m(e,i)),(!u||p&2)&&o!==(o=n[5].name+"")&&bt(s,o),(!u||p&2&&l!==(l=`Select ${n[5].name} as query language`))&&T(e,"title",l),p&3&&ze(e,"selected",n[5].id===n[0])},i(m){u||($(r),u=!0)},o(m){te(r),u=!1},d(m){m&&ue(e),g[t].d(),f=!1,c()}}}function qW(n){let e,t,r,i=n[1],o=[];for(let a=0;a<i.length;a+=1)o[a]=QS(JS(n,i,a));const s=a=>te(o[a],1,1,()=>{o[a]=null});return{c(){e=ee("div"),t=ee("div");for(let a=0;a<o.length;a+=1)o[a].c();T(t,"class","jse-select-query-language-container svelte-ifjr8a"),T(e,"class","jse-select-query-language svelte-ifjr8a")},m(a,l){fe(a,e,l),B(e,t);for(let u=0;u<o.length;u+=1)o[u].m(t,null);r=!0},p(a,[l]){if(l&7){i=a[1];let u;for(u=0;u<i.length;u+=1){const f=JS(a,i,u);o[u]?(o[u].p(f,l),$(o[u],1)):(o[u]=QS(f),o[u].c(),$(o[u],1),o[u].m(t,null))}for(Fe(),u=i.length;u<o.length;u+=1)s(u);Ue()}},i(a){if(!r){for(let l=0;l<i.length;l+=1)$(o[l]);r=!0}},o(a){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)te(o[l]);r=!1},d(a){a&&ue(e),xn(o,a)}}}function HW(n,e,t){let{queryLanguages:r}=e,{queryLanguageId:i}=e,{onChangeQueryLanguage:o}=e;function s(l){t(0,i=l),o(l)}const a=l=>s(l.id);return n.$$set=l=>{"queryLanguages"in l&&t(1,r=l.queryLanguages),"queryLanguageId"in l&&t(0,i=l.queryLanguageId),"onChangeQueryLanguage"in l&&t(3,o=l.onChangeQueryLanguage)},[i,r,s,o,a]}class zW extends rt{constructor(e){super(),nt(this,e,HW,qW,Xt,{queryLanguages:1,queryLanguageId:0,onChangeQueryLanguage:3})}}function ZS(n){let e,t,r,i,o;return t=new kt({props:{data:oj}}),{c(){e=ee("button"),ke(t.$$.fragment),T(e,"type","button"),T(e,"class","jse-config svelte-1djqugc"),T(e,"title","Select a query language")},m(s,a){fe(s,e,a),Ee(t,e,null),n[6](e),r=!0,i||(o=Te(e,"click",n[3]),i=!0)},p:Me,i(s){r||($(t.$$.fragment,s),r=!0)},o(s){te(t.$$.fragment,s),r=!1},d(s){s&&ue(e),Oe(t),n[6](null),i=!1,o()}}}function WW(n){let e,t,r,i,o,s,a,l,u,f=n[0].length>1&&ZS(n);return s=new kt({props:{data:Fu}}),{c(){e=ee("div"),t=ee("div"),t.textContent="Transform",r=me(),f&&f.c(),i=me(),o=ee("button"),ke(s.$$.fragment),T(t,"class","jse-title svelte-1djqugc"),T(o,"type","button"),T(o,"class","jse-close svelte-1djqugc"),T(e,"class","jse-header svelte-1djqugc")},m(c,d){fe(c,e,d),B(e,t),B(e,r),f&&f.m(e,null),B(e,i),B(e,o),Ee(s,o,null),a=!0,l||(u=Te(o,"click",n[2]),l=!0)},p(c,[d]){c[0].length>1?f?(f.p(c,d),d&1&&$(f,1)):(f=ZS(c),f.c(),$(f,1),f.m(e,i)):f&&(Fe(),te(f,1,1,()=>{f=null}),Ue())},i(c){a||($(f),$(s.$$.fragment,c),a=!0)},o(c){te(f),te(s.$$.fragment,c),a=!1},d(c){c&&ue(e),f&&f.d(),Oe(s),l=!1,u()}}}function KW(n,e,t){let{queryLanguages:r}=e,{queryLanguageId:i}=e,{onChangeQueryLanguage:o}=e,s,a;const{close:l}=ur("simple-modal"),{openAbsolutePopup:u,closeAbsolutePopup:f}=ur("absolute-popup");function c(){a=u(zW,{queryLanguages:r,queryLanguageId:i,onChangeQueryLanguage:h=>{f(a),o(h)}},{position:"bottom",offsetTop:-2,offsetLeft:0,anchor:s,closeOnOuterClick:!0})}function d(g){wt[g?"unshift":"push"](()=>{s=g,t(1,s)})}return n.$$set=g=>{"queryLanguages"in g&&t(0,r=g.queryLanguages),"queryLanguageId"in g&&t(4,i=g.queryLanguageId),"onChangeQueryLanguage"in g&&t(5,o=g.onChangeQueryLanguage)},[r,s,l,c,i,o,d]}class GW extends rt{constructor(e){super(),nt(this,e,KW,WW,Nt,{queryLanguages:0,queryLanguageId:4,onChangeQueryLanguage:5})}}function XS(n){let e,t,r,i,o;const s=[JW,YW],a=[];function l(u,f){return f[0]&512&&(e=null),e==null&&(e=!!Array.isArray(u[9])),e?0:1}return t=l(n,[-1,-1]),r=a[t]=s[t](n),{c(){r.c(),i=xt()},m(u,f){a[t].m(u,f),fe(u,i,f),o=!0},p(u,f){let c=t;t=l(u,f),t===c?a[t].p(u,f):(Fe(),te(a[c],1,1,()=>{a[c]=null}),Ue(),r=a[t],r?r.p(u,f):(r=a[t]=s[t](u),r.c()),$(r,1),r.m(i.parentNode,i))},i(u){o||($(r),o=!0)},o(u){te(r),o=!1},d(u){a[t].d(u),u&&ue(i)}}}function YW(n){let e;return{c(){e=qe("(Only available for arrays, not for objects)")},m(t,r){fe(t,e,r)},p:Me,i:Me,o:Me,d(t){t&&ue(e)}}}function JW(n){let e,t;return e=new FW({props:{queryOptions:n[7],json:n[9],onChange:n[16]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i[0]&128&&(o.queryOptions=r[7]),i[0]&512&&(o.json=r[9]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function $S(n){let e,t;return e=new zv({props:{externalContent:n[14],readOnly:!0,mainMenuBar:!1,navigationBar:!1,escapeControlCharacters:n[2],escapeUnicodeCharacters:n[3],onRenderValue:n[5],onError:console.error,onChange:Kt,onFocus:Kt,onBlur:Kt,onSortModal:Kt,onTransformModal:Kt,onClassName:n[6]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i[0]&16384&&(o.externalContent=r[14]),i[0]&4&&(o.escapeControlCharacters=r[2]),i[0]&8&&(o.escapeUnicodeCharacters=r[3]),i[0]&32&&(o.onRenderValue=r[5]),i[0]&64&&(o.onClassName=r[6]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function QW(n){let e,t=n[12].toString()+"",r;return{c(){e=ee("div"),r=qe(t),T(e,"class","jse-preview jse-error svelte-mr4kda")},m(i,o){fe(i,e,o),B(e,r)},p(i,o){o[0]&4096&&t!==(t=i[12].toString()+"")&&bt(r,t)},i:Me,o:Me,d(i){i&&ue(e)}}}function ZW(n){let e,t;return e=new zv({props:{externalContent:n[13],readOnly:!0,mainMenuBar:!1,navigationBar:!1,escapeControlCharacters:n[2],escapeUnicodeCharacters:n[3],onRenderValue:n[5],onError:console.error,onChange:Kt,onFocus:Kt,onBlur:Kt,onSortModal:Kt,onTransformModal:Kt,onClassName:n[6]}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i[0]&8192&&(o.externalContent=r[13]),i[0]&4&&(o.escapeControlCharacters=r[2]),i[0]&8&&(o.escapeUnicodeCharacters=r[3]),i[0]&32&&(o.onRenderValue=r[5]),i[0]&64&&(o.onClassName=r[6]),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function XW(n){let e,t,r,i,o,s,a,l,u=n[15](n[0]).description+"",f,c,d,g,h,v,m,p,y,b,_,w,S,E,P,R,j,U,F,z,D,N,L,X,Q,A,k,V,K,H,I,M,G,q,W,ae,le,Pe,Ve;e=new GW({props:{queryLanguages:n[4],queryLanguageId:n[0],onChangeQueryLanguage:n[21]}}),b=new kt({props:{data:n[10]?Vi:jo}});let Ae=n[10]&&XS(n);L=new kt({props:{data:n[11]?Vi:jo}});let ye=n[11]&&$S(n);const Ne=[ZW,QW],xe=[];function he(ve,de){return ve[12]?1:0}return H=he(n),I=xe[H]=Ne[H](n),{c(){ke(e.$$.fragment),t=me(),r=ee("div"),i=ee("div"),o=ee("div"),s=ee("div"),s.innerHTML='<div class="jse-label-inner svelte-mr4kda">Language</div>',a=me(),l=ee("div"),f=me(),c=ee("div"),c.innerHTML='<div class="jse-label-inner svelte-mr4kda">Path</div>',d=me(),g=ee("input"),v=me(),m=ee("div"),p=ee("div"),y=ee("button"),ke(b.$$.fragment),_=qe(`
                Wizard`),w=me(),Ae&&Ae.c(),S=me(),E=ee("div"),E.innerHTML='<div class="jse-label-inner svelte-mr4kda">Query</div>',P=me(),R=ee("textarea"),j=me(),U=ee("div"),F=ee("div"),z=ee("div"),D=ee("div"),N=ee("button"),ke(L.$$.fragment),X=qe(`
                  Original`),Q=me(),ye&&ye.c(),A=me(),k=ee("div"),V=ee("div"),V.innerHTML='<div class="jse-label-inner svelte-mr4kda">Preview</div>',K=me(),I.c(),M=me(),G=ee("div"),q=ee("button"),W=qe("Transform"),T(s,"class","jse-label svelte-mr4kda"),T(l,"class","jse-description svelte-mr4kda"),T(c,"class","jse-label svelte-mr4kda"),T(g,"class","jse-path svelte-mr4kda"),T(g,"type","text"),g.readOnly=!0,T(g,"title","Selected path"),g.value=h=gn(n[1])?"(whole document)":Yo(n[1]),T(y,"type","button"),T(y,"class","svelte-mr4kda"),T(p,"class","jse-label-inner svelte-mr4kda"),T(m,"class","jse-label svelte-mr4kda"),T(E,"class","jse-label svelte-mr4kda"),T(R,"class","jse-query svelte-mr4kda"),T(R,"spellcheck","false"),R.value=n[8],T(o,"class","jse-query-contents svelte-mr4kda"),T(N,"type","button"),T(N,"class","svelte-mr4kda"),T(D,"class","jse-label-inner svelte-mr4kda"),T(z,"class","jse-label svelte-mr4kda"),T(F,"class","jse-original-data svelte-mr4kda"),ze(F,"jse-hide",!n[11]),T(V,"class","jse-label svelte-mr4kda"),T(k,"class","jse-preview-data svelte-mr4kda"),T(U,"class","jse-data-contents svelte-mr4kda"),ze(U,"jse-hide-original-data",!n[11]),T(i,"class","jse-main-contents svelte-mr4kda"),T(q,"type","button"),T(q,"class","jse-primary svelte-mr4kda"),q.disabled=ae=!!n[12],T(G,"class","jse-actions svelte-mr4kda"),T(r,"class","jse-contents svelte-mr4kda")},m(ve,de){Ee(e,ve,de),fe(ve,t,de),fe(ve,r,de),B(r,i),B(i,o),B(o,s),B(o,a),B(o,l),l.innerHTML=u,B(o,f),B(o,c),B(o,d),B(o,g),B(o,v),B(o,m),B(m,p),B(p,y),Ee(b,y,null),B(y,_),B(o,w),Ae&&Ae.m(o,null),B(o,S),B(o,E),B(o,P),B(o,R),B(i,j),B(i,U),B(U,F),B(F,z),B(z,D),B(D,N),Ee(L,N,null),B(N,X),B(F,Q),ye&&ye.m(F,null),B(U,A),B(U,k),B(k,V),B(k,K),xe[H].m(k,null),B(r,M),B(r,G),B(G,q),B(q,W),le=!0,Pe||(Ve=[Te(y,"click",n[19]),Te(R,"input",n[17]),Te(N,"click",n[20]),Te(q,"click",n[18]),xu(eK.call(null,q))],Pe=!0)},p(ve,de){const Ie={};de[0]&16&&(Ie.queryLanguages=ve[4]),de[0]&1&&(Ie.queryLanguageId=ve[0]),e.$set(Ie),(!le||de[0]&1)&&u!==(u=ve[15](ve[0]).description+"")&&(l.innerHTML=u),(!le||de[0]&2&&h!==(h=gn(ve[1])?"(whole document)":Yo(ve[1]))&&g.value!==h)&&(g.value=h);const De={};de[0]&1024&&(De.data=ve[10]?Vi:jo),b.$set(De),ve[10]?Ae?(Ae.p(ve,de),de[0]&1024&&$(Ae,1)):(Ae=XS(ve),Ae.c(),$(Ae,1),Ae.m(o,S)):Ae&&(Fe(),te(Ae,1,1,()=>{Ae=null}),Ue()),(!le||de[0]&256)&&(R.value=ve[8]);const He={};de[0]&2048&&(He.data=ve[11]?Vi:jo),L.$set(He),ve[11]?ye?(ye.p(ve,de),de[0]&2048&&$(ye,1)):(ye=$S(ve),ye.c(),$(ye,1),ye.m(F,null)):ye&&(Fe(),te(ye,1,1,()=>{ye=null}),Ue()),de[0]&2048&&ze(F,"jse-hide",!ve[11]);let Xe=H;H=he(ve),H===Xe?xe[H].p(ve,de):(Fe(),te(xe[Xe],1,1,()=>{xe[Xe]=null}),Ue(),I=xe[H],I?I.p(ve,de):(I=xe[H]=Ne[H](ve),I.c()),$(I,1),I.m(k,null)),de[0]&2048&&ze(U,"jse-hide-original-data",!ve[11]),(!le||de[0]&4096&&ae!==(ae=!!ve[12]))&&(q.disabled=ae)},i(ve){le||($(e.$$.fragment,ve),$(b.$$.fragment,ve),$(Ae),$(L.$$.fragment,ve),$(ye),$(I),le=!0)},o(ve){te(e.$$.fragment,ve),te(b.$$.fragment,ve),te(Ae),te(L.$$.fragment,ve),te(ye),te(I),le=!1},d(ve){Oe(e,ve),ve&&ue(t),ve&&ue(r),Oe(b),Ae&&Ae.d(),Oe(L),ye&&ye.d(),xe[H].d(),Pe=!1,on(Ve)}}}function $W(n){let e,t,r;return t=new vk({props:{$$slots:{default:[XW]},$$scope:{ctx:n}}}),{c(){e=ee("div"),ke(t.$$.fragment),T(e,"class","jse-modal jse-transform svelte-mr4kda")},m(i,o){fe(i,e,o),Ee(t,e,null),r=!0},p(i,o){const s={};o[0]&32767|o[1]&8&&(s.$$scope={dirty:o,ctx:i}),t.$set(s)},i(i){r||($(t.$$.fragment,i),r=!0)},o(i){te(t.$$.fragment,i),r=!1},d(i){i&&ue(e),Oe(t)}}}function eK(n){n.focus()}function tK(n,e,t){let r,i;const o=Sr("jsoneditor:TransformModal");let{id:s="transform-modal-"+uh()}=e,{json:a}=e,{selectedPath:l=[]}=e,{escapeControlCharacters:u}=e,{escapeUnicodeCharacters:f}=e,{queryLanguages:c}=e,{queryLanguageId:d}=e,{onChangeQueryLanguage:g}=e,{onRenderValue:h}=e,{onClassName:v}=e,{onTransform:m}=e;const{close:p}=ur("simple-modal"),y=`${s}:${Ge(l)}`,b=gi[y]||{};let _=gi.showWizard!==!1,w=gi.showOriginal!==!1,S=b.queryOptions||{},E=d===b.queryLanguageId&&b.query?b.query:U(d).createQuery(a,b.queryOptions||{}),P=b.isManual||!1,R,j={text:""};function U(k){return c.find(V=>V.id===k)||c[0]}function F(k){t(7,S=k),t(8,E=U(d).createQuery(a,k)),t(27,P=!1),o("updateQueryByWizard",{queryOptions:S,query:E,isManual:P})}function z(k){t(8,E=k.target.value),t(27,P=!0),o("handleChangeQuery",{query:E,isManual:P})}function D(k,V){try{o("previewTransform",{query:V});const K=U(d).executeQuery(k,V);t(13,j={json:K}),t(12,R=void 0)}catch(K){t(13,j={text:""}),t(12,R=K)}}const N=Ad(D,pO);function L(){try{o("handleTransform",{query:E});const k=U(d).executeQuery(r,E);m([{op:"replace",path:Ge(l),value:k}]),p()}catch(k){console.error(k),t(13,j={text:""}),t(12,R=k.toString())}}function X(){t(10,_=!_),t(26,gi.showWizard=_,gi)}function Q(){t(11,w=!w),t(26,gi.showOriginal=w,gi)}function A(k){o("handleChangeQueryLanguage",k),t(0,d=k),g(k);const V=U(d);t(8,E=V.createQuery(a,S)),t(27,P=!1)}return n.$$set=k=>{"id"in k&&t(22,s=k.id),"json"in k&&t(23,a=k.json),"selectedPath"in k&&t(1,l=k.selectedPath),"escapeControlCharacters"in k&&t(2,u=k.escapeControlCharacters),"escapeUnicodeCharacters"in k&&t(3,f=k.escapeUnicodeCharacters),"queryLanguages"in k&&t(4,c=k.queryLanguages),"queryLanguageId"in k&&t(0,d=k.queryLanguageId),"onChangeQueryLanguage"in k&&t(24,g=k.onChangeQueryLanguage),"onRenderValue"in k&&t(5,h=k.onRenderValue),"onClassName"in k&&t(6,v=k.onClassName),"onTransform"in k&&t(25,m=k.onTransform)},n.$$.update=()=>{n.$$.dirty[0]&8388610&&t(9,r=tt(a,l)),n.$$.dirty[0]&512&&t(14,i={json:r}),n.$$.dirty[0]&768&&N(r,E),n.$$.dirty[0]&201326977&&(t(26,gi[y]={queryOptions:S,query:E,queryLanguageId:d,isManual:P},gi),o("store state in memory",y,gi[y]))},[d,l,u,f,c,h,v,S,E,r,_,w,R,j,i,U,F,z,L,X,Q,A,s,a,g,m,gi,P]}class nK extends rt{constructor(e){super(),nt(this,e,tK,$W,Nt,{id:22,json:23,selectedPath:1,escapeControlCharacters:2,escapeUnicodeCharacters:3,queryLanguages:4,queryLanguageId:0,onChangeQueryLanguage:24,onRenderValue:5,onClassName:6,onTransform:25},null,[-1,-1])}}const Co={};function e2(n){let e,t,r,i,o,s,a;function l(f){n[12](f)}let u={showIndicator:!0,items:n[4]};return n[1]!==void 0&&(u.value=n[1]),o=new _s({props:u}),wt.push(()=>Ir(o,"value",l)),{c(){e=ee("tr"),t=ee("th"),t.textContent="Property",r=me(),i=ee("td"),ke(o.$$.fragment),T(t,"class","svelte-196ovtt"),T(i,"class","svelte-196ovtt")},m(f,c){fe(f,e,c),B(e,t),B(e,r),B(e,i),Ee(o,i,null),a=!0},p(f,c){const d={};c&16&&(d.items=f[4]),!s&&c&2&&(s=!0,d.value=f[1],qr(()=>s=!1)),o.$set(d)},i(f){a||($(o.$$.fragment,f),a=!0)},o(f){te(o.$$.fragment,f),a=!1},d(f){f&&ue(e),Oe(o)}}}function rK(n){let e,t,r,i,o,s,a,l,u,f,c,d,g,h,v,m,p,y,b,_,w,S,E,P,R,j,U,F,z,D,N,L;t=new RP({props:{title:n[3]?"Sort array items":"Sort object keys"}});let X=n[3]&&(n[4].length>1||n[1]===void 0)&&e2(n);function Q(k){n[13](k)}let A={showIndicator:!0,items:n[5],isClearable:!1};return n[2]!==void 0&&(A.value=n[2]),w=new _s({props:A}),wt.push(()=>Ir(w,"value",Q)),{c(){e=ee("div"),ke(t.$$.fragment),r=me(),i=ee("div"),o=ee("table"),s=ee("colgroup"),s.innerHTML=`<col width="25%"/> 
        <col width="75%"/>`,a=me(),l=ee("tbody"),u=ee("tr"),f=ee("th"),f.textContent="Path",c=me(),d=ee("td"),g=ee("input"),v=me(),X&&X.c(),m=me(),p=ee("tr"),y=ee("th"),y.textContent="Direction",b=me(),_=ee("td"),ke(w.$$.fragment),E=me(),P=ee("div"),R=me(),j=ee("div"),U=ee("button"),F=qe("Sort"),T(f,"class","svelte-196ovtt"),T(g,"class","jse-path svelte-196ovtt"),T(g,"type","text"),g.readOnly=!0,T(g,"title","Selected path"),g.value=h=gn(n[0])?"(whole document)":Yo(n[0]),T(d,"class","svelte-196ovtt"),T(y,"class","svelte-196ovtt"),T(_,"class","svelte-196ovtt"),T(o,"class","svelte-196ovtt"),T(P,"class","jse-space svelte-196ovtt"),T(U,"type","button"),T(U,"class","jse-primary svelte-196ovtt"),U.disabled=z=n[3]?!n[1]:!1,T(j,"class","jse-actions svelte-196ovtt"),T(i,"class","jse-contents svelte-196ovtt"),T(e,"class","jse-modal jse-sort svelte-196ovtt")},m(k,V){fe(k,e,V),Ee(t,e,null),B(e,r),B(e,i),B(i,o),B(o,s),B(o,a),B(o,l),B(l,u),B(u,f),B(u,c),B(u,d),B(d,g),B(l,v),X&&X.m(l,null),B(l,m),B(l,p),B(p,y),B(p,b),B(p,_),Ee(w,_,null),B(i,E),B(i,P),B(i,R),B(i,j),B(j,U),B(U,F),D=!0,N||(L=[Te(U,"click",n[6]),xu(iK.call(null,U))],N=!0)},p(k,[V]){const K={};V&8&&(K.title=k[3]?"Sort array items":"Sort object keys"),t.$set(K),(!D||V&1&&h!==(h=gn(k[0])?"(whole document)":Yo(k[0]))&&g.value!==h)&&(g.value=h),k[3]&&(k[4].length>1||k[1]===void 0)?X?(X.p(k,V),V&26&&$(X,1)):(X=e2(k),X.c(),$(X,1),X.m(l,m)):X&&(Fe(),te(X,1,1,()=>{X=null}),Ue());const H={};!S&&V&4&&(S=!0,H.value=k[2],qr(()=>S=!1)),w.$set(H),(!D||V&10&&z!==(z=k[3]?!k[1]:!1))&&(U.disabled=z)},i(k){D||($(t.$$.fragment,k),$(X),$(w.$$.fragment,k),D=!0)},o(k){te(t.$$.fragment,k),te(X),te(w.$$.fragment,k),D=!1},d(k){k&&ue(e),Oe(t),X&&X.d(),Oe(w),N=!1,on(L)}}}function iK(n){n.focus()}function oK(n,e,t){let r,i,o;const s=Sr("jsoneditor:SortModal");let{id:a}=e,{json:l}=e,{selectedPath:u}=e,{onSort:f}=e;const{close:c}=ur("simple-modal"),d=`${a}:${Ge(u)}`,g=tt(l,u),h={value:1,label:"ascending"},m=[h,{value:-1,label:"descending"}];let p=Co[d]&&Co[d].selectedProperty||void 0,y=Co[d]&&Co[d].selectedDirection||h;function b(E){return{value:E,label:gn(E)?"(whole item)":Ge(E)}}function _(){if(r){if(!p)return;const E=p.value,P=y.value,R=pz(l,u,E,P);f(R)}else if(ir(g)){const E=y.value,P=dz(l,u,E);f(P)}else console.error("Cannot sort: no array or object");c()}function w(E){p=E,t(1,p),t(4,o),t(11,i),t(3,r)}function S(E){y=E,t(2,y)}return n.$$set=E=>{"id"in E&&t(7,a=E.id),"json"in E&&t(8,l=E.json),"selectedPath"in E&&t(0,u=E.selectedPath),"onSort"in E&&t(9,f=E.onSort)},n.$$.update=()=>{n.$$.dirty&8&&t(11,i=r?rg(g):void 0),n.$$.dirty&2048&&t(4,o=i?i.map(b):void 0),n.$$.dirty&18&&p===void 0&&o&&o.length===1&&t(1,p=o[0]),n.$$.dirty&1030&&(t(10,Co[d]={selectedProperty:p,selectedDirection:y},Co),s("store state in memory",d,Co[d]))},t(3,r=Array.isArray(g)),[u,p,y,r,o,m,_,a,l,f,Co,i,w,S]}class sK extends rt{constructor(e){super(),nt(this,e,oK,rK,Nt,{id:7,json:8,selectedPath:0,onSort:9})}}function aK(n,e,t){const r=ur("simple-modal"),i=r.open,o=r.close;return[i,o]}class lK extends rt{constructor(e){super(),nt(this,e,aK,null,Nt,{open:0,close:1})}get open(){return this.$$.ctx[0]}get close(){return this.$$.ctx[1]}}function uK(n){let e,t,r={readOnly:n[2],indentation:n[3],externalContent:n[0],mainMenuBar:n[5],navigationBar:n[6],escapeControlCharacters:n[8],escapeUnicodeCharacters:n[9],validator:n[10],onError:n[13],onChange:n[22],onRequestRepair:n[23],onRenderValue:n[11],onClassName:n[12],onFocus:n[25],onBlur:n[26],onRenderMenu:n[20],onSortModal:n[28],onTransformModal:n[27]};return e=new zv({props:r}),n[54](e),{c(){ke(e.$$.fragment)},m(i,o){Ee(e,i,o),t=!0},p(i,o){const s={};o[0]&4&&(s.readOnly=i[2]),o[0]&8&&(s.indentation=i[3]),o[0]&1&&(s.externalContent=i[0]),o[0]&32&&(s.mainMenuBar=i[5]),o[0]&64&&(s.navigationBar=i[6]),o[0]&256&&(s.escapeControlCharacters=i[8]),o[0]&512&&(s.escapeUnicodeCharacters=i[9]),o[0]&1024&&(s.validator=i[10]),o[0]&8192&&(s.onError=i[13]),o[0]&2048&&(s.onRenderValue=i[11]),o[0]&4096&&(s.onClassName=i[12]),o[0]&1048576&&(s.onRenderMenu=i[20]),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){te(e.$$.fragment,i),t=!1},d(i){n[54](null),Oe(e,i)}}}function cK(n){let e,t,r={text:n[21](n[0]),readOnly:n[2],indentation:n[3],tabSize:n[4],mainMenuBar:n[5],statusBar:n[7],escapeUnicodeCharacters:n[9],validator:n[10],onChange:n[22],onSwitchToTreeMode:n[24],onError:n[13],onFocus:n[25],onBlur:n[26],onRenderMenu:n[20],onSortModal:n[28],onTransformModal:n[27]};return e=new KV({props:r}),n[53](e),{c(){ke(e.$$.fragment)},m(i,o){Ee(e,i,o),t=!0},p(i,o){const s={};o[0]&1&&(s.text=i[21](i[0])),o[0]&4&&(s.readOnly=i[2]),o[0]&8&&(s.indentation=i[3]),o[0]&16&&(s.tabSize=i[4]),o[0]&32&&(s.mainMenuBar=i[5]),o[0]&128&&(s.statusBar=i[7]),o[0]&512&&(s.escapeUnicodeCharacters=i[9]),o[0]&1024&&(s.validator=i[10]),o[0]&8192&&(s.onError=i[13]),o[0]&1048576&&(s.onRenderMenu=i[20]),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){te(e.$$.fragment,i),t=!1},d(i){n[53](null),Oe(e,i)}}}function t2(n){let e,t,r,i;const o=[cK,uK],s=[];function a(l,u){return l[1]===Fr.text||l[1]==="code"?0:1}return e=a(n),t=s[e]=o[e](n),{c(){t.c(),r=xt()},m(l,u){s[e].m(l,u),fe(l,r,u),i=!0},p(l,u){let f=e;e=a(l),e===f?s[e].p(l,u):(Fe(),te(s[f],1,1,()=>{s[f]=null}),Ue(),t=s[e],t?t.p(l,u):(t=s[e]=o[e](l),t.c()),$(t,1),t.m(r.parentNode,r))},i(l){i||($(t),i=!0)},o(l){te(t),i=!1},d(l){s[e].d(l),l&&ue(r)}}}function fK(n){let e,t=n[14],r,i=t2(n);return{c(){e=ee("div"),i.c(),T(e,"class","jse-main svelte-1tkifqe"),ze(e,"jse-focus",n[15])},m(o,s){fe(o,e,s),i.m(e,null),n[55](e),r=!0},p(o,s){s[0]&16384&&Nt(t,t=o[14])?(Fe(),te(i,1,1,Me),Ue(),i=t2(o),i.c(),$(i,1),i.m(e,null)):i.p(o,s),s[0]&32768&&ze(e,"jse-focus",o[15])},i(o){r||($(i),r=!0)},o(o){te(i),r=!1},d(o){o&&ue(e),i.d(o),n[55](null)}}}function hK(n){let e,t,r,i,o;function s(l){n[52](l)}let a={};return n[19]!==void 0&&(a.open=n[19]),e=new lK({props:a}),wt.push(()=>Ir(e,"open",s)),i=new vk({props:{$$slots:{default:[fK]},$$scope:{ctx:n}}}),{c(){ke(e.$$.fragment),r=me(),ke(i.$$.fragment)},m(l,u){Ee(e,l,u),fe(l,r,u),Ee(i,l,u),o=!0},p(l,u){const f={};!t&&u[0]&524288&&(t=!0,f.open=l[19],qr(()=>t=!1)),e.$set(f);const c={};u[0]&1572863|u[1]&536870912&&(c.$$scope={dirty:u,ctx:l}),i.$set(c)},i(l){o||($(e.$$.fragment,l),$(i.$$.fragment,l),o=!0)},o(l){te(e.$$.fragment,l),te(i.$$.fragment,l),o=!1},d(l){Oe(e,l),l&&ue(r),Oe(i,l)}}}function dK(n){let e,t;return e=new hO({props:{$$slots:{default:[hK]},$$scope:{ctx:n}}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i[0]&2097151|i[1]&536870912&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function FP(n){this.$set(n)}function UP(){this.$destroy()}function pK(n,e,t){let r;const i=Sr("jsoneditor:Main");let{content:o={text:""}}=e,{readOnly:s=!1}=e,{indentation:a=2}=e,{tabSize:l=4}=e,{mode:u=Fr.tree}=e,{mainMenuBar:f=!0}=e,{navigationBar:c=!0}=e,{statusBar:d=!0}=e,{escapeControlCharacters:g=!1}=e,{escapeUnicodeCharacters:h=!1}=e,{validator:v=null}=e,{queryLanguages:m=[Dz]}=e,{queryLanguageId:p=m[0].id}=e,{onChangeQueryLanguage:y=Kt}=e,{onChange:b=null}=e,{onRenderValue:_=aW}=e,{onClassName:w=()=>{}}=e,{onRenderMenu:S=Kt}=e,{onChangeMode:E=Kt}=e,{onError:P=be=>{console.error(be),alert(be.toString())}}=e,{onFocus:R=Kt}=e,{onBlur:j=Kt}=e,U=uh(),F=!1,z,D,N,L;function X(){return o}function Q(be){return ig(be)?be.text:JSON.stringify(be.json,null,a)}function A(be){i("set");const Z=bp(be);if(Z)throw new Error(Z);t(14,U=uh()),t(0,o=be)}function k(be){i("update");const Z=bp(be);if(Z)throw new Error(Z);t(0,o=be)}function V(be){if(ig(o))try{t(0,o={json:JSON.parse(o.text),text:void 0})}catch{throw new Error("Cannot apply patch: current document contains invalid JSON")}if(D)return D.patch(be);if(N)return N.patch(be)}function K(be){if(D)return D.expand(be);throw new Error(`Method expand is not available in mode "${u}"`)}function H(be){if(N)N.openTransformModal(be);else if(D)D.openTransformModal(be);else throw new Error(`Method transform is not available in mode "${u}"`)}function I(){if(N)return N.validate();if(D)return D.validate();throw new Error(`Method validate is not available in mode "${u}"`)}function M(){return D?D.acceptAutoRepair():o}function G(be){if(D)return D.scrollTo(be);throw new Error(`Method scrollTo is not available in mode "${u}"`)}function q(be){if(D)return D.findElement(be);throw new Error(`Method findElement is not available in mode "${u}"`)}function W(){N?N.focus():D&&D.focus()}function ae(){N&&N.refresh()}function le(be,Z,x){t(0,o=be),b&&b(be,Z,x)}async function Pe(){t(1,u=Fr.text),await Pn(),E(Fr.text)}async function Ve(){t(1,u=Fr.tree),await Pn(),E(Fr.tree)}function Ae(){t(15,F=!0),R&&R()}function ye(){t(15,F=!1),j&&j()}async function Ne(be){u!==be&&(t(1,u=be),await Pn(),W(),E(be))}let xe;const he={separator:!0};function ve(be){i("handleChangeQueryLanguage",be),t(29,p=be),y(be)}function de({id:be,json:Z,selectedPath:x,onTransform:C,onClose:O}){s||L(nK,{id:be,json:Z,selectedPath:x,escapeControlCharacters:g,escapeUnicodeCharacters:h,queryLanguages:m,queryLanguageId:p,onChangeQueryLanguage:ve,onRenderValue:_,onClassName:w,onTransform:C},QA,{onClose:O})}function Ie({id:be,json:Z,selectedPath:x,onSort:C,onClose:O}){s||L(sK,{id:be,json:Z,selectedPath:x,onSort:C},JA,{onClose:O})}function De(be){L=be,t(19,L)}function He(be){wt[be?"unshift":"push"](()=>{N=be,t(18,N)})}function Xe(be){wt[be?"unshift":"push"](()=>{D=be,t(17,D)})}function mt(be){wt[be?"unshift":"push"](()=>{z=be,t(16,z)})}return n.$$set=be=>{"content"in be&&t(0,o=be.content),"readOnly"in be&&t(2,s=be.readOnly),"indentation"in be&&t(3,a=be.indentation),"tabSize"in be&&t(4,l=be.tabSize),"mode"in be&&t(1,u=be.mode),"mainMenuBar"in be&&t(5,f=be.mainMenuBar),"navigationBar"in be&&t(6,c=be.navigationBar),"statusBar"in be&&t(7,d=be.statusBar),"escapeControlCharacters"in be&&t(8,g=be.escapeControlCharacters),"escapeUnicodeCharacters"in be&&t(9,h=be.escapeUnicodeCharacters),"validator"in be&&t(10,v=be.validator),"queryLanguages"in be&&t(30,m=be.queryLanguages),"queryLanguageId"in be&&t(29,p=be.queryLanguageId),"onChangeQueryLanguage"in be&&t(31,y=be.onChangeQueryLanguage),"onChange"in be&&t(32,b=be.onChange),"onRenderValue"in be&&t(11,_=be.onRenderValue),"onClassName"in be&&t(12,w=be.onClassName),"onRenderMenu"in be&&t(33,S=be.onRenderMenu),"onChangeMode"in be&&t(34,E=be.onChangeMode),"onError"in be&&t(13,P=be.onError),"onFocus"in be&&t(35,R=be.onFocus),"onBlur"in be&&t(36,j=be.onBlur)},n.$$.update=()=>{if(n.$$.dirty[0]&1){const be=bp(o);be&&console.error("Error: "+be)}n.$$.dirty[0]&2&&t(51,xe=[{text:"text",title:`Switch to text mode (current mode: ${u})`,className:"jse-group-button jse-first"+(u===Fr.text||u==="code"?" jse-selected":""),onClick:()=>Ne(Fr.text)},{text:"tree",title:`Switch to tree mode (current mode: ${u})`,className:"jse-group-button jse-last"+(u===Fr.tree?" jse-selected":""),onClick:()=>Ne(Fr.tree)}]),n.$$.dirty[1]&1048580&&t(20,r=(be,Z)=>{const x=MV(Z[0])?xe.concat(Z):xe.concat(he,Z);return S(be,x)||x}),n.$$.dirty[0]&2&&(i("mode changed to",u),u==="code"&&console.warn('Deprecation warning: "code" mode is renamed to "text". Please use mode="text" instead.'))},[o,u,s,a,l,f,c,d,g,h,v,_,w,P,U,F,z,D,N,L,r,Q,le,Pe,Ve,Ae,ye,de,Ie,p,m,y,b,S,E,R,j,X,A,k,V,K,H,I,M,G,q,W,ae,FP,UP,xe,De,He,Xe,mt]}class mK extends rt{constructor(e){super(),nt(this,e,pK,dK,Nt,{content:0,readOnly:2,indentation:3,tabSize:4,mode:1,mainMenuBar:5,navigationBar:6,statusBar:7,escapeControlCharacters:8,escapeUnicodeCharacters:9,validator:10,queryLanguages:30,queryLanguageId:29,onChangeQueryLanguage:31,onChange:32,onRenderValue:11,onClassName:12,onRenderMenu:33,onChangeMode:34,onError:13,onFocus:35,onBlur:36,get:37,set:38,update:39,patch:40,expand:41,transform:42,validate:43,acceptAutoRepair:44,scrollTo:45,findElement:46,focus:47,refresh:48,updateProps:49,destroy:50},null,[-1,-1])}get get(){return this.$$.ctx[37]}get set(){return this.$$.ctx[38]}get update(){return this.$$.ctx[39]}get patch(){return this.$$.ctx[40]}get expand(){return this.$$.ctx[41]}get transform(){return this.$$.ctx[42]}get validate(){return this.$$.ctx[43]}get acceptAutoRepair(){return this.$$.ctx[44]}get scrollTo(){return this.$$.ctx[45]}get findElement(){return this.$$.ctx[46]}get focus(){return this.$$.ctx[47]}get refresh(){return this.$$.ctx[48]}get updateProps(){return FP}get destroy(){return UP}}function qc(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var VP={exports:{}};(function(n,e){(function(t){n.exports=t()})(function(){return function t(r,i,o){function s(u,f){if(!i[u]){if(!r[u]){var c=typeof qc=="function"&&qc;if(!f&&c)return c(u,!0);if(a)return a(u,!0);var d=new Error("Cannot find module '"+u+"'");throw d.code="MODULE_NOT_FOUND",d}var g=i[u]={exports:{}};r[u][0].call(g.exports,function(h){return s(r[u][1][h]||h)},g,g.exports,t,r,i,o)}return i[u].exports}for(var a=typeof qc=="function"&&qc,l=0;l<o.length;l++)s(o[l]);return s}({1:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.regexpCode=i.getEsmExportName=i.getProperty=i.safeStringify=i.stringify=i.strConcat=i.addCodeArg=i.str=i._=i.nil=i._Code=i.Name=i.IDENTIFIER=i._CodeOrName=void 0;class o{}i._CodeOrName=o,i.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class s extends o{constructor(v){if(super(),!i.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}i.Name=s;class a extends o{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((m,p)=>`${m}${p}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((m,p)=>(p instanceof s&&(m[p.str]=(m[p.str]||0)+1),m),{})}}function l(h,...v){const m=[h[0]];let p=0;for(;p<v.length;)c(m,v[p]),m.push(h[++p]);return new a(m)}i._Code=a,i.nil=new a(""),i._=l;const u=new a("+");function f(h,...v){const m=[g(h[0])];let p=0;for(;p<v.length;)m.push(u),c(m,v[p]),m.push(u,g(h[++p]));return function(y){let b=1;for(;b<y.length-1;){if(y[b]===u){const _=d(y[b-1],y[b+1]);if(_!==void 0){y.splice(b-1,3,_);continue}y[b++]="+"}b++}}(m),new a(m)}function c(h,v){var m;v instanceof a?h.push(...v._items):h.push(v instanceof s?v:typeof(m=v)=="number"||typeof m=="boolean"||m===null?m:g(Array.isArray(m)?m.join(","):m))}function d(h,v){return v==='""'?h:h==='""'?v:typeof h=="string"?v instanceof s||h[h.length-1]!=='"'?void 0:typeof v!="string"?`${h.slice(0,-1)}${v}"`:v[0]==='"'?h.slice(0,-1)+v.slice(1):void 0:typeof v!="string"||v[0]!=='"'||h instanceof s?void 0:`"${h}${v.slice(1)}`}function g(h){return JSON.stringify(h).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}i.str=f,i.addCodeArg=c,i.strConcat=function(h,v){return v.emptyStr()?h:h.emptyStr()?v:f`${h}${v}`},i.stringify=function(h){return new a(g(h))},i.safeStringify=g,i.getProperty=function(h){return typeof h=="string"&&i.IDENTIFIER.test(h)?new a(`.${h}`):l`[${h}]`},i.getEsmExportName=function(h){if(typeof h=="string"&&i.IDENTIFIER.test(h))return new a(`${h}`);throw new Error(`CodeGen: invalid export name: ${h}, use explicit $id name mapping`)},i.regexpCode=function(h){return new a(h.toString())}},{}],2:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.or=i.and=i.not=i.CodeGen=i.operators=i.varKinds=i.ValueScopeName=i.ValueScope=i.Scope=i.Name=i.regexpCode=i.stringify=i.getProperty=i.nil=i.strConcat=i.str=i._=void 0;const o=t("./code"),s=t("./scope");var a=t("./code");Object.defineProperty(i,"_",{enumerable:!0,get(){return a._}}),Object.defineProperty(i,"str",{enumerable:!0,get(){return a.str}}),Object.defineProperty(i,"strConcat",{enumerable:!0,get(){return a.strConcat}}),Object.defineProperty(i,"nil",{enumerable:!0,get(){return a.nil}}),Object.defineProperty(i,"getProperty",{enumerable:!0,get(){return a.getProperty}}),Object.defineProperty(i,"stringify",{enumerable:!0,get(){return a.stringify}}),Object.defineProperty(i,"regexpCode",{enumerable:!0,get(){return a.regexpCode}}),Object.defineProperty(i,"Name",{enumerable:!0,get(){return a.Name}});var l=t("./scope");Object.defineProperty(i,"Scope",{enumerable:!0,get(){return l.Scope}}),Object.defineProperty(i,"ValueScope",{enumerable:!0,get(){return l.ValueScope}}),Object.defineProperty(i,"ValueScopeName",{enumerable:!0,get(){return l.ValueScopeName}}),Object.defineProperty(i,"varKinds",{enumerable:!0,get(){return l.varKinds}}),i.operators={GT:new o._Code(">"),GTE:new o._Code(">="),LT:new o._Code("<"),LTE:new o._Code("<="),EQ:new o._Code("==="),NEQ:new o._Code("!=="),NOT:new o._Code("!"),OR:new o._Code("||"),AND:new o._Code("&&"),ADD:new o._Code("+")};class u{optimizeNodes(){return this}optimizeNames(M,G){return this}}class f extends u{constructor(M,G,q){super(),this.varKind=M,this.name=G,this.rhs=q}render({es5:M,_n:G}){return`${M?s.varKinds.var:this.varKind} ${this.name}${this.rhs===void 0?"":` = ${this.rhs}`};`+G}optimizeNames(M,G){if(M[this.name.str])return this.rhs&&(this.rhs=X(this.rhs,M,G)),this}get names(){return this.rhs instanceof o._CodeOrName?this.rhs.names:{}}}class c extends u{constructor(M,G,q){super(),this.lhs=M,this.rhs=G,this.sideEffects=q}render({_n:M}){return`${this.lhs} = ${this.rhs};`+M}optimizeNames(M,G){if(!(this.lhs instanceof o.Name)||M[this.lhs.str]||this.sideEffects)return this.rhs=X(this.rhs,M,G),this}get names(){return L(this.lhs instanceof o.Name?{}:{...this.lhs.names},this.rhs)}}class d extends c{constructor(M,G,q,W){super(M,q,W),this.op=G}render({_n:M}){return`${this.lhs} ${this.op}= ${this.rhs};`+M}}class g extends u{constructor(M){super(),this.label=M,this.names={}}render({_n:M}){return`${this.label}:`+M}}class h extends u{constructor(M){super(),this.label=M,this.names={}}render({_n:M}){return`break${this.label?` ${this.label}`:""};`+M}}class v extends u{constructor(M){super(),this.error=M}render({_n:M}){return`throw ${this.error};`+M}get names(){return this.error.names}}class m extends u{constructor(M){super(),this.code=M}render({_n:M}){return`${this.code};`+M}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(M,G){return this.code=X(this.code,M,G),this}get names(){return this.code instanceof o._CodeOrName?this.code.names:{}}}class p extends u{constructor(M=[]){super(),this.nodes=M}render(M){return this.nodes.reduce((G,q)=>G+q.render(M),"")}optimizeNodes(){const{nodes:M}=this;let G=M.length;for(;G--;){const q=M[G].optimizeNodes();Array.isArray(q)?M.splice(G,1,...q):q?M[G]=q:M.splice(G,1)}return M.length>0?this:void 0}optimizeNames(M,G){const{nodes:q}=this;let W=q.length;for(;W--;){const ae=q[W];ae.optimizeNames(M,G)||(Q(M,ae.names),q.splice(W,1))}return q.length>0?this:void 0}get names(){return this.nodes.reduce((M,G)=>N(M,G.names),{})}}class y extends p{render(M){return"{"+M._n+super.render(M)+"}"+M._n}}class b extends p{}class _ extends y{}_.kind="else";class w extends y{constructor(M,G){super(G),this.condition=M}render(M){let G=`if(${this.condition})`+super.render(M);return this.else&&(G+="else "+this.else.render(M)),G}optimizeNodes(){super.optimizeNodes();const M=this.condition;if(M===!0)return this.nodes;let G=this.else;if(G){const q=G.optimizeNodes();G=this.else=Array.isArray(q)?new _(q):q}return G?M===!1?G instanceof w?G:G.nodes:this.nodes.length?this:new w(A(M),G instanceof w?[G]:G.nodes):M!==!1&&this.nodes.length?this:void 0}optimizeNames(M,G){var q;if(this.else=(q=this.else)===null||q===void 0?void 0:q.optimizeNames(M,G),super.optimizeNames(M,G)||this.else)return this.condition=X(this.condition,M,G),this}get names(){const M=super.names;return L(M,this.condition),this.else&&N(M,this.else.names),M}}w.kind="if";class S extends y{}S.kind="for";class E extends S{constructor(M){super(),this.iteration=M}render(M){return`for(${this.iteration})`+super.render(M)}optimizeNames(M,G){if(super.optimizeNames(M,G))return this.iteration=X(this.iteration,M,G),this}get names(){return N(super.names,this.iteration.names)}}class P extends S{constructor(M,G,q,W){super(),this.varKind=M,this.name=G,this.from=q,this.to=W}render(M){const G=M.es5?s.varKinds.var:this.varKind,{name:q,from:W,to:ae}=this;return`for(${G} ${q}=${W}; ${q}<${ae}; ${q}++)`+super.render(M)}get names(){const M=L(super.names,this.from);return L(M,this.to)}}class R extends S{constructor(M,G,q,W){super(),this.loop=M,this.varKind=G,this.name=q,this.iterable=W}render(M){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(M)}optimizeNames(M,G){if(super.optimizeNames(M,G))return this.iterable=X(this.iterable,M,G),this}get names(){return N(super.names,this.iterable.names)}}class j extends y{constructor(M,G,q){super(),this.name=M,this.args=G,this.async=q}render(M){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(M)}}j.kind="func";class U extends p{render(M){return"return "+super.render(M)}}U.kind="return";class F extends y{render(M){let G="try"+super.render(M);return this.catch&&(G+=this.catch.render(M)),this.finally&&(G+=this.finally.render(M)),G}optimizeNodes(){var M,G;return super.optimizeNodes(),(M=this.catch)===null||M===void 0||M.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(M,G){var q,W;return super.optimizeNames(M,G),(q=this.catch)===null||q===void 0||q.optimizeNames(M,G),(W=this.finally)===null||W===void 0||W.optimizeNames(M,G),this}get names(){const M=super.names;return this.catch&&N(M,this.catch.names),this.finally&&N(M,this.finally.names),M}}class z extends y{constructor(M){super(),this.error=M}render(M){return`catch(${this.error})`+super.render(M)}}z.kind="catch";class D extends y{render(M){return"finally"+super.render(M)}}D.kind="finally";function N(I,M){for(const G in M)I[G]=(I[G]||0)+(M[G]||0);return I}function L(I,M){return M instanceof o._CodeOrName?N(I,M.names):I}function X(I,M,G){return I instanceof o.Name?W(I):(q=I)instanceof o._Code&&q._items.some(ae=>ae instanceof o.Name&&M[ae.str]===1&&G[ae.str]!==void 0)?new o._Code(I._items.reduce((ae,le)=>(le instanceof o.Name&&(le=W(le)),le instanceof o._Code?ae.push(...le._items):ae.push(le),ae),[])):I;var q;function W(ae){const le=G[ae.str];return le===void 0||M[ae.str]!==1?ae:(delete M[ae.str],le)}}function Q(I,M){for(const G in M)I[G]=(I[G]||0)-(M[G]||0)}function A(I){return typeof I=="boolean"||typeof I=="number"||I===null?!I:o._`!${H(I)}`}i.CodeGen=class{constructor(I,M={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...M,_n:M.lines?`
`:""},this._extScope=I,this._scope=new s.Scope({parent:I}),this._nodes=[new b]}toString(){return this._root.render(this.opts)}name(I){return this._scope.name(I)}scopeName(I){return this._extScope.name(I)}scopeValue(I,M){const G=this._extScope.value(I,M);return(this._values[G.prefix]||(this._values[G.prefix]=new Set)).add(G),G}getScopeValue(I,M){return this._extScope.getValue(I,M)}scopeRefs(I){return this._extScope.scopeRefs(I,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(I,M,G,q){const W=this._scope.toName(M);return G!==void 0&&q&&(this._constants[W.str]=G),this._leafNode(new f(I,W,G)),W}const(I,M,G){return this._def(s.varKinds.const,I,M,G)}let(I,M,G){return this._def(s.varKinds.let,I,M,G)}var(I,M,G){return this._def(s.varKinds.var,I,M,G)}assign(I,M,G){return this._leafNode(new c(I,M,G))}add(I,M){return this._leafNode(new d(I,i.operators.ADD,M))}code(I){return typeof I=="function"?I():I!==o.nil&&this._leafNode(new m(I)),this}object(...I){const M=["{"];for(const[G,q]of I)M.length>1&&M.push(","),M.push(G),(G!==q||this.opts.es5)&&(M.push(":"),(0,o.addCodeArg)(M,q));return M.push("}"),new o._Code(M)}if(I,M,G){if(this._blockNode(new w(I)),M&&G)this.code(M).else().code(G).endIf();else if(M)this.code(M).endIf();else if(G)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(I){return this._elseNode(new w(I))}else(){return this._elseNode(new _)}endIf(){return this._endBlockNode(w,_)}_for(I,M){return this._blockNode(I),M&&this.code(M).endFor(),this}for(I,M){return this._for(new E(I),M)}forRange(I,M,G,q,W=this.opts.es5?s.varKinds.var:s.varKinds.let){const ae=this._scope.toName(I);return this._for(new P(W,ae,M,G),()=>q(ae))}forOf(I,M,G,q=s.varKinds.const){const W=this._scope.toName(I);if(this.opts.es5){const ae=M instanceof o.Name?M:this.var("_arr",M);return this.forRange("_i",0,o._`${ae}.length`,le=>{this.var(W,o._`${ae}[${le}]`),G(W)})}return this._for(new R("of",q,W,M),()=>G(W))}forIn(I,M,G,q=this.opts.es5?s.varKinds.var:s.varKinds.const){if(this.opts.ownProperties)return this.forOf(I,o._`Object.keys(${M})`,G);const W=this._scope.toName(I);return this._for(new R("in",q,W,M),()=>G(W))}endFor(){return this._endBlockNode(S)}label(I){return this._leafNode(new g(I))}break(I){return this._leafNode(new h(I))}return(I){const M=new U;if(this._blockNode(M),this.code(I),M.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(U)}try(I,M,G){if(!M&&!G)throw new Error('CodeGen: "try" without "catch" and "finally"');const q=new F;if(this._blockNode(q),this.code(I),M){const W=this.name("e");this._currNode=q.catch=new z(W),M(W)}return G&&(this._currNode=q.finally=new D,this.code(G)),this._endBlockNode(z,D)}throw(I){return this._leafNode(new v(I))}block(I,M){return this._blockStarts.push(this._nodes.length),I&&this.code(I).endBlock(M),this}endBlock(I){const M=this._blockStarts.pop();if(M===void 0)throw new Error("CodeGen: not in self-balancing block");const G=this._nodes.length-M;if(G<0||I!==void 0&&G!==I)throw new Error(`CodeGen: wrong number of nodes: ${G} vs ${I} expected`);return this._nodes.length=M,this}func(I,M=o.nil,G,q){return this._blockNode(new j(I,M,G)),q&&this.code(q).endFunc(),this}endFunc(){return this._endBlockNode(j)}optimize(I=1){for(;I-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(I){return this._currNode.nodes.push(I),this}_blockNode(I){this._currNode.nodes.push(I),this._nodes.push(I)}_endBlockNode(I,M){const G=this._currNode;if(G instanceof I||M&&G instanceof M)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${M?`${I.kind}/${M.kind}`:I.kind}"`)}_elseNode(I){const M=this._currNode;if(!(M instanceof w))throw new Error('CodeGen: "else" without "if"');return this._currNode=M.else=I,this}get _root(){return this._nodes[0]}get _currNode(){const I=this._nodes;return I[I.length-1]}set _currNode(I){const M=this._nodes;M[M.length-1]=I}},i.not=A;const k=K(i.operators.AND);i.and=function(...I){return I.reduce(k)};const V=K(i.operators.OR);function K(I){return(M,G)=>M===o.nil?G:G===o.nil?M:o._`${H(M)} ${I} ${H(G)}`}function H(I){return I instanceof o.Name?I:o._`(${I})`}i.or=function(...I){return I.reduce(V)}},{"./code":1,"./scope":3}],3:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.ValueScope=i.ValueScopeName=i.Scope=i.varKinds=i.UsedValueState=void 0;const o=t("./code");class s extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var a;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(a=i.UsedValueState||(i.UsedValueState={})),i.varKinds={const:new o.Name("const"),let:new o.Name("let"),var:new o.Name("var")};class l{constructor({prefixes:d,parent:g}={}){this._names={},this._prefixes=d,this._parent=g}toName(d){return d instanceof o.Name?d:this.name(d)}name(d){return new o.Name(this._newName(d))}_newName(d){return`${d}${(this._names[d]||this._nameGroup(d)).index++}`}_nameGroup(d){var g,h;if(((h=(g=this._parent)===null||g===void 0?void 0:g._prefixes)===null||h===void 0?void 0:h.has(d))||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}i.Scope=l;class u extends o.Name{constructor(d,g){super(g),this.prefix=d}setValue(d,{property:g,itemIndex:h}){this.value=d,this.scopePath=o._`.${new o.Name(g)}[${h}]`}}i.ValueScopeName=u;const f=o._`\n`;i.ValueScope=class extends l{constructor(c){super(c),this._values={},this._scope=c.scope,this.opts={...c,_n:c.lines?f:o.nil}}get(){return this._scope}name(c){return new u(c,this._newName(c))}value(c,d){var g;if(d.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const h=this.toName(c),{prefix:v}=h,m=(g=d.key)!==null&&g!==void 0?g:d.ref;let p=this._values[v];if(p){const _=p.get(m);if(_)return _}else p=this._values[v]=new Map;p.set(m,h);const y=this._scope[v]||(this._scope[v]=[]),b=y.length;return y[b]=d.ref,h.setValue(d,{property:v,itemIndex:b}),h}getValue(c,d){const g=this._values[c];if(g)return g.get(d)}scopeRefs(c,d=this._values){return this._reduceValues(d,g=>{if(g.scopePath===void 0)throw new Error(`CodeGen: name "${g}" has no value`);return o._`${c}${g.scopePath}`})}scopeCode(c=this._values,d,g){return this._reduceValues(c,h=>{if(h.value===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return h.value.code},d,g)}_reduceValues(c,d,g={},h){let v=o.nil;for(const m in c){const p=c[m];if(!p)continue;const y=g[m]=g[m]||new Map;p.forEach(b=>{if(y.has(b))return;y.set(b,a.Started);let _=d(b);if(_)v=o._`${v}${this.opts.es5?i.varKinds.var:i.varKinds.const} ${b} = ${_};${this.opts._n}`;else{if(!(_=h==null?void 0:h(b)))throw new s(b);v=o._`${v}${_}${this.opts._n}`}y.set(b,a.Completed)})}return v}}},{"./code":1}],4:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.extendErrors=i.resetErrorsCount=i.reportExtraError=i.reportError=i.keyword$DataError=i.keywordError=void 0;const o=t("./codegen"),s=t("./util"),a=t("./names");function l(h,v){const m=h.const("err",v);h.if(o._`${a.default.vErrors} === null`,()=>h.assign(a.default.vErrors,o._`[${m}]`),o._`${a.default.vErrors}.push(${m})`),h.code(o._`${a.default.errors}++`)}function u(h,v){const{gen:m,validateName:p,schemaEnv:y}=h;y.$async?m.throw(o._`new ${h.ValidationError}(${v})`):(m.assign(o._`${p}.errors`,v),m.return(!1))}i.keywordError={message({keyword:h}){return o.str`must pass "${h}" keyword validation`}},i.keyword$DataError={message({keyword:h,schemaType:v}){return v?o.str`"${h}" keyword must be ${v} ($data)`:o.str`"${h}" keyword is invalid ($data)`}},i.reportError=function(h,v=i.keywordError,m,p){const{it:y}=h,{gen:b,compositeRule:_,allErrors:w}=y,S=c(h,v,m);(p!=null?p:_||w)?l(b,S):u(y,o._`[${S}]`)},i.reportExtraError=function(h,v=i.keywordError,m){const{it:p}=h,{gen:y,compositeRule:b,allErrors:_}=p;l(y,c(h,v,m)),b||_||u(p,a.default.vErrors)},i.resetErrorsCount=function(h,v){h.assign(a.default.errors,v),h.if(o._`${a.default.vErrors} !== null`,()=>h.if(v,()=>h.assign(o._`${a.default.vErrors}.length`,v),()=>h.assign(a.default.vErrors,null)))},i.extendErrors=function({gen:h,keyword:v,schemaValue:m,data:p,errsCount:y,it:b}){if(y===void 0)throw new Error("ajv implementation error");const _=h.name("err");h.forRange("i",y,a.default.errors,w=>{h.const(_,o._`${a.default.vErrors}[${w}]`),h.if(o._`${_}.instancePath === undefined`,()=>h.assign(o._`${_}.instancePath`,(0,o.strConcat)(a.default.instancePath,b.errorPath))),h.assign(o._`${_}.schemaPath`,o.str`${b.errSchemaPath}/${v}`),b.opts.verbose&&(h.assign(o._`${_}.schema`,m),h.assign(o._`${_}.data`,p))})};const f={keyword:new o.Name("keyword"),schemaPath:new o.Name("schemaPath"),params:new o.Name("params"),propertyName:new o.Name("propertyName"),message:new o.Name("message"),schema:new o.Name("schema"),parentSchema:new o.Name("parentSchema")};function c(h,v,m){const{createErrors:p}=h.it;return p===!1?o._`{}`:function(y,b,_={}){const{gen:w,it:S}=y,E=[d(S,_),g(y,_)];return function(P,{params:R,message:j},U){const{keyword:F,data:z,schemaValue:D,it:N}=P,{opts:L,propertyName:X,topSchemaRef:Q,schemaPath:A}=N;U.push([f.keyword,F],[f.params,typeof R=="function"?R(P):R||o._`{}`]),L.messages&&U.push([f.message,typeof j=="function"?j(P):j]),L.verbose&&U.push([f.schema,D],[f.parentSchema,o._`${Q}${A}`],[a.default.data,z]),X&&U.push([f.propertyName,X])}(y,b,E),w.object(...E)}(h,v,m)}function d({errorPath:h},{instancePath:v}){const m=v?o.str`${h}${(0,s.getErrorPath)(v,s.Type.Str)}`:h;return[a.default.instancePath,(0,o.strConcat)(a.default.instancePath,m)]}function g({keyword:h,it:{errSchemaPath:v}},{schemaPath:m,parentSchema:p}){let y=p?v:o.str`${v}/${h}`;return m&&(y=o.str`${y}${(0,s.getErrorPath)(m,s.Type.Str)}`),[f.schemaPath,y]}},{"./codegen":2,"./names":6,"./util":10}],5:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.resolveSchema=i.getCompilingSchema=i.resolveRef=i.compileSchema=i.SchemaEnv=void 0;const o=t("./codegen"),s=t("../runtime/validation_error"),a=t("./names"),l=t("./resolve"),u=t("./util"),f=t("./validate");class c{constructor(_){var w;let S;this.refs={},this.dynamicAnchors={},typeof _.schema=="object"&&(S=_.schema),this.schema=_.schema,this.schemaId=_.schemaId,this.root=_.root||this,this.baseId=(w=_.baseId)!==null&&w!==void 0?w:(0,l.normalizeId)(S==null?void 0:S[_.schemaId||"$id"]),this.schemaPath=_.schemaPath,this.localRefs=_.localRefs,this.meta=_.meta,this.$async=S==null?void 0:S.$async,this.refs={}}}function d(b){const _=h.call(this,b);if(_)return _;const w=(0,l.getFullPath)(this.opts.uriResolver,b.root.baseId),{es5:S,lines:E}=this.opts.code,{ownProperties:P}=this.opts,R=new o.CodeGen(this.scope,{es5:S,lines:E,ownProperties:P});let j;b.$async&&(j=R.scopeValue("Error",{ref:s.default,code:o._`require("ajv/dist/runtime/validation_error").default`}));const U=R.scopeName("validate");b.validateName=U;const F={gen:R,allErrors:this.opts.allErrors,data:a.default.data,parentData:a.default.parentData,parentDataProperty:a.default.parentDataProperty,dataNames:[a.default.data],dataPathArr:[o.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:R.scopeValue("schema",this.opts.code.source===!0?{ref:b.schema,code:(0,o.stringify)(b.schema)}:{ref:b.schema}),validateName:U,ValidationError:j,schema:b.schema,schemaEnv:b,rootId:w,baseId:b.baseId||w,schemaPath:o.nil,errSchemaPath:b.schemaPath||(this.opts.jtd?"":"#"),errorPath:o._`""`,opts:this.opts,self:this};let z;try{this._compilations.add(b),(0,f.validateFunctionCode)(F),R.optimize(this.opts.code.optimize);const D=R.toString();z=`${R.scopeRefs(a.default.scope)}return ${D}`,this.opts.code.process&&(z=this.opts.code.process(z,b));const N=new Function(`${a.default.self}`,`${a.default.scope}`,z)(this,this.scope.get());if(this.scope.value(U,{ref:N}),N.errors=null,N.schema=b.schema,N.schemaEnv=b,b.$async&&(N.$async=!0),this.opts.code.source===!0&&(N.source={validateName:U,validateCode:D,scopeValues:R._values}),this.opts.unevaluated){const{props:L,items:X}=F;N.evaluated={props:L instanceof o.Name?void 0:L,items:X instanceof o.Name?void 0:X,dynamicProps:L instanceof o.Name,dynamicItems:X instanceof o.Name},N.source&&(N.source.evaluated=(0,o.stringify)(N.evaluated))}return b.validate=N,b}catch(D){throw delete b.validate,delete b.validateName,z&&this.logger.error("Error compiling schema, function code:",z),D}finally{this._compilations.delete(b)}}function g(b){return(0,l.inlineRef)(b.schema,this.opts.inlineRefs)?b.schema:b.validate?b:d.call(this,b)}function h(b){for(const S of this._compilations)if((_=S).schema===(w=b).schema&&_.root===w.root&&_.baseId===w.baseId)return S;var _,w}function v(b,_){let w;for(;typeof(w=this.refs[_])=="string";)_=w;return w||this.schemas[_]||m.call(this,b,_)}function m(b,_){const w=this.opts.uriResolver.parse(_),S=(0,l._getFullPath)(this.opts.uriResolver,w);let E=(0,l.getFullPath)(this.opts.uriResolver,b.baseId,void 0);if(Object.keys(b.schema).length>0&&S===E)return y.call(this,w,b);const P=(0,l.normalizeId)(S),R=this.refs[P]||this.schemas[P];if(typeof R=="string"){const j=m.call(this,b,R);return typeof(j==null?void 0:j.schema)!="object"?void 0:y.call(this,w,j)}if(typeof(R==null?void 0:R.schema)=="object"){if(R.validate||d.call(this,R),P===(0,l.normalizeId)(_)){const{schema:j}=R,{schemaId:U}=this.opts,F=j[U];return F&&(E=(0,l.resolveUrl)(this.opts.uriResolver,E,F)),new c({schema:j,schemaId:U,root:b,baseId:E})}return y.call(this,w,R)}}i.SchemaEnv=c,i.compileSchema=d,i.resolveRef=function(b,_,w){var S;w=(0,l.resolveUrl)(this.opts.uriResolver,_,w);const E=b.refs[w];if(E)return E;let P=v.call(this,b,w);if(P===void 0){const R=(S=b.localRefs)===null||S===void 0?void 0:S[w],{schemaId:j}=this.opts;R&&(P=new c({schema:R,schemaId:j,root:b,baseId:_}))}return P!==void 0?b.refs[w]=g.call(this,P):void 0},i.getCompilingSchema=h,i.resolveSchema=m;const p=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function y(b,{baseId:_,schema:w,root:S}){var E;if(((E=b.fragment)===null||E===void 0?void 0:E[0])!=="/")return;for(const j of b.fragment.slice(1).split("/")){if(typeof w=="boolean")return;const U=w[(0,u.unescapeFragment)(j)];if(U===void 0)return;const F=typeof(w=U)=="object"&&w[this.opts.schemaId];!p.has(j)&&F&&(_=(0,l.resolveUrl)(this.opts.uriResolver,_,F))}let P;if(typeof w!="boolean"&&w.$ref&&!(0,u.schemaHasRulesButRef)(w,this.RULES)){const j=(0,l.resolveUrl)(this.opts.uriResolver,_,w.$ref);P=m.call(this,S,j)}const{schemaId:R}=this.opts;return P=P||new c({schema:w,schemaId:R,root:S,baseId:_}),P.schema!==P.root.schema?P:void 0}},{"../runtime/validation_error":24,"./codegen":2,"./names":6,"./resolve":8,"./util":10,"./validate":15}],6:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("./codegen"),s={data:new o.Name("data"),valCxt:new o.Name("valCxt"),instancePath:new o.Name("instancePath"),parentData:new o.Name("parentData"),parentDataProperty:new o.Name("parentDataProperty"),rootData:new o.Name("rootData"),dynamicAnchors:new o.Name("dynamicAnchors"),vErrors:new o.Name("vErrors"),errors:new o.Name("errors"),this:new o.Name("this"),self:new o.Name("self"),scope:new o.Name("scope"),json:new o.Name("json"),jsonPos:new o.Name("jsonPos"),jsonLen:new o.Name("jsonLen"),jsonPart:new o.Name("jsonPart")};i.default=s},{"./codegen":2}],7:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("./resolve");class s extends Error{constructor(l,u,f,c){super(c||`can't resolve reference ${f} from id ${u}`),this.missingRef=(0,o.resolveUrl)(l,u,f),this.missingSchema=(0,o.normalizeId)((0,o.getFullPath)(l,this.missingRef))}}i.default=s},{"./resolve":8}],8:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.getSchemaRefs=i.resolveUrl=i.normalizeId=i._getFullPath=i.getFullPath=i.inlineRef=void 0;const o=t("./util"),s=t("fast-deep-equal"),a=t("json-schema-traverse"),l=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);i.inlineRef=function(p,y=!0){return typeof p=="boolean"||(y===!0?!f(p):!!y&&c(p)<=y)};const u=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function f(p){for(const y in p){if(u.has(y))return!0;const b=p[y];if(Array.isArray(b)&&b.some(f)||typeof b=="object"&&f(b))return!0}return!1}function c(p){let y=0;for(const b in p)if(b==="$ref"||(y++,!l.has(b)&&(typeof p[b]=="object"&&(0,o.eachItem)(p[b],_=>y+=c(_)),y===1/0)))return 1/0;return y}function d(p,y="",b){b!==!1&&(y=v(y));const _=p.parse(y);return g(p,_)}function g(p,y){return p.serialize(y).split("#")[0]+"#"}i.getFullPath=d,i._getFullPath=g;const h=/#\/?$/;function v(p){return p?p.replace(h,""):""}i.normalizeId=v,i.resolveUrl=function(p,y,b){return b=v(b),p.resolve(y,b)};const m=/^[a-z_][-a-z0-9._]*$/i;i.getSchemaRefs=function(p,y){if(typeof p=="boolean")return{};const{schemaId:b,uriResolver:_}=this.opts,w=v(p[b]||y),S={"":w},E=d(_,w,!1),P={},R=new Set;return a(p,{allKeys:!0},(F,z,D,N)=>{if(N===void 0)return;const L=E+z;let X=S[N];function Q(k){if(k=v(X?(0,this.opts.uriResolver.resolve)(X,k):k),R.has(k))throw U(k);R.add(k);let V=this.refs[k];return typeof V=="string"&&(V=this.refs[V]),typeof V=="object"?j(F,V.schema,k):k!==v(L)&&(k[0]==="#"?(j(F,P[k],k),P[k]=F):this.refs[k]=L),k}function A(k){if(typeof k=="string"){if(!m.test(k))throw new Error(`invalid anchor "${k}"`);Q.call(this,`#${k}`)}}typeof F[b]=="string"&&(X=Q.call(this,F[b])),A.call(this,F.$anchor),A.call(this,F.$dynamicAnchor),S[z]=X}),P;function j(F,z,D){if(z!==void 0&&!s(F,z))throw U(D)}function U(F){return new Error(`reference "${F}" resolves to more than one schema`)}}},{"./util":10,"fast-deep-equal":63,"json-schema-traverse":64}],9:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.getRules=i.isJSONType=void 0;const o=new Set(["string","number","integer","boolean","null","object","array"]);i.isJSONType=function(s){return typeof s=="string"&&o.has(s)},i.getRules=function(){const s={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...s,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},s.number,s.string,s.array,s.object],post:{rules:[]},all:{},keywords:{}}}},{}],10:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.checkStrictMode=i.getErrorPath=i.Type=i.useFunc=i.setEvaluated=i.evaluatedPropsToName=i.mergeEvaluated=i.eachItem=i.unescapeJsonPointer=i.escapeJsonPointer=i.escapeFragment=i.unescapeFragment=i.schemaRefOrVal=i.schemaHasRulesButRef=i.schemaHasRules=i.checkUnknownRules=i.alwaysValidSchema=i.toHash=void 0;const o=t("./codegen"),s=t("./codegen/code");function a(p,y=p.schema){const{opts:b,self:_}=p;if(!b.strictSchema||typeof y=="boolean")return;const w=_.RULES.keywords;for(const S in y)w[S]||m(p,`unknown keyword: "${S}"`)}function l(p,y){if(typeof p=="boolean")return!p;for(const b in p)if(y[b])return!0;return!1}function u(p){return typeof p=="number"?`${p}`:p.replace(/~/g,"~0").replace(/\//g,"~1")}function f(p){return p.replace(/~1/g,"/").replace(/~0/g,"~")}function c({mergeNames:p,mergeToName:y,mergeValues:b,resultToName:_}){return(w,S,E,P)=>{const R=E===void 0?S:E instanceof o.Name?(S instanceof o.Name?p(w,S,E):y(w,S,E),E):S instanceof o.Name?(y(w,E,S),S):b(S,E);return P!==o.Name||R instanceof o.Name?R:_(w,R)}}function d(p,y){if(y===!0)return p.var("props",!0);const b=p.var("props",o._`{}`);return y!==void 0&&g(p,b,y),b}function g(p,y,b){Object.keys(b).forEach(_=>p.assign(o._`${y}${(0,o.getProperty)(_)}`,!0))}i.toHash=function(p){const y={};for(const b of p)y[b]=!0;return y},i.alwaysValidSchema=function(p,y){return typeof y=="boolean"?y:Object.keys(y).length===0||(a(p,y),!l(y,p.self.RULES.all))},i.checkUnknownRules=a,i.schemaHasRules=l,i.schemaHasRulesButRef=function(p,y){if(typeof p=="boolean")return!p;for(const b in p)if(b!=="$ref"&&y.all[b])return!0;return!1},i.schemaRefOrVal=function({topSchemaRef:p,schemaPath:y},b,_,w){if(!w){if(typeof b=="number"||typeof b=="boolean")return b;if(typeof b=="string")return o._`${b}`}return o._`${p}${y}${(0,o.getProperty)(_)}`},i.unescapeFragment=function(p){return f(decodeURIComponent(p))},i.escapeFragment=function(p){return encodeURIComponent(u(p))},i.escapeJsonPointer=u,i.unescapeJsonPointer=f,i.eachItem=function(p,y){if(Array.isArray(p))for(const b of p)y(b);else y(p)},i.mergeEvaluated={props:c({mergeNames(p,y,b){return p.if(o._`${b} !== true && ${y} !== undefined`,()=>{p.if(o._`${y} === true`,()=>p.assign(b,!0),()=>p.assign(b,o._`${b} || {}`).code(o._`Object.assign(${b}, ${y})`))})},mergeToName(p,y,b){return p.if(o._`${b} !== true`,()=>{y===!0?p.assign(b,!0):(p.assign(b,o._`${b} || {}`),g(p,b,y))})},mergeValues(p,y){return p===!0||{...p,...y}},resultToName:d}),items:c({mergeNames(p,y,b){return p.if(o._`${b} !== true && ${y} !== undefined`,()=>p.assign(b,o._`${y} === true ? true : ${b} > ${y} ? ${b} : ${y}`))},mergeToName(p,y,b){return p.if(o._`${b} !== true`,()=>p.assign(b,y===!0||o._`${b} > ${y} ? ${b} : ${y}`))},mergeValues(p,y){return p===!0||Math.max(p,y)},resultToName(p,y){return p.var("items",y)}})},i.evaluatedPropsToName=d,i.setEvaluated=g;const h={};var v;function m(p,y,b=p.opts.strictSchema){if(b){if(y=`strict mode: ${y}`,b===!0)throw new Error(y);p.self.logger.warn(y)}}i.useFunc=function(p,y){return p.scopeValue("func",{ref:y,code:h[y.code]||(h[y.code]=new s._Code(y.code))})},function(p){p[p.Num=0]="Num",p[p.Str=1]="Str"}(v=i.Type||(i.Type={})),i.getErrorPath=function(p,y,b){if(p instanceof o.Name){const _=y===v.Num;return b?_?o._`"[" + ${p} + "]"`:o._`"['" + ${p} + "']"`:_?o._`"/" + ${p}`:o._`"/" + ${p}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return b?(0,o.getProperty)(p).toString():"/"+u(p)},i.checkStrictMode=m},{"./codegen":2,"./codegen/code":1}],11:[function(t,r,i){function o(a,l){return l.rules.some(u=>s(a,u))}function s(a,l){var u;return a[l.keyword]!==void 0||((u=l.definition.implements)===null||u===void 0?void 0:u.some(f=>a[f]!==void 0))}Object.defineProperty(i,"__esModule",{value:!0}),i.shouldUseRule=i.shouldUseGroup=i.schemaHasRulesForType=void 0,i.schemaHasRulesForType=function({schema:a,self:l},u){const f=l.RULES.types[u];return f&&f!==!0&&o(a,f)},i.shouldUseGroup=o,i.shouldUseRule=s},{}],12:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.boolOrEmptySchema=i.topBoolOrEmptySchema=void 0;const o=t("../errors"),s=t("../codegen"),a=t("../names"),l={message:"boolean schema is false"};function u(f,c){const{gen:d,data:g}=f;(0,o.reportError)({gen:d,keyword:"false schema",data:g,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:f},l,void 0,c)}i.topBoolOrEmptySchema=function(f){const{gen:c,schema:d,validateName:g}=f;d===!1?u(f,!1):typeof d=="object"&&d.$async===!0?c.return(a.default.data):(c.assign(s._`${g}.errors`,null),c.return(!0))},i.boolOrEmptySchema=function(f,c){const{gen:d,schema:g}=f;g===!1?(d.var(c,!1),u(f)):d.var(c,!0)}},{"../codegen":2,"../errors":4,"../names":6}],13:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.reportTypeError=i.checkDataTypes=i.checkDataType=i.coerceAndCheckDataType=i.getJSONTypes=i.getSchemaTypes=i.DataType=void 0;const o=t("../rules"),s=t("./applicability"),a=t("../errors"),l=t("../codegen"),u=t("../util");var f;function c(p){const y=Array.isArray(p)?p:p?[p]:[];if(y.every(o.isJSONType))return y;throw new Error("type must be JSONType or JSONType[]: "+y.join(","))}(function(p){p[p.Correct=0]="Correct",p[p.Wrong=1]="Wrong"})(f=i.DataType||(i.DataType={})),i.getSchemaTypes=function(p){const y=c(p.type);if(y.includes("null")){if(p.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!y.length&&p.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');p.nullable===!0&&y.push("null")}return y},i.getJSONTypes=c,i.coerceAndCheckDataType=function(p,y){const{gen:b,data:_,opts:w}=p,S=function(P,R){return R?P.filter(j=>d.has(j)||R==="array"&&j==="array"):[]}(y,w.coerceTypes),E=y.length>0&&!(S.length===0&&y.length===1&&(0,s.schemaHasRulesForType)(p,y[0]));if(E){const P=h(y,_,w.strictNumbers,f.Wrong);b.if(P,()=>{S.length?function(R,j,U){const{gen:F,data:z,opts:D}=R,N=F.let("dataType",l._`typeof ${z}`),L=F.let("coerced",l._`undefined`);D.coerceTypes==="array"&&F.if(l._`${N} == 'object' && Array.isArray(${z}) && ${z}.length == 1`,()=>F.assign(z,l._`${z}[0]`).assign(N,l._`typeof ${z}`).if(h(j,z,D.strictNumbers),()=>F.assign(L,z))),F.if(l._`${L} !== undefined`);for(const Q of U)(d.has(Q)||Q==="array"&&D.coerceTypes==="array")&&X(Q);function X(Q){switch(Q){case"string":return void F.elseIf(l._`${N} == "number" || ${N} == "boolean"`).assign(L,l._`"" + ${z}`).elseIf(l._`${z} === null`).assign(L,l._`""`);case"number":return void F.elseIf(l._`${N} == "boolean" || ${z} === null
	              || (${N} == "string" && ${z} && ${z} == +${z})`).assign(L,l._`+${z}`);case"integer":return void F.elseIf(l._`${N} === "boolean" || ${z} === null
	              || (${N} === "string" && ${z} && ${z} == +${z} && !(${z} % 1))`).assign(L,l._`+${z}`);case"boolean":return void F.elseIf(l._`${z} === "false" || ${z} === 0 || ${z} === null`).assign(L,!1).elseIf(l._`${z} === "true" || ${z} === 1`).assign(L,!0);case"null":return F.elseIf(l._`${z} === "" || ${z} === 0 || ${z} === false`),void F.assign(L,null);case"array":F.elseIf(l._`${N} === "string" || ${N} === "number"
	              || ${N} === "boolean" || ${z} === null`).assign(L,l._`[${z}]`)}}F.else(),m(R),F.endIf(),F.if(l._`${L} !== undefined`,()=>{F.assign(z,L),function({gen:Q,parentData:A,parentDataProperty:k},V){Q.if(l._`${A} !== undefined`,()=>Q.assign(l._`${A}[${k}]`,V))}(R,L)})}(p,y,S):m(p)})}return E};const d=new Set(["string","number","integer","boolean","null"]);function g(p,y,b,_=f.Correct){const w=_===f.Correct?l.operators.EQ:l.operators.NEQ;let S;switch(p){case"null":return l._`${y} ${w} null`;case"array":S=l._`Array.isArray(${y})`;break;case"object":S=l._`${y} && typeof ${y} == "object" && !Array.isArray(${y})`;break;case"integer":S=E(l._`!(${y} % 1) && !isNaN(${y})`);break;case"number":S=E();break;default:return l._`typeof ${y} ${w} ${p}`}return _===f.Correct?S:(0,l.not)(S);function E(P=l.nil){return(0,l.and)(l._`typeof ${y} == "number"`,P,b?l._`isFinite(${y})`:l.nil)}}function h(p,y,b,_){if(p.length===1)return g(p[0],y,b,_);let w;const S=(0,u.toHash)(p);if(S.array&&S.object){const E=l._`typeof ${y} != "object"`;w=S.null?E:l._`!${y} || ${E}`,delete S.null,delete S.array,delete S.object}else w=l.nil;S.number&&delete S.integer;for(const E in S)w=(0,l.and)(w,g(E,y,b,_));return w}i.checkDataType=g,i.checkDataTypes=h;const v={message({schema:p}){return`must be ${p}`},params({schema:p,schemaValue:y}){return typeof p=="string"?l._`{type: ${p}}`:l._`{type: ${y}}`}};function m(p){const y=function(b){const{gen:_,data:w,schema:S}=b,E=(0,u.schemaRefOrVal)(b,S,"type");return{gen:_,keyword:"type",data:w,schema:S.type,schemaCode:E,schemaValue:E,parentSchema:S,params:{},it:b}}(p);(0,a.reportError)(y,v)}i.reportTypeError=m},{"../codegen":2,"../errors":4,"../rules":9,"../util":10,"./applicability":11}],14:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.assignDefaults=void 0;const o=t("../codegen"),s=t("../util");function a(l,u,f){const{gen:c,compositeRule:d,data:g,opts:h}=l;if(f===void 0)return;const v=o._`${g}${(0,o.getProperty)(u)}`;if(d)return void(0,s.checkStrictMode)(l,`default is ignored for: ${v}`);let m=o._`${v} === undefined`;h.useDefaults==="empty"&&(m=o._`${m} || ${v} === null || ${v} === ""`),c.if(m,o._`${v} = ${(0,o.stringify)(f)}`)}i.assignDefaults=function(l,u){const{properties:f,items:c}=l.schema;if(u==="object"&&f)for(const d in f)a(l,d,f[d].default);else u==="array"&&Array.isArray(c)&&c.forEach((d,g)=>a(l,g,d.default))}},{"../codegen":2,"../util":10}],15:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.getData=i.KeywordCxt=i.validateFunctionCode=void 0;const o=t("./boolSchema"),s=t("./dataType"),a=t("./applicability"),l=t("./dataType"),u=t("./defaults"),f=t("./keyword"),c=t("./subschema"),d=t("../codegen"),g=t("../names"),h=t("../resolve"),v=t("../util"),m=t("../errors");function p({gen:A,validateName:k,schema:V,schemaEnv:K,opts:H},I){H.code.es5?A.func(k,d._`${g.default.data}, ${g.default.valCxt}`,K.$async,()=>{A.code(d._`"use strict"; ${y(V,H)}`),function(M,G){M.if(g.default.valCxt,()=>{M.var(g.default.instancePath,d._`${g.default.valCxt}.${g.default.instancePath}`),M.var(g.default.parentData,d._`${g.default.valCxt}.${g.default.parentData}`),M.var(g.default.parentDataProperty,d._`${g.default.valCxt}.${g.default.parentDataProperty}`),M.var(g.default.rootData,d._`${g.default.valCxt}.${g.default.rootData}`),G.dynamicRef&&M.var(g.default.dynamicAnchors,d._`${g.default.valCxt}.${g.default.dynamicAnchors}`)},()=>{M.var(g.default.instancePath,d._`""`),M.var(g.default.parentData,d._`undefined`),M.var(g.default.parentDataProperty,d._`undefined`),M.var(g.default.rootData,g.default.data),G.dynamicRef&&M.var(g.default.dynamicAnchors,d._`{}`)})}(A,H),A.code(I)}):A.func(k,d._`${g.default.data}, ${function(M){return d._`{${g.default.instancePath}="", ${g.default.parentData}, ${g.default.parentDataProperty}, ${g.default.rootData}=${g.default.data}${M.dynamicRef?d._`, ${g.default.dynamicAnchors}={}`:d.nil}}={}`}(H)}`,K.$async,()=>A.code(y(V,H)).code(I))}function y(A,k){const V=typeof A=="object"&&A[k.schemaId];return V&&(k.code.source||k.code.process)?d._`/*# sourceURL=${V} */`:d.nil}function b(A,k){w(A)&&(S(A),_(A))?function(V,K){const{schema:H,gen:I,opts:M}=V;M.$comment&&H.$comment&&P(V),function(q){const W=q.schema[q.opts.schemaId];W&&(q.baseId=(0,h.resolveUrl)(q.opts.uriResolver,q.baseId,W))}(V),function(q){if(q.schema.$async&&!q.schemaEnv.$async)throw new Error("async schema in sync schema")}(V);const G=I.const("_errs",g.default.errors);E(V,G),I.var(K,d._`${G} === ${g.default.errors}`)}(A,k):(0,o.boolOrEmptySchema)(A,k)}function _({schema:A,self:k}){if(typeof A=="boolean")return!A;for(const V in A)if(k.RULES.all[V])return!0;return!1}function w(A){return typeof A.schema!="boolean"}function S(A){(0,v.checkUnknownRules)(A),function(k){const{schema:V,errSchemaPath:K,opts:H,self:I}=k;V.$ref&&H.ignoreKeywordsWithRef&&(0,v.schemaHasRulesButRef)(V,I.RULES)&&I.logger.warn(`$ref: keywords ignored in schema at path "${K}"`)}(A)}function E(A,k){if(A.opts.jtd)return R(A,[],!1,k);const V=(0,s.getSchemaTypes)(A.schema);R(A,V,!(0,s.coerceAndCheckDataType)(A,V),k)}function P({gen:A,schemaEnv:k,schema:V,errSchemaPath:K,opts:H}){const I=V.$comment;if(H.$comment===!0)A.code(d._`${g.default.self}.logger.log(${I})`);else if(typeof H.$comment=="function"){const M=d.str`${K}/$comment`,G=A.scopeValue("root",{ref:k.root});A.code(d._`${g.default.self}.opts.$comment(${I}, ${M}, ${G}.schema)`)}}function R(A,k,V,K){const{gen:H,schema:I,data:M,allErrors:G,opts:q,self:W}=A,{RULES:ae}=W;function le(Pe){(0,a.shouldUseGroup)(I,Pe)&&(Pe.type?(H.if((0,l.checkDataType)(Pe.type,M,q.strictNumbers)),j(A,Pe),k.length===1&&k[0]===Pe.type&&V&&(H.else(),(0,l.reportTypeError)(A)),H.endIf()):j(A,Pe),G||H.if(d._`${g.default.errors} === ${K||0}`))}!I.$ref||!q.ignoreKeywordsWithRef&&(0,v.schemaHasRulesButRef)(I,ae)?(q.jtd||function(Pe,Ve){Pe.schemaEnv.meta||!Pe.opts.strictTypes||(function(Ae,ye){if(!!ye.length){if(!Ae.dataTypes.length)return void(Ae.dataTypes=ye);ye.forEach(Ne=>{F(Ae.dataTypes,Ne)||z(Ae,`type "${Ne}" not allowed by context "${Ae.dataTypes.join(",")}"`)}),Ae.dataTypes=Ae.dataTypes.filter(Ne=>F(ye,Ne))}}(Pe,Ve),Pe.opts.allowUnionTypes||function(Ae,ye){ye.length>1&&(ye.length!==2||!ye.includes("null"))&&z(Ae,"use allowUnionTypes to allow union type keyword")}(Pe,Ve),function(Ae,ye){const Ne=Ae.self.RULES.all;for(const xe in Ne){const he=Ne[xe];if(typeof he=="object"&&(0,a.shouldUseRule)(Ae.schema,he)){const{type:ve}=he.definition;ve.length&&!ve.some(de=>U(ye,de))&&z(Ae,`missing type "${ve.join(",")}" for keyword "${xe}"`)}}}(Pe,Pe.dataTypes))}(A,k),H.block(()=>{for(const Pe of ae.rules)le(Pe);le(ae.post)})):H.block(()=>N(A,"$ref",ae.all.$ref.definition))}function j(A,k){const{gen:V,schema:K,opts:{useDefaults:H}}=A;H&&(0,u.assignDefaults)(A,k.type),V.block(()=>{for(const I of k.rules)(0,a.shouldUseRule)(K,I)&&N(A,I.keyword,I.definition,k.type)})}function U(A,k){return A.includes(k)||k==="number"&&A.includes("integer")}function F(A,k){return A.includes(k)||k==="integer"&&A.includes("number")}function z(A,k){(0,v.checkStrictMode)(A,k+=` at "${A.schemaEnv.baseId+A.errSchemaPath}" (strictTypes)`,A.opts.strictTypes)}i.validateFunctionCode=function(A){w(A)&&(S(A),_(A))?function(k){const{schema:V,opts:K,gen:H}=k;p(k,()=>{K.$comment&&V.$comment&&P(k),function(I){const{schema:M,opts:G}=I;M.default!==void 0&&G.useDefaults&&G.strictSchema&&(0,v.checkStrictMode)(I,"default is ignored in the schema root")}(k),H.let(g.default.vErrors,null),H.let(g.default.errors,0),K.unevaluated&&function(I){const{gen:M,validateName:G}=I;I.evaluated=M.const("evaluated",d._`${G}.evaluated`),M.if(d._`${I.evaluated}.dynamicProps`,()=>M.assign(d._`${I.evaluated}.props`,d._`undefined`)),M.if(d._`${I.evaluated}.dynamicItems`,()=>M.assign(d._`${I.evaluated}.items`,d._`undefined`))}(k),E(k),function(I){const{gen:M,schemaEnv:G,validateName:q,ValidationError:W,opts:ae}=I;G.$async?M.if(d._`${g.default.errors} === 0`,()=>M.return(g.default.data),()=>M.throw(d._`new ${W}(${g.default.vErrors})`)):(M.assign(d._`${q}.errors`,g.default.vErrors),ae.unevaluated&&function({gen:le,evaluated:Pe,props:Ve,items:Ae}){Ve instanceof d.Name&&le.assign(d._`${Pe}.props`,Ve),Ae instanceof d.Name&&le.assign(d._`${Pe}.items`,Ae)}(I),M.return(d._`${g.default.errors} === 0`))}(k)})}(A):p(A,()=>(0,o.topBoolOrEmptySchema)(A))};class D{constructor(k,V,K){if((0,f.validateKeywordUsage)(k,V,K),this.gen=k.gen,this.allErrors=k.allErrors,this.keyword=K,this.data=k.data,this.schema=k.schema[K],this.$data=V.$data&&k.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,v.schemaRefOrVal)(k,this.schema,K,this.$data),this.schemaType=V.schemaType,this.parentSchema=k.schema,this.params={},this.it=k,this.def=V,this.$data)this.schemaCode=k.gen.const("vSchema",Q(this.$data,k));else if(this.schemaCode=this.schemaValue,!(0,f.validSchemaType)(this.schema,V.schemaType,V.allowUndefined))throw new Error(`${K} value must be ${JSON.stringify(V.schemaType)}`);("code"in V?V.trackErrors:V.errors!==!1)&&(this.errsCount=k.gen.const("_errs",g.default.errors))}result(k,V,K){this.failResult((0,d.not)(k),V,K)}failResult(k,V,K){this.gen.if(k),K?K():this.error(),V?(this.gen.else(),V(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(k,V){this.failResult((0,d.not)(k),void 0,V)}fail(k){if(k===void 0)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(k),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(k){if(!this.$data)return this.fail(k);const{schemaCode:V}=this;this.fail(d._`${V} !== undefined && (${(0,d.or)(this.invalid$data(),k)})`)}error(k,V,K){if(V)return this.setParams(V),this._error(k,K),void this.setParams({});this._error(k,K)}_error(k,V){(k?m.reportExtraError:m.reportError)(this,this.def.error,V)}$dataError(){(0,m.reportError)(this,this.def.$dataError||m.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,m.resetErrorsCount)(this.gen,this.errsCount)}ok(k){this.allErrors||this.gen.if(k)}setParams(k,V){V?Object.assign(this.params,k):this.params=k}block$data(k,V,K=d.nil){this.gen.block(()=>{this.check$data(k,K),V()})}check$data(k=d.nil,V=d.nil){if(!this.$data)return;const{gen:K,schemaCode:H,schemaType:I,def:M}=this;K.if((0,d.or)(d._`${H} === undefined`,V)),k!==d.nil&&K.assign(k,!0),(I.length||M.validateSchema)&&(K.elseIf(this.invalid$data()),this.$dataError(),k!==d.nil&&K.assign(k,!1)),K.else()}invalid$data(){const{gen:k,schemaCode:V,schemaType:K,def:H,it:I}=this;return(0,d.or)(function(){if(K.length){if(!(V instanceof d.Name))throw new Error("ajv implementation error");const M=Array.isArray(K)?K:[K];return d._`${(0,l.checkDataTypes)(M,V,I.opts.strictNumbers,l.DataType.Wrong)}`}return d.nil}(),function(){if(H.validateSchema){const M=k.scopeValue("validate$data",{ref:H.validateSchema});return d._`!${M}(${V})`}return d.nil}())}subschema(k,V){const K=(0,c.getSubschema)(this.it,k);(0,c.extendSubschemaData)(K,this.it,k),(0,c.extendSubschemaMode)(K,k);const H={...this.it,...K,items:void 0,props:void 0};return b(H,V),H}mergeEvaluated(k,V){const{it:K,gen:H}=this;K.opts.unevaluated&&(K.props!==!0&&k.props!==void 0&&(K.props=v.mergeEvaluated.props(H,k.props,K.props,V)),K.items!==!0&&k.items!==void 0&&(K.items=v.mergeEvaluated.items(H,k.items,K.items,V)))}mergeValidEvaluated(k,V){const{it:K,gen:H}=this;if(K.opts.unevaluated&&(K.props!==!0||K.items!==!0))return H.if(V,()=>this.mergeEvaluated(k,d.Name)),!0}}function N(A,k,V,K){const H=new D(A,V,k);"code"in V?V.code(H,K):H.$data&&V.validate?(0,f.funcKeywordCode)(H,V):"macro"in V?(0,f.macroKeywordCode)(H,V):(V.compile||V.validate)&&(0,f.funcKeywordCode)(H,V)}i.KeywordCxt=D;const L=/^\/(?:[^~]|~0|~1)*$/,X=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Q(A,{dataLevel:k,dataNames:V,dataPathArr:K}){let H,I;if(A==="")return g.default.rootData;if(A[0]==="/"){if(!L.test(A))throw new Error(`Invalid JSON-pointer: ${A}`);H=A,I=g.default.rootData}else{const W=X.exec(A);if(!W)throw new Error(`Invalid JSON-pointer: ${A}`);const ae=+W[1];if(H=W[2],H==="#"){if(ae>=k)throw new Error(q("property/index",ae));return K[k-ae]}if(ae>k)throw new Error(q("data",ae));if(I=V[k-ae],!H)return I}let M=I;const G=H.split("/");for(const W of G)W&&(I=d._`${I}${(0,d.getProperty)((0,v.unescapeJsonPointer)(W))}`,M=d._`${M} && ${I}`);return M;function q(W,ae){return`Cannot access ${W} ${ae} levels up, current level is ${k}`}}i.getData=Q},{"../codegen":2,"../errors":4,"../names":6,"../resolve":8,"../util":10,"./applicability":11,"./boolSchema":12,"./dataType":13,"./defaults":14,"./keyword":16,"./subschema":17}],16:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.validateKeywordUsage=i.validSchemaType=i.funcKeywordCode=i.macroKeywordCode=void 0;const o=t("../codegen"),s=t("../names"),a=t("../../vocabularies/code"),l=t("../errors");function u(c){const{gen:d,data:g,it:h}=c;d.if(h.parentData,()=>d.assign(g,o._`${h.parentData}[${h.parentDataProperty}]`))}function f(c,d,g){if(g===void 0)throw new Error(`keyword "${d}" failed to compile`);return c.scopeValue("keyword",typeof g=="function"?{ref:g}:{ref:g,code:(0,o.stringify)(g)})}i.macroKeywordCode=function(c,d){const{gen:g,keyword:h,schema:v,parentSchema:m,it:p}=c,y=d.macro.call(p.self,v,m,p),b=f(g,h,y);p.opts.validateSchema!==!1&&p.self.validateSchema(y,!0);const _=g.name("valid");c.subschema({schema:y,schemaPath:o.nil,errSchemaPath:`${p.errSchemaPath}/${h}`,topSchemaRef:b,compositeRule:!0},_),c.pass(_,()=>c.error(!0))},i.funcKeywordCode=function(c,d){var g;const{gen:h,keyword:v,schema:m,parentSchema:p,$data:y,it:b}=c;(function({schemaEnv:R},j){if(j.async&&!R.$async)throw new Error("async keyword in sync schema")})(b,d);const _=!y&&d.compile?d.compile.call(b.self,m,p,b):d.validate,w=f(h,v,_),S=h.let("valid");function E(R=d.async?o._`await `:o.nil){h.assign(S,o._`${R}${(0,a.callValidateCode)(c,w,b.opts.passContext?s.default.this:s.default.self,!("compile"in d&&!y||d.schema===!1))}`,d.modifying)}function P(R){var j;h.if((0,o.not)((j=d.valid)!==null&&j!==void 0?j:S),R)}c.block$data(S,function(){if(d.errors===!1)E(),d.modifying&&u(c),P(()=>c.error());else{const R=d.async?function(){const j=h.let("ruleErrs",null);return h.try(()=>E(o._`await `),U=>h.assign(S,!1).if(o._`${U} instanceof ${b.ValidationError}`,()=>h.assign(j,o._`${U}.errors`),()=>h.throw(U))),j}():function(){const j=o._`${w}.errors`;return h.assign(j,null),E(o.nil),j}();d.modifying&&u(c),P(()=>function(j,U){const{gen:F}=j;F.if(o._`Array.isArray(${U})`,()=>{F.assign(s.default.vErrors,o._`${s.default.vErrors} === null ? ${U} : ${s.default.vErrors}.concat(${U})`).assign(s.default.errors,o._`${s.default.vErrors}.length`),(0,l.extendErrors)(j)},()=>j.error())}(c,R))}}),c.ok((g=d.valid)!==null&&g!==void 0?g:S)},i.validSchemaType=function(c,d,g=!1){return!d.length||d.some(h=>h==="array"?Array.isArray(c):h==="object"?c&&typeof c=="object"&&!Array.isArray(c):typeof c==h||g&&c===void 0)},i.validateKeywordUsage=function({schema:c,opts:d,self:g,errSchemaPath:h},v,m){if(Array.isArray(v.keyword)?!v.keyword.includes(m):v.keyword!==m)throw new Error("ajv implementation error");const p=v.dependencies;if(p!=null&&p.some(y=>!Object.prototype.hasOwnProperty.call(c,y)))throw new Error(`parent schema must have dependencies of ${m}: ${p.join(",")}`);if(v.validateSchema&&!v.validateSchema(c[m])){const y=`keyword "${m}" value is invalid at path "${h}": `+g.errorsText(v.validateSchema.errors);if(d.validateSchema!=="log")throw new Error(y);g.logger.error(y)}}},{"../../vocabularies/code":42,"../codegen":2,"../errors":4,"../names":6}],17:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.extendSubschemaMode=i.extendSubschemaData=i.getSubschema=void 0;const o=t("../codegen"),s=t("../util");i.getSubschema=function(a,{keyword:l,schemaProp:u,schema:f,schemaPath:c,errSchemaPath:d,topSchemaRef:g}){if(l!==void 0&&f!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(l!==void 0){const h=a.schema[l];return u===void 0?{schema:h,schemaPath:o._`${a.schemaPath}${(0,o.getProperty)(l)}`,errSchemaPath:`${a.errSchemaPath}/${l}`}:{schema:h[u],schemaPath:o._`${a.schemaPath}${(0,o.getProperty)(l)}${(0,o.getProperty)(u)}`,errSchemaPath:`${a.errSchemaPath}/${l}/${(0,s.escapeFragment)(u)}`}}if(f!==void 0){if(c===void 0||d===void 0||g===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:f,schemaPath:c,topSchemaRef:g,errSchemaPath:d}}throw new Error('either "keyword" or "schema" must be passed')},i.extendSubschemaData=function(a,l,{dataProp:u,dataPropType:f,data:c,dataTypes:d,propertyName:g}){if(c!==void 0&&u!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:h}=l;if(u!==void 0){const{errorPath:m,dataPathArr:p,opts:y}=l;v(h.let("data",o._`${l.data}${(0,o.getProperty)(u)}`,!0)),a.errorPath=o.str`${m}${(0,s.getErrorPath)(u,f,y.jsPropertySyntax)}`,a.parentDataProperty=o._`${u}`,a.dataPathArr=[...p,a.parentDataProperty]}c!==void 0&&(v(c instanceof o.Name?c:h.let("data",c,!0)),g!==void 0&&(a.propertyName=g));function v(m){a.data=m,a.dataLevel=l.dataLevel+1,a.dataTypes=[],l.definedProperties=new Set,a.parentData=l.data,a.dataNames=[...l.dataNames,m]}d&&(a.dataTypes=d)},i.extendSubschemaMode=function(a,{jtdDiscriminator:l,jtdMetadata:u,compositeRule:f,createErrors:c,allErrors:d}){f!==void 0&&(a.compositeRule=f),c!==void 0&&(a.createErrors=c),d!==void 0&&(a.allErrors=d),a.jtdDiscriminator=l,a.jtdMetadata=u}},{"../codegen":2,"../util":10}],18:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.CodeGen=i.Name=i.nil=i.stringify=i.str=i._=i.KeywordCxt=void 0;var o=t("./compile/validate");Object.defineProperty(i,"KeywordCxt",{enumerable:!0,get(){return o.KeywordCxt}});var s=t("./compile/codegen");Object.defineProperty(i,"_",{enumerable:!0,get(){return s._}}),Object.defineProperty(i,"str",{enumerable:!0,get(){return s.str}}),Object.defineProperty(i,"stringify",{enumerable:!0,get(){return s.stringify}}),Object.defineProperty(i,"nil",{enumerable:!0,get(){return s.nil}}),Object.defineProperty(i,"Name",{enumerable:!0,get(){return s.Name}}),Object.defineProperty(i,"CodeGen",{enumerable:!0,get(){return s.CodeGen}});const a=t("./runtime/validation_error"),l=t("./compile/ref_error"),u=t("./compile/rules"),f=t("./compile"),c=t("./compile/codegen"),d=t("./compile/resolve"),g=t("./compile/validate/dataType"),h=t("./compile/util"),v=t("./refs/data.json"),m=t("./runtime/uri"),p=(K,H)=>new RegExp(K,H);p.code="new RegExp";const y=["removeAdditional","useDefaults","coerceTypes"],b=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),_={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},w={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function S(K){var H,I,M,G,q,W,ae,le,Pe,Ve,Ae,ye,Ne,xe,he,ve,de,Ie,De,He,Xe,mt,be,Z,x;const C=K.strict,O=(H=K.code)===null||H===void 0?void 0:H.optimize,Y=O===!0||O===void 0?1:O||0,ie=(M=(I=K.code)===null||I===void 0?void 0:I.regExp)!==null&&M!==void 0?M:p,pe=(G=K.uriResolver)!==null&&G!==void 0?G:m.default;return{strictSchema:(W=(q=K.strictSchema)!==null&&q!==void 0?q:C)===null||W===void 0||W,strictNumbers:(le=(ae=K.strictNumbers)!==null&&ae!==void 0?ae:C)===null||le===void 0||le,strictTypes:(Ve=(Pe=K.strictTypes)!==null&&Pe!==void 0?Pe:C)!==null&&Ve!==void 0?Ve:"log",strictTuples:(ye=(Ae=K.strictTuples)!==null&&Ae!==void 0?Ae:C)!==null&&ye!==void 0?ye:"log",strictRequired:(xe=(Ne=K.strictRequired)!==null&&Ne!==void 0?Ne:C)!==null&&xe!==void 0&&xe,code:K.code?{...K.code,optimize:Y,regExp:ie}:{optimize:Y,regExp:ie},loopRequired:(he=K.loopRequired)!==null&&he!==void 0?he:200,loopEnum:(ve=K.loopEnum)!==null&&ve!==void 0?ve:200,meta:(de=K.meta)===null||de===void 0||de,messages:(Ie=K.messages)===null||Ie===void 0||Ie,inlineRefs:(De=K.inlineRefs)===null||De===void 0||De,schemaId:(He=K.schemaId)!==null&&He!==void 0?He:"$id",addUsedSchema:(Xe=K.addUsedSchema)===null||Xe===void 0||Xe,validateSchema:(mt=K.validateSchema)===null||mt===void 0||mt,validateFormats:(be=K.validateFormats)===null||be===void 0||be,unicodeRegExp:(Z=K.unicodeRegExp)===null||Z===void 0||Z,int32range:(x=K.int32range)===null||x===void 0||x,uriResolver:pe}}class E{constructor(H={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,H=this.opts={...H,...S(H)};const{es5:I,lines:M}=this.opts.code;this.scope=new c.ValueScope({scope:{},prefixes:b,es5:I,lines:M}),this.logger=function(q){if(q===!1)return D;if(q===void 0)return console;if(q.log&&q.warn&&q.error)return q;throw new Error("logger must implement log, warn and error methods")}(H.logger);const G=H.validateFormats;H.validateFormats=!1,this.RULES=(0,u.getRules)(),P.call(this,_,H,"NOT SUPPORTED"),P.call(this,w,H,"DEPRECATED","warn"),this._metaOpts=z.call(this),H.formats&&U.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),H.keywords&&F.call(this,H.keywords),typeof H.meta=="object"&&this.addMetaSchema(H.meta),j.call(this),H.validateFormats=G}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:H,meta:I,schemaId:M}=this.opts;let G=v;M==="id"&&(G={...v},G.id=G.$id,delete G.$id),I&&H&&this.addMetaSchema(G,G[M],!1)}defaultMeta(){const{meta:H,schemaId:I}=this.opts;return this.opts.defaultMeta=typeof H=="object"?H[I]||H:void 0}validate(H,I){let M;if(typeof H=="string"){if(M=this.getSchema(H),!M)throw new Error(`no schema with key or ref "${H}"`)}else M=this.compile(H);const G=M(I);return"$async"in M||(this.errors=M.errors),G}compile(H,I){const M=this._addSchema(H,I);return M.validate||this._compileSchemaEnv(M)}compileAsync(H,I){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:M}=this.opts;return G.call(this,H,I);async function G(Ve,Ae){await q.call(this,Ve.$schema);const ye=this._addSchema(Ve,Ae);return ye.validate||W.call(this,ye)}async function q(Ve){Ve&&!this.getSchema(Ve)&&await G.call(this,{$ref:Ve},!0)}async function W(Ve){try{return this._compileSchemaEnv(Ve)}catch(Ae){if(!(Ae instanceof l.default))throw Ae;return ae.call(this,Ae),await le.call(this,Ae.missingSchema),W.call(this,Ve)}}function ae({missingSchema:Ve,missingRef:Ae}){if(this.refs[Ve])throw new Error(`AnySchema ${Ve} is loaded but ${Ae} cannot be resolved`)}async function le(Ve){const Ae=await Pe.call(this,Ve);this.refs[Ve]||await q.call(this,Ae.$schema),this.refs[Ve]||this.addSchema(Ae,Ve,I)}async function Pe(Ve){const Ae=this._loading[Ve];if(Ae)return Ae;try{return await(this._loading[Ve]=M(Ve))}finally{delete this._loading[Ve]}}}addSchema(H,I,M,G=this.opts.validateSchema){if(Array.isArray(H)){for(const W of H)this.addSchema(W,void 0,M,G);return this}let q;if(typeof H=="object"){const{schemaId:W}=this.opts;if(q=H[W],q!==void 0&&typeof q!="string")throw new Error(`schema ${W} must be string`)}return I=(0,d.normalizeId)(I||q),this._checkUnique(I),this.schemas[I]=this._addSchema(H,M,I,G,!0),this}addMetaSchema(H,I,M=this.opts.validateSchema){return this.addSchema(H,I,!0,M),this}validateSchema(H,I){if(typeof H=="boolean")return!0;let M;if(M=H.$schema,M!==void 0&&typeof M!="string")throw new Error("$schema must be a string");if(M=M||this.opts.defaultMeta||this.defaultMeta(),!M)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const G=this.validate(M,H);if(!G&&I){const q="schema is invalid: "+this.errorsText();if(this.opts.validateSchema!=="log")throw new Error(q);this.logger.error(q)}return G}getSchema(H){let I;for(;typeof(I=R.call(this,H))=="string";)H=I;if(I===void 0){const{schemaId:M}=this.opts,G=new f.SchemaEnv({schema:{},schemaId:M});if(I=f.resolveSchema.call(this,G,H),!I)return;this.refs[H]=I}return I.validate||this._compileSchemaEnv(I)}removeSchema(H){if(H instanceof RegExp)return this._removeAllSchemas(this.schemas,H),this._removeAllSchemas(this.refs,H),this;switch(typeof H){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const I=R.call(this,H);return typeof I=="object"&&this._cache.delete(I.schema),delete this.schemas[H],delete this.refs[H],this}case"object":{this._cache.delete(H);let I=H[this.opts.schemaId];return I&&(I=(0,d.normalizeId)(I),delete this.schemas[I],delete this.refs[I]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(H){for(const I of H)this.addKeyword(I);return this}addKeyword(H,I){let M;if(typeof H=="string")M=H,typeof I=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),I.keyword=M);else{if(typeof H!="object"||I!==void 0)throw new Error("invalid addKeywords parameters");if(M=(I=H).keyword,Array.isArray(M)&&!M.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(L.call(this,M,I),!I)return(0,h.eachItem)(M,q=>X.call(this,q)),this;A.call(this,I);const G={...I,type:(0,g.getJSONTypes)(I.type),schemaType:(0,g.getJSONTypes)(I.schemaType)};return(0,h.eachItem)(M,G.type.length===0?q=>X.call(this,q,G):q=>G.type.forEach(W=>X.call(this,q,G,W))),this}getKeyword(H){const I=this.RULES.all[H];return typeof I=="object"?I.definition:!!I}removeKeyword(H){const{RULES:I}=this;delete I.keywords[H],delete I.all[H];for(const M of I.rules){const G=M.rules.findIndex(q=>q.keyword===H);G>=0&&M.rules.splice(G,1)}return this}addFormat(H,I){return typeof I=="string"&&(I=new RegExp(I)),this.formats[H]=I,this}errorsText(H=this.errors,{separator:I=", ",dataVar:M="data"}={}){return H&&H.length!==0?H.map(G=>`${M}${G.instancePath} ${G.message}`).reduce((G,q)=>G+I+q):"No errors"}$dataMetaSchema(H,I){const M=this.RULES.all;H=JSON.parse(JSON.stringify(H));for(const G of I){const q=G.split("/").slice(1);let W=H;for(const ae of q)W=W[ae];for(const ae in M){const le=M[ae];if(typeof le!="object")continue;const{$data:Pe}=le.definition,Ve=W[ae];Pe&&Ve&&(W[ae]=V(Ve))}}return H}_removeAllSchemas(H,I){for(const M in H){const G=H[M];I&&!I.test(M)||(typeof G=="string"?delete H[M]:G&&!G.meta&&(this._cache.delete(G.schema),delete H[M]))}}_addSchema(H,I,M,G=this.opts.validateSchema,q=this.opts.addUsedSchema){let W;const{schemaId:ae}=this.opts;if(typeof H=="object")W=H[ae];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof H!="boolean")throw new Error("schema must be object or boolean")}let le=this._cache.get(H);if(le!==void 0)return le;M=(0,d.normalizeId)(W||M);const Pe=d.getSchemaRefs.call(this,H,M);return le=new f.SchemaEnv({schema:H,schemaId:ae,meta:I,baseId:M,localRefs:Pe}),this._cache.set(le.schema,le),q&&!M.startsWith("#")&&(M&&this._checkUnique(M),this.refs[M]=le),G&&this.validateSchema(H,!0),le}_checkUnique(H){if(this.schemas[H]||this.refs[H])throw new Error(`schema with key or id "${H}" already exists`)}_compileSchemaEnv(H){if(H.meta?this._compileMetaSchema(H):f.compileSchema.call(this,H),!H.validate)throw new Error("ajv implementation error");return H.validate}_compileMetaSchema(H){const I=this.opts;this.opts=this._metaOpts;try{f.compileSchema.call(this,H)}finally{this.opts=I}}}function P(K,H,I,M="error"){for(const G in K){const q=G;q in H&&this.logger[M](`${I}: option ${G}. ${K[q]}`)}}function R(K){return K=(0,d.normalizeId)(K),this.schemas[K]||this.refs[K]}function j(){const K=this.opts.schemas;if(K)if(Array.isArray(K))this.addSchema(K);else for(const H in K)this.addSchema(K[H],H)}function U(){for(const K in this.opts.formats){const H=this.opts.formats[K];H&&this.addFormat(K,H)}}function F(K){if(Array.isArray(K))this.addVocabulary(K);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const H in K){const I=K[H];I.keyword||(I.keyword=H),this.addKeyword(I)}}}function z(){const K={...this.opts};for(const H of y)delete K[H];return K}i.default=E,E.ValidationError=a.default,E.MissingRefError=l.default;const D={log(){},warn(){},error(){}},N=/^[a-z_$][a-z0-9_$:-]*$/i;function L(K,H){const{RULES:I}=this;if((0,h.eachItem)(K,M=>{if(I.keywords[M])throw new Error(`Keyword ${M} is already defined`);if(!N.test(M))throw new Error(`Keyword ${M} has invalid name`)}),H&&H.$data&&!("code"in H)&&!("validate"in H))throw new Error('$data keyword must have "code" or "validate" function')}function X(K,H,I){var M;const G=H==null?void 0:H.post;if(I&&G)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:q}=this;let W=G?q.post:q.rules.find(({type:le})=>le===I);if(W||(W={type:I,rules:[]},q.rules.push(W)),q.keywords[K]=!0,!H)return;const ae={keyword:K,definition:{...H,type:(0,g.getJSONTypes)(H.type),schemaType:(0,g.getJSONTypes)(H.schemaType)}};H.before?Q.call(this,W,ae,H.before):W.rules.push(ae),q.all[K]=ae,(M=H.implements)===null||M===void 0||M.forEach(le=>this.addKeyword(le))}function Q(K,H,I){const M=K.rules.findIndex(G=>G.keyword===I);M>=0?K.rules.splice(M,0,H):(K.rules.push(H),this.logger.warn(`rule ${I} is not defined`))}function A(K){let{metaSchema:H}=K;H!==void 0&&(K.$data&&this.opts.$data&&(H=V(H)),K.validateSchema=this.compile(H,!0))}const k={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function V(K){return{anyOf:[K,k]}}},{"./compile":5,"./compile/codegen":2,"./compile/ref_error":7,"./compile/resolve":8,"./compile/rules":9,"./compile/util":10,"./compile/validate":15,"./compile/validate/dataType":13,"./refs/data.json":19,"./runtime/uri":23,"./runtime/validation_error":24}],19:[function(t,r,i){r.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}},{}],20:[function(t,r,i){r.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}},{}],21:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("fast-deep-equal");o.code='require("ajv/dist/runtime/equal").default',i.default=o},{"fast-deep-equal":63}],22:[function(t,r,i){function o(s){const a=s.length;let l,u=0,f=0;for(;f<a;)u++,l=s.charCodeAt(f++),l>=55296&&l<=56319&&f<a&&(l=s.charCodeAt(f),(64512&l)==56320&&f++);return u}Object.defineProperty(i,"__esModule",{value:!0}),i.default=o,o.code='require("ajv/dist/runtime/ucs2length").default'},{}],23:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("uri-js");o.code='require("ajv/dist/runtime/uri").default',i.default=o},{"uri-js":65}],24:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});class o extends Error{constructor(a){super("validation failed"),this.errors=a,this.ajv=this.validation=!0}}i.default=o},{}],25:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.validateAdditionalItems=void 0;const o=t("../../compile/codegen"),s=t("../../compile/util"),a={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message({params:{len:u}}){return o.str`must NOT have more than ${u} items`},params({params:{len:u}}){return o._`{limit: ${u}}`}},code(u){const{parentSchema:f,it:c}=u,{items:d}=f;Array.isArray(d)?l(u,d):(0,s.checkStrictMode)(c,'"additionalItems" is ignored when "items" is not an array of schemas')}};function l(u,f){const{gen:c,schema:d,data:g,keyword:h,it:v}=u;v.items=!0;const m=c.const("len",o._`${g}.length`);if(d===!1)u.setParams({len:f.length}),u.pass(o._`${m} <= ${f.length}`);else if(typeof d=="object"&&!(0,s.alwaysValidSchema)(v,d)){const p=c.var("valid",o._`${m} <= ${f.length}`);c.if((0,o.not)(p),()=>function(y){c.forRange("i",f.length,m,b=>{u.subschema({keyword:h,dataProp:b,dataPropType:s.Type.Num},y),v.allErrors||c.if((0,o.not)(y),()=>c.break())})}(p)),u.ok(p)}}i.validateAdditionalItems=l,i.default=a},{"../../compile/codegen":2,"../../compile/util":10}],26:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../code"),s=t("../../compile/codegen"),a=t("../../compile/names"),l=t("../../compile/util");i.default={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params({params:u}){return s._`{additionalProperty: ${u.additionalProperty}}`}},code(u){const{gen:f,schema:c,parentSchema:d,data:g,errsCount:h,it:v}=u;if(!h)throw new Error("ajv implementation error");const{allErrors:m,opts:p}=v;if(v.props=!0,p.removeAdditional!=="all"&&(0,l.alwaysValidSchema)(v,c))return;const y=(0,o.allSchemaProperties)(d.properties),b=(0,o.allSchemaProperties)(d.patternProperties);function _(E){f.code(s._`delete ${g}[${E}]`)}function w(E){if(p.removeAdditional==="all"||p.removeAdditional&&c===!1)_(E);else{if(c===!1)return u.setParams({additionalProperty:E}),u.error(),void(m||f.break());if(typeof c=="object"&&!(0,l.alwaysValidSchema)(v,c)){const P=f.name("valid");p.removeAdditional==="failing"?(S(E,P,!1),f.if((0,s.not)(P),()=>{u.reset(),_(E)})):(S(E,P),m||f.if((0,s.not)(P),()=>f.break()))}}}function S(E,P,R){const j={keyword:"additionalProperties",dataProp:E,dataPropType:l.Type.Str};R===!1&&Object.assign(j,{compositeRule:!0,createErrors:!1,allErrors:!1}),u.subschema(j,P)}f.forIn("key",g,E=>{y.length||b.length?f.if(function(P){let R;if(y.length>8){const j=(0,l.schemaRefOrVal)(v,d.properties,"properties");R=(0,o.isOwnProperty)(f,j,P)}else R=y.length?(0,s.or)(...y.map(j=>s._`${P} === ${j}`)):s.nil;return b.length&&(R=(0,s.or)(R,...b.map(j=>s._`${(0,o.usePattern)(u,j)}.test(${P})`))),(0,s.not)(R)}(E),()=>w(E)):w(E)}),u.ok(s._`${h} === ${a.default.errors}`)}}},{"../../compile/codegen":2,"../../compile/names":6,"../../compile/util":10,"../code":42}],27:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/util");i.default={keyword:"allOf",schemaType:"array",code(s){const{gen:a,schema:l,it:u}=s;if(!Array.isArray(l))throw new Error("ajv implementation error");const f=a.name("valid");l.forEach((c,d)=>{if((0,o.alwaysValidSchema)(u,c))return;const g=s.subschema({keyword:"allOf",schemaProp:d},f);s.ok(f),s.mergeEvaluated(g)})}}},{"../../compile/util":10}],28:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../code");i.default={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:o.validateUnion,error:{message:"must match a schema in anyOf"}}},{"../code":42}],29:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=t("../../compile/util");i.default={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message({params:{min:a,max:l}}){return l===void 0?o.str`must contain at least ${a} valid item(s)`:o.str`must contain at least ${a} and no more than ${l} valid item(s)`},params({params:{min:a,max:l}}){return l===void 0?o._`{minContains: ${a}}`:o._`{minContains: ${a}, maxContains: ${l}}`}},code(a){const{gen:l,schema:u,parentSchema:f,data:c,it:d}=a;let g,h;const{minContains:v,maxContains:m}=f;d.opts.next?(g=v===void 0?1:v,h=m):g=1;const p=l.const("len",o._`${c}.length`);if(a.setParams({min:g,max:h}),h===void 0&&g===0)return void(0,s.checkStrictMode)(d,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(h!==void 0&&g>h)return(0,s.checkStrictMode)(d,'"minContains" > "maxContains" is always invalid'),void a.fail();if((0,s.alwaysValidSchema)(d,u)){let w=o._`${p} >= ${g}`;return h!==void 0&&(w=o._`${w} && ${p} <= ${h}`),void a.pass(w)}d.items=!0;const y=l.name("valid");function b(){const w=l.name("_valid"),S=l.let("count",0);_(w,()=>l.if(w,()=>function(E){l.code(o._`${E}++`),h===void 0?l.if(o._`${E} >= ${g}`,()=>l.assign(y,!0).break()):(l.if(o._`${E} > ${h}`,()=>l.assign(y,!1).break()),g===1?l.assign(y,!0):l.if(o._`${E} >= ${g}`,()=>l.assign(y,!0)))}(S)))}function _(w,S){l.forRange("i",0,p,E=>{a.subschema({keyword:"contains",dataProp:E,dataPropType:s.Type.Num,compositeRule:!0},w),S()})}h===void 0&&g===1?_(y,()=>l.if(y,()=>l.break())):g===0?(l.let(y,!0),h!==void 0&&l.if(o._`${c}.length > 0`,b)):(l.let(y,!1),b()),a.result(y,()=>a.reset())}}},{"../../compile/codegen":2,"../../compile/util":10}],30:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.validateSchemaDeps=i.validatePropertyDeps=i.error=void 0;const o=t("../../compile/codegen"),s=t("../../compile/util"),a=t("../code");i.error={message({params:{property:c,depsCount:d,deps:g}}){return o.str`must have ${d===1?"property":"properties"} ${g} when property ${c} is present`},params({params:{property:c,depsCount:d,deps:g,missingProperty:h}}){return o._`{property: ${c},
	    missingProperty: ${h},
	    depsCount: ${d},
	    deps: ${g}}`}};const l={keyword:"dependencies",type:"object",schemaType:"object",error:i.error,code(c){const[d,g]=function({schema:h}){const v={},m={};for(const p in h)p!=="__proto__"&&((Array.isArray(h[p])?v:m)[p]=h[p]);return[v,m]}(c);u(c,d),f(c,g)}};function u(c,d=c.schema){const{gen:g,data:h,it:v}=c;if(Object.keys(d).length===0)return;const m=g.let("missing");for(const p in d){const y=d[p];if(y.length===0)continue;const b=(0,a.propertyInData)(g,h,p,v.opts.ownProperties);c.setParams({property:p,depsCount:y.length,deps:y.join(", ")}),v.allErrors?g.if(b,()=>{for(const _ of y)(0,a.checkReportMissingProp)(c,_)}):(g.if(o._`${b} && (${(0,a.checkMissingProp)(c,y,m)})`),(0,a.reportMissingProp)(c,m),g.else())}}function f(c,d=c.schema){const{gen:g,data:h,keyword:v,it:m}=c,p=g.name("valid");for(const y in d)(0,s.alwaysValidSchema)(m,d[y])||(g.if((0,a.propertyInData)(g,h,y,m.opts.ownProperties),()=>{const b=c.subschema({keyword:v,schemaProp:y},p);c.mergeValidEvaluated(b,p)},()=>g.var(p,!0)),c.ok(p))}i.validatePropertyDeps=u,i.validateSchemaDeps=f,i.default=l},{"../../compile/codegen":2,"../../compile/util":10,"../code":42}],31:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=t("../../compile/util");function a(l,u){const f=l.schema[u];return f!==void 0&&!(0,s.alwaysValidSchema)(l,f)}i.default={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message({params:l}){return o.str`must match "${l.ifClause}" schema`},params({params:l}){return o._`{failingKeyword: ${l.ifClause}}`}},code(l){const{gen:u,parentSchema:f,it:c}=l;f.then===void 0&&f.else===void 0&&(0,s.checkStrictMode)(c,'"if" without "then" and "else" is ignored');const d=a(c,"then"),g=a(c,"else");if(!d&&!g)return;const h=u.let("valid",!0),v=u.name("_valid");if(function(){const p=l.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},v);l.mergeEvaluated(p)}(),l.reset(),d&&g){const p=u.let("ifClause");l.setParams({ifClause:p}),u.if(v,m("then",p),m("else",p))}else d?u.if(v,m("then")):u.if((0,o.not)(v),m("else"));function m(p,y){return()=>{const b=l.subschema({keyword:p},v);u.assign(h,v),l.mergeValidEvaluated(b,h),y?u.assign(y,o._`${p}`):l.setParams({ifClause:p})}}l.pass(h,()=>l.error(!0))}}},{"../../compile/codegen":2,"../../compile/util":10}],32:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("./additionalItems"),s=t("./prefixItems"),a=t("./items"),l=t("./items2020"),u=t("./contains"),f=t("./dependencies"),c=t("./propertyNames"),d=t("./additionalProperties"),g=t("./properties"),h=t("./patternProperties"),v=t("./not"),m=t("./anyOf"),p=t("./oneOf"),y=t("./allOf"),b=t("./if"),_=t("./thenElse");i.default=function(w=!1){const S=[v.default,m.default,p.default,y.default,b.default,_.default,c.default,d.default,f.default,g.default,h.default];return w?S.push(s.default,l.default):S.push(o.default,a.default),S.push(u.default),S}},{"./additionalItems":25,"./additionalProperties":26,"./allOf":27,"./anyOf":28,"./contains":29,"./dependencies":30,"./if":31,"./items":33,"./items2020":34,"./not":35,"./oneOf":36,"./patternProperties":37,"./prefixItems":38,"./properties":39,"./propertyNames":40,"./thenElse":41}],33:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.validateTuple=void 0;const o=t("../../compile/codegen"),s=t("../../compile/util"),a=t("../code"),l={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(f){const{schema:c,it:d}=f;if(Array.isArray(c))return u(f,"additionalItems",c);d.items=!0,(0,s.alwaysValidSchema)(d,c)||f.ok((0,a.validateArray)(f))}};function u(f,c,d=f.schema){const{gen:g,parentSchema:h,data:v,keyword:m,it:p}=f;(function(_){const{opts:w,errSchemaPath:S}=p,E=d.length,P=E===_.minItems&&(E===_.maxItems||_[c]===!1);w.strictTuples&&!P&&(0,s.checkStrictMode)(p,`"${m}" is ${E}-tuple, but minItems or maxItems/${c} are not specified or different at path "${S}"`,w.strictTuples)})(h),p.opts.unevaluated&&d.length&&p.items!==!0&&(p.items=s.mergeEvaluated.items(g,d.length,p.items));const y=g.name("valid"),b=g.const("len",o._`${v}.length`);d.forEach((_,w)=>{(0,s.alwaysValidSchema)(p,_)||(g.if(o._`${b} > ${w}`,()=>f.subschema({keyword:m,schemaProp:w,dataProp:w},y)),f.ok(y))})}i.validateTuple=u,i.default=l},{"../../compile/codegen":2,"../../compile/util":10,"../code":42}],34:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=t("../../compile/util"),a=t("../code"),l=t("./additionalItems");i.default={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message({params:{len:u}}){return o.str`must NOT have more than ${u} items`},params({params:{len:u}}){return o._`{limit: ${u}}`}},code(u){const{schema:f,parentSchema:c,it:d}=u,{prefixItems:g}=c;d.items=!0,(0,s.alwaysValidSchema)(d,f)||(g?(0,l.validateAdditionalItems)(u,g):u.ok((0,a.validateArray)(u)))}}},{"../../compile/codegen":2,"../../compile/util":10,"../code":42,"./additionalItems":25}],35:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/util");i.default={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(s){const{gen:a,schema:l,it:u}=s;if((0,o.alwaysValidSchema)(u,l))return void s.fail();const f=a.name("valid");s.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},f),s.failResult(f,()=>s.reset(),()=>s.error())},error:{message:"must NOT be valid"}}},{"../../compile/util":10}],36:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=t("../../compile/util");i.default={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params({params:a}){return o._`{passingSchemas: ${a.passing}}`}},code(a){const{gen:l,schema:u,parentSchema:f,it:c}=a;if(!Array.isArray(u))throw new Error("ajv implementation error");if(c.opts.discriminator&&f.discriminator)return;const d=u,g=l.let("valid",!1),h=l.let("passing",null),v=l.name("_valid");a.setParams({passing:h}),l.block(function(){d.forEach((m,p)=>{let y;(0,s.alwaysValidSchema)(c,m)?l.var(v,!0):y=a.subschema({keyword:"oneOf",schemaProp:p,compositeRule:!0},v),p>0&&l.if(o._`${v} && ${g}`).assign(g,!1).assign(h,o._`[${h}, ${p}]`).else(),l.if(v,()=>{l.assign(g,!0),l.assign(h,p),y&&a.mergeEvaluated(y,o.Name)})})}),a.result(g,()=>a.reset(),()=>a.error(!0))}}},{"../../compile/codegen":2,"../../compile/util":10}],37:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../code"),s=t("../../compile/codegen"),a=t("../../compile/util"),l=t("../../compile/util");i.default={keyword:"patternProperties",type:"object",schemaType:"object",code(u){const{gen:f,schema:c,data:d,parentSchema:g,it:h}=u,{opts:v}=h,m=(0,o.allSchemaProperties)(c),p=m.filter(E=>(0,a.alwaysValidSchema)(h,c[E]));if(m.length===0||p.length===m.length&&(!h.opts.unevaluated||h.props===!0))return;const y=v.strictSchema&&!v.allowMatchingProperties&&g.properties,b=f.name("valid");h.props===!0||h.props instanceof s.Name||(h.props=(0,l.evaluatedPropsToName)(f,h.props));const{props:_}=h;function w(E){for(const P in y)new RegExp(E).test(P)&&(0,a.checkStrictMode)(h,`property ${P} matches pattern ${E} (use allowMatchingProperties)`)}function S(E){f.forIn("key",d,P=>{f.if(s._`${(0,o.usePattern)(u,E)}.test(${P})`,()=>{const R=p.includes(E);R||u.subschema({keyword:"patternProperties",schemaProp:E,dataProp:P,dataPropType:l.Type.Str},b),h.opts.unevaluated&&_!==!0?f.assign(s._`${_}[${P}]`,!0):R||h.allErrors||f.if((0,s.not)(b),()=>f.break())})})}(function(){for(const E of m)y&&w(E),h.allErrors?S(E):(f.var(b,!0),S(E),f.if(b))})()}}},{"../../compile/codegen":2,"../../compile/util":10,"../code":42}],38:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("./items");i.default={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code(s){return(0,o.validateTuple)(s,"items")}}},{"./items":33}],39:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/validate"),s=t("../code"),a=t("../../compile/util"),l=t("./additionalProperties");i.default={keyword:"properties",type:"object",schemaType:"object",code(u){const{gen:f,schema:c,parentSchema:d,data:g,it:h}=u;h.opts.removeAdditional==="all"&&d.additionalProperties===void 0&&l.default.code(new o.KeywordCxt(h,l.default,"additionalProperties"));const v=(0,s.allSchemaProperties)(c);for(const _ of v)h.definedProperties.add(_);h.opts.unevaluated&&v.length&&h.props!==!0&&(h.props=a.mergeEvaluated.props(f,(0,a.toHash)(v),h.props));const m=v.filter(_=>!(0,a.alwaysValidSchema)(h,c[_]));if(m.length===0)return;const p=f.name("valid");for(const _ of m)y(_)?b(_):(f.if((0,s.propertyInData)(f,g,_,h.opts.ownProperties)),b(_),h.allErrors||f.else().var(p,!0),f.endIf()),u.it.definedProperties.add(_),u.ok(p);function y(_){return h.opts.useDefaults&&!h.compositeRule&&c[_].default!==void 0}function b(_){u.subschema({keyword:"properties",schemaProp:_,dataProp:_},p)}}}},{"../../compile/util":10,"../../compile/validate":15,"../code":42,"./additionalProperties":26}],40:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=t("../../compile/util");i.default={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params({params:a}){return o._`{propertyName: ${a.propertyName}}`}},code(a){const{gen:l,schema:u,data:f,it:c}=a;if((0,s.alwaysValidSchema)(c,u))return;const d=l.name("valid");l.forIn("key",f,g=>{a.setParams({propertyName:g}),a.subschema({keyword:"propertyNames",data:g,dataTypes:["string"],propertyName:g,compositeRule:!0},d),l.if((0,o.not)(d),()=>{a.error(!0),c.allErrors||l.break()})}),a.ok(d)}}},{"../../compile/codegen":2,"../../compile/util":10}],41:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/util");i.default={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:s,parentSchema:a,it:l}){a.if===void 0&&(0,o.checkStrictMode)(l,`"${s}" without "if" is ignored`)}}},{"../../compile/util":10}],42:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.validateUnion=i.validateArray=i.usePattern=i.callValidateCode=i.schemaProperties=i.allSchemaProperties=i.noPropertyInData=i.propertyInData=i.isOwnProperty=i.hasPropFunc=i.reportMissingProp=i.checkMissingProp=i.checkReportMissingProp=void 0;const o=t("../compile/codegen"),s=t("../compile/util"),a=t("../compile/names"),l=t("../compile/util");function u(h){return h.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:o._`Object.prototype.hasOwnProperty`})}function f(h,v,m){return o._`${u(h)}.call(${v}, ${m})`}function c(h,v,m,p){const y=o._`${v}${(0,o.getProperty)(m)} === undefined`;return p?(0,o.or)(y,(0,o.not)(f(h,v,m))):y}function d(h){return h?Object.keys(h).filter(v=>v!=="__proto__"):[]}i.checkReportMissingProp=function(h,v){const{gen:m,data:p,it:y}=h;m.if(c(m,p,v,y.opts.ownProperties),()=>{h.setParams({missingProperty:o._`${v}`},!0),h.error()})},i.checkMissingProp=function({gen:h,data:v,it:{opts:m}},p,y){return(0,o.or)(...p.map(b=>(0,o.and)(c(h,v,b,m.ownProperties),o._`${y} = ${b}`)))},i.reportMissingProp=function(h,v){h.setParams({missingProperty:v},!0),h.error()},i.hasPropFunc=u,i.isOwnProperty=f,i.propertyInData=function(h,v,m,p){const y=o._`${v}${(0,o.getProperty)(m)} !== undefined`;return p?o._`${y} && ${f(h,v,m)}`:y},i.noPropertyInData=c,i.allSchemaProperties=d,i.schemaProperties=function(h,v){return d(v).filter(m=>!(0,s.alwaysValidSchema)(h,v[m]))},i.callValidateCode=function({schemaCode:h,data:v,it:{gen:m,topSchemaRef:p,schemaPath:y,errorPath:b},it:_},w,S,E){const P=E?o._`${h}, ${v}, ${p}${y}`:v,R=[[a.default.instancePath,(0,o.strConcat)(a.default.instancePath,b)],[a.default.parentData,_.parentData],[a.default.parentDataProperty,_.parentDataProperty],[a.default.rootData,a.default.rootData]];_.opts.dynamicRef&&R.push([a.default.dynamicAnchors,a.default.dynamicAnchors]);const j=o._`${P}, ${m.object(...R)}`;return S!==o.nil?o._`${w}.call(${S}, ${j})`:o._`${w}(${j})`};const g=o._`new RegExp`;i.usePattern=function({gen:h,it:{opts:v}},m){const p=v.unicodeRegExp?"u":"",{regExp:y}=v.code,b=y(m,p);return h.scopeValue("pattern",{key:b.toString(),ref:b,code:o._`${y.code==="new RegExp"?g:(0,l.useFunc)(h,y)}(${m}, ${p})`})},i.validateArray=function(h){const{gen:v,data:m,keyword:p,it:y}=h,b=v.name("valid");if(y.allErrors){const w=v.let("valid",!0);return _(()=>v.assign(w,!1)),w}return v.var(b,!0),_(()=>v.break()),b;function _(w){const S=v.const("len",o._`${m}.length`);v.forRange("i",0,S,E=>{h.subschema({keyword:p,dataProp:E,dataPropType:s.Type.Num},b),v.if((0,o.not)(b),w)})}},i.validateUnion=function(h){const{gen:v,schema:m,keyword:p,it:y}=h;if(!Array.isArray(m))throw new Error("ajv implementation error");if(m.some(w=>(0,s.alwaysValidSchema)(y,w))&&!y.opts.unevaluated)return;const b=v.let("valid",!1),_=v.name("_valid");v.block(()=>m.forEach((w,S)=>{const E=h.subschema({keyword:p,schemaProp:S,compositeRule:!0},_);v.assign(b,o._`${b} || ${_}`),h.mergeValidEvaluated(E,_)||v.if((0,o.not)(b))})),h.result(b,()=>h.reset(),()=>h.error(!0))}},{"../compile/codegen":2,"../compile/names":6,"../compile/util":10}],43:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}}},{}],44:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("./id"),s=t("./ref");i.default=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",o.default,s.default]},{"./id":43,"./ref":45}],45:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.callRef=i.getValidate=void 0;const o=t("../../compile/ref_error"),s=t("../code"),a=t("../../compile/codegen"),l=t("../../compile/names"),u=t("../../compile"),f=t("../../compile/util"),c={keyword:"$ref",schemaType:"string",code(h){const{gen:v,schema:m,it:p}=h,{baseId:y,schemaEnv:b,validateName:_,opts:w,self:S}=p,{root:E}=b;if((m==="#"||m==="#/")&&y===E.baseId)return function(){if(b===E)return g(h,_,b,b.$async);const R=v.scopeValue("root",{ref:E});return g(h,a._`${R}.validate`,E,E.$async)}();const P=u.resolveRef.call(S,E,y,m);if(P===void 0)throw new o.default(p.opts.uriResolver,y,m);return P instanceof u.SchemaEnv?function(R){const j=d(h,R);g(h,j,R,R.$async)}(P):function(R){const j=v.scopeValue("schema",w.code.source===!0?{ref:R,code:(0,a.stringify)(R)}:{ref:R}),U=v.name("valid"),F=h.subschema({schema:R,dataTypes:[],schemaPath:a.nil,topSchemaRef:j,errSchemaPath:m},U);h.mergeEvaluated(F),h.ok(U)}(P)}};function d(h,v){const{gen:m}=h;return v.validate?m.scopeValue("validate",{ref:v.validate}):a._`${m.scopeValue("wrapper",{ref:v})}.validate`}function g(h,v,m,p){const{gen:y,it:b}=h,{allErrors:_,schemaEnv:w,opts:S}=b,E=S.passContext?l.default.this:a.nil;function P(j){const U=a._`${j}.errors`;y.assign(l.default.vErrors,a._`${l.default.vErrors} === null ? ${U} : ${l.default.vErrors}.concat(${U})`),y.assign(l.default.errors,a._`${l.default.vErrors}.length`)}function R(j){var U;if(!b.opts.unevaluated)return;const F=(U=m==null?void 0:m.validate)===null||U===void 0?void 0:U.evaluated;if(b.props!==!0)if(F&&!F.dynamicProps)F.props!==void 0&&(b.props=f.mergeEvaluated.props(y,F.props,b.props));else{const z=y.var("props",a._`${j}.evaluated.props`);b.props=f.mergeEvaluated.props(y,z,b.props,a.Name)}if(b.items!==!0)if(F&&!F.dynamicItems)F.items!==void 0&&(b.items=f.mergeEvaluated.items(y,F.items,b.items));else{const z=y.var("items",a._`${j}.evaluated.items`);b.items=f.mergeEvaluated.items(y,z,b.items,a.Name)}}p?function(){if(!w.$async)throw new Error("async schema referenced by sync schema");const j=y.let("valid");y.try(()=>{y.code(a._`await ${(0,s.callValidateCode)(h,v,E)}`),R(v),_||y.assign(j,!0)},U=>{y.if(a._`!(${U} instanceof ${b.ValidationError})`,()=>y.throw(U)),P(U),_||y.assign(j,!1)}),h.ok(j)}():h.result((0,s.callValidateCode)(h,v,E),()=>R(v),()=>P(v))}i.getValidate=d,i.callRef=g,i.default=c},{"../../compile":5,"../../compile/codegen":2,"../../compile/names":6,"../../compile/ref_error":7,"../../compile/util":10,"../code":42}],46:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=t("../discriminator/types"),a=t("../../compile"),l=t("../../compile/util");i.default={keyword:"discriminator",type:"object",schemaType:"object",error:{message({params:{discrError:u,tagName:f}}){return u===s.DiscrError.Tag?`tag "${f}" must be string`:`value of tag "${f}" must be in oneOf`},params({params:{discrError:u,tag:f,tagName:c}}){return o._`{error: ${u}, tag: ${c}, tagValue: ${f}}`}},code(u){const{gen:f,data:c,schema:d,parentSchema:g,it:h}=u,{oneOf:v}=g;if(!h.opts.discriminator)throw new Error("discriminator: requires discriminator option");const m=d.propertyName;if(typeof m!="string")throw new Error("discriminator: requires propertyName");if(d.mapping)throw new Error("discriminator: mapping is not supported");if(!v)throw new Error("discriminator: requires oneOf keyword");const p=f.let("valid",!1),y=f.const("tag",o._`${c}${(0,o.getProperty)(m)}`);function b(_){const w=f.name("valid"),S=u.subschema({keyword:"oneOf",schemaProp:_},w);return u.mergeEvaluated(S,o.Name),w}f.if(o._`typeof ${y} == "string"`,()=>function(){const _=function(){var w;const S={},E=R(g);let P=!0;for(let F=0;F<v.length;F++){let z=v[F];(z==null?void 0:z.$ref)&&!(0,l.schemaHasRulesButRef)(z,h.self.RULES)&&(z=a.resolveRef.call(h.self,h.schemaEnv.root,h.baseId,z==null?void 0:z.$ref),z instanceof a.SchemaEnv&&(z=z.schema));const D=(w=z==null?void 0:z.properties)===null||w===void 0?void 0:w[m];if(typeof D!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${m}"`);P=P&&(E||R(z)),j(D,F)}if(!P)throw new Error(`discriminator: "${m}" must be required`);return S;function R({required:F}){return Array.isArray(F)&&F.includes(m)}function j(F,z){if(F.const)U(F.const,z);else{if(!F.enum)throw new Error(`discriminator: "properties/${m}" must have "const" or "enum"`);for(const D of F.enum)U(D,z)}}function U(F,z){if(typeof F!="string"||F in S)throw new Error(`discriminator: "${m}" values must be unique strings`);S[F]=z}}();f.if(!1);for(const w in _)f.elseIf(o._`${y} === ${w}`),f.assign(p,b(_[w]));f.else(),u.error(!1,{discrError:s.DiscrError.Mapping,tag:y,tagName:m}),f.endIf()}(),()=>u.error(!1,{discrError:s.DiscrError.Tag,tag:y,tagName:m})),u.ok(p)}}},{"../../compile":5,"../../compile/codegen":2,"../../compile/util":10,"../discriminator/types":47}],47:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.DiscrError=void 0,function(o){o.Tag="tag",o.Mapping="mapping"}(i.DiscrError||(i.DiscrError={}))},{}],48:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("./core"),s=t("./validation"),a=t("./applicator"),l=t("./format"),u=t("./metadata"),f=[o.default,s.default,(0,a.default)(),l.default,u.metadataVocabulary,u.contentVocabulary];i.default=f},{"./applicator":32,"./core":44,"./format":50,"./metadata":51,"./validation":54}],49:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen");i.default={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message({schemaCode:s}){return o.str`must match format "${s}"`},params({schemaCode:s}){return o._`{format: ${s}}`}},code(s,a){const{gen:l,data:u,$data:f,schema:c,schemaCode:d,it:g}=s,{opts:h,errSchemaPath:v,schemaEnv:m,self:p}=g;h.validateFormats&&(f?function(){const y=l.scopeValue("formats",{ref:p.formats,code:h.code.formats}),b=l.const("fDef",o._`${y}[${d}]`),_=l.let("fType"),w=l.let("format");l.if(o._`typeof ${b} == "object" && !(${b} instanceof RegExp)`,()=>l.assign(_,o._`${b}.type || "string"`).assign(w,o._`${b}.validate`),()=>l.assign(_,o._`"string"`).assign(w,b)),s.fail$data((0,o.or)(h.strictSchema===!1?o.nil:o._`${d} && !${w}`,function(){const S=m.$async?o._`(${b}.async ? await ${w}(${u}) : ${w}(${u}))`:o._`${w}(${u})`,E=o._`(typeof ${w} == "function" ? ${S} : ${w}.test(${u}))`;return o._`${w} && ${w} !== true && ${_} === ${a} && !${E}`}()))}():function(){const y=p.formats[c];if(!y)return void function(){if(h.strictSchema===!1)return void p.logger.warn(S());throw new Error(S());function S(){return`unknown format "${c}" ignored in schema at path "${v}"`}}();if(y===!0)return;const[b,_,w]=function(S){const E=S instanceof RegExp?(0,o.regexpCode)(S):h.code.formats?o._`${h.code.formats}${(0,o.getProperty)(c)}`:void 0,P=l.scopeValue("formats",{key:c,ref:S,code:E});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,o._`${P}.validate`]:["string",S,P]}(y);b===a&&s.pass(function(){if(typeof y=="object"&&!(y instanceof RegExp)&&y.async){if(!m.$async)throw new Error("async format in sync schema");return o._`await ${w}(${u})`}return typeof _=="function"?o._`${w}(${u})`:o._`${w}.test(${u})`}())}())}}},{"../../compile/codegen":2}],50:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("./format");i.default=[o.default]},{"./format":49}],51:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.contentVocabulary=i.metadataVocabulary=void 0,i.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],i.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},{}],52:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=t("../../compile/util"),a=t("../../runtime/equal");i.default={keyword:"const",$data:!0,error:{message:"must be equal to constant",params({schemaCode:l}){return o._`{allowedValue: ${l}}`}},code(l){const{gen:u,data:f,$data:c,schemaCode:d,schema:g}=l;c||g&&typeof g=="object"?l.fail$data(o._`!${(0,s.useFunc)(u,a.default)}(${f}, ${d})`):l.fail(o._`${g} !== ${f}`)}}},{"../../compile/codegen":2,"../../compile/util":10,"../../runtime/equal":21}],53:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=t("../../compile/util"),a=t("../../runtime/equal");i.default={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params({schemaCode:l}){return o._`{allowedValues: ${l}}`}},code(l){const{gen:u,data:f,$data:c,schema:d,schemaCode:g,it:h}=l;if(!c&&d.length===0)throw new Error("enum must have non-empty array");let v;const m=()=>v!=null?v:v=(0,s.useFunc)(u,a.default);let p;if(d.length>=h.opts.loopEnum||c)p=u.let("valid"),l.block$data(p,function(){u.assign(p,!1),u.forOf("v",g,y=>u.if(o._`${m()}(${f}, ${y})`,()=>u.assign(p,!0).break()))});else{if(!Array.isArray(d))throw new Error("ajv implementation error");const y=u.const("vSchema",g);p=(0,o.or)(...d.map((b,_)=>function(w,S){const E=d[S];return typeof E=="object"&&E!==null?o._`${m()}(${f}, ${w}[${S}])`:o._`${f} === ${E}`}(y,_)))}l.pass(p)}}},{"../../compile/codegen":2,"../../compile/util":10,"../../runtime/equal":21}],54:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("./limitNumber"),s=t("./multipleOf"),a=t("./limitLength"),l=t("./pattern"),u=t("./limitProperties"),f=t("./required"),c=t("./limitItems"),d=t("./uniqueItems"),g=t("./const"),h=t("./enum");i.default=[o.default,s.default,a.default,l.default,u.default,f.default,c.default,d.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},g.default,h.default]},{"./const":52,"./enum":53,"./limitItems":55,"./limitLength":56,"./limitNumber":57,"./limitProperties":58,"./multipleOf":59,"./pattern":60,"./required":61,"./uniqueItems":62}],55:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen");i.default={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message:({keyword:s,schemaCode:a})=>o.str`must NOT have ${s==="maxItems"?"more":"fewer"} than ${a} items`,params({schemaCode:s}){return o._`{limit: ${s}}`}},code(s){const{keyword:a,data:l,schemaCode:u}=s;s.fail$data(o._`${l}.length ${a==="maxItems"?o.operators.GT:o.operators.LT} ${u}`)}}},{"../../compile/codegen":2}],56:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=t("../../compile/util"),a=t("../../runtime/ucs2length");i.default={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message:({keyword:l,schemaCode:u})=>o.str`must NOT have ${l==="maxLength"?"more":"fewer"} than ${u} characters`,params({schemaCode:l}){return o._`{limit: ${l}}`}},code(l){const{keyword:u,data:f,schemaCode:c,it:d}=l,g=u==="maxLength"?o.operators.GT:o.operators.LT,h=d.opts.unicode===!1?o._`${f}.length`:o._`${(0,s.useFunc)(l.gen,a.default)}(${f})`;l.fail$data(o._`${h} ${g} ${c}`)}}},{"../../compile/codegen":2,"../../compile/util":10,"../../runtime/ucs2length":22}],57:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen"),s=o.operators,a={maximum:{okStr:"<=",ok:s.LTE,fail:s.GT},minimum:{okStr:">=",ok:s.GTE,fail:s.LT},exclusiveMaximum:{okStr:"<",ok:s.LT,fail:s.GTE},exclusiveMinimum:{okStr:">",ok:s.GT,fail:s.LTE}},l={message({keyword:f,schemaCode:c}){return o.str`must be ${a[f].okStr} ${c}`},params({keyword:f,schemaCode:c}){return o._`{comparison: ${a[f].okStr}, limit: ${c}}`}},u={keyword:Object.keys(a),type:"number",schemaType:"number",$data:!0,error:l,code(f){const{keyword:c,data:d,schemaCode:g}=f;f.fail$data(o._`${d} ${a[c].fail} ${g} || isNaN(${d})`)}};i.default=u},{"../../compile/codegen":2}],58:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen");i.default={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message:({keyword:s,schemaCode:a})=>o.str`must NOT have ${s==="maxProperties"?"more":"fewer"} than ${a} properties`,params({schemaCode:s}){return o._`{limit: ${s}}`}},code(s){const{keyword:a,data:l,schemaCode:u}=s;s.fail$data(o._`Object.keys(${l}).length ${a==="maxProperties"?o.operators.GT:o.operators.LT} ${u}`)}}},{"../../compile/codegen":2}],59:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/codegen");i.default={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message({schemaCode:s}){return o.str`must be multiple of ${s}`},params({schemaCode:s}){return o._`{multipleOf: ${s}}`}},code(s){const{gen:a,data:l,schemaCode:u,it:f}=s,c=f.opts.multipleOfPrecision,d=a.let("res"),g=c?o._`Math.abs(Math.round(${d}) - ${d}) > 1e-${c}`:o._`${d} !== parseInt(${d})`;s.fail$data(o._`(${u} === 0 || (${d} = ${l}/${u}, ${g}))`)}}},{"../../compile/codegen":2}],60:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../code"),s=t("../../compile/codegen");i.default={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message({schemaCode:a}){return s.str`must match pattern "${a}"`},params({schemaCode:a}){return s._`{pattern: ${a}}`}},code(a){const{data:l,$data:u,schema:f,schemaCode:c,it:d}=a,g=u?s._`(new RegExp(${c}, ${d.opts.unicodeRegExp?"u":""}))`:(0,o.usePattern)(a,f);a.fail$data(s._`!${g}.test(${l})`)}}},{"../../compile/codegen":2,"../code":42}],61:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../code"),s=t("../../compile/codegen"),a=t("../../compile/util");i.default={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message({params:{missingProperty:l}}){return s.str`must have required property '${l}'`},params({params:{missingProperty:l}}){return s._`{missingProperty: ${l}}`}},code(l){const{gen:u,schema:f,schemaCode:c,data:d,$data:g,it:h}=l,{opts:v}=h;if(!g&&f.length===0)return;const m=f.length>=v.loopRequired;if(h.allErrors?function(){if(m||g)l.block$data(s.nil,p);else for(const y of f)(0,o.checkReportMissingProp)(l,y)}():function(){const y=u.let("missing");if(m||g){const b=u.let("valid",!0);l.block$data(b,()=>function(_,w){l.setParams({missingProperty:_}),u.forOf(_,c,()=>{u.assign(w,(0,o.propertyInData)(u,d,_,v.ownProperties)),u.if((0,s.not)(w),()=>{l.error(),u.break()})},s.nil)}(y,b)),l.ok(b)}else u.if((0,o.checkMissingProp)(l,f,y)),(0,o.reportMissingProp)(l,y),u.else()}(),v.strictRequired){const y=l.parentSchema.properties,{definedProperties:b}=l.it;for(const _ of f)(y==null?void 0:y[_])===void 0&&!b.has(_)&&(0,a.checkStrictMode)(h,`required property "${_}" is not defined at "${h.schemaEnv.baseId+h.errSchemaPath}" (strictRequired)`,h.opts.strictRequired)}function p(){u.forOf("prop",c,y=>{l.setParams({missingProperty:y}),u.if((0,o.noPropertyInData)(u,d,y,v.ownProperties),()=>l.error())})}}}},{"../../compile/codegen":2,"../../compile/util":10,"../code":42}],62:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0});const o=t("../../compile/validate/dataType"),s=t("../../compile/codegen"),a=t("../../compile/util"),l=t("../../runtime/equal");i.default={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message({params:{i:u,j:f}}){return s.str`must NOT have duplicate items (items ## ${f} and ${u} are identical)`},params({params:{i:u,j:f}}){return s._`{i: ${u}, j: ${f}}`}},code(u){const{gen:f,data:c,$data:d,schema:g,parentSchema:h,schemaCode:v,it:m}=u;if(!d&&!g)return;const p=f.let("valid"),y=h.items?(0,o.getSchemaTypes)(h.items):[];function b(w,S){const E=f.name("item"),P=(0,o.checkDataTypes)(y,E,m.opts.strictNumbers,o.DataType.Wrong),R=f.const("indices",s._`{}`);f.for(s._`;${w}--;`,()=>{f.let(E,s._`${c}[${w}]`),f.if(P,s._`continue`),y.length>1&&f.if(s._`typeof ${E} == "string"`,s._`${E} += "_"`),f.if(s._`typeof ${R}[${E}] == "number"`,()=>{f.assign(S,s._`${R}[${E}]`),u.error(),f.assign(p,!1).break()}).code(s._`${R}[${E}] = ${w}`)})}function _(w,S){const E=(0,a.useFunc)(f,l.default),P=f.name("outer");f.label(P).for(s._`;${w}--;`,()=>f.for(s._`${S} = ${w}; ${S}--;`,()=>f.if(s._`${E}(${c}[${w}], ${c}[${S}])`,()=>{u.error(),f.assign(p,!1).break(P)})))}u.block$data(p,function(){const w=f.let("i",s._`${c}.length`),S=f.let("j");u.setParams({i:w,j:S}),f.assign(p,!0),f.if(s._`${w} > 1`,()=>(y.length>0&&!y.some(E=>E==="object"||E==="array")?b:_)(w,S))},s._`${v} === false`),u.ok(p)}}},{"../../compile/codegen":2,"../../compile/util":10,"../../compile/validate/dataType":13,"../../runtime/equal":21}],63:[function(t,r,i){r.exports=function o(s,a){if(s===a)return!0;if(s&&a&&typeof s=="object"&&typeof a=="object"){if(s.constructor!==a.constructor)return!1;var l,u,f;if(Array.isArray(s)){if((l=s.length)!=a.length)return!1;for(u=l;u--!=0;)if(!o(s[u],a[u]))return!1;return!0}if(s.constructor===RegExp)return s.source===a.source&&s.flags===a.flags;if(s.valueOf!==Object.prototype.valueOf)return s.valueOf()===a.valueOf();if(s.toString!==Object.prototype.toString)return s.toString()===a.toString();if((l=(f=Object.keys(s)).length)!==Object.keys(a).length)return!1;for(u=l;u--!=0;)if(!Object.prototype.hasOwnProperty.call(a,f[u]))return!1;for(u=l;u--!=0;){var c=f[u];if(!o(s[c],a[c]))return!1}return!0}return s!=s&&a!=a}},{}],64:[function(t,r,i){var o=r.exports=function(a,l,u){typeof l=="function"&&(u=l,l={}),s(l,typeof(u=l.cb||u)=="function"?u:u.pre||function(){},u.post||function(){},a,"",a)};function s(a,l,u,f,c,d,g,h,v,m){if(f&&typeof f=="object"&&!Array.isArray(f)){for(var p in l(f,c,d,g,h,v,m),f){var y=f[p];if(Array.isArray(y)){if(p in o.arrayKeywords)for(var b=0;b<y.length;b++)s(a,l,u,y[b],c+"/"+p+"/"+b,d,c,p,f,b)}else if(p in o.propsKeywords){if(y&&typeof y=="object")for(var _ in y)s(a,l,u,y[_],c+"/"+p+"/"+_.replace(/~/g,"~0").replace(/\//g,"~1"),d,c,p,f,_)}else(p in o.keywords||a.allKeys&&!(p in o.skipKeywords))&&s(a,l,u,y,c+"/"+p,d,c,p,f)}u(f,c,d,g,h,v,m)}}o.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},o.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},o.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},o.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},{}],65:[function(t,r,i){/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(o,s){s(typeof i=="object"&&r!==void 0?i:o.URI=o.URI||{})})(this,function(o){function s(){for(var J=arguments.length,se=Array(J),re=0;re<J;re++)se[re]=arguments[re];if(se.length>1){se[0]=se[0].slice(0,-1);for(var _e=se.length-1,Ce=1;Ce<_e;++Ce)se[Ce]=se[Ce].slice(1,-1);return se[_e]=se[_e].slice(1),se.join("")}return se[0]}function a(J){return"(?:"+J+")"}function l(J){return J===void 0?"undefined":J===null?"null":Object.prototype.toString.call(J).split(" ").pop().split("]").shift().toLowerCase()}function u(J){return J.toUpperCase()}function f(J){var se="[A-Za-z]",re="[0-9]",_e=s(re,"[A-Fa-f]"),Ce=a(a("%[EFef]"+_e+"%"+_e+_e+"%"+_e+_e)+"|"+a("%[89A-Fa-f]"+_e+"%"+_e+_e)+"|"+a("%"+_e+_e)),We="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",it=s("[\\:\\/\\?\\#\\[\\]\\@]",We),ct=J?"[\\uE000-\\uF8FF]":"[]",ft=s(se,re,"[\\-\\.\\_\\~]",J?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");a(se+s(se,re,"[\\+\\-\\.]")+"*"),a(a(Ce+"|"+s(ft,We,"[\\:]"))+"*");var vt=a(a("25[0-5]")+"|"+a("2[0-4][0-9]")+"|"+a("1[0-9][0-9]")+"|"+a("0?[1-9][0-9]")+"|0?0?"+re),Dt=a(vt+"\\."+vt+"\\."+vt+"\\."+vt),ot=a(_e+"{1,4}"),Ct=a(a(ot+"\\:"+ot)+"|"+Dt),yt=a(a(ot+"\\:")+"{6}"+Ct),Ut=a("\\:\\:"+a(ot+"\\:")+"{5}"+Ct),we=a(a(ot)+"?\\:\\:"+a(ot+"\\:")+"{4}"+Ct),$e=a(a(a(ot+"\\:")+"{0,1}"+ot)+"?\\:\\:"+a(ot+"\\:")+"{3}"+Ct),Tt=a(a(a(ot+"\\:")+"{0,2}"+ot)+"?\\:\\:"+a(ot+"\\:")+"{2}"+Ct),Et=a(a(a(ot+"\\:")+"{0,3}"+ot)+"?\\:\\:"+ot+"\\:"+Ct),At=a(a(a(ot+"\\:")+"{0,4}"+ot)+"?\\:\\:"+Ct),jt=a(a(a(ot+"\\:")+"{0,5}"+ot)+"?\\:\\:"+ot),Qt=a(a(a(ot+"\\:")+"{0,6}"+ot)+"?\\:\\:"),kn=a([yt,Ut,we,$e,Tt,Et,At,jt,Qt].join("|")),It=a(a(ft+"|"+Ce)+"+");a("[vV]"+_e+"+\\."+s(ft,We,"[\\:]")+"+"),a(a(Ce+"|"+s(ft,We))+"*");var Wn=a(Ce+"|"+s(ft,We,"[\\:\\@]"));return a(a(Ce+"|"+s(ft,We,"[\\@]"))+"+"),a(a(Wn+"|"+s("[\\/\\?]",ct))+"*"),{NOT_SCHEME:new RegExp(s("[^]",se,re,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(s("[^\\%\\:]",ft,We),"g"),NOT_HOST:new RegExp(s("[^\\%\\[\\]\\:]",ft,We),"g"),NOT_PATH:new RegExp(s("[^\\%\\/\\:\\@]",ft,We),"g"),NOT_PATH_NOSCHEME:new RegExp(s("[^\\%\\/\\@]",ft,We),"g"),NOT_QUERY:new RegExp(s("[^\\%]",ft,We,"[\\:\\@\\/\\?]",ct),"g"),NOT_FRAGMENT:new RegExp(s("[^\\%]",ft,We,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(s("[^]",ft,We),"g"),UNRESERVED:new RegExp(ft,"g"),OTHER_CHARS:new RegExp(s("[^\\%]",ft,it),"g"),PCT_ENCODED:new RegExp(Ce,"g"),IPV4ADDRESS:new RegExp("^("+Dt+")$"),IPV6ADDRESS:new RegExp("^\\[?("+kn+")"+a(a("\\%25|\\%(?!"+_e+"{2})")+"("+It+")")+"?\\]?$")}}var c=f(!1),d=f(!0),g=function(J,se){if(Array.isArray(J))return J;if(Symbol.iterator in Object(J))return function(re,_e){var Ce=[],We=!0,it=!1,ct=void 0;try{for(var ft,vt=re[Symbol.iterator]();!(We=(ft=vt.next()).done)&&(Ce.push(ft.value),!_e||Ce.length!==_e);We=!0);}catch(Dt){it=!0,ct=Dt}finally{try{!We&&vt.return&&vt.return()}finally{if(it)throw ct}}return Ce}(J,se);throw new TypeError("Invalid attempt to destructure non-iterable instance")},h=2147483647,v=36,m=/^xn--/,p=/[^\0-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=Math.floor,w=String.fromCharCode;function S(J){throw new RangeError(b[J])}function E(J,se){var re=J.split("@"),_e="";re.length>1&&(_e=re[0]+"@",J=re[1]);var Ce=function(We,it){for(var ct=[],ft=We.length;ft--;)ct[ft]=it(We[ft]);return ct}((J=J.replace(y,".")).split("."),se).join(".");return _e+Ce}function P(J){for(var se=[],re=0,_e=J.length;re<_e;){var Ce=J.charCodeAt(re++);if(Ce>=55296&&Ce<=56319&&re<_e){var We=J.charCodeAt(re++);(64512&We)==56320?se.push(((1023&Ce)<<10)+(1023&We)+65536):(se.push(Ce),re--)}else se.push(Ce)}return se}var R=function(J,se){return J+22+75*(J<26)-((se!=0)<<5)},j=function(J,se,re){var _e=0;for(J=re?_(J/700):J>>1,J+=_(J/se);J>455;_e+=v)J=_(J/35);return _(_e+36*J/(J+38))},U=function(J){var se,re=[],_e=J.length,Ce=0,We=128,it=72,ct=J.lastIndexOf("-");ct<0&&(ct=0);for(var ft=0;ft<ct;++ft)J.charCodeAt(ft)>=128&&S("not-basic"),re.push(J.charCodeAt(ft));for(var vt=ct>0?ct+1:0;vt<_e;){for(var Dt=Ce,ot=1,Ct=v;;Ct+=v){vt>=_e&&S("invalid-input");var yt=(se=J.charCodeAt(vt++))-48<10?se-22:se-65<26?se-65:se-97<26?se-97:v;(yt>=v||yt>_((h-Ce)/ot))&&S("overflow"),Ce+=yt*ot;var Ut=Ct<=it?1:Ct>=it+26?26:Ct-it;if(yt<Ut)break;var we=v-Ut;ot>_(h/we)&&S("overflow"),ot*=we}var $e=re.length+1;it=j(Ce-Dt,$e,Dt==0),_(Ce/$e)>h-We&&S("overflow"),We+=_(Ce/$e),Ce%=$e,re.splice(Ce++,0,We)}return String.fromCodePoint.apply(String,re)},F=function(J){var se=[],re=(J=P(J)).length,_e=128,Ce=0,We=72,it=!0,ct=!1,ft=void 0;try{for(var vt,Dt=J[Symbol.iterator]();!(it=(vt=Dt.next()).done);it=!0){var ot=vt.value;ot<128&&se.push(w(ot))}}catch(pi){ct=!0,ft=pi}finally{try{!it&&Dt.return&&Dt.return()}finally{if(ct)throw ft}}var Ct=se.length,yt=Ct;for(Ct&&se.push("-");yt<re;){var Ut=h,we=!0,$e=!1,Tt=void 0;try{for(var Et,At=J[Symbol.iterator]();!(we=(Et=At.next()).done);we=!0){var jt=Et.value;jt>=_e&&jt<Ut&&(Ut=jt)}}catch(pi){$e=!0,Tt=pi}finally{try{!we&&At.return&&At.return()}finally{if($e)throw Tt}}var Qt=yt+1;Ut-_e>_((h-Ce)/Qt)&&S("overflow"),Ce+=(Ut-_e)*Qt,_e=Ut;var kn=!0,It=!1,Wn=void 0;try{for(var ri,$t=J[Symbol.iterator]();!(kn=(ri=$t.next()).done);kn=!0){var et=ri.value;if(et<_e&&++Ce>h&&S("overflow"),et==_e){for(var _t=Ce,Er=v;;Er+=v){var Dr=Er<=We?1:Er>=We+26?26:Er-We;if(_t<Dr)break;var Ai=_t-Dr,ea=v-Dr;se.push(w(R(Dr+Ai%ea,0))),_t=_(Ai/ea)}se.push(w(R(_t,0))),We=j(Ce,Qt,yt==Ct),Ce=0,++yt}}}catch(pi){It=!0,Wn=pi}finally{try{!kn&&$t.return&&$t.return()}finally{if(It)throw Wn}}++Ce,++_e}return se.join("")},z=function(J){return E(J,function(se){return p.test(se)?"xn--"+F(se):se})},D=function(J){return E(J,function(se){return m.test(se)?U(se.slice(4).toLowerCase()):se})},N={};function L(J){var se=J.charCodeAt(0);return se<16?"%0"+se.toString(16).toUpperCase():se<128?"%"+se.toString(16).toUpperCase():se<2048?"%"+(se>>6|192).toString(16).toUpperCase()+"%"+(63&se|128).toString(16).toUpperCase():"%"+(se>>12|224).toString(16).toUpperCase()+"%"+(se>>6&63|128).toString(16).toUpperCase()+"%"+(63&se|128).toString(16).toUpperCase()}function X(J){for(var se="",re=0,_e=J.length;re<_e;){var Ce=parseInt(J.substr(re+1,2),16);if(Ce<128)se+=String.fromCharCode(Ce),re+=3;else if(Ce>=194&&Ce<224){if(_e-re>=6){var We=parseInt(J.substr(re+4,2),16);se+=String.fromCharCode((31&Ce)<<6|63&We)}else se+=J.substr(re,6);re+=6}else if(Ce>=224){if(_e-re>=9){var it=parseInt(J.substr(re+4,2),16),ct=parseInt(J.substr(re+7,2),16);se+=String.fromCharCode((15&Ce)<<12|(63&it)<<6|63&ct)}else se+=J.substr(re,9);re+=9}else se+=J.substr(re,3),re+=3}return se}function Q(J,se){function re(_e){var Ce=X(_e);return Ce.match(se.UNRESERVED)?Ce:_e}return J.scheme&&(J.scheme=String(J.scheme).replace(se.PCT_ENCODED,re).toLowerCase().replace(se.NOT_SCHEME,"")),J.userinfo!==void 0&&(J.userinfo=String(J.userinfo).replace(se.PCT_ENCODED,re).replace(se.NOT_USERINFO,L).replace(se.PCT_ENCODED,u)),J.host!==void 0&&(J.host=String(J.host).replace(se.PCT_ENCODED,re).toLowerCase().replace(se.NOT_HOST,L).replace(se.PCT_ENCODED,u)),J.path!==void 0&&(J.path=String(J.path).replace(se.PCT_ENCODED,re).replace(J.scheme?se.NOT_PATH:se.NOT_PATH_NOSCHEME,L).replace(se.PCT_ENCODED,u)),J.query!==void 0&&(J.query=String(J.query).replace(se.PCT_ENCODED,re).replace(se.NOT_QUERY,L).replace(se.PCT_ENCODED,u)),J.fragment!==void 0&&(J.fragment=String(J.fragment).replace(se.PCT_ENCODED,re).replace(se.NOT_FRAGMENT,L).replace(se.PCT_ENCODED,u)),J}function A(J){return J.replace(/^0*(.*)/,"$1")||"0"}function k(J,se){var re=J.match(se.IPV4ADDRESS)||[],_e=g(re,2)[1];return _e?_e.split(".").map(A).join("."):J}function V(J,se){var re=J.match(se.IPV6ADDRESS)||[],_e=g(re,3),Ce=_e[1],We=_e[2];if(Ce){for(var it=Ce.toLowerCase().split("::").reverse(),ct=g(it,2),ft=ct[0],vt=ct[1],Dt=vt?vt.split(":").map(A):[],ot=ft.split(":").map(A),Ct=se.IPV4ADDRESS.test(ot[ot.length-1]),yt=Ct?7:8,Ut=ot.length-yt,we=Array(yt),$e=0;$e<yt;++$e)we[$e]=Dt[$e]||ot[Ut+$e]||"";Ct&&(we[yt-1]=k(we[yt-1],se));var Tt=we.reduce(function(Qt,kn,It){if(!kn||kn==="0"){var Wn=Qt[Qt.length-1];Wn&&Wn.index+Wn.length===It?Wn.length++:Qt.push({index:It,length:1})}return Qt},[]).sort(function(Qt,kn){return kn.length-Qt.length})[0],Et=void 0;if(Tt&&Tt.length>1){var At=we.slice(0,Tt.index),jt=we.slice(Tt.index+Tt.length);Et=At.join(":")+"::"+jt.join(":")}else Et=we.join(":");return We&&(Et+="%"+We),Et}return J}var K=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,H="".match(/(){0}/)[1]===void 0;function I(J){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re={},_e=se.iri!==!1?d:c;se.reference==="suffix"&&(J=(se.scheme?se.scheme+":":"")+"//"+J);var Ce=J.match(K);if(Ce){H?(re.scheme=Ce[1],re.userinfo=Ce[3],re.host=Ce[4],re.port=parseInt(Ce[5],10),re.path=Ce[6]||"",re.query=Ce[7],re.fragment=Ce[8],isNaN(re.port)&&(re.port=Ce[5])):(re.scheme=Ce[1]||void 0,re.userinfo=J.indexOf("@")!==-1?Ce[3]:void 0,re.host=J.indexOf("//")!==-1?Ce[4]:void 0,re.port=parseInt(Ce[5],10),re.path=Ce[6]||"",re.query=J.indexOf("?")!==-1?Ce[7]:void 0,re.fragment=J.indexOf("#")!==-1?Ce[8]:void 0,isNaN(re.port)&&(re.port=J.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Ce[4]:void 0)),re.host&&(re.host=V(k(re.host,_e),_e)),re.reference=re.scheme!==void 0||re.userinfo!==void 0||re.host!==void 0||re.port!==void 0||re.path||re.query!==void 0?re.scheme===void 0?"relative":re.fragment===void 0?"absolute":"uri":"same-document",se.reference&&se.reference!=="suffix"&&se.reference!==re.reference&&(re.error=re.error||"URI is not a "+se.reference+" reference.");var We=N[(se.scheme||re.scheme||"").toLowerCase()];if(se.unicodeSupport||We&&We.unicodeSupport)Q(re,_e);else{if(re.host&&(se.domainHost||We&&We.domainHost))try{re.host=z(re.host.replace(_e.PCT_ENCODED,X).toLowerCase())}catch(it){re.error=re.error||"Host's domain name can not be converted to ASCII via punycode: "+it}Q(re,c)}We&&We.parse&&We.parse(re,se)}else re.error=re.error||"URI can not be parsed.";return re}function M(J,se){var re=se.iri!==!1?d:c,_e=[];return J.userinfo!==void 0&&(_e.push(J.userinfo),_e.push("@")),J.host!==void 0&&_e.push(V(k(String(J.host),re),re).replace(re.IPV6ADDRESS,function(Ce,We,it){return"["+We+(it?"%25"+it:"")+"]"})),typeof J.port!="number"&&typeof J.port!="string"||(_e.push(":"),_e.push(String(J.port))),_e.length?_e.join(""):void 0}var G=/^\.\.?\//,q=/^\/\.(\/|$)/,W=/^\/\.\.(\/|$)/,ae=/^\/?(?:.|\n)*?(?=\/|$)/;function le(J){for(var se=[];J.length;)if(J.match(G))J=J.replace(G,"");else if(J.match(q))J=J.replace(q,"/");else if(J.match(W))J=J.replace(W,"/"),se.pop();else if(J==="."||J==="..")J="";else{var re=J.match(ae);if(!re)throw new Error("Unexpected dot segment condition");var _e=re[0];J=J.slice(_e.length),se.push(_e)}return se.join("")}function Pe(J){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re=se.iri?d:c,_e=[],Ce=N[(se.scheme||J.scheme||"").toLowerCase()];if(Ce&&Ce.serialize&&Ce.serialize(J,se),J.host&&!re.IPV6ADDRESS.test(J.host)){if(se.domainHost||Ce&&Ce.domainHost)try{J.host=se.iri?D(J.host):z(J.host.replace(re.PCT_ENCODED,X).toLowerCase())}catch(ct){J.error=J.error||"Host's domain name can not be converted to "+(se.iri?"Unicode":"ASCII")+" via punycode: "+ct}}Q(J,re),se.reference!=="suffix"&&J.scheme&&(_e.push(J.scheme),_e.push(":"));var We=M(J,se);if(We!==void 0&&(se.reference!=="suffix"&&_e.push("//"),_e.push(We),J.path&&J.path.charAt(0)!=="/"&&_e.push("/")),J.path!==void 0){var it=J.path;se.absolutePath||Ce&&Ce.absolutePath||(it=le(it)),We===void 0&&(it=it.replace(/^\/\//,"/%2F")),_e.push(it)}return J.query!==void 0&&(_e.push("?"),_e.push(J.query)),J.fragment!==void 0&&(_e.push("#"),_e.push(J.fragment)),_e.join("")}function Ve(J,se){var re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_e=arguments[3],Ce={};return _e||(J=I(Pe(J,re),re),se=I(Pe(se,re),re)),!(re=re||{}).tolerant&&se.scheme?(Ce.scheme=se.scheme,Ce.userinfo=se.userinfo,Ce.host=se.host,Ce.port=se.port,Ce.path=le(se.path||""),Ce.query=se.query):(se.userinfo!==void 0||se.host!==void 0||se.port!==void 0?(Ce.userinfo=se.userinfo,Ce.host=se.host,Ce.port=se.port,Ce.path=le(se.path||""),Ce.query=se.query):(se.path?(se.path.charAt(0)==="/"?Ce.path=le(se.path):(Ce.path=J.userinfo===void 0&&J.host===void 0&&J.port===void 0||J.path?J.path?J.path.slice(0,J.path.lastIndexOf("/")+1)+se.path:se.path:"/"+se.path,Ce.path=le(Ce.path)),Ce.query=se.query):(Ce.path=J.path,Ce.query=se.query!==void 0?se.query:J.query),Ce.userinfo=J.userinfo,Ce.host=J.host,Ce.port=J.port),Ce.scheme=J.scheme),Ce.fragment=se.fragment,Ce}function Ae(J,se){return J&&J.toString().replace(se&&se.iri?d.PCT_ENCODED:c.PCT_ENCODED,X)}var ye={scheme:"http",domainHost:!0,parse(J,se){return J.host||(J.error=J.error||"HTTP URIs must have a host."),J},serialize(J,se){var re=String(J.scheme).toLowerCase()==="https";return J.port!==(re?443:80)&&J.port!==""||(J.port=void 0),J.path||(J.path="/"),J}},Ne={scheme:"https",domainHost:ye.domainHost,parse:ye.parse,serialize:ye.serialize};function xe(J){return typeof J.secure=="boolean"?J.secure:String(J.scheme).toLowerCase()==="wss"}var he={scheme:"ws",domainHost:!0,parse(J,se){var re=J;return re.secure=xe(re),re.resourceName=(re.path||"/")+(re.query?"?"+re.query:""),re.path=void 0,re.query=void 0,re},serialize(J,se){if(J.port!==(xe(J)?443:80)&&J.port!==""||(J.port=void 0),typeof J.secure=="boolean"&&(J.scheme=J.secure?"wss":"ws",J.secure=void 0),J.resourceName){var re=J.resourceName.split("?"),_e=g(re,2),Ce=_e[0],We=_e[1];J.path=Ce&&Ce!=="/"?Ce:void 0,J.query=We,J.resourceName=void 0}return J.fragment=void 0,J}},ve={scheme:"wss",domainHost:he.domainHost,parse:he.parse,serialize:he.serialize},de={},Ie="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",De="[0-9A-Fa-f]",He=a(a("%[EFef][0-9A-Fa-f]%"+De+De+"%"+De+De)+"|"+a("%[89A-Fa-f][0-9A-Fa-f]%"+De+De)+"|"+a("%"+De+De)),Xe=s("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),mt=new RegExp(Ie,"g"),be=new RegExp(He,"g"),Z=new RegExp(s("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',Xe),"g"),x=new RegExp(s("[^]",Ie,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),C=x;function O(J){var se=X(J);return se.match(mt)?se:J}var Y={scheme:"mailto",parse(J,se){var re=J,_e=re.to=re.path?re.path.split(","):[];if(re.path=void 0,re.query){for(var Ce=!1,We={},it=re.query.split("&"),ct=0,ft=it.length;ct<ft;++ct){var vt=it[ct].split("=");switch(vt[0]){case"to":for(var Dt=vt[1].split(","),ot=0,Ct=Dt.length;ot<Ct;++ot)_e.push(Dt[ot]);break;case"subject":re.subject=Ae(vt[1],se);break;case"body":re.body=Ae(vt[1],se);break;default:Ce=!0,We[Ae(vt[0],se)]=Ae(vt[1],se)}}Ce&&(re.headers=We)}re.query=void 0;for(var yt=0,Ut=_e.length;yt<Ut;++yt){var we=_e[yt].split("@");if(we[0]=Ae(we[0]),se.unicodeSupport)we[1]=Ae(we[1],se).toLowerCase();else try{we[1]=z(Ae(we[1],se).toLowerCase())}catch($e){re.error=re.error||"Email address's domain name can not be converted to ASCII via punycode: "+$e}_e[yt]=we.join("@")}return re},serialize(J,se){var re,_e=J,Ce=(re=J.to)!=null?re instanceof Array?re:typeof re.length!="number"||re.split||re.setInterval||re.call?[re]:Array.prototype.slice.call(re):[];if(Ce){for(var We=0,it=Ce.length;We<it;++We){var ct=String(Ce[We]),ft=ct.lastIndexOf("@"),vt=ct.slice(0,ft).replace(be,O).replace(be,u).replace(Z,L),Dt=ct.slice(ft+1);try{Dt=se.iri?D(Dt):z(Ae(Dt,se).toLowerCase())}catch(Ut){_e.error=_e.error||"Email address's domain name can not be converted to "+(se.iri?"Unicode":"ASCII")+" via punycode: "+Ut}Ce[We]=vt+"@"+Dt}_e.path=Ce.join(",")}var ot=J.headers=J.headers||{};J.subject&&(ot.subject=J.subject),J.body&&(ot.body=J.body);var Ct=[];for(var yt in ot)ot[yt]!==de[yt]&&Ct.push(yt.replace(be,O).replace(be,u).replace(x,L)+"="+ot[yt].replace(be,O).replace(be,u).replace(C,L));return Ct.length&&(_e.query=Ct.join("&")),_e}},ie=/^([^\:]+)\:(.*)/,pe={scheme:"urn",parse(J,se){var re=J.path&&J.path.match(ie),_e=J;if(re){var Ce=se.scheme||_e.scheme||"urn",We=re[1].toLowerCase(),it=re[2],ct=N[Ce+":"+(se.nid||We)];_e.nid=We,_e.nss=it,_e.path=void 0,ct&&(_e=ct.parse(_e,se))}else _e.error=_e.error||"URN can not be parsed.";return _e},serialize(J,se){var re=J.nid,_e=N[(se.scheme||J.scheme||"urn")+":"+(se.nid||re)];_e&&(J=_e.serialize(J,se));var Ce=J;return Ce.path=(re||se.nid)+":"+J.nss,Ce}},ge=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Qe={scheme:"urn:uuid",parse(J,se){var re=J;return re.uuid=re.nss,re.nss=void 0,se.tolerant||re.uuid&&re.uuid.match(ge)||(re.error=re.error||"UUID is not valid."),re},serialize(J,se){var re=J;return re.nss=(J.uuid||"").toLowerCase(),re}};N[ye.scheme]=ye,N[Ne.scheme]=Ne,N[he.scheme]=he,N[ve.scheme]=ve,N[Y.scheme]=Y,N[pe.scheme]=pe,N[Qe.scheme]=Qe,o.SCHEMES=N,o.pctEncChar=L,o.pctDecChars=X,o.parse=I,o.removeDotSegments=le,o.serialize=Pe,o.resolveComponents=Ve,o.resolve=function(J,se,re){var _e=function(Ce,We){var it=Ce;if(We)for(var ct in We)it[ct]=We[ct];return it}({scheme:"null"},re);return Pe(Ve(I(J,_e),I(se,_e),_e,!0),_e)},o.normalize=function(J,se){return typeof J=="string"?J=Pe(I(J,se),se):l(J)==="object"&&(J=I(Pe(J,se),se)),J},o.equal=function(J,se,re){return typeof J=="string"?J=Pe(I(J,re),re):l(J)==="object"&&(J=Pe(J,re)),typeof se=="string"?se=Pe(I(se,re),re):l(se)==="object"&&(se=Pe(se,re)),J===se},o.escapeComponent=function(J,se){return J&&J.toString().replace(se&&se.iri?d.ESCAPE:c.ESCAPE,L)},o.unescapeComponent=Ae,Object.defineProperty(o,"__esModule",{value:!0})})},{}],ajv:[function(t,r,i){Object.defineProperty(i,"__esModule",{value:!0}),i.CodeGen=i.Name=i.nil=i.stringify=i.str=i._=i.KeywordCxt=void 0;const o=t("./core"),s=t("./vocabularies/draft7"),a=t("./vocabularies/discriminator"),l=t("./refs/json-schema-draft-07.json"),u=["/properties"],f="http://json-schema.org/draft-07/schema";class c extends o.default{_addVocabularies(){super._addVocabularies(),s.default.forEach(v=>this.addVocabulary(v)),this.opts.discriminator&&this.addKeyword(a.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const v=this.opts.$data?this.$dataMetaSchema(l,u):l;this.addMetaSchema(v,f,!1),this.refs["http://json-schema.org/schema"]=f}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(f)?f:void 0)}}r.exports=i=c,Object.defineProperty(i,"__esModule",{value:!0}),i.default=c;var d=t("./compile/validate");Object.defineProperty(i,"KeywordCxt",{enumerable:!0,get(){return d.KeywordCxt}});var g=t("./compile/codegen");Object.defineProperty(i,"_",{enumerable:!0,get(){return g._}}),Object.defineProperty(i,"str",{enumerable:!0,get(){return g.str}}),Object.defineProperty(i,"stringify",{enumerable:!0,get(){return g.stringify}}),Object.defineProperty(i,"nil",{enumerable:!0,get(){return g.nil}}),Object.defineProperty(i,"Name",{enumerable:!0,get(){return g.Name}}),Object.defineProperty(i,"CodeGen",{enumerable:!0,get(){return g.CodeGen}})},{"./compile/codegen":2,"./compile/validate":15,"./core":18,"./refs/json-schema-draft-07.json":20,"./vocabularies/discriminator":46,"./vocabularies/draft7":48}]},{},[])("ajv")})})(VP);const gK=pR(VP.exports);function vK(n,e=void 0){const t=new gK({allErrors:!0,verbose:!0,$data:!0});e&&Object.keys(e).forEach(i=>{t.addSchema(e[i],i)});const r=t.compile(n);return function(o){return r(o),(r.errors||[]).map(_K).map(a=>yK(o,a))}}function yK(n,e){return{path:Ei(n,e.instancePath),message:e.message,severity:tn.warning}}function _K(n){if(n.keyword==="enum"&&Array.isArray(n.schema)){let e=n.schema;if(e){if(e=e.map(t=>JSON.stringify(t)),e.length>5){const t=["("+(e.length-5)+" more...)"];e=e.slice(0,5),e.push(t)}n.message="should be equal to one of: "+e.join(", ")}}return n.keyword==="additionalProperties"&&(n.message="should NOT have additional property: "+n.params.additionalProperty),n}var bK={};(function(n){(function(e){function t(Z){return Z!==null?Object.prototype.toString.call(Z)==="[object Array]":!1}function r(Z){return Z!==null?Object.prototype.toString.call(Z)==="[object Object]":!1}function i(Z,x){if(Z===x)return!0;var C=Object.prototype.toString.call(Z);if(C!==Object.prototype.toString.call(x))return!1;if(t(Z)===!0){if(Z.length!==x.length)return!1;for(var O=0;O<Z.length;O++)if(i(Z[O],x[O])===!1)return!1;return!0}if(r(Z)===!0){var Y={};for(var ie in Z)if(hasOwnProperty.call(Z,ie)){if(i(Z[ie],x[ie])===!1)return!1;Y[ie]=!0}for(var pe in x)if(hasOwnProperty.call(x,pe)&&Y[pe]!==!0)return!1;return!0}return!1}function o(Z){if(Z===""||Z===!1||Z===null)return!0;if(t(Z)&&Z.length===0)return!0;if(r(Z)){for(var x in Z)if(Z.hasOwnProperty(x))return!1;return!0}else return!1}function s(Z){for(var x=Object.keys(Z),C=[],O=0;O<x.length;O++)C.push(Z[x[O]]);return C}var a;typeof String.prototype.trimLeft=="function"?a=function(Z){return Z.trimLeft()}:a=function(Z){return Z.match(/^\s*(.*)/)[1]};var l=0,u=1,f=2,c=3,d=4,g=5,h=6,v=7,m=8,p=9,y={0:"number",1:"any",2:"string",3:"array",4:"object",5:"boolean",6:"expression",7:"null",8:"Array<number>",9:"Array<string>"},b="EOF",_="UnquotedIdentifier",w="QuotedIdentifier",S="Rbracket",E="Rparen",P="Comma",R="Colon",j="Rbrace",U="Number",F="Current",z="Expref",D="Pipe",N="Or",L="And",X="EQ",Q="GT",A="LT",k="GTE",V="LTE",K="NE",H="Flatten",I="Star",M="Filter",G="Dot",q="Not",W="Lbrace",ae="Lbracket",le="Lparen",Pe="Literal",Ve={".":G,"*":I,",":P,":":R,"{":W,"}":j,"]":S,"(":le,")":E,"@":F},Ae={"<":!0,">":!0,"=":!0,"!":!0},ye={" ":!0,"	":!0,"\n":!0};function Ne(Z){return Z>="a"&&Z<="z"||Z>="A"&&Z<="Z"||Z==="_"}function xe(Z){return Z>="0"&&Z<="9"||Z==="-"}function he(Z){return Z>="a"&&Z<="z"||Z>="A"&&Z<="Z"||Z>="0"&&Z<="9"||Z==="_"}function ve(){}ve.prototype={tokenize:function(Z){var x=[];this._current=0;for(var C,O,Y;this._current<Z.length;)if(Ne(Z[this._current]))C=this._current,O=this._consumeUnquotedIdentifier(Z),x.push({type:_,value:O,start:C});else if(Ve[Z[this._current]]!==void 0)x.push({type:Ve[Z[this._current]],value:Z[this._current],start:this._current}),this._current++;else if(xe(Z[this._current]))Y=this._consumeNumber(Z),x.push(Y);else if(Z[this._current]==="[")Y=this._consumeLBracket(Z),x.push(Y);else if(Z[this._current]==='"')C=this._current,O=this._consumeQuotedIdentifier(Z),x.push({type:w,value:O,start:C});else if(Z[this._current]==="'")C=this._current,O=this._consumeRawStringLiteral(Z),x.push({type:Pe,value:O,start:C});else if(Z[this._current]==="`"){C=this._current;var ie=this._consumeLiteral(Z);x.push({type:Pe,value:ie,start:C})}else if(Ae[Z[this._current]]!==void 0)x.push(this._consumeOperator(Z));else if(ye[Z[this._current]]!==void 0)this._current++;else if(Z[this._current]==="&")C=this._current,this._current++,Z[this._current]==="&"?(this._current++,x.push({type:L,value:"&&",start:C})):x.push({type:z,value:"&",start:C});else if(Z[this._current]==="|")C=this._current,this._current++,Z[this._current]==="|"?(this._current++,x.push({type:N,value:"||",start:C})):x.push({type:D,value:"|",start:C});else{var pe=new Error("Unknown character:"+Z[this._current]);throw pe.name="LexerError",pe}return x},_consumeUnquotedIdentifier:function(Z){var x=this._current;for(this._current++;this._current<Z.length&&he(Z[this._current]);)this._current++;return Z.slice(x,this._current)},_consumeQuotedIdentifier:function(Z){var x=this._current;this._current++;for(var C=Z.length;Z[this._current]!=='"'&&this._current<C;){var O=this._current;Z[O]==="\\"&&(Z[O+1]==="\\"||Z[O+1]==='"')?O+=2:O++,this._current=O}return this._current++,JSON.parse(Z.slice(x,this._current))},_consumeRawStringLiteral:function(Z){var x=this._current;this._current++;for(var C=Z.length;Z[this._current]!=="'"&&this._current<C;){var O=this._current;Z[O]==="\\"&&(Z[O+1]==="\\"||Z[O+1]==="'")?O+=2:O++,this._current=O}this._current++;var Y=Z.slice(x+1,this._current-1);return Y.replace("\\'","'")},_consumeNumber:function(Z){var x=this._current;this._current++;for(var C=Z.length;xe(Z[this._current])&&this._current<C;)this._current++;var O=parseInt(Z.slice(x,this._current));return{type:U,value:O,start:x}},_consumeLBracket:function(Z){var x=this._current;return this._current++,Z[this._current]==="?"?(this._current++,{type:M,value:"[?",start:x}):Z[this._current]==="]"?(this._current++,{type:H,value:"[]",start:x}):{type:ae,value:"[",start:x}},_consumeOperator:function(Z){var x=this._current,C=Z[x];if(this._current++,C==="!")return Z[this._current]==="="?(this._current++,{type:K,value:"!=",start:x}):{type:q,value:"!",start:x};if(C==="<")return Z[this._current]==="="?(this._current++,{type:V,value:"<=",start:x}):{type:A,value:"<",start:x};if(C===">")return Z[this._current]==="="?(this._current++,{type:k,value:">=",start:x}):{type:Q,value:">",start:x};if(C==="="&&Z[this._current]==="=")return this._current++,{type:X,value:"==",start:x}},_consumeLiteral:function(Z){this._current++;for(var x=this._current,C=Z.length,O;Z[this._current]!=="`"&&this._current<C;){var Y=this._current;Z[Y]==="\\"&&(Z[Y+1]==="\\"||Z[Y+1]==="`")?Y+=2:Y++,this._current=Y}var ie=a(Z.slice(x,this._current));return ie=ie.replace("\\`","`"),this._looksLikeJSON(ie)?O=JSON.parse(ie):O=JSON.parse('"'+ie+'"'),this._current++,O},_looksLikeJSON:function(Z){var x='[{"',C=["true","false","null"],O="-0123456789";if(Z==="")return!1;if(x.indexOf(Z[0])>=0)return!0;if(C.indexOf(Z)>=0)return!0;if(O.indexOf(Z[0])>=0)try{return JSON.parse(Z),!0}catch{return!1}else return!1}};var de={};de[b]=0,de[_]=0,de[w]=0,de[S]=0,de[E]=0,de[P]=0,de[j]=0,de[U]=0,de[F]=0,de[z]=0,de[D]=1,de[N]=2,de[L]=3,de[X]=5,de[Q]=5,de[A]=5,de[k]=5,de[V]=5,de[K]=5,de[H]=9,de[I]=20,de[M]=21,de[G]=40,de[q]=45,de[W]=50,de[ae]=55,de[le]=60;function Ie(){}Ie.prototype={parse:function(Z){this._loadTokens(Z),this.index=0;var x=this.expression(0);if(this._lookahead(0)!==b){var C=this._lookaheadToken(0),O=new Error("Unexpected token type: "+C.type+", value: "+C.value);throw O.name="ParserError",O}return x},_loadTokens:function(Z){var x=new ve,C=x.tokenize(Z);C.push({type:b,value:"",start:Z.length}),this.tokens=C},expression:function(Z){var x=this._lookaheadToken(0);this._advance();for(var C=this.nud(x),O=this._lookahead(0);Z<de[O];)this._advance(),C=this.led(O,C),O=this._lookahead(0);return C},_lookahead:function(Z){return this.tokens[this.index+Z].type},_lookaheadToken:function(Z){return this.tokens[this.index+Z]},_advance:function(){this.index++},nud:function(Z){var x,C,O;switch(Z.type){case Pe:return{type:"Literal",value:Z.value};case _:return{type:"Field",name:Z.value};case w:var Y={type:"Field",name:Z.value};if(this._lookahead(0)===le)throw new Error("Quoted identifier not allowed for function names.");return Y;case q:return C=this.expression(de.Not),{type:"NotExpression",children:[C]};case I:return x={type:"Identity"},C=null,this._lookahead(0)===S?C={type:"Identity"}:C=this._parseProjectionRHS(de.Star),{type:"ValueProjection",children:[x,C]};case M:return this.led(Z.type,{type:"Identity"});case W:return this._parseMultiselectHash();case H:return x={type:H,children:[{type:"Identity"}]},C=this._parseProjectionRHS(de.Flatten),{type:"Projection",children:[x,C]};case ae:return this._lookahead(0)===U||this._lookahead(0)===R?(C=this._parseIndexExpression(),this._projectIfSlice({type:"Identity"},C)):this._lookahead(0)===I&&this._lookahead(1)===S?(this._advance(),this._advance(),C=this._parseProjectionRHS(de.Star),{type:"Projection",children:[{type:"Identity"},C]}):this._parseMultiselectList();case F:return{type:F};case z:return O=this.expression(de.Expref),{type:"ExpressionReference",children:[O]};case le:for(var ie=[];this._lookahead(0)!==E;)this._lookahead(0)===F?(O={type:F},this._advance()):O=this.expression(0),ie.push(O);return this._match(E),ie[0];default:this._errorToken(Z)}},led:function(Z,x){var C;switch(Z){case G:var O=de.Dot;return this._lookahead(0)!==I?(C=this._parseDotRHS(O),{type:"Subexpression",children:[x,C]}):(this._advance(),C=this._parseProjectionRHS(O),{type:"ValueProjection",children:[x,C]});case D:return C=this.expression(de.Pipe),{type:D,children:[x,C]};case N:return C=this.expression(de.Or),{type:"OrExpression",children:[x,C]};case L:return C=this.expression(de.And),{type:"AndExpression",children:[x,C]};case le:for(var Y=x.name,ie=[],pe,ge;this._lookahead(0)!==E;)this._lookahead(0)===F?(pe={type:F},this._advance()):pe=this.expression(0),this._lookahead(0)===P&&this._match(P),ie.push(pe);return this._match(E),ge={type:"Function",name:Y,children:ie},ge;case M:var Qe=this.expression(0);return this._match(S),this._lookahead(0)===H?C={type:"Identity"}:C=this._parseProjectionRHS(de.Filter),{type:"FilterProjection",children:[x,C,Qe]};case H:var J={type:H,children:[x]},se=this._parseProjectionRHS(de.Flatten);return{type:"Projection",children:[J,se]};case X:case K:case Q:case k:case A:case V:return this._parseComparator(x,Z);case ae:var re=this._lookaheadToken(0);return re.type===U||re.type===R?(C=this._parseIndexExpression(),this._projectIfSlice(x,C)):(this._match(I),this._match(S),C=this._parseProjectionRHS(de.Star),{type:"Projection",children:[x,C]});default:this._errorToken(this._lookaheadToken(0))}},_match:function(Z){if(this._lookahead(0)===Z)this._advance();else{var x=this._lookaheadToken(0),C=new Error("Expected "+Z+", got: "+x.type);throw C.name="ParserError",C}},_errorToken:function(Z){var x=new Error("Invalid token ("+Z.type+'): "'+Z.value+'"');throw x.name="ParserError",x},_parseIndexExpression:function(){if(this._lookahead(0)===R||this._lookahead(1)===R)return this._parseSliceExpression();var Z={type:"Index",value:this._lookaheadToken(0).value};return this._advance(),this._match(S),Z},_projectIfSlice:function(Z,x){var C={type:"IndexExpression",children:[Z,x]};return x.type==="Slice"?{type:"Projection",children:[C,this._parseProjectionRHS(de.Star)]}:C},_parseSliceExpression:function(){for(var Z=[null,null,null],x=0,C=this._lookahead(0);C!==S&&x<3;){if(C===R)x++,this._advance();else if(C===U)Z[x]=this._lookaheadToken(0).value,this._advance();else{var O=this._lookahead(0),Y=new Error("Syntax error, unexpected token: "+O.value+"("+O.type+")");throw Y.name="Parsererror",Y}C=this._lookahead(0)}return this._match(S),{type:"Slice",children:Z}},_parseComparator:function(Z,x){var C=this.expression(de[x]);return{type:"Comparator",name:x,children:[Z,C]}},_parseDotRHS:function(Z){var x=this._lookahead(0),C=[_,w,I];if(C.indexOf(x)>=0)return this.expression(Z);if(x===ae)return this._match(ae),this._parseMultiselectList();if(x===W)return this._match(W),this._parseMultiselectHash()},_parseProjectionRHS:function(Z){var x;if(de[this._lookahead(0)]<10)x={type:"Identity"};else if(this._lookahead(0)===ae)x=this.expression(Z);else if(this._lookahead(0)===M)x=this.expression(Z);else if(this._lookahead(0)===G)this._match(G),x=this._parseDotRHS(Z);else{var C=this._lookaheadToken(0),O=new Error("Sytanx error, unexpected token: "+C.value+"("+C.type+")");throw O.name="ParserError",O}return x},_parseMultiselectList:function(){for(var Z=[];this._lookahead(0)!==S;){var x=this.expression(0);if(Z.push(x),this._lookahead(0)===P&&(this._match(P),this._lookahead(0)===S))throw new Error("Unexpected token Rbracket")}return this._match(S),{type:"MultiSelectList",children:Z}},_parseMultiselectHash:function(){for(var Z=[],x=[_,w],C,O,Y,ie;;){if(C=this._lookaheadToken(0),x.indexOf(C.type)<0)throw new Error("Expecting an identifier token, got: "+C.type);if(O=C.value,this._advance(),this._match(R),Y=this.expression(0),ie={type:"KeyValuePair",name:O,value:Y},Z.push(ie),this._lookahead(0)===P)this._match(P);else if(this._lookahead(0)===j){this._match(j);break}}return{type:"MultiSelectHash",children:Z}}};function De(Z){this.runtime=Z}De.prototype={search:function(Z,x){return this.visit(Z,x)},visit:function(Z,x){var C,O,Y,ie,pe,ge,Qe,J,se,re;switch(Z.type){case"Field":return x!==null&&r(x)?(ge=x[Z.name],ge===void 0?null:ge):null;case"Subexpression":for(Y=this.visit(Z.children[0],x),re=1;re<Z.children.length;re++)if(Y=this.visit(Z.children[1],Y),Y===null)return null;return Y;case"IndexExpression":return Qe=this.visit(Z.children[0],x),J=this.visit(Z.children[1],Qe),J;case"Index":if(!t(x))return null;var _e=Z.value;return _e<0&&(_e=x.length+_e),Y=x[_e],Y===void 0&&(Y=null),Y;case"Slice":if(!t(x))return null;var Ce=Z.children.slice(0),We=this.computeSliceParams(x.length,Ce),it=We[0],ct=We[1],ft=We[2];if(Y=[],ft>0)for(re=it;re<ct;re+=ft)Y.push(x[re]);else for(re=it;re>ct;re+=ft)Y.push(x[re]);return Y;case"Projection":var vt=this.visit(Z.children[0],x);if(!t(vt))return null;for(se=[],re=0;re<vt.length;re++)O=this.visit(Z.children[1],vt[re]),O!==null&&se.push(O);return se;case"ValueProjection":if(vt=this.visit(Z.children[0],x),!r(vt))return null;se=[];var Dt=s(vt);for(re=0;re<Dt.length;re++)O=this.visit(Z.children[1],Dt[re]),O!==null&&se.push(O);return se;case"FilterProjection":if(vt=this.visit(Z.children[0],x),!t(vt))return null;var ot=[],Ct=[];for(re=0;re<vt.length;re++)C=this.visit(Z.children[2],vt[re]),o(C)||ot.push(vt[re]);for(var yt=0;yt<ot.length;yt++)O=this.visit(Z.children[1],ot[yt]),O!==null&&Ct.push(O);return Ct;case"Comparator":switch(ie=this.visit(Z.children[0],x),pe=this.visit(Z.children[1],x),Z.name){case X:Y=i(ie,pe);break;case K:Y=!i(ie,pe);break;case Q:Y=ie>pe;break;case k:Y=ie>=pe;break;case A:Y=ie<pe;break;case V:Y=ie<=pe;break;default:throw new Error("Unknown comparator: "+Z.name)}return Y;case H:var Ut=this.visit(Z.children[0],x);if(!t(Ut))return null;var we=[];for(re=0;re<Ut.length;re++)O=Ut[re],t(O)?we.push.apply(we,O):we.push(O);return we;case"Identity":return x;case"MultiSelectList":if(x===null)return null;for(se=[],re=0;re<Z.children.length;re++)se.push(this.visit(Z.children[re],x));return se;case"MultiSelectHash":if(x===null)return null;se={};var $e;for(re=0;re<Z.children.length;re++)$e=Z.children[re],se[$e.name]=this.visit($e.value,x);return se;case"OrExpression":return C=this.visit(Z.children[0],x),o(C)&&(C=this.visit(Z.children[1],x)),C;case"AndExpression":return ie=this.visit(Z.children[0],x),o(ie)===!0?ie:this.visit(Z.children[1],x);case"NotExpression":return ie=this.visit(Z.children[0],x),o(ie);case"Literal":return Z.value;case D:return Qe=this.visit(Z.children[0],x),this.visit(Z.children[1],Qe);case F:return x;case"Function":var Tt=[];for(re=0;re<Z.children.length;re++)Tt.push(this.visit(Z.children[re],x));return this.runtime.callFunction(Z.name,Tt);case"ExpressionReference":var Et=Z.children[0];return Et.jmespathType=z,Et;default:throw new Error("Unknown node type: "+Z.type)}},computeSliceParams:function(Z,x){var C=x[0],O=x[1],Y=x[2],ie=[null,null,null];if(Y===null)Y=1;else if(Y===0){var pe=new Error("Invalid slice, step cannot be 0");throw pe.name="RuntimeError",pe}var ge=Y<0;return C===null?C=ge?Z-1:0:C=this.capSliceRange(Z,C,Y),O===null?O=ge?-1:Z:O=this.capSliceRange(Z,O,Y),ie[0]=C,ie[1]=O,ie[2]=Y,ie},capSliceRange:function(Z,x,C){return x<0?(x+=Z,x<0&&(x=C<0?-1:0)):x>=Z&&(x=C<0?Z-1:Z),x}};function He(Z){this._interpreter=Z,this.functionTable={abs:{_func:this._functionAbs,_signature:[{types:[l]}]},avg:{_func:this._functionAvg,_signature:[{types:[m]}]},ceil:{_func:this._functionCeil,_signature:[{types:[l]}]},contains:{_func:this._functionContains,_signature:[{types:[f,c]},{types:[u]}]},ends_with:{_func:this._functionEndsWith,_signature:[{types:[f]},{types:[f]}]},floor:{_func:this._functionFloor,_signature:[{types:[l]}]},length:{_func:this._functionLength,_signature:[{types:[f,c,d]}]},map:{_func:this._functionMap,_signature:[{types:[h]},{types:[c]}]},max:{_func:this._functionMax,_signature:[{types:[m,p]}]},merge:{_func:this._functionMerge,_signature:[{types:[d],variadic:!0}]},max_by:{_func:this._functionMaxBy,_signature:[{types:[c]},{types:[h]}]},sum:{_func:this._functionSum,_signature:[{types:[m]}]},starts_with:{_func:this._functionStartsWith,_signature:[{types:[f]},{types:[f]}]},min:{_func:this._functionMin,_signature:[{types:[m,p]}]},min_by:{_func:this._functionMinBy,_signature:[{types:[c]},{types:[h]}]},type:{_func:this._functionType,_signature:[{types:[u]}]},keys:{_func:this._functionKeys,_signature:[{types:[d]}]},values:{_func:this._functionValues,_signature:[{types:[d]}]},sort:{_func:this._functionSort,_signature:[{types:[p,m]}]},sort_by:{_func:this._functionSortBy,_signature:[{types:[c]},{types:[h]}]},join:{_func:this._functionJoin,_signature:[{types:[f]},{types:[p]}]},reverse:{_func:this._functionReverse,_signature:[{types:[f,c]}]},to_array:{_func:this._functionToArray,_signature:[{types:[u]}]},to_string:{_func:this._functionToString,_signature:[{types:[u]}]},to_number:{_func:this._functionToNumber,_signature:[{types:[u]}]},not_null:{_func:this._functionNotNull,_signature:[{types:[u],variadic:!0}]}}}He.prototype={callFunction:function(Z,x){var C=this.functionTable[Z];if(C===void 0)throw new Error("Unknown function: "+Z+"()");return this._validateArgs(Z,x,C._signature),C._func.call(this,x)},_validateArgs:function(Z,x,C){var O;if(C[C.length-1].variadic){if(x.length<C.length)throw O=C.length===1?" argument":" arguments",new Error("ArgumentError: "+Z+"() takes at least"+C.length+O+" but received "+x.length)}else if(x.length!==C.length)throw O=C.length===1?" argument":" arguments",new Error("ArgumentError: "+Z+"() takes "+C.length+O+" but received "+x.length);for(var Y,ie,pe,ge=0;ge<C.length;ge++){pe=!1,Y=C[ge].types,ie=this._getTypeName(x[ge]);for(var Qe=0;Qe<Y.length;Qe++)if(this._typeMatches(ie,Y[Qe],x[ge])){pe=!0;break}if(!pe){var J=Y.map(function(se){return y[se]}).join(",");throw new Error("TypeError: "+Z+"() expected argument "+(ge+1)+" to be type "+J+" but received type "+y[ie]+" instead.")}}},_typeMatches:function(Z,x,C){if(x===u)return!0;if(x===p||x===m||x===c){if(x===c)return Z===c;if(Z===c){var O;x===m?O=l:x===p&&(O=f);for(var Y=0;Y<C.length;Y++)if(!this._typeMatches(this._getTypeName(C[Y]),O,C[Y]))return!1;return!0}}else return Z===x},_getTypeName:function(Z){switch(Object.prototype.toString.call(Z)){case"[object String]":return f;case"[object Number]":return l;case"[object Array]":return c;case"[object Boolean]":return g;case"[object Null]":return v;case"[object Object]":return Z.jmespathType===z?h:d}},_functionStartsWith:function(Z){return Z[0].lastIndexOf(Z[1])===0},_functionEndsWith:function(Z){var x=Z[0],C=Z[1];return x.indexOf(C,x.length-C.length)!==-1},_functionReverse:function(Z){var x=this._getTypeName(Z[0]);if(x===f){for(var C=Z[0],O="",Y=C.length-1;Y>=0;Y--)O+=C[Y];return O}else{var ie=Z[0].slice(0);return ie.reverse(),ie}},_functionAbs:function(Z){return Math.abs(Z[0])},_functionCeil:function(Z){return Math.ceil(Z[0])},_functionAvg:function(Z){for(var x=0,C=Z[0],O=0;O<C.length;O++)x+=C[O];return x/C.length},_functionContains:function(Z){return Z[0].indexOf(Z[1])>=0},_functionFloor:function(Z){return Math.floor(Z[0])},_functionLength:function(Z){return r(Z[0])?Object.keys(Z[0]).length:Z[0].length},_functionMap:function(Z){for(var x=[],C=this._interpreter,O=Z[0],Y=Z[1],ie=0;ie<Y.length;ie++)x.push(C.visit(O,Y[ie]));return x},_functionMerge:function(Z){for(var x={},C=0;C<Z.length;C++){var O=Z[C];for(var Y in O)x[Y]=O[Y]}return x},_functionMax:function(Z){if(Z[0].length>0){var x=this._getTypeName(Z[0][0]);if(x===l)return Math.max.apply(Math,Z[0]);for(var C=Z[0],O=C[0],Y=1;Y<C.length;Y++)O.localeCompare(C[Y])<0&&(O=C[Y]);return O}else return null},_functionMin:function(Z){if(Z[0].length>0){var x=this._getTypeName(Z[0][0]);if(x===l)return Math.min.apply(Math,Z[0]);for(var C=Z[0],O=C[0],Y=1;Y<C.length;Y++)C[Y].localeCompare(O)<0&&(O=C[Y]);return O}else return null},_functionSum:function(Z){for(var x=0,C=Z[0],O=0;O<C.length;O++)x+=C[O];return x},_functionType:function(Z){switch(this._getTypeName(Z[0])){case l:return"number";case f:return"string";case c:return"array";case d:return"object";case g:return"boolean";case h:return"expref";case v:return"null"}},_functionKeys:function(Z){return Object.keys(Z[0])},_functionValues:function(Z){for(var x=Z[0],C=Object.keys(x),O=[],Y=0;Y<C.length;Y++)O.push(x[C[Y]]);return O},_functionJoin:function(Z){var x=Z[0],C=Z[1];return C.join(x)},_functionToArray:function(Z){return this._getTypeName(Z[0])===c?Z[0]:[Z[0]]},_functionToString:function(Z){return this._getTypeName(Z[0])===f?Z[0]:JSON.stringify(Z[0])},_functionToNumber:function(Z){var x=this._getTypeName(Z[0]),C;return x===l?Z[0]:x===f&&(C=+Z[0],!isNaN(C))?C:null},_functionNotNull:function(Z){for(var x=0;x<Z.length;x++)if(this._getTypeName(Z[x])!==v)return Z[x];return null},_functionSort:function(Z){var x=Z[0].slice(0);return x.sort(),x},_functionSortBy:function(Z){var x=Z[0].slice(0);if(x.length===0)return x;var C=this._interpreter,O=Z[1],Y=this._getTypeName(C.visit(O,x[0]));if([l,f].indexOf(Y)<0)throw new Error("TypeError");for(var ie=this,pe=[],ge=0;ge<x.length;ge++)pe.push([ge,x[ge]]);pe.sort(function(J,se){var re=C.visit(O,J[1]),_e=C.visit(O,se[1]);if(ie._getTypeName(re)!==Y)throw new Error("TypeError: expected "+Y+", received "+ie._getTypeName(re));if(ie._getTypeName(_e)!==Y)throw new Error("TypeError: expected "+Y+", received "+ie._getTypeName(_e));return re>_e?1:re<_e?-1:J[0]-se[0]});for(var Qe=0;Qe<pe.length;Qe++)x[Qe]=pe[Qe][1];return x},_functionMaxBy:function(Z){for(var x=Z[1],C=Z[0],O=this.createKeyFunction(x,[l,f]),Y=-1/0,ie,pe,ge=0;ge<C.length;ge++)pe=O(C[ge]),pe>Y&&(Y=pe,ie=C[ge]);return ie},_functionMinBy:function(Z){for(var x=Z[1],C=Z[0],O=this.createKeyFunction(x,[l,f]),Y=1/0,ie,pe,ge=0;ge<C.length;ge++)pe=O(C[ge]),pe<Y&&(Y=pe,ie=C[ge]);return ie},createKeyFunction:function(Z,x){var C=this,O=this._interpreter,Y=function(ie){var pe=O.visit(Z,ie);if(x.indexOf(C._getTypeName(pe))<0){var ge="TypeError: expected one of "+x+", received "+C._getTypeName(pe);throw new Error(ge)}return pe};return Y}};function Xe(Z){var x=new Ie,C=x.parse(Z);return C}function mt(Z){var x=new ve;return x.tokenize(Z)}function be(Z,x){var C=new Ie,O=new He,Y=new De(O);O._interpreter=Y;var ie=C.parse(x);return Y.search(ie,Z)}e.tokenize=mt,e.compile=Xe,e.search=be,e.strictDeepEqual=i})(n)})(bK);function wK(n){let e,t,r;function i(s){n[3](s)}let o={mode:Fr.text,mainMenuBar:!1,validator:n[1]};return n[2]!==void 0&&(o.content=n[2]),e=new mK({props:o}),wt.push(()=>Ir(e,"content",i)),{c(){ke(e.$$.fragment)},m(s,a){Ee(e,s,a),r=!0},p(s,[a]){const l={};a&2&&(l.validator=s[1]),!t&&a&4&&(t=!0,l.content=s[2],qr(()=>t=!1)),e.$set(l)},i(s){r||($(e.$$.fragment,s),r=!0)},o(s){te(e.$$.fragment,s),r=!1},d(s){Oe(e,s)}}}function SK(n,e,t){let r,i=Me,o=()=>(i(),i=O0(s,u=>t(2,r=u)),s);n.$$.on_destroy.push(()=>i());let{content:s}=e;o();let{validator:a}=e;function l(u){r=u,s.set(r)}return n.$$set=u=>{"content"in u&&o(t(0,s=u.content)),"validator"in u&&t(1,a=u.validator)},[s,a,r,l]}class n2 extends rt{constructor(e){super(),nt(this,e,SK,wK,Xt,{content:0,validator:1})}}const CK=`{
  "nodes": [
    {
      "id": "n1",
      "labels": [
        "Person"
      ],
      "properties": {
        "name": "Alice"
      }
    },
    {
      "id": "n2",
      "labels": [
        "Person"
      ],
      "properties": {
        "name": "Bob"
      }
    },
    {
      "id": "n3",
      "labels": [
        "Person"
      ],
      "properties": {
        "name": "Charlie"
      }
    },
    {
      "id": "n4",
      "labels": [
        "Person"
      ],
      "properties": {
        "name": "David"
      }
    },
    {
      "id": "n5",
      "labels": [
        "Club"
      ],
      "properties": {
        "name": "Graffiti Club"
      }
    },
    {
      "id": "n6",
      "labels": [
        "Club"
      ],
      "properties": {
        "name": "Horse Club"
      }
    },
    {
      "id": "n7",
      "labels": [
        "City"
      ],
      "properties": {
        "name": "Eindhoven"
      }
    }
  ],
  "edges": [
    {
      "id": "e1",
      "source": "n1",
      "target": "n2",
      "isDirected": true,
      "labels": [
        "follows"
      ],
      "properties": {}
    },
    {
      "id": "e2",
      "source": "n1",
      "target": "n3",
      "isDirected": true,
      "labels": [
        "follows"
      ],
      "properties": {}
    },
    {
      "id": "e3",
      "source": "n3",
      "target": "n1",
      "isDirected": true,
      "labels": [
        "follows"
      ],
      "properties": {}
    },
    {
      "id": "e4",
      "source": "n3",
      "target": "n2",
      "isDirected": true,
      "labels": [
        "follows"
      ],
      "properties": {}
    },
    {
      "id": "e5",
      "source": "n1",
      "target": "n4",
      "isDirected": true,
      "labels": [
        "follows"
      ],
      "properties": {}
    },
    {
      "id": "e6",
      "source": "n1",
      "target": "n5",
      "isDirected": true,
      "labels": [
        "memberOf"
      ],
      "properties": {}
    },
    {
      "id": "e7",
      "source": "n1",
      "target": "n6",
      "isDirected": true,
      "labels": [
        "memberOf"
      ],
      "properties": {}
    },
    {
      "id": "e8",
      "source": "n3",
      "target": "n6",
      "isDirected": true,
      "labels": [
        "memberOf"
      ],
      "properties": {}
    },
    {
      "id": "e9",
      "source": "n1",
      "target": "n7",
      "isDirected": true,
      "labels": [
        "livesIn"
      ],
      "properties": {}
    },
    {
      "id": "e10",
      "source": "n3",
      "target": "n7",
      "isDirected": true,
      "labels": [
        "livesIn"
      ],
      "properties": {}
    },
    {
      "id": "e11",
      "source": "n4",
      "target": "n7",
      "isDirected": true,
      "labels": [
        "livesIn"
      ],
      "properties": {}
    }
  ]
}`,EK=`[
  {
    "label":"Person",
    "occurence":1
  },
  {
    "label":"Club",
    "occurence":0.5
  },
  {
    "label":"follows",
    "occurence":1
  },
  {
    "label":"Random",
    "occurence":0.8
  }
]`;class Wv{constructor(){Zt(this,"nodeNodes");Zt(this,"edgeNodes");Zt(this,"labelNodes");Zt(this,"propertyNodes");Zt(this,"labelEdges");Zt(this,"propertyEdges");Zt(this,"edgeEdges");this.emptyGraph()}getNode(e){var t,r,i;return(i=(r=(t=this.nodeNodes.get(e))!=null?t:this.edgeNodes.get(e))!=null?r:this.labelNodes.get(e))!=null?i:this.propertyNodes.get(e)}emptyGraph(){this.nodeNodes=new Map,this.edgeNodes=new Map,this.labelNodes=new Map,this.propertyNodes=new Map,this.labelEdges=[],this.propertyEdges=[],this.edgeEdges=[]}addNodeNode(e){this.nodeNodes.set(e.id,e)}addNodeNodes(e){e.forEach(t=>this.addNodeNode(t))}addEdgeNode(e){this.edgeNodes.set(e.id,e)}addEdgeNodes(e){e.forEach(t=>this.addEdgeNode(t))}addLabelNode(e){this.labelNodes.set(e.id,e)}addLabelNodes(e){e.forEach(t=>this.addLabelNode(t))}addPropertyNode(e){this.propertyNodes.set(e.id,e)}addPropertyNodes(e){e.forEach(t=>this.addPropertyNode(t))}addLabelEdge(e){this.labelEdges.push(e)}addLabelEdges(e){this.labelEdges.push(...e)}addPropertyEdge(e){this.propertyEdges.push(e)}addPropertyEdges(e){this.propertyEdges.push(...e)}addEdgeEdge(e){this.edgeEdges.push(e)}addEdgeEdges(e){this.edgeEdges.push(...e)}}function Ul(n,e){return`${n}_${e}`}function Eo(n){return n.split("_").slice(1).join("_")}var Is=(n=>(n.edge="edge",n.label="label",n.property="property",n))(Is||{}),Tr=(n=>(n.node="node",n.edge="edge",n.label="label",n.propertyType="propertyType",n))(Tr||{});class OK{}class kK extends OK{constructor(){super(...arguments);Zt(this,"currentPId");Zt(this,"storage");Zt(this,"k",3);Zt(this,"nodes");Zt(this,"edges");Zt(this,"pIds",{old_pid:new Map,new_pid:new Map})}insert(t){return this.storage.has(t)?this.storage.get(t):(this.currentPId++,this.storage.set(t,this.currentPId),this.currentPId)}getNodePid(t,r){const i=this.pIds.j_pid_0.get(t.id).toString(),o=r.filter(l=>l.source.id===t.id).map(l=>`(${l.label},${l.oldPId})`),s=[i,...o].join(),a=this.insert(s);return[t.id,a]}uniqEdgeTId(t){return[...new Map(t.map(r=>[JSON.stringify(r),r])).values()]}groupBy(t,r){return t.reduce(function(i,o){return i[o[r]]||(i[o[r]]=[]),i[o[r]].push(o),i},{})}uniqEdges(t){const r={};return t.filter(i=>{const o=JSON.stringify(i);return r[o]?!1:r[o]=!0})}calculateSchema(t){console.time("calculateSchema"),this.currentPId=0,this.storage=new Map,this.nodes=[...t.nodeNodes.values(),...t.edgeNodes.values(),...t.labelNodes.values(),...t.propertyNodes.values()],this.edges=[...t.edgeEdges,...t.labelEdges,...t.propertyEdges],console.time(`build_bsim_${this.k}`),this.build_bsim(this.k),console.timeEnd(`build_bsim_${this.k}`);const r=this.graphFromPIds();return console.timeEnd("calculateSchema"),r}build_bsim(t){if(t===0){this.pIds.j_pid_0=new Map,this.nodes.sort((s,a)=>s.label.localeCompare(a.label));let o=this.nodes[0].label;this.nodes.forEach(s=>{s.label!==o&&(this.currentPId++,o=s.label),this.pIds.new_pid.set(s.id,this.currentPId),this.pIds.j_pid_0.set(s.id,this.currentPId)});return}console.time(`build_bsim_${t-1}`),this.build_bsim(t-1),console.timeEnd(`build_bsim_${t-1}`),this.pIds.old_pid=new Map(this.pIds.new_pid),console.time(`build_bsim_${t-1}_get_unique_edges`);const r=this.uniqEdgeTId(this.edges.map(o=>{const s=this.pIds.old_pid.get(o.target.id);return{source:o.source,label:o.label,oldPId:s}}));console.timeEnd(`build_bsim_${t-1}_get_unique_edges`),console.time(`build_bsim_${t-1}_get_node_signatures`);const i=this.nodes.map(o=>this.getNodePid(o,r));this.pIds.new_pid=new Map(i),this.pIds[`j_pid_${t}`]=new Map(i),console.timeEnd(`build_bsim_${t-1}_get_node_signatures`)}graphFromPIds(){var a,l,u,f,c,d,g;console.time("graphFromPIds");const t=new Wv;t.emptyGraph();const r=new Map(this.nodes.map(h=>{const v=Ul(h.type,this.pIds.new_pid.get(h.id).toString());return[this.pIds.new_pid.get(h.id),{id:v,label:h.label,type:h.type}]})),i=this.uniqEdges(this.edges.map(h=>{const v=r.get(this.pIds.new_pid.get(h.source.id)),m=r.get(this.pIds.new_pid.get(h.target.id));return{source:v,label:h.label,target:m,type:h.type}}));console.time("splitEdges");const o=this.groupBy(i,"type");console.timeEnd("splitEdges"),console.time("splitNodes");const s=this.groupBy([...r.values()],"type");return console.timeEnd("splitNodes"),t.nodeNodes=(a=s[Tr.node])!=null?a:[],t.edgeNodes=(l=s[Tr.edge])!=null?l:[],t.labelNodes=(u=s[Tr.label])!=null?u:[],t.propertyNodes=(f=s[Tr.propertyType])!=null?f:[],t.edgeEdges=(c=o[Is.edge])!=null?c:[],t.labelEdges=(d=o[Is.label])!=null?d:[],t.propertyEdges=(g=o[Is.property])!=null?g:[],console.timeEnd("graphFromPIds"),t}}class oa{static labelEdge(e,t){return{source:e,target:t,label:"label",type:Is.label}}static propertyEdge(e,t,r){return{source:e,target:t,label:r,type:Is.property}}static edgeEdge(e,t,r){return{source:e,target:t,label:r,type:Is.edge}}}class Vl{static nodeNode(e){return{id:Ul(Tr.node,e),label:"node",type:Tr.node}}static edgeNode(e){return{id:Ul(Tr.edge,e),label:"edge",type:Tr.edge}}static labelNode(e){return{id:Ul(Tr.label,e),label:e,type:Tr.label}}static propertyNode(e){return{id:Ul(Tr.propertyType,e.toString()),label:e.toString(),type:Tr.propertyType}}}var pa=(n=>(n.string="string",n.number="number",n.boolean="boolean",n.array="array",n.other="other",n))(pa||{}),ar=(n=>(n.from="from",n.to="to",n.connects1="connects1",n.connects2="connects2",n))(ar||{});function TK(n){console.time("propertyToSimpleGraph");const e=new Wv,t=new Map,r=new Map,i=new Map;function o(a,l){let u;r.has(l)?u=r.get(l):(u=Vl.labelNode(l),r.set(l,u),e.addLabelNode(u)),e.addLabelEdge(oa.labelEdge(a,u))}function s(a,l,u){let f;l.constructor===String?f=pa.string:l.constructor===Number?f=pa.number:l.constructor===Boolean?f=pa.boolean:l.constructor===Array?f=pa.array:f=pa.other;let c;i.has(f)?c=i.get(f):(c=Vl.propertyNode(f),i.set(f,c),e.addPropertyNode(c)),e.addPropertyEdge(oa.propertyEdge(a,c,u))}return n.nodes.forEach(a=>{const l=Vl.nodeNode(a.id);t.set(a.id,l),e.addNodeNode(l),a.labels.forEach(u=>o(l,u)),a.properties.forEach((u,f)=>s(l,u,f))}),n.edges.forEach(a=>{const l=Vl.edgeNode(a.id);e.addEdgeNode(l);const u=t.get(a.sourceNode),f=t.get(a.targetNode);a.isDirected?(e.addEdgeEdge(oa.edgeEdge(l,u,ar.from)),e.addEdgeEdge(oa.edgeEdge(l,f,ar.to))):(e.addEdgeEdge(oa.edgeEdge(l,u,ar.connects1)),e.addEdgeEdge(oa.edgeEdge(l,f,ar.connects2))),a.labels.forEach(c=>o(l,c)),a.properties.forEach((c,d)=>s(l,c,d))}),console.timeEnd("propertyToSimpleGraph"),e}function qP(n){console.time("simpleToPropertyGraph");const e=new Mu;return e.nodes=new Map([...n.nodeNodes.values()].map(t=>{const r=n.labelEdges.filter(a=>a.source===t).map(a=>a.target.label),i=new Map(n.propertyEdges.filter(a=>a.source===t).map(a=>[a.label.toString(),a.target.label])),o=Eo(t.id),s=new gd({id:o,labels:r,properties:i});return[Eo(t.id),s]})),e.edges=new Map([...n.edgeNodes.values()].map(t=>{const r=n.labelEdges.filter(c=>c.source===t).map(c=>c.target.label),i=new Map(n.propertyEdges.filter(c=>c.source===t).map(c=>[c.label.toString(),c.target.label])),o=n.edgeEdges.filter(c=>c.source===t);if(o.length!=2)throw new Error("Edge must have 2 connected nodes");if(o[0].label===ar.connects1&&o[1].label!==ar.connects2||o[0].label===ar.connects2&&o[1].label!==ar.connects1||o[0].label===ar.to&&o[1].label!==ar.from||o[0].label===ar.from&&o[1].label!==ar.to)throw new Error("Edges must have same directionality");const s=o[0].label!==ar.connects1&&o[0].label!==ar.connects2;let a,l;!s||o[0].label===ar.from?(a=Eo(o[0].target.id),l=Eo(o[1].target.id)):(a=Eo(o[1].target.id),l=Eo(o[0].target.id));const u=Eo(t.id),f=new md({id:u,labels:r,properties:i,sourceNode:a,targetNode:l,isDirected:s});return[Eo(t.id),f]})),console.timeEnd("simpleToPropertyGraph"),e}var td=(n=>(n.project="Project",n.filter="Filter",n))(td||{});function PK(n,e){const t=n.filter(r=>r.occurence>=e);return new Set(t.map(r=>r.label))}function IK(n,e,t,r){console.time("induceWorkload");const i=new Wv;if(i.emptyGraph(),r===0)return i.nodeNodes=new Map([...n.nodeNodes.values()].map(a=>[a.id,{...a}])),i.edgeNodes=new Map([...n.edgeNodes.values()].map(a=>[a.id,{...a}])),i.labelNodes=new Map([...n.labelNodes.values()].map(a=>[a.id,{...a}])),i.propertyNodes=new Map([...n.propertyNodes.values()].map(a=>[a.id,{...a}])),i.edgeEdges=[...n.edgeEdges.map(a=>({...a,source:i.edgeNodes.get(a.source.id),target:i.nodeNodes.get(a.target.id)}))],i.labelEdges=[...n.labelEdges.map(a=>({...a,source:i.getNode(a.source.id),target:i.labelNodes.get(a.target.id)}))],i.propertyEdges=[...n.propertyEdges.map(a=>({...a,source:i.getNode(a.source.id),target:i.propertyNodes.get(a.target.id)}))],console.timeEnd("induceWorkload"),i;const o=PK(e,r),s=[...n.labelEdges.filter(a=>o.has(n.labelNodes.get(a.target.id).label))];if(console.time("induceWorkloadGetLabelConnecs"),s.forEach(a=>{var u;const l=(u=n.nodeNodes.get(a.source.id))!=null?u:n.edgeNodes.get(a.source.id);l.type==Tr.node?i.nodeNodes.has(a.source.id)||i.addNodeNode({...l}):i.edgeNodes.has(a.source.id)||i.addEdgeNode({...l})}),console.timeEnd("induceWorkloadGetLabelConnects"),console.time("induceWorkloadGetProperties"),i.propertyEdges=n.propertyEdges.filter(a=>i.nodeNodes.has(a.source.id)||i.edgeNodes.has(a.source.id)).map(a=>(i.propertyNodes.has(a.target.id)||i.addPropertyNode({...a.target}),{...a,source:i.getNode(a.source.id),target:i.propertyNodes.get(a.target.id)})),console.timeEnd("induceWorkloadGetProperties"),console.time("induceWorkloadGetLabels"),i.labelEdges=n.labelEdges.filter(a=>i.nodeNodes.has(a.source.id)||i.edgeNodes.has(a.source.id)).map(a=>(i.labelNodes.has(a.target.id)||i.addLabelNode({...a.target}),{...a,source:i.getNode(a.source.id),target:i.labelNodes.get(a.target.id)})),console.timeEnd("induceWorkloadGetLabels"),t==="Project")console.time("induceWorkloadProject"),[...n.nodeNodes.values()].map(a=>{i.nodeNodes.has(a.id)||i.addNodeNode({...a}),a.id,{...a}}),[...n.edgeNodes.values()].map(a=>{i.edgeNodes.has(a.id)||i.addEdgeNode({...a}),a.id,{...a}}),i.edgeEdges=[...n.edgeEdges.map(a=>({...a,source:i.edgeNodes.get(a.source.id),target:i.nodeNodes.get(a.target.id)}))],console.timeEnd("induceWorkloadProject");else if(t==="Filter"){console.time("induceWorkloadFilter");let a=!1;const l=Vl.nodeNode("_empty");i.edgeEdges=n.edgeEdges.filter(u=>i.edgeNodes.has(u.source.id)).map(u=>{let f;return i.nodeNodes.has(u.target.id)?f=i.nodeNodes.get(u.target.id):(f=l,a=!0),{...u,source:i.edgeNodes.get(u.source.id),target:f}}),a&&i.addNodeNode(l),console.timeEnd("induceWorkloadFilter")}return console.timeEnd("induceWorkload"),i}const sa=[];function AK(n,e){return{subscribe:as(n,e).subscribe}}function as(n,e=Me){let t;const r=new Set;function i(a){if(Xt(n,a)&&(n=a,t)){const l=!sa.length;for(const u of r)u[1](),sa.push(u,n);if(l){for(let u=0;u<sa.length;u+=2)sa[u][0](sa[u+1]);sa.length=0}}}function o(a){i(a(n))}function s(a,l=Me){const u=[a,l];return r.add(u),r.size===1&&(t=e(i)||Me),a(n),()=>{r.delete(u),r.size===0&&(t(),t=null)}}return{set:i,update:o,subscribe:s}}function Ju(n,e,t){const r=!Array.isArray(n),i=r?[n]:n,o=e.length<2;return AK(t,s=>{let a=!1;const l=[];let u=0,f=Me;const c=()=>{if(u)return;f();const g=e(r?l[0]:l,s);o?s(g):f=li(g)?g:Me},d=i.map((g,h)=>O0(g,v=>{l[h]=v,u&=~(1<<h),a&&c()},()=>{u|=1<<h}));return a=!0,c(),function(){on(d),f()}})}class r2 extends Map{constructor(e,t=NK){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(i2(this,e))}has(e){return super.has(i2(this,e))}set(e,t){return super.set(RK(this,e),t)}delete(e){return super.delete(xK(this,e))}}function i2({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):t}function RK({_intern:n,_key:e},t){const r=e(t);return n.has(r)?n.get(r):(n.set(r,t),t)}function xK({_intern:n,_key:e},t){const r=e(t);return n.has(r)&&(t=n.get(r),n.delete(r)),t}function NK(n){return n!==null&&typeof n=="object"?n.valueOf():n}var MK={value:()=>{}};function Qu(){for(var n=0,e=arguments.length,t={},r;n<e;++n){if(!(r=arguments[n]+"")||r in t||/[\s.]/.test(r))throw new Error("illegal type: "+r);t[r]=[]}return new $f(t)}function $f(n){this._=n}function DK(n,e){return n.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");if(i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}})}$f.prototype=Qu.prototype={constructor:$f,on:function(n,e){var t=this._,r=DK(n+"",t),i,o=-1,s=r.length;if(arguments.length<2){for(;++o<s;)if((i=(n=r[o]).type)&&(i=jK(t[i],n.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(n=r[o]).type)t[i]=o2(t[i],n.name,e);else if(e==null)for(i in t)t[i]=o2(t[i],n.name,null);return this},copy:function(){var n={},e=this._;for(var t in e)n[t]=e[t].slice();return new $f(n)},call:function(n,e){if((i=arguments.length-2)>0)for(var t=new Array(i),r=0,i,o;r<i;++r)t[r]=arguments[r+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=this._[n],r=0,i=o.length;r<i;++r)o[r].value.apply(e,t)},apply:function(n,e,t){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,o=r.length;i<o;++i)r[i].value.apply(e,t)}};function jK(n,e){for(var t=0,r=n.length,i;t<r;++t)if((i=n[t]).name===e)return i.value}function o2(n,e,t){for(var r=0,i=n.length;r<i;++r)if(n[r].name===e){n[r]=MK,n=n.slice(0,r).concat(n.slice(r+1));break}return t!=null&&n.push({name:e,value:t}),n}var i0="http://www.w3.org/1999/xhtml";const s2={svg:"http://www.w3.org/2000/svg",xhtml:i0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ep(n){var e=n+="",t=e.indexOf(":");return t>=0&&(e=n.slice(0,t))!=="xmlns"&&(n=n.slice(t+1)),s2.hasOwnProperty(e)?{space:s2[e],local:n}:n}function LK(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===i0&&e.documentElement.namespaceURI===i0?e.createElement(n):e.createElementNS(t,n)}}function BK(n){return function(){return this.ownerDocument.createElementNS(n.space,n.local)}}function HP(n){var e=ep(n);return(e.local?BK:LK)(e)}function FK(){}function Kv(n){return n==null?FK:function(){return this.querySelector(n)}}function UK(n){typeof n!="function"&&(n=Kv(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var o=e[i],s=o.length,a=r[i]=new Array(s),l,u,f=0;f<s;++f)(l=o[f])&&(u=n.call(l,l.__data__,f,o))&&("__data__"in l&&(u.__data__=l.__data__),a[f]=u);return new ti(r,this._parents)}function VK(n){return n==null?[]:Array.isArray(n)?n:Array.from(n)}function qK(){return[]}function zP(n){return n==null?qK:function(){return this.querySelectorAll(n)}}function HK(n){return function(){return VK(n.apply(this,arguments))}}function zK(n){typeof n=="function"?n=HK(n):n=zP(n);for(var e=this._groups,t=e.length,r=[],i=[],o=0;o<t;++o)for(var s=e[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&(r.push(n.call(l,l.__data__,u,s)),i.push(l));return new ti(r,i)}function WP(n){return function(){return this.matches(n)}}function KP(n){return function(e){return e.matches(n)}}var WK=Array.prototype.find;function KK(n){return function(){return WK.call(this.children,n)}}function GK(){return this.firstElementChild}function YK(n){return this.select(n==null?GK:KK(typeof n=="function"?n:KP(n)))}var JK=Array.prototype.filter;function QK(){return Array.from(this.children)}function ZK(n){return function(){return JK.call(this.children,n)}}function XK(n){return this.selectAll(n==null?QK:ZK(typeof n=="function"?n:KP(n)))}function $K(n){typeof n!="function"&&(n=WP(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var o=e[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&n.call(l,l.__data__,u,o)&&a.push(l);return new ti(r,this._parents)}function GP(n){return new Array(n.length)}function eG(){return new ti(this._enter||this._groups.map(GP),this._parents)}function nd(n,e){this.ownerDocument=n.ownerDocument,this.namespaceURI=n.namespaceURI,this._next=null,this._parent=n,this.__data__=e}nd.prototype={constructor:nd,appendChild:function(n){return this._parent.insertBefore(n,this._next)},insertBefore:function(n,e){return this._parent.insertBefore(n,e)},querySelector:function(n){return this._parent.querySelector(n)},querySelectorAll:function(n){return this._parent.querySelectorAll(n)}};function tG(n){return function(){return n}}function nG(n,e,t,r,i,o){for(var s=0,a,l=e.length,u=o.length;s<u;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):t[s]=new nd(n,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function rG(n,e,t,r,i,o,s){var a,l,u=new Map,f=e.length,c=o.length,d=new Array(f),g;for(a=0;a<f;++a)(l=e[a])&&(d[a]=g=s.call(l,l.__data__,a,e)+"",u.has(g)?i[a]=l:u.set(g,l));for(a=0;a<c;++a)g=s.call(n,o[a],a,o)+"",(l=u.get(g))?(r[a]=l,l.__data__=o[a],u.delete(g)):t[a]=new nd(n,o[a]);for(a=0;a<f;++a)(l=e[a])&&u.get(d[a])===l&&(i[a]=l)}function iG(n){return n.__data__}function oG(n,e){if(!arguments.length)return Array.from(this,iG);var t=e?rG:nG,r=this._parents,i=this._groups;typeof n!="function"&&(n=tG(n));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var f=r[u],c=i[u],d=c.length,g=sG(n.call(f,f&&f.__data__,u,r)),h=g.length,v=a[u]=new Array(h),m=s[u]=new Array(h),p=l[u]=new Array(d);t(f,c,v,m,p,g,e);for(var y=0,b=0,_,w;y<h;++y)if(_=v[y]){for(y>=b&&(b=y+1);!(w=m[b])&&++b<h;);_._next=w||null}}return s=new ti(s,r),s._enter=a,s._exit=l,s}function sG(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function aG(){return new ti(this._exit||this._groups.map(GP),this._parents)}function lG(n,e,t){var r=this.enter(),i=this,o=this.exit();return typeof n=="function"?(r=n(r),r&&(r=r.selection())):r=r.append(n+""),e!=null&&(i=e(i),i&&(i=i.selection())),t==null?o.remove():t(o),r&&i?r.merge(i).order():i}function uG(n){for(var e=n.selection?n.selection():n,t=this._groups,r=e._groups,i=t.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var u=t[l],f=r[l],c=u.length,d=a[l]=new Array(c),g,h=0;h<c;++h)(g=u[h]||f[h])&&(d[h]=g);for(;l<i;++l)a[l]=t[l];return new ti(a,this._parents)}function cG(){for(var n=this._groups,e=-1,t=n.length;++e<t;)for(var r=n[e],i=r.length-1,o=r[i],s;--i>=0;)(s=r[i])&&(o&&s.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(s,o),o=s);return this}function fG(n){n||(n=hG);function e(c,d){return c&&d?n(c.__data__,d.__data__):!c-!d}for(var t=this._groups,r=t.length,i=new Array(r),o=0;o<r;++o){for(var s=t[o],a=s.length,l=i[o]=new Array(a),u,f=0;f<a;++f)(u=s[f])&&(l[f]=u);l.sort(e)}return new ti(i,this._parents).order()}function hG(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function dG(){var n=arguments[0];return arguments[0]=this,n.apply(null,arguments),this}function pG(){return Array.from(this)}function mG(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null}function gG(){let n=0;for(const e of this)++n;return n}function vG(){return!this.node()}function yG(n){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],o=0,s=i.length,a;o<s;++o)(a=i[o])&&n.call(a,a.__data__,o,i);return this}function _G(n){return function(){this.removeAttribute(n)}}function bG(n){return function(){this.removeAttributeNS(n.space,n.local)}}function wG(n,e){return function(){this.setAttribute(n,e)}}function SG(n,e){return function(){this.setAttributeNS(n.space,n.local,e)}}function CG(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttribute(n):this.setAttribute(n,t)}}function EG(n,e){return function(){var t=e.apply(this,arguments);t==null?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}}function OG(n,e){var t=ep(n);if(arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each((e==null?t.local?bG:_G:typeof e=="function"?t.local?EG:CG:t.local?SG:wG)(t,e))}function YP(n){return n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView}function kG(n){return function(){this.style.removeProperty(n)}}function TG(n,e,t){return function(){this.style.setProperty(n,e,t)}}function PG(n,e,t){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(n):this.style.setProperty(n,r,t)}}function IG(n,e,t){return arguments.length>1?this.each((e==null?kG:typeof e=="function"?PG:TG)(n,e,t==null?"":t)):Wa(this.node(),n)}function Wa(n,e){return n.style.getPropertyValue(e)||YP(n).getComputedStyle(n,null).getPropertyValue(e)}function AG(n){return function(){delete this[n]}}function RG(n,e){return function(){this[n]=e}}function xG(n,e){return function(){var t=e.apply(this,arguments);t==null?delete this[n]:this[n]=t}}function NG(n,e){return arguments.length>1?this.each((e==null?AG:typeof e=="function"?xG:RG)(n,e)):this.node()[n]}function JP(n){return n.trim().split(/^|\s+/)}function Gv(n){return n.classList||new QP(n)}function QP(n){this._node=n,this._names=JP(n.getAttribute("class")||"")}QP.prototype={add:function(n){var e=this._names.indexOf(n);e<0&&(this._names.push(n),this._node.setAttribute("class",this._names.join(" ")))},remove:function(n){var e=this._names.indexOf(n);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(n){return this._names.indexOf(n)>=0}};function ZP(n,e){for(var t=Gv(n),r=-1,i=e.length;++r<i;)t.add(e[r])}function XP(n,e){for(var t=Gv(n),r=-1,i=e.length;++r<i;)t.remove(e[r])}function MG(n){return function(){ZP(this,n)}}function DG(n){return function(){XP(this,n)}}function jG(n,e){return function(){(e.apply(this,arguments)?ZP:XP)(this,n)}}function LG(n,e){var t=JP(n+"");if(arguments.length<2){for(var r=Gv(this.node()),i=-1,o=t.length;++i<o;)if(!r.contains(t[i]))return!1;return!0}return this.each((typeof e=="function"?jG:e?MG:DG)(t,e))}function BG(){this.textContent=""}function FG(n){return function(){this.textContent=n}}function UG(n){return function(){var e=n.apply(this,arguments);this.textContent=e==null?"":e}}function VG(n){return arguments.length?this.each(n==null?BG:(typeof n=="function"?UG:FG)(n)):this.node().textContent}function qG(){this.innerHTML=""}function HG(n){return function(){this.innerHTML=n}}function zG(n){return function(){var e=n.apply(this,arguments);this.innerHTML=e==null?"":e}}function WG(n){return arguments.length?this.each(n==null?qG:(typeof n=="function"?zG:HG)(n)):this.node().innerHTML}function KG(){this.nextSibling&&this.parentNode.appendChild(this)}function GG(){return this.each(KG)}function YG(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function JG(){return this.each(YG)}function QG(n){var e=typeof n=="function"?n:HP(n);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ZG(){return null}function XG(n,e){var t=typeof n=="function"?n:HP(n),r=e==null?ZG:typeof e=="function"?e:Kv(e);return this.select(function(){return this.insertBefore(t.apply(this,arguments),r.apply(this,arguments)||null)})}function $G(){var n=this.parentNode;n&&n.removeChild(this)}function eY(){return this.each($G)}function tY(){var n=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function nY(){var n=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(n,this.nextSibling):n}function rY(n){return this.select(n?nY:tY)}function iY(n){return arguments.length?this.property("__data__",n):this.node().__data__}function oY(n){return function(e){n.call(this,e,this.__data__)}}function sY(n){return n.trim().split(/^|\s+/).map(function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}})}function aY(n){return function(){var e=this.__on;if(!!e){for(var t=0,r=-1,i=e.length,o;t<i;++t)o=e[t],(!n.type||o.type===n.type)&&o.name===n.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function lY(n,e,t){return function(){var r=this.__on,i,o=oY(e);if(r){for(var s=0,a=r.length;s<a;++s)if((i=r[s]).type===n.type&&i.name===n.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=t),i.value=e;return}}this.addEventListener(n.type,o,t),i={type:n.type,name:n.name,value:e,listener:o,options:t},r?r.push(i):this.__on=[i]}}function uY(n,e,t){var r=sY(n+""),i,o=r.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,f;l<u;++l)for(i=0,f=a[l];i<o;++i)if((s=r[i]).type===f.type&&s.name===f.name)return f.value}return}for(a=e?lY:aY,i=0;i<o;++i)this.each(a(r[i],e,t));return this}function $P(n,e,t){var r=YP(n),i=r.CustomEvent;typeof i=="function"?i=new i(e,t):(i=r.document.createEvent("Event"),t?(i.initEvent(e,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(e,!1,!1)),n.dispatchEvent(i)}function cY(n,e){return function(){return $P(this,n,e)}}function fY(n,e){return function(){return $P(this,n,e.apply(this,arguments))}}function hY(n,e){return this.each((typeof e=="function"?fY:cY)(n,e))}function*dY(){for(var n=this._groups,e=0,t=n.length;e<t;++e)for(var r=n[e],i=0,o=r.length,s;i<o;++i)(s=r[i])&&(yield s)}var e3=[null];function ti(n,e){this._groups=n,this._parents=e}function Zu(){return new ti([[document.documentElement]],e3)}function pY(){return this}ti.prototype=Zu.prototype={constructor:ti,select:UK,selectAll:zK,selectChild:YK,selectChildren:XK,filter:$K,data:oG,enter:eG,exit:aG,join:lG,merge:uG,selection:pY,order:cG,sort:fG,call:dG,nodes:pG,node:mG,size:gG,empty:vG,each:yG,attr:OG,style:IG,property:NG,classed:LG,text:VG,html:WG,raise:GG,lower:JG,append:QG,insert:XG,remove:eY,clone:rY,datum:iY,on:uY,dispatch:hY,[Symbol.iterator]:dY};function bi(n){return typeof n=="string"?new ti([[document.querySelector(n)]],[document.documentElement]):new ti([[n]],e3)}function mY(n){let e;for(;e=n.sourceEvent;)n=e;return n}function oo(n,e){if(n=mY(n),e===void 0&&(e=n.currentTarget),e){var t=e.ownerSVGElement||e;if(t.createSVGPoint){var r=t.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[n.clientX-i.left-e.clientLeft,n.clientY-i.top-e.clientTop]}}return[n.pageX,n.pageY]}const gY={passive:!1},Eu={capture:!0,passive:!1};function om(n){n.stopImmediatePropagation()}function ka(n){n.preventDefault(),n.stopImmediatePropagation()}function t3(n){var e=n.document.documentElement,t=bi(n).on("dragstart.drag",ka,Eu);"onselectstart"in e?t.on("selectstart.drag",ka,Eu):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function n3(n,e){var t=n.document.documentElement,r=bi(n).on("dragstart.drag",null);e&&(r.on("click.drag",ka,Eu),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in t?r.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const Hc=n=>()=>n;function o0(n,{sourceEvent:e,subject:t,target:r,identifier:i,active:o,x:s,y:a,dx:l,dy:u,dispatch:f}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:f}})}o0.prototype.on=function(){var n=this._.on.apply(this._,arguments);return n===this._?this:n};function vY(n){return!n.ctrlKey&&!n.button}function yY(){return this.parentNode}function _Y(n,e){return e==null?{x:n.x,y:n.y}:e}function bY(){return navigator.maxTouchPoints||"ontouchstart"in this}function r3(){var n=vY,e=yY,t=_Y,r=bY,i={},o=Qu("start","drag","end"),s=0,a,l,u,f,c=0;function d(_){_.on("mousedown.drag",g).filter(r).on("touchstart.drag",m).on("touchmove.drag",p,gY).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(_,w){if(!(f||!n.call(this,_,w))){var S=b(this,e.call(this,_,w),_,w,"mouse");!S||(bi(_.view).on("mousemove.drag",h,Eu).on("mouseup.drag",v,Eu),t3(_.view),om(_),u=!1,a=_.clientX,l=_.clientY,S("start",_))}}function h(_){if(ka(_),!u){var w=_.clientX-a,S=_.clientY-l;u=w*w+S*S>c}i.mouse("drag",_)}function v(_){bi(_.view).on("mousemove.drag mouseup.drag",null),n3(_.view,u),ka(_),i.mouse("end",_)}function m(_,w){if(!!n.call(this,_,w)){var S=_.changedTouches,E=e.call(this,_,w),P=S.length,R,j;for(R=0;R<P;++R)(j=b(this,E,_,w,S[R].identifier,S[R]))&&(om(_),j("start",_,S[R]))}}function p(_){var w=_.changedTouches,S=w.length,E,P;for(E=0;E<S;++E)(P=i[w[E].identifier])&&(ka(_),P("drag",_,w[E]))}function y(_){var w=_.changedTouches,S=w.length,E,P;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),E=0;E<S;++E)(P=i[w[E].identifier])&&(om(_),P("end",_,w[E]))}function b(_,w,S,E,P,R){var j=o.copy(),U=oo(R||S,w),F,z,D;if((D=t.call(_,new o0("beforestart",{sourceEvent:S,target:d,identifier:P,active:s,x:U[0],y:U[1],dx:0,dy:0,dispatch:j}),E))!=null)return F=D.x-U[0]||0,z=D.y-U[1]||0,function N(L,X,Q){var A=U,k;switch(L){case"start":i[P]=N,k=s++;break;case"end":delete i[P],--s;case"drag":U=oo(Q||X,w),k=s;break}j.call(L,_,new o0(L,{sourceEvent:X,subject:D,target:d,identifier:P,active:k,x:U[0]+F,y:U[1]+z,dx:U[0]-A[0],dy:U[1]-A[1],dispatch:j}),E)}}return d.filter=function(_){return arguments.length?(n=typeof _=="function"?_:Hc(!!_),d):n},d.container=function(_){return arguments.length?(e=typeof _=="function"?_:Hc(_),d):e},d.subject=function(_){return arguments.length?(t=typeof _=="function"?_:Hc(_),d):t},d.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:Hc(!!_),d):r},d.on=function(){var _=o.on.apply(o,arguments);return _===o?d:_},d.clickDistance=function(_){return arguments.length?(c=(_=+_)*_,d):Math.sqrt(c)},d}function Yv(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function i3(n,e){var t=Object.create(n.prototype);for(var r in e)t[r]=e[r];return t}function Xu(){}var Ou=.7,rd=1/Ou,Ta="\\s*([+-]?\\d+)\\s*",ku="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",wY=/^#([0-9a-f]{3,8})$/,SY=new RegExp(`^rgb\\(${Ta},${Ta},${Ta}\\)$`),CY=new RegExp(`^rgb\\(${Gi},${Gi},${Gi}\\)$`),EY=new RegExp(`^rgba\\(${Ta},${Ta},${Ta},${ku}\\)$`),OY=new RegExp(`^rgba\\(${Gi},${Gi},${Gi},${ku}\\)$`),kY=new RegExp(`^hsl\\(${ku},${Gi},${Gi}\\)$`),TY=new RegExp(`^hsla\\(${ku},${Gi},${Gi},${ku}\\)$`),a2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yv(Xu,Tu,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:l2,formatHex:l2,formatHex8:PY,formatHsl:IY,formatRgb:u2,toString:u2});function l2(){return this.rgb().formatHex()}function PY(){return this.rgb().formatHex8()}function IY(){return o3(this).formatHsl()}function u2(){return this.rgb().formatRgb()}function Tu(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=wY.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?c2(e):t===3?new Rr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?zc(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?zc(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=SY.exec(n))?new Rr(e[1],e[2],e[3],1):(e=CY.exec(n))?new Rr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=EY.exec(n))?zc(e[1],e[2],e[3],e[4]):(e=OY.exec(n))?zc(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=kY.exec(n))?d2(e[1],e[2]/100,e[3]/100,1):(e=TY.exec(n))?d2(e[1],e[2]/100,e[3]/100,e[4]):a2.hasOwnProperty(n)?c2(a2[n]):n==="transparent"?new Rr(NaN,NaN,NaN,0):null}function c2(n){return new Rr(n>>16&255,n>>8&255,n&255,1)}function zc(n,e,t,r){return r<=0&&(n=e=t=NaN),new Rr(n,e,t,r)}function AY(n){return n instanceof Xu||(n=Tu(n)),n?(n=n.rgb(),new Rr(n.r,n.g,n.b,n.opacity)):new Rr}function s0(n,e,t,r){return arguments.length===1?AY(n):new Rr(n,e,t,r==null?1:r)}function Rr(n,e,t,r){this.r=+n,this.g=+e,this.b=+t,this.opacity=+r}Yv(Rr,s0,i3(Xu,{brighter(n){return n=n==null?rd:Math.pow(rd,n),new Rr(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?Ou:Math.pow(Ou,n),new Rr(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Rr(As(this.r),As(this.g),As(this.b),id(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:f2,formatHex:f2,formatHex8:RY,formatRgb:h2,toString:h2}));function f2(){return`#${Es(this.r)}${Es(this.g)}${Es(this.b)}`}function RY(){return`#${Es(this.r)}${Es(this.g)}${Es(this.b)}${Es((isNaN(this.opacity)?1:this.opacity)*255)}`}function h2(){const n=id(this.opacity);return`${n===1?"rgb(":"rgba("}${As(this.r)}, ${As(this.g)}, ${As(this.b)}${n===1?")":`, ${n})`}`}function id(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function As(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Es(n){return n=As(n),(n<16?"0":"")+n.toString(16)}function d2(n,e,t,r){return r<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new wi(n,e,t,r)}function o3(n){if(n instanceof wi)return new wi(n.h,n.s,n.l,n.opacity);if(n instanceof Xu||(n=Tu(n)),!n)return new wi;if(n instanceof wi)return n;n=n.rgb();var e=n.r/255,t=n.g/255,r=n.b/255,i=Math.min(e,t,r),o=Math.max(e,t,r),s=NaN,a=o-i,l=(o+i)/2;return a?(e===o?s=(t-r)/a+(t<r)*6:t===o?s=(r-e)/a+2:s=(e-t)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new wi(s,a,l,n.opacity)}function xY(n,e,t,r){return arguments.length===1?o3(n):new wi(n,e,t,r==null?1:r)}function wi(n,e,t,r){this.h=+n,this.s=+e,this.l=+t,this.opacity=+r}Yv(wi,xY,i3(Xu,{brighter(n){return n=n==null?rd:Math.pow(rd,n),new wi(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?Ou:Math.pow(Ou,n),new wi(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,r=t+(t<.5?t:1-t)*e,i=2*t-r;return new Rr(sm(n>=240?n-240:n+120,i,r),sm(n,i,r),sm(n<120?n+240:n-120,i,r),this.opacity)},clamp(){return new wi(p2(this.h),Wc(this.s),Wc(this.l),id(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=id(this.opacity);return`${n===1?"hsl(":"hsla("}${p2(this.h)}, ${Wc(this.s)*100}%, ${Wc(this.l)*100}%${n===1?")":`, ${n})`}`}}));function p2(n){return n=(n||0)%360,n<0?n+360:n}function Wc(n){return Math.max(0,Math.min(1,n||0))}function sm(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const s3=n=>()=>n;function NY(n,e){return function(t){return n+t*e}}function MY(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(r){return Math.pow(n+r*e,t)}}function DY(n){return(n=+n)==1?a3:function(e,t){return t-e?MY(e,t,n):s3(isNaN(e)?t:e)}}function a3(n,e){var t=e-n;return t?NY(n,t):s3(isNaN(n)?e:n)}const m2=function n(e){var t=DY(e);function r(i,o){var s=t((i=s0(i)).r,(o=s0(o)).r),a=t(i.g,o.g),l=t(i.b,o.b),u=a3(i.opacity,o.opacity);return function(f){return i.r=s(f),i.g=a(f),i.b=l(f),i.opacity=u(f),i+""}}return r.gamma=n,r}(1);function xo(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}var a0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,am=new RegExp(a0.source,"g");function jY(n){return function(){return n}}function LY(n){return function(e){return n(e)+""}}function BY(n,e){var t=a0.lastIndex=am.lastIndex=0,r,i,o,s=-1,a=[],l=[];for(n=n+"",e=e+"";(r=a0.exec(n))&&(i=am.exec(e));)(o=i.index)>t&&(o=e.slice(t,o),a[s]?a[s]+=o:a[++s]=o),(r=r[0])===(i=i[0])?a[s]?a[s]+=i:a[++s]=i:(a[++s]=null,l.push({i:s,x:xo(r,i)})),t=am.lastIndex;return t<e.length&&(o=e.slice(t),a[s]?a[s]+=o:a[++s]=o),a.length<2?l[0]?LY(l[0].x):jY(e):(e=l.length,function(u){for(var f=0,c;f<e;++f)a[(c=l[f]).i]=c.x(u);return a.join("")})}var g2=180/Math.PI,l0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function l3(n,e,t,r,i,o){var s,a,l;return(s=Math.sqrt(n*n+e*e))&&(n/=s,e/=s),(l=n*t+e*r)&&(t-=n*l,r-=e*l),(a=Math.sqrt(t*t+r*r))&&(t/=a,r/=a,l/=a),n*r<e*t&&(n=-n,e=-e,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,n)*g2,skewX:Math.atan(l)*g2,scaleX:s,scaleY:a}}var Kc;function FY(n){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return e.isIdentity?l0:l3(e.a,e.b,e.c,e.d,e.e,e.f)}function UY(n){return n==null||(Kc||(Kc=document.createElementNS("http://www.w3.org/2000/svg","g")),Kc.setAttribute("transform",n),!(n=Kc.transform.baseVal.consolidate()))?l0:(n=n.matrix,l3(n.a,n.b,n.c,n.d,n.e,n.f))}function u3(n,e,t,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,c,d,g,h){if(u!==c||f!==d){var v=g.push("translate(",null,e,null,t);h.push({i:v-4,x:xo(u,c)},{i:v-2,x:xo(f,d)})}else(c||d)&&g.push("translate("+c+e+d+t)}function s(u,f,c,d){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),d.push({i:c.push(i(c)+"rotate(",null,r)-2,x:xo(u,f)})):f&&c.push(i(c)+"rotate("+f+r)}function a(u,f,c,d){u!==f?d.push({i:c.push(i(c)+"skewX(",null,r)-2,x:xo(u,f)}):f&&c.push(i(c)+"skewX("+f+r)}function l(u,f,c,d,g,h){if(u!==c||f!==d){var v=g.push(i(g)+"scale(",null,",",null,")");h.push({i:v-4,x:xo(u,c)},{i:v-2,x:xo(f,d)})}else(c!==1||d!==1)&&g.push(i(g)+"scale("+c+","+d+")")}return function(u,f){var c=[],d=[];return u=n(u),f=n(f),o(u.translateX,u.translateY,f.translateX,f.translateY,c,d),s(u.rotate,f.rotate,c,d),a(u.skewX,f.skewX,c,d),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,c,d),u=f=null,function(g){for(var h=-1,v=d.length,m;++h<v;)c[(m=d[h]).i]=m.x(g);return c.join("")}}}var VY=u3(FY,"px, ","px)","deg)"),qY=u3(UY,", ",")",")"),HY=1e-12;function v2(n){return((n=Math.exp(n))+1/n)/2}function zY(n){return((n=Math.exp(n))-1/n)/2}function WY(n){return((n=Math.exp(2*n))-1)/(n+1)}const KY=function n(e,t,r){function i(o,s){var a=o[0],l=o[1],u=o[2],f=s[0],c=s[1],d=s[2],g=f-a,h=c-l,v=g*g+h*h,m,p;if(v<HY)p=Math.log(d/u)/e,m=function(E){return[a+E*g,l+E*h,u*Math.exp(e*E*p)]};else{var y=Math.sqrt(v),b=(d*d-u*u+r*v)/(2*u*t*y),_=(d*d-u*u-r*v)/(2*d*t*y),w=Math.log(Math.sqrt(b*b+1)-b),S=Math.log(Math.sqrt(_*_+1)-_);p=(S-w)/e,m=function(E){var P=E*p,R=v2(w),j=u/(t*y)*(R*WY(e*P+w)-zY(w));return[a+j*g,l+j*h,u*R/v2(e*P+w)]}}return m.duration=p*1e3*e/Math.SQRT2,m}return i.rho=function(o){var s=Math.max(.001,+o),a=s*s,l=a*a;return n(s,a,l)},i}(Math.SQRT2,2,4);var Ka=0,ql=0,_l=0,c3=1e3,od,Hl,sd=0,qs=0,tp=0,Pu=typeof performance=="object"&&performance.now?performance:Date,f3=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Jv(){return qs||(f3(GY),qs=Pu.now()+tp)}function GY(){qs=0}function ad(){this._call=this._time=this._next=null}ad.prototype=Qv.prototype={constructor:ad,restart:function(n,e,t){if(typeof n!="function")throw new TypeError("callback is not a function");t=(t==null?Jv():+t)+(e==null?0:+e),!this._next&&Hl!==this&&(Hl?Hl._next=this:od=this,Hl=this),this._call=n,this._time=t,u0()},stop:function(){this._call&&(this._call=null,this._time=1/0,u0())}};function Qv(n,e,t){var r=new ad;return r.restart(n,e,t),r}function YY(){Jv(),++Ka;for(var n=od,e;n;)(e=qs-n._time)>=0&&n._call.call(void 0,e),n=n._next;--Ka}function y2(){qs=(sd=Pu.now())+tp,Ka=ql=0;try{YY()}finally{Ka=0,QY(),qs=0}}function JY(){var n=Pu.now(),e=n-sd;e>c3&&(tp-=e,sd=n)}function QY(){for(var n,e=od,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),n=e,e=e._next):(t=e._next,e._next=null,e=n?n._next=t:od=t);Hl=n,u0(r)}function u0(n){if(!Ka){ql&&(ql=clearTimeout(ql));var e=n-qs;e>24?(n<1/0&&(ql=setTimeout(y2,n-Pu.now()-tp)),_l&&(_l=clearInterval(_l))):(_l||(sd=Pu.now(),_l=setInterval(JY,c3)),Ka=1,f3(y2))}}function _2(n,e,t){var r=new ad;return e=e==null?0:+e,r.restart(i=>{r.stop(),n(i+e)},e,t),r}var ZY=Qu("start","end","cancel","interrupt"),XY=[],h3=0,b2=1,c0=2,eh=3,w2=4,f0=5,th=6;function np(n,e,t,r,i,o){var s=n.__transition;if(!s)n.__transition={};else if(t in s)return;$Y(n,t,{name:e,index:r,group:i,on:ZY,tween:XY,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:h3})}function Zv(n,e){var t=Ii(n,e);if(t.state>h3)throw new Error("too late; already scheduled");return t}function eo(n,e){var t=Ii(n,e);if(t.state>eh)throw new Error("too late; already running");return t}function Ii(n,e){var t=n.__transition;if(!t||!(t=t[e]))throw new Error("transition not found");return t}function $Y(n,e,t){var r=n.__transition,i;r[e]=t,t.timer=Qv(o,0,t.time);function o(u){t.state=b2,t.timer.restart(s,t.delay,t.time),t.delay<=u&&s(u-t.delay)}function s(u){var f,c,d,g;if(t.state!==b2)return l();for(f in r)if(g=r[f],g.name===t.name){if(g.state===eh)return _2(s);g.state===w2?(g.state=th,g.timer.stop(),g.on.call("interrupt",n,n.__data__,g.index,g.group),delete r[f]):+f<e&&(g.state=th,g.timer.stop(),g.on.call("cancel",n,n.__data__,g.index,g.group),delete r[f])}if(_2(function(){t.state===eh&&(t.state=w2,t.timer.restart(a,t.delay,t.time),a(u))}),t.state=c0,t.on.call("start",n,n.__data__,t.index,t.group),t.state===c0){for(t.state=eh,i=new Array(d=t.tween.length),f=0,c=-1;f<d;++f)(g=t.tween[f].value.call(n,n.__data__,t.index,t.group))&&(i[++c]=g);i.length=c+1}}function a(u){for(var f=u<t.duration?t.ease.call(null,u/t.duration):(t.timer.restart(l),t.state=f0,1),c=-1,d=i.length;++c<d;)i[c].call(n,f);t.state===f0&&(t.on.call("end",n,n.__data__,t.index,t.group),l())}function l(){t.state=th,t.timer.stop(),delete r[e];for(var u in r)return;delete n.__transition}}function nh(n,e){var t=n.__transition,r,i,o=!0,s;if(!!t){e=e==null?null:e+"";for(s in t){if((r=t[s]).name!==e){o=!1;continue}i=r.state>c0&&r.state<f0,r.state=th,r.timer.stop(),r.on.call(i?"interrupt":"cancel",n,n.__data__,r.index,r.group),delete t[s]}o&&delete n.__transition}}function eJ(n){return this.each(function(){nh(this,n)})}function tJ(n,e){var t,r;return function(){var i=eo(this,n),o=i.tween;if(o!==t){r=t=o;for(var s=0,a=r.length;s<a;++s)if(r[s].name===e){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function nJ(n,e,t){var r,i;if(typeof t!="function")throw new Error;return function(){var o=eo(this,n),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:t},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=a;break}l===u&&i.push(a)}o.tween=i}}function rJ(n,e){var t=this._id;if(n+="",arguments.length<2){for(var r=Ii(this.node(),t).tween,i=0,o=r.length,s;i<o;++i)if((s=r[i]).name===n)return s.value;return null}return this.each((e==null?tJ:nJ)(t,n,e))}function Xv(n,e,t){var r=n._id;return n.each(function(){var i=eo(this,r);(i.value||(i.value={}))[e]=t.apply(this,arguments)}),function(i){return Ii(i,r).value[e]}}function d3(n,e){var t;return(typeof e=="number"?xo:e instanceof Tu?m2:(t=Tu(e))?(e=t,m2):BY)(n,e)}function iJ(n){return function(){this.removeAttribute(n)}}function oJ(n){return function(){this.removeAttributeNS(n.space,n.local)}}function sJ(n,e,t){var r,i=t+"",o;return function(){var s=this.getAttribute(n);return s===i?null:s===r?o:o=e(r=s,t)}}function aJ(n,e,t){var r,i=t+"",o;return function(){var s=this.getAttributeNS(n.space,n.local);return s===i?null:s===r?o:o=e(r=s,t)}}function lJ(n,e,t){var r,i,o;return function(){var s,a=t(this),l;return a==null?void this.removeAttribute(n):(s=this.getAttribute(n),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a)))}}function uJ(n,e,t){var r,i,o;return function(){var s,a=t(this),l;return a==null?void this.removeAttributeNS(n.space,n.local):(s=this.getAttributeNS(n.space,n.local),l=a+"",s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a)))}}function cJ(n,e){var t=ep(n),r=t==="transform"?qY:d3;return this.attrTween(n,typeof e=="function"?(t.local?uJ:lJ)(t,r,Xv(this,"attr."+n,e)):e==null?(t.local?oJ:iJ)(t):(t.local?aJ:sJ)(t,r,e))}function fJ(n,e){return function(t){this.setAttribute(n,e.call(this,t))}}function hJ(n,e){return function(t){this.setAttributeNS(n.space,n.local,e.call(this,t))}}function dJ(n,e){var t,r;function i(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&hJ(n,o)),t}return i._value=e,i}function pJ(n,e){var t,r;function i(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&fJ(n,o)),t}return i._value=e,i}function mJ(n,e){var t="attr."+n;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;var r=ep(n);return this.tween(t,(r.local?dJ:pJ)(r,e))}function gJ(n,e){return function(){Zv(this,n).delay=+e.apply(this,arguments)}}function vJ(n,e){return e=+e,function(){Zv(this,n).delay=e}}function yJ(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?gJ:vJ)(e,n)):Ii(this.node(),e).delay}function _J(n,e){return function(){eo(this,n).duration=+e.apply(this,arguments)}}function bJ(n,e){return e=+e,function(){eo(this,n).duration=e}}function wJ(n){var e=this._id;return arguments.length?this.each((typeof n=="function"?_J:bJ)(e,n)):Ii(this.node(),e).duration}function SJ(n,e){if(typeof e!="function")throw new Error;return function(){eo(this,n).ease=e}}function CJ(n){var e=this._id;return arguments.length?this.each(SJ(e,n)):Ii(this.node(),e).ease}function EJ(n,e){return function(){var t=e.apply(this,arguments);if(typeof t!="function")throw new Error;eo(this,n).ease=t}}function OJ(n){if(typeof n!="function")throw new Error;return this.each(EJ(this._id,n))}function kJ(n){typeof n!="function"&&(n=WP(n));for(var e=this._groups,t=e.length,r=new Array(t),i=0;i<t;++i)for(var o=e[i],s=o.length,a=r[i]=[],l,u=0;u<s;++u)(l=o[u])&&n.call(l,l.__data__,u,o)&&a.push(l);return new go(r,this._parents,this._name,this._id)}function TJ(n){if(n._id!==this._id)throw new Error;for(var e=this._groups,t=n._groups,r=e.length,i=t.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l=e[a],u=t[a],f=l.length,c=s[a]=new Array(f),d,g=0;g<f;++g)(d=l[g]||u[g])&&(c[g]=d);for(;a<r;++a)s[a]=e[a];return new go(s,this._parents,this._name,this._id)}function PJ(n){return(n+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||e==="start"})}function IJ(n,e,t){var r,i,o=PJ(e)?Zv:eo;return function(){var s=o(this,n),a=s.on;a!==r&&(i=(r=a).copy()).on(e,t),s.on=i}}function AJ(n,e){var t=this._id;return arguments.length<2?Ii(this.node(),t).on.on(n):this.each(IJ(t,n,e))}function RJ(n){return function(){var e=this.parentNode;for(var t in this.__transition)if(+t!==n)return;e&&e.removeChild(this)}}function xJ(){return this.on("end.remove",RJ(this._id))}function NJ(n){var e=this._name,t=this._id;typeof n!="function"&&(n=Kv(n));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a=r[s],l=a.length,u=o[s]=new Array(l),f,c,d=0;d<l;++d)(f=a[d])&&(c=n.call(f,f.__data__,d,a))&&("__data__"in f&&(c.__data__=f.__data__),u[d]=c,np(u[d],e,t,d,u,Ii(f,t)));return new go(o,this._parents,e,t)}function MJ(n){var e=this._name,t=this._id;typeof n!="function"&&(n=zP(n));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l=r[a],u=l.length,f,c=0;c<u;++c)if(f=l[c]){for(var d=n.call(f,f.__data__,c,l),g,h=Ii(f,t),v=0,m=d.length;v<m;++v)(g=d[v])&&np(g,e,t,v,d,h);o.push(d),s.push(f)}return new go(o,s,e,t)}var DJ=Zu.prototype.constructor;function jJ(){return new DJ(this._groups,this._parents)}function LJ(n,e){var t,r,i;return function(){var o=Wa(this,n),s=(this.style.removeProperty(n),Wa(this,n));return o===s?null:o===t&&s===r?i:i=e(t=o,r=s)}}function p3(n){return function(){this.style.removeProperty(n)}}function BJ(n,e,t){var r,i=t+"",o;return function(){var s=Wa(this,n);return s===i?null:s===r?o:o=e(r=s,t)}}function FJ(n,e,t){var r,i,o;return function(){var s=Wa(this,n),a=t(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(n),Wa(this,n))),s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a))}}function UJ(n,e){var t,r,i,o="style."+e,s="end."+o,a;return function(){var l=eo(this,n),u=l.on,f=l.value[o]==null?a||(a=p3(e)):void 0;(u!==t||i!==f)&&(r=(t=u).copy()).on(s,i=f),l.on=r}}function VJ(n,e,t){var r=(n+="")=="transform"?VY:d3;return e==null?this.styleTween(n,LJ(n,r)).on("end.style."+n,p3(n)):typeof e=="function"?this.styleTween(n,FJ(n,r,Xv(this,"style."+n,e))).each(UJ(this._id,n)):this.styleTween(n,BJ(n,r,e),t).on("end.style."+n,null)}function qJ(n,e,t){return function(r){this.style.setProperty(n,e.call(this,r),t)}}function HJ(n,e,t){var r,i;function o(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&qJ(n,s,t)),r}return o._value=e,o}function zJ(n,e,t){var r="style."+(n+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,HJ(n,e,t==null?"":t))}function WJ(n){return function(){this.textContent=n}}function KJ(n){return function(){var e=n(this);this.textContent=e==null?"":e}}function GJ(n){return this.tween("text",typeof n=="function"?KJ(Xv(this,"text",n)):WJ(n==null?"":n+""))}function YJ(n){return function(e){this.textContent=n.call(this,e)}}function JJ(n){var e,t;function r(){var i=n.apply(this,arguments);return i!==t&&(e=(t=i)&&YJ(i)),e}return r._value=n,r}function QJ(n){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;return this.tween(e,JJ(n))}function ZJ(){for(var n=this._name,e=this._id,t=m3(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)if(l=s[u]){var f=Ii(l,e);np(l,n,t,u,s,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new go(r,this._parents,n,t)}function XJ(){var n,e,t=this,r=t._id,i=t.size();return new Promise(function(o,s){var a={value:s},l={value:function(){--i===0&&o()}};t.each(function(){var u=eo(this,r),f=u.on;f!==n&&(e=(n=f).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),u.on=e}),i===0&&o()})}var $J=0;function go(n,e,t,r){this._groups=n,this._parents=e,this._name=t,this._id=r}function m3(){return++$J}var to=Zu.prototype;go.prototype={constructor:go,select:NJ,selectAll:MJ,selectChild:to.selectChild,selectChildren:to.selectChildren,filter:kJ,merge:TJ,selection:jJ,transition:ZJ,call:to.call,nodes:to.nodes,node:to.node,size:to.size,empty:to.empty,each:to.each,on:AJ,attr:cJ,attrTween:mJ,style:VJ,styleTween:zJ,text:GJ,textTween:QJ,remove:xJ,tween:rJ,delay:yJ,duration:wJ,ease:CJ,easeVarying:OJ,end:XJ,[Symbol.iterator]:to[Symbol.iterator]};function eQ(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var tQ={time:null,delay:0,duration:250,ease:eQ};function nQ(n,e){for(var t;!(t=n.__transition)||!(t=t[e]);)if(!(n=n.parentNode))throw new Error(`transition ${e} not found`);return t}function rQ(n){var e,t;n instanceof go?(e=n._id,n=n._name):(e=m3(),(t=tQ).time=Jv(),n=n==null?null:n+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s=r[o],a=s.length,l,u=0;u<a;++u)(l=s[u])&&np(l,n,e,u,s,t||nQ(l,e));return new go(r,this._parents,n,e)}Zu.prototype.interrupt=eJ;Zu.prototype.transition=rQ;function g3(n,e){var t,r=1;n==null&&(n=0),e==null&&(e=0);function i(){var o,s=t.length,a,l=0,u=0;for(o=0;o<s;++o)a=t[o],l+=a.x,u+=a.y;for(l=(l/s-n)*r,u=(u/s-e)*r,o=0;o<s;++o)a=t[o],a.x-=l,a.y-=u}return i.initialize=function(o){t=o},i.x=function(o){return arguments.length?(n=+o,i):n},i.y=function(o){return arguments.length?(e=+o,i):e},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function iQ(n){const e=+this._x.call(null,n),t=+this._y.call(null,n);return v3(this.cover(e,t),e,t,n)}function v3(n,e,t,r){if(isNaN(e)||isNaN(t))return n;var i,o=n._root,s={data:r},a=n._x0,l=n._y0,u=n._x1,f=n._y1,c,d,g,h,v,m,p,y;if(!o)return n._root=s,n;for(;o.length;)if((v=e>=(c=(a+u)/2))?a=c:u=c,(m=t>=(d=(l+f)/2))?l=d:f=d,i=o,!(o=o[p=m<<1|v]))return i[p]=s,n;if(g=+n._x.call(null,o.data),h=+n._y.call(null,o.data),e===g&&t===h)return s.next=o,i?i[p]=s:n._root=s,n;do i=i?i[p]=new Array(4):n._root=new Array(4),(v=e>=(c=(a+u)/2))?a=c:u=c,(m=t>=(d=(l+f)/2))?l=d:f=d;while((p=m<<1|v)===(y=(h>=d)<<1|g>=c));return i[y]=o,i[p]=s,n}function oQ(n){var e,t,r=n.length,i,o,s=new Array(r),a=new Array(r),l=1/0,u=1/0,f=-1/0,c=-1/0;for(t=0;t<r;++t)isNaN(i=+this._x.call(null,e=n[t]))||isNaN(o=+this._y.call(null,e))||(s[t]=i,a[t]=o,i<l&&(l=i),i>f&&(f=i),o<u&&(u=o),o>c&&(c=o));if(l>f||u>c)return this;for(this.cover(l,u).cover(f,c),t=0;t<r;++t)v3(this,s[t],a[t],n[t]);return this}function sQ(n,e){if(isNaN(n=+n)||isNaN(e=+e))return this;var t=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(t))i=(t=Math.floor(n))+1,o=(r=Math.floor(e))+1;else{for(var s=i-t||1,a=this._root,l,u;t>n||n>=i||r>e||e>=o;)switch(u=(e<r)<<1|n<t,l=new Array(4),l[u]=a,a=l,s*=2,u){case 0:i=t+s,o=r+s;break;case 1:t=i-s,o=r+s;break;case 2:i=t+s,r=o-s;break;case 3:t=i-s,r=o-s;break}this._root&&this._root.length&&(this._root=a)}return this._x0=t,this._y0=r,this._x1=i,this._y1=o,this}function aQ(){var n=[];return this.visit(function(e){if(!e.length)do n.push(e.data);while(e=e.next)}),n}function lQ(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function pr(n,e,t,r,i){this.node=n,this.x0=e,this.y0=t,this.x1=r,this.y1=i}function uQ(n,e,t){var r,i=this._x0,o=this._y0,s,a,l,u,f=this._x1,c=this._y1,d=[],g=this._root,h,v;for(g&&d.push(new pr(g,i,o,f,c)),t==null?t=1/0:(i=n-t,o=e-t,f=n+t,c=e+t,t*=t);h=d.pop();)if(!(!(g=h.node)||(s=h.x0)>f||(a=h.y0)>c||(l=h.x1)<i||(u=h.y1)<o))if(g.length){var m=(s+l)/2,p=(a+u)/2;d.push(new pr(g[3],m,p,l,u),new pr(g[2],s,p,m,u),new pr(g[1],m,a,l,p),new pr(g[0],s,a,m,p)),(v=(e>=p)<<1|n>=m)&&(h=d[d.length-1],d[d.length-1]=d[d.length-1-v],d[d.length-1-v]=h)}else{var y=n-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),_=y*y+b*b;if(_<t){var w=Math.sqrt(t=_);i=n-w,o=e-w,f=n+w,c=e+w,r=g.data}}return r}function cQ(n){if(isNaN(f=+this._x.call(null,n))||isNaN(c=+this._y.call(null,n)))return this;var e,t=this._root,r,i,o,s=this._x0,a=this._y0,l=this._x1,u=this._y1,f,c,d,g,h,v,m,p;if(!t)return this;if(t.length)for(;;){if((h=f>=(d=(s+l)/2))?s=d:l=d,(v=c>=(g=(a+u)/2))?a=g:u=g,e=t,!(t=t[m=v<<1|h]))return this;if(!t.length)break;(e[m+1&3]||e[m+2&3]||e[m+3&3])&&(r=e,p=m)}for(;t.data!==n;)if(i=t,!(t=t.next))return this;return(o=t.next)&&delete t.next,i?(o?i.next=o:delete i.next,this):e?(o?e[m]=o:delete e[m],(t=e[0]||e[1]||e[2]||e[3])&&t===(e[3]||e[2]||e[1]||e[0])&&!t.length&&(r?r[p]=t:this._root=t),this):(this._root=o,this)}function fQ(n){for(var e=0,t=n.length;e<t;++e)this.remove(n[e]);return this}function hQ(){return this._root}function dQ(){var n=0;return this.visit(function(e){if(!e.length)do++n;while(e=e.next)}),n}function pQ(n){var e=[],t,r=this._root,i,o,s,a,l;for(r&&e.push(new pr(r,this._x0,this._y0,this._x1,this._y1));t=e.pop();)if(!n(r=t.node,o=t.x0,s=t.y0,a=t.x1,l=t.y1)&&r.length){var u=(o+a)/2,f=(s+l)/2;(i=r[3])&&e.push(new pr(i,u,f,a,l)),(i=r[2])&&e.push(new pr(i,o,f,u,l)),(i=r[1])&&e.push(new pr(i,u,s,a,f)),(i=r[0])&&e.push(new pr(i,o,s,u,f))}return this}function mQ(n){var e=[],t=[],r;for(this._root&&e.push(new pr(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var o,s=r.x0,a=r.y0,l=r.x1,u=r.y1,f=(s+l)/2,c=(a+u)/2;(o=i[0])&&e.push(new pr(o,s,a,f,c)),(o=i[1])&&e.push(new pr(o,f,a,l,c)),(o=i[2])&&e.push(new pr(o,s,c,f,u)),(o=i[3])&&e.push(new pr(o,f,c,l,u))}t.push(r)}for(;r=t.pop();)n(r.node,r.x0,r.y0,r.x1,r.y1);return this}function gQ(n){return n[0]}function vQ(n){return arguments.length?(this._x=n,this):this._x}function yQ(n){return n[1]}function _Q(n){return arguments.length?(this._y=n,this):this._y}function y3(n,e,t){var r=new $v(e==null?gQ:e,t==null?yQ:t,NaN,NaN,NaN,NaN);return n==null?r:r.addAll(n)}function $v(n,e,t,r,i,o){this._x=n,this._y=e,this._x0=t,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function S2(n){for(var e={data:n.data},t=e;n=n.next;)t=t.next={data:n.data};return e}var Cr=y3.prototype=$v.prototype;Cr.copy=function(){var n=new $v(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,t,r;if(!e)return n;if(!e.length)return n._root=S2(e),n;for(t=[{source:e,target:n._root=new Array(4)}];e=t.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?t.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=S2(r));return n};Cr.add=iQ;Cr.addAll=oQ;Cr.cover=sQ;Cr.data=aQ;Cr.extent=lQ;Cr.find=uQ;Cr.remove=cQ;Cr.removeAll=fQ;Cr.root=hQ;Cr.size=dQ;Cr.visit=pQ;Cr.visitAfter=mQ;Cr.x=vQ;Cr.y=_Q;function eu(n){return function(){return n}}function ga(n){return(n()-.5)*1e-6}function bQ(n){return n.index}function C2(n,e){var t=n.get(e);if(!t)throw new Error("node not found: "+e);return t}function _3(n){var e=bQ,t=c,r,i=eu(30),o,s,a,l,u,f=1;n==null&&(n=[]);function c(m){return 1/Math.min(a[m.source.index],a[m.target.index])}function d(m){for(var p=0,y=n.length;p<f;++p)for(var b=0,_,w,S,E,P,R,j;b<y;++b)_=n[b],w=_.source,S=_.target,E=S.x+S.vx-w.x-w.vx||ga(u),P=S.y+S.vy-w.y-w.vy||ga(u),R=Math.sqrt(E*E+P*P),R=(R-o[b])/R*m*r[b],E*=R,P*=R,S.vx-=E*(j=l[b]),S.vy-=P*j,w.vx+=E*(j=1-j),w.vy+=P*j}function g(){if(!!s){var m,p=s.length,y=n.length,b=new Map(s.map((w,S)=>[e(w,S,s),w])),_;for(m=0,a=new Array(p);m<y;++m)_=n[m],_.index=m,typeof _.source!="object"&&(_.source=C2(b,_.source)),typeof _.target!="object"&&(_.target=C2(b,_.target)),a[_.source.index]=(a[_.source.index]||0)+1,a[_.target.index]=(a[_.target.index]||0)+1;for(m=0,l=new Array(y);m<y;++m)_=n[m],l[m]=a[_.source.index]/(a[_.source.index]+a[_.target.index]);r=new Array(y),h(),o=new Array(y),v()}}function h(){if(!!s)for(var m=0,p=n.length;m<p;++m)r[m]=+t(n[m],m,n)}function v(){if(!!s)for(var m=0,p=n.length;m<p;++m)o[m]=+i(n[m],m,n)}return d.initialize=function(m,p){s=m,u=p,g()},d.links=function(m){return arguments.length?(n=m,g(),d):n},d.id=function(m){return arguments.length?(e=m,d):e},d.iterations=function(m){return arguments.length?(f=+m,d):f},d.strength=function(m){return arguments.length?(t=typeof m=="function"?m:eu(+m),h(),d):t},d.distance=function(m){return arguments.length?(i=typeof m=="function"?m:eu(+m),v(),d):i},d}const wQ=1664525,SQ=1013904223,E2=4294967296;function CQ(){let n=1;return()=>(n=(wQ*n+SQ)%E2)/E2}function EQ(n){return n.x}function OQ(n){return n.y}var kQ=10,TQ=Math.PI*(3-Math.sqrt(5));function b3(n){var e,t=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,l=Qv(c),u=Qu("tick","end"),f=CQ();n==null&&(n=[]);function c(){d(),u.call("tick",e),t<r&&(l.stop(),u.call("end",e))}function d(v){var m,p=n.length,y;v===void 0&&(v=1);for(var b=0;b<v;++b)for(t+=(o-t)*i,a.forEach(function(_){_(t)}),m=0;m<p;++m)y=n[m],y.fx==null?y.x+=y.vx*=s:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=s:(y.y=y.fy,y.vy=0);return e}function g(){for(var v=0,m=n.length,p;v<m;++v){if(p=n[v],p.index=v,p.fx!=null&&(p.x=p.fx),p.fy!=null&&(p.y=p.fy),isNaN(p.x)||isNaN(p.y)){var y=kQ*Math.sqrt(.5+v),b=v*TQ;p.x=y*Math.cos(b),p.y=y*Math.sin(b)}(isNaN(p.vx)||isNaN(p.vy))&&(p.vx=p.vy=0)}}function h(v){return v.initialize&&v.initialize(n,f),v}return g(),e={tick:d,restart:function(){return l.restart(c),e},stop:function(){return l.stop(),e},nodes:function(v){return arguments.length?(n=v,g(),a.forEach(h),e):n},alpha:function(v){return arguments.length?(t=+v,e):t},alphaMin:function(v){return arguments.length?(r=+v,e):r},alphaDecay:function(v){return arguments.length?(i=+v,e):+i},alphaTarget:function(v){return arguments.length?(o=+v,e):o},velocityDecay:function(v){return arguments.length?(s=1-v,e):1-s},randomSource:function(v){return arguments.length?(f=v,a.forEach(h),e):f},force:function(v,m){return arguments.length>1?(m==null?a.delete(v):a.set(v,h(m)),e):a.get(v)},find:function(v,m,p){var y=0,b=n.length,_,w,S,E,P;for(p==null?p=1/0:p*=p,y=0;y<b;++y)E=n[y],_=v-E.x,w=m-E.y,S=_*_+w*w,S<p&&(P=E,p=S);return P},on:function(v,m){return arguments.length>1?(u.on(v,m),e):u.on(v)}}}function w3(){var n,e,t,r,i=eu(-30),o,s=1,a=1/0,l=.81;function u(g){var h,v=n.length,m=y3(n,EQ,OQ).visitAfter(c);for(r=g,h=0;h<v;++h)e=n[h],m.visit(d)}function f(){if(!!n){var g,h=n.length,v;for(o=new Array(h),g=0;g<h;++g)v=n[g],o[v.index]=+i(v,g,n)}}function c(g){var h=0,v,m,p=0,y,b,_;if(g.length){for(y=b=_=0;_<4;++_)(v=g[_])&&(m=Math.abs(v.value))&&(h+=v.value,p+=m,y+=m*v.x,b+=m*v.y);g.x=y/p,g.y=b/p}else{v=g,v.x=v.data.x,v.y=v.data.y;do h+=o[v.data.index];while(v=v.next)}g.value=h}function d(g,h,v,m){if(!g.value)return!0;var p=g.x-e.x,y=g.y-e.y,b=m-h,_=p*p+y*y;if(b*b/l<_)return _<a&&(p===0&&(p=ga(t),_+=p*p),y===0&&(y=ga(t),_+=y*y),_<s&&(_=Math.sqrt(s*_)),e.vx+=p*g.value*r/_,e.vy+=y*g.value*r/_),!0;if(g.length||_>=a)return;(g.data!==e||g.next)&&(p===0&&(p=ga(t),_+=p*p),y===0&&(y=ga(t),_+=y*y),_<s&&(_=Math.sqrt(s*_)));do g.data!==e&&(b=o[g.data.index]*r/_,e.vx+=p*b,e.vy+=y*b);while(g=g.next)}return u.initialize=function(g,h){n=g,t=h,f()},u.strength=function(g){return arguments.length?(i=typeof g=="function"?g:eu(+g),f(),u):i},u.distanceMin=function(g){return arguments.length?(s=g*g,u):Math.sqrt(s)},u.distanceMax=function(g){return arguments.length?(a=g*g,u):Math.sqrt(a)},u.theta=function(g){return arguments.length?(l=g*g,u):Math.sqrt(l)},u}function PQ(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const O2=Symbol("implicit");function S3(){var n=new r2,e=[],t=[],r=O2;function i(o){let s=n.get(o);if(s===void 0){if(r!==O2)return r;n.set(o,s=e.push(o)-1)}return t[s%t.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],n=new r2;for(const s of o)n.has(s)||n.set(s,e.push(s)-1);return i},i.range=function(o){return arguments.length?(t=Array.from(o),i):t.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return S3(e,t).unknown(r)},PQ.apply(i,arguments),i}function IQ(n){for(var e=n.length/6|0,t=new Array(e),r=0;r<e;)t[r]="#"+n.slice(r*6,++r*6);return t}const AQ=IQ("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Gc=n=>()=>n;function RQ(n,{sourceEvent:e,target:t,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function lo(n,e,t){this.k=n,this.x=e,this.y=t}lo.prototype={constructor:lo,scale:function(n){return n===1?this:new lo(this.k*n,this.x,this.y)},translate:function(n,e){return n===0&e===0?this:new lo(this.k,this.x+this.k*n,this.y+this.k*e)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var rp=new lo(1,0,0);lo.prototype;function lm(n){n.stopImmediatePropagation()}function bl(n){n.preventDefault(),n.stopImmediatePropagation()}function xQ(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function NQ(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function k2(){return this.__zoom||rp}function MQ(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function DQ(){return navigator.maxTouchPoints||"ontouchstart"in this}function jQ(n,e,t){var r=n.invertX(e[0][0])-t[0][0],i=n.invertX(e[1][0])-t[1][0],o=n.invertY(e[0][1])-t[0][1],s=n.invertY(e[1][1])-t[1][1];return n.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}function C3(){var n=xQ,e=NQ,t=jQ,r=MQ,i=DQ,o=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,l=KY,u=Qu("start","zoom","end"),f,c,d,g=500,h=150,v=0,m=10;function p(D){D.property("__zoom",k2).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",j).filter(i).on("touchstart.zoom",U).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(D,N,L,X){var Q=D.selection?D.selection():D;Q.property("__zoom",k2),D!==Q?w(D,N,L,X):Q.interrupt().each(function(){S(this,arguments).event(X).start().zoom(null,typeof N=="function"?N.apply(this,arguments):N).end()})},p.scaleBy=function(D,N,L,X){p.scaleTo(D,function(){var Q=this.__zoom.k,A=typeof N=="function"?N.apply(this,arguments):N;return Q*A},L,X)},p.scaleTo=function(D,N,L,X){p.transform(D,function(){var Q=e.apply(this,arguments),A=this.__zoom,k=L==null?_(Q):typeof L=="function"?L.apply(this,arguments):L,V=A.invert(k),K=typeof N=="function"?N.apply(this,arguments):N;return t(b(y(A,K),k,V),Q,s)},L,X)},p.translateBy=function(D,N,L,X){p.transform(D,function(){return t(this.__zoom.translate(typeof N=="function"?N.apply(this,arguments):N,typeof L=="function"?L.apply(this,arguments):L),e.apply(this,arguments),s)},null,X)},p.translateTo=function(D,N,L,X,Q){p.transform(D,function(){var A=e.apply(this,arguments),k=this.__zoom,V=X==null?_(A):typeof X=="function"?X.apply(this,arguments):X;return t(rp.translate(V[0],V[1]).scale(k.k).translate(typeof N=="function"?-N.apply(this,arguments):-N,typeof L=="function"?-L.apply(this,arguments):-L),A,s)},X,Q)};function y(D,N){return N=Math.max(o[0],Math.min(o[1],N)),N===D.k?D:new lo(N,D.x,D.y)}function b(D,N,L){var X=N[0]-L[0]*D.k,Q=N[1]-L[1]*D.k;return X===D.x&&Q===D.y?D:new lo(D.k,X,Q)}function _(D){return[(+D[0][0]+ +D[1][0])/2,(+D[0][1]+ +D[1][1])/2]}function w(D,N,L,X){D.on("start.zoom",function(){S(this,arguments).event(X).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(X).end()}).tween("zoom",function(){var Q=this,A=arguments,k=S(Q,A).event(X),V=e.apply(Q,A),K=L==null?_(V):typeof L=="function"?L.apply(Q,A):L,H=Math.max(V[1][0]-V[0][0],V[1][1]-V[0][1]),I=Q.__zoom,M=typeof N=="function"?N.apply(Q,A):N,G=l(I.invert(K).concat(H/I.k),M.invert(K).concat(H/M.k));return function(q){if(q===1)q=M;else{var W=G(q),ae=H/W[2];q=new lo(ae,K[0]-W[0]*ae,K[1]-W[1]*ae)}k.zoom(null,q)}})}function S(D,N,L){return!L&&D.__zooming||new E(D,N)}function E(D,N){this.that=D,this.args=N,this.active=0,this.sourceEvent=null,this.extent=e.apply(D,N),this.taps=0}E.prototype={event:function(D){return D&&(this.sourceEvent=D),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(D,N){return this.mouse&&D!=="mouse"&&(this.mouse[1]=N.invert(this.mouse[0])),this.touch0&&D!=="touch"&&(this.touch0[1]=N.invert(this.touch0[0])),this.touch1&&D!=="touch"&&(this.touch1[1]=N.invert(this.touch1[0])),this.that.__zoom=N,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(D){var N=bi(this.that).datum();u.call(D,this.that,new RQ(D,{sourceEvent:this.sourceEvent,target:p,type:D,transform:this.that.__zoom,dispatch:u}),N)}};function P(D,...N){if(!n.apply(this,arguments))return;var L=S(this,N).event(D),X=this.__zoom,Q=Math.max(o[0],Math.min(o[1],X.k*Math.pow(2,r.apply(this,arguments)))),A=oo(D);if(L.wheel)(L.mouse[0][0]!==A[0]||L.mouse[0][1]!==A[1])&&(L.mouse[1]=X.invert(L.mouse[0]=A)),clearTimeout(L.wheel);else{if(X.k===Q)return;L.mouse=[A,X.invert(A)],nh(this),L.start()}bl(D),L.wheel=setTimeout(k,h),L.zoom("mouse",t(b(y(X,Q),L.mouse[0],L.mouse[1]),L.extent,s));function k(){L.wheel=null,L.end()}}function R(D,...N){if(d||!n.apply(this,arguments))return;var L=D.currentTarget,X=S(this,N,!0).event(D),Q=bi(D.view).on("mousemove.zoom",K,!0).on("mouseup.zoom",H,!0),A=oo(D,L),k=D.clientX,V=D.clientY;t3(D.view),lm(D),X.mouse=[A,this.__zoom.invert(A)],nh(this),X.start();function K(I){if(bl(I),!X.moved){var M=I.clientX-k,G=I.clientY-V;X.moved=M*M+G*G>v}X.event(I).zoom("mouse",t(b(X.that.__zoom,X.mouse[0]=oo(I,L),X.mouse[1]),X.extent,s))}function H(I){Q.on("mousemove.zoom mouseup.zoom",null),n3(I.view,X.moved),bl(I),X.event(I).end()}}function j(D,...N){if(!!n.apply(this,arguments)){var L=this.__zoom,X=oo(D.changedTouches?D.changedTouches[0]:D,this),Q=L.invert(X),A=L.k*(D.shiftKey?.5:2),k=t(b(y(L,A),X,Q),e.apply(this,N),s);bl(D),a>0?bi(this).transition().duration(a).call(w,k,X,D):bi(this).call(p.transform,k,X,D)}}function U(D,...N){if(!!n.apply(this,arguments)){var L=D.touches,X=L.length,Q=S(this,N,D.changedTouches.length===X).event(D),A,k,V,K;for(lm(D),k=0;k<X;++k)V=L[k],K=oo(V,this),K=[K,this.__zoom.invert(K),V.identifier],Q.touch0?!Q.touch1&&Q.touch0[2]!==K[2]&&(Q.touch1=K,Q.taps=0):(Q.touch0=K,A=!0,Q.taps=1+!!f);f&&(f=clearTimeout(f)),A&&(Q.taps<2&&(c=K[0],f=setTimeout(function(){f=null},g)),nh(this),Q.start())}}function F(D,...N){if(!!this.__zooming){var L=S(this,N).event(D),X=D.changedTouches,Q=X.length,A,k,V,K;for(bl(D),A=0;A<Q;++A)k=X[A],V=oo(k,this),L.touch0&&L.touch0[2]===k.identifier?L.touch0[0]=V:L.touch1&&L.touch1[2]===k.identifier&&(L.touch1[0]=V);if(k=L.that.__zoom,L.touch1){var H=L.touch0[0],I=L.touch0[1],M=L.touch1[0],G=L.touch1[1],q=(q=M[0]-H[0])*q+(q=M[1]-H[1])*q,W=(W=G[0]-I[0])*W+(W=G[1]-I[1])*W;k=y(k,Math.sqrt(q/W)),V=[(H[0]+M[0])/2,(H[1]+M[1])/2],K=[(I[0]+G[0])/2,(I[1]+G[1])/2]}else if(L.touch0)V=L.touch0[0],K=L.touch0[1];else return;L.zoom("touch",t(b(k,V,K),L.extent,s))}}function z(D,...N){if(!!this.__zooming){var L=S(this,N).event(D),X=D.changedTouches,Q=X.length,A,k;for(lm(D),d&&clearTimeout(d),d=setTimeout(function(){d=null},g),A=0;A<Q;++A)k=X[A],L.touch0&&L.touch0[2]===k.identifier?delete L.touch0:L.touch1&&L.touch1[2]===k.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(k=oo(k,this),Math.hypot(c[0]-k[0],c[1]-k[1])<m)){var V=bi(this).on("dblclick.zoom");V&&V.apply(this,arguments)}}}return p.wheelDelta=function(D){return arguments.length?(r=typeof D=="function"?D:Gc(+D),p):r},p.filter=function(D){return arguments.length?(n=typeof D=="function"?D:Gc(!!D),p):n},p.touchable=function(D){return arguments.length?(i=typeof D=="function"?D:Gc(!!D),p):i},p.extent=function(D){return arguments.length?(e=typeof D=="function"?D:Gc([[+D[0][0],+D[0][1]],[+D[1][0],+D[1][1]]]),p):e},p.scaleExtent=function(D){return arguments.length?(o[0]=+D[0],o[1]=+D[1],p):[o[0],o[1]]},p.translateExtent=function(D){return arguments.length?(s[0][0]=+D[0][0],s[1][0]=+D[1][0],s[0][1]=+D[0][1],s[1][1]=+D[1][1],p):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},p.constrain=function(D){return arguments.length?(t=D,p):t},p.duration=function(D){return arguments.length?(a=+D,p):a},p.interpolate=function(D){return arguments.length?(l=D,p):l},p.on=function(){var D=u.on.apply(u,arguments);return D===u?p:D},p.clickDistance=function(D){return arguments.length?(v=(D=+D)*D,p):Math.sqrt(v)},p.tapDistance=function(D){return arguments.length?(m=+D,p):m},p}function T2(n,e,t){const r=n.slice();return r[20]=e[t],r}function P2(n,e,t){const r=n.slice();return r[23]=e[t],r}function I2(n){let e,t,r,i,o,s;return{c(){e=Ft("g"),t=Ft("path"),T(t,"class","stroke-black dark:stroke-gray-200 svelte-1nfccio"),T(t,"id",r=n[23].source.id+"_"+n[23].target.id+"_"+n[23].linkIndex),T(t,"d",i=n[6](n[23])),T(t,"marker-end",o=n[23].directional?"url(#prop_arrow)":"url(#prop_dot)"),T(e,"class","edge svelte-1nfccio"),T(e,"transform",s="translate("+n[5].x+" "+n[5].y+") scale("+n[5].k+" "+n[5].k+")")},m(a,l){fe(a,e,l),B(e,t)},p(a,l){l&16&&r!==(r=a[23].source.id+"_"+a[23].target.id+"_"+a[23].linkIndex)&&T(t,"id",r),l&16&&i!==(i=a[6](a[23]))&&T(t,"d",i),l&16&&o!==(o=a[23].directional?"url(#prop_arrow)":"url(#prop_dot)")&&T(t,"marker-end",o),l&32&&s!==(s="translate("+a[5].x+" "+a[5].y+") scale("+a[5].k+" "+a[5].k+")")&&T(e,"transform",s)},d(a){a&&ue(e)}}}function A2(n){let e,t,r=n[20].id+"",i,o,s,a,l,u,f,c,d,g=n[20].stringRepres+"",h,v,m,p,y,b;return{c(){e=Ft("g"),t=Ft("title"),i=qe(r),o=Ft("rect"),c=Ft("foreignObject"),d=ee("pre"),h=qe(g),T(o,"class","stroke-black dark:stroke-gray-200 svelte-1nfccio"),T(o,"stroke-dasharray",s=n[20].type===ru.edge?"5,3":null),T(o,"x",a=n[20].x-.5*n[20].width),T(o,"y",l=n[20].y-.5*n[20].height),T(o,"width",u=n[20].width),T(o,"height",f=n[20].height),T(d,"class","text-black dark:text-gray-200 svelte-1nfccio"),T(c,"x",v=n[20].x-.5*n[20].width),T(c,"y",m=n[20].y-.5*n[20].height),T(c,"width",p=n[20].width),T(c,"height",y=n[20].height),T(e,"class","node"),T(e,"transform",b="translate("+n[5].x+" "+n[5].y+") scale("+n[5].k+" "+n[5].k+")")},m(_,w){fe(_,e,w),B(e,t),B(t,i),B(e,o),B(e,c),B(c,d),B(d,h)},p(_,w){w&8&&r!==(r=_[20].id+"")&&bt(i,r),w&8&&s!==(s=_[20].type===ru.edge?"5,3":null)&&T(o,"stroke-dasharray",s),w&8&&a!==(a=_[20].x-.5*_[20].width)&&T(o,"x",a),w&8&&l!==(l=_[20].y-.5*_[20].height)&&T(o,"y",l),w&8&&u!==(u=_[20].width)&&T(o,"width",u),w&8&&f!==(f=_[20].height)&&T(o,"height",f),w&8&&g!==(g=_[20].stringRepres+"")&&bt(h,g),w&8&&v!==(v=_[20].x-.5*_[20].width)&&T(c,"x",v),w&8&&m!==(m=_[20].y-.5*_[20].height)&&T(c,"y",m),w&8&&p!==(p=_[20].width)&&T(c,"width",p),w&8&&y!==(y=_[20].height)&&T(c,"height",y),w&32&&b!==(b="translate("+_[5].x+" "+_[5].y+") scale("+_[5].k+" "+_[5].k+")")&&T(e,"transform",b)},d(_){_&&ue(e)}}}function LQ(n){let e,t,r,i,o,s,a,l,u,f=n[4],c=[];for(let h=0;h<f.length;h+=1)c[h]=I2(P2(n,f,h));let d=n[3],g=[];for(let h=0;h<d.length;h+=1)g[h]=A2(T2(n,d,h));return{c(){e=ee("figure"),t=Ft("svg"),r=Ft("defs"),i=Ft("marker"),o=Ft("path"),s=Ft("marker"),a=Ft("circle");for(let h=0;h<c.length;h+=1)c[h].c();l=xt();for(let h=0;h<g.length;h+=1)g[h].c();T(o,"class","fill-black dark:fill-gray-200 stroke-0"),T(o,"d","M 0 0 L 10 5 L 0 10 z"),T(i,"id","prop_arrow"),T(i,"viewBox","0 0 10 10"),T(i,"refX","10"),T(i,"refY","5"),T(i,"markerWidth","13"),T(i,"markerHeight","13"),T(i,"orient","auto-start-reverse"),T(a,"class","fill-black dark:fill-gray-200 stroke-0"),T(a,"cx","5"),T(a,"cy","5"),T(a,"r","5"),T(s,"id","prop_dot"),T(s,"viewBox","0 0 10 10"),T(s,"refX","10"),T(s,"refY","5"),T(s,"markerWidth","13"),T(s,"markerHeight","13"),T(s,"orient","auto-start-reverse"),T(t,"width",n[0]),T(t,"height",n[1]),T(t,"class","svelte-1nfccio"),T(e,"class","svelte-1nfccio"),Yi(()=>n[9].call(e))},m(h,v){fe(h,e,v),B(e,t),B(t,r),B(r,i),B(i,o),B(r,s),B(s,a);for(let m=0;m<c.length;m+=1)c[m].m(t,null);B(t,l);for(let m=0;m<g.length;m+=1)g[m].m(t,null);n[8](t),u=T0(e,n[9].bind(e))},p(h,[v]){if(v&112){f=h[4];let m;for(m=0;m<f.length;m+=1){const p=P2(h,f,m);c[m]?c[m].p(p,v):(c[m]=I2(p),c[m].c(),c[m].m(t,l))}for(;m<c.length;m+=1)c[m].d(1);c.length=f.length}if(v&40){d=h[3];let m;for(m=0;m<d.length;m+=1){const p=T2(h,d,m);g[m]?g[m].p(p,v):(g[m]=A2(p),g[m].c(),g[m].m(t,null))}for(;m<g.length;m+=1)g[m].d(1);g.length=d.length}v&1&&T(t,"width",h[0]),v&2&&T(t,"height",h[1])},i:Me,o:Me,d(h){h&&ue(e),xn(c,h),xn(g,h),n[8](null),u()}}}function BQ(n){n.sort(function(e,t){return e.source>t.source?1:e.source<t.source?-1:e.target>t.target?1:e.target<t.target?-1:0})}function FQ(n,e,t){let{graph:r}=e,i,o,s,a=[],l=[],u=rp,f={};const c=b3(),d=r.subscribe(E=>{c.stop(),t(3,a=[...E.nodes.values(),...E.edges.values()]),a.forEach(P=>P.setPrintOptions()),t(4,l=[...E.edges.values()].flatMap(P=>[{source:P.isDirected?E.nodes.get(P.sourceNode):P,target:P.isDirected?P:E.nodes.get(P.sourceNode),directional:P.isDirected},{source:P,target:E.nodes.get(P.targetNode),directional:P.isDirected}])),b(l),c.nodes(a).force("link",_3(l).distance(250)).force("charge",w3().strength(-1200)).on("tick",g),c.alpha(1).restart()});Nr(()=>{bi(i).call(r3().container(i).subject(v).on("start",m).on("drag",p).on("end",y)).call(C3().scaleExtent([1/10,8]).on("zoom",h))}),ho(()=>{c.stop(),d()});function g(){c.tick(),t(3,a=[...a]),t(4,l=[...l])}function h(E){t(5,u=E.transform),g()}function v(E){const R=c.nodes().filter(j=>j.x-.5*j.width<u.invertX(E.x)&&j.x+.5*j.width>u.invertX(E.x)&&j.y-.5*j.height<u.invertY(E.y)&&j.y+.5*j.height>u.invertY(E.y))[0];return R&&(R.x=u.applyX(R.x),R.y=u.applyY(R.y)),R}function m(E){E.active||c.alphaTarget(.3).restart(),E.subject.fx=u.invertX(E.subject.x),E.subject.fy=u.invertY(E.subject.y)}function p(E){E.subject.fx=u.invertX(E.x),E.subject.fy=u.invertY(E.y)}function y(E){E.active||c.alphaTarget(0),E.subject.fx=null,E.subject.fy=null}function b(E){BQ(E);for(var P=0;P<E.length;P++)P!=0&&E[P].source==E[P-1].source&&E[P].target==E[P-1].target?E[P].linkIndex=E[P-1].linkIndex+1:E[P].linkIndex=1,f[E[P].source.id+":"+E[P].target.id]=E[P].linkIndex}function _(E){const P=E.source.x<E.target.x-.5*E.target.width,R=E.source.y<E.target.y-.5*E.target.height,j=E.source.x>E.target.x+.5*E.target.width,U=E.source.y>E.target.y+.5*E.target.height;let F,z,D,N;P&&R?(F=E.source.x,D=E.source.y+.5*E.source.height,z=E.target.x-.5*E.target.width,N=E.target.y):P&&U?(F=E.source.x+.5*E.source.width,D=E.source.y,z=E.target.x,N=E.target.y+.5*E.target.height):P?(F=E.source.x+.5*E.source.width,D=E.source.y,z=E.target.x-.5*E.target.width,N=E.target.y):j&&R?(F=E.source.x-.5*E.source.width,D=E.source.y,z=E.target.x,N=E.target.y-.5*E.target.height):j&&U?(F=E.source.x,D=E.source.y-.5*E.source.height,z=E.target.x+.5*E.target.width,N=E.target.y):j?(F=E.source.x-.5*E.source.width,D=E.source.y,z=E.target.x+.5*E.target.width,N=E.target.y):R?(F=E.source.x,D=E.source.y+.5*E.source.height,z=E.target.x,N=E.target.y-.5*E.target.height):(F=E.source.x,D=E.source.y-.5*E.source.height,z=E.target.x,N=E.target.y+.5*E.target.height);var L=z-F,X=N-D,Q=Math.sqrt(L*L+X*X),A=f[E.source.id+":"+E.target.id];return A>1&&(Q=Q/(1+1/A*(E.linkIndex-1))),`M${F} ${D} A ${Q}, ${Q} 0, 0, 0 ${z}, ${N}`}function w(E){wt[E?"unshift":"push"](()=>{i=E,t(2,i)})}function S(){s=this.clientHeight,o=this.clientWidth,t(1,s),t(0,o)}return n.$$set=E=>{"graph"in E&&t(7,r=E.graph)},n.$$.update=()=>{n.$$.dirty&3&&c.force("center",g3(o/2,s/2)).restart()},[o,s,i,a,l,u,_,r,w,S]}class um extends rt{constructor(e){super(),nt(this,e,FQ,LQ,Xt,{graph:7})}}function R2(n,e,t){const r=n.slice();return r[21]=e[t],r}function x2(n,e,t){const r=n.slice();return r[24]=e[t],r}function N2(n){let e,t,r=n[24].label+"",i,o,s,a,l,u,f,c,d,g=n[24].label.toString()+"",h,v,m;return{c(){e=Ft("g"),t=Ft("title"),i=qe(r),o=Ft("path"),l=Ft("path"),c=Ft("text"),d=Ft("textPath"),h=qe(g),T(o,"class","stroke-black dark:stroke-gray-200 svelte-x44ch3"),T(o,"id",s=n[24].source.id+"_"+n[24].target.id+"_"+n[24].linkIndex),T(o,"d",a=n[7](!0,n[24])),T(o,"marker-end","url(#simple_arrow)"),T(l,"class","stroke-0 svelte-x44ch3"),T(l,"id",u="invis_"+n[24].source.id+"_"+n[24].target.id+"_"+n[24].linkIndex),T(l,"d",f=n[7](n[24].source.x<n[24].target.x,n[24])),T(d,"href",v="#invis_"+n[24].source.id+"_"+n[24].target.id+"_"+n[24].linkIndex),T(d,"startOffset","50%"),T(d,"style",""),T(c,"class","fill-black dark:fill-gray-200 svelte-x44ch3"),T(e,"class","edge svelte-x44ch3"),T(e,"transform",m="translate("+n[5].x+" "+n[5].y+") scale("+n[5].k+" "+n[5].k+")")},m(p,y){fe(p,e,y),B(e,t),B(t,i),B(e,o),B(e,l),B(e,c),B(c,d),B(d,h)},p(p,y){y&16&&r!==(r=p[24].label+"")&&bt(i,r),y&16&&s!==(s=p[24].source.id+"_"+p[24].target.id+"_"+p[24].linkIndex)&&T(o,"id",s),y&16&&a!==(a=p[7](!0,p[24]))&&T(o,"d",a),y&16&&u!==(u="invis_"+p[24].source.id+"_"+p[24].target.id+"_"+p[24].linkIndex)&&T(l,"id",u),y&16&&f!==(f=p[7](p[24].source.x<p[24].target.x,p[24]))&&T(l,"d",f),y&16&&g!==(g=p[24].label.toString()+"")&&bt(h,g),y&16&&v!==(v="#invis_"+p[24].source.id+"_"+p[24].target.id+"_"+p[24].linkIndex)&&T(d,"href",v),y&32&&m!==(m="translate("+p[5].x+" "+p[5].y+") scale("+p[5].k+" "+p[5].k+")")&&T(e,"transform",m)},d(p){p&&ue(e)}}}function M2(n){let e,t,r=n[21].id+"",i,o,s,a,l,u,f=n[21].label.toString()+"",c,d,g,h;return{c(){e=Ft("g"),t=Ft("title"),i=qe(r),o=Ft("circle"),u=Ft("text"),c=qe(f),T(o,"class","stroke-black"),T(o,"r",E3),T(o,"fill",s=n[6](n[21].type.toString())),T(o,"cx",a=n[21].x),T(o,"cy",l=n[21].y),T(u,"class","fill-black dark:fill-white svelte-x44ch3"),T(u,"x",d=n[21].x),T(u,"y",g=n[21].y),T(e,"class","node svelte-x44ch3"),T(e,"transform",h="translate("+n[5].x+" "+n[5].y+") scale("+n[5].k+" "+n[5].k+")")},m(v,m){fe(v,e,m),B(e,t),B(t,i),B(e,o),B(e,u),B(u,c)},p(v,m){m&8&&r!==(r=v[21].id+"")&&bt(i,r),m&8&&s!==(s=v[6](v[21].type.toString()))&&T(o,"fill",s),m&8&&a!==(a=v[21].x)&&T(o,"cx",a),m&8&&l!==(l=v[21].y)&&T(o,"cy",l),m&8&&f!==(f=v[21].label.toString()+"")&&bt(c,f),m&8&&d!==(d=v[21].x)&&T(u,"x",d),m&8&&g!==(g=v[21].y)&&T(u,"y",g),m&32&&h!==(h="translate("+v[5].x+" "+v[5].y+") scale("+v[5].k+" "+v[5].k+")")&&T(e,"transform",h)},d(v){v&&ue(e)}}}function UQ(n){let e,t,r,i,o,s,a,l=n[4],u=[];for(let d=0;d<l.length;d+=1)u[d]=N2(x2(n,l,d));let f=n[3],c=[];for(let d=0;d<f.length;d+=1)c[d]=M2(R2(n,f,d));return{c(){e=ee("figure"),t=Ft("svg"),r=Ft("defs"),i=Ft("marker"),o=Ft("path");for(let d=0;d<u.length;d+=1)u[d].c();s=xt();for(let d=0;d<c.length;d+=1)c[d].c();T(o,"class","fill-black dark:fill-gray-200 stroke-0"),T(o,"d","M 0 0 L 10 5 L 0 10 z"),T(i,"id","simple_arrow"),T(i,"viewBox","0 0 10 10"),T(i,"refX","26"),T(i,"refY","6"),T(i,"markerWidth","13"),T(i,"markerHeight","13"),T(i,"orient","auto-start-reverse"),T(t,"width",n[0]),T(t,"height",n[1]),T(t,"class","svelte-x44ch3"),T(e,"class","svelte-x44ch3"),Yi(()=>n[10].call(e))},m(d,g){fe(d,e,g),B(e,t),B(t,r),B(r,i),B(i,o);for(let h=0;h<u.length;h+=1)u[h].m(t,null);B(t,s);for(let h=0;h<c.length;h+=1)c[h].m(t,null);n[9](t),a=T0(e,n[10].bind(e))},p(d,[g]){if(g&176){l=d[4];let h;for(h=0;h<l.length;h+=1){const v=x2(d,l,h);u[h]?u[h].p(v,g):(u[h]=N2(v),u[h].c(),u[h].m(t,s))}for(;h<u.length;h+=1)u[h].d(1);u.length=l.length}if(g&104){f=d[3];let h;for(h=0;h<f.length;h+=1){const v=R2(d,f,h);c[h]?c[h].p(v,g):(c[h]=M2(v),c[h].c(),c[h].m(t,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=f.length}g&1&&T(t,"width",d[0]),g&2&&T(t,"height",d[1])},i:Me,o:Me,d(d){d&&ue(e),xn(u,d),xn(c,d),n[9](null),a()}}}const E3=20;function VQ(n){n.sort(function(e,t){return e.source>t.source?1:e.source<t.source?-1:e.target>t.target?1:e.target<t.target?-1:0})}function qQ(n,e,t){let{graph:r}=e,i,o,s,a=[],l=[],u=rp;const f=S3(AQ);let c={};const d=b3(),g=r.subscribe(P=>{d.stop(),t(3,a=[...P.nodeNodes.values(),...P.edgeNodes.values(),...P.labelNodes.values(),...P.propertyNodes.values()]),t(4,l=[...P.edgeEdges,...P.labelEdges,...P.propertyEdges]),_(l),d.nodes(a).force("link",_3(l).distance(140)).force("charge",w3().strength(-800)).on("tick",h),d.alpha(1).restart(),console.log(d)});Nr(()=>{bi(i).call(r3().container(i).subject(m).on("start",p).on("drag",y).on("end",b)).call(C3().scaleExtent([1/10,8]).on("zoom",v))}),ho(()=>{d.stop(),g()});function h(){d.tick(),t(3,a=[...a]),t(4,l=[...l])}function v(P){t(5,u=P.transform),h()}function m(P){const R=d.find(u.invertX(P.x),u.invertY(P.y),E3);return R&&(R.x=u.applyX(R.x),R.y=u.applyY(R.y)),R}function p(P){P.active||d.alphaTarget(.3).restart(),P.subject.fx=u.invertX(P.subject.x),P.subject.fy=u.invertY(P.subject.y)}function y(P){P.subject.fx=u.invertX(P.x),P.subject.fy=u.invertY(P.y)}function b(P){P.active||d.alphaTarget(0),P.subject.fx=null,P.subject.fy=null}function _(P){VQ(P);for(var R=0;R<P.length;R++)R!=0&&P[R].source==P[R-1].source&&P[R].target==P[R-1].target?P[R].linkIndex=P[R-1].linkIndex+1:P[R].linkIndex=1,c[P[R].source.id+":"+P[R].target.id]=P[R].linkIndex}function w(P,R){var j=P?R.source.x:R.target.x,U=P?R.source.y:R.target.y,F=P?R.target.x:R.source.x,z=P?R.target.y:R.source.y,D=F-j,N=z-U,L=Math.sqrt(D*D+N*N),X=P?0:1,Q=c[R.source.id+":"+R.target.id];return Q>1&&(L=L/(1+1/Q*(R.linkIndex-1))),`M${j} ${U} A ${L}, ${L} 0, 0, ${X} ${F}, ${z}`}function S(P){wt[P?"unshift":"push"](()=>{i=P,t(2,i)})}function E(){o=this.clientWidth,s=this.clientHeight,t(0,o),t(1,s)}return n.$$set=P=>{"graph"in P&&t(8,r=P.graph)},n.$$.update=()=>{n.$$.dirty&3&&d.force("center",g3(o/2,s/2)).restart()},[o,s,i,a,l,u,f,w,r,S,E]}class cm extends rt{constructor(e){super(),nt(this,e,qQ,UQ,Xt,{graph:8})}}const ey=as({text:CK}),h0=as(td.project),d0=as(0),p0=as({text:EK}),ty=as([]);let m0=p0.subscribe(n=>{ty.set(JSON.parse(n.text))});m0();const ny=as(new Mu);function ry(){try{m0=ey.subscribe(n=>{console.time("setPropertyDataGraph"),ny.set(Mu.fromJSON(n.text)),console.timeEnd("setPropertyDataGraph")}),m0()}catch(n){console.error(n.message)}}ry();const O3=Ju(ny,n=>TK(n)),iy=Ju([O3,ty,h0,d0],([n,e,t,r])=>IK(n,e,t,r)),HQ=Ju(iy,n=>qP(n)),k3=Ju(iy,n=>new kK().calculateSchema(n)),T3=Ju(k3,n=>qP(n)),g0=[{name:"SimpleData",component:cm,graph:O3},{name:"SimpleInduced",component:cm,graph:iy},{name:"SimpleSchema",component:cm,graph:k3},{name:"PropertyData",component:um,graph:ny},{name:"PropertyInduced",component:um,graph:HQ},{name:"PropertySchema",component:um,graph:T3}],v0=as(g0[5]);function zQ(n){const e=[],t=[],r=[];function i(s,a,l){if(!Array.isArray(s)){e.push({path:[l,a,"labels"],message:"must be array",severity:tn.error});return}s.forEach((u,f)=>{typeof u!="string"&&e.push({path:[l,a,"labels",f],message:"must be string",severity:tn.error})})}function o(s,a,l){if(typeof s!="object"){e.push({path:[l,a,"properties"],message:"must be object",severity:tn.error});return}Object.entries(s).forEach(u=>{typeof u[0]!="string"&&e.push({path:[l,a,"properties",u[0]],message:"key must be string",severity:tn.error}),u[1].constructor===String||u[1].constructor===Number||u[1].constructor===Boolean||u[1].constructor===Array||e.push({path:[l,a,"properties",u[0]],message:"must be string, number, boolean, array",severity:tn.error})})}return"nodes"in n?Array.isArray(n.nodes)?n.nodes.forEach((s,a)=>{if(typeof s!="object"){e.push({path:["nodes",a],message:"must be object",severity:tn.error});return}"id"in s?typeof s.id!="string"?e.push({path:["nodes",a,"id"],message:"must be string",severity:tn.error}):t.includes(s.id)?e.push({path:["nodes",a,"id"],message:"id already exists",severity:tn.error}):t.push(s.id):e.push({path:["nodes",a],message:"must have required property 'id'",severity:tn.error}),"labels"in s&&i(s.labels,a,"nodes"),"properties"in s&&o(s.properties,a,"nodes")}):e.push({path:["nodes"],message:"must be array",severity:tn.error}):e.push({path:[],message:"must have required property 'nodes'",severity:tn.error}),"edges"in n?Array.isArray(n.edges)?n.edges.forEach((s,a)=>{if(typeof s!="object"){e.push({path:["edges",a],message:"must be object",severity:tn.error});return}"id"in s?typeof s.id!="string"?e.push({path:["edges",a,"id"],message:"must be string",severity:tn.error}):r.includes(s.id)?e.push({path:["edges",a,"id"],message:"id already exists",severity:tn.error}):r.push(s.id):e.push({path:["edges",a],message:"must have required property 'id'",severity:tn.error}),"source"in s?typeof s.source!="string"?e.push({path:["edges",a,"source"],message:"must be string",severity:tn.error}):t.includes(s.source)||e.push({path:["edges",a,"source"],message:"must point to a valid node",severity:tn.error}):e.push({path:["edges",a],message:"must have required property 'source'",severity:tn.error}),"target"in s?typeof s.target!="string"?e.push({path:["edges",a,"target"],message:"must be string",severity:tn.error}):t.includes(s.target)||e.push({path:["edges",a,"target"],message:"must point to a valid node",severity:tn.error}):e.push({path:["edges",a],message:"must have required property 'target'",severity:tn.error}),"labels"in s&&i(s.labels,a,"edges"),"properties"in s&&o(s.properties,a,"edges")}):e.push({path:["edges"],message:"must be array",severity:tn.error}):e.push({path:[],message:"must have required property 'nodes'",severity:tn.error}),e}const WQ={type:"array",items:{$ref:"workloadElement"}},KQ={workloadElement:{type:"object",additionalProperties:!1,properties:{label:{type:"string"},occurence:{type:"number",minimum:0,maximum:1}},required:["label","occurence"],title:"workloadElement"}},GQ=vK(WQ,KQ);function YQ(n,e="schema.json"){const t=new Blob([n],{type:"application/json"}),r=new File([t],e),i=document.createElement("a"),o=URL.createObjectURL(r);i.href=o,i.download=r.name,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o)}var rh={},Xs={exports:{}};(function(n){function e(t){return t&&t.__esModule?t:{default:t}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports})(Xs);var P3={},fm={exports:{}},D2;function $u(){return D2||(D2=1,function(n){function e(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(fm)),fm.exports}var hm={exports:{}},j2;function ec(){return j2||(j2=1,function(n){function e(r,i){for(var o=0;o<i.length;o++){var s=i[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,s.key,s)}}function t(r,i,o){return i&&e(r.prototype,i),o&&e(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(hm)),hm.exports}var dm={exports:{}},pm={exports:{}},L2;function JQ(){return L2||(L2=1,function(n){function e(t,r){return n.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,s){return o.__proto__=s,o},n.exports.__esModule=!0,n.exports.default=n.exports,e(t,r)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(pm)),pm.exports}var B2;function QQ(){return B2||(B2=1,function(n){var e=JQ();function t(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(i&&i.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),i&&e(r,i)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(dm)),dm.exports}var mm={exports:{}},gm={exports:{}},F2;function ZQ(){return F2||(F2=1,function(n){function e(t){return n.exports=e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},n.exports.__esModule=!0,n.exports.default=n.exports,e(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(gm)),gm.exports}var vm={exports:{}},U2;function XQ(){return U2||(U2=1,function(n){function e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(vm)),vm.exports}var V2;function $Q(){return V2||(V2=1,function(n){var e=ZQ().default,t=XQ();function r(i,o){if(o&&(e(o)==="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t(i)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports}(mm)),mm.exports}var ym={exports:{}},q2;function eZ(){return q2||(q2=1,function(n){function e(t){return n.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},n.exports.__esModule=!0,n.exports.default=n.exports,e(t)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(ym)),ym.exports}var _m={},Lr={},H2;function ni(){if(H2)return Lr;H2=1;var n=oe&&oe.__extends||function(){var a=function(l,u){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,c){f.__proto__=c}||function(f,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(f[d]=c[d])},a(l,u)};return function(l,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");a(l,u);function f(){this.constructor=l}l.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}();Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.PROTOCOL_ERROR=Lr.SESSION_EXPIRED=Lr.SERVICE_UNAVAILABLE=Lr.Neo4jError=Lr.newError=void 0;var e="ServiceUnavailable";Lr.SERVICE_UNAVAILABLE=e;var t="SessionExpired";Lr.SESSION_EXPIRED=t;var r="ProtocolError";Lr.PROTOCOL_ERROR=r;var i="N/A",o=function(a){n(l,a);function l(u,f){var c=a.call(this,u)||this;return c.constructor=l,c.__proto__=l.prototype,c.code=f,c.name="Neo4jError",c}return l}(Error);Lr.Neo4jError=o;function s(a,l){return new o(a,l!=null?l:i)}return Lr.newError=s,Lr}var kr={},z2;function sl(){if(z2)return kr;z2=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.toString=kr.toNumber=kr.inSafeRange=kr.isInt=kr.int=void 0;var n=ni(),e=new Map,t=function(){function h(v,m){this.low=v||0,this.high=m||0}return h.prototype.inSafeRange=function(){return this.greaterThanOrEqual(h.MIN_SAFE_VALUE)&&this.lessThanOrEqual(h.MAX_SAFE_VALUE)},h.prototype.toInt=function(){return this.low},h.prototype.toNumber=function(){return this.high*o+(this.low>>>0)},h.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(o)+BigInt(this.low>>>0);var v=this.negate();return BigInt(-1)*(BigInt(v.high>>>0)*BigInt(o)+BigInt(v.low>>>0))},h.prototype.toNumberOrInfinity=function(){return this.lessThan(h.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(h.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},h.prototype.toString=function(v){if(v=v||10,v<2||v>36)throw RangeError("radix out of range: "+v);if(this.isZero())return"0";var m;if(this.isNegative())if(this.equals(h.MIN_VALUE)){var p=h.fromNumber(v),y=this.div(p);return m=y.multiply(p).subtract(this),y.toString(v)+m.toInt().toString(v)}else return"-"+this.negate().toString(v);var b=h.fromNumber(Math.pow(v,6));m=this;for(var _="";;){var w=m.div(b),S=m.subtract(w.multiply(b)).toInt()>>>0,E=S.toString(v);if(m=w,m.isZero())return E+_;for(;E.length<6;)E="0"+E;_=""+E+_}},h.prototype.getHighBits=function(){return this.high},h.prototype.getLowBits=function(){return this.low},h.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(h.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var v=this.high!==0?this.high:this.low,m=31;m>0&&(v&1<<m)===0;m--);return this.high!==0?m+33:m+1},h.prototype.isZero=function(){return this.high===0&&this.low===0},h.prototype.isNegative=function(){return this.high<0},h.prototype.isPositive=function(){return this.high>=0},h.prototype.isOdd=function(){return(this.low&1)===1},h.prototype.isEven=function(){return(this.low&1)===0},h.prototype.equals=function(v){var m=h.fromValue(v);return this.high===m.high&&this.low===m.low},h.prototype.notEquals=function(v){return!this.equals(v)},h.prototype.lessThan=function(v){return this.compare(v)<0},h.prototype.lessThanOrEqual=function(v){return this.compare(v)<=0},h.prototype.greaterThan=function(v){return this.compare(v)>0},h.prototype.greaterThanOrEqual=function(v){return this.compare(v)>=0},h.prototype.compare=function(v){var m=h.fromValue(v);if(this.equals(m))return 0;var p=this.isNegative(),y=m.isNegative();return p&&!y?-1:!p&&y?1:this.subtract(m).isNegative()?-1:1},h.prototype.negate=function(){return this.equals(h.MIN_VALUE)?h.MIN_VALUE:this.not().add(h.ONE)},h.prototype.add=function(v){var m=h.fromValue(v),p=this.high>>>16,y=this.high&65535,b=this.low>>>16,_=this.low&65535,w=m.high>>>16,S=m.high&65535,E=m.low>>>16,P=m.low&65535,R=0,j=0,U=0,F=0;return F+=_+P,U+=F>>>16,F&=65535,U+=b+E,j+=U>>>16,U&=65535,j+=y+S,R+=j>>>16,j&=65535,R+=p+w,R&=65535,h.fromBits(U<<16|F,R<<16|j)},h.prototype.subtract=function(v){var m=h.fromValue(v);return this.add(m.negate())},h.prototype.multiply=function(v){if(this.isZero())return h.ZERO;var m=h.fromValue(v);if(m.isZero())return h.ZERO;if(this.equals(h.MIN_VALUE))return m.isOdd()?h.MIN_VALUE:h.ZERO;if(m.equals(h.MIN_VALUE))return this.isOdd()?h.MIN_VALUE:h.ZERO;if(this.isNegative())return m.isNegative()?this.negate().multiply(m.negate()):this.negate().multiply(m).negate();if(m.isNegative())return this.multiply(m.negate()).negate();if(this.lessThan(l)&&m.lessThan(l))return h.fromNumber(this.toNumber()*m.toNumber());var p=this.high>>>16,y=this.high&65535,b=this.low>>>16,_=this.low&65535,w=m.high>>>16,S=m.high&65535,E=m.low>>>16,P=m.low&65535,R=0,j=0,U=0,F=0;return F+=_*P,U+=F>>>16,F&=65535,U+=b*P,j+=U>>>16,U&=65535,U+=_*E,j+=U>>>16,U&=65535,j+=y*P,R+=j>>>16,j&=65535,j+=b*E,R+=j>>>16,j&=65535,j+=_*S,R+=j>>>16,j&=65535,R+=p*P+y*E+b*S+_*w,R&=65535,h.fromBits(U<<16|F,R<<16|j)},h.prototype.div=function(v){var m=h.fromValue(v);if(m.isZero())throw(0,n.newError)("division by zero");if(this.isZero())return h.ZERO;var p,y,b;if(this.equals(h.MIN_VALUE)){if(m.equals(h.ONE)||m.equals(h.NEG_ONE))return h.MIN_VALUE;if(m.equals(h.MIN_VALUE))return h.ONE;var _=this.shiftRight(1);return p=_.div(m).shiftLeft(1),p.equals(h.ZERO)?m.isNegative()?h.ONE:h.NEG_ONE:(y=this.subtract(m.multiply(p)),b=p.add(y.div(m)),b)}else if(m.equals(h.MIN_VALUE))return h.ZERO;if(this.isNegative())return m.isNegative()?this.negate().div(m.negate()):this.negate().div(m).negate();if(m.isNegative())return this.div(m.negate()).negate();for(b=h.ZERO,y=this;y.greaterThanOrEqual(m);){p=Math.max(1,Math.floor(y.toNumber()/m.toNumber()));for(var w=Math.ceil(Math.log(p)/Math.LN2),S=w<=48?1:Math.pow(2,w-48),E=h.fromNumber(p),P=E.multiply(m);P.isNegative()||P.greaterThan(y);)p-=S,E=h.fromNumber(p),P=E.multiply(m);E.isZero()&&(E=h.ONE),b=b.add(E),y=y.subtract(P)}return b},h.prototype.modulo=function(v){var m=h.fromValue(v);return this.subtract(this.div(m).multiply(m))},h.prototype.not=function(){return h.fromBits(~this.low,~this.high)},h.prototype.and=function(v){var m=h.fromValue(v);return h.fromBits(this.low&m.low,this.high&m.high)},h.prototype.or=function(v){var m=h.fromValue(v);return h.fromBits(this.low|m.low,this.high|m.high)},h.prototype.xor=function(v){var m=h.fromValue(v);return h.fromBits(this.low^m.low,this.high^m.high)},h.prototype.shiftLeft=function(v){var m=h.toNumber(v);return(m&=63)===0?h.ZERO:m<32?h.fromBits(this.low<<m,this.high<<m|this.low>>>32-m):h.fromBits(0,this.low<<m-32)},h.prototype.shiftRight=function(v){var m=h.toNumber(v);return(m&=63)===0?h.ZERO:v<32?h.fromBits(this.low>>>m|this.high<<32-m,this.high>>m):h.fromBits(this.high>>m-32,this.high>=0?0:-1)},h.isInteger=function(v){return(v&&v.__isInteger__)===!0},h.fromInt=function(v){var m,p;return v=v|0,v>=-128&&v<128&&(p=e.get(v),p)?p:(m=new h(v,v<0?-1:0),v>=-128&&v<128&&e.set(v,m),m)},h.fromBits=function(v,m){return new h(v,m)},h.fromNumber=function(v){return isNaN(v)||!isFinite(v)?h.ZERO:v<=-a?h.MIN_VALUE:v+1>=a?h.MAX_VALUE:v<0?h.fromNumber(-v).negate():new h(v%o|0,v/o|0)},h.fromString=function(v,m){if(v.length===0)throw(0,n.newError)("number format error: empty string");if(v==="NaN"||v==="Infinity"||v==="+Infinity"||v==="-Infinity")return h.ZERO;if(m=m||10,m<2||m>36)throw(0,n.newError)("radix out of range: "+m);var p;if((p=v.indexOf("-"))>0)throw(0,n.newError)('number format error: interior "-" character: '+v);if(p===0)return h.fromString(v.substring(1),m).negate();for(var y=h.fromNumber(Math.pow(m,8)),b=h.ZERO,_=0;_<v.length;_+=8){var w=Math.min(8,v.length-_),S=parseInt(v.substring(_,_+w),m);if(w<8){var E=h.fromNumber(Math.pow(m,w));b=b.multiply(E).add(h.fromNumber(S))}else b=b.multiply(y),b=b.add(h.fromNumber(S))}return b},h.fromValue=function(v){return v instanceof h?v:typeof v=="number"?h.fromNumber(v):typeof v=="string"?h.fromString(v):typeof v=="bigint"?h.fromString(v.toString()):new h(v.low,v.high)},h.toNumber=function(v){switch(typeof v){case"number":return v;case"bigint":return Number(v);default:return h.fromValue(v).toNumber()}},h.toString=function(v,m){return h.fromValue(v).toString(m)},h.inSafeRange=function(v){return h.fromValue(v).inSafeRange()},h.ZERO=h.fromInt(0),h.ONE=h.fromInt(1),h.NEG_ONE=h.fromInt(-1),h.MAX_VALUE=h.fromBits(-1,2147483647),h.MIN_VALUE=h.fromBits(0,-2147483648),h.MIN_SAFE_VALUE=h.fromBits(1,-2097152),h.MAX_SAFE_VALUE=h.fromBits(-1,2097151),h.__isInteger__=!0,h}();Object.defineProperty(t.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var r=1<<16,i=1<<24,o=r*r,s=o*o,a=s/2,l=t.fromInt(i),u=t.fromValue;kr.int=u;var f=t.isInteger;kr.isInt=f;var c=t.inSafeRange;kr.inSafeRange=c;var d=t.toNumber;kr.toNumber=d;var g=t.toString;return kr.toString=g,kr.default=t,kr}var sn={},bm={},an={},wl={},W2;function oy(){if(W2)return wl;W2=1,Object.defineProperty(wl,"__esModule",{value:!0}),wl.stringify=void 0;function n(e){return JSON.stringify(e,function(t,r){return typeof r=="bigint"?r+"n":r})}return wl.stringify=n,wl}var K2;function hi(){if(K2)return an;K2=1,Object.defineProperty(an,"__esModule",{value:!0}),an.createBrokenObject=an.ENCRYPTION_OFF=an.ENCRYPTION_ON=an.validateQueryAndParameters=an.assertValidDate=an.assertNumberOrInteger=an.assertNumber=an.assertString=an.assertObject=an.isString=an.isObject=an.isEmptyObjectOrNull=void 0;var n=sl(),e=oy(),t="ENCRYPTION_ON";an.ENCRYPTION_ON=t;var r="ENCRYPTION_OFF";an.ENCRYPTION_OFF=r;function i(m){if(m===null)return!0;if(!o(m))return!1;for(var p in m)if(Object.prototype.hasOwnProperty.bind(m,p))return!1;return!0}an.isEmptyObjectOrNull=i;function o(m){return typeof m=="object"&&!Array.isArray(m)&&m!==null}an.isObject=o;function s(m,p,y){var b="",_=p||{},w=(y==null?void 0:y.skipAsserts)||!1;return typeof m=="string"?b=m:m instanceof String?b=m.toString():typeof m=="object"&&m.text&&(b=m.text,_=m.parameters||{}),w||(d(b),g(_)),{validatedQuery:b,params:_}}an.validateQueryAndParameters=s;function a(m,p){if(!o(m))throw new TypeError(p+" expected to be an object but was: "+(0,e.stringify)(m));return m}an.assertObject=a;function l(m,p){if(!h(m))throw new TypeError(p+" expected to be string but was: "+(0,e.stringify)(m));return m}an.assertString=l;function u(m,p){if(typeof m!="number")throw new TypeError(p+" expected to be a number but was: "+(0,e.stringify)(m));return m}an.assertNumber=u;function f(m,p){if(typeof m!="number"&&typeof m!="bigint"&&!(0,n.isInt)(m))throw new TypeError(p+" expected to be either a number or an Integer object but was: "+(0,e.stringify)(m));return m}an.assertNumberOrInteger=f;function c(m,p){if(Object.prototype.toString.call(m)!=="[object Date]")throw new TypeError(p+" expected to be a standard JavaScript Date but was: "+(0,e.stringify)(m));if(Number.isNaN(m.getTime()))throw new TypeError(p+" expected to be valid JavaScript Date but its time was NaN: "+(0,e.stringify)(m));return m}an.assertValidDate=c;function d(m){if(l(m,"Cypher query"),m.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}function g(m){if(!o(m)){var p=m.constructor?" "+m.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:"+p+" "+m)}}function h(m){return Object.prototype.toString.call(m)==="[object String]"}an.isString=h;function v(m,p){p===void 0&&(p={});var y=function(){throw m};return new Proxy(p,{get:y,set:y,apply:y,construct:y,defineProperty:y,deleteProperty:y,getOwnPropertyDescriptor:y,getPrototypeOf:y,has:y,isExtensible:y,ownKeys:y,preventExtensions:y,setPrototypeOf:y})}return an.createBrokenObject=v,an}var G2;function I3(){return G2||(G2=1,function(n){var e=oe&&oe.__createBinding||(Object.create?function(k,V,K,H){H===void 0&&(H=K),Object.defineProperty(k,H,{enumerable:!0,get:function(){return V[K]}})}:function(k,V,K,H){H===void 0&&(H=K),k[H]=V[K]}),t=oe&&oe.__setModuleDefault||(Object.create?function(k,V){Object.defineProperty(k,"default",{enumerable:!0,value:V})}:function(k,V){k.default=V}),r=oe&&oe.__importStar||function(k){if(k&&k.__esModule)return k;var V={};if(k!=null)for(var K in k)K!=="default"&&Object.prototype.hasOwnProperty.call(k,K)&&e(V,k,K);return t(V,k),V};Object.defineProperty(n,"__esModule",{value:!0}),n.floorMod=n.floorDiv=n.assertValidZoneId=n.assertValidNanosecond=n.assertValidSecond=n.assertValidMinute=n.assertValidHour=n.assertValidDay=n.assertValidMonth=n.assertValidYear=n.timeZoneOffsetInSeconds=n.totalNanoseconds=n.dateToIsoString=n.timeZoneOffsetToIsoString=n.timeToIsoString=n.durationToIsoString=n.dateToEpochDay=n.localDateTimeToEpochSecond=n.localTimeToNanoOfDay=n.normalizeNanosecondsForDuration=n.normalizeSecondsForDuration=n.SECONDS_PER_DAY=n.DAYS_PER_400_YEAR_CYCLE=n.DAYS_0000_TO_1970=n.NANOS_PER_HOUR=n.NANOS_PER_MINUTE=n.NANOS_PER_MILLISECOND=n.NANOS_PER_SECOND=n.SECONDS_PER_HOUR=n.SECONDS_PER_MINUTE=n.MINUTES_PER_HOUR=n.NANOSECOND_OF_SECOND_RANGE=n.SECOND_OF_MINUTE_RANGE=n.MINUTE_OF_HOUR_RANGE=n.HOUR_OF_DAY_RANGE=n.DAY_OF_MONTH_RANGE=n.MONTH_OF_YEAR_RANGE=n.YEAR_RANGE=void 0;var i=r(sl()),o=ni(),s=hi(),a=function(){function k(V,K){this._minNumber=V,this._maxNumber=K,this._minInteger=(0,i.int)(V),this._maxInteger=(0,i.int)(K)}return k.prototype.contains=function(V){if((0,i.isInt)(V)&&V instanceof i.default)return V.greaterThanOrEqual(this._minInteger)&&V.lessThanOrEqual(this._maxInteger);if(typeof V=="bigint"){var K=(0,i.int)(V);return K.greaterThanOrEqual(this._minInteger)&&K.lessThanOrEqual(this._maxInteger)}else return V>=this._minNumber&&V<=this._maxNumber},k.prototype.toString=function(){return"["+this._minNumber+", "+this._maxNumber+"]"},k}();n.YEAR_RANGE=new a(-999999999,999999999),n.MONTH_OF_YEAR_RANGE=new a(1,12),n.DAY_OF_MONTH_RANGE=new a(1,31),n.HOUR_OF_DAY_RANGE=new a(0,23),n.MINUTE_OF_HOUR_RANGE=new a(0,59),n.SECOND_OF_MINUTE_RANGE=new a(0,59),n.NANOSECOND_OF_SECOND_RANGE=new a(0,999999999),n.MINUTES_PER_HOUR=60,n.SECONDS_PER_MINUTE=60,n.SECONDS_PER_HOUR=n.SECONDS_PER_MINUTE*n.MINUTES_PER_HOUR,n.NANOS_PER_SECOND=1e9,n.NANOS_PER_MILLISECOND=1e6,n.NANOS_PER_MINUTE=n.NANOS_PER_SECOND*n.SECONDS_PER_MINUTE,n.NANOS_PER_HOUR=n.NANOS_PER_MINUTE*n.MINUTES_PER_HOUR,n.DAYS_0000_TO_1970=719528,n.DAYS_PER_400_YEAR_CYCLE=146097,n.SECONDS_PER_DAY=86400;function l(k,V){return(0,i.int)(k).add(D(V,n.NANOS_PER_SECOND))}n.normalizeSecondsForDuration=l;function u(k){return N(k,n.NANOS_PER_SECOND)}n.normalizeNanosecondsForDuration=u;function f(k,V,K,H){k=(0,i.int)(k),V=(0,i.int)(V),K=(0,i.int)(K),H=(0,i.int)(H);var I=k.multiply(n.NANOS_PER_HOUR);return I=I.add(V.multiply(n.NANOS_PER_MINUTE)),I=I.add(K.multiply(n.NANOS_PER_SECOND)),I.add(H)}n.localTimeToNanoOfDay=f;function c(k,V,K,H,I,M,G){var q=d(k,V,K),W=F(H,I,M);return q.multiply(n.SECONDS_PER_DAY).add(W)}n.localDateTimeToEpochSecond=c;function d(k,V,K){k=(0,i.int)(k),V=(0,i.int)(V),K=(0,i.int)(K);var H=k.multiply(365);return k.greaterThanOrEqual(0)?H=H.add(k.add(3).div(4).subtract(k.add(99).div(100)).add(k.add(399).div(400))):H=H.subtract(k.div(-4).subtract(k.div(-100)).add(k.div(-400))),H=H.add(V.multiply(367).subtract(362).div(12)),H=H.add(K.subtract(1)),V.greaterThan(2)&&(H=H.subtract(1),z(k)||(H=H.subtract(1))),H.subtract(n.DAYS_0000_TO_1970)}n.dateToEpochDay=d;function g(k,V,K,H){var I=Q(k),M=Q(V),G=L(K,H);return"P"+I+"M"+M+"DT"+G+"S"}n.durationToIsoString=g;function h(k,V,K,H){var I=Q(k,2),M=Q(V,2),G=Q(K,2),q=X(H);return I+":"+M+":"+G+q}n.timeToIsoString=h;function v(k){if(k=(0,i.int)(k),k.equals(0))return"Z";var V=k.isNegative();V&&(k=k.multiply(-1));var K=V?"-":"+",H=Q(k.div(n.SECONDS_PER_HOUR),2),I=Q(k.div(n.SECONDS_PER_MINUTE).modulo(n.MINUTES_PER_HOUR),2),M=k.modulo(n.SECONDS_PER_MINUTE),G=M.equals(0)?null:Q(M,2);return G?""+K+H+":"+I+":"+G:""+K+H+":"+I}n.timeZoneOffsetToIsoString=v;function m(k,V,K){k=(0,i.int)(k);var H=k.isNegative();H&&(k=k.multiply(-1));var I=Q(k,4);H&&(I="-"+I);var M=Q(V,2),G=Q(K,2);return I+"-"+M+"-"+G}n.dateToIsoString=m;function p(k,V){V=V||0;var K=k.getMilliseconds()*n.NANOS_PER_MILLISECOND;return A(V,K)}n.totalNanoseconds=p;function y(k){var V=k.getTimezoneOffset();return V===0?0:-1*V*n.SECONDS_PER_MINUTE}n.timeZoneOffsetInSeconds=y;function b(k){return U(k,n.YEAR_RANGE,"Year")}n.assertValidYear=b;function _(k){return U(k,n.MONTH_OF_YEAR_RANGE,"Month")}n.assertValidMonth=_;function w(k){return U(k,n.DAY_OF_MONTH_RANGE,"Day")}n.assertValidDay=w;function S(k){return U(k,n.HOUR_OF_DAY_RANGE,"Hour")}n.assertValidHour=S;function E(k){return U(k,n.MINUTE_OF_HOUR_RANGE,"Minute")}n.assertValidMinute=E;function P(k){return U(k,n.SECOND_OF_MINUTE_RANGE,"Second")}n.assertValidSecond=P;function R(k){return U(k,n.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")}n.assertValidNanosecond=R;function j(k,V){try{Intl.DateTimeFormat(void 0,{timeZone:V})}catch{throw(0,o.newError)(k+' is expected to be a valid ZoneId but was: "'+V+'"')}}n.assertValidZoneId=j;function U(k,V,K){if((0,s.assertNumberOrInteger)(k,K),!V.contains(k))throw(0,o.newError)(K+" is expected to be in range "+V+" but was: "+k);return k}function F(k,V,K){k=(0,i.int)(k),V=(0,i.int)(V),K=(0,i.int)(K);var H=k.multiply(n.SECONDS_PER_HOUR);return H=H.add(V.multiply(n.SECONDS_PER_MINUTE)),H.add(K)}function z(k){return k=(0,i.int)(k),k.modulo(4).equals(0)?k.modulo(100).equals(0)?!!k.modulo(400).equals(0):!0:!1}function D(k,V){k=(0,i.int)(k),V=(0,i.int)(V);var K=k.div(V);return k.isPositive()!==V.isPositive()&&K.multiply(V).notEquals(k)&&(K=K.subtract(1)),K}n.floorDiv=D;function N(k,V){return k=(0,i.int)(k),V=(0,i.int)(V),k.subtract(D(k,V).multiply(V))}n.floorMod=N;function L(k,V){k=(0,i.int)(k),V=(0,i.int)(V);var K,H,I=k.isNegative(),M=V.greaterThan(0);return I&&M?k.equals(-1)?K="-0":K=k.add(1).toString():K=k.toString(),M&&(I?H=X(V.negate().add(2*n.NANOS_PER_SECOND).modulo(n.NANOS_PER_SECOND)):H=X(V.add(n.NANOS_PER_SECOND).modulo(n.NANOS_PER_SECOND))),H?K+H:K}function X(k){return k=(0,i.int)(k),k.equals(0)?"":"."+Q(k,9)}function Q(k,V){k=(0,i.int)(k);var K=k.isNegative();K&&(k=k.negate());var H=k.toString();if(V)for(;H.length<V;)H="0"+H;return K?"-"+H:H}function A(k,V){return k instanceof i.default?k.add(V):typeof k=="bigint"?k+BigInt(V):k+V}}(bm)),bm}var Y2;function tZ(){if(Y2)return sn;Y2=1;var n=oe&&oe.__createBinding||(Object.create?function(N,L,X,Q){Q===void 0&&(Q=X),Object.defineProperty(N,Q,{enumerable:!0,get:function(){return L[X]}})}:function(N,L,X,Q){Q===void 0&&(Q=X),N[Q]=L[X]}),e=oe&&oe.__setModuleDefault||(Object.create?function(N,L){Object.defineProperty(N,"default",{enumerable:!0,value:L})}:function(N,L){N.default=L}),t=oe&&oe.__importStar||function(N){if(N&&N.__esModule)return N;var L={};if(N!=null)for(var X in N)X!=="default"&&Object.prototype.hasOwnProperty.call(N,X)&&n(L,N,X);return e(L,N),L},r=oe&&oe.__read||function(N,L){var X=typeof Symbol=="function"&&N[Symbol.iterator];if(!X)return N;var Q=X.call(N),A,k=[],V;try{for(;(L===void 0||L-- >0)&&!(A=Q.next()).done;)k.push(A.value)}catch(K){V={error:K}}finally{try{A&&!A.done&&(X=Q.return)&&X.call(Q)}finally{if(V)throw V.error}}return k};Object.defineProperty(sn,"__esModule",{value:!0}),sn.isDateTime=sn.DateTime=sn.isLocalDateTime=sn.LocalDateTime=sn.isDate=sn.Date=sn.isTime=sn.Time=sn.isLocalTime=sn.LocalTime=sn.isDuration=sn.Duration=void 0;var i=t(I3()),o=hi(),s=ni(),a=t(sl()),l={value:!0,enumerable:!1,configurable:!1,writable:!1},u="__isDuration__",f="__isLocalTime__",c="__isTime__",d="__isDate__",g="__isLocalDateTime__",h="__isDateTime__",v=function(){function N(L,X,Q,A){this.months=(0,o.assertNumberOrInteger)(L,"Months"),this.days=(0,o.assertNumberOrInteger)(X,"Days"),(0,o.assertNumberOrInteger)(Q,"Seconds"),(0,o.assertNumberOrInteger)(A,"Nanoseconds"),this.seconds=i.normalizeSecondsForDuration(Q,A),this.nanoseconds=i.normalizeNanosecondsForDuration(A),Object.freeze(this)}return N.prototype.toString=function(){return i.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},N}();sn.Duration=v,Object.defineProperty(v.prototype,u,l);function m(N){return U(N,u)}sn.isDuration=m;var p=function(){function N(L,X,Q,A){this.hour=i.assertValidHour(L),this.minute=i.assertValidMinute(X),this.second=i.assertValidSecond(Q),this.nanosecond=i.assertValidNanosecond(A),Object.freeze(this)}return N.fromStandardDate=function(L,X){D(L,X);var Q=i.totalNanoseconds(L,X);return new N(L.getHours(),L.getMinutes(),L.getSeconds(),Q instanceof a.default?Q.toInt():typeof Q=="bigint"?(0,a.int)(Q).toInt():Q)},N.prototype.toString=function(){return i.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},N}();sn.LocalTime=p,Object.defineProperty(p.prototype,f,l);function y(N){return U(N,f)}sn.isLocalTime=y;var b=function(){function N(L,X,Q,A,k){this.hour=i.assertValidHour(L),this.minute=i.assertValidMinute(X),this.second=i.assertValidSecond(Q),this.nanosecond=i.assertValidNanosecond(A),this.timeZoneOffsetSeconds=(0,o.assertNumberOrInteger)(k,"Time zone offset in seconds"),Object.freeze(this)}return N.fromStandardDate=function(L,X){return D(L,X),new N(L.getHours(),L.getMinutes(),L.getSeconds(),(0,a.toNumber)(i.totalNanoseconds(L,X)),i.timeZoneOffsetInSeconds(L))},N.prototype.toString=function(){return i.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+i.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},N}();sn.Time=b,Object.defineProperty(b.prototype,c,l);function _(N){return U(N,c)}sn.isTime=_;var w=function(){function N(L,X,Q){this.year=i.assertValidYear(L),this.month=i.assertValidMonth(X),this.day=i.assertValidDay(Q),Object.freeze(this)}return N.fromStandardDate=function(L){return D(L),new N(L.getFullYear(),L.getMonth()+1,L.getDate())},N.prototype.toString=function(){return i.dateToIsoString(this.year,this.month,this.day)},N}();sn.Date=w,Object.defineProperty(w.prototype,d,l);function S(N){return U(N,d)}sn.isDate=S;var E=function(){function N(L,X,Q,A,k,V,K){this.year=i.assertValidYear(L),this.month=i.assertValidMonth(X),this.day=i.assertValidDay(Q),this.hour=i.assertValidHour(A),this.minute=i.assertValidMinute(k),this.second=i.assertValidSecond(V),this.nanosecond=i.assertValidNanosecond(K),Object.freeze(this)}return N.fromStandardDate=function(L,X){return D(L,X),new N(L.getFullYear(),L.getMonth()+1,L.getDate(),L.getHours(),L.getMinutes(),L.getSeconds(),(0,a.toNumber)(i.totalNanoseconds(L,X)))},N.prototype.toString=function(){return F(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},N}();sn.LocalDateTime=E,Object.defineProperty(E.prototype,g,l);function P(N){return U(N,g)}sn.isLocalDateTime=P;var R=function(){function N(L,X,Q,A,k,V,K,H,I){this.year=i.assertValidYear(L),this.month=i.assertValidMonth(X),this.day=i.assertValidDay(Q),this.hour=i.assertValidHour(A),this.minute=i.assertValidMinute(k),this.second=i.assertValidSecond(V),this.nanosecond=i.assertValidNanosecond(K);var M=r(z(H,I),2),G=M[0],q=M[1];this.timeZoneOffsetSeconds=G,this.timeZoneId=q||void 0,Object.freeze(this)}return N.fromStandardDate=function(L,X){return D(L,X),new N(L.getFullYear(),L.getMonth()+1,L.getDate(),L.getHours(),L.getMinutes(),L.getSeconds(),(0,a.toNumber)(i.totalNanoseconds(L,X)),i.timeZoneOffsetInSeconds(L),null)},N.prototype.toString=function(){var L=F(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond),X=this.timeZoneId?"["+this.timeZoneId+"]":i.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds||0);return L+X},N}();sn.DateTime=R,Object.defineProperty(R.prototype,h,l);function j(N){return U(N,h)}sn.isDateTime=j;function U(N,L){return(N&&N[L])===!0}function F(N,L,X,Q,A,k,V){return i.dateToIsoString(N,L,X)+"T"+i.timeToIsoString(Q,A,k,V)}function z(N,L){var X=N||N===0,Q=L&&L!=="";if(!X&&!Q)throw(0,s.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: "+N+" and id: "+L);var A=[void 0,void 0];return X&&((0,o.assertNumberOrInteger)(N,"Time zone offset in seconds"),A[0]=N),Q&&((0,o.assertString)(L,"Time zone ID"),i.assertValidZoneId("Time zone ID",L),A[1]=L),A}function D(N,L){(0,o.assertValidDate)(N,"Standard date"),L!=null&&(0,o.assertNumberOrInteger)(L,"Nanosecond")}return sn}var bn={},J2;function nZ(){if(J2)return bn;J2=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.isPathSegment=bn.PathSegment=bn.isPath=bn.Path=bn.isUnboundRelationship=bn.UnboundRelationship=bn.isRelationship=bn.Relationship=bn.isNode=bn.Node=void 0;var n=oy(),e={value:!0,enumerable:!1,configurable:!1,writable:!1},t="__isNode__",r="__isRelationship__",i="__isUnboundRelationship__",o="__isPath__",s="__isPathSegment__";function a(y,b){return(y&&y[b])===!0}var l=function(){function y(b,_,w){this.identity=b,this.labels=_,this.properties=w}return y.prototype.toString=function(){for(var b="("+this.identity,_=0;_<this.labels.length;_++)b+=":"+this.labels[_];var w=Object.keys(this.properties);if(w.length>0){b+=" {";for(var _=0;_<w.length;_++)_>0&&(b+=","),b+=w[_]+":"+(0,n.stringify)(this.properties[w[_]]);b+="}"}return b+=")",b},y}();bn.Node=l,Object.defineProperty(l.prototype,t,e);function u(y){return a(y,t)}bn.isNode=u;var f=function(){function y(b,_,w,S,E){this.identity=b,this.start=_,this.end=w,this.type=S,this.properties=E}return y.prototype.toString=function(){var b="("+this.start+")-[:"+this.type,_=Object.keys(this.properties);if(_.length>0){b+=" {";for(var w=0;w<_.length;w++)w>0&&(b+=","),b+=_[w]+":"+(0,n.stringify)(this.properties[_[w]]);b+="}"}return b+="]->("+this.end+")",b},y}();bn.Relationship=f,Object.defineProperty(f.prototype,r,e);function c(y){return a(y,r)}bn.isRelationship=c;var d=function(){function y(b,_,w){this.identity=b,this.type=_,this.properties=w}return y.prototype.bind=function(b,_){return new f(this.identity,b,_,this.type,this.properties)},y.prototype.toString=function(){var b="-[:"+this.type,_=Object.keys(this.properties);if(_.length>0){b+=" {";for(var w=0;w<_.length;w++)w>0&&(b+=","),b+=_[w]+":"+(0,n.stringify)(this.properties[_[w]]);b+="}"}return b+="]->",b},y}();bn.UnboundRelationship=d,Object.defineProperty(d.prototype,i,e);function g(y){return a(y,i)}bn.isUnboundRelationship=g;var h=function(){function y(b,_,w){this.start=b,this.relationship=_,this.end=w}return y}();bn.PathSegment=h,Object.defineProperty(h.prototype,s,e);function v(y){return a(y,s)}bn.isPathSegment=v;var m=function(){function y(b,_,w){this.start=b,this.end=_,this.segments=w,this.length=w.length}return y}();bn.Path=m,Object.defineProperty(m.prototype,o,e);function p(y){return a(y,o)}return bn.isPath=p,bn}var Yc={},Q2;function rZ(){if(Q2)return Yc;Q2=1;var n=oe&&oe.__generator||function(s,a){var l={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},u,f,c,d;return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(v){return function(m){return h([v,m])}}function h(v){if(u)throw new TypeError("Generator is already executing.");for(;l;)try{if(u=1,f&&(c=v[0]&2?f.return:v[0]?f.throw||((c=f.return)&&c.call(f),0):f.next)&&!(c=c.call(f,v[1])).done)return c;switch(f=0,c&&(v=[v[0]&2,c.value]),v[0]){case 0:case 1:c=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,f=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(c=l.trys,!(c=c.length>0&&c[c.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!c||v[1]>c[0]&&v[1]<c[3])){l.label=v[1];break}if(v[0]===6&&l.label<c[1]){l.label=c[1],c=v;break}if(c&&l.label<c[2]){l.label=c[2],l.ops.push(v);break}c[2]&&l.ops.pop(),l.trys.pop();continue}v=a.call(s,l)}catch(m){v=[6,m],f=0}finally{u=c=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}},e=oe&&oe.__values||function(s){var a=typeof Symbol=="function"&&Symbol.iterator,l=a&&s[a],u=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&u>=s.length&&(s=void 0),{value:s&&s[u++],done:!s}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")},t=oe&&oe.__read||function(s,a){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var u=l.call(s),f,c=[],d;try{for(;(a===void 0||a-- >0)&&!(f=u.next()).done;)c.push(f.value)}catch(g){d={error:g}}finally{try{f&&!f.done&&(l=u.return)&&l.call(u)}finally{if(d)throw d.error}}return c};Object.defineProperty(Yc,"__esModule",{value:!0});var r=ni();function i(s){var a={};return s.forEach(function(l,u){a[l]=u}),a}var o=function(){function s(a,l,u){this.keys=a,this.length=a.length,this._fields=l,this._fieldLookup=u||i(a)}return s.prototype.forEach=function(a){var l,u;try{for(var f=e(this.entries()),c=f.next();!c.done;c=f.next()){var d=t(c.value,2),g=d[0],h=d[1];a(h,g,this)}}catch(v){l={error:v}}finally{try{c&&!c.done&&(u=f.return)&&u.call(f)}finally{if(l)throw l.error}}},s.prototype.map=function(a){var l,u,f=[];try{for(var c=e(this.entries()),d=c.next();!d.done;d=c.next()){var g=t(d.value,2),h=g[0],v=g[1];f.push(a(v,h,this))}}catch(m){l={error:m}}finally{try{d&&!d.done&&(u=c.return)&&u.call(c)}finally{if(l)throw l.error}}return f},s.prototype.entries=function(){var a;return n(this,function(l){switch(l.label){case 0:a=0,l.label=1;case 1:return a<this.keys.length?[4,[this.keys[a],this._fields[a]]]:[3,4];case 2:l.sent(),l.label=3;case 3:return a++,[3,1];case 4:return[2]}})},s.prototype.values=function(){var a;return n(this,function(l){switch(l.label){case 0:a=0,l.label=1;case 1:return a<this.keys.length?[4,this._fields[a]]:[3,4];case 2:l.sent(),l.label=3;case 3:return a++,[3,1];case 4:return[2]}})},s.prototype[Symbol.iterator]=function(){var a;return n(this,function(l){switch(l.label){case 0:a=0,l.label=1;case 1:return a<this.keys.length?[4,this._fields[a]]:[3,4];case 2:l.sent(),l.label=3;case 3:return a++,[3,1];case 4:return[2]}})},s.prototype.toObject=function(){var a,l,u={};try{for(var f=e(this.entries()),c=f.next();!c.done;c=f.next()){var d=t(c.value,2),g=d[0],h=d[1];u[g]=h}}catch(v){a={error:v}}finally{try{c&&!c.done&&(l=f.return)&&l.call(f)}finally{if(a)throw a.error}}return u},s.prototype.get=function(a){var l;if(typeof a!="number"){if(l=this._fieldLookup[a],l===void 0)throw(0,r.newError)("This record has no field with key '"+a+"', available key are: ["+this.keys+"].")}else l=a;if(l>this._fields.length-1||l<0)throw(0,r.newError)("This record has no field with index '"+l+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[l]},s.prototype.has=function(a){return typeof a=="number"?a>=0&&a<this._fields.length:this._fieldLookup[a]!==void 0},s}();return Yc.default=o,Yc}var cs={},Z2;function iZ(){if(Z2)return cs;Z2=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.isPoint=cs.Point=void 0;var n=hi(),e="__isPoint__",t=function(){function o(s,a,l,u){this.srid=(0,n.assertNumberOrInteger)(s,"SRID"),this.x=(0,n.assertNumber)(a,"X coordinate"),this.y=(0,n.assertNumber)(l,"Y coordinate"),this.z=u==null?u:(0,n.assertNumber)(u,"Z coordinate"),Object.freeze(this)}return o.prototype.toString=function(){return this.z||this.z===0?"Point{srid="+r(this.srid)+", x="+r(this.x)+", y="+r(this.y)+", z="+r(this.z)+"}":"Point{srid="+r(this.srid)+", x="+r(this.x)+", y="+r(this.y)+"}"},o}();cs.Point=t;function r(o){return Number.isInteger(o)?o+".0":o.toString()}Object.defineProperty(t.prototype,e,{value:!0,enumerable:!1,configurable:!1,writable:!1});function i(o){return(o&&o[e])===!0}return cs.isPoint=i,cs}var Gn={},X2;function A3(){if(X2)return Gn;X2=1;var n=oe&&oe.__createBinding||(Object.create?function(h,v,m,p){p===void 0&&(p=m),Object.defineProperty(h,p,{enumerable:!0,get:function(){return v[m]}})}:function(h,v,m,p){p===void 0&&(p=m),h[p]=v[m]}),e=oe&&oe.__setModuleDefault||(Object.create?function(h,v){Object.defineProperty(h,"default",{enumerable:!0,value:v})}:function(h,v){h.default=v}),t=oe&&oe.__importStar||function(h){if(h&&h.__esModule)return h;var v={};if(h!=null)for(var m in h)m!=="default"&&Object.prototype.hasOwnProperty.call(h,m)&&n(v,h,m);return e(v,h),v};Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.Stats=Gn.QueryStatistics=Gn.ProfiledPlan=Gn.Plan=Gn.Notification=Gn.ServerInfo=Gn.queryType=void 0;var r=t(sl()),i=function(){function h(v,m,p,y){this.query={text:v,parameters:m},this.queryType=p.type,this.counters=new l(p.stats||{}),this.updateStatistics=this.counters,this.plan=p.plan||p.profile?new o(p.plan||p.profile):!1,this.profile=p.profile?new s(p.profile):!1,this.notifications=this._buildNotifications(p.notifications),this.server=new f(p.server,y),this.resultConsumedAfter=p.result_consumed_after,this.resultAvailableAfter=p.result_available_after,this.database={name:p.db||null}}return h.prototype._buildNotifications=function(v){return v?v.map(function(m){return new u(m)}):[]},h.prototype.hasPlan=function(){return this.plan instanceof o},h.prototype.hasProfile=function(){return this.profile instanceof s},h}(),o=function(){function h(v){this.operatorType=v.operatorType,this.identifiers=v.identifiers,this.arguments=v.args,this.children=v.children?v.children.map(function(m){return new h(m)}):[]}return h}();Gn.Plan=o;var s=function(){function h(v){this.operatorType=v.operatorType,this.identifiers=v.identifiers,this.arguments=v.args,this.dbHits=d("dbHits",v),this.rows=d("rows",v),this.pageCacheMisses=d("pageCacheMisses",v),this.pageCacheHits=d("pageCacheHits",v),this.pageCacheHitRatio=d("pageCacheHitRatio",v),this.time=d("time",v),this.children=v.children?v.children.map(function(m){return new h(m)}):[]}return h.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},h}();Gn.ProfiledPlan=s;var a=function(){function h(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0}return h}();Gn.Stats=a;var l=function(){function h(v){var m=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(v).forEach(function(p){var y=p.replace(/(-\w)/g,function(b){return b[1].toUpperCase()});y in m._stats?m._stats[y]=c(v[p]):y==="systemUpdates"?m._systemUpdates=c(v[p]):y==="containsSystemUpdates"?m._containsSystemUpdates=v[p]:y==="containsUpdates"&&(m._containsUpdates=v[p])}),this._stats=Object.freeze(this._stats)}return h.prototype.containsUpdates=function(){var v=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(m,p){return m+v._stats[p]},0)>0},h.prototype.updates=function(){return this._stats},h.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},h.prototype.systemUpdates=function(){return this._systemUpdates},h}();Gn.QueryStatistics=l;var u=function(){function h(v){this.code=v.code,this.title=v.title,this.description=v.description,this.severity=v.severity,this.position=h._constructPosition(v.position)}return h._constructPosition=function(v){return v?{offset:c(v.offset),line:c(v.line),column:c(v.column)}:{}},h}();Gn.Notification=u;var f=function(){function h(v,m){v&&(this.address=v.address,this.version=v.version,this.agent=v.version),this.protocolVersion=m}return h}();Gn.ServerInfo=f;function c(h){return h instanceof r.default?h.toInt():typeof h=="bigint"?(0,r.int)(h).toInt():h}function d(h,v,m){if(m===void 0&&(m=0),h in v){var p=v[h];return c(p)}else return m}var g={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};return Gn.queryType=g,Gn.default=i,Gn}var Jc={},Gt={},fs={},$2;function sy(){if($2)return fs;$2=1,Object.defineProperty(fs,"__esModule",{value:!0}),fs.FailedObserver=fs.CompletedObserver=void 0;var n=function(){function r(){}return r.prototype.subscribe=function(i){t(i,i.onKeys,[]),t(i,i.onCompleted,{})},r.prototype.cancel=function(){},r.prototype.prepareToHandleSingleResponse=function(){},r.prototype.markCompleted=function(){},r.prototype.onError=function(i){throw Error("CompletedObserver not supposed to call onError")},r}();fs.CompletedObserver=n;var e=function(){function r(i){var o=i.error,s=i.onError;this._error=o,this._beforeError=s,this._observers=[],this.onError(o)}return r.prototype.subscribe=function(i){t(i,i.onError,this._error),this._observers.push(i)},r.prototype.onError=function(i){var o=this;Promise.resolve(t(this,this._beforeError,i)).then(function(){return o._observers.forEach(function(s){return t(s,s.onError,i)})})},r.prototype.cancel=function(){},r.prototype.prepareToHandleSingleResponse=function(){},r.prototype.markCompleted=function(){},r}();fs.FailedObserver=e;function t(r,i,o){i&&i.bind(r)(o)}return fs}var Sl={},eC;function tc(){if(eC)return Sl;eC=1;var n=oe&&oe.__createBinding||(Object.create?function(u,f,c,d){d===void 0&&(d=c),Object.defineProperty(u,d,{enumerable:!0,get:function(){return f[c]}})}:function(u,f,c,d){d===void 0&&(d=c),u[d]=f[c]}),e=oe&&oe.__setModuleDefault||(Object.create?function(u,f){Object.defineProperty(u,"default",{enumerable:!0,value:f})}:function(u,f){u.default=f}),t=oe&&oe.__importStar||function(u){if(u&&u.__esModule)return u;var f={};if(u!=null)for(var c in u)c!=="default"&&Object.prototype.hasOwnProperty.call(u,c)&&n(f,u,c);return e(f,u),f};Object.defineProperty(Sl,"__esModule",{value:!0}),Sl.Bookmark=void 0;var r=t(hi()),i="bookmarks",o=function(){function u(f){this._values=a(f)}return u.empty=function(){return s},u.prototype.isEmpty=function(){return this._values.length===0},u.prototype.values=function(){return this._values},u.prototype.asBeginTransactionParameters=function(){var f;return this.isEmpty()?{}:(f={},f[i]=this._values,f)},u}();Sl.Bookmark=o;var s=new o(null);function a(u){if(!u)return[];if(r.isString(u))return[u];if(Array.isArray(u)){for(var f=[],c=l(u),d=0;d<c.length;d++){var g=c[d];if(g!=null){if(!r.isString(g))throw new TypeError("Bookmark value should be a string, given: '"+g+"'");f.push(g)}}return f}throw new TypeError("Bookmark should either be a string or a string array, given: '"+u+"'")}function l(u){return u.reduce(function(f,c){return Array.isArray(c)?f.concat(l(c)):f.concat(c)},[])}return Sl}var en={},tC;function nc(){if(tC)return en;tC=1,Object.defineProperty(en,"__esModule",{value:!0}),en.BOLT_PROTOCOL_V4_4=en.BOLT_PROTOCOL_V4_3=en.BOLT_PROTOCOL_V4_2=en.BOLT_PROTOCOL_V4_1=en.BOLT_PROTOCOL_V4_0=en.BOLT_PROTOCOL_V3=en.BOLT_PROTOCOL_V2=en.BOLT_PROTOCOL_V1=en.DEFAULT_POOL_MAX_SIZE=en.DEFAULT_POOL_ACQUISITION_TIMEOUT=en.ACCESS_MODE_WRITE=en.ACCESS_MODE_READ=en.FETCH_ALL=void 0;var n=-1;en.FETCH_ALL=n;var e=60*1e3;en.DEFAULT_POOL_ACQUISITION_TIMEOUT=e;var t=100;en.DEFAULT_POOL_MAX_SIZE=t;var r="READ";en.ACCESS_MODE_READ=r;var i="WRITE";en.ACCESS_MODE_WRITE=i;var o=1;en.BOLT_PROTOCOL_V1=o;var s=2;en.BOLT_PROTOCOL_V2=s;var a=3;en.BOLT_PROTOCOL_V3=a;var l=4;en.BOLT_PROTOCOL_V4_0=l;var u=4.1;en.BOLT_PROTOCOL_V4_1=u;var f=4.2;en.BOLT_PROTOCOL_V4_2=f;var c=4.3;en.BOLT_PROTOCOL_V4_3=c;var d=4.4;return en.BOLT_PROTOCOL_V4_4=d,en}var Di={},nC;function ip(){if(nC)return Di;nC=1;var n=oe&&oe.__extends||function(){var f=function(c,d){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,h){g.__proto__=h}||function(g,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(g[v]=h[v])},f(c,d)};return function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");f(c,d);function g(){this.constructor=c}c.prototype=d===null?Object.create(d):(g.prototype=d.prototype,new g)}}();Object.defineProperty(Di,"__esModule",{value:!0}),Di.EMPTY_CONNECTION_HOLDER=Di.ReadOnlyConnectionHolder=Di.ConnectionHolder=void 0;var e=ni(),t=hi(),r=nc(),i=tc(),o=function(){function f(c){var d=c===void 0?{}:c,g=d.mode,h=g===void 0?r.ACCESS_MODE_WRITE:g,v=d.database,m=v===void 0?"":v,p=d.bookmark,y=d.connectionProvider,b=d.impersonatedUser,_=d.onDatabaseNameResolved;this._mode=h,this._database=m?(0,t.assertString)(m,"database"):"",this._bookmark=p||i.Bookmark.empty(),this._connectionProvider=y,this._impersonatedUser=b,this._referenceCount=0,this._connectionPromise=Promise.resolve(),this._onDatabaseNameResolved=_}return f.prototype.mode=function(){return this._mode},f.prototype.database=function(){return this._database},f.prototype.setDatabase=function(c){this._database=c},f.prototype.bookmark=function(){return this._bookmark},f.prototype.connectionProvider=function(){return this._connectionProvider},f.prototype.referenceCount=function(){return this._referenceCount},f.prototype.initializeConnection=function(){if(this._referenceCount===0&&this._connectionProvider)this._connectionPromise=this._connectionProvider.acquireConnection({accessMode:this._mode,database:this._database,bookmarks:this._bookmark,impersonatedUser:this._impersonatedUser,onDatabaseNameResolved:this._onDatabaseNameResolved});else return this._referenceCount++,!1;return this._referenceCount++,!0},f.prototype.getConnection=function(){return this._connectionPromise},f.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},f.prototype.close=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection())},f.prototype._releaseConnection=function(){return this._connectionPromise=this._connectionPromise.then(function(c){return c?c.isOpen()?c.resetAndFlush().catch(u).then(function(){return c._release()}):c._release():Promise.resolve()}).catch(u),this._connectionPromise},f}();Di.ConnectionHolder=o;var s=function(f){n(c,f);function c(d){var g=f.call(this,{mode:d.mode(),database:d.database(),bookmark:d.bookmark(),connectionProvider:d.connectionProvider()})||this;return g._connectionHolder=d,g}return c.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},c.prototype.getConnection=function(){return this._connectionHolder.getConnection()},c.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve()})},c.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve()})},c}(o);Di.ReadOnlyConnectionHolder=s,Di.default=s;var a=function(f){n(c,f);function c(){return f!==null&&f.apply(this,arguments)||this}return c.prototype.mode=function(){},c.prototype.database=function(){},c.prototype.initializeConnection=function(){return!0},c.prototype.getConnection=function(){return Promise.reject((0,e.newError)("This connection holder does not serve connections"))},c.prototype.releaseConnection=function(){return Promise.resolve()},c.prototype.close=function(){return Promise.resolve()},c}(o),l=new a;Di.EMPTY_CONNECTION_HOLDER=l;function u(f){}return Di}var Cl={},rC;function ay(){if(rC)return Cl;rC=1;var n=oe&&oe.__createBinding||(Object.create?function(c,d,g,h){h===void 0&&(h=g),Object.defineProperty(c,h,{enumerable:!0,get:function(){return d[g]}})}:function(c,d,g,h){h===void 0&&(h=g),c[h]=d[g]}),e=oe&&oe.__setModuleDefault||(Object.create?function(c,d){Object.defineProperty(c,"default",{enumerable:!0,value:d})}:function(c,d){c.default=d}),t=oe&&oe.__importStar||function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var g in c)g!=="default"&&Object.prototype.hasOwnProperty.call(c,g)&&n(d,c,g);return e(d,c),d};Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.TxConfig=void 0;var r=t(hi()),i=ni(),o=sl(),s=function(){function c(d){f(d),this.timeout=l(d),this.metadata=u(d)}return c.empty=function(){return a},c.prototype.isEmpty=function(){return Object.values(this).every(function(d){return d==null})},c}();Cl.TxConfig=s;var a=new s({});function l(c){if(r.isObject(c)&&(c.timeout||c.timeout===0)){r.assertNumberOrInteger(c.timeout,"Transaction timeout");var d=(0,o.int)(c.timeout);if(d.isZero())throw(0,i.newError)("Transaction timeout should not be zero");if(d.isNegative())throw(0,i.newError)("Transaction timeout should not be negative");return d}return null}function u(c){if(r.isObject(c)&&c.metadata){var d=c.metadata;if(r.assertObject(d,"config.metadata"),Object.keys(d).length!==0)return d}return null}function f(c){c&&r.assertObject(c,"Transaction config")}return Cl}var El={},Ol={},iC;function R3(){if(iC)return Ol;iC=1,Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.canRetryOn=void 0;var n=ni();function e(i){return i&&i instanceof n.Neo4jError&&i.code&&(i.code===n.SERVICE_UNAVAILABLE||i.code===n.SESSION_EXPIRED||r(i)||t(i))}Ol.canRetryOn=e;function t(i){var o=i.code;return o.indexOf("TransientError")>=0?!(o==="Neo.TransientError.Transaction.Terminated"||o==="Neo.TransientError.Transaction.LockClientStopped"):!1}function r(i){return i.code==="Neo.ClientError.Security.AuthorizationExpired"}return Ol}var oC;function x3(){if(oC)return El;oC=1,Object.defineProperty(El,"__esModule",{value:!0}),El.TransactionExecutor=void 0;var n=ni(),e=R3(),t=30*1e3,r=1e3,i=2,o=.2,s=function(){function l(u,f,c,d){this._maxRetryTimeMs=a(u,t),this._initialRetryDelayMs=a(f,r),this._multiplier=a(c,i),this._jitterFactor=a(d,o),this._inFlightTimeoutIds=[],this._verifyAfterConstruction()}return l.prototype.execute=function(u,f){var c=this;return new Promise(function(d,g){c._executeTransactionInsidePromise(u,f,d,g)}).catch(function(d){var g=Date.now(),h=c._initialRetryDelayMs;return c._retryTransactionPromise(u,f,d,g,h)})},l.prototype.close=function(){this._inFlightTimeoutIds.forEach(function(u){return clearTimeout(u)}),this._inFlightTimeoutIds=[]},l.prototype._retryTransactionPromise=function(u,f,c,d,g){var h=this,v=Date.now()-d;return v>this._maxRetryTimeMs||!(0,e.canRetryOn)(c)?Promise.reject(c):new Promise(function(m,p){var y=h._computeDelayWithJitter(g),b=setTimeout(function(){h._inFlightTimeoutIds=h._inFlightTimeoutIds.filter(function(_){return _!==b}),h._executeTransactionInsidePromise(u,f,m,p)},y);h._inFlightTimeoutIds.push(b)}).catch(function(m){var p=g*h._multiplier;return h._retryTransactionPromise(u,f,m,d,p)})},l.prototype._executeTransactionInsidePromise=function(u,f,c,d){var g=this,h;try{h=u()}catch(m){d(m);return}var v=this._safeExecuteTransactionWork(h,f);v.then(function(m){return g._handleTransactionWorkSuccess(m,h,c,d)}).catch(function(m){return g._handleTransactionWorkFailure(m,h,d)})},l.prototype._safeExecuteTransactionWork=function(u,f){try{var c=f(u);return Promise.resolve(c)}catch(d){return Promise.reject(d)}},l.prototype._handleTransactionWorkSuccess=function(u,f,c,d){f.isOpen()?f.commit().then(function(){c(u)}).catch(function(g){d(g)}):c(u)},l.prototype._handleTransactionWorkFailure=function(u,f,c){f.isOpen()?f.rollback().catch(function(d){}).then(function(){return c(u)}):c(u)},l.prototype._computeDelayWithJitter=function(u){var f=u*this._jitterFactor,c=u-f,d=u+f;return Math.random()*(d-c)+c},l.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,n.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs);if(this._initialRetryDelayMs<0)throw(0,n.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs);if(this._multiplier<1)throw(0,n.newError)("Multiplier should be >= 1.0: "+this._multiplier);if(this._jitterFactor<0||this._jitterFactor>1)throw(0,n.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor)},l}();El.TransactionExecutor=s;function a(l,u){return l||l===0?l:u}return El}var kl={},sC;function N3(){if(sC)return kl;sC=1,Object.defineProperty(kl,"__esModule",{value:!0}),kl.ConnectivityVerifier=void 0;var n=ip(),e=nc(),t=ni(),r=function(){function o(s){this._connectionProvider=s}return o.prototype.verify=function(s){var a=s===void 0?{}:s,l=a.database,u=l===void 0?"":l;return i(this._connectionProvider,u)},o}();kl.ConnectivityVerifier=r;function i(o,s){var a=new n.ConnectionHolder({mode:e.ACCESS_MODE_READ,database:s,connectionProvider:o});return a.initializeConnection(),a.getConnection().then(function(l){if(!l)throw(0,t.newError)("Unexpected error acquiring transaction");return a.close().then(function(){return l.server})}).catch(function(l){return a.close().catch(function(u){}).then(function(){return Promise.reject(l)})})}return kl}var Tl={},aC;function M3(){if(aC)return Tl;aC=1;var n=oe&&oe.__extends||function(){var v=function(m,p){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var _ in b)Object.prototype.hasOwnProperty.call(b,_)&&(y[_]=b[_])},v(m,p)};return function(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");v(m,p);function y(){this.constructor=m}m.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}}(),e;Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.Logger=void 0;var t=ni(),r="error",i="warn",o="info",s="debug",a=o,l=(e={},e[r]=0,e[i]=1,e[o]=2,e[s]=3,e),u=function(){function v(m,p){this._level=m,this._loggerFunction=p}return v.create=function(m){if(m&&m.logging){var p=m.logging,y=g(p),b=h(p);return new v(y,b)}return this.noOp()},v.noOp=function(){return c},v.prototype.isErrorEnabled=function(){return d(this._level,r)},v.prototype.error=function(m){this.isErrorEnabled()&&this._loggerFunction(r,m)},v.prototype.isWarnEnabled=function(){return d(this._level,i)},v.prototype.warn=function(m){this.isWarnEnabled()&&this._loggerFunction(i,m)},v.prototype.isInfoEnabled=function(){return d(this._level,o)},v.prototype.info=function(m){this.isInfoEnabled()&&this._loggerFunction(o,m)},v.prototype.isDebugEnabled=function(){return d(this._level,s)},v.prototype.debug=function(m){this.isDebugEnabled()&&this._loggerFunction(s,m)},v}();Tl.Logger=u;var f=function(v){n(m,v);function m(){return v.call(this,o,function(p,y){})||this}return m.prototype.isErrorEnabled=function(){return!1},m.prototype.error=function(p){},m.prototype.isWarnEnabled=function(){return!1},m.prototype.warn=function(p){},m.prototype.isInfoEnabled=function(){return!1},m.prototype.info=function(p){},m.prototype.isDebugEnabled=function(){return!1},m.prototype.debug=function(p){},m}(u),c=new f;function d(v,m){return l[v]>=l[m]}function g(v){if(v&&v.level){var m=v.level,p=l[m];if(!p&&p!==0)throw(0,t.newError)("Illegal logging level: "+m+". Supported levels are: "+Object.keys(l));return m}return a}function h(v){if(v&&v.logger){var m=v.logger;if(m&&typeof m=="function")return m}throw(0,t.newError)("Illegal logger function: "+v.logger)}return Tl}var Br={},lC;function D3(){if(lC)return Br;lC=1;var n=oe&&oe.__assign||function(){return n=Object.assign||function(S){for(var E,P=1,R=arguments.length;P<R;P++){E=arguments[P];for(var j in E)Object.prototype.hasOwnProperty.call(E,j)&&(S[j]=E[j])}return S},n.apply(this,arguments)},e=oe&&oe.__read||function(S,E){var P=typeof Symbol=="function"&&S[Symbol.iterator];if(!P)return S;var R=P.call(S),j,U=[],F;try{for(;(E===void 0||E-- >0)&&!(j=R.next()).done;)U.push(j.value)}catch(z){F={error:z}}finally{try{j&&!j.done&&(P=R.return)&&P.call(R)}finally{if(F)throw F.error}}return U};Object.defineProperty(Br,"__esModule",{value:!0}),Br.Url=Br.formatIPv6Address=Br.formatIPv4Address=Br.defaultPortForScheme=Br.parseDatabaseUrl=void 0;var t=hi(),r=7687,i=7474,o=7473,s=function(){function S(E,P,R,j,U){this.scheme=E,this.host=P,this.port=R,this.hostAndPort=j,this.query=U}return S}();Br.Url=s;function a(S){(0,t.assertString)(S,"URL");var E=u(S),P=w(E.url),R=E.schemeMissing?null:f(P.scheme),j=c(P.host),U=p(j),F=d(P.port,R),z=U+":"+F,D=g(P.query||l(P.resourceName),S);return new s(R,j,F,z,D)}Br.parseDatabaseUrl=a;function l(S){if(typeof S!="string")return null;var E=e(S.split("?"),2);E[0];var P=E[1];return P}function u(S){return S=S.trim(),S.indexOf("://")===-1?{schemeMissing:!0,url:"none://"+S}:{schemeMissing:!1,url:S}}function f(S){return S?(S=S.trim(),S.charAt(S.length-1)===":"&&(S=S.substring(0,S.length-1)),S):null}function c(S,E){if(!S)throw new Error("Unable to extract host from "+E);return S.trim()}function d(S,E){var P=typeof S=="string"?parseInt(S,10):S;return P===0||P?P:_(E)}function g(S,E){var P=S?h(S):null,R={};return P&&P.split("&").forEach(function(j){var U=j.split("=");if(U.length!==2)throw new Error("Invalid parameters: '"+U+"' in URL '"+E+"'.");var F=v(U[0],"key",E),z=v(U[1],"value",E);if(R[F])throw new Error("Duplicated query parameters with key '"+F+"' in URL '"+E+"'");R[F]=z}),R}function h(S){return S=(S||"").trim(),S&&S.charAt(0)==="?"&&(S=S.substring(1,S.length)),S}function v(S,E,P){if(S=(S||"").trim(),!S)throw new Error("Illegal empty "+E+" in URL query '"+P+"'");return S}function m(S){var E=S.charAt(0)==="[",P=S.charAt(S.length-1)==="]";if(!E&&!P)return"["+S+"]";if(E&&P)return S;throw new Error("Illegal IPv6 address "+S)}function p(S){if(!S)throw new Error("Illegal host "+S);var E=S.indexOf(":")>=0;return E?m(S):S}function y(S,E){return S+":"+E}Br.formatIPv4Address=y;function b(S,E){var P=m(S);return P+":"+E}Br.formatIPv6Address=b;function _(S){return S==="http"?i:S==="https"?o:r}Br.defaultPortForScheme=_;function w(S){function E(z,D){var N=z.indexOf(D);return N>=0?[z.substring(0,N),z[N],z.substring(N+1)]:[z,"",""]}function P(z,D){var N=z.lastIndexOf(D);return N>=0?[z.substring(0,N),z[N],z.substring(N+1)]:["","",z]}function R(z,D,N){var L=E(z,D),X=E(L[2],N);return[X[0],X[2]]}function j(z){var D={},N;N=P(z,"@"),N[1]==="@"&&(D.userInfo=decodeURIComponent(N[0]),z=N[2]);var L=e(R(z,"[","]"),2),X=L[0],Q=L[1];return X!==""?(D.host=X,N=E(Q,":")):(N=E(z,":"),D.host=N[0]),N[1]===":"&&(D.port=N[2]),D}var U={},F;return F=E(S,":"),F[1]===":"&&(U.scheme=decodeURIComponent(F[0]),S=F[2]),F=E(S,"#"),F[1]==="#"&&(U.fragment=decodeURIComponent(F[2]),S=F[0]),F=E(S,"?"),F[1]==="?"&&(U.query=F[2],S=F[0]),S.startsWith("//")?(F=E(S.substr(2),"/"),U=n(n({},U),j(F[0])),U.path=F[1]+F[2]):U.path=S,U}return Br}var Pl={},uC;function j3(){if(uC)return Pl;uC=1;var n=oe&&oe.__createBinding||(Object.create?function(s,a,l,u){u===void 0&&(u=l),Object.defineProperty(s,u,{enumerable:!0,get:function(){return a[l]}})}:function(s,a,l,u){u===void 0&&(u=l),s[u]=a[l]}),e=oe&&oe.__setModuleDefault||(Object.create?function(s,a){Object.defineProperty(s,"default",{enumerable:!0,value:a})}:function(s,a){s.default=a}),t=oe&&oe.__importStar||function(s){if(s&&s.__esModule)return s;var a={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&n(a,s,l);return e(a,s),a};Object.defineProperty(Pl,"__esModule",{value:!0}),Pl.ServerAddress=void 0;var r=hi(),i=t(D3()),o=function(){function s(a,l,u,f){this._host=(0,r.assertString)(a,"host"),this._resolved=l?(0,r.assertString)(l,"resolved"):null,this._port=(0,r.assertNumber)(u,"port"),this._hostPort=f,this._stringValue=l?f+"("+l+")":""+f}return s.prototype.host=function(){return this._host},s.prototype.resolvedHost=function(){return this._resolved?this._resolved:this._host},s.prototype.port=function(){return this._port},s.prototype.resolveWith=function(a){return new s(this._host,a,this._port,this._hostPort)},s.prototype.asHostPort=function(){return this._hostPort},s.prototype.asKey=function(){return this._hostPort},s.prototype.toString=function(){return this._stringValue},s.fromUrl=function(a){var l=i.parseDatabaseUrl(a);return new s(l.host,null,l.port,l.hostAndPort)},s}();return Pl.ServerAddress=o,Pl}var hs={},Qc={},cC;function oZ(){if(cC)return Qc;cC=1,Object.defineProperty(Qc,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.resolve=function(){throw new Error("Abstract function")},e.prototype._resolveToItself=function(t){return Promise.resolve([t])},e}();return Qc.default=n,Qc}var Zc={},fC;function L3(){if(fC)return Zc;fC=1,Object.defineProperty(Zc,"__esModule",{value:!0});var n=j3();function e(r){return Promise.resolve([r])}var t=function(){function r(i){this._resolverFunction=i||e}return r.prototype.resolve=function(i){var o=this;return new Promise(function(s){return s(o._resolverFunction(i.asHostPort()))}).then(function(s){if(!Array.isArray(s))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+("Each address is '<host>:<port>'. Got: "+s));return s.map(function(a){return n.ServerAddress.fromUrl(a)})})},r}();return Zc.default=t,Zc}var hC;function sZ(){if(hC)return hs;hC=1;var n=oe&&oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hs,"__esModule",{value:!0}),hs.ConfiguredCustomResolver=hs.BaseHostNameResolver=void 0;var e=n(oZ());hs.BaseHostNameResolver=e.default;var t=n(L3());return hs.ConfiguredCustomResolver=t.default,hs}var dC;function B3(){if(dC)return Gt;dC=1;var n=oe&&oe.__createBinding||(Object.create?function(p,y,b,_){_===void 0&&(_=b),Object.defineProperty(p,_,{enumerable:!0,get:function(){return y[b]}})}:function(p,y,b,_){_===void 0&&(_=b),p[_]=y[b]}),e=oe&&oe.__setModuleDefault||(Object.create?function(p,y){Object.defineProperty(p,"default",{enumerable:!0,value:y})}:function(p,y){p.default=y}),t=oe&&oe.__importStar||function(p){if(p&&p.__esModule)return p;var y={};if(p!=null)for(var b in p)b!=="default"&&Object.prototype.hasOwnProperty.call(p,b)&&n(y,p,b);return e(y,p),y};Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.retryStrategy=Gt.resolver=Gt.serverAddress=Gt.urlUtil=Gt.logger=Gt.connectivityVerifier=Gt.transactionExecutor=Gt.txConfig=Gt.connectionHolder=Gt.constants=Gt.bookmark=Gt.observer=Gt.temporalUtil=Gt.util=void 0;var r=t(hi());Gt.util=r;var i=t(I3());Gt.temporalUtil=i;var o=t(sy());Gt.observer=o;var s=t(tc());Gt.bookmark=s;var a=t(nc());Gt.constants=a;var l=t(ip());Gt.connectionHolder=l;var u=t(ay());Gt.txConfig=u;var f=t(x3());Gt.transactionExecutor=f;var c=t(N3());Gt.connectivityVerifier=c;var d=t(M3());Gt.logger=d;var g=t(D3());Gt.urlUtil=g;var h=t(j3());Gt.serverAddress=h;var v=t(sZ());Gt.resolver=v;var m=t(R3());return Gt.retryStrategy=m,Gt}var pC;function ly(){if(pC)return Jc;pC=1;var n=oe&&oe.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Jc,"__esModule",{value:!0});var e=n(A3()),t=B3(),r=t.connectionHolder.EMPTY_CONNECTION_HOLDER,i=function(u){console.log("Uncaught error when processing result: "+u)},o=function(u){},s=function(){function u(f,c,d,g){this._stack=a(),this._streamObserverPromise=f,this._p=null,this._query=c,this._parameters=d||{},this._connectionHolder=g||r}return u.prototype.keys=function(){var f=this;return new Promise(function(c,d){f._streamObserverPromise.then(function(g){return g.subscribe({onKeys:function(h){return c(h)},onError:function(h){return d(h)}})}).catch(d)})},u.prototype.summary=function(){var f=this;return new Promise(function(c,d){f._streamObserverPromise.then(function(g){g.cancel(),g.subscribe({onCompleted:function(h){return f._createSummary(h).then(c,d)},onError:function(h){return d(h)}})}).catch(d)})},u.prototype._getOrCreatePromise=function(){var f=this;return this._p||(this._p=new Promise(function(c,d){var g=[],h={onNext:function(v){g.push(v)},onCompleted:function(v){c({records:g,summary:v})},onError:function(v){d(v)}};f.subscribe(h)})),this._p},u.prototype.then=function(f,c){return this._getOrCreatePromise().then(f,c)},u.prototype.catch=function(f){return this._getOrCreatePromise().catch(f)},u.prototype.finally=function(f){return this._getOrCreatePromise().finally(f)},u.prototype.subscribe=function(f){var c=this,d=f.onCompleted||o,g=function(m){c._createSummary(m).then(function(p){return d.call(f,p)})};f.onCompleted=g;var h=f.onError||i,v=function(m){c._connectionHolder.releaseConnection().then(function(){l(m,c._stack),h.call(f,m)})};f.onError=v,this._streamObserverPromise.then(function(m){return m.subscribe(f)}).catch(function(m){return f.onError(m)})},u.prototype._cancel=function(){this._streamObserverPromise.then(function(f){return f.cancel()})},u.prototype._createSummary=function(f){var c=t.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),d=c.validatedQuery,g=c.params,h=this._connectionHolder;return h.getConnection().then(function(v){return h.releaseConnection().then(function(){return v?v.protocol().version:void 0})},function(v){}).then(function(v){return new e.default(d,g,f,v)})},u}();function a(){var u=new Error("");return u.stack?u.stack.replace(/^Error(\n\r)*/,""):null}function l(u,f){f&&(u.stack=u.toString()+`
`+f)}return Jc.default=s,Jc}var Xc={},mC;function aZ(){if(mC)return Xc;mC=1,Object.defineProperty(Xc,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.acquireConnection=function(t){throw Error("Not implemented")},e.prototype.supportsMultiDb=function(){throw Error("Not implemented")},e.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},e.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},e.prototype.close=function(){throw Error("Not implemented")},e}();return Xc.default=n,Xc}var $c={},gC;function lZ(){if(gC)return $c;gC=1,Object.defineProperty($c,"__esModule",{value:!0});var n=function(){function e(){this.id="",this.databaseId=""}return e.prototype.isOpen=function(){return!1},e.prototype.protocol=function(){throw Error("Not implemented")},e.prototype.connect=function(t,r){throw Error("Not implemented")},e.prototype.write=function(t,r,i){throw Error("Not implemented")},e.prototype.resetAndFlush=function(){throw Error("Not implemented")},e.prototype.close=function(){throw Error("Not implemented")},e.prototype._release=function(){return Promise.resolve()},e}();return $c.default=n,$c}var ef={},vC;function F3(){if(vC)return ef;vC=1;var n=oe&&oe.__awaiter||function(h,v,m,p){function y(b){return b instanceof m?b:new m(function(_){_(b)})}return new(m||(m=Promise))(function(b,_){function w(P){try{E(p.next(P))}catch(R){_(R)}}function S(P){try{E(p.throw(P))}catch(R){_(R)}}function E(P){P.done?b(P.value):y(P.value).then(w,S)}E((p=p.apply(h,v||[])).next())})},e=oe&&oe.__generator||function(h,v){var m={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},p,y,b,_;return _={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function w(E){return function(P){return S([E,P])}}function S(E){if(p)throw new TypeError("Generator is already executing.");for(;m;)try{if(p=1,y&&(b=E[0]&2?y.return:E[0]?y.throw||((b=y.return)&&b.call(y),0):y.next)&&!(b=b.call(y,E[1])).done)return b;switch(y=0,b&&(E=[E[0]&2,b.value]),E[0]){case 0:case 1:b=E;break;case 4:return m.label++,{value:E[1],done:!1};case 5:m.label++,y=E[1],E=[0];continue;case 7:E=m.ops.pop(),m.trys.pop();continue;default:if(b=m.trys,!(b=b.length>0&&b[b.length-1])&&(E[0]===6||E[0]===2)){m=0;continue}if(E[0]===3&&(!b||E[1]>b[0]&&E[1]<b[3])){m.label=E[1];break}if(E[0]===6&&m.label<b[1]){m.label=b[1],b=E;break}if(b&&m.label<b[2]){m.label=b[2],m.ops.push(E);break}b[2]&&m.ops.pop(),m.trys.pop();continue}E=v.call(h,m)}catch(P){E=[6,P],y=0}finally{p=b=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},t=oe&&oe.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(ef,"__esModule",{value:!0});var r=hi(),i=ip(),o=tc(),s=ay(),a=sy(),l=ni(),u=t(ly()),f=function(){function h(v){var m=v.connectionHolder,p=v.onClose,y=v.onBookmark,b=v.onConnection,_=v.reactive,w=v.fetchSize,S=v.impersonatedUser;this._connectionHolder=m,this._reactive=_,this._state=c.ACTIVE,this._onClose=p,this._onBookmark=y,this._onConnection=b,this._onError=this._onErrorCallback.bind(this),this._onComplete=this._onCompleteCallback.bind(this),this._fetchSize=w,this._results=[],this._impersonatedUser=S}return h.prototype._begin=function(v,m){var p=this;this._connectionHolder.getConnection().then(function(y){if(p._onConnection(),y)return y.protocol().beginTransaction({bookmark:v,txConfig:m,mode:p._connectionHolder.mode(),database:p._connectionHolder.database(),impersonatedUser:p._impersonatedUser,beforeError:p._onError,afterComplete:p._onComplete});throw(0,l.newError)("No connection available")}).catch(function(y){return p._onError(y)})},h.prototype.run=function(v,m){var p=(0,r.validateQueryAndParameters)(v,m),y=p.validatedQuery,b=p.params,_=this._state.run(y,b,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize});return this._results.push(_),_},h.prototype.commit=function(){var v=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=v.state,this._onClose(),new Promise(function(m,p){v.result.subscribe({onCompleted:function(){return m()},onError:function(y){return p(y)}})})},h.prototype.rollback=function(){var v=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=v.state,this._onClose(),new Promise(function(m,p){v.result.subscribe({onCompleted:function(){return m()},onError:function(y){return p(y)}})})},h.prototype.isOpen=function(){return this._state===c.ACTIVE},h.prototype.close=function(){return n(this,void 0,void 0,function(){return e(this,function(v){switch(v.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:v.sent(),v.label=2;case 2:return[2]}})})},h.prototype._onErrorCallback=function(v){return this._state=c.FAILED,this._onClose(),this._connectionHolder.releaseConnection()},h.prototype._onCompleteCallback=function(v){this._onBookmark(new o.Bookmark(v.bookmark))},h}(),c={ACTIVE:{commit:function(h){var v=h.connectionHolder,m=h.onError,p=h.onComplete,y=h.onConnection,b=h.pendingResults;return{result:d(!0,v,m,p,y,b),state:c.SUCCEEDED}},rollback:function(h){var v=h.connectionHolder,m=h.onError,p=h.onComplete,y=h.onConnection,b=h.pendingResults;return{result:d(!1,v,m,p,y,b),state:c.ROLLED_BACK}},run:function(h,v,m){var p=m.connectionHolder,y=m.onError,b=m.onComplete,_=m.onConnection,w=m.reactive,S=m.fetchSize,E=p.getConnection().then(function(P){if(_(),P)return P.protocol().run(h,v,{bookmark:o.Bookmark.empty(),txConfig:s.TxConfig.empty(),beforeError:y,afterComplete:b,reactive:w,fetchSize:S});throw(0,l.newError)("No connection available")}).catch(function(P){return new a.FailedObserver({error:P,onError:y})});return g(E,h,v,p)}},FAILED:{commit:function(h){var v=h.connectionHolder,m=h.onError;return h.onComplete,{result:g(new a.FailedObserver({error:(0,l.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:m}),"COMMIT",{},v),state:c.FAILED}},rollback:function(h){var v=h.connectionHolder;return h.onError,h.onComplete,{result:g(new a.CompletedObserver,"ROLLBACK",{},v),state:c.FAILED}},run:function(h,v,m){var p=m.connectionHolder,y=m.onError;return m.onComplete,g(new a.FailedObserver({error:(0,l.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:y}),h,v,p)}},SUCCEEDED:{commit:function(h){var v=h.connectionHolder,m=h.onError;return h.onComplete,{result:g(new a.FailedObserver({error:(0,l.newError)("Cannot commit this transaction, because it has already been committed."),onError:m}),"COMMIT",{}),state:c.SUCCEEDED,connectionHolder:v}},rollback:function(h){var v=h.connectionHolder,m=h.onError;return h.onComplete,{result:g(new a.FailedObserver({error:(0,l.newError)("Cannot rollback this transaction, because it has already been committed."),onError:m}),"ROLLBACK",{}),state:c.SUCCEEDED,connectionHolder:v}},run:function(h,v,m){var p=m.connectionHolder,y=m.onError;return m.onComplete,g(new a.FailedObserver({error:(0,l.newError)("Cannot run query in this transaction, because it has already been committed."),onError:y}),h,v,p)}},ROLLED_BACK:{commit:function(h){var v=h.connectionHolder,m=h.onError;return h.onComplete,{result:g(new a.FailedObserver({error:(0,l.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:m}),"COMMIT",{},v),state:c.ROLLED_BACK}},rollback:function(h){var v=h.connectionHolder;return h.onError,h.onComplete,{result:g(new a.FailedObserver({error:(0,l.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},v),state:c.ROLLED_BACK}},run:function(h,v,m){var p=m.connectionHolder,y=m.onError;return m.onComplete,g(new a.FailedObserver({error:(0,l.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:y}),h,v,p)}}};function d(h,v,m,p,y,b){var _=v.getConnection().then(function(w){return y(),b.forEach(function(S){return S._cancel()}),Promise.all(b).then(function(S){if(w)return h?w.protocol().commitTransaction({beforeError:m,afterComplete:p}):w.protocol().rollbackTransaction({beforeError:m,afterComplete:p});throw(0,l.newError)("No connection available")})}).catch(function(w){return new a.FailedObserver({error:w,onError:m})});return new u.default(_,h?"COMMIT":"ROLLBACK",{},v)}function g(h,v,m,p){return p===void 0&&(p=i.EMPTY_CONNECTION_HOLDER),new u.default(Promise.resolve(h),v,m,new i.ReadOnlyConnectionHolder(p||i.EMPTY_CONNECTION_HOLDER))}return ef.default=f,ef}var tf={},yC;function U3(){if(yC)return tf;yC=1;var n=oe&&oe.__awaiter||function(v,m,p,y){function b(_){return _ instanceof p?_:new p(function(w){w(_)})}return new(p||(p=Promise))(function(_,w){function S(R){try{P(y.next(R))}catch(j){w(j)}}function E(R){try{P(y.throw(R))}catch(j){w(j)}}function P(R){R.done?_(R.value):b(R.value).then(S,E)}P((y=y.apply(v,m||[])).next())})},e=oe&&oe.__generator||function(v,m){var p={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},y,b,_,w;return w={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function S(P){return function(R){return E([P,R])}}function E(P){if(y)throw new TypeError("Generator is already executing.");for(;p;)try{if(y=1,b&&(_=P[0]&2?b.return:P[0]?b.throw||((_=b.return)&&_.call(b),0):b.next)&&!(_=_.call(b,P[1])).done)return _;switch(b=0,_&&(P=[P[0]&2,_.value]),P[0]){case 0:case 1:_=P;break;case 4:return p.label++,{value:P[1],done:!1};case 5:p.label++,b=P[1],P=[0];continue;case 7:P=p.ops.pop(),p.trys.pop();continue;default:if(_=p.trys,!(_=_.length>0&&_[_.length-1])&&(P[0]===6||P[0]===2)){p=0;continue}if(P[0]===3&&(!_||P[1]>_[0]&&P[1]<_[3])){p.label=P[1];break}if(P[0]===6&&p.label<_[1]){p.label=_[1],_=P;break}if(_&&p.label<_[2]){p.label=_[2],p.ops.push(P);break}_[2]&&p.ops.pop(),p.trys.pop();continue}P=m.call(v,p)}catch(R){P=[6,R],b=0}finally{y=_=0}if(P[0]&5)throw P[1];return{value:P[0]?P[1]:void 0,done:!0}}},t=oe&&oe.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(tf,"__esModule",{value:!0});var r=sy(),i=hi(),o=ni(),s=t(ly()),a=t(F3()),l=ip(),u=nc(),f=x3(),c=tc(),d=ay(),g=function(){function v(m){var p=m.mode,y=m.connectionProvider,b=m.bookmark,_=m.database,w=m.config,S=m.reactive,E=m.fetchSize,P=m.impersonatedUser;this._mode=p,this._database=_,this._reactive=S,this._fetchSize=E,this._onDatabaseNameResolved=this._onDatabaseNameResolved.bind(this),this._readConnectionHolder=new l.ConnectionHolder({mode:u.ACCESS_MODE_READ,database:_,bookmark:b,connectionProvider:y,impersonatedUser:P,onDatabaseNameResolved:this._onDatabaseNameResolved}),this._writeConnectionHolder=new l.ConnectionHolder({mode:u.ACCESS_MODE_WRITE,database:_,bookmark:b,connectionProvider:y,impersonatedUser:P,onDatabaseNameResolved:this._onDatabaseNameResolved}),this._open=!0,this._hasTx=!1,this._impersonatedUser=P,this._lastBookmark=b||c.Bookmark.empty(),this._transactionExecutor=h(w),this._onComplete=this._onCompleteCallback.bind(this),this._databaseNameResolved=this._database!==""}return v.prototype.run=function(m,p,y){var b=this,_=(0,i.validateQueryAndParameters)(m,p),w=_.validatedQuery,S=_.params,E=y?new d.TxConfig(y):d.TxConfig.empty();return this._run(w,S,function(P){return b._assertSessionIsOpen(),P.protocol().run(w,S,{bookmark:b._lastBookmark,txConfig:E,mode:b._mode,database:b._database,impersonatedUser:b._impersonatedUser,afterComplete:b._onComplete,reactive:b._reactive,fetchSize:b._fetchSize})})},v.prototype._run=function(m,p,y){var b=this._connectionHolderWithMode(this._mode),_;return this._open?!this._hasTx&&b.initializeConnection()?_=b.getConnection().then(function(w){return y(w)}).catch(function(w){return Promise.resolve(new r.FailedObserver({error:w}))}):_=Promise.resolve(new r.FailedObserver({error:(0,o.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")})):_=Promise.resolve(new r.FailedObserver({error:(0,o.newError)("Cannot run query in a closed session.")})),new s.default(_,m,p,b)},v.prototype._acquireConnection=function(m){return n(this,void 0,void 0,function(){var p,y,b=this;return e(this,function(_){return y=this._connectionHolderWithMode(this._mode),this._open?!this._hasTx&&y.initializeConnection()?p=y.getConnection().then(function(w){return m(w)}).then(function(w){return n(b,void 0,void 0,function(){return e(this,function(S){switch(S.label){case 0:return[4,y.releaseConnection()];case 1:return S.sent(),[2,w]}})})}):p=Promise.reject((0,o.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):p=Promise.reject((0,o.newError)("Cannot run query in a closed session.")),[2,p]})})},v.prototype.beginTransaction=function(m){var p=m,y=d.TxConfig.empty();return p&&(y=new d.TxConfig(p)),this._beginTransaction(this._mode,y)},v.prototype._beginTransaction=function(m,p){if(!this._open)throw(0,o.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,o.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var y=v._validateSessionMode(m),b=this._connectionHolderWithMode(y);b.initializeConnection(),this._hasTx=!0;var _=new a.default({connectionHolder:b,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmark:this._updateBookmark.bind(this),onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize});return _._begin(this._lastBookmark,p),_},v.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,o.newError)("You cannot run more transactions on a closed session.")},v.prototype._transactionClosed=function(){this._hasTx=!1},v.prototype.lastBookmark=function(){return this._lastBookmark.values()},v.prototype.readTransaction=function(m,p){var y=new d.TxConfig(p);return this._runTransaction(u.ACCESS_MODE_READ,y,m)},v.prototype.writeTransaction=function(m,p){var y=new d.TxConfig(p);return this._runTransaction(u.ACCESS_MODE_WRITE,y,m)},v.prototype._runTransaction=function(m,p,y){var b=this;return this._transactionExecutor.execute(function(){return b._beginTransaction(m,p)},y)},v.prototype._onDatabaseNameResolved=function(m){if(!this._databaseNameResolved){var p=m||"";this._database=p,this._readConnectionHolder.setDatabase(p),this._writeConnectionHolder.setDatabase(p),this._databaseNameResolved=!0}},v.prototype._updateBookmark=function(m){m&&!m.isEmpty()&&(this._lastBookmark=m)},v.prototype.close=function(){return n(this,void 0,void 0,function(){return e(this,function(m){switch(m.label){case 0:return this._open?(this._open=!1,this._transactionExecutor.close(),[4,this._readConnectionHolder.close()]):[3,3];case 1:return m.sent(),[4,this._writeConnectionHolder.close()];case 2:m.sent(),m.label=3;case 3:return[2]}})})},v.prototype._connectionHolderWithMode=function(m){if(m===u.ACCESS_MODE_READ)return this._readConnectionHolder;if(m===u.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,o.newError)("Unknown access mode: "+m)},v.prototype._onCompleteCallback=function(m){this._updateBookmark(new c.Bookmark(m.bookmark))},v._validateSessionMode=function(m){var p=m||u.ACCESS_MODE_WRITE;if(p!==u.ACCESS_MODE_READ&&p!==u.ACCESS_MODE_WRITE)throw(0,o.newError)("Illegal session mode "+p);return p},v}();function h(v){var m=v&&v.maxTransactionRetryTime?v.maxTransactionRetryTime:null;return new f.TransactionExecutor(m)}return tf.default=g,tf}var ji={},_C;function uZ(){if(_C)return ji;_C=1;var n=oe&&oe.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(ji,"__esModule",{value:!0}),ji.WRITE=ji.READ=ji.Driver=void 0;var e=tc(),t=N3(),r=n(L3()),i=nc(),o=M3(),s=n(U3()),a=hi(),l=60*60*1e3,u=1e3,f=i.ACCESS_MODE_READ;ji.READ=f;var c=i.ACCESS_MODE_WRITE;ji.WRITE=c;var d=0,g=function(){function b(_,w,S,E){w===void 0&&(w={}),E===void 0&&(E=function(P){return new s.default(P)}),v(w),h(w),this._id=d++,this._meta=_,this._config=w,this._log=o.Logger.create(w),this._createConnectionProvider=S,this._createSession=E,this._connectionProvider=null,this._afterConstruction()}return b.prototype.verifyConnectivity=function(_){var w=_===void 0?{}:_,S=w.database,E=S===void 0?"":S,P=this._getOrCreateConnectionProvider(),R=new t.ConnectivityVerifier(P);return R.verify({database:E})},b.prototype.supportsMultiDb=function(){var _=this._getOrCreateConnectionProvider();return _.supportsMultiDb()},b.prototype.supportsTransactionConfig=function(){var _=this._getOrCreateConnectionProvider();return _.supportsTransactionConfig()},b.prototype.supportsUserImpersonation=function(){var _=this._getOrCreateConnectionProvider();return _.supportsUserImpersonation()},b.prototype._supportsRouting=function(){return this._meta.routing},b.prototype._isEncrypted=function(){return this._config.encrypted===a.ENCRYPTION_ON},b.prototype._getTrust=function(){return this._config.trust},b.prototype.session=function(_){var w=_===void 0?{}:_,S=w.defaultAccessMode,E=S===void 0?c:S,P=w.bookmarks,R=w.database,j=R===void 0?"":R,U=w.impersonatedUser,F=w.fetchSize;return this._newSession({defaultAccessMode:E,bookmarkOrBookmarks:P,database:j,reactive:!1,impersonatedUser:U,fetchSize:p(F,this._config.fetchSize)})},b.prototype.close=function(){return this._log.info("Driver "+this._id+" closing"),this._connectionProvider?this._connectionProvider.close():Promise.resolve()},b.prototype._afterConstruction=function(){this._log.info(this._meta.typename+" driver "+this._id+" created for server address "+this._meta.address)},b.prototype._newSession=function(_){var w=_.defaultAccessMode,S=_.bookmarkOrBookmarks,E=_.database,P=_.reactive,R=_.impersonatedUser,j=_.fetchSize,U=s.default._validateSessionMode(w),F=this._getOrCreateConnectionProvider(),z=S?new e.Bookmark(S):e.Bookmark.empty();return this._createSession({mode:U,database:E||"",connectionProvider:F,bookmark:z,config:this._config,reactive:P,impersonatedUser:R,fetchSize:j})},b.prototype._getOrCreateConnectionProvider=function(){return this._connectionProvider||(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,y(this._config))),this._connectionProvider},b}();ji.Driver=g;function h(b){var _=b.resolver;if(_&&typeof _!="function")throw new TypeError("Configured resolver should be a function. Got: "+_);return b}function v(b){b.maxConnectionLifetime=m(b.maxConnectionLifetime,l),b.maxConnectionPoolSize=m(b.maxConnectionPoolSize,i.DEFAULT_POOL_MAX_SIZE),b.connectionAcquisitionTimeout=m(b.connectionAcquisitionTimeout,i.DEFAULT_POOL_ACQUISITION_TIMEOUT),b.fetchSize=p(b.fetchSize,u)}function m(b,_){var w=parseInt(b,10);return w>0||w===0?w:w<0?Number.MAX_SAFE_INTEGER:_}function p(b,_){var w=parseInt(b,10);if(w>0||w===i.FETCH_ALL)return w;if(w===0||w<0)throw new Error("The fetch size can only be a positive value or "+i.FETCH_ALL+" for ALL. However fetchSize = "+w);return _}function y(b){return new r.default(b.resolver)}return ji.default=g,ji}var nf={},bC;function cZ(){if(bC)return nf;bC=1,Object.defineProperty(nf,"__esModule",{value:!0});var n={basic:function(e,t,r){return r?{scheme:"basic",principal:e,credentials:t,realm:r}:{scheme:"basic",principal:e,credentials:t}},kerberos:function(e){return{scheme:"kerberos",principal:"",credentials:e}},bearer:function(e){return{scheme:"bearer",credentials:e}},custom:function(e,t,r,i,o){return o?{scheme:i,principal:e,credentials:t,realm:r,parameters:o}:{scheme:i,principal:e,credentials:t,realm:r}}};return nf.default=n,nf}var wm={},wC;function fZ(){return wC||(wC=1,Object.defineProperty(wm,"__esModule",{value:!0})),wm}var SC;function Mt(){return SC||(SC=1,function(n){var e=oe&&oe.__createBinding||(Object.create?function(R,j,U,F){F===void 0&&(F=U),Object.defineProperty(R,F,{enumerable:!0,get:function(){return j[U]}})}:function(R,j,U,F){F===void 0&&(F=U),R[F]=j[U]}),t=oe&&oe.__setModuleDefault||(Object.create?function(R,j){Object.defineProperty(R,"default",{enumerable:!0,value:j})}:function(R,j){R.default=j}),r=oe&&oe.__importStar||function(R){if(R&&R.__esModule)return R;var j={};if(R!=null)for(var U in R)U!=="default"&&Object.prototype.hasOwnProperty.call(R,U)&&e(j,R,U);return t(j,R),j},i=oe&&oe.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(n,"__esModule",{value:!0}),n.types=n.Driver=n.Session=n.Transaction=n.Connection=n.ConnectionProvider=n.Result=n.Stats=n.QueryStatistics=n.ProfiledPlan=n.Plan=n.Notification=n.ServerInfo=n.queryType=n.ResultSummary=n.Record=n.isPathSegment=n.PathSegment=n.isPath=n.Path=n.isUnboundRelationship=n.UnboundRelationship=n.isRelationship=n.Relationship=n.isNode=n.Node=n.Time=n.LocalTime=n.LocalDateTime=n.isTime=n.isLocalTime=n.isLocalDateTime=n.isDuration=n.isDateTime=n.isDate=n.Duration=n.DateTime=n.Date=n.Point=n.isPoint=n.internal=n.toString=n.toNumber=n.inSafeRange=n.isInt=n.int=n.Integer=n.error=n.Neo4jError=n.newError=void 0,n.auth=n.json=n.driver=void 0;var o=ni();Object.defineProperty(n,"newError",{enumerable:!0,get:function(){return o.newError}}),Object.defineProperty(n,"Neo4jError",{enumerable:!0,get:function(){return o.Neo4jError}});var s=r(sl());n.Integer=s.default,Object.defineProperty(n,"int",{enumerable:!0,get:function(){return s.int}}),Object.defineProperty(n,"isInt",{enumerable:!0,get:function(){return s.isInt}}),Object.defineProperty(n,"inSafeRange",{enumerable:!0,get:function(){return s.inSafeRange}}),Object.defineProperty(n,"toNumber",{enumerable:!0,get:function(){return s.toNumber}}),Object.defineProperty(n,"toString",{enumerable:!0,get:function(){return s.toString}});var a=tZ();Object.defineProperty(n,"Date",{enumerable:!0,get:function(){return a.Date}}),Object.defineProperty(n,"DateTime",{enumerable:!0,get:function(){return a.DateTime}}),Object.defineProperty(n,"Duration",{enumerable:!0,get:function(){return a.Duration}}),Object.defineProperty(n,"isDate",{enumerable:!0,get:function(){return a.isDate}}),Object.defineProperty(n,"isDateTime",{enumerable:!0,get:function(){return a.isDateTime}}),Object.defineProperty(n,"isDuration",{enumerable:!0,get:function(){return a.isDuration}}),Object.defineProperty(n,"isLocalDateTime",{enumerable:!0,get:function(){return a.isLocalDateTime}}),Object.defineProperty(n,"isLocalTime",{enumerable:!0,get:function(){return a.isLocalTime}}),Object.defineProperty(n,"isTime",{enumerable:!0,get:function(){return a.isTime}}),Object.defineProperty(n,"LocalDateTime",{enumerable:!0,get:function(){return a.LocalDateTime}}),Object.defineProperty(n,"LocalTime",{enumerable:!0,get:function(){return a.LocalTime}}),Object.defineProperty(n,"Time",{enumerable:!0,get:function(){return a.Time}});var l=nZ();Object.defineProperty(n,"Node",{enumerable:!0,get:function(){return l.Node}}),Object.defineProperty(n,"isNode",{enumerable:!0,get:function(){return l.isNode}}),Object.defineProperty(n,"Relationship",{enumerable:!0,get:function(){return l.Relationship}}),Object.defineProperty(n,"isRelationship",{enumerable:!0,get:function(){return l.isRelationship}}),Object.defineProperty(n,"UnboundRelationship",{enumerable:!0,get:function(){return l.UnboundRelationship}}),Object.defineProperty(n,"isUnboundRelationship",{enumerable:!0,get:function(){return l.isUnboundRelationship}}),Object.defineProperty(n,"Path",{enumerable:!0,get:function(){return l.Path}}),Object.defineProperty(n,"isPath",{enumerable:!0,get:function(){return l.isPath}}),Object.defineProperty(n,"PathSegment",{enumerable:!0,get:function(){return l.PathSegment}}),Object.defineProperty(n,"isPathSegment",{enumerable:!0,get:function(){return l.isPathSegment}});var u=i(rZ());n.Record=u.default;var f=iZ();Object.defineProperty(n,"isPoint",{enumerable:!0,get:function(){return f.isPoint}}),Object.defineProperty(n,"Point",{enumerable:!0,get:function(){return f.Point}});var c=r(A3());n.ResultSummary=c.default,Object.defineProperty(n,"queryType",{enumerable:!0,get:function(){return c.queryType}}),Object.defineProperty(n,"ServerInfo",{enumerable:!0,get:function(){return c.ServerInfo}}),Object.defineProperty(n,"Notification",{enumerable:!0,get:function(){return c.Notification}}),Object.defineProperty(n,"Plan",{enumerable:!0,get:function(){return c.Plan}}),Object.defineProperty(n,"ProfiledPlan",{enumerable:!0,get:function(){return c.ProfiledPlan}}),Object.defineProperty(n,"QueryStatistics",{enumerable:!0,get:function(){return c.QueryStatistics}}),Object.defineProperty(n,"Stats",{enumerable:!0,get:function(){return c.Stats}});var d=i(ly());n.Result=d.default;var g=i(aZ());n.ConnectionProvider=g.default;var h=i(lZ());n.Connection=h.default;var v=i(F3());n.Transaction=v.default;var m=i(U3());n.Session=m.default;var p=r(uZ()),y=p;n.Driver=p.default,n.driver=y;var b=i(cZ());n.auth=b.default;var _=r(fZ());n.types=_;var w=r(oy());n.json=w;var S=r(B3());n.internal=S;var E={SERVICE_UNAVAILABLE:o.SERVICE_UNAVAILABLE,SESSION_EXPIRED:o.SESSION_EXPIRED,PROTOCOL_ERROR:o.PROTOCOL_ERROR};n.error=E;var P={newError:o.newError,Neo4jError:o.Neo4jError,error:E,Integer:s.default,int:s.int,isInt:s.isInt,inSafeRange:s.inSafeRange,toNumber:s.toNumber,toString:s.toString,internal:S,isPoint:f.isPoint,Point:f.Point,Date:a.Date,DateTime:a.DateTime,Duration:a.Duration,isDate:a.isDate,isDateTime:a.isDateTime,isDuration:a.isDuration,isLocalDateTime:a.isLocalDateTime,isLocalTime:a.isLocalTime,isTime:a.isTime,LocalDateTime:a.LocalDateTime,LocalTime:a.LocalTime,Time:a.Time,Node:l.Node,isNode:l.isNode,Relationship:l.Relationship,isRelationship:l.isRelationship,UnboundRelationship:l.UnboundRelationship,isUnboundRelationship:l.isUnboundRelationship,Path:l.Path,isPath:l.isPath,PathSegment:l.PathSegment,isPathSegment:l.isPathSegment,Record:u.default,ResultSummary:c.default,queryType:c.queryType,ServerInfo:c.ServerInfo,Notification:c.Notification,Plan:c.Plan,ProfiledPlan:c.ProfiledPlan,QueryStatistics:c.QueryStatistics,Stats:c.Stats,Result:d.default,Transaction:v.default,Session:m.default,Driver:p.default,Connection:h.default,types:_,driver:y,json:w,auth:b.default};n.default=P}(_m)),_m}var Sm={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var y0=function(n,e){return y0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},y0(n,e)};function Le(n,e){y0(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Ga(n){return typeof n=="function"}var CC=!1,ai={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){var e=new Error;""+e.stack}CC=n},get useDeprecatedSynchronousErrorHandling(){return CC}};function va(n){setTimeout(function(){throw n},0)}var ld={closed:!0,next:function(n){},error:function(n){if(ai.useDeprecatedSynchronousErrorHandling)throw n;va(n)},complete:function(){}},br=function(){return Array.isArray||function(n){return n&&typeof n.length=="number"}}();function uy(n){return n!==null&&typeof n=="object"}var hZ=function(){function n(e){return Error.call(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(t,r){return r+1+") "+t.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e,this}return n.prototype=Object.create(Error.prototype),n}(),tu=hZ,Sn=function(){function n(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return n.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this,r=t._parentOrParents,i=t._ctorUnsubscribe,o=t._unsubscribe,s=t._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof n)r.remove(this);else if(r!==null)for(var a=0;a<r.length;++a){var l=r[a];l.remove(this)}if(Ga(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(c){e=c instanceof tu?EC(c.errors):[c]}}if(br(s))for(var a=-1,u=s.length;++a<u;){var f=s[a];if(uy(f))try{f.unsubscribe()}catch(d){e=e||[],d instanceof tu?e=e.concat(EC(d.errors)):e.push(d)}}if(e)throw new tu(e)}},n.prototype.add=function(e){var t=e;if(!e)return n.EMPTY;switch(typeof e){case"function":t=new n(e);case"object":if(t===this||t.closed||typeof t.unsubscribe!="function")return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof n)){var r=t;t=new n,t._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=t._parentOrParents;if(i===null)t._parentOrParents=this;else if(i instanceof n){if(i===this)return t;t._parentOrParents=[i,this]}else if(i.indexOf(this)===-1)i.push(this);else return t;var o=this._subscriptions;return o===null?this._subscriptions=[t]:o.push(t),t},n.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);r!==-1&&t.splice(r,1)}},n.EMPTY=function(e){return e.closed=!0,e}(new n),n}();function EC(n){return n.reduce(function(e,t){return e.concat(t instanceof tu?t.errors:t)},[])}var ud=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),ht=function(n){Le(e,n);function e(t,r,i){var o=n.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=ld;break;case 1:if(!t){o.destination=ld;break}if(typeof t=="object"){t instanceof e?(o.syncErrorThrowable=t.syncErrorThrowable,o.destination=t,t.add(o)):(o.syncErrorThrowable=!0,o.destination=new OC(o,t));break}default:o.syncErrorThrowable=!0,o.destination=new OC(o,t,r,i);break}return o}return e.prototype[ud]=function(){return this},e.create=function(t,r,i){var o=new e(t,r,i);return o.syncErrorThrowable=!1,o},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(Sn),OC=function(n){Le(e,n);function e(t,r,i,o){var s=n.call(this)||this;s._parentSubscriber=t;var a,l=s;return Ga(r)?a=r:r&&(a=r.next,i=r.error,o=r.complete,r!==ld&&(l=Object.create(r),Ga(l.unsubscribe)&&s.add(l.unsubscribe.bind(l)),l.unsubscribe=s.unsubscribe.bind(s))),s._context=l,s._next=a,s._error=i,s._complete=o,s}return e.prototype.next=function(t){if(!this.isStopped&&this._next){var r=this._parentSubscriber;!ai.useDeprecatedSynchronousErrorHandling||!r.syncErrorThrowable?this.__tryOrUnsub(this._next,t):this.__tryOrSetError(r,this._next,t)&&this.unsubscribe()}},e.prototype.error=function(t){if(!this.isStopped){var r=this._parentSubscriber,i=ai.useDeprecatedSynchronousErrorHandling;if(this._error)!i||!r.syncErrorThrowable?(this.__tryOrUnsub(this._error,t),this.unsubscribe()):(this.__tryOrSetError(r,this._error,t),this.unsubscribe());else if(r.syncErrorThrowable)i?(r.syncErrorValue=t,r.syncErrorThrown=!0):va(t),this.unsubscribe();else{if(this.unsubscribe(),i)throw t;va(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var r=this._parentSubscriber;if(this._complete){var i=function(){return t._complete.call(t._context)};!ai.useDeprecatedSynchronousErrorHandling||!r.syncErrorThrowable?(this.__tryOrUnsub(i),this.unsubscribe()):(this.__tryOrSetError(r,i),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,r){try{t.call(this._context,r)}catch(i){if(this.unsubscribe(),ai.useDeprecatedSynchronousErrorHandling)throw i;va(i)}},e.prototype.__tryOrSetError=function(t,r,i){if(!ai.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{r.call(this._context,i)}catch(o){return ai.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=o,t.syncErrorThrown=!0,!0):(va(o),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(ht);function cy(n){for(;n;){var e=n,t=e.closed,r=e.destination,i=e.isStopped;if(t||i)return!1;r&&r instanceof ht?n=r:n=null}return!0}function dZ(n,e,t){if(n){if(n instanceof ht)return n;if(n[ud])return n[ud]()}return!n&&!e&&!t?new ht(ld):new ht(n,e,t)}var al=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function es(n){return n}function _0(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return V3(n)}function V3(n){return n.length===0?es:n.length===1?n[0]:function(t){return n.reduce(function(r,i){return i(r)},t)}}var Rt=function(){function n(e){this._isScalar=!1,e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,r){var i=this.operator,o=dZ(e,t,r);if(i?o.add(i.call(o,this.source)):o.add(this.source||ai.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),ai.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},n.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){ai.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),cy(e)?e.error(t):console.warn(t)}},n.prototype.forEach=function(e,t){var r=this;return t=kC(t),new t(function(i,o){var s;s=r.subscribe(function(a){try{e(a)}catch(l){o(l),s&&s.unsubscribe()}},o,i)})},n.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},n.prototype[al]=function(){return this},n.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length===0?this:V3(e)(this)},n.prototype.toPromise=function(e){var t=this;return e=kC(e),new e(function(r,i){var o;t.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},n.create=function(e){return new n(e)},n}();function kC(n){if(n||(n=ai.Promise||Promise),!n)throw new Error("no Promise impl found");return n}var pZ=function(){function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n}(),Mo=pZ,q3=function(n){Le(e,n);function e(t,r){var i=n.call(this)||this;return i.subject=t,i.subscriber=r,i.closed=!1,i}return e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,r=t.observers;if(this.subject=null,!(!r||r.length===0||t.isStopped||t.closed)){var i=r.indexOf(this.subscriber);i!==-1&&r.splice(i,1)}}},e}(Sn),H3=function(n){Le(e,n);function e(t){var r=n.call(this,t)||this;return r.destination=t,r}return e}(ht),Zn=function(n){Le(e,n);function e(){var t=n.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return e.prototype[ud]=function(){return new H3(this)},e.prototype.lift=function(t){var r=new TC(this,this);return r.operator=t,r},e.prototype.next=function(t){if(this.closed)throw new Mo;if(!this.isStopped)for(var r=this.observers,i=r.length,o=r.slice(),s=0;s<i;s++)o[s].next(t)},e.prototype.error=function(t){if(this.closed)throw new Mo;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var r=this.observers,i=r.length,o=r.slice(),s=0;s<i;s++)o[s].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new Mo;this.isStopped=!0;for(var t=this.observers,r=t.length,i=t.slice(),o=0;o<r;o++)i[o].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(t){if(this.closed)throw new Mo;return n.prototype._trySubscribe.call(this,t)},e.prototype._subscribe=function(t){if(this.closed)throw new Mo;return this.hasError?(t.error(this.thrownError),Sn.EMPTY):this.isStopped?(t.complete(),Sn.EMPTY):(this.observers.push(t),new q3(this,t))},e.prototype.asObservable=function(){var t=new Rt;return t.source=this,t},e.create=function(t,r){return new TC(t,r)},e}(Rt),TC=function(n){Le(e,n);function e(t,r){var i=n.call(this)||this;return i.destination=t,i.source=r,i}return e.prototype.next=function(t){var r=this.destination;r&&r.next&&r.next(t)},e.prototype.error=function(t){var r=this.destination;r&&r.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){var r=this.source;return r?this.source.subscribe(t):Sn.EMPTY},e}(Zn);function fy(){return function(e){return e.lift(new mZ(e))}}var mZ=function(){function n(e){this.connectable=e}return n.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var i=new gZ(e,r),o=t.subscribe(i);return i.closed||(i.connection=r.connect()),o},n}(),gZ=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.connectable=r,i}return e.prototype._unsubscribe=function(){var t=this.connectable;if(!t){this.connection=null;return}this.connectable=null;var r=t._refCount;if(r<=0){this.connection=null;return}if(t._refCount=r-1,r>1){this.connection=null;return}var i=this.connection,o=t._connection;this.connection=null,o&&(!i||o===i)&&o.unsubscribe()},e}(ht),z3=function(n){Le(e,n);function e(t,r){var i=n.call(this)||this;return i.source=t,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,t=this._connection=new Sn,t.add(this.source.subscribe(new yZ(this.getSubject(),this))),t.closed&&(this._connection=null,t=Sn.EMPTY)),t},e.prototype.refCount=function(){return fy()(this)},e}(Rt),vZ=function(){var n=z3.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}}(),yZ=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.connectable=r,i}return e.prototype._error=function(t){this._unsubscribe(),n.prototype._error.call(this,t)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),n.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var r=t._connection;t._refCount=0,t._subject=null,t._connection=null,r&&r.unsubscribe()}},e}(H3);function _Z(n,e,t,r){return function(i){return i.lift(new bZ(n,e,t,r))}}var bZ=function(){function n(e,t,r,i){this.keySelector=e,this.elementSelector=t,this.durationSelector=r,this.subjectSelector=i}return n.prototype.call=function(e,t){return t.subscribe(new wZ(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},n}(),wZ=function(n){Le(e,n);function e(t,r,i,o,s){var a=n.call(this,t)||this;return a.keySelector=r,a.elementSelector=i,a.durationSelector=o,a.subjectSelector=s,a.groups=null,a.attemptedToUnsubscribe=!1,a.count=0,a}return e.prototype._next=function(t){var r;try{r=this.keySelector(t)}catch(i){this.error(i);return}this._group(t,r)},e.prototype._group=function(t,r){var i=this.groups;i||(i=this.groups=new Map);var o=i.get(r),s;if(this.elementSelector)try{s=this.elementSelector(t)}catch(u){this.error(u)}else s=t;if(!o){o=this.subjectSelector?this.subjectSelector():new Zn,i.set(r,o);var a=new b0(r,o,this);if(this.destination.next(a),this.durationSelector){var l=void 0;try{l=this.durationSelector(new b0(r,o))}catch(u){this.error(u);return}this.add(l.subscribe(new SZ(r,o,this)))}}o.closed||o.next(s)},e.prototype._error=function(t){var r=this.groups;r&&(r.forEach(function(i,o){i.error(t)}),r.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(r,i){r.complete()}),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,this.count===0&&n.prototype.unsubscribe.call(this))},e}(ht),SZ=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,r)||this;return o.key=t,o.group=r,o.parent=i,o}return e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this,r=t.parent,i=t.key;this.key=this.parent=null,r&&r.removeGroup(i)},e}(ht),b0=function(n){Le(e,n);function e(t,r,i){var o=n.call(this)||this;return o.key=t,o.groupSubject=r,o.refCountSubscription=i,o}return e.prototype._subscribe=function(t){var r=new Sn,i=this,o=i.refCountSubscription,s=i.groupSubject;return o&&!o.closed&&r.add(new CZ(o)),r.add(s.subscribe(t)),r},e}(Rt),CZ=function(n){Le(e,n);function e(t){var r=n.call(this)||this;return r.parent=t,t.count++,r}return e.prototype.unsubscribe=function(){var t=this.parent;!t.closed&&!this.closed&&(n.prototype.unsubscribe.call(this),t.count-=1,t.count===0&&t.attemptedToUnsubscribe&&t.unsubscribe())},e}(Sn),W3=function(n){Le(e,n);function e(t){var r=n.call(this)||this;return r._value=t,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(t){var r=n.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Mo;return this._value},e.prototype.next=function(t){n.prototype.next.call(this,this._value=t)},e}(Zn),EZ=function(n){Le(e,n);function e(t,r){return n.call(this)||this}return e.prototype.schedule=function(t,r){return this},e}(Sn),rc=function(n){Le(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.scheduler=t,i.work=r,i.pending=!1,i}return e.prototype.schedule=function(t,r){if(r===void 0&&(r=0),this.closed)return this;this.state=t;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,r)),this.pending=!0,this.delay=r,this.id=this.id||this.requestAsyncId(o,this.id,r),this},e.prototype.requestAsyncId=function(t,r,i){return i===void 0&&(i=0),setInterval(t.flush.bind(t,this),i)},e.prototype.recycleAsyncId=function(t,r,i){if(i===void 0&&(i=0),i!==null&&this.delay===i&&this.pending===!1)return r;clearInterval(r)},e.prototype.execute=function(t,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,r){var i=!1,o=void 0;try{this.work(t)}catch(s){i=!0,o=!!s&&s||new Error(s)}if(i)return this.unsubscribe(),o},e.prototype._unsubscribe=function(){var t=this.id,r=this.scheduler,i=r.actions,o=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,o!==-1&&i.splice(o,1),t!=null&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null},e}(EZ),OZ=function(n){Le(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.scheduler=t,i.work=r,i}return e.prototype.schedule=function(t,r){return r===void 0&&(r=0),r>0?n.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},e.prototype.execute=function(t,r){return r>0||this.closed?n.prototype.execute.call(this,t,r):this._execute(t,r)},e.prototype.requestAsyncId=function(t,r,i){return i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0?n.prototype.requestAsyncId.call(this,t,r,i):t.flush(this)},e}(rc),w0=function(){function n(e,t){t===void 0&&(t=n.now),this.SchedulerAction=e,this.now=t}return n.prototype.schedule=function(e,t,r){return t===void 0&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},n.now=function(){return Date.now()},n}(),ic=function(n){Le(e,n);function e(t,r){r===void 0&&(r=w0.now);var i=n.call(this,t,function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return e.prototype.schedule=function(t,r,i){return r===void 0&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(t,r,i):n.prototype.schedule.call(this,t,r,i)},e.prototype.flush=function(t){var r=this.actions;if(this.active){r.push(t);return}var i;this.active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=r.shift());if(this.active=!1,i){for(;t=r.shift();)t.unsubscribe();throw i}},e}(w0),kZ=function(n){Le(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(ic),K3=new kZ(OZ),G3=K3,Ya=new Rt(function(n){return n.complete()});function ll(n){return n?TZ(n):Ya}function TZ(n){return new Rt(function(e){return n.schedule(function(){return e.complete()})})}function Qr(n){return n&&typeof n.schedule=="function"}var Y3=function(n){return function(e){for(var t=0,r=n.length;t<r&&!e.closed;t++)e.next(n[t]);e.complete()}};function hy(n,e){return new Rt(function(t){var r=new Sn,i=0;return r.add(e.schedule(function(){if(i===n.length){t.complete();return}t.next(n[i++]),t.closed||r.add(this.schedule())})),r})}function oc(n,e){return e?hy(n,e):new Rt(Y3(n))}function op(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n[n.length-1];return Qr(t)?(n.pop(),hy(n,t)):oc(n)}function dy(n,e){return e?new Rt(function(t){return e.schedule(PZ,0,{error:n,subscriber:t})}):new Rt(function(t){return t.error(n)})}function PZ(n){var e=n.error,t=n.subscriber;t.error(e)}var S0;S0||(S0={});var fo=function(){function n(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue=e==="N"}return n.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},n.prototype.do=function(e,t,r){var i=this.kind;switch(i){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},n.prototype.accept=function(e,t,r){return e&&typeof e.next=="function"?this.observe(e):this.do(e,t,r)},n.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return op(this.value);case"E":return dy(this.error);case"C":return ll()}throw new Error("unexpected notification kind value")},n.createNext=function(e){return typeof e<"u"?new n("N",e):n.undefinedValueNotification},n.createError=function(e){return new n("E",void 0,e)},n.createComplete=function(){return n.completeNotification},n.completeNotification=new n("C"),n.undefinedValueNotification=new n("N",void 0),n}();function IZ(n,e){return e===void 0&&(e=0),function(r){return r.lift(new AZ(n,e))}}var AZ=function(){function n(e,t){t===void 0&&(t=0),this.scheduler=e,this.delay=t}return n.prototype.call=function(e,t){return t.subscribe(new J3(e,this.scheduler,this.delay))},n}(),J3=function(n){Le(e,n);function e(t,r,i){i===void 0&&(i=0);var o=n.call(this,t)||this;return o.scheduler=r,o.delay=i,o}return e.dispatch=function(t){var r=t.notification,i=t.destination;r.observe(i),this.unsubscribe()},e.prototype.scheduleMessage=function(t){var r=this.destination;r.add(this.scheduler.schedule(e.dispatch,this.delay,new RZ(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(fo.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(fo.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(fo.createComplete()),this.unsubscribe()},e}(ht),RZ=function(){function n(e,t){this.notification=e,this.destination=t}return n}(),py=function(n){Le(e,n);function e(t,r,i){t===void 0&&(t=Number.POSITIVE_INFINITY),r===void 0&&(r=Number.POSITIVE_INFINITY);var o=n.call(this)||this;return o.scheduler=i,o._events=[],o._infiniteTimeWindow=!1,o._bufferSize=t<1?1:t,o._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(o._infiniteTimeWindow=!0,o.next=o.nextInfiniteTimeWindow):o.next=o.nextTimeWindow,o}return e.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var r=this._events;r.push(t),r.length>this._bufferSize&&r.shift()}n.prototype.next.call(this,t)},e.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new xZ(this._getNow(),t)),this._trimBufferThenGetEvents()),n.prototype.next.call(this,t)},e.prototype._subscribe=function(t){var r=this._infiniteTimeWindow,i=r?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,s=i.length,a;if(this.closed)throw new Mo;if(this.isStopped||this.hasError?a=Sn.EMPTY:(this.observers.push(t),a=new q3(this,t)),o&&t.add(t=new J3(t,o)),r)for(var l=0;l<s&&!t.closed;l++)t.next(i[l]);else for(var l=0;l<s&&!t.closed;l++)t.next(i[l].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),a},e.prototype._getNow=function(){return(this.scheduler||G3).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),r=this._bufferSize,i=this._windowTime,o=this._events,s=o.length,a=0;a<s&&!(t-o[a].time<i);)a++;return s>r&&(a=Math.max(a,s-r)),a>0&&o.splice(0,a),o},e}(Zn),xZ=function(){function n(e,t){this.time=e,this.value=t}return n}(),ul=function(n){Le(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return e.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),Sn.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),Sn.EMPTY):n.prototype._subscribe.call(this,t)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(t){this.hasCompleted||n.prototype.error.call(this,t)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&n.prototype.next.call(this,this.value),n.prototype.complete.call(this)},e}(Zn),NZ=1,MZ=function(){return Promise.resolve()}(),C0={};function PC(n){return n in C0?(delete C0[n],!0):!1}var IC={setImmediate:function(n){var e=NZ++;return C0[e]=!0,MZ.then(function(){return PC(e)&&n()}),e},clearImmediate:function(n){PC(n)}},DZ=function(n){Le(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.scheduler=t,i.work=r,i}return e.prototype.requestAsyncId=function(t,r,i){return i===void 0&&(i=0),i!==null&&i>0?n.prototype.requestAsyncId.call(this,t,r,i):(t.actions.push(this),t.scheduled||(t.scheduled=IC.setImmediate(t.flush.bind(t,null))))},e.prototype.recycleAsyncId=function(t,r,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return n.prototype.recycleAsyncId.call(this,t,r,i);t.actions.length===0&&(IC.clearImmediate(r),t.scheduled=void 0)},e}(rc),jZ=function(n){Le(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var r=this.actions,i,o=-1,s=r.length;t=t||r.shift();do if(i=t.execute(t.state,t.delay))break;while(++o<s&&(t=r.shift()));if(this.active=!1,i){for(;++o<s&&(t=r.shift());)t.unsubscribe();throw i}},e}(ic),Q3=new jZ(DZ),ih=Q3,Z3=new ic(rc),wr=Z3,LZ=function(n){Le(e,n);function e(t,r){var i=n.call(this,t,r)||this;return i.scheduler=t,i.work=r,i}return e.prototype.requestAsyncId=function(t,r,i){return i===void 0&&(i=0),i!==null&&i>0?n.prototype.requestAsyncId.call(this,t,r,i):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(function(){return t.flush(null)})))},e.prototype.recycleAsyncId=function(t,r,i){if(i===void 0&&(i=0),i!==null&&i>0||i===null&&this.delay>0)return n.prototype.recycleAsyncId.call(this,t,r,i);t.actions.length===0&&(cancelAnimationFrame(r),t.scheduled=void 0)},e}(rc),BZ=function(n){Le(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var r=this.actions,i,o=-1,s=r.length;t=t||r.shift();do if(i=t.execute(t.state,t.delay))break;while(++o<s&&(t=r.shift()));if(this.active=!1,i){for(;++o<s&&(t=r.shift());)t.unsubscribe();throw i}},e}(ic),X3=new BZ(LZ),FZ=X3,UZ=function(n){Le(e,n);function e(t,r){t===void 0&&(t=$3),r===void 0&&(r=Number.POSITIVE_INFINITY);var i=n.call(this,t,function(){return i.frame})||this;return i.maxFrames=r,i.frame=0,i.index=-1,i}return e.prototype.flush=function(){for(var t=this,r=t.actions,i=t.maxFrames,o,s;(s=r[0])&&s.delay<=i&&(r.shift(),this.frame=s.delay,!(o=s.execute(s.state,s.delay))););if(o){for(;s=r.shift();)s.unsubscribe();throw o}},e.frameTimeFactor=10,e}(ic),$3=function(n){Le(e,n);function e(t,r,i){i===void 0&&(i=t.index+=1);var o=n.call(this,t,r)||this;return o.scheduler=t,o.work=r,o.index=i,o.active=!0,o.index=t.index=i,o}return e.prototype.schedule=function(t,r){if(r===void 0&&(r=0),!this.id)return n.prototype.schedule.call(this,t,r);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(t,r)},e.prototype.requestAsyncId=function(t,r,i){i===void 0&&(i=0),this.delay=t.frame+i;var o=t.actions;return o.push(this),o.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,r,i){},e.prototype._execute=function(t,r){if(this.active===!0)return n.prototype._execute.call(this,t,r)},e.sortActions=function(t,r){return t.delay===r.delay?t.index===r.index?0:t.index>r.index?1:-1:t.delay>r.delay?1:-1},e}(rc);function Bi(){}function VZ(n){return!!n&&(n instanceof Rt||typeof n.lift=="function"&&typeof n.subscribe=="function")}var qZ=function(){function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n}(),Ja=qZ,HZ=function(){function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n}(),sc=HZ,zZ=function(){function n(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return n.prototype=Object.create(Error.prototype),n}(),eI=zZ;function di(n,e){return function(r){if(typeof n!="function")throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new WZ(n,e))}}var WZ=function(){function n(e,t){this.project=e,this.thisArg=t}return n.prototype.call=function(e,t){return t.subscribe(new KZ(e,this.project,this.thisArg))},n}(),KZ=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.project=r,o.count=0,o.thisArg=i||o,o}return e.prototype._next=function(t){var r;try{r=this.project.call(this.thisArg,t,this.count++)}catch(i){this.destination.error(i);return}this.destination.next(r)},e}(ht);function tI(n,e,t){if(e)if(Qr(e))t=e;else return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return tI(n,t).apply(void 0,r).pipe(di(function(o){return br(o)?e.apply(void 0,o):e(o)}))};return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=this,s,a={context:o,subject:s,callbackFunc:n,scheduler:t};return new Rt(function(l){if(t){var f={args:r,subscriber:l,params:a};return t.schedule(GZ,0,f)}else{if(!s){s=new ul;var u=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];s.next(c.length<=1?c[0]:c),s.complete()};try{n.apply(o,r.concat([u]))}catch(c){cy(s)?s.error(c):console.warn(c)}}return s.subscribe(l)}})}}function GZ(n){var e=this,t=n.args,r=n.subscriber,i=n.params,o=i.callbackFunc,s=i.context,a=i.scheduler,l=i.subject;if(!l){l=i.subject=new ul;var u=function(){for(var f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];var d=f.length<=1?f[0]:f;e.add(a.schedule(YZ,0,{value:d,subject:l}))};try{o.apply(s,t.concat([u]))}catch(f){l.error(f)}}this.add(l.subscribe(r))}function YZ(n){var e=n.value,t=n.subject;t.next(e),t.complete()}function nI(n,e,t){if(e)if(Qr(e))t=e;else return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return nI(n,t).apply(void 0,r).pipe(di(function(o){return br(o)?e.apply(void 0,o):e(o)}))};return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o={subject:void 0,args:r,callbackFunc:n,scheduler:t,context:this};return new Rt(function(s){var a=o.context,l=o.subject;if(t)return t.schedule(JZ,0,{params:o,subscriber:s,context:a});if(!l){l=o.subject=new ul;var u=function(){for(var f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];var d=f.shift();if(d){l.error(d);return}l.next(f.length<=1?f[0]:f),l.complete()};try{n.apply(a,r.concat([u]))}catch(f){cy(l)?l.error(f):console.warn(f)}}return l.subscribe(s)})}}function JZ(n){var e=this,t=n.params,r=n.subscriber,i=n.context,o=t.callbackFunc,s=t.args,a=t.scheduler,l=t.subject;if(!l){l=t.subject=new ul;var u=function(){for(var f=[],c=0;c<arguments.length;c++)f[c]=arguments[c];var d=f.shift();if(d)e.add(a.schedule(AC,0,{err:d,subject:l}));else{var g=f.length<=1?f[0]:f;e.add(a.schedule(QZ,0,{value:g,subject:l}))}};try{o.apply(i,s.concat([u]))}catch(f){this.add(a.schedule(AC,0,{err:f,subject:l}))}}this.add(l.subscribe(r))}function QZ(n){var e=n.value,t=n.subject;t.next(e),t.complete()}function AC(n){var e=n.err,t=n.subject;t.error(e)}var $s=function(n){Le(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.notifyNext=function(t,r,i,o,s){this.destination.next(r)},e.prototype.notifyError=function(t,r){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(ht),ZZ=function(n){Le(e,n);function e(t,r,i){var o=n.call(this)||this;return o.parent=t,o.outerValue=r,o.outerIndex=i,o.index=0,o}return e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(ht),XZ=function(n){return function(e){return n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,va),e}};function $Z(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ts=$Z(),eX=function(n){return function(e){var t=n[ts]();do{var r=void 0;try{r=t.next()}catch(i){return e.error(i),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}while(!0);return typeof t.return=="function"&&e.add(function(){t.return&&t.return()}),e}},tX=function(n){return function(e){var t=n[al]();if(typeof t.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)}},rI=function(n){return n&&typeof n.length=="number"&&typeof n!="function"};function iI(n){return!!n&&typeof n.subscribe!="function"&&typeof n.then=="function"}var Iu=function(n){if(!!n&&typeof n[al]=="function")return tX(n);if(rI(n))return Y3(n);if(iI(n))return XZ(n);if(!!n&&typeof n[ts]=="function")return eX(n);var e=uy(n)?"an invalid object":"'"+n+"'",t="You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(t)};function vo(n,e,t,r,i){if(i===void 0&&(i=new ZZ(n,t,r)),!i.closed)return e instanceof Rt?e.subscribe(i):Iu(e)(i)}var RC={};function nX(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=void 0,r=void 0;return Qr(n[n.length-1])&&(r=n.pop()),typeof n[n.length-1]=="function"&&(t=n.pop()),n.length===1&&br(n[0])&&(n=n[0]),oc(n,r).lift(new my(t))}var my=function(){function n(e){this.resultSelector=e}return n.prototype.call=function(e,t){return t.subscribe(new rX(e,this.resultSelector))},n}(),rX=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return e.prototype._next=function(t){this.values.push(RC),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,r=t.length;if(r===0)this.destination.complete();else{this.active=r,this.toRespond=r;for(var i=0;i<r;i++){var o=t[i];this.add(vo(this,o,void 0,i))}}},e.prototype.notifyComplete=function(t){(this.active-=1)===0&&this.destination.complete()},e.prototype.notifyNext=function(t,r,i){var o=this.values,s=o[i],a=this.toRespond?s===RC?--this.toRespond:this.toRespond:0;o[i]=r,a===0&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var r;try{r=this.resultSelector.apply(this,t)}catch(i){this.destination.error(i);return}this.destination.next(r)},e}($s);function iX(n,e){return new Rt(function(t){var r=new Sn;return r.add(e.schedule(function(){var i=n[al]();r.add(i.subscribe({next:function(o){r.add(e.schedule(function(){return t.next(o)}))},error:function(o){r.add(e.schedule(function(){return t.error(o)}))},complete:function(){r.add(e.schedule(function(){return t.complete()}))}}))})),r})}function oX(n,e){return new Rt(function(t){var r=new Sn;return r.add(e.schedule(function(){return n.then(function(i){r.add(e.schedule(function(){t.next(i),r.add(e.schedule(function(){return t.complete()}))}))},function(i){r.add(e.schedule(function(){return t.error(i)}))})})),r})}function sX(n,e){if(!n)throw new Error("Iterable cannot be null");return new Rt(function(t){var r=new Sn,i;return r.add(function(){i&&typeof i.return=="function"&&i.return()}),r.add(e.schedule(function(){i=n[ts](),r.add(e.schedule(function(){if(!t.closed){var o,s;try{var a=i.next();o=a.value,s=a.done}catch(l){t.error(l);return}s?t.complete():(t.next(o),this.schedule())}}))})),r})}function aX(n){return n&&typeof n[al]=="function"}function lX(n){return n&&typeof n[ts]=="function"}function oI(n,e){if(n!=null){if(aX(n))return iX(n,e);if(iI(n))return oX(n,e);if(rI(n))return hy(n,e);if(lX(n)||typeof n=="string")return sX(n,e)}throw new TypeError((n!==null&&typeof n||n)+" is not observable")}function bo(n,e){return e?oI(n,e):n instanceof Rt?n:new Rt(Iu(n))}var Cn=function(n){Le(e,n);function e(t){var r=n.call(this)||this;return r.parent=t,r}return e.prototype._next=function(t){this.parent.notifyNext(t)},e.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(ht),En=function(n){Le(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(ht);function On(n,e){if(!e.closed){if(n instanceof Rt)return n.subscribe(e);var t;try{t=Iu(n)(e)}catch(r){e.error(r)}return t}}function Hs(n,e,t){return t===void 0&&(t=Number.POSITIVE_INFINITY),typeof e=="function"?function(r){return r.pipe(Hs(function(i,o){return bo(n(i,o)).pipe(di(function(s,a){return e(i,s,o,a)}))},t))}:(typeof e=="number"&&(t=e),function(r){return r.lift(new uX(n,t))})}var uX=function(){function n(e,t){t===void 0&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return n.prototype.call=function(e,t){return t.subscribe(new cX(e,this.project,this.concurrent))},n}(),cX=function(n){Le(e,n);function e(t,r,i){i===void 0&&(i=Number.POSITIVE_INFINITY);var o=n.call(this,t)||this;return o.project=r,o.concurrent=i,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var r,i=this.index++;try{r=this.project(t,i)}catch(o){this.destination.error(o);return}this.active++,this._innerSub(r)},e.prototype._innerSub=function(t){var r=new Cn(this),i=this.destination;i.add(r);var o=On(t,r);o!==r&&i.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):this.active===0&&this.hasCompleted&&this.destination.complete()},e}(En),fX=Hs;function gy(n){return n===void 0&&(n=Number.POSITIVE_INFINITY),Hs(es,n)}function sI(){return gy(1)}function Au(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return sI()(op.apply(void 0,n))}function vy(n){return new Rt(function(e){var t;try{t=n()}catch(i){e.error(i);return}var r=t?bo(t):ll();return r.subscribe(e)})}function hX(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(n.length===1){var t=n[0];if(br(t))return rf(t,null);if(uy(t)&&Object.getPrototypeOf(t)===Object.prototype){var r=Object.keys(t);return rf(r.map(function(o){return t[o]}),r)}}if(typeof n[n.length-1]=="function"){var i=n.pop();return n=n.length===1&&br(n[0])?n[0]:n,rf(n,null).pipe(di(function(o){return i.apply(void 0,o)}))}return rf(n,null)}function rf(n,e){return new Rt(function(t){var r=n.length;if(r===0){t.complete();return}for(var i=new Array(r),o=0,s=0,a=function(u){var f=bo(n[u]),c=!1;t.add(f.subscribe({next:function(d){c||(c=!0,s++),i[u]=d},error:function(d){return t.error(d)},complete:function(){o++,(o===r||!c)&&(s===r&&t.next(e?e.reduce(function(d,g,h){return d[g]=i[h],d},{}):i),t.complete())}}))},l=0;l<r;l++)a(l)})}function aI(n,e,t,r){return Ga(t)&&(r=t,t=void 0),r?aI(n,e,t).pipe(di(function(i){return br(i)?r.apply(void 0,i):r(i)})):new Rt(function(i){function o(s){arguments.length>1?i.next(Array.prototype.slice.call(arguments)):i.next(s)}lI(n,e,o,i,t)})}function lI(n,e,t,r,i){var o;if(mX(n)){var s=n;n.addEventListener(e,t,i),o=function(){return s.removeEventListener(e,t,i)}}else if(pX(n)){var a=n;n.on(e,t),o=function(){return a.off(e,t)}}else if(dX(n)){var l=n;n.addListener(e,t),o=function(){return l.removeListener(e,t)}}else if(n&&n.length)for(var u=0,f=n.length;u<f;u++)lI(n[u],e,t,r,i);else throw new TypeError("Invalid event target");r.add(o)}function dX(n){return n&&typeof n.addListener=="function"&&typeof n.removeListener=="function"}function pX(n){return n&&typeof n.on=="function"&&typeof n.off=="function"}function mX(n){return n&&typeof n.addEventListener=="function"&&typeof n.removeEventListener=="function"}function uI(n,e,t){return t?uI(n,e).pipe(di(function(r){return br(r)?t.apply(void 0,r):t(r)})):new Rt(function(r){var i=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return r.next(s.length===1?s[0]:s)},o;try{o=n(i)}catch(s){r.error(s);return}if(!!Ga(e))return function(){return e(i,o)}})}function gX(n,e,t,r,i){var o,s;if(arguments.length==1){var a=n;s=a.initialState,e=a.condition,t=a.iterate,o=a.resultSelector||es,i=a.scheduler}else r===void 0||Qr(r)?(s=n,o=es,i=r):(s=n,o=r);return new Rt(function(l){var u=s;if(i)return i.schedule(vX,0,{subscriber:l,iterate:t,condition:e,resultSelector:o,state:u});do{if(e){var f=void 0;try{f=e(u)}catch(d){l.error(d);return}if(!f){l.complete();break}}var c=void 0;try{c=o(u)}catch(d){l.error(d);return}if(l.next(c),l.closed)break;try{u=t(u)}catch(d){l.error(d);return}}while(!0)})}function vX(n){var e=n.subscriber,t=n.condition;if(!e.closed){if(n.needIterate)try{n.state=n.iterate(n.state)}catch(o){e.error(o);return}else n.needIterate=!0;if(t){var r=void 0;try{r=t(n.state)}catch(o){e.error(o);return}if(!r){e.complete();return}if(e.closed)return}var i;try{i=n.resultSelector(n.state)}catch(o){e.error(o);return}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(n)}}function yX(n,e,t){return e===void 0&&(e=Ya),t===void 0&&(t=Ya),vy(function(){return n()?e:t})}function Qa(n){return!br(n)&&n-parseFloat(n)+1>=0}function _X(n,e){return n===void 0&&(n=0),e===void 0&&(e=wr),(!Qa(n)||n<0)&&(n=0),(!e||typeof e.schedule!="function")&&(e=wr),new Rt(function(t){return t.add(e.schedule(bX,n,{subscriber:t,counter:0,period:n})),t})}function bX(n){var e=n.subscriber,t=n.counter,r=n.period;e.next(t),this.schedule({subscriber:e,counter:t+1,period:r},r)}function cI(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=Number.POSITIVE_INFINITY,r=null,i=n[n.length-1];return Qr(i)?(r=n.pop(),n.length>1&&typeof n[n.length-1]=="number"&&(t=n.pop())):typeof i=="number"&&(t=n.pop()),r===null&&n.length===1&&n[0]instanceof Rt?n[0]:gy(t)(oc(n,r))}var fI=new Rt(Bi);function wX(){return fI}function E0(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(n.length===0)return Ya;var t=n[0],r=n.slice(1);return n.length===1&&br(t)?E0.apply(void 0,t):new Rt(function(i){var o=function(){return i.add(E0.apply(void 0,r).subscribe(i))};return bo(t).subscribe({next:function(s){i.next(s)},error:o,complete:o})})}function SX(n,e){return e?new Rt(function(t){var r=Object.keys(n),i=new Sn;return i.add(e.schedule(CX,0,{keys:r,index:0,subscriber:t,subscription:i,obj:n})),i}):new Rt(function(t){for(var r=Object.keys(n),i=0;i<r.length&&!t.closed;i++){var o=r[i];n.hasOwnProperty(o)&&t.next([o,n[o]])}t.complete()})}function CX(n){var e=n.keys,t=n.index,r=n.subscriber,i=n.subscription,o=n.obj;if(!r.closed)if(t<e.length){var s=e[t];r.next([s,o[s]]),i.add(this.schedule({keys:e,index:t+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}function hI(n,e){function t(){return!t.pred.apply(t.thisArg,arguments)}return t.pred=n,t.thisArg=e,t}function ns(n,e){return function(r){return r.lift(new EX(n,e))}}var EX=function(){function n(e,t){this.predicate=e,this.thisArg=t}return n.prototype.call=function(e,t){return t.subscribe(new OX(e,this.predicate,this.thisArg))},n}(),OX=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.predicate=r,o.thisArg=i,o.count=0,o}return e.prototype._next=function(t){var r;try{r=this.predicate.call(this.thisArg,t,this.count++)}catch(i){this.destination.error(i);return}r&&this.destination.next(t)},e}(ht);function kX(n,e,t){return[ns(e,t)(new Rt(Iu(n))),ns(hI(e,t))(new Rt(Iu(n)))]}function dI(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(n.length===1)if(br(n[0]))n=n[0];else return n[0];return oc(n,void 0).lift(new TX)}var TX=function(){function n(){}return n.prototype.call=function(e,t){return t.subscribe(new PX(e))},n}(),PX=function(n){Le(e,n);function e(t){var r=n.call(this,t)||this;return r.hasFirst=!1,r.observables=[],r.subscriptions=[],r}return e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,r=t.length;if(r===0)this.destination.complete();else{for(var i=0;i<r&&!this.hasFirst;i++){var o=t[i],s=vo(this,o,void 0,i);this.subscriptions&&this.subscriptions.push(s),this.add(s)}this.observables=null}},e.prototype.notifyNext=function(t,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==i){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(r)},e}($s);function IX(n,e,t){return n===void 0&&(n=0),new Rt(function(r){e===void 0&&(e=n,n=0);var i=0,o=n;if(t)return t.schedule(AX,0,{index:i,count:e,start:n,subscriber:r});do{if(i++>=e){r.complete();break}if(r.next(o++),r.closed)break}while(!0)})}function AX(n){var e=n.start,t=n.index,r=n.count,i=n.subscriber;if(t>=r){i.complete();return}i.next(e),!i.closed&&(n.index=t+1,n.start=e+1,this.schedule(n))}function pI(n,e,t){n===void 0&&(n=0);var r=-1;return Qa(e)?r=Number(e)<1&&1||Number(e):Qr(e)&&(t=e),Qr(t)||(t=wr),new Rt(function(i){var o=Qa(n)?n:+n-t.now();return t.schedule(RX,o,{index:0,period:r,subscriber:i})})}function RX(n){var e=n.index,t=n.period,r=n.subscriber;if(r.next(e),!r.closed){if(t===-1)return r.complete();n.index=e+1,this.schedule(n,t)}}function xX(n,e){return new Rt(function(t){var r;try{r=n()}catch(a){t.error(a);return}var i;try{i=e(r)}catch(a){t.error(a);return}var o=i?bo(i):Ya,s=o.subscribe(t);return function(){s.unsubscribe(),r&&r.unsubscribe()}})}function mI(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n[n.length-1];return typeof t=="function"&&n.pop(),oc(n,void 0).lift(new gI(t))}var gI=function(){function n(e){this.resultSelector=e}return n.prototype.call=function(e,t){return t.subscribe(new NX(e,this.resultSelector))},n}(),NX=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.resultSelector=r,o.iterators=[],o.active=0,o.resultSelector=typeof r=="function"?r:void 0,o}return e.prototype._next=function(t){var r=this.iterators;br(t)?r.push(new DX(t)):typeof t[ts]=="function"?r.push(new MX(t[ts]())):r.push(new jX(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,r=t.length;if(this.unsubscribe(),r===0){this.destination.complete();return}this.active=r;for(var i=0;i<r;i++){var o=t[i];if(o.stillUnsubscribed){var s=this.destination;s.add(o.subscribe())}else this.active--}},e.prototype.notifyInactive=function(){this.active--,this.active===0&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,r=t.length,i=this.destination,o=0;o<r;o++){var s=t[o];if(typeof s.hasValue=="function"&&!s.hasValue())return}for(var a=!1,l=[],o=0;o<r;o++){var s=t[o],u=s.next();if(s.hasCompleted()&&(a=!0),u.done){i.complete();return}l.push(u.value)}this.resultSelector?this._tryresultSelector(l):i.next(l),a&&i.complete()},e.prototype._tryresultSelector=function(t){var r;try{r=this.resultSelector.apply(this,t)}catch(i){this.destination.error(i);return}this.destination.next(r)},e}(ht),MX=function(){function n(e){this.iterator=e,this.nextResult=e.next()}return n.prototype.hasValue=function(){return!0},n.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},n.prototype.hasCompleted=function(){var e=this.nextResult;return Boolean(e&&e.done)},n}(),DX=function(){function n(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return n.prototype[ts]=function(){return this},n.prototype.next=function(e){var t=this.index++,r=this.array;return t<this.length?{value:r[t],done:!1}:{value:null,done:!0}},n.prototype.hasValue=function(){return this.array.length>this.index},n.prototype.hasCompleted=function(){return this.array.length===this.index},n}(),jX=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.parent=r,o.observable=i,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return e.prototype[ts]=function(){return this},e.prototype.next=function(){var t=this.buffer;return t.length===0&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return this.buffer.length===0&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t){this.buffer.push(t),this.parent.checkIterators()},e.prototype.subscribe=function(){return On(this.observable,new Cn(this))},e}(En);const LX=Object.freeze(Object.defineProperty({__proto__:null,Observable:Rt,ConnectableObservable:z3,GroupedObservable:b0,observable:al,Subject:Zn,BehaviorSubject:W3,ReplaySubject:py,AsyncSubject:ul,asap:ih,asapScheduler:Q3,async:wr,asyncScheduler:Z3,queue:G3,queueScheduler:K3,animationFrame:FZ,animationFrameScheduler:X3,VirtualTimeScheduler:UZ,VirtualAction:$3,Scheduler:w0,Subscription:Sn,Subscriber:ht,Notification:fo,get NotificationKind(){return S0},pipe:_0,noop:Bi,identity:es,isObservable:VZ,ArgumentOutOfRangeError:Ja,EmptyError:sc,ObjectUnsubscribedError:Mo,UnsubscriptionError:tu,TimeoutError:eI,bindCallback:tI,bindNodeCallback:nI,combineLatest:nX,concat:Au,defer:vy,empty:ll,forkJoin:hX,from:bo,fromEvent:aI,fromEventPattern:uI,generate:gX,iif:yX,interval:_X,merge:cI,never:wX,of:op,onErrorResumeNext:E0,pairs:SX,partition:kX,race:dI,range:IX,throwError:dy,timer:pI,using:xX,zip:mI,scheduled:oI,EMPTY:Ya,NEVER:fI,config:ai},Symbol.toStringTag,{value:"Module"})),sp=kO(LX);function vI(n){return function(t){return t.lift(new BX(n))}}var BX=function(){function n(e){this.durationSelector=e}return n.prototype.call=function(e,t){return t.subscribe(new FX(e,this.durationSelector))},n}(),FX=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.durationSelector=r,i.hasValue=!1,i}return e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var r=void 0;try{var i=this.durationSelector;r=i(t)}catch(s){return this.destination.error(s)}var o=On(r,new Cn(this));!o||o.closed?this.clearThrottle():this.add(this.throttled=o)}},e.prototype.clearThrottle=function(){var t=this,r=t.value,i=t.hasValue,o=t.throttled;o&&(this.remove(o),this.throttled=void 0,o.unsubscribe()),i&&(this.value=void 0,this.hasValue=!1,this.destination.next(r))},e.prototype.notifyNext=function(){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(En);function UX(n,e){return e===void 0&&(e=wr),vI(function(){return pI(n,e)})}function VX(n){return function(t){return t.lift(new qX(n))}}var qX=function(){function n(e){this.closingNotifier=e}return n.prototype.call=function(e,t){return t.subscribe(new HX(e,this.closingNotifier))},n}(),HX=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.buffer=[],i.add(On(r,new Cn(i))),i}return e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(){var t=this.buffer;this.buffer=[],this.destination.next(t)},e}(En);function zX(n,e){return e===void 0&&(e=null),function(r){return r.lift(new WX(n,e))}}var WX=function(){function n(e,t){this.bufferSize=e,this.startBufferEvery=t,!t||e===t?this.subscriberClass=KX:this.subscriberClass=GX}return n.prototype.call=function(e,t){return t.subscribe(new this.subscriberClass(e,this.bufferSize,this.startBufferEvery))},n}(),KX=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.bufferSize=r,i.buffer=[],i}return e.prototype._next=function(t){var r=this.buffer;r.push(t),r.length==this.bufferSize&&(this.destination.next(r),this.buffer=[])},e.prototype._complete=function(){var t=this.buffer;t.length>0&&this.destination.next(t),n.prototype._complete.call(this)},e}(ht),GX=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.bufferSize=r,o.startBufferEvery=i,o.buffers=[],o.count=0,o}return e.prototype._next=function(t){var r=this,i=r.bufferSize,o=r.startBufferEvery,s=r.buffers,a=r.count;this.count++,a%o===0&&s.push([]);for(var l=s.length;l--;){var u=s[l];u.push(t),u.length===i&&(s.splice(l,1),this.destination.next(u))}},e.prototype._complete=function(){for(var t=this,r=t.buffers,i=t.destination;r.length>0;){var o=r.shift();o.length>0&&i.next(o)}n.prototype._complete.call(this)},e}(ht);function YX(n){var e=arguments.length,t=wr;Qr(arguments[arguments.length-1])&&(t=arguments[arguments.length-1],e--);var r=null;e>=2&&(r=arguments[1]);var i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),function(s){return s.lift(new JX(n,r,i,t))}}var JX=function(){function n(e,t,r,i){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=r,this.scheduler=i}return n.prototype.call=function(e,t){return t.subscribe(new ZX(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},n}(),QX=function(){function n(){this.buffer=[]}return n}(),ZX=function(n){Le(e,n);function e(t,r,i,o,s){var a=n.call(this,t)||this;a.bufferTimeSpan=r,a.bufferCreationInterval=i,a.maxBufferSize=o,a.scheduler=s,a.contexts=[];var l=a.openContext();if(a.timespanOnly=i==null||i<0,a.timespanOnly){var u={subscriber:a,context:l,bufferTimeSpan:r};a.add(l.closeAction=s.schedule(xC,r,u))}else{var f={subscriber:a,context:l},c={bufferTimeSpan:r,bufferCreationInterval:i,subscriber:a,scheduler:s};a.add(l.closeAction=s.schedule(yI,r,f)),a.add(s.schedule(XX,i,c))}return a}return e.prototype._next=function(t){for(var r=this.contexts,i=r.length,o,s=0;s<i;s++){var a=r[s],l=a.buffer;l.push(t),l.length==this.maxBufferSize&&(o=a)}o&&this.onBufferFull(o)},e.prototype._error=function(t){this.contexts.length=0,n.prototype._error.call(this,t)},e.prototype._complete=function(){for(var t=this,r=t.contexts,i=t.destination;r.length>0;){var o=r.shift();i.next(o.buffer)}n.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var r=t.closeAction;if(r.unsubscribe(),this.remove(r),!this.closed&&this.timespanOnly){t=this.openContext();var i=this.bufferTimeSpan,o={subscriber:this,context:t,bufferTimeSpan:i};this.add(t.closeAction=this.scheduler.schedule(xC,i,o))}},e.prototype.openContext=function(){var t=new QX;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var r=this.contexts,i=r?r.indexOf(t):-1;i>=0&&r.splice(r.indexOf(t),1)},e}(ht);function xC(n){var e=n.subscriber,t=n.context;t&&e.closeContext(t),e.closed||(n.context=e.openContext(),n.context.closeAction=this.schedule(n,n.bufferTimeSpan))}function XX(n){var e=n.bufferCreationInterval,t=n.bufferTimeSpan,r=n.subscriber,i=n.scheduler,o=r.openContext(),s=this;r.closed||(r.add(o.closeAction=i.schedule(yI,t,{subscriber:r,context:o})),s.schedule(n,e))}function yI(n){var e=n.subscriber,t=n.context;e.closeContext(t)}function $X(n,e){return function(r){return r.lift(new e$(n,e))}}var e$=function(){function n(e,t){this.openings=e,this.closingSelector=t}return n.prototype.call=function(e,t){return t.subscribe(new t$(e,this.openings,this.closingSelector))},n}(),t$=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.closingSelector=i,o.contexts=[],o.add(vo(o,r)),o}return e.prototype._next=function(t){for(var r=this.contexts,i=r.length,o=0;o<i;o++)r[o].buffer.push(t)},e.prototype._error=function(t){for(var r=this.contexts;r.length>0;){var i=r.shift();i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,n.prototype._error.call(this,t)},e.prototype._complete=function(){for(var t=this.contexts;t.length>0;){var r=t.shift();this.destination.next(r.buffer),r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,n.prototype._complete.call(this)},e.prototype.notifyNext=function(t,r){t?this.closeBuffer(t):this.openBuffer(r)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var r=this.closingSelector,i=r.call(this,t);i&&this.trySubscribe(i)}catch(o){this._error(o)}},e.prototype.closeBuffer=function(t){var r=this.contexts;if(r&&t){var i=t.buffer,o=t.subscription;this.destination.next(i),r.splice(r.indexOf(t),1),this.remove(o),o.unsubscribe()}},e.prototype.trySubscribe=function(t){var r=this.contexts,i=[],o=new Sn,s={buffer:i,subscription:o};r.push(s);var a=vo(this,t,s);!a||a.closed?this.closeBuffer(s):(a.context=s,this.add(a),o.add(a))},e}($s);function n$(n){return function(e){return e.lift(new r$(n))}}var r$=function(){function n(e){this.closingSelector=e}return n.prototype.call=function(e,t){return t.subscribe(new i$(e,this.closingSelector))},n}(),i$=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.closingSelector=r,i.subscribing=!1,i.openBuffer(),i}return e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),n.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},e.prototype.notifyNext=function(){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var r=this.buffer;this.buffer&&this.destination.next(r),this.buffer=[];var i;try{var o=this.closingSelector;i=o()}catch(s){return this.error(s)}t=new Sn,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(On(i,new Cn(this))),this.subscribing=!1},e}(En);function o$(n){return function(t){var r=new s$(n),i=t.lift(r);return r.caught=i}}var s$=function(){function n(e){this.selector=e}return n.prototype.call=function(e,t){return t.subscribe(new a$(e,this.selector,this.caught))},n}(),a$=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.selector=r,o.caught=i,o}return e.prototype.error=function(t){if(!this.isStopped){var r=void 0;try{r=this.selector(t,this.caught)}catch(s){n.prototype.error.call(this,s);return}this._unsubscribeAndRecycle();var i=new Cn(this);this.add(i);var o=On(r,i);o!==i&&this.add(o)}},e}(En);function l$(n){return function(e){return e.lift(new my(n))}}function u$(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=null;return typeof n[n.length-1]=="function"&&(t=n.pop()),n.length===1&&br(n[0])&&(n=n[0].slice()),function(r){return r.lift.call(bo([r].concat(n)),new my(t))}}function c$(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(t){return t.lift.call(Au.apply(void 0,[t].concat(n)))}}function _I(n,e){return Hs(n,e,1)}function f$(n,e){return _I(function(){return n},e)}function h$(n){return function(e){return e.lift(new d$(n,e))}}var d$=function(){function n(e,t){this.predicate=e,this.source=t}return n.prototype.call=function(e,t){return t.subscribe(new p$(e,this.predicate,this.source))},n}(),p$=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.predicate=r,o.source=i,o.count=0,o.index=0,o}return e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var r;try{r=this.predicate(t,this.index++,this.source)}catch(i){this.destination.error(i);return}r&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(ht);function m$(n){return function(e){return e.lift(new g$(n))}}var g$=function(){function n(e){this.durationSelector=e}return n.prototype.call=function(e,t){return t.subscribe(new v$(e,this.durationSelector))},n}(),v$=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.durationSelector=r,i.hasValue=!1,i}return e.prototype._next=function(t){try{var r=this.durationSelector.call(this,t);r&&this._tryNext(t,r)}catch(i){this.destination.error(i)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,r){var i=this.durationSubscription;this.value=t,this.hasValue=!0,i&&(i.unsubscribe(),this.remove(i)),i=On(r,new Cn(this)),i&&!i.closed&&this.add(this.durationSubscription=i)},e.prototype.notifyNext=function(){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var t=this.value,r=this.durationSubscription;r&&(this.durationSubscription=void 0,r.unsubscribe(),this.remove(r)),this.value=void 0,this.hasValue=!1,n.prototype._next.call(this,t)}},e}(En);function y$(n,e){return e===void 0&&(e=wr),function(t){return t.lift(new _$(n,e))}}var _$=function(){function n(e,t){this.dueTime=e,this.scheduler=t}return n.prototype.call=function(e,t){return t.subscribe(new b$(e,this.dueTime,this.scheduler))},n}(),b$=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.dueTime=r,o.scheduler=i,o.debouncedSubscription=null,o.lastValue=null,o.hasValue=!1,o}return e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(w$,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;t!==null&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(ht);function w$(n){n.debouncedNext()}function ac(n){return n===void 0&&(n=null),function(e){return e.lift(new S$(n))}}var S$=function(){function n(e){this.defaultValue=e}return n.prototype.call=function(e,t){return t.subscribe(new C$(e,this.defaultValue))},n}(),C$=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.defaultValue=r,i.isEmpty=!0,i}return e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(ht);function bI(n){return n instanceof Date&&!isNaN(+n)}function E$(n,e){e===void 0&&(e=wr);var t=bI(n),r=t?+n-e.now():Math.abs(n);return function(i){return i.lift(new O$(r,e))}}var O$=function(){function n(e,t){this.delay=e,this.scheduler=t}return n.prototype.call=function(e,t){return t.subscribe(new k$(e,this.delay,this.scheduler))},n}(),k$=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.delay=r,o.scheduler=i,o.queue=[],o.active=!1,o.errored=!1,o}return e.dispatch=function(t){for(var r=t.source,i=r.queue,o=t.scheduler,s=t.destination;i.length>0&&i[0].time-o.now()<=0;)i.shift().notification.observe(s);if(i.length>0){var a=Math.max(0,i[0].time-o.now());this.schedule(t,a)}else this.unsubscribe(),r.active=!1},e.prototype._schedule=function(t){this.active=!0;var r=this.destination;r.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(this.errored!==!0){var r=this.scheduler,i=new T$(r.now()+this.delay,t);this.queue.push(i),this.active===!1&&this._schedule(r)}},e.prototype._next=function(t){this.scheduleNotification(fo.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(fo.createComplete()),this.unsubscribe()},e}(ht),T$=function(){function n(e,t){this.time=e,this.notification=t}return n}();function P$(n,e){return e?function(t){return new A$(t,e).lift(new NC(n))}:function(t){return t.lift(new NC(n))}}var NC=function(){function n(e){this.delayDurationSelector=e}return n.prototype.call=function(e,t){return t.subscribe(new I$(e,this.delayDurationSelector))},n}(),I$=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.delayDurationSelector=r,i.completed=!1,i.delayNotifierSubscriptions=[],i.index=0,i}return e.prototype.notifyNext=function(t,r,i,o,s){this.destination.next(t),this.removeSubscription(s),this.tryComplete()},e.prototype.notifyError=function(t,r){this._error(t)},e.prototype.notifyComplete=function(t){var r=this.removeSubscription(t);r&&this.destination.next(r),this.tryComplete()},e.prototype._next=function(t){var r=this.index++;try{var i=this.delayDurationSelector(t,r);i&&this.tryDelay(i,t)}catch(o){this.destination.error(o)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},e.prototype.removeSubscription=function(t){t.unsubscribe();var r=this.delayNotifierSubscriptions.indexOf(t);return r!==-1&&this.delayNotifierSubscriptions.splice(r,1),t.outerValue},e.prototype.tryDelay=function(t,r){var i=vo(this,t,r);if(i&&!i.closed){var o=this.destination;o.add(i),this.delayNotifierSubscriptions.push(i)}},e.prototype.tryComplete=function(){this.completed&&this.delayNotifierSubscriptions.length===0&&this.destination.complete()},e}($s),A$=function(n){Le(e,n);function e(t,r){var i=n.call(this)||this;return i.source=t,i.subscriptionDelay=r,i}return e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new R$(t,this.source))},e}(Rt),R$=function(n){Le(e,n);function e(t,r){var i=n.call(this)||this;return i.parent=t,i.source=r,i.sourceSubscribed=!1,i}return e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(ht);function x$(){return function(e){return e.lift(new N$)}}var N$=function(){function n(){}return n.prototype.call=function(e,t){return t.subscribe(new M$(e))},n}(),M$=function(n){Le(e,n);function e(t){return n.call(this,t)||this}return e.prototype._next=function(t){t.observe(this.destination)},e}(ht);function D$(n,e){return function(t){return t.lift(new j$(n,e))}}var j$=function(){function n(e,t){this.keySelector=e,this.flushes=t}return n.prototype.call=function(e,t){return t.subscribe(new L$(e,this.keySelector,this.flushes))},n}(),L$=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.keySelector=r,o.values=new Set,i&&o.add(On(i,new Cn(o))),o}return e.prototype.notifyNext=function(){this.values.clear()},e.prototype.notifyError=function(t){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var r,i=this.destination;try{r=this.keySelector(t)}catch(o){i.error(o);return}this._finalizeNext(r,t)},e.prototype._finalizeNext=function(t,r){var i=this.values;i.has(t)||(i.add(t),this.destination.next(r))},e}(En);function wI(n,e){return function(t){return t.lift(new B$(n,e))}}var B$=function(){function n(e,t){this.compare=e,this.keySelector=t}return n.prototype.call=function(e,t){return t.subscribe(new F$(e,this.compare,this.keySelector))},n}(),F$=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.keySelector=i,o.hasKey=!1,typeof r=="function"&&(o.compare=r),o}return e.prototype.compare=function(t,r){return t===r},e.prototype._next=function(t){var r;try{var i=this.keySelector;r=i?i(t):t}catch(a){return this.destination.error(a)}var o=!1;if(this.hasKey)try{var s=this.compare;o=s(this.key,r)}catch(a){return this.destination.error(a)}else this.hasKey=!0;o||(this.key=r,this.destination.next(t))},e}(ht);function U$(n,e){return wI(function(t,r){return e?e(t[n],r[n]):t[n]===r[n]})}function ap(n){return n===void 0&&(n=H$),function(e){return e.lift(new V$(n))}}var V$=function(){function n(e){this.errorFactory=e}return n.prototype.call=function(e,t){return t.subscribe(new q$(e,this.errorFactory))},n}(),q$=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.errorFactory=r,i.hasValue=!1,i}return e.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(r){t=r}this.destination.error(t)},e}(ht);function H$(){return new sc}function yy(n){return function(e){return n===0?ll():e.lift(new z$(n))}}var z$=function(){function n(e){if(this.total=e,this.total<0)throw new Ja}return n.prototype.call=function(e,t){return t.subscribe(new W$(e,this.total))},n}(),W$=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.total=r,i.count=0,i}return e.prototype._next=function(t){var r=this.total,i=++this.count;i<=r&&(this.destination.next(t),i===r&&(this.destination.complete(),this.unsubscribe()))},e}(ht);function K$(n,e){if(n<0)throw new Ja;var t=arguments.length>=2;return function(r){return r.pipe(ns(function(i,o){return o===n}),yy(1),t?ac(e):ap(function(){return new Ja}))}}function G$(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(t){return Au(t,op.apply(void 0,n))}}function Y$(n,e){return function(t){return t.lift(new J$(n,e,t))}}var J$=function(){function n(e,t,r){this.predicate=e,this.thisArg=t,this.source=r}return n.prototype.call=function(e,t){return t.subscribe(new Q$(e,this.predicate,this.thisArg,this.source))},n}(),Q$=function(n){Le(e,n);function e(t,r,i,o){var s=n.call(this,t)||this;return s.predicate=r,s.thisArg=i,s.source=o,s.index=0,s.thisArg=i||s,s}return e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var r=!1;try{r=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(i){this.destination.error(i);return}r||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(ht);function Z$(){return function(n){return n.lift(new X$)}}var X$=function(){function n(){}return n.prototype.call=function(e,t){return t.subscribe(new $$(e))},n}(),$$=function(n){Le(e,n);function e(t){var r=n.call(this,t)||this;return r.hasCompleted=!1,r.hasSubscription=!1,r}return e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(On(t,new Cn(this))))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(En);function SI(n,e){return e?function(t){return t.pipe(SI(function(r,i){return bo(n(r,i)).pipe(di(function(o,s){return e(r,o,i,s)}))}))}:function(t){return t.lift(new eee(n))}}var eee=function(){function n(e){this.project=e}return n.prototype.call=function(e,t){return t.subscribe(new tee(e,this.project))},n}(),tee=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.project=r,i.hasSubscription=!1,i.hasCompleted=!1,i.index=0,i}return e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var r,i=this.index++;try{r=this.project(t,i)}catch(o){this.destination.error(o);return}this.hasSubscription=!0,this._innerSub(r)},e.prototype._innerSub=function(t){var r=new Cn(this),i=this.destination;i.add(r);var o=On(t,r);o!==r&&i.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(En);function nee(n,e,t){return e===void 0&&(e=Number.POSITIVE_INFINITY),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(r){return r.lift(new ree(n,e,t))}}var ree=function(){function n(e,t,r){this.project=e,this.concurrent=t,this.scheduler=r}return n.prototype.call=function(e,t){return t.subscribe(new iee(e,this.project,this.concurrent,this.scheduler))},n}(),iee=function(n){Le(e,n);function e(t,r,i,o){var s=n.call(this,t)||this;return s.project=r,s.concurrent=i,s.scheduler=o,s.index=0,s.active=0,s.hasCompleted=!1,i<Number.POSITIVE_INFINITY&&(s.buffer=[]),s}return e.dispatch=function(t){var r=t.subscriber,i=t.result,o=t.value,s=t.index;r.subscribeToProjection(i,o,s)},e.prototype._next=function(t){var r=this.destination;if(r.closed){this._complete();return}var i=this.index++;if(this.active<this.concurrent){r.next(t);try{var o=this.project,s=o(t,i);if(!this.scheduler)this.subscribeToProjection(s,t,i);else{var a={subscriber:this,result:s,value:t,index:i},l=this.destination;l.add(this.scheduler.schedule(e.dispatch,0,a))}}catch(u){r.error(u)}}else this.buffer.push(t)},e.prototype.subscribeToProjection=function(t,r,i){this.active++;var o=this.destination;o.add(On(t,new Cn(this)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&this.active===0&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this._next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&this.active===0&&this.destination.complete()},e}(En);function oee(n){return function(e){return e.lift(new see(n))}}var see=function(){function n(e){this.callback=e}return n.prototype.call=function(e,t){return t.subscribe(new aee(e,this.callback))},n}(),aee=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.add(new Sn(r)),i}return e}(ht);function lee(n,e){if(typeof n!="function")throw new TypeError("predicate is not a function");return function(t){return t.lift(new CI(n,t,!1,e))}}var CI=function(){function n(e,t,r,i){this.predicate=e,this.source=t,this.yieldIndex=r,this.thisArg=i}return n.prototype.call=function(e,t){return t.subscribe(new uee(e,this.predicate,this.source,this.yieldIndex,this.thisArg))},n}(),uee=function(n){Le(e,n);function e(t,r,i,o,s){var a=n.call(this,t)||this;return a.predicate=r,a.source=i,a.yieldIndex=o,a.thisArg=s,a.index=0,a}return e.prototype.notifyComplete=function(t){var r=this.destination;r.next(t),r.complete(),this.unsubscribe()},e.prototype._next=function(t){var r=this,i=r.predicate,o=r.thisArg,s=this.index++;try{var a=i.call(o||this,t,s,this.source);a&&this.notifyComplete(this.yieldIndex?s:t)}catch(l){this.destination.error(l)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(ht);function cee(n,e){return function(t){return t.lift(new CI(n,t,!0,e))}}function fee(n,e){var t=arguments.length>=2;return function(r){return r.pipe(n?ns(function(i,o){return n(i,o,r)}):es,yy(1),t?ac(e):ap(function(){return new sc}))}}function hee(){return function(e){return e.lift(new dee)}}var dee=function(){function n(){}return n.prototype.call=function(e,t){return t.subscribe(new pee(e))},n}(),pee=function(n){Le(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype._next=function(t){},e}(ht);function mee(){return function(n){return n.lift(new gee)}}var gee=function(){function n(){}return n.prototype.call=function(e,t){return t.subscribe(new vee(e))},n}(),vee=function(n){Le(e,n);function e(t){return n.call(this,t)||this}return e.prototype.notifyComplete=function(t){var r=this.destination;r.next(t),r.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(ht);function cd(n){return function(t){return n===0?ll():t.lift(new yee(n))}}var yee=function(){function n(e){if(this.total=e,this.total<0)throw new Ja}return n.prototype.call=function(e,t){return t.subscribe(new _ee(e,this.total))},n}(),_ee=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.total=r,i.ring=new Array,i.count=0,i}return e.prototype._next=function(t){var r=this.ring,i=this.total,o=this.count++;if(r.length<i)r.push(t);else{var s=o%i;r[s]=t}},e.prototype._complete=function(){var t=this.destination,r=this.count;if(r>0)for(var i=this.count>=this.total?this.total:this.count,o=this.ring,s=0;s<i;s++){var a=r++%i;t.next(o[a])}t.complete()},e}(ht);function bee(n,e){var t=arguments.length>=2;return function(r){return r.pipe(n?ns(function(i,o){return n(i,o,r)}):es,cd(1),t?ac(e):ap(function(){return new sc}))}}function wee(n){return function(e){return e.lift(new See(n))}}var See=function(){function n(e){this.value=e}return n.prototype.call=function(e,t){return t.subscribe(new Cee(e,this.value))},n}(),Cee=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype._next=function(t){this.destination.next(this.value)},e}(ht);function Eee(){return function(e){return e.lift(new Oee)}}var Oee=function(){function n(){}return n.prototype.call=function(e,t){return t.subscribe(new kee(e))},n}(),kee=function(n){Le(e,n);function e(t){return n.call(this,t)||this}return e.prototype._next=function(t){this.destination.next(fo.createNext(t))},e.prototype._error=function(t){var r=this.destination;r.next(fo.createError(t)),r.complete()},e.prototype._complete=function(){var t=this.destination;t.next(fo.createComplete()),t.complete()},e}(ht);function fd(n,e){var t=!1;return arguments.length>=2&&(t=!0),function(i){return i.lift(new Tee(n,e,t))}}var Tee=function(){function n(e,t,r){r===void 0&&(r=!1),this.accumulator=e,this.seed=t,this.hasSeed=r}return n.prototype.call=function(e,t){return t.subscribe(new Pee(e,this.accumulator,this.seed,this.hasSeed))},n}(),Pee=function(n){Le(e,n);function e(t,r,i,o){var s=n.call(this,t)||this;return s.accumulator=r,s._seed=i,s.hasSeed=o,s.index=0,s}return Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(!this.hasSeed)this.seed=t,this.destination.next(t);else return this._tryNext(t)},e.prototype._tryNext=function(t){var r=this.index++,i;try{i=this.accumulator(this.seed,t,r)}catch(o){this.destination.error(o)}this.seed=i,this.destination.next(i)},e}(ht);function lp(n,e){return arguments.length>=2?function(r){return _0(fd(n,e),cd(1),ac(e))(r)}:function(r){return _0(fd(function(i,o,s){return n(i,o,s+1)}),cd(1))(r)}}function Iee(n){var e=typeof n=="function"?function(t,r){return n(t,r)>0?t:r}:function(t,r){return t>r?t:r};return lp(e)}function Aee(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(t){return t.lift.call(cI.apply(void 0,[t].concat(n)))}}function Ree(n,e,t){return t===void 0&&(t=Number.POSITIVE_INFINITY),typeof e=="function"?Hs(function(){return n},e,t):(typeof e=="number"&&(t=e),Hs(function(){return n},t))}function xee(n,e,t){return t===void 0&&(t=Number.POSITIVE_INFINITY),function(r){return r.lift(new Nee(n,e,t))}}var Nee=function(){function n(e,t,r){this.accumulator=e,this.seed=t,this.concurrent=r}return n.prototype.call=function(e,t){return t.subscribe(new Mee(e,this.accumulator,this.seed,this.concurrent))},n}(),Mee=function(n){Le(e,n);function e(t,r,i,o){var s=n.call(this,t)||this;return s.accumulator=r,s.acc=i,s.concurrent=o,s.hasValue=!1,s.hasCompleted=!1,s.buffer=[],s.active=0,s.index=0,s}return e.prototype._next=function(t){if(this.active<this.concurrent){var r=this.index++,i=this.destination,o=void 0;try{var s=this.accumulator;o=s(this.acc,t,r)}catch(a){return i.error(a)}this.active++,this._innerSub(o)}else this.buffer.push(t)},e.prototype._innerSub=function(t){var r=new Cn(this),i=this.destination;i.add(r);var o=On(t,r);o!==r&&i.add(o)},e.prototype._complete=function(){this.hasCompleted=!0,this.active===0&&this.buffer.length===0&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},e.prototype.notifyNext=function(t){var r=this.destination;this.acc=t,this.hasValue=!0,r.next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):this.active===0&&this.hasCompleted&&(this.hasValue===!1&&this.destination.next(this.acc),this.destination.complete())},e}(En);function Dee(n){var e=typeof n=="function"?function(t,r){return n(t,r)<0?t:r}:function(t,r){return t<r?t:r};return lp(e)}function zs(n,e){return function(r){var i;if(typeof n=="function"?i=n:i=function(){return n},typeof e=="function")return r.lift(new jee(i,e));var o=Object.create(r,vZ);return o.source=r,o.subjectFactory=i,o}}var jee=function(){function n(e,t){this.subjectFactory=e,this.selector=t}return n.prototype.call=function(e,t){var r=this.selector,i=this.subjectFactory(),o=r(i).subscribe(e);return o.add(t.subscribe(i)),o},n}();function Lee(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return n.length===1&&br(n[0])&&(n=n[0]),function(t){return t.lift(new Bee(n))}}var Bee=function(){function n(e){this.nextSources=e}return n.prototype.call=function(e,t){return t.subscribe(new Fee(e,this.nextSources))},n}(),Fee=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.destination=t,i.nextSources=r,i}return e.prototype.notifyError=function(){this.subscribeToNextSource()},e.prototype.notifyComplete=function(){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource(),this.unsubscribe()},e.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();if(t){var r=new Cn(this),i=this.destination;i.add(r);var o=On(t,r);o!==r&&i.add(o)}else this.destination.complete()},e}(En);function Uee(){return function(n){return n.lift(new Vee)}}var Vee=function(){function n(){}return n.prototype.call=function(e,t){return t.subscribe(new qee(e))},n}(),qee=function(n){Le(e,n);function e(t){var r=n.call(this,t)||this;return r.hasPrev=!1,r}return e.prototype._next=function(t){var r;this.hasPrev?r=[this.prev,t]:this.hasPrev=!0,this.prev=t,r&&this.destination.next(r)},e}(ht);function Hee(n,e){return function(t){return[ns(n,e)(t),ns(hI(n,e))(t)]}}function zee(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.length;if(t===0)throw new Error("list of properties cannot be empty.");return function(r){return di(Wee(n,t))(r)}}function Wee(n,e){var t=function(r){for(var i=r,o=0;o<e;o++){var s=i!=null?i[n[o]]:void 0;if(s!==void 0)i=s;else return}return i};return t}function Kee(n){return n?zs(function(){return new Zn},n):zs(new Zn)}function Gee(n){return function(e){return zs(new W3(n))(e)}}function Yee(){return function(n){return zs(new ul)(n)}}function Jee(n,e,t,r){t&&typeof t!="function"&&(r=t);var i=typeof t=="function"?t:void 0,o=new py(n,e,r);return function(s){return zs(function(){return o},i)(s)}}function Qee(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(r){return n.length===1&&br(n[0])&&(n=n[0]),r.lift.call(dI.apply(void 0,[r].concat(n)))}}function Zee(n){return n===void 0&&(n=-1),function(e){return n===0?ll():n<0?e.lift(new MC(-1,e)):e.lift(new MC(n-1,e))}}var MC=function(){function n(e,t){this.count=e,this.source=t}return n.prototype.call=function(e,t){return t.subscribe(new Xee(e,this.count,this.source))},n}(),Xee=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.count=r,o.source=i,o}return e.prototype.complete=function(){if(!this.isStopped){var t=this,r=t.source,i=t.count;if(i===0)return n.prototype.complete.call(this);i>-1&&(this.count=i-1),r.subscribe(this._unsubscribeAndRecycle())}},e}(ht);function $ee(n){return function(e){return e.lift(new ete(n))}}var ete=function(){function n(e){this.notifier=e}return n.prototype.call=function(e,t){return t.subscribe(new tte(e,this.notifier,t))},n}(),tte=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.notifier=r,o.source=i,o.sourceIsBeingSubscribedTo=!0,o}return e.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(){if(this.sourceIsBeingSubscribedTo===!1)return n.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return n.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},e.prototype._unsubscribe=function(){var t=this,r=t.notifications,i=t.retriesSubscription;r&&(r.unsubscribe(),this.notifications=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},e.prototype._unsubscribeAndRecycle=function(){var t=this._unsubscribe;return this._unsubscribe=null,n.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=t,this},e.prototype.subscribeToRetries=function(){this.notifications=new Zn;var t;try{var r=this.notifier;t=r(this.notifications)}catch{return n.prototype.complete.call(this)}this.retries=t,this.retriesSubscription=On(t,new Cn(this))},e}(En);function nte(n){return n===void 0&&(n=-1),function(e){return e.lift(new rte(n,e))}}var rte=function(){function n(e,t){this.count=e,this.source=t}return n.prototype.call=function(e,t){return t.subscribe(new ite(e,this.count,this.source))},n}(),ite=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.count=r,o.source=i,o}return e.prototype.error=function(t){if(!this.isStopped){var r=this,i=r.source,o=r.count;if(o===0)return n.prototype.error.call(this,t);o>-1&&(this.count=o-1),i.subscribe(this._unsubscribeAndRecycle())}},e}(ht);function ote(n){return function(e){return e.lift(new ste(n,e))}}var ste=function(){function n(e,t){this.notifier=e,this.source=t}return n.prototype.call=function(e,t){return t.subscribe(new ate(e,this.notifier,this.source))},n}(),ate=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.notifier=r,o.source=i,o}return e.prototype.error=function(t){if(!this.isStopped){var r=this.errors,i=this.retries,o=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{r=new Zn;try{var s=this.notifier;i=s(r)}catch(a){return n.prototype.error.call(this,a)}o=On(i,new Cn(this))}this._unsubscribeAndRecycle(),this.errors=r,this.retries=i,this.retriesSubscription=o,r.next(t)}},e.prototype._unsubscribe=function(){var t=this,r=t.errors,i=t.retriesSubscription;r&&(r.unsubscribe(),this.errors=void 0),i&&(i.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},e.prototype.notifyNext=function(){var t=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=t,this.source.subscribe(this)},e}(En);function lte(n){return function(e){return e.lift(new ute(n))}}var ute=function(){function n(e){this.notifier=e}return n.prototype.call=function(e,t){var r=new cte(e),i=t.subscribe(r);return i.add(On(this.notifier,new Cn(r))),i},n}(),cte=function(n){Le(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.hasValue=!1,t}return e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(En);function fte(n,e){return e===void 0&&(e=wr),function(t){return t.lift(new hte(n,e))}}var hte=function(){function n(e,t){this.period=e,this.scheduler=t}return n.prototype.call=function(e,t){return t.subscribe(new dte(e,this.period,this.scheduler))},n}(),dte=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.period=r,o.scheduler=i,o.hasValue=!1,o.add(i.schedule(pte,r,{subscriber:o,period:r})),o}return e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(ht);function pte(n){var e=n.subscriber,t=n.period;e.notifyNext(),this.schedule(n,t)}function mte(n,e){return function(t){return t.lift(new gte(n,e))}}var gte=function(){function n(e,t){this.compareTo=e,this.comparator=t}return n.prototype.call=function(e,t){return t.subscribe(new vte(e,this.compareTo,this.comparator))},n}(),vte=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.compareTo=r,o.comparator=i,o._a=[],o._b=[],o._oneComplete=!1,o.destination.add(r.subscribe(new yte(t,o))),o}return e.prototype._next=function(t){this._oneComplete&&this._b.length===0?this.emit(!1):(this._a.push(t),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0,this.unsubscribe()},e.prototype.checkValues=function(){for(var t=this,r=t._a,i=t._b,o=t.comparator;r.length>0&&i.length>0;){var s=r.shift(),a=i.shift(),l=!1;try{l=o?o(s,a):s===a}catch(u){this.destination.error(u)}l||this.emit(!1)}},e.prototype.emit=function(t){var r=this.destination;r.next(t),r.complete()},e.prototype.nextB=function(t){this._oneComplete&&this._a.length===0?this.emit(!1):(this._b.push(t),this.checkValues())},e.prototype.completeB=function(){this._oneComplete?this.emit(this._a.length===0&&this._b.length===0):this._oneComplete=!0},e}(ht),yte=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.parent=r,i}return e.prototype._next=function(t){this.parent.nextB(t)},e.prototype._error=function(t){this.parent.error(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},e}(ht);function _te(){return new Zn}function bte(){return function(n){return fy()(zs(_te)(n))}}function wte(n,e,t){var r;return n&&typeof n=="object"?r=n:r={bufferSize:n,windowTime:e,refCount:!1,scheduler:t},function(i){return i.lift(Ste(r))}}function Ste(n){var e=n.bufferSize,t=e===void 0?Number.POSITIVE_INFINITY:e,r=n.windowTime,i=r===void 0?Number.POSITIVE_INFINITY:r,o=n.refCount,s=n.scheduler,a,l=0,u,f=!1,c=!1;return function(g){l++;var h;!a||f?(f=!1,a=new py(t,i,s),h=a.subscribe(this),u=g.subscribe({next:function(v){a.next(v)},error:function(v){f=!0,a.error(v)},complete:function(){c=!0,u=void 0,a.complete()}}),c&&(u=void 0)):h=a.subscribe(this),this.add(function(){l--,h.unsubscribe(),h=void 0,u&&!c&&o&&l===0&&(u.unsubscribe(),u=void 0,a=void 0)})}}function Cte(n){return function(e){return e.lift(new Ete(n,e))}}var Ete=function(){function n(e,t){this.predicate=e,this.source=t}return n.prototype.call=function(e,t){return t.subscribe(new Ote(e,this.predicate,this.source))},n}(),Ote=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.predicate=r,o.source=i,o.seenValue=!1,o.index=0,o}return e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var r=this.index++;this.predicate?this.tryNext(t,r):this.applySingleValue(t)},e.prototype.tryNext=function(t,r){try{this.predicate(t,r,this.source)&&this.applySingleValue(t)}catch(i){this.destination.error(i)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new sc)},e}(ht);function kte(n){return function(e){return e.lift(new Tte(n))}}var Tte=function(){function n(e){this.total=e}return n.prototype.call=function(e,t){return t.subscribe(new Pte(e,this.total))},n}(),Pte=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.total=r,i.count=0,i}return e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(ht);function Ite(n){return function(e){return e.lift(new Ate(n))}}var Ate=function(){function n(e){if(this._skipCount=e,this._skipCount<0)throw new Ja}return n.prototype.call=function(e,t){return this._skipCount===0?t.subscribe(new ht(e)):t.subscribe(new Rte(e,this._skipCount))},n}(),Rte=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i._skipCount=r,i._count=0,i._ring=new Array(r),i}return e.prototype._next=function(t){var r=this._skipCount,i=this._count++;if(i<r)this._ring[i]=t;else{var o=i%r,s=this._ring,a=s[o];s[o]=t,this.destination.next(a)}},e}(ht);function xte(n){return function(e){return e.lift(new Nte(n))}}var Nte=function(){function n(e){this.notifier=e}return n.prototype.call=function(e,t){return t.subscribe(new Mte(e,this.notifier))},n}(),Mte=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;i.hasValue=!1;var o=new Cn(i);i.add(o),i.innerSubscription=o;var s=On(r,o);return s!==o&&(i.add(s),i.innerSubscription=s),i}return e.prototype._next=function(t){this.hasValue&&n.prototype._next.call(this,t)},e.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(En);function Dte(n){return function(e){return e.lift(new jte(n))}}var jte=function(){function n(e){this.predicate=e}return n.prototype.call=function(e,t){return t.subscribe(new Lte(e,this.predicate))},n}(),Lte=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.predicate=r,i.skipping=!0,i.index=0,i}return e.prototype._next=function(t){var r=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||r.next(t)},e.prototype.tryCallPredicate=function(t){try{var r=this.predicate(t,this.index++);this.skipping=Boolean(r)}catch(i){this.destination.error(i)}},e}(ht);function Bte(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n[n.length-1];return Qr(t)?(n.pop(),function(r){return Au(n,r,t)}):function(r){return Au(n,r)}}var Fte=function(n){Le(e,n);function e(t,r,i){r===void 0&&(r=0),i===void 0&&(i=ih);var o=n.call(this)||this;return o.source=t,o.delayTime=r,o.scheduler=i,(!Qa(r)||r<0)&&(o.delayTime=0),(!i||typeof i.schedule!="function")&&(o.scheduler=ih),o}return e.create=function(t,r,i){return r===void 0&&(r=0),i===void 0&&(i=ih),new e(t,r,i)},e.dispatch=function(t){var r=t.source,i=t.subscriber;return this.add(r.subscribe(i))},e.prototype._subscribe=function(t){var r=this.delayTime,i=this.source,o=this.scheduler;return o.schedule(e.dispatch,r,{source:i,subscriber:t})},e}(Rt);function Ute(n,e){return e===void 0&&(e=0),function(r){return r.lift(new Vte(n,e))}}var Vte=function(){function n(e,t){this.scheduler=e,this.delay=t}return n.prototype.call=function(e,t){return new Fte(t,this.delay,this.scheduler).subscribe(e)},n}();function Ru(n,e){return typeof e=="function"?function(t){return t.pipe(Ru(function(r,i){return bo(n(r,i)).pipe(di(function(o,s){return e(r,o,i,s)}))}))}:function(t){return t.lift(new qte(n))}}var qte=function(){function n(e){this.project=e}return n.prototype.call=function(e,t){return t.subscribe(new Hte(e,this.project))},n}(),Hte=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.project=r,i.index=0,i}return e.prototype._next=function(t){var r,i=this.index++;try{r=this.project(t,i)}catch(o){this.destination.error(o);return}this._innerSub(r)},e.prototype._innerSub=function(t){var r=this.innerSubscription;r&&r.unsubscribe();var i=new Cn(this),o=this.destination;o.add(i),this.innerSubscription=On(t,i),this.innerSubscription!==i&&o.add(this.innerSubscription)},e.prototype._complete=function(){var t=this.innerSubscription;(!t||t.closed)&&n.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&n.prototype._complete.call(this)},e.prototype.notifyNext=function(t){this.destination.next(t)},e}(En);function zte(){return Ru(es)}function Wte(n,e){return e?Ru(function(){return n},e):Ru(function(){return n})}function Kte(n){return function(e){return e.lift(new Gte(n))}}var Gte=function(){function n(e){this.notifier=e}return n.prototype.call=function(e,t){var r=new Yte(e),i=On(this.notifier,new Cn(r));return i&&!r.seenValue?(r.add(i),t.subscribe(r)):r},n}(),Yte=function(n){Le(e,n);function e(t){var r=n.call(this,t)||this;return r.seenValue=!1,r}return e.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(En);function Jte(n,e){return e===void 0&&(e=!1),function(t){return t.lift(new Qte(n,e))}}var Qte=function(){function n(e,t){this.predicate=e,this.inclusive=t}return n.prototype.call=function(e,t){return t.subscribe(new Zte(e,this.predicate,this.inclusive))},n}(),Zte=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.predicate=r,o.inclusive=i,o.index=0,o}return e.prototype._next=function(t){var r=this.destination,i;try{i=this.predicate(t,this.index++)}catch(o){r.error(o);return}this.nextOrComplete(t,i)},e.prototype.nextOrComplete=function(t,r){var i=this.destination;Boolean(r)?i.next(t):(this.inclusive&&i.next(t),i.complete())},e}(ht);function Xte(n,e,t){return function(i){return i.lift(new $te(n,e,t))}}var $te=function(){function n(e,t,r){this.nextOrObserver=e,this.error=t,this.complete=r}return n.prototype.call=function(e,t){return t.subscribe(new ene(e,this.nextOrObserver,this.error,this.complete))},n}(),ene=function(n){Le(e,n);function e(t,r,i,o){var s=n.call(this,t)||this;return s._tapNext=Bi,s._tapError=Bi,s._tapComplete=Bi,s._tapError=i||Bi,s._tapComplete=o||Bi,Ga(r)?(s._context=s,s._tapNext=r):r&&(s._context=r,s._tapNext=r.next||Bi,s._tapError=r.error||Bi,s._tapComplete=r.complete||Bi),s}return e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(r){this.destination.error(r);return}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(r){this.destination.error(r);return}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){this.destination.error(t);return}return this.destination.complete()},e}(ht),EI={leading:!0,trailing:!1};function tne(n,e){return e===void 0&&(e=EI),function(t){return t.lift(new nne(n,!!e.leading,!!e.trailing))}}var nne=function(){function n(e,t,r){this.durationSelector=e,this.leading=t,this.trailing=r}return n.prototype.call=function(e,t){return t.subscribe(new rne(e,this.durationSelector,this.leading,this.trailing))},n}(),rne=function(n){Le(e,n);function e(t,r,i,o){var s=n.call(this,t)||this;return s.destination=t,s.durationSelector=r,s._leading=i,s._trailing=o,s._hasValue=!1,s}return e.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},e.prototype.send=function(){var t=this,r=t._hasValue,i=t._sendValue;r&&(this.destination.next(i),this.throttle(i)),this._hasValue=!1,this._sendValue=void 0},e.prototype.throttle=function(t){var r=this.tryDurationSelector(t);r&&this.add(this._throttled=On(r,new Cn(this)))},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(r){return this.destination.error(r),null}},e.prototype.throttlingDone=function(){var t=this,r=t._throttled,i=t._trailing;r&&r.unsubscribe(),this._throttled=void 0,i&&this.send()},e.prototype.notifyNext=function(){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()},e}(En);function ine(n,e,t){return e===void 0&&(e=wr),t===void 0&&(t=EI),function(r){return r.lift(new one(n,e,t.leading,t.trailing))}}var one=function(){function n(e,t,r,i){this.duration=e,this.scheduler=t,this.leading=r,this.trailing=i}return n.prototype.call=function(e,t){return t.subscribe(new sne(e,this.duration,this.scheduler,this.leading,this.trailing))},n}(),sne=function(n){Le(e,n);function e(t,r,i,o,s){var a=n.call(this,t)||this;return a.duration=r,a.scheduler=i,a.leading=o,a.trailing=s,a._hasTrailingValue=!1,a._trailingValue=null,a}return e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(ane,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(ht);function ane(n){var e=n.subscriber;e.clearThrottle()}function lne(n){return n===void 0&&(n=wr),function(e){return vy(function(){return e.pipe(fd(function(t,r){var i=t.current;return{value:r,current:n.now(),last:i}},{current:n.now(),value:void 0,last:void 0}),di(function(t){var r=t.current,i=t.last,o=t.value;return new une(o,r-i)}))})}}var une=function(){function n(e,t){this.value=e,this.interval=t}return n}();function OI(n,e,t){return t===void 0&&(t=wr),function(r){var i=bI(n),o=i?+n-t.now():Math.abs(n);return r.lift(new cne(o,i,e,t))}}var cne=function(){function n(e,t,r,i){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=r,this.scheduler=i}return n.prototype.call=function(e,t){return t.subscribe(new fne(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},n}(),fne=function(n){Le(e,n);function e(t,r,i,o,s){var a=n.call(this,t)||this;return a.absoluteTimeout=r,a.waitFor=i,a.withObservable=o,a.scheduler=s,a.scheduleTimeout(),a}return e.dispatchTimeout=function(t){var r=t.withObservable;t._unsubscribeAndRecycle(),t.add(On(r,new Cn(t)))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),n.prototype._next.call(this,t)},e.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},e}(En);function hne(n,e){return e===void 0&&(e=wr),OI(n,dy(new eI),e)}function dne(n){return n===void 0&&(n=wr),di(function(e){return new pne(e,n.now())})}var pne=function(){function n(e,t){this.value=e,this.timestamp=t}return n}();function mne(n,e,t){return t===0?[e]:(n.push(e),n)}function gne(){return lp(mne,[])}function vne(n){return function(t){return t.lift(new yne(n))}}var yne=function(){function n(e){this.windowBoundaries=e}return n.prototype.call=function(e,t){var r=new _ne(e),i=t.subscribe(r);return i.closed||r.add(On(this.windowBoundaries,new Cn(r))),i},n}(),_ne=function(n){Le(e,n);function e(t){var r=n.call(this,t)||this;return r.window=new Zn,t.next(r.window),r}return e.prototype.notifyNext=function(){this.openWindow()},e.prototype.notifyError=function(t){this._error(t)},e.prototype.notifyComplete=function(){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var r=this.destination,i=this.window=new Zn;r.next(i)},e}(En);function bne(n,e){return e===void 0&&(e=0),function(r){return r.lift(new wne(n,e))}}var wne=function(){function n(e,t){this.windowSize=e,this.startWindowEvery=t}return n.prototype.call=function(e,t){return t.subscribe(new Sne(e,this.windowSize,this.startWindowEvery))},n}(),Sne=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.destination=t,o.windowSize=r,o.startWindowEvery=i,o.windows=[new Zn],o.count=0,t.next(o.windows[0]),o}return e.prototype._next=function(t){for(var r=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,i=this.destination,o=this.windowSize,s=this.windows,a=s.length,l=0;l<a&&!this.closed;l++)s[l].next(t);var u=this.count-o+1;if(u>=0&&u%r===0&&!this.closed&&s.shift().complete(),++this.count%r===0&&!this.closed){var f=new Zn;s.push(f),i.next(f)}},e.prototype._error=function(t){var r=this.windows;if(r)for(;r.length>0&&!this.closed;)r.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(ht);function Cne(n){var e=wr,t=null,r=Number.POSITIVE_INFINITY;return Qr(arguments[3])&&(e=arguments[3]),Qr(arguments[2])?e=arguments[2]:Qa(arguments[2])&&(r=Number(arguments[2])),Qr(arguments[1])?e=arguments[1]:Qa(arguments[1])&&(t=Number(arguments[1])),function(o){return o.lift(new Ene(n,t,r,e))}}var Ene=function(){function n(e,t,r,i){this.windowTimeSpan=e,this.windowCreationInterval=t,this.maxWindowSize=r,this.scheduler=i}return n.prototype.call=function(e,t){return t.subscribe(new kne(e,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},n}(),One=function(n){Le(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._numberOfNextedValues=0,t}return e.prototype.next=function(t){this._numberOfNextedValues++,n.prototype.next.call(this,t)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(Zn),kne=function(n){Le(e,n);function e(t,r,i,o,s){var a=n.call(this,t)||this;a.destination=t,a.windowTimeSpan=r,a.windowCreationInterval=i,a.maxWindowSize=o,a.scheduler=s,a.windows=[];var l=a.openWindow();if(i!==null&&i>=0){var u={subscriber:a,window:l,context:null},f={windowTimeSpan:r,windowCreationInterval:i,subscriber:a,scheduler:s};a.add(s.schedule(kI,r,u)),a.add(s.schedule(Pne,i,f))}else{var c={subscriber:a,window:l,windowTimeSpan:r};a.add(s.schedule(Tne,r,c))}return a}return e.prototype._next=function(t){for(var r=this.windows,i=r.length,o=0;o<i;o++){var s=r[o];s.closed||(s.next(t),s.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(s))}},e.prototype._error=function(t){for(var r=this.windows;r.length>0;)r.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var r=t.shift();r.closed||r.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new One;this.windows.push(t);var r=this.destination;return r.next(t),t},e.prototype.closeWindow=function(t){t.complete();var r=this.windows;r.splice(r.indexOf(t),1)},e}(ht);function Tne(n){var e=n.subscriber,t=n.windowTimeSpan,r=n.window;r&&e.closeWindow(r),n.window=e.openWindow(),this.schedule(n,t)}function Pne(n){var e=n.windowTimeSpan,t=n.subscriber,r=n.scheduler,i=n.windowCreationInterval,o=t.openWindow(),s=this,a={action:s,subscription:null},l={subscriber:t,window:o,context:a};a.subscription=r.schedule(kI,e,l),s.add(a.subscription),s.schedule(n,i)}function kI(n){var e=n.subscriber,t=n.window,r=n.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),e.closeWindow(t)}function Ine(n,e){return function(t){return t.lift(new Ane(n,e))}}var Ane=function(){function n(e,t){this.openings=e,this.closingSelector=t}return n.prototype.call=function(e,t){return t.subscribe(new Rne(e,this.openings,this.closingSelector))},n}(),Rne=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.openings=r,o.closingSelector=i,o.contexts=[],o.add(o.openSubscription=vo(o,r,r)),o}return e.prototype._next=function(t){var r=this.contexts;if(r)for(var i=r.length,o=0;o<i;o++)r[o].window.next(t)},e.prototype._error=function(t){var r=this.contexts;if(this.contexts=null,r)for(var i=r.length,o=-1;++o<i;){var s=r[o];s.window.error(t),s.subscription.unsubscribe()}n.prototype._error.call(this,t)},e.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var r=t.length,i=-1;++i<r;){var o=t[i];o.window.complete(),o.subscription.unsubscribe()}n.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var r=t.length,i=-1;++i<r;){var o=t[i];o.window.unsubscribe(),o.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,r,i,o,s){if(t===this.openings){var a=void 0;try{var l=this.closingSelector;a=l(r)}catch(g){return this.error(g)}var u=new Zn,f=new Sn,c={window:u,subscription:f};this.contexts.push(c);var d=vo(this,a,c);d.closed?this.closeWindow(this.contexts.length-1):(d.context=c,f.add(d)),this.destination.next(u)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(t!==-1){var r=this.contexts,i=r[t],o=i.window,s=i.subscription;r.splice(t,1),o.complete(),s.unsubscribe()}},e}($s);function xne(n){return function(t){return t.lift(new Nne(n))}}var Nne=function(){function n(e){this.closingSelector=e}return n.prototype.call=function(e,t){return t.subscribe(new Mne(e,this.closingSelector))},n}(),Mne=function(n){Le(e,n);function e(t,r){var i=n.call(this,t)||this;return i.destination=t,i.closingSelector=r,i.openWindow(),i}return e.prototype.notifyNext=function(t,r,i,o,s){this.openWindow(s)},e.prototype.notifyError=function(t){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){t===void 0&&(t=null),t&&(this.remove(t),t.unsubscribe());var r=this.window;r&&r.complete();var i=this.window=new Zn;this.destination.next(i);var o;try{var s=this.closingSelector;o=s()}catch(a){this.destination.error(a),this.window.error(a);return}this.add(this.closingNotification=vo(this,o))},e}($s);function Dne(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(t){var r;typeof n[n.length-1]=="function"&&(r=n.pop());var i=n;return t.lift(new jne(i,r))}}var jne=function(){function n(e,t){this.observables=e,this.project=t}return n.prototype.call=function(e,t){return t.subscribe(new Lne(e,this.observables,this.project))},n}(),Lne=function(n){Le(e,n);function e(t,r,i){var o=n.call(this,t)||this;o.observables=r,o.project=i,o.toRespond=[];var s=r.length;o.values=new Array(s);for(var a=0;a<s;a++)o.toRespond.push(a);for(var a=0;a<s;a++){var l=r[a];o.add(vo(o,l,void 0,a))}return o}return e.prototype.notifyNext=function(t,r,i){this.values[i]=r;var o=this.toRespond;if(o.length>0){var s=o.indexOf(i);s!==-1&&o.splice(s,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(this.toRespond.length===0){var r=[t].concat(this.values);this.project?this._tryProject(r):this.destination.next(r)}},e.prototype._tryProject=function(t){var r;try{r=this.project.apply(this,t)}catch(i){this.destination.error(i);return}this.destination.next(r)},e}($s);function Bne(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return function(r){return r.lift.call(mI.apply(void 0,[r].concat(n)))}}function Fne(n){return function(e){return e.lift(new gI(n))}}const Une=Object.freeze(Object.defineProperty({__proto__:null,audit:vI,auditTime:UX,buffer:VX,bufferCount:zX,bufferTime:YX,bufferToggle:$X,bufferWhen:n$,catchError:o$,combineAll:l$,combineLatest:u$,concat:c$,concatAll:sI,concatMap:_I,concatMapTo:f$,count:h$,debounce:m$,debounceTime:y$,defaultIfEmpty:ac,delay:E$,delayWhen:P$,dematerialize:x$,distinct:D$,distinctUntilChanged:wI,distinctUntilKeyChanged:U$,elementAt:K$,endWith:G$,every:Y$,exhaust:Z$,exhaustMap:SI,expand:nee,filter:ns,finalize:oee,find:lee,findIndex:cee,first:fee,groupBy:_Z,ignoreElements:hee,isEmpty:mee,last:bee,map:di,mapTo:wee,materialize:Eee,max:Iee,merge:Aee,mergeAll:gy,mergeMap:Hs,flatMap:fX,mergeMapTo:Ree,mergeScan:xee,min:Dee,multicast:zs,observeOn:IZ,onErrorResumeNext:Lee,pairwise:Uee,partition:Hee,pluck:zee,publish:Kee,publishBehavior:Gee,publishLast:Yee,publishReplay:Jee,race:Qee,reduce:lp,repeat:Zee,repeatWhen:$ee,retry:nte,retryWhen:ote,refCount:fy,sample:lte,sampleTime:fte,scan:fd,sequenceEqual:mte,share:bte,shareReplay:wte,single:Cte,skip:kte,skipLast:Ite,skipUntil:xte,skipWhile:Dte,startWith:Bte,subscribeOn:Ute,switchAll:zte,switchMap:Ru,switchMapTo:Wte,take:yy,takeLast:cd,takeUntil:Kte,takeWhile:Jte,tap:Xte,throttle:tne,throttleTime:ine,throwIfEmpty:ap,timeInterval:lne,timeout:hne,timeoutWith:OI,timestamp:dne,toArray:gne,window:vne,windowCount:bne,windowTime:Cne,windowToggle:Ine,windowWhen:xne,withLatestFrom:Dne,zip:Bne,zipAll:Fne},Symbol.toStringTag,{value:"Module"})),_y=kO(Une);var Cm={},DC;function by(){return DC||(DC=1,function(n){var e=Xs.exports;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=e($u()),r=e(ec()),i=Mt(),o=sp,s=_y,a={READY:0,STREAMING:1,COMPLETED:2},l=function(){function u(f){(0,t.default)(this,u);var c=f.pipe((0,s.publishReplay)(1),(0,s.refCount)());this._result=c,this._keys=c.pipe((0,s.flatMap)(function(d){return(0,o.from)(d.keys())}),(0,s.publishReplay)(1),(0,s.refCount)()),this._records=new o.Subject,this._summary=new o.ReplaySubject,this._state=a.READY}return(0,r.default)(u,[{key:"keys",value:function(){return this._keys}},{key:"records",value:function(){var c=this;return this._result.pipe((0,s.flatMap)(function(d){return new o.Observable(function(g){return c._startStreaming({result:d,recordsObserver:g})})}))}},{key:"consume",value:function(){var c=this;return this._result.pipe((0,s.flatMap)(function(d){return new o.Observable(function(g){return c._startStreaming({result:d,summaryObserver:g})})}))}},{key:"_startStreaming",value:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=d.result,h=d.recordsObserver,v=h===void 0?null:h,m=d.summaryObserver,p=m===void 0?null:m,y=[];return p&&y.push(this._summary.subscribe(p)),this._state<a.STREAMING?(this._state=a.STREAMING,v&&y.push(this._records.subscribe(v)),y.push({unsubscribe:function(){g._cancel&&g._cancel()}}),this._records.observers.length===0&&g._cancel(),g.subscribe({onNext:function(_){c._records.next(_)},onCompleted:function(_){c._records.complete(),c._summary.next(_),c._summary.complete(),c._state=a.COMPLETED},onError:function(_){c._records.error(_),c._summary.error(_),c._state=a.COMPLETED}})):v&&v.error((0,i.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){y.forEach(function(b){return b.unsubscribe()})}}}]),u}();n.default=l}(Cm)),Cm}var Em={},jC;function TI(){return jC||(jC=1,function(n){var e=Xs.exports;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=e($u()),r=e(ec()),i=sp,o=e(by());e(Mt());var s=function(){function a(l){(0,t.default)(this,a),this._txc=l}return(0,r.default)(a,[{key:"run",value:function(u,f){var c=this;return new o.default(new i.Observable(function(d){try{d.next(c._txc.run(u,f)),d.complete()}catch(g){d.error(g)}return function(){}}))}},{key:"commit",value:function(){var u=this;return new i.Observable(function(f){u._txc.commit().then(function(){f.complete()}).catch(function(c){return f.error(c)})})}},{key:"rollback",value:function(){var u=this;return new i.Observable(function(f){u._txc.rollback().then(function(){f.complete()}).catch(function(c){return f.error(c)})})}},{key:"close",value:function(){var u=this;return new i.Observable(function(f){u._txc.close().then(function(){f.complete()}).catch(function(c){return f.error(c)})})}}]),a}();n.default=s}(Em)),Em}var Om={},LC;function Vne(){return LC||(LC=1,function(n){var e=Xs.exports;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=e($u()),r=e(ec()),i=Mt(),o=sp,s=_y;i.internal.logger.Logger;var a=i.internal.retryStrategy.canRetryOn,l=i.error.SERVICE_UNAVAILABLE;i.error.SESSION_EXPIRED;var u=30*1e3,f=1e3,c=2,d=.2,g=function(){function v(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=m.maxRetryTimeout,y=p===void 0?u:p,b=m.initialDelay,_=b===void 0?f:b,w=m.delayMultiplier,S=w===void 0?c:w,E=m.delayJitter,P=E===void 0?d:E,R=m.logger,j=R===void 0?null:R;(0,t.default)(this,v),this._maxRetryTimeout=h(y,u),this._initialDelay=h(_,f),this._delayMultiplier=h(S,c),this._delayJitter=h(P,d),this._logger=j}return(0,r.default)(v,[{key:"retry",value:function(p){var y=this;return p.pipe((0,s.retryWhen)(function(b){var _=[],w=Date.now(),S=1,E=y._initialDelay;return b.pipe((0,s.flatMap)(function(P){if(!a(P))return(0,o.throwError)(P);if(_.push(P),S>=2&&Date.now()-w>=y._maxRetryTimeout){var R=(0,i.newError)("Failed after retried for ".concat(S," times in ").concat(y._maxRetryTimeout," ms. Make sure that your database is online and retry again."),l);return R.seenErrors=_,(0,o.throwError)(R)}var j=y._computeNextDelay(E);return E=E*y._delayMultiplier,S++,y._logger&&y._logger.warn("Transaction failed and will be retried in ".concat(j)),(0,o.of)(1).pipe((0,s.delay)(j))}))}))}},{key:"_computeNextDelay",value:function(p){var y=p*this._delayJitter;return p-y+2*y*Math.random()}}]),v}();n.default=g;function h(v,m){return v||v===0?v:m}}(Om)),Om}var BC;function PI(){return BC||(BC=1,function(n){var e=Xs.exports;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=e($u()),r=e(ec()),i=sp,o=_y,s=e(by()),a=Mt(),l=e(TI()),u=e(Vne()),f=a.internal.constants,c=f.ACCESS_MODE_READ,d=f.ACCESS_MODE_WRITE,g=a.internal.txConfig.TxConfig,h=function(){function m(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=p.session,b=p.config;(0,t.default)(this,m),this._session=y,this._retryLogic=v(b)}return(0,r.default)(m,[{key:"run",value:function(y,b,_){var w=this;return new s.default(new i.Observable(function(S){try{S.next(w._session.run(y,b,_)),S.complete()}catch(E){S.error(E)}return function(){}}))}},{key:"beginTransaction",value:function(y){return this._beginTransaction(this._session._mode,y)}},{key:"readTransaction",value:function(y,b){return this._runTransaction(c,y,b)}},{key:"writeTransaction",value:function(y,b){return this._runTransaction(d,y,b)}},{key:"close",value:function(){var y=this;return new i.Observable(function(b){y._session.close().then(function(){b.complete()}).catch(function(_){return b.error(_)})})}},{key:"lastBookmark",value:function(){return this._session.lastBookmark()}},{key:"_beginTransaction",value:function(y,b){var _=this,w=g.empty();return b&&(w=new g(b)),new i.Observable(function(S){try{S.next(new l.default(_._session._beginTransaction(y,w))),S.complete()}catch(E){S.error(E)}return function(){}})}},{key:"_runTransaction",value:function(y,b,_){return g.empty(),_&&new g(_),this._retryLogic.retry(this._beginTransaction(y,_).pipe((0,o.flatMap)(function(w){return(0,i.defer)(function(){try{return b(w)}catch(S){return(0,i.throwError)(S)}}).pipe((0,o.catchError)(function(S){return w.rollback().pipe((0,o.concat)((0,i.throwError)(S)))}),(0,o.concat)(w.commit()))})))}}]),m}();n.default=h;function v(m){var p=m&&m.maxTransactionRetryTime?m.maxTransactionRetryTime:null;return new u.default({maxRetryTimeout:p})}}(Sm)),Sm}(function(n){var e=Xs.exports;Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.WRITE=n.READ=n.Driver=void 0;var t=e($u()),r=e(ec()),i=e(QQ()),o=e($Q()),s=e(eZ()),a=Mt(),l=e(PI());function u(p){var y=f();return function(){var _=(0,s.default)(p),w;if(y){var S=(0,s.default)(this).constructor;w=Reflect.construct(_,arguments,S)}else w=_.apply(this,arguments);return(0,o.default)(this,w)}}function f(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var c=a.internal.constants.FETCH_ALL,d=a.driver.READ,g=a.driver.WRITE;n.WRITE=g,n.READ=d;var h=function(p){(0,i.default)(b,p);var y=u(b);function b(){return(0,t.default)(this,b),y.apply(this,arguments)}return(0,r.default)(b,[{key:"rxSession",value:function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=w.defaultAccessMode,E=S===void 0?g:S,P=w.bookmarks,R=w.database,j=R===void 0?"":R,U=w.fetchSize,F=w.impersonatedUser;return new l.default({session:this._newSession({defaultAccessMode:E,bookmarkOrBookmarks:P,database:j,impersonatedUser:F,reactive:!0,fetchSize:v(U,this._config.fetchSize)}),config:this._config})}}]),b}(a.Driver);n.Driver=h;function v(p,y){var b=parseInt(p,10);if(b>0||b===c)return b;if(b===0||b<0)throw new Error("The fetch size can only be a positive value or ".concat(c," for ALL. However fetchSize = ").concat(b));return y}var m=h;n.default=m})(P3);var km={},FC;function qne(){return FC||(FC=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e="4.4.7";n.default=e}(km)),km}var Tm={},Oo={},of={},UC;function II(){if(UC)return of;UC=1,Object.defineProperty(of,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.selectReader=function(t){throw new Error("Abstract function")},e.prototype.selectWriter=function(t){throw new Error("Abstract function")},e}();return of.default=n,of}var sf={},af={},VC;function Hne(){if(VC)return af;VC=1,Object.defineProperty(af,"__esModule",{value:!0});var n=function(){function e(t){this._offset=t||0}return e.prototype.next=function(t){if(t===0)return-1;var r=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),r%t},e}();return af.default=n,af}var qC;function zne(){if(qC)return sf;qC=1;var n=oe&&oe.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(l[f]=u[f])},o(s,a)};return function(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");o(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}(),e=oe&&oe.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(sf,"__esModule",{value:!0});var t=e(Hne()),r=e(II()),i=function(o){n(s,o);function s(a){var l=o.call(this)||this;return l._readersIndex=new t.default,l._writersIndex=new t.default,l._connectionPool=a,l}return s.prototype.selectReader=function(a){return this._select(a,this._readersIndex)},s.prototype.selectWriter=function(a){return this._select(a,this._writersIndex)},s.prototype._select=function(a,l){var u=a.length;if(u===0)return null;var f=l.next(u),c=f,d=null,g=Number.MAX_SAFE_INTEGER;do{var h=a[c],v=this._connectionPool.activeResourceCount(h);v<g&&(d=h,g=v),c===u-1?c=0:c++}while(c!==f);return d},s}(r.default);return sf.default=i,sf}var HC;function AI(){if(HC)return Oo;HC=1;var n=oe&&oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.LeastConnectedLoadBalancingStrategy=Oo.LoadBalancingStrategy=void 0;var e=n(II());Oo.LoadBalancingStrategy=e.default;var t=n(zne());return Oo.LeastConnectedLoadBalancingStrategy=t.default,Oo.default=t.default,Oo}var Pm={},lf={},Im={},ds={},uf={},aa={},Am={},Il={},zC;function Wne(){if(zC)return Il;zC=1,Il.byteLength=a,Il.toByteArray=u,Il.fromByteArray=d;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)n[i]=r[i],e[r.charCodeAt(i)]=i;e["-".charCodeAt(0)]=62,e["_".charCodeAt(0)]=63;function s(g){var h=g.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=g.indexOf("=");v===-1&&(v=h);var m=v===h?0:4-v%4;return[v,m]}function a(g){var h=s(g),v=h[0],m=h[1];return(v+m)*3/4-m}function l(g,h,v){return(h+v)*3/4-v}function u(g){var h,v=s(g),m=v[0],p=v[1],y=new t(l(g,m,p)),b=0,_=p>0?m-4:m,w;for(w=0;w<_;w+=4)h=e[g.charCodeAt(w)]<<18|e[g.charCodeAt(w+1)]<<12|e[g.charCodeAt(w+2)]<<6|e[g.charCodeAt(w+3)],y[b++]=h>>16&255,y[b++]=h>>8&255,y[b++]=h&255;return p===2&&(h=e[g.charCodeAt(w)]<<2|e[g.charCodeAt(w+1)]>>4,y[b++]=h&255),p===1&&(h=e[g.charCodeAt(w)]<<10|e[g.charCodeAt(w+1)]<<4|e[g.charCodeAt(w+2)]>>2,y[b++]=h>>8&255,y[b++]=h&255),y}function f(g){return n[g>>18&63]+n[g>>12&63]+n[g>>6&63]+n[g&63]}function c(g,h,v){for(var m,p=[],y=h;y<v;y+=3)m=(g[y]<<16&16711680)+(g[y+1]<<8&65280)+(g[y+2]&255),p.push(f(m));return p.join("")}function d(g){for(var h,v=g.length,m=v%3,p=[],y=16383,b=0,_=v-m;b<_;b+=y)p.push(c(g,b,b+y>_?_:b+y));return m===1?(h=g[v-1],p.push(n[h>>2]+n[h<<4&63]+"==")):m===2&&(h=(g[v-2]<<8)+g[v-1],p.push(n[h>>10]+n[h>>4&63]+n[h<<2&63]+"=")),p.join("")}return Il}var cf={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var WC;function Kne(){return WC||(WC=1,cf.read=function(n,e,t,r,i){var o,s,a=i*8-r-1,l=(1<<a)-1,u=l>>1,f=-7,c=t?i-1:0,d=t?-1:1,g=n[e+c];for(c+=d,o=g&(1<<-f)-1,g>>=-f,f+=a;f>0;o=o*256+n[e+c],c+=d,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=s*256+n[e+c],c+=d,f-=8);if(o===0)o=1-u;else{if(o===l)return s?NaN:(g?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-u}return(g?-1:1)*s*Math.pow(2,o-r)},cf.write=function(n,e,t,r,i,o){var s,a,l,u=o*8-i-1,f=(1<<u)-1,c=f>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:o-1,h=r?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+c>=1?e+=d/l:e+=d*Math.pow(2,1-c),e*l>=2&&(s++,l/=2),s+c>=f?(a=0,s=f):s+c>=1?(a=(e*l-1)*Math.pow(2,i),s=s+c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;n[t+g]=a&255,g+=h,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;n[t+g]=s&255,g+=h,s/=256,u-=8);n[t+g-h]|=v*128}),cf}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var KC;function wy(){return KC||(KC=1,function(n){const e=Wne(),t=Kne(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=y,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const x=new Uint8Array(1),C={foo:function(){return 42}};return Object.setPrototypeOf(C,Uint8Array.prototype),Object.setPrototypeOf(x,C),x.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.byteOffset}});function s(x){if(x>i)throw new RangeError('The value "'+x+'" is invalid for option "size"');const C=new Uint8Array(x);return Object.setPrototypeOf(C,a.prototype),C}function a(x,C,O){if(typeof x=="number"){if(typeof C=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(x)}return l(x,C,O)}a.poolSize=8192;function l(x,C,O){if(typeof x=="string")return d(x,C);if(ArrayBuffer.isView(x))return h(x);if(x==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x);if(He(x,ArrayBuffer)||x&&He(x.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(He(x,SharedArrayBuffer)||x&&He(x.buffer,SharedArrayBuffer)))return v(x,C,O);if(typeof x=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Y=x.valueOf&&x.valueOf();if(Y!=null&&Y!==x)return a.from(Y,C,O);const ie=m(x);if(ie)return ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof x[Symbol.toPrimitive]=="function")return a.from(x[Symbol.toPrimitive]("string"),C,O);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof x)}a.from=function(x,C,O){return l(x,C,O)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function u(x){if(typeof x!="number")throw new TypeError('"size" argument must be of type number');if(x<0)throw new RangeError('The value "'+x+'" is invalid for option "size"')}function f(x,C,O){return u(x),x<=0?s(x):C!==void 0?typeof O=="string"?s(x).fill(C,O):s(x).fill(C):s(x)}a.alloc=function(x,C,O){return f(x,C,O)};function c(x){return u(x),s(x<0?0:p(x)|0)}a.allocUnsafe=function(x){return c(x)},a.allocUnsafeSlow=function(x){return c(x)};function d(x,C){if((typeof C!="string"||C==="")&&(C="utf8"),!a.isEncoding(C))throw new TypeError("Unknown encoding: "+C);const O=b(x,C)|0;let Y=s(O);const ie=Y.write(x,C);return ie!==O&&(Y=Y.slice(0,ie)),Y}function g(x){const C=x.length<0?0:p(x.length)|0,O=s(C);for(let Y=0;Y<C;Y+=1)O[Y]=x[Y]&255;return O}function h(x){if(He(x,Uint8Array)){const C=new Uint8Array(x);return v(C.buffer,C.byteOffset,C.byteLength)}return g(x)}function v(x,C,O){if(C<0||x.byteLength<C)throw new RangeError('"offset" is outside of buffer bounds');if(x.byteLength<C+(O||0))throw new RangeError('"length" is outside of buffer bounds');let Y;return C===void 0&&O===void 0?Y=new Uint8Array(x):O===void 0?Y=new Uint8Array(x,C):Y=new Uint8Array(x,C,O),Object.setPrototypeOf(Y,a.prototype),Y}function m(x){if(a.isBuffer(x)){const C=p(x.length)|0,O=s(C);return O.length===0||x.copy(O,0,0,C),O}if(x.length!==void 0)return typeof x.length!="number"||Xe(x.length)?s(0):g(x);if(x.type==="Buffer"&&Array.isArray(x.data))return g(x.data)}function p(x){if(x>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return x|0}function y(x){return+x!=x&&(x=0),a.alloc(+x)}a.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==a.prototype},a.compare=function(C,O){if(He(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),He(O,Uint8Array)&&(O=a.from(O,O.offset,O.byteLength)),!a.isBuffer(C)||!a.isBuffer(O))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===O)return 0;let Y=C.length,ie=O.length;for(let pe=0,ge=Math.min(Y,ie);pe<ge;++pe)if(C[pe]!==O[pe]){Y=C[pe],ie=O[pe];break}return Y<ie?-1:ie<Y?1:0},a.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(C,O){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return a.alloc(0);let Y;if(O===void 0)for(O=0,Y=0;Y<C.length;++Y)O+=C[Y].length;const ie=a.allocUnsafe(O);let pe=0;for(Y=0;Y<C.length;++Y){let ge=C[Y];if(He(ge,Uint8Array))pe+ge.length>ie.length?(a.isBuffer(ge)||(ge=a.from(ge)),ge.copy(ie,pe)):Uint8Array.prototype.set.call(ie,ge,pe);else if(a.isBuffer(ge))ge.copy(ie,pe);else throw new TypeError('"list" argument must be an Array of Buffers');pe+=ge.length}return ie};function b(x,C){if(a.isBuffer(x))return x.length;if(ArrayBuffer.isView(x)||He(x,ArrayBuffer))return x.byteLength;if(typeof x!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof x);const O=x.length,Y=arguments.length>2&&arguments[2]===!0;if(!Y&&O===0)return 0;let ie=!1;for(;;)switch(C){case"ascii":case"latin1":case"binary":return O;case"utf8":case"utf-8":return he(x).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O*2;case"hex":return O>>>1;case"base64":return Ie(x).length;default:if(ie)return Y?-1:he(x).length;C=(""+C).toLowerCase(),ie=!0}}a.byteLength=b;function _(x,C,O){let Y=!1;if((C===void 0||C<0)&&(C=0),C>this.length||((O===void 0||O>this.length)&&(O=this.length),O<=0)||(O>>>=0,C>>>=0,O<=C))return"";for(x||(x="utf8");;)switch(x){case"hex":return A(this,C,O);case"utf8":case"utf-8":return D(this,C,O);case"ascii":return X(this,C,O);case"latin1":case"binary":return Q(this,C,O);case"base64":return z(this,C,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,C,O);default:if(Y)throw new TypeError("Unknown encoding: "+x);x=(x+"").toLowerCase(),Y=!0}}a.prototype._isBuffer=!0;function w(x,C,O){const Y=x[C];x[C]=x[O],x[O]=Y}a.prototype.swap16=function(){const C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let O=0;O<C;O+=2)w(this,O,O+1);return this},a.prototype.swap32=function(){const C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let O=0;O<C;O+=4)w(this,O,O+3),w(this,O+1,O+2);return this},a.prototype.swap64=function(){const C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let O=0;O<C;O+=8)w(this,O,O+7),w(this,O+1,O+6),w(this,O+2,O+5),w(this,O+3,O+4);return this},a.prototype.toString=function(){const C=this.length;return C===0?"":arguments.length===0?D(this,0,C):_.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(C){if(!a.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:a.compare(this,C)===0},a.prototype.inspect=function(){let C="";const O=n.INSPECT_MAX_BYTES;return C=this.toString("hex",0,O).replace(/(.{2})/g,"$1 ").trim(),this.length>O&&(C+=" ... "),"<Buffer "+C+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(C,O,Y,ie,pe){if(He(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),!a.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(O===void 0&&(O=0),Y===void 0&&(Y=C?C.length:0),ie===void 0&&(ie=0),pe===void 0&&(pe=this.length),O<0||Y>C.length||ie<0||pe>this.length)throw new RangeError("out of range index");if(ie>=pe&&O>=Y)return 0;if(ie>=pe)return-1;if(O>=Y)return 1;if(O>>>=0,Y>>>=0,ie>>>=0,pe>>>=0,this===C)return 0;let ge=pe-ie,Qe=Y-O;const J=Math.min(ge,Qe),se=this.slice(ie,pe),re=C.slice(O,Y);for(let _e=0;_e<J;++_e)if(se[_e]!==re[_e]){ge=se[_e],Qe=re[_e];break}return ge<Qe?-1:Qe<ge?1:0};function S(x,C,O,Y,ie){if(x.length===0)return-1;if(typeof O=="string"?(Y=O,O=0):O>2147483647?O=2147483647:O<-2147483648&&(O=-2147483648),O=+O,Xe(O)&&(O=ie?0:x.length-1),O<0&&(O=x.length+O),O>=x.length){if(ie)return-1;O=x.length-1}else if(O<0)if(ie)O=0;else return-1;if(typeof C=="string"&&(C=a.from(C,Y)),a.isBuffer(C))return C.length===0?-1:E(x,C,O,Y,ie);if(typeof C=="number")return C=C&255,typeof Uint8Array.prototype.indexOf=="function"?ie?Uint8Array.prototype.indexOf.call(x,C,O):Uint8Array.prototype.lastIndexOf.call(x,C,O):E(x,[C],O,Y,ie);throw new TypeError("val must be string, number or Buffer")}function E(x,C,O,Y,ie){let pe=1,ge=x.length,Qe=C.length;if(Y!==void 0&&(Y=String(Y).toLowerCase(),Y==="ucs2"||Y==="ucs-2"||Y==="utf16le"||Y==="utf-16le")){if(x.length<2||C.length<2)return-1;pe=2,ge/=2,Qe/=2,O/=2}function J(re,_e){return pe===1?re[_e]:re.readUInt16BE(_e*pe)}let se;if(ie){let re=-1;for(se=O;se<ge;se++)if(J(x,se)===J(C,re===-1?0:se-re)){if(re===-1&&(re=se),se-re+1===Qe)return re*pe}else re!==-1&&(se-=se-re),re=-1}else for(O+Qe>ge&&(O=ge-Qe),se=O;se>=0;se--){let re=!0;for(let _e=0;_e<Qe;_e++)if(J(x,se+_e)!==J(C,_e)){re=!1;break}if(re)return se}return-1}a.prototype.includes=function(C,O,Y){return this.indexOf(C,O,Y)!==-1},a.prototype.indexOf=function(C,O,Y){return S(this,C,O,Y,!0)},a.prototype.lastIndexOf=function(C,O,Y){return S(this,C,O,Y,!1)};function P(x,C,O,Y){O=Number(O)||0;const ie=x.length-O;Y?(Y=Number(Y),Y>ie&&(Y=ie)):Y=ie;const pe=C.length;Y>pe/2&&(Y=pe/2);let ge;for(ge=0;ge<Y;++ge){const Qe=parseInt(C.substr(ge*2,2),16);if(Xe(Qe))return ge;x[O+ge]=Qe}return ge}function R(x,C,O,Y){return De(he(C,x.length-O),x,O,Y)}function j(x,C,O,Y){return De(ve(C),x,O,Y)}function U(x,C,O,Y){return De(Ie(C),x,O,Y)}function F(x,C,O,Y){return De(de(C,x.length-O),x,O,Y)}a.prototype.write=function(C,O,Y,ie){if(O===void 0)ie="utf8",Y=this.length,O=0;else if(Y===void 0&&typeof O=="string")ie=O,Y=this.length,O=0;else if(isFinite(O))O=O>>>0,isFinite(Y)?(Y=Y>>>0,ie===void 0&&(ie="utf8")):(ie=Y,Y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const pe=this.length-O;if((Y===void 0||Y>pe)&&(Y=pe),C.length>0&&(Y<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");ie||(ie="utf8");let ge=!1;for(;;)switch(ie){case"hex":return P(this,C,O,Y);case"utf8":case"utf-8":return R(this,C,O,Y);case"ascii":case"latin1":case"binary":return j(this,C,O,Y);case"base64":return U(this,C,O,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,C,O,Y);default:if(ge)throw new TypeError("Unknown encoding: "+ie);ie=(""+ie).toLowerCase(),ge=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(x,C,O){return C===0&&O===x.length?e.fromByteArray(x):e.fromByteArray(x.slice(C,O))}function D(x,C,O){O=Math.min(x.length,O);const Y=[];let ie=C;for(;ie<O;){const pe=x[ie];let ge=null,Qe=pe>239?4:pe>223?3:pe>191?2:1;if(ie+Qe<=O){let J,se,re,_e;switch(Qe){case 1:pe<128&&(ge=pe);break;case 2:J=x[ie+1],(J&192)===128&&(_e=(pe&31)<<6|J&63,_e>127&&(ge=_e));break;case 3:J=x[ie+1],se=x[ie+2],(J&192)===128&&(se&192)===128&&(_e=(pe&15)<<12|(J&63)<<6|se&63,_e>2047&&(_e<55296||_e>57343)&&(ge=_e));break;case 4:J=x[ie+1],se=x[ie+2],re=x[ie+3],(J&192)===128&&(se&192)===128&&(re&192)===128&&(_e=(pe&15)<<18|(J&63)<<12|(se&63)<<6|re&63,_e>65535&&_e<1114112&&(ge=_e))}}ge===null?(ge=65533,Qe=1):ge>65535&&(ge-=65536,Y.push(ge>>>10&1023|55296),ge=56320|ge&1023),Y.push(ge),ie+=Qe}return L(Y)}const N=4096;function L(x){const C=x.length;if(C<=N)return String.fromCharCode.apply(String,x);let O="",Y=0;for(;Y<C;)O+=String.fromCharCode.apply(String,x.slice(Y,Y+=N));return O}function X(x,C,O){let Y="";O=Math.min(x.length,O);for(let ie=C;ie<O;++ie)Y+=String.fromCharCode(x[ie]&127);return Y}function Q(x,C,O){let Y="";O=Math.min(x.length,O);for(let ie=C;ie<O;++ie)Y+=String.fromCharCode(x[ie]);return Y}function A(x,C,O){const Y=x.length;(!C||C<0)&&(C=0),(!O||O<0||O>Y)&&(O=Y);let ie="";for(let pe=C;pe<O;++pe)ie+=mt[x[pe]];return ie}function k(x,C,O){const Y=x.slice(C,O);let ie="";for(let pe=0;pe<Y.length-1;pe+=2)ie+=String.fromCharCode(Y[pe]+Y[pe+1]*256);return ie}a.prototype.slice=function(C,O){const Y=this.length;C=~~C,O=O===void 0?Y:~~O,C<0?(C+=Y,C<0&&(C=0)):C>Y&&(C=Y),O<0?(O+=Y,O<0&&(O=0)):O>Y&&(O=Y),O<C&&(O=C);const ie=this.subarray(C,O);return Object.setPrototypeOf(ie,a.prototype),ie};function V(x,C,O){if(x%1!==0||x<0)throw new RangeError("offset is not uint");if(x+C>O)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(C,O,Y){C=C>>>0,O=O>>>0,Y||V(C,O,this.length);let ie=this[C],pe=1,ge=0;for(;++ge<O&&(pe*=256);)ie+=this[C+ge]*pe;return ie},a.prototype.readUintBE=a.prototype.readUIntBE=function(C,O,Y){C=C>>>0,O=O>>>0,Y||V(C,O,this.length);let ie=this[C+--O],pe=1;for(;O>0&&(pe*=256);)ie+=this[C+--O]*pe;return ie},a.prototype.readUint8=a.prototype.readUInt8=function(C,O){return C=C>>>0,O||V(C,1,this.length),this[C]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(C,O){return C=C>>>0,O||V(C,2,this.length),this[C]|this[C+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(C,O){return C=C>>>0,O||V(C,2,this.length),this[C]<<8|this[C+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(C,O){return C=C>>>0,O||V(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(C,O){return C=C>>>0,O||V(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},a.prototype.readBigUInt64LE=be(function(C){C=C>>>0,Ae(C,"offset");const O=this[C],Y=this[C+7];(O===void 0||Y===void 0)&&ye(C,this.length-8);const ie=O+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,pe=this[++C]+this[++C]*2**8+this[++C]*2**16+Y*2**24;return BigInt(ie)+(BigInt(pe)<<BigInt(32))}),a.prototype.readBigUInt64BE=be(function(C){C=C>>>0,Ae(C,"offset");const O=this[C],Y=this[C+7];(O===void 0||Y===void 0)&&ye(C,this.length-8);const ie=O*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],pe=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+Y;return(BigInt(ie)<<BigInt(32))+BigInt(pe)}),a.prototype.readIntLE=function(C,O,Y){C=C>>>0,O=O>>>0,Y||V(C,O,this.length);let ie=this[C],pe=1,ge=0;for(;++ge<O&&(pe*=256);)ie+=this[C+ge]*pe;return pe*=128,ie>=pe&&(ie-=Math.pow(2,8*O)),ie},a.prototype.readIntBE=function(C,O,Y){C=C>>>0,O=O>>>0,Y||V(C,O,this.length);let ie=O,pe=1,ge=this[C+--ie];for(;ie>0&&(pe*=256);)ge+=this[C+--ie]*pe;return pe*=128,ge>=pe&&(ge-=Math.pow(2,8*O)),ge},a.prototype.readInt8=function(C,O){return C=C>>>0,O||V(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},a.prototype.readInt16LE=function(C,O){C=C>>>0,O||V(C,2,this.length);const Y=this[C]|this[C+1]<<8;return Y&32768?Y|4294901760:Y},a.prototype.readInt16BE=function(C,O){C=C>>>0,O||V(C,2,this.length);const Y=this[C+1]|this[C]<<8;return Y&32768?Y|4294901760:Y},a.prototype.readInt32LE=function(C,O){return C=C>>>0,O||V(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},a.prototype.readInt32BE=function(C,O){return C=C>>>0,O||V(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},a.prototype.readBigInt64LE=be(function(C){C=C>>>0,Ae(C,"offset");const O=this[C],Y=this[C+7];(O===void 0||Y===void 0)&&ye(C,this.length-8);const ie=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(Y<<24);return(BigInt(ie)<<BigInt(32))+BigInt(O+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),a.prototype.readBigInt64BE=be(function(C){C=C>>>0,Ae(C,"offset");const O=this[C],Y=this[C+7];(O===void 0||Y===void 0)&&ye(C,this.length-8);const ie=(O<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt(ie)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+Y)}),a.prototype.readFloatLE=function(C,O){return C=C>>>0,O||V(C,4,this.length),t.read(this,C,!0,23,4)},a.prototype.readFloatBE=function(C,O){return C=C>>>0,O||V(C,4,this.length),t.read(this,C,!1,23,4)},a.prototype.readDoubleLE=function(C,O){return C=C>>>0,O||V(C,8,this.length),t.read(this,C,!0,52,8)},a.prototype.readDoubleBE=function(C,O){return C=C>>>0,O||V(C,8,this.length),t.read(this,C,!1,52,8)};function K(x,C,O,Y,ie,pe){if(!a.isBuffer(x))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>ie||C<pe)throw new RangeError('"value" argument is out of bounds');if(O+Y>x.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(C,O,Y,ie){if(C=+C,O=O>>>0,Y=Y>>>0,!ie){const Qe=Math.pow(2,8*Y)-1;K(this,C,O,Y,Qe,0)}let pe=1,ge=0;for(this[O]=C&255;++ge<Y&&(pe*=256);)this[O+ge]=C/pe&255;return O+Y},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(C,O,Y,ie){if(C=+C,O=O>>>0,Y=Y>>>0,!ie){const Qe=Math.pow(2,8*Y)-1;K(this,C,O,Y,Qe,0)}let pe=Y-1,ge=1;for(this[O+pe]=C&255;--pe>=0&&(ge*=256);)this[O+pe]=C/ge&255;return O+Y},a.prototype.writeUint8=a.prototype.writeUInt8=function(C,O,Y){return C=+C,O=O>>>0,Y||K(this,C,O,1,255,0),this[O]=C&255,O+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(C,O,Y){return C=+C,O=O>>>0,Y||K(this,C,O,2,65535,0),this[O]=C&255,this[O+1]=C>>>8,O+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(C,O,Y){return C=+C,O=O>>>0,Y||K(this,C,O,2,65535,0),this[O]=C>>>8,this[O+1]=C&255,O+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(C,O,Y){return C=+C,O=O>>>0,Y||K(this,C,O,4,4294967295,0),this[O+3]=C>>>24,this[O+2]=C>>>16,this[O+1]=C>>>8,this[O]=C&255,O+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(C,O,Y){return C=+C,O=O>>>0,Y||K(this,C,O,4,4294967295,0),this[O]=C>>>24,this[O+1]=C>>>16,this[O+2]=C>>>8,this[O+3]=C&255,O+4};function H(x,C,O,Y,ie){Ve(C,Y,ie,x,O,7);let pe=Number(C&BigInt(4294967295));x[O++]=pe,pe=pe>>8,x[O++]=pe,pe=pe>>8,x[O++]=pe,pe=pe>>8,x[O++]=pe;let ge=Number(C>>BigInt(32)&BigInt(4294967295));return x[O++]=ge,ge=ge>>8,x[O++]=ge,ge=ge>>8,x[O++]=ge,ge=ge>>8,x[O++]=ge,O}function I(x,C,O,Y,ie){Ve(C,Y,ie,x,O,7);let pe=Number(C&BigInt(4294967295));x[O+7]=pe,pe=pe>>8,x[O+6]=pe,pe=pe>>8,x[O+5]=pe,pe=pe>>8,x[O+4]=pe;let ge=Number(C>>BigInt(32)&BigInt(4294967295));return x[O+3]=ge,ge=ge>>8,x[O+2]=ge,ge=ge>>8,x[O+1]=ge,ge=ge>>8,x[O]=ge,O+8}a.prototype.writeBigUInt64LE=be(function(C,O=0){return H(this,C,O,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=be(function(C,O=0){return I(this,C,O,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(C,O,Y,ie){if(C=+C,O=O>>>0,!ie){const J=Math.pow(2,8*Y-1);K(this,C,O,Y,J-1,-J)}let pe=0,ge=1,Qe=0;for(this[O]=C&255;++pe<Y&&(ge*=256);)C<0&&Qe===0&&this[O+pe-1]!==0&&(Qe=1),this[O+pe]=(C/ge>>0)-Qe&255;return O+Y},a.prototype.writeIntBE=function(C,O,Y,ie){if(C=+C,O=O>>>0,!ie){const J=Math.pow(2,8*Y-1);K(this,C,O,Y,J-1,-J)}let pe=Y-1,ge=1,Qe=0;for(this[O+pe]=C&255;--pe>=0&&(ge*=256);)C<0&&Qe===0&&this[O+pe+1]!==0&&(Qe=1),this[O+pe]=(C/ge>>0)-Qe&255;return O+Y},a.prototype.writeInt8=function(C,O,Y){return C=+C,O=O>>>0,Y||K(this,C,O,1,127,-128),C<0&&(C=255+C+1),this[O]=C&255,O+1},a.prototype.writeInt16LE=function(C,O,Y){return C=+C,O=O>>>0,Y||K(this,C,O,2,32767,-32768),this[O]=C&255,this[O+1]=C>>>8,O+2},a.prototype.writeInt16BE=function(C,O,Y){return C=+C,O=O>>>0,Y||K(this,C,O,2,32767,-32768),this[O]=C>>>8,this[O+1]=C&255,O+2},a.prototype.writeInt32LE=function(C,O,Y){return C=+C,O=O>>>0,Y||K(this,C,O,4,2147483647,-2147483648),this[O]=C&255,this[O+1]=C>>>8,this[O+2]=C>>>16,this[O+3]=C>>>24,O+4},a.prototype.writeInt32BE=function(C,O,Y){return C=+C,O=O>>>0,Y||K(this,C,O,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[O]=C>>>24,this[O+1]=C>>>16,this[O+2]=C>>>8,this[O+3]=C&255,O+4},a.prototype.writeBigInt64LE=be(function(C,O=0){return H(this,C,O,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=be(function(C,O=0){return I(this,C,O,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function M(x,C,O,Y,ie,pe){if(O+Y>x.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("Index out of range")}function G(x,C,O,Y,ie){return C=+C,O=O>>>0,ie||M(x,C,O,4),t.write(x,C,O,Y,23,4),O+4}a.prototype.writeFloatLE=function(C,O,Y){return G(this,C,O,!0,Y)},a.prototype.writeFloatBE=function(C,O,Y){return G(this,C,O,!1,Y)};function q(x,C,O,Y,ie){return C=+C,O=O>>>0,ie||M(x,C,O,8),t.write(x,C,O,Y,52,8),O+8}a.prototype.writeDoubleLE=function(C,O,Y){return q(this,C,O,!0,Y)},a.prototype.writeDoubleBE=function(C,O,Y){return q(this,C,O,!1,Y)},a.prototype.copy=function(C,O,Y,ie){if(!a.isBuffer(C))throw new TypeError("argument should be a Buffer");if(Y||(Y=0),!ie&&ie!==0&&(ie=this.length),O>=C.length&&(O=C.length),O||(O=0),ie>0&&ie<Y&&(ie=Y),ie===Y||C.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(Y<0||Y>=this.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("sourceEnd out of bounds");ie>this.length&&(ie=this.length),C.length-O<ie-Y&&(ie=C.length-O+Y);const pe=ie-Y;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(O,Y,ie):Uint8Array.prototype.set.call(C,this.subarray(Y,ie),O),pe},a.prototype.fill=function(C,O,Y,ie){if(typeof C=="string"){if(typeof O=="string"?(ie=O,O=0,Y=this.length):typeof Y=="string"&&(ie=Y,Y=this.length),ie!==void 0&&typeof ie!="string")throw new TypeError("encoding must be a string");if(typeof ie=="string"&&!a.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);if(C.length===1){const ge=C.charCodeAt(0);(ie==="utf8"&&ge<128||ie==="latin1")&&(C=ge)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(O<0||this.length<O||this.length<Y)throw new RangeError("Out of range index");if(Y<=O)return this;O=O>>>0,Y=Y===void 0?this.length:Y>>>0,C||(C=0);let pe;if(typeof C=="number")for(pe=O;pe<Y;++pe)this[pe]=C;else{const ge=a.isBuffer(C)?C:a.from(C,ie),Qe=ge.length;if(Qe===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(pe=0;pe<Y-O;++pe)this[pe+O]=ge[pe%Qe]}return this};const W={};function ae(x,C,O){W[x]=class extends O{constructor(){super(),Object.defineProperty(this,"message",{value:C.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${x}]`,this.stack,delete this.name}get code(){return x}set code(ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ie,writable:!0})}toString(){return`${this.name} [${x}]: ${this.message}`}}}ae("ERR_BUFFER_OUT_OF_BOUNDS",function(x){return x?`${x} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ae("ERR_INVALID_ARG_TYPE",function(x,C){return`The "${x}" argument must be of type number. Received type ${typeof C}`},TypeError),ae("ERR_OUT_OF_RANGE",function(x,C,O){let Y=`The value of "${x}" is out of range.`,ie=O;return Number.isInteger(O)&&Math.abs(O)>2**32?ie=le(String(O)):typeof O=="bigint"&&(ie=String(O),(O>BigInt(2)**BigInt(32)||O<-(BigInt(2)**BigInt(32)))&&(ie=le(ie)),ie+="n"),Y+=` It must be ${C}. Received ${ie}`,Y},RangeError);function le(x){let C="",O=x.length;const Y=x[0]==="-"?1:0;for(;O>=Y+4;O-=3)C=`_${x.slice(O-3,O)}${C}`;return`${x.slice(0,O)}${C}`}function Pe(x,C,O){Ae(C,"offset"),(x[C]===void 0||x[C+O]===void 0)&&ye(C,x.length-(O+1))}function Ve(x,C,O,Y,ie,pe){if(x>O||x<C){const ge=typeof C=="bigint"?"n":"";let Qe;throw pe>3?C===0||C===BigInt(0)?Qe=`>= 0${ge} and < 2${ge} ** ${(pe+1)*8}${ge}`:Qe=`>= -(2${ge} ** ${(pe+1)*8-1}${ge}) and < 2 ** ${(pe+1)*8-1}${ge}`:Qe=`>= ${C}${ge} and <= ${O}${ge}`,new W.ERR_OUT_OF_RANGE("value",Qe,x)}Pe(Y,ie,pe)}function Ae(x,C){if(typeof x!="number")throw new W.ERR_INVALID_ARG_TYPE(C,"number",x)}function ye(x,C,O){throw Math.floor(x)!==x?(Ae(x,O),new W.ERR_OUT_OF_RANGE(O||"offset","an integer",x)):C<0?new W.ERR_BUFFER_OUT_OF_BOUNDS:new W.ERR_OUT_OF_RANGE(O||"offset",`>= ${O?1:0} and <= ${C}`,x)}const Ne=/[^+/0-9A-Za-z-_]/g;function xe(x){if(x=x.split("=")[0],x=x.trim().replace(Ne,""),x.length<2)return"";for(;x.length%4!==0;)x=x+"=";return x}function he(x,C){C=C||1/0;let O;const Y=x.length;let ie=null;const pe=[];for(let ge=0;ge<Y;++ge){if(O=x.charCodeAt(ge),O>55295&&O<57344){if(!ie){if(O>56319){(C-=3)>-1&&pe.push(239,191,189);continue}else if(ge+1===Y){(C-=3)>-1&&pe.push(239,191,189);continue}ie=O;continue}if(O<56320){(C-=3)>-1&&pe.push(239,191,189),ie=O;continue}O=(ie-55296<<10|O-56320)+65536}else ie&&(C-=3)>-1&&pe.push(239,191,189);if(ie=null,O<128){if((C-=1)<0)break;pe.push(O)}else if(O<2048){if((C-=2)<0)break;pe.push(O>>6|192,O&63|128)}else if(O<65536){if((C-=3)<0)break;pe.push(O>>12|224,O>>6&63|128,O&63|128)}else if(O<1114112){if((C-=4)<0)break;pe.push(O>>18|240,O>>12&63|128,O>>6&63|128,O&63|128)}else throw new Error("Invalid code point")}return pe}function ve(x){const C=[];for(let O=0;O<x.length;++O)C.push(x.charCodeAt(O)&255);return C}function de(x,C){let O,Y,ie;const pe=[];for(let ge=0;ge<x.length&&!((C-=2)<0);++ge)O=x.charCodeAt(ge),Y=O>>8,ie=O%256,pe.push(ie),pe.push(Y);return pe}function Ie(x){return e.toByteArray(xe(x))}function De(x,C,O,Y){let ie;for(ie=0;ie<Y&&!(ie+O>=C.length||ie>=x.length);++ie)C[ie+O]=x[ie];return ie}function He(x,C){return x instanceof C||x!=null&&x.constructor!=null&&x.constructor.name!=null&&x.constructor.name===C.name}function Xe(x){return x!==x}const mt=function(){const x="0123456789abcdef",C=new Array(256);for(let O=0;O<16;++O){const Y=O*16;for(let ie=0;ie<16;++ie)C[Y+ie]=x[O]+x[ie]}return C}();function be(x){return typeof BigInt>"u"?Z:x}function Z(){throw new Error("BigInt not supported")}}(Am)),Am}var la={},ff={},GC;function RI(){if(GC)return ff;GC=1;var n=oe&&oe.__extends||function(){var r=function(i,o){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},r(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");r(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}();Object.defineProperty(ff,"__esModule",{value:!0});var e=function(){function r(i){this.position=0,this.length=i}return r.prototype.getUInt8=function(i){throw new Error("Not implemented")},r.prototype.getInt8=function(i){throw new Error("Not implemented")},r.prototype.getFloat64=function(i){throw new Error("Not implemented")},r.prototype.putUInt8=function(i,o){throw new Error("Not implemented")},r.prototype.putInt8=function(i,o){throw new Error("Not implemented")},r.prototype.putFloat64=function(i,o){throw new Error("Not implemented")},r.prototype.getInt16=function(i){return this.getInt8(i)<<8|this.getUInt8(i+1)},r.prototype.getUInt16=function(i){return this.getUInt8(i)<<8|this.getUInt8(i+1)},r.prototype.getInt32=function(i){return this.getInt8(i)<<24|this.getUInt8(i+1)<<16|this.getUInt8(i+2)<<8|this.getUInt8(i+3)},r.prototype.getUInt32=function(i){return this.getUInt8(i)<<24|this.getUInt8(i+1)<<16|this.getUInt8(i+2)<<8|this.getUInt8(i+3)},r.prototype.getInt64=function(i){return this.getInt8(i)<<56|this.getUInt8(i+1)<<48|this.getUInt8(i+2)<<40|this.getUInt8(i+3)<<32|this.getUInt8(i+4)<<24|this.getUInt8(i+5)<<16|this.getUInt8(i+6)<<8|this.getUInt8(i+7)},r.prototype.getSlice=function(i,o){return new t(i,o,this)},r.prototype.putInt16=function(i,o){this.putInt8(i,o>>8),this.putUInt8(i+1,o&255)},r.prototype.putUInt16=function(i,o){this.putUInt8(i,o>>8&255),this.putUInt8(i+1,o&255)},r.prototype.putInt32=function(i,o){this.putInt8(i,o>>24),this.putUInt8(i+1,o>>16&255),this.putUInt8(i+2,o>>8&255),this.putUInt8(i+3,o&255)},r.prototype.putUInt32=function(i,o){this.putUInt8(i,o>>24&255),this.putUInt8(i+1,o>>16&255),this.putUInt8(i+2,o>>8&255),this.putUInt8(i+3,o&255)},r.prototype.putInt64=function(i,o){this.putInt8(i,o>>48),this.putUInt8(i+1,o>>42&255),this.putUInt8(i+2,o>>36&255),this.putUInt8(i+3,o>>30&255),this.putUInt8(i+4,o>>24&255),this.putUInt8(i+5,o>>16&255),this.putUInt8(i+6,o>>8&255),this.putUInt8(i+7,o&255)},r.prototype.putBytes=function(i,o){for(var s=0,a=o.remaining();s<a;s++)this.putUInt8(i+s,o.readUInt8())},r.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},r.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},r.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},r.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},r.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},r.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},r.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},r.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},r.prototype.writeUInt8=function(i){this.putUInt8(this._updatePos(1),i)},r.prototype.writeInt8=function(i){this.putInt8(this._updatePos(1),i)},r.prototype.writeInt16=function(i){this.putInt16(this._updatePos(2),i)},r.prototype.writeInt32=function(i){this.putInt32(this._updatePos(4),i)},r.prototype.writeUInt32=function(i){this.putUInt32(this._updatePos(4),i)},r.prototype.writeInt64=function(i){this.putInt64(this._updatePos(8),i)},r.prototype.writeFloat64=function(i){this.putFloat64(this._updatePos(8),i)},r.prototype.writeBytes=function(i){this.putBytes(this._updatePos(i.remaining()),i)},r.prototype.readSlice=function(i){return this.getSlice(this._updatePos(i),i)},r.prototype._updatePos=function(i){var o=this.position;return this.position+=i,o},r.prototype.remaining=function(){return this.length-this.position},r.prototype.hasRemaining=function(){return this.remaining()>0},r.prototype.reset=function(){this.position=0},r.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},r.prototype.toHex=function(){for(var i="",o=0;o<this.length;o++){var s=this.getUInt8(o).toString(16);s.length===1&&(s="0"+s),i+=s,o!==this.length-1&&(i+=" ")}return i},r}();ff.default=e;var t=function(r){n(i,r);function i(o,s,a){var l=r.call(this,s)||this;return l._start=o,l._inner=a,l}return i.prototype.putUInt8=function(o,s){this._inner.putUInt8(this._start+o,s)},i.prototype.getUInt8=function(o){return this._inner.getUInt8(this._start+o)},i.prototype.putInt8=function(o,s){this._inner.putInt8(this._start+o,s)},i.prototype.putFloat64=function(o,s){this._inner.putFloat64(this._start+o,s)},i.prototype.getInt8=function(o){return this._inner.getInt8(this._start+o)},i.prototype.getFloat64=function(o){return this._inner.getFloat64(this._start+o)},i}(e);return ff}var YC;function Sy(){if(YC)return la;YC=1;var n=oe&&oe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(la,"__esModule",{value:!0}),la.BaseBuffer=void 0;var e=n(RI());return la.BaseBuffer=e.default,la.default=e.default,la}var JC;function lc(){if(JC)return aa;JC=1;var n=oe&&oe.__extends||function(){var a=function(l,u){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,c){f.__proto__=c}||function(f,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(f[d]=c[d])},a(l,u)};return function(l,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");a(l,u);function f(){this.constructor=l}l.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}(),e=oe&&oe.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(aa,"__esModule",{value:!0}),aa.alloc=void 0;var t=e(wy()),r=e(Sy()),i=function(a){n(l,a);function l(u){var f=this,c=s(u);return f=a.call(this,c.length)||this,f._buffer=c,f}return l.prototype.getUInt8=function(u){return this._buffer.readUInt8(u)},l.prototype.getInt8=function(u){return this._buffer.readInt8(u)},l.prototype.getFloat64=function(u){return this._buffer.readDoubleBE(u)},l.prototype.putUInt8=function(u,f){this._buffer.writeUInt8(f,u)},l.prototype.putInt8=function(u,f){this._buffer.writeInt8(f,u)},l.prototype.putFloat64=function(u,f){this._buffer.writeDoubleBE(f,u)},l.prototype.putBytes=function(u,f){if(f instanceof l){var c=Math.min(f.length-f.position,this.length-u);f._buffer.copy(this._buffer,u,f.position,f.position+c),f.position+=c}else a.prototype.putBytes.call(this,u,f)},l.prototype.getSlice=function(u,f){return new l(this._buffer.slice(u,u+f))},l}(r.default);aa.default=i;function o(a){return new i(a)}aa.alloc=o;function s(a){return a instanceof t.default.Buffer?a:typeof a=="number"&&typeof t.default.Buffer.alloc=="function"?t.default.Buffer.alloc(a):new t.default.Buffer(a)}return aa}var QC;function Gne(){if(QC)return uf;QC=1;var n=oe&&oe.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(uf,"__esModule",{value:!0});var e=n(lc()),t=Mt(),r=t.internal.util,i=r.ENCRYPTION_OFF,o=r.ENCRYPTION_ON,s=1,a=3,l=function(){function b(_,w,S){w===void 0&&(w=y),S===void 0&&(S=function(U){return new WebSocket(U)}),this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=_;var E=g(_,w),P=E.scheme,R=E.error;if(R){this._error=R;return}this._ws=u(P,_.address,S),this._ws.binaryType="arraybuffer";var j=this;this._ws.onclose=function(U){U&&!U.wasClean&&j._handleConnectionError(),j._open=!1},this._ws.onopen=function(){j._clearConnectionTimeout();var U=j._pending;j._pending=null;for(var F=0;F<U.length;F++)j.write(U[F])},this._ws.onmessage=function(U){if(j.onmessage){var F=new e.default(U.data);j.onmessage(F)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}return b.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired){this._error=(0,t.newError)("Failed to establish connection in "+this._config.connectionTimeout+"ms",this._config.connectionErrorCode),this.onerror&&this.onerror(this._error);return}this._open&&(this._error=(0,t.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},b.prototype.write=function(_){if(this._pending!==null)this._pending.push(_);else if(_ instanceof e.default)try{this._ws.send(_._buffer)}catch(w){if(this._ws.readyState!==s)this._handleConnectionError();else throw w}else throw(0,t.newError)("Don't know how to send buffer: "+_)},b.prototype.close=function(){var _=this;return new Promise(function(w,S){_._ws&&_._ws.readyState!==a?(_._open=!1,_._clearConnectionTimeout(),_._ws.onclose=function(){return w()},_._ws.close()):w()})},b.prototype.setupReceiveTimeout=function(_){},b.prototype.stopReceiveTimeout=function(){},b.prototype.startReceiveTimeout=function(){},b.prototype._setupConnectionTimeout=function(){var _=this,w=this._config.connectionTimeout;if(w){var S=this._ws;return setTimeout(function(){S.readyState!==s&&(_._connectionTimeoutFired=!0,S.close())},w)}return null},b.prototype._clearConnectionTimeout=function(){var _=this._connectionTimeoutId;(_||_===0)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(_))},b}();uf.default=l;function u(b,_,w){var S=b+"://"+_.asHostPort();try{return w(S)}catch(P){if(f(P,_)){var E=d(b,_);return w(E)}else throw P}}function f(b,_){return b.name==="SyntaxError"&&c(_.asHostPort())}function c(b){return b.charAt(0)==="["&&b.indexOf("]")!==-1}function d(b,_){var w=_.host().replace(new RegExp(":","g"),"-"),S=w.replace("%","s"),E=S+".ipv6-literal.net";return b+"://"+E+":"+_.port()}function g(b,_){var w=h(b),S=v(b),E=b.trust,P=m(_);if(p(w,S,P),S)return{scheme:"ws",error:null};if(P)return{scheme:"wss",error:null};if(w){if(!E||E==="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES")return{scheme:"wss",error:null};var R=(0,t.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+E+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+i+'"` in the driver configuration.');return{scheme:null,error:R}}return{scheme:"ws",error:null}}function h(b){return b.encrypted===!0||b.encrypted===o}function v(b){return b.encrypted===!1||b.encrypted===i}function m(b){var _=typeof b=="function"?b():"";return _&&_.toLowerCase().indexOf("https")>=0}function p(b,_,w){w===null||(b&&!w?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):_&&w&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}function y(){return typeof window<"u"&&window.location?window.location.protocol:null}return uf}var hf={},ZC;function Yne(){if(ZC)return hf;ZC=1;var n=oe&&oe.__extends||function(){var i=function(o,s){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])},i(o,s)};return function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");i(o,s);function a(){this.constructor=o}o.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}();Object.defineProperty(hf,"__esModule",{value:!0});var e=Mt(),t=e.internal.resolver.BaseHostNameResolver,r=function(i){n(o,i);function o(){return i!==null&&i.apply(this,arguments)||this}return o.prototype.resolve=function(s){return this._resolveToItself(s)},o}(t);return hf.default=r,hf}var XC;function Jne(){if(XC)return ds;XC=1;var n=oe&&oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ds,"__esModule",{value:!0}),ds.HostNameResolver=ds.Channel=void 0;var e=n(Gne()),t=n(Yne());return ds.Channel=e.default,ds.HostNameResolver=t.default,ds}var ps={},df={},$C;function Qne(){if($C)return df;$C=1;var n=oe&&oe.__extends||function(){var i=function(o,s){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])},i(o,s)};return function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");i(o,s);function a(){this.constructor=o}o.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}();Object.defineProperty(df,"__esModule",{value:!0});var e=Sy(),t=lc(),r=function(i){n(o,i);function o(s){for(var a=this,l=0,u=0;u<s.length;u++)l+=s[u].length;return a=i.call(this,l)||this,a._buffers=s,a}return o.prototype.getUInt8=function(s){for(var a=0;a<this._buffers.length;a++){var l=this._buffers[a];if(s>=l.length)s-=l.length;else return l.getUInt8(s)}},o.prototype.getInt8=function(s){for(var a=0;a<this._buffers.length;a++){var l=this._buffers[a];if(s>=l.length)s-=l.length;else return l.getInt8(s)}},o.prototype.getFloat64=function(s){for(var a=(0,t.alloc)(8),l=0;l<8;l++)a.putUInt8(l,this.getUInt8(s+l));return a.getFloat64(0)},o}(e.BaseBuffer);return df.default=r,df}var eE;function Zne(){if(eE)return ps;eE=1;var n=oe&&oe.__extends||function(){var f=function(c,d){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,h){g.__proto__=h}||function(g,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(g[v]=h[v])},f(c,d)};return function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");f(c,d);function g(){this.constructor=c}c.prototype=d===null?Object.create(d):(g.prototype=d.prototype,new g)}}(),e=oe&&oe.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(ps,"__esModule",{value:!0}),ps.Dechunker=ps.Chunker=void 0;var t=e(RI()),r=lc(),i=e(Qne()),o=2,s=0,a=1400,l=function(f){n(c,f);function c(d,g){var h=f.call(this,0)||this;return h._bufferSize=g||a,h._ch=d,h._buffer=(0,r.alloc)(h._bufferSize),h._currentChunkStart=0,h._chunkOpen=!1,h}return c.prototype.putUInt8=function(d,g){this._ensure(1),this._buffer.writeUInt8(g)},c.prototype.putInt8=function(d,g){this._ensure(1),this._buffer.writeInt8(g)},c.prototype.putFloat64=function(d,g){this._ensure(8),this._buffer.writeFloat64(g)},c.prototype.putBytes=function(d,g){for(;g.remaining()>0;)this._ensure(1),this._buffer.remaining()>g.remaining()?this._buffer.writeBytes(g):this._buffer.writeBytes(g.readSlice(this._buffer.remaining()));return this},c.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var d=this._buffer;this._buffer=null,this._ch.write(d.getSlice(0,d.position)),this._buffer=(0,r.alloc)(this._bufferSize),this._chunkOpen=!1}return this},c.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<o&&this.flush(),this._buffer.writeInt16(s)},c.prototype._ensure=function(d){var g=this._chunkOpen?d:d+o;this._buffer.remaining()<g&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+o,this._chunkOpen=!0)},c.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var d=this._buffer.position-(this._currentChunkStart+o);this._buffer.putUInt16(this._currentChunkStart,d),this._chunkOpen=!1}},c}(t.default);ps.Chunker=l;var u=function(){function f(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return f.prototype.AWAITING_CHUNK=function(c){return c.remaining()>=2?this._onHeader(c.readUInt16()):(this._partialChunkHeader=c.readUInt8()<<8,this.IN_HEADER)},f.prototype.IN_HEADER=function(c){return this._onHeader((this._partialChunkHeader|c.readUInt8())&65535)},f.prototype.IN_CHUNK=function(c){return this._chunkSize<=c.remaining()?(this._currentMessage.push(c.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=c.remaining(),this._currentMessage.push(c.readSlice(c.remaining())),this.IN_CHUNK)},f.prototype.CLOSED=function(c){},f.prototype._onHeader=function(c){if(c===0){var d=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:d=this._currentMessage[0];break;default:d=new i.default(this._currentMessage);break}return this._currentMessage=[],this.onmessage(d),this.AWAITING_CHUNK}else return this._chunkSize=c,this.IN_CHUNK},f.prototype.write=function(c){for(;c.hasRemaining();)this._state=this._state(c)},f}();return ps.Dechunker=u,ps}var pf={},tE;function Xne(){if(tE)return pf;tE=1,Object.defineProperty(pf,"__esModule",{value:!0});var n=Mt(),e=n.internal.util,t=e.ENCRYPTION_OFF,r=e.ENCRYPTION_ON,i=n.error.SERVICE_UNAVAILABLE,o=3e4,s=[null,void 0,!0,!1,r,t],a=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"],l=function(){function h(v,m,p){this.address=v,this.encrypted=u(m),this.trust=f(m),this.trustedCertificates=c(m),this.knownHostsPath=d(m),this.connectionErrorCode=p||i,this.connectionTimeout=g(m)}return h}();pf.default=l;function u(h){var v=h.encrypted;if(s.indexOf(v)===-1)throw(0,n.newError)("Illegal value of the encrypted setting "+v+". Expected one of "+s);return v}function f(h){var v=h.trust;if(a.indexOf(v)===-1)throw(0,n.newError)("Illegal value of the trust setting "+v+". Expected one of "+a);return v}function c(h){return h.trustedCertificates||[]}function d(h){return h.knownHosts||null}function g(h){var v=parseInt(h.connectionTimeout,10);return v===0||v&&v<0?null:v||o}return pf}var mf={},Rm={},gf={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var nE;function $ne(){return nE||(nE=1,function(n,e){var t=wy(),r=t.Buffer;function i(s,a){for(var l in s)a[l]=s[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=t:(i(t,e),e.Buffer=o);function o(s,a,l){return r(s,a,l)}o.prototype=Object.create(r.prototype),i(r,o),o.from=function(s,a,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return r(s,a,l)},o.alloc=function(s,a,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var u=r(s);return a!==void 0?typeof l=="string"?u.fill(a,l):u.fill(a):u.fill(0),u},o.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r(s)},o.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(s)}}(gf,gf.exports)),gf.exports}var rE;function ere(){if(rE)return Rm;rE=1;var n=$ne().Buffer,e=n.isEncoding||function(p){switch(p=""+p,p&&p.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(p){if(!p)return"utf8";for(var y;;)switch(p){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return p;default:if(y)return;p=(""+p).toLowerCase(),y=!0}}function r(p){var y=t(p);if(typeof y!="string"&&(n.isEncoding===e||!e(p)))throw new Error("Unknown encoding: "+p);return y||p}Rm.StringDecoder=i;function i(p){this.encoding=r(p);var y;switch(this.encoding){case"utf16le":this.text=c,this.end=d,y=4;break;case"utf8":this.fillLast=l,y=4;break;case"base64":this.text=g,this.end=h,y=3;break;default:this.write=v,this.end=m;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(y)}i.prototype.write=function(p){if(p.length===0)return"";var y,b;if(this.lastNeed){if(y=this.fillLast(p),y===void 0)return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<p.length?y?y+this.text(p,b):this.text(p,b):y||""},i.prototype.end=f,i.prototype.text=u,i.prototype.fillLast=function(p){if(this.lastNeed<=p.length)return p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,this.lastTotal-this.lastNeed,0,p.length),this.lastNeed-=p.length};function o(p){return p<=127?0:p>>5===6?2:p>>4===14?3:p>>3===30?4:p>>6===2?-1:-2}function s(p,y,b){var _=y.length-1;if(_<b)return 0;var w=o(y[_]);return w>=0?(w>0&&(p.lastNeed=w-1),w):--_<b||w===-2?0:(w=o(y[_]),w>=0?(w>0&&(p.lastNeed=w-2),w):--_<b||w===-2?0:(w=o(y[_]),w>=0?(w>0&&(w===2?w=0:p.lastNeed=w-3),w):0))}function a(p,y,b){if((y[0]&192)!==128)return p.lastNeed=0,"\uFFFD";if(p.lastNeed>1&&y.length>1){if((y[1]&192)!==128)return p.lastNeed=1,"\uFFFD";if(p.lastNeed>2&&y.length>2&&(y[2]&192)!==128)return p.lastNeed=2,"\uFFFD"}}function l(p){var y=this.lastTotal-this.lastNeed,b=a(this,p);if(b!==void 0)return b;if(this.lastNeed<=p.length)return p.copy(this.lastChar,y,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);p.copy(this.lastChar,y,0,p.length),this.lastNeed-=p.length}function u(p,y){var b=s(this,p,y);if(!this.lastNeed)return p.toString("utf8",y);this.lastTotal=b;var _=p.length-(b-this.lastNeed);return p.copy(this.lastChar,0,_),p.toString("utf8",y,_)}function f(p){var y=p&&p.length?this.write(p):"";return this.lastNeed?y+"\uFFFD":y}function c(p,y){if((p.length-y)%2===0){var b=p.toString("utf16le",y);if(b){var _=b.charCodeAt(b.length-1);if(_>=55296&&_<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=p[p.length-1],p.toString("utf16le",y,p.length-1)}function d(p){var y=p&&p.length?this.write(p):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return y+this.lastChar.toString("utf16le",0,b)}return y}function g(p,y){var b=(p.length-y)%3;return b===0?p.toString("base64",y):(this.lastNeed=3-b,this.lastTotal=3,b===1?this.lastChar[0]=p[p.length-1]:(this.lastChar[0]=p[p.length-2],this.lastChar[1]=p[p.length-1]),p.toString("base64",y,p.length-b))}function h(p){var y=p&&p.length?this.write(p):"";return this.lastNeed?y+this.lastChar.toString("base64",0,3-this.lastNeed):y}function v(p){return p.toString(this.encoding)}function m(p){return p&&p.length?this.write(p):""}return Rm}var iE;function tre(){if(iE)return mf;iE=1;var n=oe&&oe.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(mf,"__esModule",{value:!0});var e=n(lc()),t=Mt(),r=n(wy()),i=ere(),o=new i.StringDecoder("utf8");function s(d){return new e.default(c(d))}function a(d,g){if(Object.prototype.hasOwnProperty.call(d,"_buffer"))return l(d,g);if(Object.prototype.hasOwnProperty.call(d,"_buffers"))return u(d,g);throw(0,t.newError)("Don't know how to decode strings from '"+d+"'")}function l(d,g){var h=d.position,v=h+g;return d.position=Math.min(v,d.length),d._buffer.toString("utf8",h,v)}function u(d,g){return f(d,g,function(h){return o.write(h._buffer)},function(){return o.end()})}function f(d,g,h,v){var m=g,p=d.position;d._updatePos(Math.min(g,d.length-p));var y=d._buffers.reduce(function(b,_){if(m<=0)return b;if(p>=_.length)return p-=_.length,"";_._updatePos(p-_.position);var w=Math.min(_.length-p,m),S=_.readSlice(w);return _._updatePos(w),m=Math.max(m-S.length,0),p=0,b+h(S)},"");return y+v()}function c(d){return typeof r.default.Buffer.from=="function"?r.default.Buffer.from(d,"utf8"):new r.default.Buffer(d,"utf8")}return mf.default={encode:s,decode:a},mf}var oE;function uc(){return oE||(oE=1,function(n){var e=oe&&oe.__createBinding||(Object.create?function(a,l,u,f){f===void 0&&(f=u),Object.defineProperty(a,f,{enumerable:!0,get:function(){return l[u]}})}:function(a,l,u,f){f===void 0&&(f=u),a[f]=l[u]}),t=oe&&oe.__exportStar||function(a,l){for(var u in a)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&e(l,a,u)},r=oe&&oe.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(n,"__esModule",{value:!0}),n.utf8=n.alloc=n.ChannelConfig=void 0,t(Jne(),n),t(Zne(),n);var i=Xne();Object.defineProperty(n,"ChannelConfig",{enumerable:!0,get:function(){return r(i).default}});var o=lc();Object.defineProperty(n,"alloc",{enumerable:!0,get:function(){return o.alloc}});var s=tre();Object.defineProperty(n,"utf8",{enumerable:!0,get:function(){return r(s).default}})}(Im)),Im}var sE;function nre(){if(sE)return lf;sE=1,Object.defineProperty(lf,"__esModule",{value:!0});var n=uc(),e=Mt(),t=1616949271;function r(l,u){return{major:l,minor:u}}function i(l){if(l.length>4)throw(0,e.newError)("It should not have more than 4 versions of the protocol");var u=(0,n.alloc)(5*4);return u.writeInt32(t),l.forEach(function(f){if(f instanceof Array){var c=f[0],d=c.major,g=c.minor,h=f[1].minor,v=g-h;u.writeInt32(v<<16|g<<8|d)}else{var d=f.major,g=f.minor;u.writeInt32(g<<8|d)}}),u.reset(),u}function o(l){var u=[l.readUInt8(),l.readUInt8(),l.readUInt8(),l.readUInt8()];if(u[0]===72&&u[1]===84&&u[2]===84&&u[3]===80)throw(0,e.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return Number(u[3]+"."+u[2])}function s(){return i([[r(4,4),r(4,2)],r(4,1),r(4,0),r(3,0)])}function a(l){var u=this;return new Promise(function(f,c){var d=function(g){c(g)};l.onerror=d.bind(u),l._error&&d(l._error),l.onmessage=function(g){try{var h=o(g);f({protocolVersion:h,consumeRemainingBuffer:function(v){g.hasRemaining()&&v(g.readSlice(g.remaining()))}})}catch(v){c(v)}},l.write(s())})}return lf.default=a,lf}var vf={},yf={},no={},aE;function Cy(){if(aE)return no;aE=1,Object.defineProperty(no,"__esModule",{value:!0}),no.assertImpersonatedUserIsEmpty=no.assertTxConfigIsEmpty=no.assertDatabaseIsEmpty=void 0;var n=Mt();function e(i,o,s){if(o===void 0&&(o=function(){}),i&&!i.isEmpty()){var a=(0,n.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw o(a.message),s.onError(a),a}}no.assertTxConfigIsEmpty=e;function t(i,o,s){if(o===void 0&&(o=function(){}),i){var a=(0,n.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw o(a.message),s.onError(a),a}}no.assertDatabaseIsEmpty=t;function r(i,o,s){if(o===void 0&&(o=function(){}),i){var a=(0,n.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+("Trying to impersonate "+i+"."));throw o(a.message),s.onError(a),a}}return no.assertImpersonatedUserIsEmpty=r,no}var ko={},ro={},lE;function xI(){if(lE)return ro;lE=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.Structure=ro.Unpacker=ro.Packer=void 0;var n=uc(),e=Mt(),t=e.internal.util,r=e.error.PROTOCOL_ERROR,i=128,o=144,s=160,a=176,l=192,u=193,f=194,c=195,d=200,g=201,h=202,v=203,m=208,p=209,y=210,b=212,_=213,w=214,S=204,E=205,P=206,R=216,j=217,U=218,F=220,z=221,D=78,N=3,L=82,X=5,Q=114,A=3,k=80,V=3,K=function(){function G(q,W){this.signature=q,this.fields=W}return G.prototype.toString=function(){for(var q="",W=0;W<this.fields.length;W++)W>0&&(q+=", "),q+=this.fields[W];return"Structure("+this.signature+", ["+q+"])"},G}();ro.Structure=K;var H=function(){function G(q){this._ch=q,this._byteArraysSupported=!0}return G.prototype.packable=function(q){var W=this;if(q===null)return function(){return W._ch.writeUInt8(l)};if(q===!0)return function(){return W._ch.writeUInt8(c)};if(q===!1)return function(){return W._ch.writeUInt8(f)};if(typeof q=="number")return function(){return W.packFloat(q)};if(typeof q=="string")return function(){return W.packString(q)};if(typeof q=="bigint")return function(){return W.packInteger((0,e.int)(q))};if((0,e.isInt)(q))return function(){return W.packInteger(q)};if(q instanceof Int8Array)return function(){return W.packBytes(q)};if(q instanceof Array)return function(){W.packListHeader(q.length);for(var Pe=0;Pe<q.length;Pe++)W.packable(q[Pe]===void 0?null:q[Pe])()};if(M(q))return this.packableIterable(q);if(q instanceof e.Node)return this._nonPackableValue("It is not allowed to pass nodes in query parameters, given: "+q);if(q instanceof e.Relationship)return this._nonPackableValue("It is not allowed to pass relationships in query parameters, given: "+q);if(q instanceof e.Path)return this._nonPackableValue("It is not allowed to pass paths in query parameters, given: "+q);if(q instanceof K){for(var ae=[],le=0;le<q.fields.length;le++)ae[le]=this.packable(q.fields[le]);return function(){return W.packStruct(q.signature,ae)}}else return typeof q=="object"?function(){for(var Pe=Object.keys(q),Ve=0,Ae=0;Ae<Pe.length;Ae++)q[Pe[Ae]]!==void 0&&Ve++;W.packMapHeader(Ve);for(var ye=0;ye<Pe.length;ye++){var Ne=Pe[ye];q[Ne]!==void 0&&(W.packString(Ne),W.packable(q[Ne])())}}:this._nonPackableValue("Unable to pack the given value: "+q)},G.prototype.packableIterable=function(q){try{var W=Array.from(q);return this.packable(W)}catch(ae){throw(0,e.newError)("Cannot pack given iterable, "+ae.message+": "+q)}},G.prototype.packStruct=function(q,W){W=W||[],this.packStructHeader(W.length,q);for(var ae=0;ae<W.length;ae++)W[ae]()},G.prototype.packInteger=function(q){var W=q.high,ae=q.low;q.greaterThanOrEqual(-16)&&q.lessThan(128)?this._ch.writeInt8(ae):q.greaterThanOrEqual(-128)&&q.lessThan(-16)?(this._ch.writeUInt8(d),this._ch.writeInt8(ae)):q.greaterThanOrEqual(-32768)&&q.lessThan(32768)?(this._ch.writeUInt8(g),this._ch.writeInt16(ae)):q.greaterThanOrEqual(-2147483648)&&q.lessThan(2147483648)?(this._ch.writeUInt8(h),this._ch.writeInt32(ae)):(this._ch.writeUInt8(v),this._ch.writeInt32(W),this._ch.writeInt32(ae))},G.prototype.packFloat=function(q){this._ch.writeUInt8(u),this._ch.writeFloat64(q)},G.prototype.packString=function(q){var W=n.utf8.encode(q),ae=W.length;if(ae<16)this._ch.writeUInt8(i|ae),this._ch.writeBytes(W);else if(ae<256)this._ch.writeUInt8(m),this._ch.writeUInt8(ae),this._ch.writeBytes(W);else if(ae<65536)this._ch.writeUInt8(p),this._ch.writeUInt8(ae/256>>0),this._ch.writeUInt8(ae%256),this._ch.writeBytes(W);else if(ae<4294967296)this._ch.writeUInt8(y),this._ch.writeUInt8((ae/16777216>>0)%256),this._ch.writeUInt8((ae/65536>>0)%256),this._ch.writeUInt8((ae/256>>0)%256),this._ch.writeUInt8(ae%256),this._ch.writeBytes(W);else throw(0,e.newError)("UTF-8 strings of size "+ae+" are not supported")},G.prototype.packListHeader=function(q){if(q<16)this._ch.writeUInt8(o|q);else if(q<256)this._ch.writeUInt8(b),this._ch.writeUInt8(q);else if(q<65536)this._ch.writeUInt8(_),this._ch.writeUInt8((q/256>>0)%256),this._ch.writeUInt8(q%256);else if(q<4294967296)this._ch.writeUInt8(w),this._ch.writeUInt8((q/16777216>>0)%256),this._ch.writeUInt8((q/65536>>0)%256),this._ch.writeUInt8((q/256>>0)%256),this._ch.writeUInt8(q%256);else throw(0,e.newError)("Lists of size "+q+" are not supported")},G.prototype.packBytes=function(q){if(this._byteArraysSupported){this.packBytesHeader(q.length);for(var W=0;W<q.length;W++)this._ch.writeInt8(q[W])}else throw(0,e.newError)("Byte arrays are not supported by the database this driver is connected to")},G.prototype.packBytesHeader=function(q){if(q<256)this._ch.writeUInt8(S),this._ch.writeUInt8(q);else if(q<65536)this._ch.writeUInt8(E),this._ch.writeUInt8((q/256>>0)%256),this._ch.writeUInt8(q%256);else if(q<4294967296)this._ch.writeUInt8(P),this._ch.writeUInt8((q/16777216>>0)%256),this._ch.writeUInt8((q/65536>>0)%256),this._ch.writeUInt8((q/256>>0)%256),this._ch.writeUInt8(q%256);else throw(0,e.newError)("Byte arrays of size "+q+" are not supported")},G.prototype.packMapHeader=function(q){if(q<16)this._ch.writeUInt8(s|q);else if(q<256)this._ch.writeUInt8(R),this._ch.writeUInt8(q);else if(q<65536)this._ch.writeUInt8(j),this._ch.writeUInt8(q/256>>0),this._ch.writeUInt8(q%256);else if(q<4294967296)this._ch.writeUInt8(U),this._ch.writeUInt8((q/16777216>>0)%256),this._ch.writeUInt8((q/65536>>0)%256),this._ch.writeUInt8((q/256>>0)%256),this._ch.writeUInt8(q%256);else throw(0,e.newError)("Maps of size "+q+" are not supported")},G.prototype.packStructHeader=function(q,W){if(q<16)this._ch.writeUInt8(a|q),this._ch.writeUInt8(W);else if(q<256)this._ch.writeUInt8(F),this._ch.writeUInt8(q),this._ch.writeUInt8(W);else if(q<65536)this._ch.writeUInt8(z),this._ch.writeUInt8(q/256>>0),this._ch.writeUInt8(q%256);else throw(0,e.newError)("Structures of size "+q+" are not supported")},G.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},G.prototype._nonPackableValue=function(q){return function(){throw(0,e.newError)(q,r)}},G}();ro.Packer=H;var I=function(){function G(q,W){q===void 0&&(q=!1),W===void 0&&(W=!1),this._disableLosslessIntegers=q,this._useBigInt=W}return G.prototype.unpack=function(q){var W=q.readUInt8(),ae=W&240,le=W&15;if(W===l)return null;var Pe=this._unpackBoolean(W);if(Pe!==null)return Pe;var Ve=this._unpackNumberOrInteger(W,q);if(Ve!==null){if((0,e.isInt)(Ve)){if(this._useBigInt)return Ve.toBigInt();if(this._disableLosslessIntegers)return Ve.toNumberOrInfinity()}return Ve}var Ae=this._unpackString(W,ae,le,q);if(Ae!==null)return Ae;var ye=this._unpackList(W,ae,le,q);if(ye!==null)return ye;var Ne=this._unpackByteArray(W,q);if(Ne!==null)return Ne;var xe=this._unpackMap(W,ae,le,q);if(xe!==null)return xe;var he=this._unpackStruct(W,ae,le,q);if(he!==null)return he;throw(0,e.newError)("Unknown packed value with marker "+W.toString(16))},G.prototype.unpackInteger=function(q){var W=q.readUInt8(),ae=this._unpackInteger(W,q);if(ae==null)throw(0,e.newError)("Unable to unpack integer value with marker "+W.toString(16));return ae},G.prototype._unpackBoolean=function(q){return q===c?!0:q===f?!1:null},G.prototype._unpackNumberOrInteger=function(q,W){return q===u?W.readFloat64():this._unpackInteger(q,W)},G.prototype._unpackInteger=function(q,W){if(q>=0&&q<128)return(0,e.int)(q);if(q>=240&&q<256)return(0,e.int)(q-256);if(q===d)return(0,e.int)(W.readInt8());if(q===g)return(0,e.int)(W.readInt16());if(q===h){var ae=W.readInt32();return(0,e.int)(ae)}else if(q===v){var le=W.readInt32(),Pe=W.readInt32();return new e.Integer(Pe,le)}else return null},G.prototype._unpackString=function(q,W,ae,le){return W===i?n.utf8.decode(le,ae):q===m?n.utf8.decode(le,le.readUInt8()):q===p?n.utf8.decode(le,le.readUInt16()):q===y?n.utf8.decode(le,le.readUInt32()):null},G.prototype._unpackList=function(q,W,ae,le){return W===o?this._unpackListWithSize(ae,le):q===b?this._unpackListWithSize(le.readUInt8(),le):q===_?this._unpackListWithSize(le.readUInt16(),le):q===w?this._unpackListWithSize(le.readUInt32(),le):null},G.prototype._unpackListWithSize=function(q,W){for(var ae=[],le=0;le<q;le++)ae.push(this.unpack(W));return ae},G.prototype._unpackByteArray=function(q,W){return q===S?this._unpackByteArrayWithSize(W.readUInt8(),W):q===E?this._unpackByteArrayWithSize(W.readUInt16(),W):q===P?this._unpackByteArrayWithSize(W.readUInt32(),W):null},G.prototype._unpackByteArrayWithSize=function(q,W){for(var ae=new Int8Array(q),le=0;le<q;le++)ae[le]=W.readInt8();return ae},G.prototype._unpackMap=function(q,W,ae,le){return W===s?this._unpackMapWithSize(ae,le):q===R?this._unpackMapWithSize(le.readUInt8(),le):q===j?this._unpackMapWithSize(le.readUInt16(),le):q===U?this._unpackMapWithSize(le.readUInt32(),le):null},G.prototype._unpackMapWithSize=function(q,W){for(var ae={},le=0;le<q;le++){var Pe=this.unpack(W);ae[Pe]=this.unpack(W)}return ae},G.prototype._unpackStruct=function(q,W,ae,le){try{return W===a?this._unpackStructWithSize(ae,le):q===F?this._unpackStructWithSize(le.readUInt8(),le):q===z?this._unpackStructWithSize(le.readUInt16(),le):null}catch(Pe){return t.createBrokenObject(Pe)}},G.prototype._unpackStructWithSize=function(q,W){var ae=W.readUInt8();return ae===D?this._unpackNode(q,W):ae===L?this._unpackRelationship(q,W):ae===Q?this._unpackUnboundRelationship(q,W):ae===k?this._unpackPath(q,W):this._unpackUnknownStruct(ae,q,W)},G.prototype._unpackNode=function(q,W){return this._verifyStructSize("Node",N,q),new e.Node(this.unpack(W),this.unpack(W),this.unpack(W))},G.prototype._unpackRelationship=function(q,W){return this._verifyStructSize("Relationship",X,q),new e.Relationship(this.unpack(W),this.unpack(W),this.unpack(W),this.unpack(W),this.unpack(W))},G.prototype._unpackUnboundRelationship=function(q,W){return this._verifyStructSize("UnboundRelationship",A,q),new e.UnboundRelationship(this.unpack(W),this.unpack(W),this.unpack(W))},G.prototype._unpackPath=function(q,W){this._verifyStructSize("Path",V,q);for(var ae=this.unpack(W),le=this.unpack(W),Pe=this.unpack(W),Ve=[],Ae=ae[0],ye=0;ye<Pe.length;ye+=2){var Ne=ae[Pe[ye+1]],xe=(0,e.toNumber)(Pe[ye]),he=void 0;xe>0?(he=le[xe-1],he instanceof e.UnboundRelationship&&(le[xe-1]=he=he.bind(Ae.identity,Ne.identity))):(he=le[-xe-1],he instanceof e.UnboundRelationship&&(le[-xe-1]=he=he.bind(Ne.identity,Ae.identity))),Ve.push(new e.PathSegment(Ae,he,Ne)),Ae=Ne}return new e.Path(ae[0],ae[ae.length-1],Ve)},G.prototype._unpackUnknownStruct=function(q,W,ae){for(var le=new K(q,[]),Pe=0;Pe<W;Pe++)le.fields.push(this.unpack(ae));return le},G.prototype._verifyStructSize=function(q,W,ae){if(W!==ae)throw(0,e.newError)("Wrong struct size for "+q+", expected "+W+" but was "+ae,r)},G}();ro.Unpacker=I;function M(G){return G==null?!1:typeof G[Symbol.iterator]=="function"}return ro}var ms={},xm={},io={},uE;function NI(){if(uE)return io;uE=1,Object.defineProperty(io,"__esModule",{value:!0}),io.epochSecondAndNanoToLocalDateTime=io.nanoOfDayToLocalTime=io.epochDayToDate=void 0;var n=Mt(),e=n.internal.temporalUtil,t=e.DAYS_0000_TO_1970,r=e.DAYS_PER_400_YEAR_CYCLE,i=e.NANOS_PER_HOUR,o=e.NANOS_PER_MINUTE,s=e.NANOS_PER_SECOND,a=e.SECONDS_PER_DAY,l=e.floorDiv,u=e.floorMod;function f(g){g=(0,n.int)(g);var h=g.add(t).subtract(60),v=(0,n.int)(0);if(h.lessThan(0)){var m=h.add(1).div(r).subtract(1);v=m.multiply(400),h=h.add(m.multiply(-r))}var p=h.multiply(400).add(591).div(r),y=h.subtract(p.multiply(365).add(p.div(4)).subtract(p.div(100)).add(p.div(400)));y.lessThan(0)&&(p=p.subtract(1),y=h.subtract(p.multiply(365).add(p.div(4)).subtract(p.div(100)).add(p.div(400)))),p=p.add(v);var b=y,_=b.multiply(5).add(2).div(153),w=_.add(2).modulo(12).add(1),S=b.subtract(_.multiply(306).add(5).div(10)).add(1);return p=p.add(_.div(10)),new n.Date(p,w,S)}io.epochDayToDate=f;function c(g){g=(0,n.int)(g);var h=g.div(i);g=g.subtract(h.multiply(i));var v=g.div(o);g=g.subtract(v.multiply(o));var m=g.div(s),p=g.subtract(m.multiply(s));return new n.LocalTime(h,v,m,p)}io.nanoOfDayToLocalTime=c;function d(g,h){var v=l(g,a),m=u(g,a),p=m.multiply(s).add(h),y=f(v),b=c(p);return new n.LocalDateTime(y.year,y.month,y.day,b.hour,b.minute,b.second,b.nanosecond)}return io.epochSecondAndNanoToLocalDateTime=d,io}var cE;function rre(){return cE||(cE=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.packDateTime=n.unpackDateTimeWithZoneId=n.unpackDateTimeWithZoneOffset=n.DATE_TIME_WITH_ZONE_ID=n.DATE_TIME_WITH_ZONE_OFFSET=void 0;var e=Mt(),t=NI(),r=e.internal.temporalUtil.localDateTimeToEpochSecond;n.DATE_TIME_WITH_ZONE_OFFSET=73;var i=3;n.DATE_TIME_WITH_ZONE_ID=105;var o=3;function s(h,v,m,p,y){h._verifyStructSize("DateTimeWithZoneOffset",i,v);var b=h.unpackInteger(m),_=h.unpackInteger(m),w=h.unpackInteger(m),S=(0,e.int)(b).add(w),E=(0,t.epochSecondAndNanoToLocalDateTime)(S,_),P=new e.DateTime(E.year,E.month,E.day,E.hour,E.minute,E.second,E.nanosecond,w,null);return g(P,p,y)}n.unpackDateTimeWithZoneOffset=s;function a(h,v,m,p,y){h._verifyStructSize("DateTimeWithZoneId",o,v);var b=h.unpackInteger(m),_=h.unpackInteger(m),w=h.unpack(m),S=d(w,b,_),E=new e.DateTime(S.year,S.month,S.day,S.hour,S.minute,S.second,(0,e.int)(_),S.timeZoneOffsetSeconds,w);return g(E,p,y)}n.unpackDateTimeWithZoneId=a;function l(h,v){h.timeZoneId?u(h,v):f(h,v)}n.packDateTime=l;function u(h,v){var m=r(h.year,h.month,h.day,h.hour,h.minute,h.second,h.nanosecond),p=h.timeZoneOffsetSeconds!=null?h.timeZoneOffsetSeconds:c(h.timeZoneId,m,h.nanosecond),y=m.subtract(p),b=(0,e.int)(h.nanosecond),_=h.timeZoneId,w=[v.packable(y),v.packable(b),v.packable(_)];v.packStruct(n.DATE_TIME_WITH_ZONE_ID,w)}function f(h,v){var m=r(h.year,h.month,h.day,h.hour,h.minute,h.second,h.nanosecond),p=(0,e.int)(h.nanosecond),y=(0,e.int)(h.timeZoneOffsetSeconds),b=m.subtract(y),_=[v.packable(b),v.packable(p),v.packable(y)];v.packStruct(n.DATE_TIME_WITH_ZONE_OFFSET,_)}function c(h,v,m){var p=d(h,v,m),y=r(p.year,p.month,p.day,p.hour,p.minute,p.second,m),b=y.subtract(v),_=v.subtract(b),w=d(h,_,m),S=r(w.year,w.month,w.day,w.hour,w.minute,w.second,m),E=S.subtract(_);return E}function d(h,v,m){var p=new Intl.DateTimeFormat("en-US",{timeZone:h,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}),y=(0,t.epochSecondAndNanoToLocalDateTime)(v,m),b=Date.UTC((0,e.int)(y.year).toNumber(),(0,e.int)(y.month).toNumber()-1,(0,e.int)(y.day).toNumber(),(0,e.int)(y.hour).toNumber(),(0,e.int)(y.minute).toNumber(),(0,e.int)(y.second).toNumber()),_=p.formatToParts(b),w=_.reduce(function(E,P){return P.type!=="literal"&&(E[P.type]=(0,e.int)(P.value)),E},{}),S=r(w.year,w.month,w.day,w.hour,w.minute,w.second,w.nanosecond);return w.timeZoneOffsetSeconds=S.subtract(v),w.hour=w.hour.modulo(24),w}function g(h,v,m){if(!v&&!m)return h;var p=function(w){return m?w.toBigInt():w.toNumberOrInfinity()},y=Object.create(Object.getPrototypeOf(h));for(var b in h)if(Object.prototype.hasOwnProperty.call(h,b)===!0){var _=h[b];y[b]=(0,e.isInt)(_)?p(_):_}return Object.freeze(y),y}}(xm)),xm}var fE;function ire(){if(fE)return ms;fE=1;var n=oe&&oe.__extends||function(){var he=function(ve,de){return he=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ie,De){Ie.__proto__=De}||function(Ie,De){for(var He in De)Object.prototype.hasOwnProperty.call(De,He)&&(Ie[He]=De[He])},he(ve,de)};return function(ve,de){if(typeof de!="function"&&de!==null)throw new TypeError("Class extends value "+String(de)+" is not a constructor or null");he(ve,de);function Ie(){this.constructor=ve}ve.prototype=de===null?Object.create(de):(Ie.prototype=de.prototype,new Ie)}}(),e=oe&&oe.__createBinding||(Object.create?function(he,ve,de,Ie){Ie===void 0&&(Ie=de),Object.defineProperty(he,Ie,{enumerable:!0,get:function(){return ve[de]}})}:function(he,ve,de,Ie){Ie===void 0&&(Ie=de),he[Ie]=ve[de]}),t=oe&&oe.__setModuleDefault||(Object.create?function(he,ve){Object.defineProperty(he,"default",{enumerable:!0,value:ve})}:function(he,ve){he.default=ve}),r=oe&&oe.__importStar||function(he){if(he&&he.__esModule)return he;var ve={};if(he!=null)for(var de in he)de!=="default"&&Object.prototype.hasOwnProperty.call(he,de)&&e(ve,he,de);return t(ve,he),ve};Object.defineProperty(ms,"__esModule",{value:!0}),ms.Unpacker=ms.Packer=void 0;var i=r(xI()),o=r(rre()),s=Mt(),a=NI(),l=s.internal.temporalUtil,u=l.dateToEpochDay,f=l.localDateTimeToEpochSecond,c=l.localTimeToNanoOfDay,d=88,g=3,h=89,v=4,m=69,p=4,y=116,b=1,_=84,w=2,S=68,E=1,P=100,R=2,j=70,U=3,F=102,z=3,D=function(he){n(ve,he);function ve(){return he!==null&&he.apply(this,arguments)||this}return ve.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},ve.prototype.packable=function(de){var Ie=this;return(0,s.isPoint)(de)?function(){return L(de,Ie)}:(0,s.isDuration)(de)?function(){return V(de,Ie)}:(0,s.isLocalTime)(de)?function(){return H(de,Ie)}:(0,s.isTime)(de)?function(){return M(de,Ie)}:(0,s.isDate)(de)?function(){return q(de,Ie)}:(0,s.isLocalDateTime)(de)?function(){return ae(de,Ie)}:(0,s.isDateTime)(de)&&this.useUtc?function(){return o.packDateTime(de,Ie)}:(0,s.isDateTime)(de)&&!this.useUtc?function(){return Pe(de,Ie)}:he.prototype.packable.call(this,de)},ve}(i.Packer);ms.Packer=D;var N=function(he){n(ve,he);function ve(de,Ie){return de===void 0&&(de=!1),Ie===void 0&&(Ie=!1),he.call(this,de,Ie)||this}return ve.prototype._unpackUnknownStruct=function(de,Ie,De){return de===d?A(this,Ie,De):de===h?k(this,Ie,De):de===m?K(this,Ie,De):de===y?I(this,Ie,De,this._disableLosslessIntegers,this._useBigInt):de===_?G(this,Ie,De,this._disableLosslessIntegers,this._useBigInt):de===S?W(this,Ie,De,this._disableLosslessIntegers,this._useBigInt):de===P?le(this,Ie,De,this._disableLosslessIntegers,this._useBigInt):de===o.DATE_TIME_WITH_ZONE_OFFSET&&this.useUtc?o.unpackDateTimeWithZoneOffset(this,Ie,De,this._disableLosslessIntegers,this._useBigInt):de===j&&!this.useUtc?Ae(this,Ie,De,this._disableLosslessIntegers,this._useBigInt):de===o.DATE_TIME_WITH_ZONE_ID&&this.useUtc?o.unpackDateTimeWithZoneId(this,Ie,De,this._disableLosslessIntegers,this._useBigInt):de===F&&!this.useUtc?Ne(this,Ie,De,this._disableLosslessIntegers,this._useBigInt):he.prototype._unpackUnknownStruct.call(this,de,Ie,De,this._disableLosslessIntegers,this._useBigInt)},ve}(i.Unpacker);ms.Unpacker=N;function L(he,ve){var de=he.z===null||he.z===void 0;de?X(he,ve):Q(he,ve)}function X(he,ve){var de=[ve.packable((0,s.int)(he.srid)),ve.packable(he.x),ve.packable(he.y)];ve.packStruct(d,de)}function Q(he,ve){var de=[ve.packable((0,s.int)(he.srid)),ve.packable(he.x),ve.packable(he.y),ve.packable(he.z)];ve.packStruct(h,de)}function A(he,ve,de){return he._verifyStructSize("Point2D",g,ve),new s.Point(he.unpack(de),he.unpack(de),he.unpack(de),void 0)}function k(he,ve,de){return he._verifyStructSize("Point3D",v,ve),new s.Point(he.unpack(de),he.unpack(de),he.unpack(de),he.unpack(de))}function V(he,ve){var de=(0,s.int)(he.months),Ie=(0,s.int)(he.days),De=(0,s.int)(he.seconds),He=(0,s.int)(he.nanoseconds),Xe=[ve.packable(de),ve.packable(Ie),ve.packable(De),ve.packable(He)];ve.packStruct(m,Xe)}function K(he,ve,de){he._verifyStructSize("Duration",p,ve);var Ie=he.unpack(de),De=he.unpack(de),He=he.unpack(de),Xe=he.unpack(de);return new s.Duration(Ie,De,He,Xe)}function H(he,ve){var de=c(he.hour,he.minute,he.second,he.nanosecond),Ie=[ve.packable(de)];ve.packStruct(y,Ie)}function I(he,ve,de,Ie){he._verifyStructSize("LocalTime",b,ve);var De=he.unpackInteger(de),He=(0,a.nanoOfDayToLocalTime)(De);return xe(He,Ie)}function M(he,ve){var de=c(he.hour,he.minute,he.second,he.nanosecond),Ie=(0,s.int)(he.timeZoneOffsetSeconds),De=[ve.packable(de),ve.packable(Ie)];ve.packStruct(_,De)}function G(he,ve,de,Ie,De){he._verifyStructSize("Time",w,ve);var He=he.unpackInteger(de),Xe=he.unpackInteger(de),mt=(0,a.nanoOfDayToLocalTime)(He),be=new s.Time(mt.hour,mt.minute,mt.second,mt.nanosecond,Xe);return xe(be,Ie,De)}function q(he,ve){var de=u(he.year,he.month,he.day),Ie=[ve.packable(de)];ve.packStruct(S,Ie)}function W(he,ve,de,Ie,De){he._verifyStructSize("Date",E,ve);var He=he.unpackInteger(de),Xe=(0,a.epochDayToDate)(He);return xe(Xe,Ie,De)}function ae(he,ve){var de=f(he.year,he.month,he.day,he.hour,he.minute,he.second,he.nanosecond),Ie=(0,s.int)(he.nanosecond),De=[ve.packable(de),ve.packable(Ie)];ve.packStruct(P,De)}function le(he,ve,de,Ie,De){he._verifyStructSize("LocalDateTime",R,ve);var He=he.unpackInteger(de),Xe=he.unpackInteger(de),mt=(0,a.epochSecondAndNanoToLocalDateTime)(He,Xe);return xe(mt,Ie,De)}function Pe(he,ve){he.timeZoneId?ye(he,ve):Ve(he,ve)}function Ve(he,ve){var de=f(he.year,he.month,he.day,he.hour,he.minute,he.second,he.nanosecond),Ie=(0,s.int)(he.nanosecond),De=(0,s.int)(he.timeZoneOffsetSeconds),He=[ve.packable(de),ve.packable(Ie),ve.packable(De)];ve.packStruct(j,He)}function Ae(he,ve,de,Ie,De){he._verifyStructSize("DateTimeWithZoneOffset",U,ve);var He=he.unpackInteger(de),Xe=he.unpackInteger(de),mt=he.unpackInteger(de),be=(0,a.epochSecondAndNanoToLocalDateTime)(He,Xe),Z=new s.DateTime(be.year,be.month,be.day,be.hour,be.minute,be.second,be.nanosecond,mt,null);return xe(Z,Ie,De)}function ye(he,ve){var de=f(he.year,he.month,he.day,he.hour,he.minute,he.second,he.nanosecond),Ie=(0,s.int)(he.nanosecond),De=he.timeZoneId,He=[ve.packable(de),ve.packable(Ie),ve.packable(De)];ve.packStruct(F,He)}function Ne(he,ve,de,Ie,De){he._verifyStructSize("DateTimeWithZoneId",z,ve);var He=he.unpackInteger(de),Xe=he.unpackInteger(de),mt=he.unpack(de),be=(0,a.epochSecondAndNanoToLocalDateTime)(He,Xe),Z=new s.DateTime(be.year,be.month,be.day,be.hour,be.minute,be.second,be.nanosecond,null,mt);return xe(Z,Ie,De)}function xe(he,ve,de){if(!ve&&!de)return he;var Ie=function(mt){return de?mt.toBigInt():mt.toNumberOrInfinity()},De=Object.create(Object.getPrototypeOf(he));for(var He in he)if(he.hasOwnProperty(He)){var Xe=he[He];De[He]=(0,s.isInt)(Xe)?Ie(Xe):Xe}return Object.freeze(De),De}return ms}var hE;function Ey(){if(hE)return ko;hE=1;var n=oe&&oe.__createBinding||(Object.create?function(o,s,a,l){l===void 0&&(l=a),Object.defineProperty(o,l,{enumerable:!0,get:function(){return s[a]}})}:function(o,s,a,l){l===void 0&&(l=a),o[l]=s[a]}),e=oe&&oe.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),t=oe&&oe.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var a in o)a!=="default"&&Object.prototype.hasOwnProperty.call(o,a)&&n(s,o,a);return e(s,o),s};Object.defineProperty(ko,"__esModule",{value:!0}),ko.v2=ko.v1=void 0;var r=t(xI());ko.v1=r;var i=t(ire());return ko.v2=i,ko.default=i,ko}var _f={},dE;function cl(){if(dE)return _f;dE=1,Object.defineProperty(_f,"__esModule",{value:!0});var n=Mt(),e=n.internal.constants,t=e.ACCESS_MODE_READ,r=e.FETCH_ALL,i=n.internal.util.assertString,o=1,s=15,a=16,l=63,u=1,f=2,c=17,d=18,g=19,h=102,v=47,m=63,p="r",y=-1,b=function(){function U(F,z,D){this.signature=F,this.fields=z,this.toString=D}return U.init=function(F,z){return new U(o,[F,z],function(){return"INIT "+F+" {...}"})},U.run=function(F,z){return new U(a,[F,z],function(){return"RUN "+F+" "+n.json.stringify(z)})},U.pullAll=function(){return S},U.reset=function(){return E},U.hello=function(F,z,D,N){D===void 0&&(D=null),N===void 0&&(N=null);var L=Object.assign({user_agent:F},z);return D&&(L.routing=D),N&&(L.patch_bolt=N),new U(u,[L],function(){return"HELLO {user_agent: '"+F+"', ...}"})},U.begin=function(F){var z=F===void 0?{}:F,D=z.bookmark,N=z.txConfig,L=z.database,X=z.mode,Q=z.impersonatedUser,A=_(D,N,L,X,Q);return new U(c,[A],function(){return"BEGIN "+n.json.stringify(A)})},U.commit=function(){return P},U.rollback=function(){return R},U.runWithMetadata=function(F,z,D){var N=D===void 0?{}:D,L=N.bookmark,X=N.txConfig,Q=N.database,A=N.mode,k=N.impersonatedUser,V=_(L,X,Q,A,k);return new U(a,[F,z,V],function(){return"RUN "+F+" "+n.json.stringify(z)+" "+n.json.stringify(V)})},U.goodbye=function(){return j},U.pull=function(F){var z=F===void 0?{}:F,D=z.stmtId,N=D===void 0?y:D,L=z.n,X=L===void 0?r:L,Q=w(N==null?y:N,X||r);return new U(m,[Q],function(){return"PULL "+n.json.stringify(Q)})},U.discard=function(F){var z=F===void 0?{}:F,D=z.stmtId,N=D===void 0?y:D,L=z.n,X=L===void 0?r:L,Q=w(N==null?y:N,X||r);return new U(v,[Q],function(){return"DISCARD "+n.json.stringify(Q)})},U.route=function(F,z,D){return F===void 0&&(F={}),z===void 0&&(z=[]),D===void 0&&(D=null),new U(h,[F,z,D],function(){return"ROUTE "+n.json.stringify(F)+" "+n.json.stringify(z)+" "+D})},U.routeV4x4=function(F,z,D){F===void 0&&(F={}),z===void 0&&(z=[]),D===void 0&&(D={});var N={};return D.databaseName&&(N.db=D.databaseName),D.impersonatedUser&&(N.imp_user=D.impersonatedUser),new U(h,[F,z,N],function(){return"ROUTE "+n.json.stringify(F)+" "+n.json.stringify(z)+" "+n.json.stringify(N)})},U}();_f.default=b;function _(U,F,z,D,N){var L={};return U.isEmpty()||(L.bookmarks=U.values()),F.timeout&&(L.tx_timeout=F.timeout),F.metadata&&(L.tx_metadata=F.metadata),z&&(L.db=i(z,"database")),N&&(L.imp_user=i(N,"impersonatedUser")),D===t&&(L.mode=p),L}function w(U,F){var z={n:(0,n.int)(F)};return U!==y&&(z.qid=(0,n.int)(U)),z}var S=new b(l,[],function(){return"PULL_ALL"}),E=new b(s,[],function(){return"RESET"}),P=new b(d,[],function(){return"COMMIT"}),R=new b(g,[],function(){return"ROLLBACK"}),j=new b(f,[],function(){return"GOODBYE"});return _f}var Un={},bf={},pE;function MI(){if(pE)return bf;pE=1;var n=oe&&oe.__extends||function(){var o=function(s,a){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(l[f]=u[f])},o(s,a)};return function(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");o(s,a);function l(){this.constructor=s}s.prototype=a===null?Object.create(a):(l.prototype=a.prototype,new l)}}();Object.defineProperty(bf,"__esModule",{value:!0});var e=function(){function o(){}return o.ofRecord=function(s){return s===null?o.ofNull():new i(s)},o.ofMessageResponse=function(s){return s===null?o.ofNull():new t(s)},o.ofNull=function(){return new r},Object.defineProperty(o.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),o}();bf.default=e;var t=function(o){n(s,o);function s(a){var l=o.call(this)||this;return l._response=a,l}return Object.defineProperty(s.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),s}(e),r=function(o){n(s,o);function s(){return o!==null&&o.apply(this,arguments)||this}return Object.defineProperty(s.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),s}(e),i=function(o){n(s,o);function s(a){var l=o.call(this)||this;return l._record=a,l}return Object.defineProperty(s.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),s}(e);return bf}var mE;function rs(){if(mE)return Un;mE=1;var n=oe&&oe.__extends||function(){var v=function(m,p){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var _ in b)Object.prototype.hasOwnProperty.call(b,_)&&(y[_]=b[_])},v(m,p)};return function(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");v(m,p);function y(){this.constructor=m}m.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}}(),e=oe&&oe.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(Un,"__esModule",{value:!0}),Un.ProcedureRouteObserver=Un.RouteObserver=Un.CompletedObserver=Un.FailedObserver=Un.ResetObserver=Un.LoginObserver=Un.ResultStreamObserver=Un.StreamObserver=void 0;var t=Mt(),r=e(MI()),i=t.internal.constants.FETCH_ALL,o=t.error.PROTOCOL_ERROR,s=function(){function v(){}return v.prototype.onNext=function(m){},v.prototype.onError=function(m){},v.prototype.onCompleted=function(m){},v}();Un.StreamObserver=s;var a=function(v){n(m,v);function m(p){var y=p===void 0?{}:p,b=y.reactive,_=b===void 0?!1:b,w=y.moreFunction,S=y.discardFunction,E=y.fetchSize,P=E===void 0?i:E,R=y.beforeError,j=y.afterError,U=y.beforeKeys,F=y.afterKeys,z=y.beforeComplete,D=y.afterComplete,N=y.server,L=v.call(this)||this;return L._fieldKeys=null,L._fieldLookup=null,L._head=null,L._queuedRecords=[],L._tail=null,L._error=null,L._observers=[],L._meta={},L._server=N,L._beforeError=R,L._afterError=j,L._beforeKeys=U,L._afterKeys=F,L._beforeComplete=z,L._afterComplete=D,L._queryId=null,L._moreFunction=w,L._discardFunction=S,L._discard=!1,L._fetchSize=P,L._setState(_?h.READY:h.READY_STREAMING),L._setupAuoPull(P),L}return m.prototype.onNext=function(p){var y=new t.Record(this._fieldKeys,p,this._fieldLookup);this._observers.some(function(b){return b.onNext})?this._observers.forEach(function(b){b.onNext&&b.onNext(y)}):(this._queuedRecords.push(y),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},m.prototype.onCompleted=function(p){this._state.onSuccess(this,p)},m.prototype.onError=function(p){this._state.onError(this,p)},m.prototype.cancel=function(){this._discard=!0},m.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(h.STREAMING)},m.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(h.SUCCEEDED)},m.prototype.subscribe=function(p){if(this._error){p.onError(this._error);return}if(this._head&&p.onKeys&&p.onKeys(this._head),this._queuedRecords.length>0&&p.onNext)for(var y=0;y<this._queuedRecords.length;y++)p.onNext(this._queuedRecords[y]),this._queuedRecords.length-y-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===h.READY&&this._handleStreaming());this._tail&&p.onCompleted&&p.onCompleted(this._tail),this._observers.push(p),this._state===h.READY&&this._handleStreaming()},m.prototype._handleHasMore=function(p){this._setState(h.READY),this._handleStreaming(),delete p.has_more},m.prototype._handlePullSuccess=function(p){var y=this;this._setState(h.SUCCEEDED);var b=Object.assign(this._server?{server:this._server}:{},this._meta,p),_=null;this._beforeComplete&&(_=this._beforeComplete(b));var w=function(){y._tail=b,y._observers.some(function(S){return S.onCompleted})&&y._observers.forEach(function(S){S.onCompleted&&S.onCompleted(b)}),y._afterComplete&&y._afterComplete(b)};_?Promise.resolve(_).then(function(){return w()}):w()},m.prototype._handleRunSuccess=function(p,y){var b=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},p.fields&&p.fields.length>0){this._fieldKeys=p.fields;for(var _=0;_<p.fields.length;_++)this._fieldLookup[p.fields[_]]=_;delete p.fields}p.qid!==null&&p.qid!==void 0&&(this._queryId=p.qid,delete p.qid),this._storeMetadataForCompletion(p);var w=null;this._beforeKeys&&(w=this._beforeKeys(this._fieldKeys));var S=function(){b._head=b._fieldKeys,b._observers.some(function(E){return E.onKeys})&&b._observers.forEach(function(E){E.onKeys&&E.onKeys(b._fieldKeys)}),b._afterKeys&&b._afterKeys(b._fieldKeys),y()};w?Promise.resolve(w).then(function(){return S()}):S()}},m.prototype._handleError=function(p){var y=this;this._setState(h.FAILED),this._error=p;var b=null;this._beforeError&&(b=this._beforeError(p));var _=function(){y._observers.some(function(w){return w.onError})&&y._observers.forEach(function(w){w.onError&&w.onError(p)}),y._afterError&&y._afterError(p)};b?Promise.resolve(b).then(function(){return _()}):_()},m.prototype._handleStreaming=function(){this._head&&this._observers.some(function(p){return p.onNext||p.onCompleted})&&(this._discard?(this._discardFunction(this._queryId,this),this._setState(h.STREAMING)):this._autoPull&&(this._moreFunction(this._queryId,this._fetchSize,this),this._setState(h.STREAMING)))},m.prototype._storeMetadataForCompletion=function(p){for(var y=Object.keys(p),b=y.length,_="";b--;)_=y[b],this._meta[_]=p[_]},m.prototype._setState=function(p){this._state=p},m.prototype._setupAuoPull=function(p){this._autoPull=!0,p===i?(this._lowRecordWatermark=Number.MAX_VALUE,this._highRecordWatermark=Number.MAX_VALUE):(this._lowRecordWatermark=.3*p,this._highRecordWatermark=.7*p)},m}(s);Un.ResultStreamObserver=a;var l=function(v){n(m,v);function m(p){var y=p===void 0?{}:p,b=y.onError,_=y.onCompleted,w=v.call(this)||this;return w._onError=b,w._onCompleted=_,w}return m.prototype.onNext=function(p){this.onError((0,t.newError)("Received RECORD when initializing "+t.json.stringify(p)))},m.prototype.onError=function(p){this._onError&&this._onError(p)},m.prototype.onCompleted=function(p){this._onCompleted&&this._onCompleted(p)},m}(s);Un.LoginObserver=l;var u=function(v){n(m,v);function m(p){var y=p===void 0?{}:p,b=y.onProtocolError,_=y.onError,w=y.onComplete,S=v.call(this)||this;return S._onProtocolError=b,S._onError=_,S._onComplete=w,S}return m.prototype.onNext=function(p){this.onError((0,t.newError)("Received RECORD when resetting: received record is: "+t.json.stringify(p),o))},m.prototype.onError=function(p){p.code===o&&this._onProtocolError&&this._onProtocolError(p.message),this._onError&&this._onError(p)},m.prototype.onCompleted=function(p){this._onComplete&&this._onComplete(p)},m}(s);Un.ResetObserver=u;var f=function(v){n(m,v);function m(p){var y=p.error,b=p.onError,_=v.call(this,{beforeError:b})||this;return _.onError(y),_}return m}(a);Un.FailedObserver=f;var c=function(v){n(m,v);function m(){var p=v.call(this)||this;return v.prototype.markCompleted.call(p),p}return m}(a);Un.CompletedObserver=c;var d=function(v){n(m,v);function m(p){var y=p.resultObserver,b=p.onProtocolError,_=p.onError,w=p.onCompleted,S=v.call(this)||this;return S._resultObserver=y,S._onError=_,S._onCompleted=w,S._records=[],S._onProtocolError=b,y.subscribe(S),S}return m.prototype.onNext=function(p){this._records.push(p)},m.prototype.onError=function(p){p.code===o&&this._onProtocolError&&this._onProtocolError(p.message),this._onError&&this._onError(p)},m.prototype.onCompleted=function(){if(this._records!==null&&this._records.length!==1){this.onError((0,t.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+t.json.stringify(this._records),o));return}this._onCompleted&&this._onCompleted(r.default.ofRecord(this._records[0]))},m}(s);Un.ProcedureRouteObserver=d;var g=function(v){n(m,v);function m(p){var y=p===void 0?{}:p,b=y.onProtocolError,_=y.onError,w=y.onCompleted,S=v.call(this)||this;return S._onProtocolError=b,S._onError=_,S._onCompleted=w,S}return m.prototype.onNext=function(p){this.onError((0,t.newError)("Received RECORD when resetting: received record is: "+t.json.stringify(p),o))},m.prototype.onError=function(p){p.code===o&&this._onProtocolError&&this._onProtocolError(p.message),this._onError&&this._onError(p)},m.prototype.onCompleted=function(p){this._onCompleted&&this._onCompleted(r.default.ofMessageResponse(p))},m}(s);Un.RouteObserver=g;var h={READY_STREAMING:{onSuccess:function(v,m){v._handleRunSuccess(m,function(){v._setState(h.STREAMING)})},onError:function(v,m){v._handleError(m)},name:function(){return"READY_STREAMING"}},READY:{onSuccess:function(v,m){v._handleRunSuccess(m,function(){return v._handleStreaming()})},onError:function(v,m){v._handleError(m)},name:function(){return"READY"}},STREAMING:{onSuccess:function(v,m){m.has_more?v._handleHasMore(m):v._handlePullSuccess(m)},onError:function(v,m){v._handleError(m)},name:function(){return"STREAMING"}},FAILED:{onError:function(v){},name:function(){return"FAILED"}},SUCCEEDED:{name:function(){return"SUCCEEDED"}}};return Un}var gE;function DI(){if(gE)return yf;gE=1;var n=oe&&oe.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(yf,"__esModule",{value:!0});var e=Cy(),t=Ey(),r=n(cl()),i=rs(),o=Mt(),s=o.internal.bookmark.Bookmark,a=o.internal.constants,l=a.ACCESS_MODE_WRITE,u=a.BOLT_PROTOCOL_V1;o.internal.logger.Logger;var f=o.internal.txConfig.TxConfig,c=function(){function d(g,h,v,m,p,y){var b=v===void 0?{}:v,_=b.disableLosslessIntegers,w=b.useBigInt;m===void 0&&(m=function(){return null}),this._server=g||{},this._chunker=h,this._packer=this._createPacker(h),this._unpacker=this._createUnpacker(_,w),this._responseHandler=m(this),this._log=p,this._onProtocolError=y,this._fatalError=null}return Object.defineProperty(d.prototype,"version",{get:function(){return u},enumerable:!1,configurable:!0}),d.prototype.packer=function(){return this._packer},d.prototype.unpacker=function(){return this._unpacker},d.prototype.transformMetadata=function(g){return g},d.prototype.initialize=function(g){var h=this,v=g===void 0?{}:g,m=v.userAgent,p=v.authToken,y=v.onError,b=v.onComplete,_=new i.LoginObserver({onError:function(w){return h._onLoginError(w,y)},onCompleted:function(w){return h._onLoginCompleted(w,b)}});return this.write(r.default.init(m,p),_,!0),_},d.prototype.prepareToClose=function(){},d.prototype.beginTransaction=function(g){var h=g===void 0?{}:g,v=h.bookmark,m=h.txConfig,p=h.database,y=h.mode,b=h.impersonatedUser,_=h.beforeError,w=h.afterError,S=h.beforeComplete,E=h.afterComplete;return this.run("BEGIN",v?v.asBeginTransactionParameters():{},{bookmark:v,txConfig:m,database:p,mode:y,impersonatedUser:b,beforeError:_,afterError:w,beforeComplete:S,afterComplete:E,flush:!1})},d.prototype.commitTransaction=function(g){var h=g===void 0?{}:g,v=h.beforeError,m=h.afterError,p=h.beforeComplete,y=h.afterComplete;return this.run("COMMIT",{},{bookmark:s.empty(),txConfig:f.empty(),mode:l,beforeError:v,afterError:m,beforeComplete:p,afterComplete:y})},d.prototype.rollbackTransaction=function(g){var h=g===void 0?{}:g,v=h.beforeError,m=h.afterError,p=h.beforeComplete,y=h.afterComplete;return this.run("ROLLBACK",{},{bookmark:s.empty(),txConfig:f.empty(),mode:l,beforeError:v,afterError:m,beforeComplete:p,afterComplete:y})},d.prototype.run=function(g,h,v){var m=v===void 0?{}:v;m.bookmark;var p=m.txConfig,y=m.database;m.mode;var b=m.impersonatedUser,_=m.beforeKeys,w=m.afterKeys,S=m.beforeError,E=m.afterError,P=m.beforeComplete,R=m.afterComplete,j=m.flush,U=j===void 0?!0:j,F=new i.ResultStreamObserver({server:this._server,beforeKeys:_,afterKeys:w,beforeError:S,afterError:E,beforeComplete:P,afterComplete:R});return(0,e.assertTxConfigIsEmpty)(p,this._onProtocolError,F),(0,e.assertDatabaseIsEmpty)(y,this._onProtocolError,F),(0,e.assertImpersonatedUserIsEmpty)(b,this._onProtocolError,F),this.write(r.default.run(g,h),F,!1),this.write(r.default.pullAll(),F,U),F},Object.defineProperty(d.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),d.prototype.reset=function(g){var h=g===void 0?{}:g,v=h.onError,m=h.onComplete,p=new i.ResetObserver({onProtocolError:this._onProtocolError,onError:v,onComplete:m});return this.write(r.default.reset(),p,!0),p},d.prototype._createPacker=function(g){return new t.v1.Packer(g)},d.prototype._createUnpacker=function(g,h){return new t.v1.Unpacker(g,h)},d.prototype.write=function(g,h,v){var m=this,p=this.queueObserverIfProtocolIsNotBroken(h);p&&(this._log.isDebugEnabled()&&this._log.debug("C: "+g),this.packer().packStruct(g.signature,g.fields.map(function(y){return m.packer().packable(y)})),this._chunker.messageBoundary(),v&&this._chunker.flush())},d.prototype.notifyFatalError=function(g){return this._fatalError=g,this._responseHandler._notifyErrorToObservers(g)},d.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},d.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},d.prototype.queueObserverIfProtocolIsNotBroken=function(g){return this.isBroken()?(this.notifyFatalErrorToObserver(g),!1):this._responseHandler._queueObserver(g)},d.prototype.isBroken=function(){return!!this._fatalError},d.prototype.notifyFatalErrorToObserver=function(g){g&&g.onError&&g.onError(this._fatalError)},d.prototype.resetFailure=function(){this._responseHandler._resetFailure()},d.prototype._onLoginCompleted=function(g,h){if(g){var v=g.server;this._server.version||(this._server.version=v)}h&&h(g)},d.prototype._onLoginError=function(g,h){this._onProtocolError(g.message),h&&h(g)},d}();return yf.default=c,yf}var wf={},vE;function jI(){if(vE)return wf;vE=1;var n=oe&&oe.__extends||function(){var a=function(l,u){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,c){f.__proto__=c}||function(f,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(f[d]=c[d])},a(l,u)};return function(l,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");a(l,u);function f(){this.constructor=l}l.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}(),e=oe&&oe.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(wf,"__esModule",{value:!0});var t=e(DI()),r=e(Ey()),i=Mt(),o=i.internal.constants.BOLT_PROTOCOL_V2,s=function(a){n(l,a);function l(){return a!==null&&a.apply(this,arguments)||this}return l.prototype._createPacker=function(u){return new r.default.Packer(u)},l.prototype._createUnpacker=function(u,f){return new r.default.Unpacker(u,f)},Object.defineProperty(l.prototype,"version",{get:function(){return o},enumerable:!1,configurable:!0}),l}(t.default);return wf.default=s,wf}var Sf={},yE;function LI(){if(yE)return Sf;yE=1;var n=oe&&oe.__extends||function(){var h=function(v,m){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(p[b]=y[b])},h(v,m)};return function(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");h(v,m);function p(){this.constructor=v}v.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}}(),e=oe&&oe.__assign||function(){return e=Object.assign||function(h){for(var v,m=1,p=arguments.length;m<p;m++){v=arguments[m];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(h[y]=v[y])}return h},e.apply(this,arguments)},t=oe&&oe.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(Sf,"__esModule",{value:!0});var r=t(jI()),i=t(cl()),o=Cy(),s=rs(),a=Mt();a.internal.bookmark.Bookmark;var l=a.internal.constants.BOLT_PROTOCOL_V3,u=a.internal.txConfig.TxConfig,f="context",c="CALL dbms.cluster.routing.getRoutingTable($"+f+")",d=new s.StreamObserver,g=function(h){n(v,h);function v(){return h!==null&&h.apply(this,arguments)||this}return Object.defineProperty(v.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),v.prototype.transformMetadata=function(m){return"t_first"in m&&(m.result_available_after=m.t_first,delete m.t_first),"t_last"in m&&(m.result_consumed_after=m.t_last,delete m.t_last),m},v.prototype.initialize=function(m){var p=this,y=m===void 0?{}:m,b=y.userAgent,_=y.authToken,w=y.onError,S=y.onComplete,E=new s.LoginObserver({onError:function(P){return p._onLoginError(P,w)},onCompleted:function(P){return p._onLoginCompleted(P,S)}});return this.write(i.default.hello(b,_),E,!0),E},v.prototype.prepareToClose=function(){this.write(i.default.goodbye(),d,!0)},v.prototype.beginTransaction=function(m){var p=m===void 0?{}:m,y=p.bookmark,b=p.txConfig,_=p.database,w=p.impersonatedUser,S=p.mode,E=p.beforeError,P=p.afterError,R=p.beforeComplete,j=p.afterComplete,U=new s.ResultStreamObserver({server:this._server,beforeError:E,afterError:P,beforeComplete:R,afterComplete:j});return U.prepareToHandleSingleResponse(),(0,o.assertDatabaseIsEmpty)(_,this._onProtocolError,U),(0,o.assertImpersonatedUserIsEmpty)(w,this._onProtocolError,U),this.write(i.default.begin({bookmark:y,txConfig:b,mode:S}),U,!0),U},v.prototype.commitTransaction=function(m){var p=m===void 0?{}:m,y=p.beforeError,b=p.afterError,_=p.beforeComplete,w=p.afterComplete,S=new s.ResultStreamObserver({server:this._server,beforeError:y,afterError:b,beforeComplete:_,afterComplete:w});return S.prepareToHandleSingleResponse(),this.write(i.default.commit(),S,!0),S},v.prototype.rollbackTransaction=function(m){var p=m===void 0?{}:m,y=p.beforeError,b=p.afterError,_=p.beforeComplete,w=p.afterComplete,S=new s.ResultStreamObserver({server:this._server,beforeError:y,afterError:b,beforeComplete:_,afterComplete:w});return S.prepareToHandleSingleResponse(),this.write(i.default.rollback(),S,!0),S},v.prototype.run=function(m,p,y){var b=y===void 0?{}:y,_=b.bookmark,w=b.txConfig,S=b.database,E=b.impersonatedUser,P=b.mode,R=b.beforeKeys,j=b.afterKeys,U=b.beforeError,F=b.afterError,z=b.beforeComplete,D=b.afterComplete,N=b.flush,L=N===void 0?!0:N,X=new s.ResultStreamObserver({server:this._server,beforeKeys:R,afterKeys:j,beforeError:U,afterError:F,beforeComplete:z,afterComplete:D});return(0,o.assertDatabaseIsEmpty)(S,this._onProtocolError,X),(0,o.assertImpersonatedUserIsEmpty)(E,this._onProtocolError,X),this.write(i.default.runWithMetadata(m,p,{bookmark:_,txConfig:w,mode:P}),X,!1),this.write(i.default.pullAll(),X,L),X},v.prototype.requestRoutingInformation=function(m){var p,y=m.routingContext,b=y===void 0?{}:y,_=m.sessionContext,w=_===void 0?{}:_,S=m.onError,E=m.onCompleted,P=this.run(c,(p={},p[f]=b,p),e(e({},w),{txConfig:u.empty()}));return new s.ProcedureRouteObserver({resultObserver:P,onProtocolError:this._onProtocolError,onError:S,onCompleted:E})},v}(r.default);return Sf.default=g,Sf}var Cf={},_E;function BI(){if(_E)return Cf;_E=1;var n=oe&&oe.__extends||function(){var m=function(p,y){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,_){b.__proto__=_}||function(b,_){for(var w in _)Object.prototype.hasOwnProperty.call(_,w)&&(b[w]=_[w])},m(p,y)};return function(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");m(p,y);function b(){this.constructor=p}p.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}}(),e=oe&&oe.__assign||function(){return e=Object.assign||function(m){for(var p,y=1,b=arguments.length;y<b;y++){p=arguments[y];for(var _ in p)Object.prototype.hasOwnProperty.call(p,_)&&(m[_]=p[_])}return m},e.apply(this,arguments)},t=oe&&oe.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(Cf,"__esModule",{value:!0});var r=t(LI()),i=t(cl()),o=Cy(),s=rs(),a=Mt();a.internal.bookmark.Bookmark;var l=a.internal.constants,u=l.BOLT_PROTOCOL_V4_0,f=l.FETCH_ALL,c=a.internal.txConfig.TxConfig,d="context",g="database",h="CALL dbms.routing.getRoutingTable($"+d+", $"+g+")",v=function(m){n(p,m);function p(){return m!==null&&m.apply(this,arguments)||this}return Object.defineProperty(p.prototype,"version",{get:function(){return u},enumerable:!1,configurable:!0}),p.prototype.beginTransaction=function(y){var b=y===void 0?{}:y,_=b.bookmark,w=b.txConfig,S=b.database,E=b.impersonatedUser,P=b.mode,R=b.beforeError,j=b.afterError,U=b.beforeComplete,F=b.afterComplete,z=new s.ResultStreamObserver({server:this._server,beforeError:R,afterError:j,beforeComplete:U,afterComplete:F});return z.prepareToHandleSingleResponse(),(0,o.assertImpersonatedUserIsEmpty)(E,this._onProtocolError,z),this.write(i.default.begin({bookmark:_,txConfig:w,database:S,mode:P}),z,!0),z},p.prototype.run=function(y,b,_){var w=_===void 0?{}:_,S=w.bookmark,E=w.txConfig,P=w.database,R=w.impersonatedUser,j=w.mode,U=w.beforeKeys,F=w.afterKeys,z=w.beforeError,D=w.afterError,N=w.beforeComplete,L=w.afterComplete,X=w.flush,Q=X===void 0?!0:X,A=w.reactive,k=A===void 0?!1:A,V=w.fetchSize,K=V===void 0?f:V,H=new s.ResultStreamObserver({server:this._server,reactive:k,fetchSize:K,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:U,afterKeys:F,beforeError:z,afterError:D,beforeComplete:N,afterComplete:L});(0,o.assertImpersonatedUserIsEmpty)(R,this._onProtocolError,H);var I=k;return this.write(i.default.runWithMetadata(y,b,{bookmark:S,txConfig:E,database:P,mode:j}),H,I&&Q),k||this.write(i.default.pull({n:K}),H,Q),H},p.prototype._requestMore=function(y,b,_){this.write(i.default.pull({stmtId:y,n:b}),_,!0)},p.prototype._requestDiscard=function(y,b){this.write(i.default.discard({stmtId:y}),b,!0)},p.prototype._noOp=function(){},p.prototype.requestRoutingInformation=function(y){var b,_=y.routingContext,w=_===void 0?{}:_,S=y.databaseName,E=S===void 0?null:S,P=y.sessionContext,R=P===void 0?{}:P,j=y.onError,U=y.onCompleted,F=this.run(h,(b={},b[d]=w,b[g]=E,b),e(e({},R),{txConfig:c.empty()}));return new s.ProcedureRouteObserver({resultObserver:F,onProtocolError:this._onProtocolError,onError:j,onCompleted:U})},p}(r.default);return Cf.default=v,Cf}var Ef={},bE;function FI(){if(bE)return Ef;bE=1;var n=oe&&oe.__extends||function(){var l=function(u,f){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,d){c.__proto__=d}||function(c,d){for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(c[g]=d[g])},l(u,f)};return function(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");l(u,f);function c(){this.constructor=u}u.prototype=f===null?Object.create(f):(c.prototype=f.prototype,new c)}}(),e=oe&&oe.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ef,"__esModule",{value:!0});var t=e(BI()),r=e(cl()),i=rs(),o=Mt(),s=o.internal.constants.BOLT_PROTOCOL_V4_1,a=function(l){n(u,l);function u(f,c,d,g,h,v,m){g===void 0&&(g=function(){return null});var p=l.call(this,f,c,d,g,h,v)||this;return p._serversideRouting=m,p}return Object.defineProperty(u.prototype,"version",{get:function(){return s},enumerable:!1,configurable:!0}),u.prototype.initialize=function(f){var c=this,d=f===void 0?{}:f,g=d.userAgent,h=d.authToken,v=d.onError,m=d.onComplete,p=new i.LoginObserver({onError:function(y){return c._onLoginError(y,v)},onCompleted:function(y){return c._onLoginCompleted(y,m)}});return this.write(r.default.hello(g,h,this._serversideRouting),p,!0),p},u}(t.default);return Ef.default=a,Ef}var Of={},wE;function UI(){if(wE)return Of;wE=1;var n=oe&&oe.__extends||function(){var s=function(a,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var c in f)Object.prototype.hasOwnProperty.call(f,c)&&(u[c]=f[c])},s(a,l)};return function(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");s(a,l);function u(){this.constructor=a}a.prototype=l===null?Object.create(l):(u.prototype=l.prototype,new u)}}(),e=oe&&oe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Of,"__esModule",{value:!0});var t=e(FI()),r=Mt(),i=r.internal.constants.BOLT_PROTOCOL_V4_2,o=function(s){n(a,s);function a(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(a.prototype,"version",{get:function(){return i},enumerable:!1,configurable:!0}),a}(t.default);return Of.default=o,Of}var kf={},SE;function Oy(){if(SE)return kf;SE=1;var n=oe&&oe.__extends||function(){var f=function(c,d){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,h){g.__proto__=h}||function(g,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(g[v]=h[v])},f(c,d)};return function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");f(c,d);function g(){this.constructor=c}c.prototype=d===null?Object.create(d):(g.prototype=d.prototype,new g)}}(),e=oe&&oe.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(kf,"__esModule",{value:!0});var t=e(UI()),r=e(cl()),i=rs(),o=rs(),s=Mt(),a=s.internal.bookmark.Bookmark,l=s.internal.constants.BOLT_PROTOCOL_V4_3,u=function(f){n(c,f);function c(){return f!==null&&f.apply(this,arguments)||this}return Object.defineProperty(c.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),c.prototype.requestRoutingInformation=function(d){var g=d.routingContext,h=g===void 0?{}:g,v=d.databaseName,m=v===void 0?null:v,p=d.sessionContext,y=p===void 0?{}:p,b=d.onError,_=d.onCompleted,w=new i.RouteObserver({onProtocolError:this._onProtocolError,onError:b,onCompleted:_}),S=y.bookmark||a.empty();return this.write(r.default.route(h,S.values(),m),w,!0),w},c.prototype.initialize=function(d){var g=this,h=d===void 0?{}:d,v=h.userAgent,m=h.authToken,p=h.onError,y=h.onComplete,b=new o.LoginObserver({onError:function(_){return g._onLoginError(_,p)},onCompleted:function(_){return _.patch_bolt!==void 0&&g._applyPatches(_.patch_bolt),g._onLoginCompleted(_,y)}});return this.write(r.default.hello(v,m,this._serversideRouting,["utc"]),b,!0),b},c.prototype._applyPatches=function(d){d.includes("utc")&&this._applyUtcPatch()},c.prototype._applyUtcPatch=function(){this._packer.useUtc=!0,this._unpacker.useUtc=!0},c}(t.default);return kf.default=u,kf}var Tf={},CE;function ore(){if(CE)return Tf;CE=1;var n=oe&&oe.__extends||function(){var c=function(d,g){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(h[m]=v[m])},c(d,g)};return function(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");c(d,g);function h(){this.constructor=d}d.prototype=g===null?Object.create(g):(h.prototype=g.prototype,new h)}}(),e=oe&&oe.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Tf,"__esModule",{value:!0});var t=e(Oy()),r=Mt(),i=e(cl()),o=rs(),s=r.internal.constants,a=s.BOLT_PROTOCOL_V4_4,l=s.FETCH_ALL,u=r.internal.bookmark.Bookmark,f=function(c){n(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return Object.defineProperty(d.prototype,"version",{get:function(){return a},enumerable:!1,configurable:!0}),d.prototype.requestRoutingInformation=function(g){var h=g.routingContext,v=h===void 0?{}:h,m=g.databaseName,p=m===void 0?null:m,y=g.impersonatedUser,b=y===void 0?null:y,_=g.sessionContext,w=_===void 0?{}:_,S=g.onError,E=g.onCompleted,P=new o.RouteObserver({onProtocolError:this._onProtocolError,onError:S,onCompleted:E}),R=w.bookmark||u.empty();return this.write(i.default.routeV4x4(v,R.values(),{databaseName:p,impersonatedUser:b}),P,!0),P},d.prototype.run=function(g,h,v){var m=v===void 0?{}:v,p=m.bookmark,y=m.txConfig,b=m.database,_=m.mode,w=m.impersonatedUser,S=m.beforeKeys,E=m.afterKeys,P=m.beforeError,R=m.afterError,j=m.beforeComplete,U=m.afterComplete,F=m.flush,z=F===void 0?!0:F,D=m.reactive,N=D===void 0?!1:D,L=m.fetchSize,X=L===void 0?l:L,Q=new o.ResultStreamObserver({server:this._server,reactive:N,fetchSize:X,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:S,afterKeys:E,beforeError:P,afterError:R,beforeComplete:j,afterComplete:U}),A=N;return this.write(i.default.runWithMetadata(g,h,{bookmark:p,txConfig:y,database:b,mode:_,impersonatedUser:w}),Q,A&&z),N||this.write(i.default.pull({n:X}),Q,z),Q},d.prototype.beginTransaction=function(g){var h=g===void 0?{}:g,v=h.bookmark,m=h.txConfig,p=h.database,y=h.mode,b=h.impersonatedUser,_=h.beforeError,w=h.afterError,S=h.beforeComplete,E=h.afterComplete,P=new o.ResultStreamObserver({server:this._server,beforeError:_,afterError:w,beforeComplete:S,afterComplete:E});return P.prepareToHandleSingleResponse(),this.write(i.default.begin({bookmark:v,txConfig:m,database:p,mode:y,impersonatedUser:b}),P,!0),P},d}(t.default);return Tf.default=f,Tf}var Pf={},EE;function sre(){if(EE)return Pf;EE=1,Object.defineProperty(Pf,"__esModule",{value:!0});var n=Mt(),e=112,t=113,r=126,i=127;function o(){}function s(u){return u}var a={onNext:o,onCompleted:o,onError:o},l=function(){function u(f){var c=f===void 0?{}:f,d=c.transformMetadata,g=c.log,h=c.observer;this._pendingObservers=[],this._log=g,this._transformMetadata=d||s,this._observer=Object.assign({onPendingObserversChange:o,onError:o,onFailure:o,onErrorApplyTransformation:s},h)}return Object.defineProperty(u.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),u.prototype.handleResponse=function(f){var c=f.fields[0];switch(f.signature){case t:this._log.isDebugEnabled()&&this._log.debug("S: RECORD "+n.json.stringify(f)),this._currentObserver.onNext(c);break;case e:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS "+n.json.stringify(f));try{var d=this._transformMetadata(c);this._currentObserver.onCompleted(d)}finally{this._updateCurrentObserver()}break;case i:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE "+n.json.stringify(f));try{var g=(0,n.newError)(c.message,c.code);this._currentFailure=this._observer.onErrorApplyTransformation(g),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case r:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED "+n.json.stringify(f));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,n.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,n.newError)("Unknown Bolt protocol message: "+f))}},u.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onPendingObserversChange(this._pendingObservers.length)},u.prototype._queueObserver=function(f){return f=f||a,f.onCompleted=f.onCompleted||o,f.onError=f.onError||o,f.onNext=f.onNext||o,this._currentObserver===void 0?this._currentObserver=f:this._pendingObservers.push(f),this._observer.onPendingObserversChange(this._pendingObservers.length),!0},u.prototype._notifyErrorToObservers=function(f){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(f);this._pendingObservers.length>0;){var c=this._pendingObservers.shift();c&&c.onError&&c.onError(f)}},u.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},u.prototype._resetFailure=function(){this._currentFailure=null},u}();return Pf.default=l,Pf}var OE;function are(){if(OE)return vf;OE=1;var n=oe&&oe.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(vf,"__esModule",{value:!0});var e=Mt(),t=n(DI()),r=n(jI()),i=n(LI()),o=n(BI()),s=n(FI()),a=n(UI()),l=n(Oy()),u=n(ore()),f=n(sre());function c(g){var h=g===void 0?{}:g,v=h.version,m=h.chunker,p=h.dechunker,y=h.channel,b=h.disableLosslessIntegers,_=h.useBigInt,w=h.serversideRouting,S=h.server,E=h.log,P=h.observer,R=function(j){var U=new f.default({transformMetadata:j.transformMetadata.bind(j),log:E,observer:P});return y.onerror=P.onError.bind(P),y.onmessage=function(F){return p.write(F)},p.onmessage=function(F){try{U.handleResponse(j.unpacker().unpack(F))}catch(z){return P.onError(z)}},U};return d(v,S,m,{disableLosslessIntegers:b,useBigInt:_},w,R,P.onProtocolError.bind(P),E)}vf.default=c;function d(g,h,v,m,p,y,b,_){switch(g){case 1:return new t.default(h,v,m,y,_,b);case 2:return new r.default(h,v,m,y,_,b);case 3:return new i.default(h,v,m,y,_,b);case 4:return new o.default(h,v,m,y,_,b);case 4.1:return new s.default(h,v,m,y,_,b,p);case 4.2:return new a.default(h,v,m,y,_,b,p);case 4.3:return new l.default(h,v,m,y,_,b,p);case 4.4:return new u.default(h,v,m,y,_,b,p);default:throw(0,e.newError)("Unknown Bolt protocol version: "+g)}}return vf}var kE;function ky(){return kE||(kE=1,function(n){var e=oe&&oe.__createBinding||(Object.create?function(l,u,f,c){c===void 0&&(c=f),Object.defineProperty(l,c,{enumerable:!0,get:function(){return u[f]}})}:function(l,u,f,c){c===void 0&&(c=f),l[c]=u[f]}),t=oe&&oe.__exportStar||function(l,u){for(var f in l)f!=="default"&&!Object.prototype.hasOwnProperty.call(u,f)&&e(u,l,f)},r=oe&&oe.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(n,"__esModule",{value:!0}),n.RawRoutingTable=n.BoltProtocol=void 0;var i=r(nre()),o=r(are()),s=r(Oy()),a=r(MI());t(rs(),n),n.BoltProtocol=s.default,n.RawRoutingTable=a.default,n.default={handshake:i.default,create:o.default}}(Pm)),Pm}var Nm={},To={},TE;function VI(){if(TE)return To;TE=1,Object.defineProperty(To,"__esModule",{value:!0}),To.DEFAULT_ACQUISITION_TIMEOUT=To.DEFAULT_MAX_SIZE=void 0;var n=100;To.DEFAULT_MAX_SIZE=n;var e=60*1e3;To.DEFAULT_ACQUISITION_TIMEOUT=e;var t=function(){function o(s,a){this.maxSize=r(s,n),this.acquisitionTimeout=r(a,e)}return o.defaultConfig=function(){return new o(n,e)},o.fromDriverConfig=function(s){var a=i(s.maxConnectionPoolSize),l=a?s.maxConnectionPoolSize:n,u=i(s.connectionAcquisitionTimeout),f=u?s.connectionAcquisitionTimeout:e;return new o(l,f)},o}();To.default=t;function r(o,s){return o===0||o?o:s}function i(o){return o===0||o}return To}var If={},PE;function lre(){if(PE)return If;PE=1;var n=oe&&oe.__awaiter||function(c,d,g,h){function v(m){return m instanceof g?m:new g(function(p){p(m)})}return new(g||(g=Promise))(function(m,p){function y(w){try{_(h.next(w))}catch(S){p(S)}}function b(w){try{_(h.throw(w))}catch(S){p(S)}}function _(w){w.done?m(w.value):v(w.value).then(y,b)}_((h=h.apply(c,d||[])).next())})},e=oe&&oe.__generator||function(c,d){var g={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},h,v,m,p;return p={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function y(_){return function(w){return b([_,w])}}function b(_){if(h)throw new TypeError("Generator is already executing.");for(;g;)try{if(h=1,v&&(m=_[0]&2?v.return:_[0]?v.throw||((m=v.return)&&m.call(v),0):v.next)&&!(m=m.call(v,_[1])).done)return m;switch(v=0,m&&(_=[_[0]&2,m.value]),_[0]){case 0:case 1:m=_;break;case 4:return g.label++,{value:_[1],done:!1};case 5:g.label++,v=_[1],_=[0];continue;case 7:_=g.ops.pop(),g.trys.pop();continue;default:if(m=g.trys,!(m=m.length>0&&m[m.length-1])&&(_[0]===6||_[0]===2)){g=0;continue}if(_[0]===3&&(!m||_[1]>m[0]&&_[1]<m[3])){g.label=_[1];break}if(_[0]===6&&g.label<m[1]){g.label=m[1],m=_;break}if(m&&g.label<m[2]){g.label=m[2],g.ops.push(_);break}m[2]&&g.ops.pop(),g.trys.pop();continue}_=d.call(c,g)}catch(w){_=[6,w],v=0}finally{h=m=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},t=oe&&oe.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(If,"__esModule",{value:!0});var r=t(VI()),i=Mt(),o=i.internal.logger.Logger,s=function(){function c(d){var g=d===void 0?{}:d,h=g.create,v=h===void 0?function(F,z){return Promise.resolve()}:h,m=g.destroy,p=m===void 0?function(F){return Promise.resolve()}:m,y=g.validate,b=y===void 0?function(F){return!0}:y,_=g.installIdleObserver,w=_===void 0?function(F,z){}:_,S=g.removeIdleObserver,E=S===void 0?function(F){}:S,P=g.config,R=P===void 0?r.default.defaultConfig():P,j=g.log,U=j===void 0?o.noOp():j;this._create=v,this._destroy=p,this._validate=b,this._installIdleObserver=w,this._removeIdleObserver=E,this._maxSize=R.maxSize,this._acquisitionTimeout=R.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._poolState={},this._release=this._release.bind(this),this._log=U,this._closed=!1}return c.prototype.acquire=function(d){var g=this;return this._acquire(d).then(function(h){var v=d.asKey();if(h)return h;var m=g._acquireRequests,p=m[v];return p||(m[v]=[]),new Promise(function(y,b){var _,w=setTimeout(function(){var S=m[v];if(S&&(m[v]=S.filter(function(R){return R!==_})),!_.isCompleted()){var E=g.activeResourceCount(d),P=g.has(d)?g._pools[v].length:0;_.reject((0,i.newError)("Connection acquisition timed out in "+g._acquisitionTimeout+" ms. Pool status: Active conn count = "+E+", Idle conn count = "+P+"."))}},g._acquisitionTimeout);_=new u(v,y,b,w,g._log),m[v].push(_)})})},c.prototype.purge=function(d){return this._purgeKey(d.asKey())},c.prototype.close=function(){return n(this,void 0,void 0,function(){var d=this;return e(this,function(g){switch(g.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(h){return d._purgeKey(h)}))];case 1:return[2,g.sent()]}})})},c.prototype.keepAll=function(d){var g=this,h=d.map(function(p){return p.asKey()}),v=Object.keys(this._pools),m=v.filter(function(p){return h.indexOf(p)===-1});return Promise.all(m.map(function(p){return g._purgeKey(p)}))},c.prototype.has=function(d){return d.asKey()in this._pools},c.prototype.activeResourceCount=function(d){return this._activeResourceCounts[d.asKey()]||0},c.prototype._acquire=function(d){return n(this,void 0,void 0,function(){var g,h,v,m,p,y,b=this;return e(this,function(_){switch(_.label){case 0:if(this._closed)throw(0,i.newError)("Pool is closed, it is no more able to serve requests.");g=d.asKey(),h=this._pools[g],v=this._poolState[g],h||(h=[],v=new f,this._pools[g]=h,this._pendingCreates[g]=0,this._poolState[g]=v),_.label=1;case 1:return h.length?(m=h.pop(),this._validate(m)?(this._removeIdleObserver&&this._removeIdleObserver(m),a(g,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug(m+" acquired from the pool "+g),[2,m]):[3,2]):[3,5];case 2:return[4,this._destroy(m)];case 3:_.sent(),_.label=4;case 4:return[3,1];case 5:if(this._maxSize>0&&(p=this.activeResourceCount(d)+this._pendingCreates[g],p>=this._maxSize))return[2,null];this._pendingCreates[g]=this._pendingCreates[g]+1,_.label=6;case 6:return _.trys.push([6,,8,9]),[4,this._create(d,function(w,S){return b._release(v,w,S)})];case 7:return y=_.sent(),a(g,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug(y+" created for the pool "+g),[3,9];case 8:return this._pendingCreates[g]=this._pendingCreates[g]-1,[7];case 9:return[2,y]}})})},c.prototype._release=function(d,g,h){return n(this,void 0,void 0,function(){var v,m,p=this;return e(this,function(y){switch(y.label){case 0:return v=g.asKey(),m=this._pools[v],m&&d&&d.isActive()?this._validate(h)?[3,2]:(this._log.isDebugEnabled()&&this._log.debug(h+" destroyed and can't be released to the pool "+v+" because it is not functional"),[4,this._destroy(h)]):[3,4];case 1:return y.sent(),[3,3];case 2:this._installIdleObserver&&this._installIdleObserver(h,{onError:function(b){p._log.debug("Idle connection "+h+" destroyed because of error: "+b);var _=p._pools[v];_&&(p._pools[v]=_.filter(function(w){return w!==h})),p._destroy(h).catch(function(){})}}),m.push(h),this._log.isDebugEnabled()&&this._log.debug(h+" released to the pool "+v),y.label=3;case 3:return[3,6];case 4:return this._log.isDebugEnabled()&&this._log.debug(h+" destroyed and can't be released to the pool "+v+" because pool has been purged"),[4,this._destroy(h)];case 5:y.sent(),y.label=6;case 6:return l(v,this._activeResourceCounts),this._processPendingAcquireRequests(g),[2]}})})},c.prototype._purgeKey=function(d){return n(this,void 0,void 0,function(){var g,h,v;return e(this,function(m){switch(m.label){case 0:g=this._pools[d]||[],h=this._poolState[d]||new f,m.label=1;case 1:return g.length?(v=g.pop(),this._removeIdleObserver&&this._removeIdleObserver(v),[4,this._destroy(v)]):[3,3];case 2:return m.sent(),[3,1];case 3:return h.close(),delete this._pools[d],delete this._poolState[d],[2]}})})},c.prototype._processPendingAcquireRequests=function(d){var g=this,h=d.asKey(),v=this._acquireRequests[h],m=this._poolState[h];if(v){var p=v.shift();p?this._acquire(d).catch(function(y){return p.reject(y),null}).then(function(y){y&&(p.isCompleted()?g._release(m,d,y):p.resolve(y))}):delete this._acquireRequests[h]}},c}();function a(c,d){var g=d[c]||0;d[c]=g+1}function l(c,d){var g=d[c]||0,h=g-1;h>0?d[c]=h:delete d[c]}var u=function(){function c(d,g,h,v,m){this._key=d,this._resolve=g,this._reject=h,this._timeoutId=v,this._log=m,this._completed=!1}return c.prototype.isCompleted=function(){return this._completed},c.prototype.resolve=function(d){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug(d+" acquired from the pool "+this._key),this._resolve(d))},c.prototype.reject=function(d){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(d))},c}(),f=function(){function c(){this._active=!0}return c.prototype.isActive=function(){return this._active},c.prototype.close=function(){this._active=!1},c}();return If.default=s,If}var IE;function qI(){return IE||(IE=1,function(n){var e=oe&&oe.__createBinding||(Object.create?function(a,l,u,f){f===void 0&&(f=u),Object.defineProperty(a,f,{enumerable:!0,get:function(){return l[u]}})}:function(a,l,u,f){f===void 0&&(f=u),a[f]=l[u]}),t=oe&&oe.__setModuleDefault||(Object.create?function(a,l){Object.defineProperty(a,"default",{enumerable:!0,value:l})}:function(a,l){a.default=l}),r=oe&&oe.__importStar||function(a){if(a&&a.__esModule)return a;var l={};if(a!=null)for(var u in a)u!=="default"&&Object.prototype.hasOwnProperty.call(a,u)&&e(l,a,u);return t(l,a),l},i=oe&&oe.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_MAX_SIZE=n.DEFAULT_ACQUISITION_TIMEOUT=n.PoolConfig=n.Pool=void 0;var o=r(VI());n.PoolConfig=o.default,Object.defineProperty(n,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return o.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(n,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return o.DEFAULT_MAX_SIZE}});var s=i(lre());n.Pool=s.default,n.default=s.default}(Nm)),Nm}var Mm={},Af={},AE;function HI(){if(AE)return Af;AE=1;var n=oe&&oe.__extends||function(){var r=function(i,o){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,a){s.__proto__=a}||function(s,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])},r(i,o)};return function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");r(i,o);function s(){this.constructor=i}i.prototype=o===null?Object.create(o):(s.prototype=o.prototype,new s)}}();Object.defineProperty(Af,"__esModule",{value:!0});var e=Mt(),t=function(r){n(i,r);function i(o){var s=r.call(this)||this;return s._connection=o,s}return i.prototype.acquireConnection=function(o){var s=o===void 0?{}:o;s.accessMode,s.database,s.bookmarks;var a=this._connection;return this._connection=null,Promise.resolve(a)},i}(e.ConnectionProvider);return Af.default=t,Af}var Rf={},Dm={},xf={},RE;function Ty(){if(RE)return xf;RE=1,Object.defineProperty(xf,"__esModule",{value:!0});var n=function(){function e(t){this._errorHandler=t}return Object.defineProperty(e.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),e.prototype.isOpen=function(){throw new Error("not implemented")},e.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(e.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),e.prototype.connect=function(t,r){throw new Error("not implemented")},e.prototype.write=function(t,r,i){throw new Error("not implemented")},e.prototype.resetAndFlush=function(){throw new Error("not implemented")},e.prototype.close=function(){throw new Error("not implemented")},e.prototype.handleAndTransformError=function(t,r){return this._errorHandler?this._errorHandler.handleAndTransformError(t,r):t},e}();return xf.default=n,xf}var ua={},xE;function ure(){if(xE)return ua;xE=1;var n=oe&&oe.__extends||function(){var h=function(v,m){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(p[b]=y[b])},h(v,m)};return function(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");h(v,m);function p(){this.constructor=v}v.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}}(),e=oe&&oe.__awaiter||function(h,v,m,p){function y(b){return b instanceof m?b:new m(function(_){_(b)})}return new(m||(m=Promise))(function(b,_){function w(P){try{E(p.next(P))}catch(R){_(R)}}function S(P){try{E(p.throw(P))}catch(R){_(R)}}function E(P){P.done?b(P.value):y(P.value).then(w,S)}E((p=p.apply(h,v||[])).next())})},t=oe&&oe.__generator||function(h,v){var m={label:0,sent:function(){if(b[0]&1)throw b[1];return b[1]},trys:[],ops:[]},p,y,b,_;return _={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function w(E){return function(P){return S([E,P])}}function S(E){if(p)throw new TypeError("Generator is already executing.");for(;m;)try{if(p=1,y&&(b=E[0]&2?y.return:E[0]?y.throw||((b=y.return)&&b.call(y),0):y.next)&&!(b=b.call(y,E[1])).done)return b;switch(y=0,b&&(E=[E[0]&2,b.value]),E[0]){case 0:case 1:b=E;break;case 4:return m.label++,{value:E[1],done:!1};case 5:m.label++,y=E[1],E=[0];continue;case 7:E=m.ops.pop(),m.trys.pop();continue;default:if(b=m.trys,!(b=b.length>0&&b[b.length-1])&&(E[0]===6||E[0]===2)){m=0;continue}if(E[0]===3&&(!b||E[1]>b[0]&&E[1]<b[3])){m.label=E[1];break}if(E[0]===6&&m.label<b[1]){m.label=b[1],b=E;break}if(b&&m.label<b[2]){m.label=b[2],m.ops.push(E);break}b[2]&&m.ops.pop(),m.trys.pop();continue}E=v.call(h,m)}catch(P){E=[6,P],y=0}finally{p=b=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},r=oe&&oe.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(ua,"__esModule",{value:!0}),ua.createChannelConnection=void 0;var i=uc(),o=Mt(),s=r(Ty()),a=r(ky()),l=o.error.PROTOCOL_ERROR,u=o.internal.logger.Logger,f=0;function c(h,v,m,p,y,b){y===void 0&&(y=null),b===void 0&&(b=function(S){return new i.Channel(S)});var _=new i.ChannelConfig(h,v,m.errorCode()),w=b(_);return a.default.handshake(w).then(function(S){var E=S.protocolVersion,P=S.consumeRemainingBuffer,R=new i.Chunker(w),j=new i.Dechunker,U=function(z){return a.default.create({version:E,channel:w,chunker:R,dechunker:j,disableLosslessIntegers:v.disableLosslessIntegers,useBigInt:v.useBigInt,serversideRouting:y,server:z.server,log:z.logger,observer:{onPendingObserversChange:z._handleOngoingRequestsNumberChange.bind(z),onError:z._handleFatalError.bind(z),onFailure:z._resetOnFailure.bind(z),onProtocolError:z._handleProtocolError.bind(z),onErrorApplyTransformation:function(D){return z.handleAndTransformError(D,z._address)}}})},F=new d(w,m,h,p,v.disableLosslessIntegers,y,R,U);return P(function(z){return j.write(z)}),F}).catch(function(S){return w.close().then(function(){throw S})})}ua.createChannelConnection=c;var d=function(h){n(v,h);function v(m,p,y,b,_,w,S,E){_===void 0&&(_=!1),w===void 0&&(w=null);var P=h.call(this,p)||this;return P._id=f++,P._address=y,P._server={address:y.asHostPort()},P.creationTimestamp=Date.now(),P._disableLosslessIntegers=_,P._ch=m,P._chunker=S,P._log=g(P,b),P._serversideRouting=w,P._dbConnectionId=null,P._protocol=E(P),P._isBroken=!1,P._log.isDebugEnabled()&&P._log.debug("created towards "+y),P}return Object.defineProperty(v.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(m){this._dbConnectionId=m},enumerable:!1,configurable:!0}),v.prototype.connect=function(m,p){return this._initialize(m,p)},v.prototype._initialize=function(m,p){var y=this,b=this;return new Promise(function(_,w){y._protocol.initialize({userAgent:m,authToken:p,onError:function(S){return w(S)},onComplete:function(S){if(S){var E=S.server;(!y.version||E)&&(y.version=E);var P=S.connection_id;if(y.databaseId||(y.databaseId=P),S.hints){var R=S.hints["connection.recv_timeout_seconds"];if(R!=null){var j=(0,o.toNumber)(R);Number.isInteger(j)&&j>0?y._ch.setupReceiveTimeout(j*1e3):y._log.info("Server located at "+y._address+" supplied an invalid connection receive timeout value ("+j+"). Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}}}_(b)}})})},v.prototype.protocol=function(){return this._protocol},Object.defineProperty(v.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"version",{get:function(){return this._server.version},set:function(m){this._server.version=m},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),v.prototype._handleFatalError=function(m){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||m,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by "+this._error+" ("+o.json.stringify(this._error)+")"),this._protocol.notifyFatalError(this._error)},v.prototype._queueObserver=function(m){return this._protocol.queueObserverIfProtocolIsNotBroken(m)},v.prototype.hasOngoingObservableRequests=function(){return this._protocol.hasOngoingObservableRequests()},v.prototype.resetAndFlush=function(){var m=this;return new Promise(function(p,y){m._protocol.reset({onError:function(b){if(m._isBroken)y(b);else{var _=m._handleProtocolError("Received FAILURE as a response for RESET: "+b);y(_)}},onComplete:function(){p()}})})},v.prototype._resetOnFailure=function(){var m=this;!this.isOpen()||this._protocol.reset({onError:function(){m._protocol.resetFailure()},onComplete:function(){m._protocol.resetFailure()}})},v.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},v.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},v.prototype._handleOngoingRequestsNumberChange=function(m){m===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout()},v.prototype.close=function(){return e(this,void 0,void 0,function(){return t(this,function(m){switch(m.label){case 0:return this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return m.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},v.prototype.toString=function(){return"Connection ["+this.id+"]["+(this.databaseId||"")+"]"},v.prototype._handleProtocolError=function(m){this._protocol.resetFailure(),this._updateCurrentObserver();var p=(0,o.newError)(m,l);return this._handleFatalError(p),p},v}(s.default);ua.default=d;function g(h,v){return new u(v._level,function(m,p){return v._loggerFunction(m,h+" "+p)})}return ua}var Nf={},NE;function cre(){if(NE)return Nf;NE=1;var n=oe&&oe.__extends||function(){var i=function(o,s){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,l){a.__proto__=l}||function(a,l){for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])},i(o,s)};return function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");i(o,s);function a(){this.constructor=o}o.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}}(),e=oe&&oe.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Nf,"__esModule",{value:!0});var t=e(Ty()),r=function(i){n(o,i);function o(s,a){var l=i.call(this,a)||this;return a&&(l._originalErrorHandler=s._errorHandler,s._errorHandler=l._errorHandler),l._delegate=s,l}return Object.defineProperty(o.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(s){this._delegate.databaseId=s},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"version",{get:function(){return this._delegate.version},set:function(s){this._delegate.version=s},enumerable:!1,configurable:!0}),o.prototype.isOpen=function(){return this._delegate.isOpen()},o.prototype.protocol=function(){return this._delegate.protocol()},o.prototype.connect=function(s,a){return this._delegate.connect(s,a)},o.prototype.write=function(s,a,l){return this._delegate.write(s,a,l)},o.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},o.prototype.close=function(){return this._delegate.close()},o.prototype._release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate._release()},o}(t.default);return Nf.default=r,Nf}var Mf={},ME;function fre(){if(ME)return Mf;ME=1,Object.defineProperty(Mf,"__esModule",{value:!0});var n=Mt(),e=n.error.SERVICE_UNAVAILABLE,t=n.error.SESSION_EXPIRED,r=function(){function l(u,f,c,d){this._errorCode=u,this._handleUnavailability=f||a,this._handleWriteFailure=c||a,this._handleAuthorizationExpired=d||a}return l.create=function(u){var f=u.errorCode,c=u.handleUnavailability,d=u.handleWriteFailure,g=u.handleAuthorizationExpired;return new l(f,c,d,g)},l.prototype.errorCode=function(){return this._errorCode},l.prototype.handleAndTransformError=function(u,f){return i(u)?this._handleAuthorizationExpired(u,f):o(u)?this._handleUnavailability(u,f):s(u)?this._handleWriteFailure(u,f):u},l}();Mf.default=r;function i(l){return l&&(l.code==="Neo.ClientError.Security.AuthorizationExpired"||l.code==="Neo.ClientError.Security.TokenExpired")}function o(l){return l?l.code===t||l.code===e||l.code==="Neo.TransientError.General.DatabaseUnavailable":!1}function s(l){return l?l.code==="Neo.ClientError.Cluster.NotALeader"||l.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase":!1}function a(l){return l}return Mf}var DE;function Py(){return DE||(DE=1,function(n){var e=oe&&oe.__createBinding||(Object.create?function(u,f,c,d){d===void 0&&(d=c),Object.defineProperty(u,d,{enumerable:!0,get:function(){return f[c]}})}:function(u,f,c,d){d===void 0&&(d=c),u[d]=f[c]}),t=oe&&oe.__setModuleDefault||(Object.create?function(u,f){Object.defineProperty(u,"default",{enumerable:!0,value:f})}:function(u,f){u.default=f}),r=oe&&oe.__importStar||function(u){if(u&&u.__esModule)return u;var f={};if(u!=null)for(var c in u)c!=="default"&&Object.prototype.hasOwnProperty.call(u,c)&&e(f,u,c);return t(f,u),f},i=oe&&oe.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(n,"__esModule",{value:!0}),n.createChannelConnection=n.ConnectionErrorHandler=n.DelegateConnection=n.ChannelConnection=n.Connection=void 0;var o=i(Ty());n.Connection=o.default;var s=r(ure());n.ChannelConnection=s.default,Object.defineProperty(n,"createChannelConnection",{enumerable:!0,get:function(){return s.createChannelConnection}});var a=i(cre());n.DelegateConnection=a.default;var l=i(fre());n.ConnectionErrorHandler=l.default,n.default=o.default}(Dm)),Dm}var jE;function Iy(){if(jE)return Rf;jE=1;var n=oe&&oe.__extends||function(){var c=function(d,g){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(h[m]=v[m])},c(d,g)};return function(d,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");c(d,g);function h(){this.constructor=d}d.prototype=g===null?Object.create(g):(h.prototype=g.prototype,new h)}}(),e=oe&&oe.__createBinding||(Object.create?function(c,d,g,h){h===void 0&&(h=g),Object.defineProperty(c,h,{enumerable:!0,get:function(){return d[g]}})}:function(c,d,g,h){h===void 0&&(h=g),c[h]=d[g]}),t=oe&&oe.__setModuleDefault||(Object.create?function(c,d){Object.defineProperty(c,"default",{enumerable:!0,value:d})}:function(c,d){c.default=d}),r=oe&&oe.__importStar||function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var g in c)g!=="default"&&Object.prototype.hasOwnProperty.call(c,g)&&e(d,c,g);return t(d,c),d},i=oe&&oe.__awaiter||function(c,d,g,h){function v(m){return m instanceof g?m:new g(function(p){p(m)})}return new(g||(g=Promise))(function(m,p){function y(w){try{_(h.next(w))}catch(S){p(S)}}function b(w){try{_(h.throw(w))}catch(S){p(S)}}function _(w){w.done?m(w.value):v(w.value).then(y,b)}_((h=h.apply(c,d||[])).next())})},o=oe&&oe.__generator||function(c,d){var g={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},h,v,m,p;return p={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function y(_){return function(w){return b([_,w])}}function b(_){if(h)throw new TypeError("Generator is already executing.");for(;g;)try{if(h=1,v&&(m=_[0]&2?v.return:_[0]?v.throw||((m=v.return)&&m.call(v),0):v.next)&&!(m=m.call(v,_[1])).done)return m;switch(v=0,m&&(_=[_[0]&2,m.value]),_[0]){case 0:case 1:m=_;break;case 4:return g.label++,{value:_[1],done:!1};case 5:g.label++,v=_[1],_=[0];continue;case 7:_=g.ops.pop(),g.trys.pop();continue;default:if(m=g.trys,!(m=m.length>0&&m[m.length-1])&&(_[0]===6||_[0]===2)){g=0;continue}if(_[0]===3&&(!m||_[1]>m[0]&&_[1]<m[3])){g.label=_[1];break}if(_[0]===6&&g.label<m[1]){g.label=m[1],m=_;break}if(m&&g.label<m[2]){g.label=m[2],g.ops.push(_);break}m[2]&&g.ops.pop(),g.trys.pop();continue}_=d.call(c,g)}catch(w){_=[6,w],v=0}finally{h=m=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}};Object.defineProperty(Rf,"__esModule",{value:!0});var s=Py(),a=r(qI()),l=Mt(),u=l.error.SERVICE_UNAVAILABLE,f=function(c){n(d,c);function d(g,h){var v=g.id,m=g.config,p=g.log,y=g.userAgent,b=g.authToken;h===void 0&&(h=null);var _=c.call(this)||this;return _._id=v,_._config=m,_._log=p,_._userAgent=y,_._authToken=b,_._createChannelConnection=h||function(w){return(0,s.createChannelConnection)(w,_._config,_._createConnectionErrorHandler(),_._log)},_._connectionPool=new a.default({create:_._createConnection.bind(_),destroy:_._destroyConnection.bind(_),validate:_._validateConnection.bind(_),installIdleObserver:d._installIdleObserverOnConnection.bind(_),removeIdleObserver:d._removeIdleObserverOnConnection.bind(_),config:a.PoolConfig.fromDriverConfig(m),log:_._log}),_._openConnections={},_}return d.prototype._createConnectionErrorHandler=function(){return new s.ConnectionErrorHandler(u)},d.prototype._createConnection=function(g,h){var v=this;return this._createChannelConnection(g).then(function(m){return m._release=function(){return h(g,m)},v._openConnections[m.id]=m,m.connect(v._userAgent,v._authToken).catch(function(p){throw v._destroyConnection(m),p})})},d.prototype._validateConnection=function(g){if(!g.isOpen())return!1;var h=this._config.maxConnectionLifetime,v=Date.now()-g.creationTimestamp;return v<=h},d.prototype._destroyConnection=function(g){return delete this._openConnections[g.id],g.close()},d.prototype.close=function(){return i(this,void 0,void 0,function(){return o(this,function(g){switch(g.label){case 0:return[4,this._connectionPool.close()];case 1:return g.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(h){return h.close()}))];case 2:return g.sent(),[2]}})})},d._installIdleObserverOnConnection=function(g,h){g._queueObserver(h)},d._removeIdleObserverOnConnection=function(g){g._updateCurrentObserver()},d}(l.ConnectionProvider);return Rf.default=f,Rf}var Df={},LE;function hre(){if(LE)return Df;LE=1;var n=oe&&oe.__extends||function(){var g=function(h,v){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var y in p)Object.prototype.hasOwnProperty.call(p,y)&&(m[y]=p[y])},g(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");g(h,v);function m(){this.constructor=h}h.prototype=v===null?Object.create(v):(m.prototype=v.prototype,new m)}}(),e=oe&&oe.__awaiter||function(g,h,v,m){function p(y){return y instanceof v?y:new v(function(b){b(y)})}return new(v||(v=Promise))(function(y,b){function _(E){try{S(m.next(E))}catch(P){b(P)}}function w(E){try{S(m.throw(E))}catch(P){b(P)}}function S(E){E.done?y(E.value):p(E.value).then(_,w)}S((m=m.apply(g,h||[])).next())})},t=oe&&oe.__generator||function(g,h){var v={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},m,p,y,b;return b={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function _(S){return function(E){return w([S,E])}}function w(S){if(m)throw new TypeError("Generator is already executing.");for(;v;)try{if(m=1,p&&(y=S[0]&2?p.return:S[0]?p.throw||((y=p.return)&&y.call(p),0):p.next)&&!(y=y.call(p,S[1])).done)return y;switch(p=0,y&&(S=[S[0]&2,y.value]),S[0]){case 0:case 1:y=S;break;case 4:return v.label++,{value:S[1],done:!1};case 5:v.label++,p=S[1],S=[0];continue;case 7:S=v.ops.pop(),v.trys.pop();continue;default:if(y=v.trys,!(y=y.length>0&&y[y.length-1])&&(S[0]===6||S[0]===2)){v=0;continue}if(S[0]===3&&(!y||S[1]>y[0]&&S[1]<y[3])){v.label=S[1];break}if(S[0]===6&&v.label<y[1]){v.label=y[1],y=S;break}if(y&&v.label<y[2]){v.label=y[2],v.ops.push(S);break}y[2]&&v.ops.pop(),v.trys.pop();continue}S=h.call(g,v)}catch(E){S=[6,E],p=0}finally{m=y=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}},r=oe&&oe.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(Df,"__esModule",{value:!0});var i=r(Iy()),o=Py(),s=Mt(),a=s.internal.constants,l=a.BOLT_PROTOCOL_V3,u=a.BOLT_PROTOCOL_V4_0,f=a.BOLT_PROTOCOL_V4_4,c=s.error.SERVICE_UNAVAILABLE;s.error.newError;var d=function(g){n(h,g);function h(v){var m=v.id,p=v.config,y=v.log,b=v.address,_=v.userAgent,w=v.authToken,S=g.call(this,{id:m,config:p,log:y,userAgent:_,authToken:w})||this;return S._address=b,S}return h.prototype.acquireConnection=function(v){var m=this,p=v===void 0?{}:v;p.accessMode;var y=p.database;p.bookmarks;var b=o.ConnectionErrorHandler.create({errorCode:c,handleAuthorizationExpired:function(_,w){return m._handleAuthorizationExpired(_,w,y)}});return this._connectionPool.acquire(this._address).then(function(_){return new o.DelegateConnection(_,b)})},h.prototype._handleAuthorizationExpired=function(v,m,p){return this._log.warn("Direct driver "+this._id+" will close connection to "+m+" for database '"+p+"' because of an error "+v.code+" '"+v.message+"'"),this._connectionPool.purge(m).catch(function(){}),v},h.prototype._hasProtocolVersion=function(v){return e(this,void 0,void 0,function(){var m,p;return t(this,function(y){switch(y.label){case 0:return[4,(0,o.createChannelConnection)(this._address,this._config,this._createConnectionErrorHandler(),this._log)];case 1:return m=y.sent(),p=m.protocol()?m.protocol().version:null,[4,m.close()];case 2:return y.sent(),p?[2,v(p)]:[2,!1]}})})},h.prototype.supportsMultiDb=function(){return e(this,void 0,void 0,function(){return t(this,function(v){switch(v.label){case 0:return[4,this._hasProtocolVersion(function(m){return m>=u})];case 1:return[2,v.sent()]}})})},h.prototype.supportsTransactionConfig=function(){return e(this,void 0,void 0,function(){return t(this,function(v){switch(v.label){case 0:return[4,this._hasProtocolVersion(function(m){return m>=l})];case 1:return[2,v.sent()]}})})},h.prototype.supportsUserImpersonation=function(){return e(this,void 0,void 0,function(){return t(this,function(v){switch(v.label){case 0:return[4,this._hasProtocolVersion(function(m){return m>=f})];case 1:return[2,v.sent()]}})})},h}(i.default);return Df.default=d,Df}var jf={},Po={},Lf={},ca={},BE;function zI(){if(BE)return ca;BE=1;var n=oe&&oe.__read||function(m,p){var y=typeof Symbol=="function"&&m[Symbol.iterator];if(!y)return m;var b=y.call(m),_,w=[],S;try{for(;(p===void 0||p-- >0)&&!(_=b.next()).done;)w.push(_.value)}catch(E){S={error:E}}finally{try{_&&!_.done&&(y=b.return)&&y.call(b)}finally{if(S)throw S.error}}return w},e=oe&&oe.__spreadArray||function(m,p,y){if(y||arguments.length===2)for(var b=0,_=p.length,w;b<_;b++)(w||!(b in p))&&(w||(w=Array.prototype.slice.call(p,0,b)),w[b]=p[b]);return m.concat(w||Array.prototype.slice.call(p))};Object.defineProperty(ca,"__esModule",{value:!0}),ca.createValidRoutingTable=void 0;var t=Mt(),r=t.internal.constants,i=r.ACCESS_MODE_WRITE,o=r.ACCESS_MODE_READ,s=t.internal.serverAddress.ServerAddress,a=t.error.PROTOCOL_ERROR,l=1,u=function(){function m(p){var y=p===void 0?{}:p,b=y.database,_=y.routers,w=y.readers,S=y.writers,E=y.expirationTime,P=y.ttl;this.database=b||null,this.databaseName=b||"default database",this.routers=_||[],this.readers=w||[],this.writers=S||[],this.expirationTime=E||(0,t.int)(0),this.ttl=P}return m.fromRawRoutingTable=function(p,y,b){return c(p,y,b)},m.prototype.forget=function(p){this.readers=f(this.readers,p),this.writers=f(this.writers,p)},m.prototype.forgetRouter=function(p){this.routers=f(this.routers,p)},m.prototype.forgetWriter=function(p){this.writers=f(this.writers,p)},m.prototype.isStaleFor=function(p){return this.expirationTime.lessThan(Date.now())||this.routers.length<l||p===o&&this.readers.length===0||p===i&&this.writers.length===0},m.prototype.isExpiredFor=function(p){return this.expirationTime.add(p).lessThan(Date.now())},m.prototype.allServers=function(){return e(e(e([],n(this.routers),!1),n(this.readers),!1),n(this.writers),!1)},m.prototype.toString=function(){return"RoutingTable["+("database="+this.databaseName+", ")+("expirationTime="+this.expirationTime+", ")+("currentTime="+Date.now()+", ")+("routers=["+this.routers+"], ")+("readers=["+this.readers+"], ")+("writers=["+this.writers+"]]")},m}();ca.default=u;function f(m,p){return m.filter(function(y){return y.asKey()!==p.asKey()})}function c(m,p,y){var b=y.ttl,_=g(y,p),w=d(y,p),S=w.routers,E=w.readers,P=w.writers;return h(S,"routers",p),h(E,"readers",p),new u({database:m||y.db,routers:S,readers:E,writers:P,expirationTime:_,ttl:b})}ca.createValidRoutingTable=c;function d(m,p){try{var y=[],b=[],_=[];return m.servers.forEach(function(w){var S=w.role,E=w.addresses;S==="ROUTE"?y=v(E).map(function(P){return s.fromUrl(P)}):S==="WRITE"?_=v(E).map(function(P){return s.fromUrl(P)}):S==="READ"&&(b=v(E).map(function(P){return s.fromUrl(P)}))}),{routers:y,readers:b,writers:_}}catch(w){throw(0,t.newError)("Unable to parse servers entry from router "+p+` from addresses:
`+t.json.stringify(m.servers)+`
Error message: `+w.message,a)}}function g(m,p){try{var y=(0,t.int)(Date.now()),b=(0,t.int)(m.ttl).multiply(1e3).add(y);return b.lessThan(y)?t.Integer.MAX_VALUE:b}catch(_){throw(0,t.newError)("Unable to parse TTL entry from router "+p+` from raw routing table:
`+t.json.stringify(m)+`
Error message: `+_.message,a)}}function h(m,p,y){if(m.length===0)throw(0,t.newError)("Received no "+p+" from router "+y,a)}function v(m){if(!Array.isArray(m))throw new TypeError("Array expected but got: "+m);return Array.from(m)}return ca}var FE;function dre(){if(FE)return Lf;FE=1;var n=oe&&oe.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Lf,"__esModule",{value:!0});var e=n(zI()),t=ky(),r=Mt(),i=r.error.SERVICE_UNAVAILABLE,o="Neo.ClientError.Procedure.ProcedureNotFound",s="Neo.ClientError.Database.DatabaseNotFound",a=function(){function l(u){this._routingContext=u}return l.prototype.lookupRoutingTableOnRouter=function(u,f,c,d){var g=this;return u._acquireConnection(function(h){return g._requestRawRoutingTable(h,u,f,c,d).then(function(v){return v.isNull?null:e.default.fromRawRoutingTable(f,c,v)})})},l.prototype._requestRawRoutingTable=function(u,f,c,d,g){var h=this;return new Promise(function(v,m){u.protocol().requestRoutingInformation({routingContext:h._routingContext,databaseName:c,impersonatedUser:g,sessionContext:{bookmark:f._lastBookmark,mode:f._mode,database:f._database,afterComplete:f._onComplete},onCompleted:v,onError:function(p){p.code===s?m(p):p.code===o?m((0,r.newError)("Server at "+d.asHostPort()+" can't perform routing. Make sure you are connecting to a causal cluster",i)):v(t.RawRoutingTable.ofNull())}})})},l}();return Lf.default=a,Lf}var UE;function pre(){if(UE)return Po;UE=1;var n=oe&&oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Po,"__esModule",{value:!0}),Po.RoutingTable=Po.Rediscovery=void 0;var e=n(dre());Po.Rediscovery=e.default;var t=n(zI());return Po.RoutingTable=t.default,Po.default=e.default,Po}var VE;function mre(){if(VE)return jf;VE=1;var n=oe&&oe.__extends||function(){var X=function(Q,A){return X=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,V){k.__proto__=V}||function(k,V){for(var K in V)Object.prototype.hasOwnProperty.call(V,K)&&(k[K]=V[K])},X(Q,A)};return function(Q,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");X(Q,A);function k(){this.constructor=Q}Q.prototype=A===null?Object.create(A):(k.prototype=A.prototype,new k)}}(),e=oe&&oe.__assign||function(){return e=Object.assign||function(X){for(var Q,A=1,k=arguments.length;A<k;A++){Q=arguments[A];for(var V in Q)Object.prototype.hasOwnProperty.call(Q,V)&&(X[V]=Q[V])}return X},e.apply(this,arguments)},t=oe&&oe.__createBinding||(Object.create?function(X,Q,A,k){k===void 0&&(k=A),Object.defineProperty(X,k,{enumerable:!0,get:function(){return Q[A]}})}:function(X,Q,A,k){k===void 0&&(k=A),X[k]=Q[A]}),r=oe&&oe.__setModuleDefault||(Object.create?function(X,Q){Object.defineProperty(X,"default",{enumerable:!0,value:Q})}:function(X,Q){X.default=Q}),i=oe&&oe.__importStar||function(X){if(X&&X.__esModule)return X;var Q={};if(X!=null)for(var A in X)A!=="default"&&Object.prototype.hasOwnProperty.call(X,A)&&t(Q,X,A);return r(Q,X),Q},o=oe&&oe.__awaiter||function(X,Q,A,k){function V(K){return K instanceof A?K:new A(function(H){H(K)})}return new(A||(A=Promise))(function(K,H){function I(q){try{G(k.next(q))}catch(W){H(W)}}function M(q){try{G(k.throw(q))}catch(W){H(W)}}function G(q){q.done?K(q.value):V(q.value).then(I,M)}G((k=k.apply(X,Q||[])).next())})},s=oe&&oe.__generator||function(X,Q){var A={label:0,sent:function(){if(K[0]&1)throw K[1];return K[1]},trys:[],ops:[]},k,V,K,H;return H={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(H[Symbol.iterator]=function(){return this}),H;function I(G){return function(q){return M([G,q])}}function M(G){if(k)throw new TypeError("Generator is already executing.");for(;A;)try{if(k=1,V&&(K=G[0]&2?V.return:G[0]?V.throw||((K=V.return)&&K.call(V),0):V.next)&&!(K=K.call(V,G[1])).done)return K;switch(V=0,K&&(G=[G[0]&2,K.value]),G[0]){case 0:case 1:K=G;break;case 4:return A.label++,{value:G[1],done:!1};case 5:A.label++,V=G[1],G=[0];continue;case 7:G=A.ops.pop(),A.trys.pop();continue;default:if(K=A.trys,!(K=K.length>0&&K[K.length-1])&&(G[0]===6||G[0]===2)){A=0;continue}if(G[0]===3&&(!K||G[1]>K[0]&&G[1]<K[3])){A.label=G[1];break}if(G[0]===6&&A.label<K[1]){A.label=K[1],K=G;break}if(K&&A.label<K[2]){A.label=K[2],A.ops.push(G);break}K[2]&&A.ops.pop(),A.trys.pop();continue}G=Q.call(X,A)}catch(q){G=[6,q],V=0}finally{k=K=0}if(G[0]&5)throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}},a=oe&&oe.__values||function(X){var Q=typeof Symbol=="function"&&Symbol.iterator,A=Q&&X[Q],k=0;if(A)return A.call(X);if(X&&typeof X.length=="number")return{next:function(){return X&&k>=X.length&&(X=void 0),{value:X&&X[k++],done:!X}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")},l=oe&&oe.__read||function(X,Q){var A=typeof Symbol=="function"&&X[Symbol.iterator];if(!A)return X;var k=A.call(X),V,K=[],H;try{for(;(Q===void 0||Q-- >0)&&!(V=k.next()).done;)K.push(V.value)}catch(I){H={error:I}}finally{try{V&&!V.done&&(A=k.return)&&A.call(k)}finally{if(H)throw H.error}}return K},u=oe&&oe.__importDefault||function(X){return X&&X.__esModule?X:{default:X}};Object.defineProperty(jf,"__esModule",{value:!0});var f=Mt(),c=i(pre()),d=uc(),g=u(HI()),h=u(Iy()),v=AI(),m=Py(),p=f.error.SERVICE_UNAVAILABLE,y=f.error.SESSION_EXPIRED,b=f.internal.bookmark.Bookmark,_=f.internal.constants,w=_.ACCESS_MODE_READ,S=_.ACCESS_MODE_WRITE,E=_.BOLT_PROTOCOL_V3,P=_.BOLT_PROTOCOL_V4_0,R=_.BOLT_PROTOCOL_V4_4,j="Neo.ClientError.Security.Unauthorized",U="Neo.ClientError.Database.DatabaseNotFound",F="system",z=null,D=(0,f.int)(3e4),N=function(X){n(Q,X);function Q(A){var k=A.id,V=A.address,K=A.routingContext,H=A.hostNameResolver,I=A.config,M=A.log,G=A.userAgent,q=A.authToken,W=A.routingTablePurgeDelay,ae=X.call(this,{id:k,config:I,log:M,userAgent:G,authToken:q},function(le){return(0,m.createChannelConnection)(le,ae._config,ae._createConnectionErrorHandler(),ae._log,ae._routingContext)})||this;return ae._routingContext=e(e({},K),{address:V.toString()}),ae._seedRouter=V,ae._rediscovery=new c.default(ae._routingContext),ae._loadBalancingStrategy=new v.LeastConnectedLoadBalancingStrategy(ae._connectionPool),ae._hostNameResolver=H,ae._dnsResolver=new d.HostNameResolver,ae._log=M,ae._useSeedRouter=!0,ae._routingTableRegistry=new L(W?(0,f.int)(W):D),ae}return Q.prototype._createConnectionErrorHandler=function(){return new m.ConnectionErrorHandler(y)},Q.prototype._handleUnavailability=function(A,k,V){return this._log.warn("Routing driver "+this._id+" will forget "+k+" for database '"+V+"' because of an error "+A.code+" '"+A.message+"'"),this.forget(k,V||z),A},Q.prototype._handleAuthorizationExpired=function(A,k,V){return this._log.warn("Routing driver "+this._id+" will close connections to "+k+" for database '"+V+"' because of an error "+A.code+" '"+A.message+"'"),this._connectionPool.purge(k).catch(function(){}),A},Q.prototype._handleWriteFailure=function(A,k,V){return this._log.warn("Routing driver "+this._id+" will forget writer "+k+" for database '"+V+"' because of an error "+A.code+" '"+A.message+"'"),this.forgetWriter(k,V||z),(0,f.newError)("No longer possible to write to server at "+k,y)},Q.prototype.acquireConnection=function(A){var k=A===void 0?{}:A,V=k.accessMode,K=k.database,H=k.bookmarks,I=k.impersonatedUser,M=k.onDatabaseNameResolved;return o(this,void 0,void 0,function(){var G,q,W,ae,le,Pe,Ve,Ae,ye=this;return s(this,function(Ne){switch(Ne.label){case 0:return W={database:K||z},ae=new m.ConnectionErrorHandler(y,function(xe,he){return ye._handleUnavailability(xe,he,W.database)},function(xe,he){return ye._handleWriteFailure(xe,he,W.database)},function(xe,he){return ye._handleAuthorizationExpired(xe,he,W.database)}),[4,this._freshRoutingTable({accessMode:V,database:W.database,bookmark:H,impersonatedUser:I,onDatabaseNameResolved:function(xe){W.database=W.database||xe,M&&M(xe)}})];case 1:if(le=Ne.sent(),V===w)q=this._loadBalancingStrategy.selectReader(le.readers),G="read";else if(V===S)q=this._loadBalancingStrategy.selectWriter(le.writers),G="write";else throw(0,f.newError)("Illegal mode "+V);if(!q)throw(0,f.newError)("Failed to obtain connection towards "+G+" server. Known routing table is: "+le,y);Ne.label=2;case 2:return Ne.trys.push([2,4,,5]),[4,this._acquireConnectionToServer(q,G,le)];case 3:return Pe=Ne.sent(),[2,new m.DelegateConnection(Pe,ae)];case 4:throw Ve=Ne.sent(),Ae=ae.handleAndTransformError(Ve,q),Ae;case 5:return[2]}})})},Q.prototype._hasProtocolVersion=function(A){return o(this,void 0,void 0,function(){var k,V,K,H,I,M;return s(this,function(G){switch(G.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:k=G.sent(),K=0,G.label=2;case 2:if(!(K<k.length))return[3,8];G.label=3;case 3:return G.trys.push([3,6,,7]),[4,(0,m.createChannelConnection)(k[K],this._config,this._createConnectionErrorHandler(),this._log)];case 4:return H=G.sent(),I=H.protocol()?H.protocol().version:null,[4,H.close()];case 5:return G.sent(),I?[2,A(I)]:[2,!1];case 6:return M=G.sent(),V=M,[3,7];case 7:return K++,[3,2];case 8:if(V)throw V;return[2,!1]}})})},Q.prototype.supportsMultiDb=function(){return o(this,void 0,void 0,function(){return s(this,function(A){switch(A.label){case 0:return[4,this._hasProtocolVersion(function(k){return k>=P})];case 1:return[2,A.sent()]}})})},Q.prototype.supportsTransactionConfig=function(){return o(this,void 0,void 0,function(){return s(this,function(A){switch(A.label){case 0:return[4,this._hasProtocolVersion(function(k){return k>=E})];case 1:return[2,A.sent()]}})})},Q.prototype.supportsUserImpersonation=function(){return o(this,void 0,void 0,function(){return s(this,function(A){switch(A.label){case 0:return[4,this._hasProtocolVersion(function(k){return k>=R})];case 1:return[2,A.sent()]}})})},Q.prototype.forget=function(A,k){this._routingTableRegistry.apply(k,{applyWhenExists:function(V){return V.forget(A)}}),this._connectionPool.purge(A).catch(function(){})},Q.prototype.forgetWriter=function(A,k){this._routingTableRegistry.apply(k,{applyWhenExists:function(V){return V.forgetWriter(A)}})},Q.prototype._acquireConnectionToServer=function(A,k,V){return this._connectionPool.acquire(A)},Q.prototype._freshRoutingTable=function(A){var k=A===void 0?{}:A,V=k.accessMode,K=k.database,H=k.bookmark,I=k.impersonatedUser,M=k.onDatabaseNameResolved,G=this._routingTableRegistry.get(K,function(){return new c.RoutingTable({database:K})});return G.isStaleFor(V)?(this._log.info('Routing table is stale for database: "'+K+'" and access mode: "'+V+'": '+G),this._refreshRoutingTable(G,H,I,M)):G},Q.prototype._refreshRoutingTable=function(A,k,V,K){var H=A.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(H,A,k,V,K):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(H,A,k,V,K)},Q.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(A,k,V,K,H){return o(this,void 0,void 0,function(){var I,M;return s(this,function(G){switch(G.label){case 0:return I=[],[4,this._fetchRoutingTableUsingSeedRouter(I,this._seedRouter,k,V,K)];case 1:return M=G.sent(),M?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(A,k,V,K)];case 3:M=G.sent(),G.label=4;case 4:return[4,this._applyRoutingTableIfPossible(k,M,H)];case 5:return[2,G.sent()]}})})},Q.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(A,k,V,K,H){return o(this,void 0,void 0,function(){var I;return s(this,function(M){switch(M.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(A,k,V,K)];case 1:return I=M.sent(),I?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(A,this._seedRouter,k,V,K)];case 2:I=M.sent(),M.label=3;case 3:return[4,this._applyRoutingTableIfPossible(k,I,H)];case 4:return[2,M.sent()]}})})},Q.prototype._fetchRoutingTableUsingKnownRouters=function(A,k,V,K){return o(this,void 0,void 0,function(){var H,I;return s(this,function(M){switch(M.label){case 0:return[4,this._fetchRoutingTable(A,k,V,K)];case 1:return H=M.sent(),H?[2,H]:(I=A.length-1,Q._forgetRouter(k,A,I),[2,null])}})})},Q.prototype._fetchRoutingTableUsingSeedRouter=function(A,k,V,K,H){return o(this,void 0,void 0,function(){var I,M;return s(this,function(G){switch(G.label){case 0:return[4,this._resolveSeedRouter(k)];case 1:return I=G.sent(),M=I.filter(function(q){return A.indexOf(q)<0}),[4,this._fetchRoutingTable(M,V,K,H)];case 2:return[2,G.sent()]}})})},Q.prototype._resolveSeedRouter=function(A){return o(this,void 0,void 0,function(){var k,V,K=this;return s(this,function(H){switch(H.label){case 0:return[4,this._hostNameResolver.resolve(A)];case 1:return k=H.sent(),[4,Promise.all(k.map(function(I){return K._dnsResolver.resolve(I)}))];case 2:return V=H.sent(),[2,[].concat.apply([],V)]}})})},Q.prototype._fetchRoutingTable=function(A,k,V,K){var H=this;return A.reduce(function(I,M,G){return o(H,void 0,void 0,function(){var q,W,ae,le;return s(this,function(Pe){switch(Pe.label){case 0:return[4,I];case 1:return q=Pe.sent(),q?[2,q]:(W=G-1,Q._forgetRouter(k,A,W),[4,this._createSessionForRediscovery(M,V,K)]);case 2:if(ae=Pe.sent(),!ae)return[3,8];Pe.label=3;case 3:return Pe.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(ae,k.database,M,K)];case 4:return[2,Pe.sent()];case 5:if(le=Pe.sent(),le&&le.code===U)throw le;return this._log.warn("unable to fetch routing table because of an error "+le),[2,null];case 6:return ae.close(),[7];case 7:return[3,9];case 8:return[2,null];case 9:return[2]}})})},Promise.resolve(null))},Q.prototype._createSessionForRediscovery=function(A,k,V){return o(this,void 0,void 0,function(){var K,H,I,M,G,q=this;return s(this,function(W){switch(W.label){case 0:return W.trys.push([0,2,,3]),[4,this._connectionPool.acquire(A)];case 1:return K=W.sent(),H=m.ConnectionErrorHandler.create({errorCode:y,handleAuthorizationExpired:function(ae,le){return q._handleAuthorizationExpired(ae,le)}}),I=new g.default(new m.DelegateConnection(K,H)),M=K.protocol().version,M<4?[2,new f.Session({mode:S,bookmark:b.empty(),connectionProvider:I})]:[2,new f.Session({mode:w,database:F,bookmark:k,connectionProvider:I,impersonatedUser:V})];case 2:if(G=W.sent(),G&&G.code===j)throw G;return[2,null];case 3:return[2]}})})},Q.prototype._applyRoutingTableIfPossible=function(A,k,V){return o(this,void 0,void 0,function(){return s(this,function(K){switch(K.label){case 0:if(!k)throw(0,f.newError)("Could not perform discovery. No routing servers available. Known routing table: "+A,p);return k.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(k,V)];case 1:return K.sent(),[2,k]}})})},Q.prototype._updateRoutingTable=function(A,k){return o(this,void 0,void 0,function(){return s(this,function(V){switch(V.label){case 0:return[4,this._connectionPool.keepAll(A.allServers())];case 1:return V.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(A),k(A.database),this._log.info("Updated routing table "+A),[2]}})})},Q._forgetRouter=function(A,k,V){var K=k[V];A&&K&&A.forgetRouter(K)},Q}(h.default);jf.default=N;var L=function(){function X(Q){this._tables=new Map,this._routingTablePurgeDelay=Q}return X.prototype.register=function(Q){return this._tables.set(Q.database,Q),this},X.prototype.apply=function(Q,A){var k=A===void 0?{}:A,V=k.applyWhenExists,K=k.applyWhenDontExists,H=K===void 0?function(){}:K;return this._tables.has(Q)?V(this._tables.get(Q)):typeof Q=="string"||Q===null?H():this._forEach(V),this},X.prototype.get=function(Q,A){return this._tables.has(Q)?this._tables.get(Q):typeof A=="function"?A():A},X.prototype.removeExpired=function(){var Q=this;return this._removeIf(function(A){return A.isExpiredFor(Q._routingTablePurgeDelay)})},X.prototype._forEach=function(Q){var A,k;try{for(var V=a(this._tables),K=V.next();!K.done;K=V.next()){var H=l(K.value,2),I=H[1];Q(I)}}catch(M){A={error:M}}finally{try{K&&!K.done&&(k=V.return)&&k.call(V)}finally{if(A)throw A.error}}return this},X.prototype._remove=function(Q){return this._tables.delete(Q),this},X.prototype._removeIf=function(Q){var A,k;try{for(var V=a(this._tables),K=V.next();!K.done;K=V.next()){var H=l(K.value,2),I=H[0],M=H[1];Q(M)&&this._remove(I)}}catch(G){A={error:G}}finally{try{K&&!K.done&&(k=V.return)&&k.call(V)}finally{if(A)throw A.error}}return this},X}();return jf}var qE;function gre(){return qE||(qE=1,function(n){var e=oe&&oe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(n,"__esModule",{value:!0}),n.RoutingConnectionProvider=n.DirectConnectionProvider=n.PooledConnectionProvider=n.SingleConnectionProvider=void 0;var t=HI();Object.defineProperty(n,"SingleConnectionProvider",{enumerable:!0,get:function(){return e(t).default}});var r=Iy();Object.defineProperty(n,"PooledConnectionProvider",{enumerable:!0,get:function(){return e(r).default}});var i=hre();Object.defineProperty(n,"DirectConnectionProvider",{enumerable:!0,get:function(){return e(i).default}});var o=mre();Object.defineProperty(n,"RoutingConnectionProvider",{enumerable:!0,get:function(){return e(o).default}})}(Mm)),Mm}var HE;function vre(){return HE||(HE=1,function(n){var e=oe&&oe.__createBinding||(Object.create?function(o,s,a,l){l===void 0&&(l=a),Object.defineProperty(o,l,{enumerable:!0,get:function(){return s[a]}})}:function(o,s,a,l){l===void 0&&(l=a),o[l]=s[a]}),t=oe&&oe.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),r=oe&&oe.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var a in o)a!=="default"&&Object.prototype.hasOwnProperty.call(o,a)&&e(s,o,a);return t(s,o),s},i=oe&&oe.__exportStar||function(o,s){for(var a in o)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,o,a)};Object.defineProperty(n,"__esModule",{value:!0}),n.pool=n.packstream=n.channel=n.buf=n.bolt=n.loadBalancing=void 0,n.loadBalancing=r(AI()),n.bolt=r(ky()),n.buf=r(Sy()),n.channel=r(uc()),n.packstream=r(Ey()),n.pool=r(qI()),i(gre(),n)}(Tm)),Tm}(function(n){var e=Xs.exports;Object.defineProperty(n,"__esModule",{value:!0}),n.driver=v,Object.defineProperty(n,"Driver",{enumerable:!0,get:function(){return t.Driver}}),Object.defineProperty(n,"Neo4jError",{enumerable:!0,get:function(){return i.Neo4jError}}),Object.defineProperty(n,"error",{enumerable:!0,get:function(){return i.error}}),Object.defineProperty(n,"Integer",{enumerable:!0,get:function(){return i.Integer}}),Object.defineProperty(n,"int",{enumerable:!0,get:function(){return i.int}}),Object.defineProperty(n,"isInt",{enumerable:!0,get:function(){return i.isInt}}),Object.defineProperty(n,"isPoint",{enumerable:!0,get:function(){return i.isPoint}}),Object.defineProperty(n,"Point",{enumerable:!0,get:function(){return i.Point}}),Object.defineProperty(n,"Date",{enumerable:!0,get:function(){return i.Date}}),Object.defineProperty(n,"DateTime",{enumerable:!0,get:function(){return i.DateTime}}),Object.defineProperty(n,"Duration",{enumerable:!0,get:function(){return i.Duration}}),Object.defineProperty(n,"isDate",{enumerable:!0,get:function(){return i.isDate}}),Object.defineProperty(n,"isDateTime",{enumerable:!0,get:function(){return i.isDateTime}}),Object.defineProperty(n,"isDuration",{enumerable:!0,get:function(){return i.isDuration}}),Object.defineProperty(n,"isLocalDateTime",{enumerable:!0,get:function(){return i.isLocalDateTime}}),Object.defineProperty(n,"isLocalTime",{enumerable:!0,get:function(){return i.isLocalTime}}),Object.defineProperty(n,"isTime",{enumerable:!0,get:function(){return i.isTime}}),Object.defineProperty(n,"LocalDateTime",{enumerable:!0,get:function(){return i.LocalDateTime}}),Object.defineProperty(n,"LocalTime",{enumerable:!0,get:function(){return i.LocalTime}}),Object.defineProperty(n,"Time",{enumerable:!0,get:function(){return i.Time}}),Object.defineProperty(n,"Node",{enumerable:!0,get:function(){return i.Node}}),Object.defineProperty(n,"Path",{enumerable:!0,get:function(){return i.Path}}),Object.defineProperty(n,"PathSegment",{enumerable:!0,get:function(){return i.PathSegment}}),Object.defineProperty(n,"Relationship",{enumerable:!0,get:function(){return i.Relationship}}),Object.defineProperty(n,"UnboundRelationship",{enumerable:!0,get:function(){return i.UnboundRelationship}}),Object.defineProperty(n,"Record",{enumerable:!0,get:function(){return i.Record}}),Object.defineProperty(n,"ResultSummary",{enumerable:!0,get:function(){return i.ResultSummary}}),Object.defineProperty(n,"Plan",{enumerable:!0,get:function(){return i.Plan}}),Object.defineProperty(n,"ProfiledPlan",{enumerable:!0,get:function(){return i.ProfiledPlan}}),Object.defineProperty(n,"QueryStatistics",{enumerable:!0,get:function(){return i.QueryStatistics}}),Object.defineProperty(n,"Notification",{enumerable:!0,get:function(){return i.Notification}}),Object.defineProperty(n,"ServerInfo",{enumerable:!0,get:function(){return i.ServerInfo}}),Object.defineProperty(n,"Result",{enumerable:!0,get:function(){return i.Result}}),Object.defineProperty(n,"auth",{enumerable:!0,get:function(){return i.auth}}),Object.defineProperty(n,"Session",{enumerable:!0,get:function(){return i.Session}}),Object.defineProperty(n,"Transaction",{enumerable:!0,get:function(){return i.Transaction}}),Object.defineProperty(n,"RxSession",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(n,"RxTransaction",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(n,"RxResult",{enumerable:!0,get:function(){return l.default}}),n.default=n.temporal=n.spatial=n.session=n.types=n.logging=n.integer=void 0;var t=P3,r=e(qne()),i=Mt(),o=vre(),s=e(PI()),a=e(TI()),l=e(by()),u=i.internal.util,f=u.ENCRYPTION_ON;u.ENCRYPTION_OFF;var c=u.assertString,d=u.isEmptyObjectOrNull,g=i.internal.serverAddress.ServerAddress,h=i.internal.urlUtil;function v(R,j){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};c(R,"Bolt URL");var F=h.parseDatabaseUrl(R),z=!1,D=!1,N;switch(F.scheme){case"bolt":break;case"bolt+s":D=!0,N="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":D=!0,N="TRUST_ALL_CERTIFICATES";break;case"neo4j":z=!0;break;case"neo4j+s":D=!0,N="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",z=!0;break;case"neo4j+ssc":D=!0,N="TRUST_ALL_CERTIFICATES",z=!0;break;default:throw new Error("Unknown scheme: ".concat(F.scheme))}if(D){if("encrypted"in U||"trust"in U)throw new Error("Encryption/trust can only be configured either through URL or config, not both");U.encrypted=f,U.trust=N}j=j||{},j.scheme=j.scheme||"none",U.userAgent=U.userAgent||m;var L=g.fromUrl(F.hostAndPort),X={address:L,typename:z?"Routing":"Direct",routing:z};return new t.Driver(X,U,Q());function Q(){if(z)return function(A,k,V,K){return new o.RoutingConnectionProvider({id:A,config:k,log:V,hostNameResolver:K,authToken:j,address:L,userAgent:k.userAgent,routingContext:F.query})};if(!d(F.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(R,"'"));return function(A,k,V){return new o.DirectConnectionProvider({id:A,config:k,log:V,authToken:j,address:L,userAgent:k.userAgent})}}}var m="neo4j-javascript/"+r.default,p={console:function(R){function j(U){return R.apply(this,arguments)}return j.toString=function(){return R.toString()},j}(function(R){return{level:R,logger:function(U,F){return console.log("".concat(oe.Date.now()," ").concat(U.toUpperCase()," ").concat(F))}}})};n.logging=p;var y={Node:i.Node,Relationship:i.Relationship,UnboundRelationship:i.UnboundRelationship,PathSegment:i.PathSegment,Path:i.Path,Result:i.Result,ResultSummary:i.ResultSummary,Record:i.Record,Point:i.Point,Date:i.Date,DateTime:i.DateTime,Duration:i.Duration,LocalDateTime:i.LocalDateTime,LocalTime:i.LocalTime,Time:i.Time,Integer:i.Integer};n.types=y;var b={READ:t.READ,WRITE:t.WRITE};n.session=b;var _={toNumber:i.toNumber,toString:i.toString,inSafeRange:i.inSafeRange};n.integer=_;var w={isPoint:i.isPoint};n.spatial=w;var S={isDuration:i.isDuration,isLocalTime:i.isLocalTime,isTime:i.isTime,isDate:i.isDate,isLocalDateTime:i.isLocalDateTime,isDateTime:i.isDateTime};n.temporal=S;var E={driver:v,int:i.int,isInt:i.isInt,isPoint:i.isPoint,isDuration:i.isDuration,isLocalTime:i.isLocalTime,isTime:i.isTime,isDate:i.isDate,isLocalDateTime:i.isLocalDateTime,isDateTime:i.isDateTime,integer:_,Neo4jError:i.Neo4jError,auth:i.auth,logging:p,types:y,session:b,error:i.error,spatial:w,temporal:S,Driver:t.Driver,Session:i.Session,Transaction:i.Transaction,Result:i.Result,RxSession:s.default,RxTransaction:a.default,RxResult:l.default,ResultSummary:i.ResultSummary,Plan:i.Plan,ProfiledPlan:i.ProfiledPlan,QueryStatistics:i.QueryStatistics,Notification:i.Notification,ServerInfo:i.ServerInfo,Record:i.Record,Node:i.Node,Relationship:i.Relationship,UnboundRelationship:i.UnboundRelationship,Path:i.Path,PathSegment:i.PathSegment,Point:i.Point,Integer:i.Integer,Duration:i.Duration,LocalTime:i.LocalTime,Time:i.Time,Date:i.Date,LocalDateTime:i.LocalDateTime,DateTime:i.DateTime},P=E;n.default=P})(rh);function yre(n,e,t,r){return rh.driver(n,rh.auth.basic(t,r),{disableLosslessIntegers:!0}).session({database:e,defaultAccessMode:rh.session.READ})}async function _re(n){console.time("loadNeo4JGraph"),console.time("loadNeo4JNodes");const e=await n.run("MATCH (n) RETURN n").then(r=>r.records.map(i=>{const o=i.get("n");return{id:o.identity.toString(),labels:o.labels,properties:o.properties}}));console.timeEnd("loadNeo4JNodes"),console.time("loadNeo4JEdges");const t=await n.run("MATCH ()-[n]->() RETURN n").then(r=>r.records.map(i=>{const o=i.get("n");return{id:o.identity.toString(),source:o.start.toString(),target:o.end.toString(),labels:[o.type],properties:o.properties}}));return console.timeEnd("loadNeo4JEdges"),await n.close(),console.log(e.length,t.length),console.timeEnd("loadNeo4JGraph"),JSON.stringify({nodes:e,edges:t},null,2)}function zE(n){let e;return{c(){e=ee("div"),e.innerHTML='<span class="font-medium">Unable to connect to database.</span>',T(e,"class","p-4 mb-4 text-sm text-red-700 bg-red-100 rounded-lg dark:bg-red-200 dark:text-red-800"),T(e,"role","alert")},m(t,r){fe(t,e,r)},d(t){t&&ue(e)}}}function bre(n){let e,t,r,i,o,s,a,l,u,f,c,d,g,h,v,m,p,y,b,_,w,S,E,P,R,j,U,F,z,D,N,L=n[4]==!0&&zE();return{c(){e=ee("h2"),e.textContent="Connect to database:",t=me(),L&&L.c(),r=me(),i=ee("form"),o=ee("label"),s=qe(`Server URL:
    `),a=ee("input"),l=me(),u=ee("br"),f=me(),c=ee("label"),d=qe(`Username:
    `),g=ee("input"),h=me(),v=ee("br"),m=me(),p=ee("label"),y=qe(`Password:
    `),b=ee("input"),_=me(),w=ee("br"),S=me(),E=ee("label"),P=qe(`Database:
    `),R=ee("input"),j=me(),U=ee("button"),U.textContent="Submit",F=me(),z=ee("button"),z.textContent="Cancel",T(e,"class","font-semibold text-2xl"),T(a,"type","text"),T(a,"class","bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"),T(a,"placeholder","Server URL"),a.required=!0,T(o,"class","block mb-2 text-sm font-medium"),T(g,"type","text"),T(g,"class","bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"),T(g,"placeholder","Username"),g.required=!0,T(c,"class","block mb-2 text-sm font-medium"),T(b,"type","password"),T(b,"class","bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"),T(b,"placeholder","Password"),b.required=!0,T(p,"class","block mb-2 text-sm font-medium"),T(R,"type","text"),T(R,"class","bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"),T(R,"placeholder","Database"),R.required=!0,T(E,"class","block mb-2 text-sm font-medium"),T(U,"class","text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center"),T(z,"class","text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center"),T(i,"id","surveyForm"),T(i,"class","mt-4"),ze(i,"submitted",n[5])},m(X,Q){fe(X,e,Q),fe(X,t,Q),L&&L.m(X,Q),fe(X,r,Q),fe(X,i,Q),B(i,o),B(o,s),B(o,a),Jn(a,n[0]),B(o,l),B(i,u),B(i,f),B(i,c),B(c,d),B(c,g),Jn(g,n[1]),B(c,h),B(i,v),B(i,m),B(i,p),B(p,y),B(p,b),Jn(b,n[2]),B(p,_),B(i,w),B(i,S),B(i,E),B(E,P),B(E,R),Jn(R,n[3]),B(i,j),B(i,U),B(i,F),B(i,z),D||(N=[Te(a,"input",n[8]),Te(g,"input",n[9]),Te(b,"input",n[10]),Te(R,"input",n[11]),Te(U,"click",n[12]),Te(z,"click",n[6]),Te(i,"submit",iO(n[7]))],D=!0)},p(X,[Q]){X[4]==!0?L||(L=zE(),L.c(),L.m(r.parentNode,r)):L&&(L.d(1),L=null),Q&1&&a.value!==X[0]&&Jn(a,X[0]),Q&2&&g.value!==X[1]&&Jn(g,X[1]),Q&4&&b.value!==X[2]&&Jn(b,X[2]),Q&8&&R.value!==X[3]&&Jn(R,X[3]),Q&32&&ze(i,"submitted",X[5])},i:Me,o:Me,d(X){X&&ue(e),X&&ue(t),L&&L.d(X),X&&ue(r),X&&ue(i),D=!1,on(N)}}}function wre(n,e,t){const{close:r}=ur("simple-modal");let i="",o="",s="",a="",l=!1,u=!1;function f(){r()}async function c(){let p;const y=new Promise(async(_,w)=>{p=setTimeout(()=>{w(new Error("timeout"))},5e4)}),b=new Promise(async()=>{console.log("test");const _=yre(i,a,o,s),w=await _re(_);r(),clearTimeout(p),ey.set({text:w}),ry()});await Promise.race([y,b]).catch(_=>{t(4,l=!0),console.error(_.message)})}function d(){i=this.value,t(0,i)}function g(){o=this.value,t(1,o)}function h(){s=this.value,t(2,s)}function v(){a=this.value,t(3,a)}return[i,o,s,a,l,u,f,c,d,g,h,v,()=>t(5,u=!0)]}class Sre extends rt{constructor(e){super(),nt(this,e,wre,bre,Xt,{})}}function WE(n,e,t){const r=n.slice();return r[14]=e[t],r}function KE(n,e,t){const r=n.slice();return r[17]=e[t],r}function GE(n){let e,t,r,i,o=n[17]+"",s,a,l,u;return{c(){e=ee("div"),t=ee("input"),r=me(),i=ee("label"),s=qe(o),a=me(),T(t,"id","Filtered"),T(t,"type","radio"),t.__value=n[17],t.value=t.__value,T(t,"class","w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"),n[9][0].push(t),T(i,"for","Filtered"),T(i,"class","ml-2 text-sm font-medium text-gray-900 dark:text-gray-300"),T(e,"class","flex items-center mr-4")},m(f,c){fe(f,e,c),B(e,t),t.checked=t.__value===n[1],B(e,r),B(e,i),B(i,s),B(e,a),l||(u=Te(t,"change",n[8]),l=!0)},p(f,c){c&2&&(t.checked=t.__value===f[1])},d(f){f&&ue(e),n[9][0].splice(n[9][0].indexOf(t),1),l=!1,u()}}}function YE(n){let e,t=n[14].name+"",r,i;return{c(){e=ee("option"),r=qe(t),i=me(),e.__value=n[14],e.value=e.__value},m(o,s){fe(o,e,s),B(e,r),B(e,i)},p:Me,d(o){o&&ue(e)}}}function Cre(n){let e,t,r,i,o,s,a,l,u,f,c,d,g,h,v,m,p,y,b,_,w,S,E,P,R,j,U,F,z,D,N,L,X,Q,A,k,V,K,H,I=Object.values(td),M=[];for(let W=0;W<I.length;W+=1)M[W]=GE(KE(n,I,W));let G=g0,q=[];for(let W=0;W<G.length;W+=1)q[W]=YE(WE(n,G,W));return{c(){e=ee("div"),t=ee("h2"),t.textContent="Options",r=me(),i=ee("menu"),o=ee("li"),s=ee("h4"),a=qe("Threshold: "),l=qe(n[0]),u=me(),f=ee("input"),c=me(),d=ee("li"),g=ee("h4"),g.textContent="Induction type:",h=me(),v=ee("div");for(let W=0;W<M.length;W+=1)M[W].c();m=me(),p=ee("li"),y=ee("h4"),y.textContent="Selected graph type:",b=me(),_=ee("select");for(let W=0;W<q.length;W+=1)q[W].c();w=me(),S=ee("li"),E=ee("h4"),E.textContent="Edit data:",P=me(),R=ee("button"),R.textContent="Edit Graph",j=me(),U=ee("button"),U.textContent="Edit Workload",F=me(),z=ee("li"),D=ee("h4"),D.textContent="Export schema:",N=me(),L=ee("button"),L.textContent="Export schema",X=me(),Q=ee("li"),A=ee("h4"),A.textContent="Import from Neo4J:",k=me(),V=ee("button"),V.textContent="Import from Neo4J",T(t,"class","font-semibold text-2xl text-gray-900 dark:text-white"),T(s,"class","mb-1 font-semibold text-gray-900 dark:text-white"),T(f,"type","range"),T(f,"min","0"),T(f,"max","1"),T(f,"step",".1"),T(f,"class","w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"),T(g,"class","mb-1 font-semibold text-gray-900 dark:text-white"),T(v,"class","flex"),T(y,"class","mb-1 font-semibold text-gray-900 dark:text-white"),T(_,"class","bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"),n[2]===void 0&&Yi(()=>n[10].call(_)),T(E,"class","mb-1 font-semibold text-gray-900 dark:text-white"),T(R,"class","py-2.5 px-5 mt-2 mb-2 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"),T(U,"class","py-2.5 px-5 mt-2 mb-2 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"),T(D,"class","mb-1 font-semibold text-gray-900 dark:text-white"),T(L,"class","py-2.5 px-5 mt-2 mb-2 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"),T(A,"class","mb-1 font-semibold text-gray-900 dark:text-white"),T(V,"class","py-2.5 px-5 mt-2 mb-2 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"),T(i,"class","space-y-1 max-w-md list-inside"),T(e,"class","m-2")},m(W,ae){fe(W,e,ae),B(e,t),B(e,r),B(e,i),B(i,o),B(o,s),B(s,a),B(s,l),B(o,u),B(o,f),Jn(f,n[0]),B(i,c),B(i,d),B(d,g),B(d,h),B(d,v);for(let le=0;le<M.length;le+=1)M[le].m(v,null);B(i,m),B(i,p),B(p,y),B(p,b),B(p,_);for(let le=0;le<q.length;le+=1)q[le].m(_,null);My(_,n[2]),B(i,w),B(i,S),B(S,E),B(S,P),B(S,R),B(S,j),B(S,U),B(i,F),B(i,z),B(z,D),B(z,N),B(z,L),B(i,X),B(i,Q),B(Q,A),B(Q,k),B(Q,V),K||(H=[Te(f,"change",n[7]),Te(f,"input",n[7]),Te(_,"change",n[10]),Te(R,"click",n[4]),Te(U,"click",n[5]),Te(L,"click",n[11]),Te(V,"click",n[6])],K=!0)},p(W,[ae]){if(ae&1&&bt(l,W[0]),ae&1&&Jn(f,W[0]),ae&2){I=Object.values(td);let le;for(le=0;le<I.length;le+=1){const Pe=KE(W,I,le);M[le]?M[le].p(Pe,ae):(M[le]=GE(Pe),M[le].c(),M[le].m(v,null))}for(;le<M.length;le+=1)M[le].d(1);M.length=I.length}if(ae&0){G=g0;let le;for(le=0;le<G.length;le+=1){const Pe=WE(W,G,le);q[le]?q[le].p(Pe,ae):(q[le]=YE(Pe),q[le].c(),q[le].m(_,null))}for(;le<q.length;le+=1)q[le].d(1);q.length=G.length}ae&4&&My(_,W[2])},i:Me,o:Me,d(W){W&&ue(e),xn(M,W),xn(q,W),K=!1,on(H)}}}function Ere(n,e,t){let r,i,o,s,a;fa(n,p0,p=>t(12,r=p)),fa(n,d0,p=>t(0,i=p)),fa(n,h0,p=>t(1,o=p)),fa(n,v0,p=>t(2,s=p)),fa(n,T3,p=>t(3,a=p));const{open:l}=ur("simple-modal"),u=()=>{l(n2,{content:ey,validator:zQ},{},{onClosed:()=>{ry()}})},f=()=>{l(n2,{content:p0,validator:GQ},{},{onClosed:()=>{try{const p=JSON.parse(r.text);if(!Array.isArray(p))throw new Error("Workload should be array");p.forEach(y=>{if(!("label"in y)||typeof y.label!="string")throw new Error("Workload should have valid labels");if(!("occurence"in y)||typeof y.occurence!="number"||y.occurence<0||y.occurence>1)throw new Error("Workload should have valid occurences")}),ty.set(p)}catch(p){console.error(p.message)}}})},c=()=>{l(Sre)},d=[[]];function g(){i=yA(this.value),d0.set(i)}function h(){o=this.__value,h0.set(o)}function v(){s=bA(this),v0.set(s)}return[i,o,s,a,u,f,c,g,h,d,v,()=>YQ(a.toJSON())]}class Ore extends rt{constructor(e){super(),nt(this,e,Ere,Cre,Xt,{})}}const kre=n=>({}),JE=n=>({}),Tre=n=>({}),QE=n=>({});function Pre(n){let e,t,r,i,o,s,a,l,u;const f=n[6].left,c=Zr(f,n,n[5],QE),d=n[6].right,g=Zr(d,n,n[5],JE);return{c(){e=ee("div"),t=ee("div"),c&&c.c(),r=me(),i=ee("div"),o=me(),s=ee("div"),g&&g.c(),T(t,"class","left svelte-4uhoco"),oi(t,"flex-basis",n[0]),T(i,"class","splitter bg-black dark:bg-gray-500 svelte-4uhoco"),T(s,"class","right bg-gray-50 dark:bg-gray-800 svelte-4uhoco"),T(e,"class","split-pane svelte-4uhoco")},m(h,v){fe(h,e,v),B(e,t),c&&c.m(t,null),n[7](t),B(e,r),B(e,i),B(e,o),B(e,s),g&&g.m(s,null),a=!0,l||(u=[Te(i,"mousedown",n[2]),Te(e,"mousemove",n[3]),Te(e,"mouseup",n[4])],l=!0)},p(h,[v]){c&&c.p&&(!a||v&32)&&$r(c,f,h,h[5],a?Xr(f,h[5],v,Tre):ei(h[5]),QE),(!a||v&1)&&oi(t,"flex-basis",h[0]),g&&g.p&&(!a||v&32)&&$r(g,d,h,h[5],a?Xr(d,h[5],v,kre):ei(h[5]),JE)},i(h){a||($(c,h),$(g,h),a=!0)},o(h){te(c,h),te(g,h),a=!1},d(h){h&&ue(e),c&&c.d(h),n[7](null),g&&g.d(h),l=!1,on(u)}}}function Ire(n,e,t){let{$$slots:r={},$$scope:i}=e,{leftInitialSize:o="80%"}=e,s,a=!1;function l(){a=!0}function u(d){if(!a)return;const g=s.getBoundingClientRect().left;t(1,s.style.flexBasis=d.clientX-g+"px",s)}function f(){!a||(a=!1)}function c(d){wt[d?"unshift":"push"](()=>{s=d,t(1,s)})}return n.$$set=d=>{"leftInitialSize"in d&&t(0,o=d.leftInitialSize),"$$scope"in d&&t(5,i=d.$$scope)},[o,s,l,u,f,i,r,c]}class Are extends rt{constructor(e){super(),nt(this,e,Ire,Pre,Xt,{leftInitialSize:0})}}class Rre extends rt{constructor(e){super(),nt(this,e,null,null,Xt,{})}}function ZE(n){let e,t,r;var i=n[0].component;function o(s){return{props:{graph:s[0].graph}}}return i&&(e=new i(o(n))),{c(){e&&ke(e.$$.fragment),t=xt()},m(s,a){e&&Ee(e,s,a),fe(s,t,a),r=!0},p(s,a){const l={};if(a&1&&(l.graph=s[0].graph),i!==(i=s[0].component)){if(e){Fe();const u=e;te(u.$$.fragment,1,0,()=>{Oe(u,1)}),Ue()}i?(e=new i(o(s)),ke(e.$$.fragment),$(e.$$.fragment,1),Ee(e,t.parentNode,t)):e=null}else i&&e.$set(l)},i(s){r||(e&&$(e.$$.fragment,s),r=!0)},o(s){e&&te(e.$$.fragment,s),r=!1},d(s){s&&ue(t),e&&Oe(e,s)}}}function xre(n){let e=n[0].name,t,r,i=ZE(n);return{c(){i.c(),t=xt()},m(o,s){i.m(o,s),fe(o,t,s),r=!0},p(o,s){s&1&&Xt(e,e=o[0].name)?(Fe(),te(i,1,1,Me),Ue(),i=ZE(o),i.c(),$(i,1),i.m(t.parentNode,t)):i.p(o,s)},i(o){r||($(i),r=!0)},o(o){te(i),r=!1},d(o){o&&ue(t),i.d(o)}}}function Nre(n){let e,t;return e=new Ore({}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Mre(n){let e,t;return e=new hO({props:{$$slots:{default:[Nre]},$$scope:{ctx:n}}}),{c(){ke(e.$$.fragment)},m(r,i){Ee(e,r,i),t=!0},p(r,i){const o={};i&2&&(o.$$scope={dirty:i,ctx:r}),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){te(e.$$.fragment,r),t=!1},d(r){Oe(e,r)}}}function Dre(n){let e,t,r,i,o;return e=new Rre({}),i=new Are({props:{$$slots:{right:[Mre],left:[xre]},$$scope:{ctx:n}}}),{c(){ke(e.$$.fragment),t=me(),r=ee("main"),ke(i.$$.fragment),T(r,"class","bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-100")},m(s,a){Ee(e,s,a),fe(s,t,a),fe(s,r,a),Ee(i,r,null),o=!0},p(s,[a]){const l={};a&3&&(l.$$scope={dirty:a,ctx:s}),i.$set(l)},i(s){o||($(e.$$.fragment,s),$(i.$$.fragment,s),o=!0)},o(s){te(e.$$.fragment,s),te(i.$$.fragment,s),o=!1},d(s){Oe(e,s),s&&ue(t),s&&ue(r),Oe(i)}}}function jre(n,e,t){let r;return fa(n,v0,i=>t(0,r=i)),[r]}class Lre extends rt{constructor(e){super(),nt(this,e,jre,Dre,Xt,{})}}new Lre({target:document.getElementById("app")})});export default Bre();
